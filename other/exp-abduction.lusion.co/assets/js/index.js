!function t(e, r, n) {
    function i(o, s) {
        if (!r[o]) {
            if (!e[o]) {
                var l = "function" == typeof require && require;
                if (!s && l)
                    return l(o, !0);
                if (a)
                    return a(o, !0);
                var c = new Error("Cannot find module '" + o + "'");
                throw c.code = "MODULE_NOT_FOUND",
                c
            }
            var h = r[o] = {
                exports: {}
            };
            e[o][0].call(h.exports, (function(t) {
                return i(e[o][1][t] || t)
            }
            ), h, h.exports, t, e, r, n)
        }
        return r[o].exports
    }
    for (var a = "function" == typeof require && require, o = 0; o < n.length; o++)
        i(n[o]);
    return i
}({
    1: [function(require, module, exports) {
        (function(global) {
            (function() {
                "use strict";
                function _defineProperty2(t, e, r) {
                    return e in t ? Object.defineProperty(t, e, {
                        value: r,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = r,
                    t
                }
                function _get2() {
                    return _get2 = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(t, e, r) {
                        var n = _superPropBase2(t, e);
                        if (n) {
                            var i = Object.getOwnPropertyDescriptor(n, e);
                            return i.get ? i.get.call(arguments.length < 3 ? t : r) : i.value
                        }
                    }
                    ,
                    _get2.apply(this, arguments)
                }
                function _superPropBase2(t, e) {
                    for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = _getPrototypeOf2(t)); )
                        ;
                    return t
                }
                function _slicedToArray2(t, e) {
                    return _arrayWithHoles2(t) || _iterableToArrayLimit2(t, e) || _unsupportedIterableToArray2(t, e) || _nonIterableRest2()
                }
                function _nonIterableRest2() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }
                function _iterableToArrayLimit2(t, e) {
                    var r = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                    if (null != r) {
                        var n, i, a = [], o = !0, s = !1;
                        try {
                            for (r = r.call(t); !(o = (n = r.next()).done) && (a.push(n.value),
                            !e || a.length !== e); o = !0)
                                ;
                        } catch (t) {
                            s = !0,
                            i = t
                        } finally {
                            try {
                                o || null == r.return || r.return()
                            } finally {
                                if (s)
                                    throw i
                            }
                        }
                        return a
                    }
                }
                function _arrayWithHoles2(t) {
                    if (Array.isArray(t))
                        return t
                }
                function _toConsumableArray2(t) {
                    return _arrayWithoutHoles2(t) || _iterableToArray2(t) || _unsupportedIterableToArray2(t) || _nonIterableSpread2()
                }
                function _nonIterableSpread2() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }
                function _iterableToArray2(t) {
                    if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"])
                        return Array.from(t)
                }
                function _arrayWithoutHoles2(t) {
                    if (Array.isArray(t))
                        return _arrayLikeToArray2(t)
                }
                function _inherits2(t, e) {
                    if ("function" != typeof e && null !== e)
                        throw new TypeError("Super expression must either be null or a function");
                    t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(t, "prototype", {
                        writable: !1
                    }),
                    e && _setPrototypeOf2(t, e)
                }
                function _createSuper2(t) {
                    var e = _isNativeReflectConstruct2();
                    return function() {
                        var r, n = _getPrototypeOf2(t);
                        if (e) {
                            var i = _getPrototypeOf2(this).constructor;
                            r = Reflect.construct(n, arguments, i)
                        } else
                            r = n.apply(this, arguments);
                        return _possibleConstructorReturn2(this, r)
                    }
                }
                function _possibleConstructorReturn2(t, e) {
                    if (e && ("object" === _typeof2(e) || "function" == typeof e))
                        return e;
                    if (void 0 !== e)
                        throw new TypeError("Derived constructors may only return object or undefined");
                    return _assertThisInitialized2(t)
                }
                function _assertThisInitialized2(t) {
                    if (void 0 === t)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return t
                }
                function _wrapNativeSuper2(t) {
                    var e = "function" == typeof Map ? new Map : void 0;
                    return _wrapNativeSuper2 = function(t) {
                        if (null === t || !_isNativeFunction2(t))
                            return t;
                        if ("function" != typeof t)
                            throw new TypeError("Super expression must either be null or a function");
                        if ("undefined" != typeof e) {
                            if (e.has(t))
                                return e.get(t);
                            e.set(t, r)
                        }
                        function r() {
                            return _construct2(t, arguments, _getPrototypeOf2(this).constructor)
                        }
                        return r.prototype = Object.create(t.prototype, {
                            constructor: {
                                value: r,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        _setPrototypeOf2(r, t)
                    }
                    ,
                    _wrapNativeSuper2(t)
                }
                function _construct2(t, e, r) {
                    return _construct2 = _isNativeReflectConstruct2() ? Reflect.construct : function(t, e, r) {
                        var n = [null];
                        n.push.apply(n, e);
                        var i = new (Function.bind.apply(t, n));
                        return r && _setPrototypeOf2(i, r.prototype),
                        i
                    }
                    ,
                    _construct2.apply(null, arguments)
                }
                function _isNativeReflectConstruct2() {
                    if ("undefined" == typeof Reflect || !Reflect.construct)
                        return !1;
                    if (Reflect.construct.sham)
                        return !1;
                    if ("function" == typeof Proxy)
                        return !0;
                    try {
                        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                        ))),
                        !0
                    } catch (t) {
                        return !1
                    }
                }
                function _isNativeFunction2(t) {
                    return -1 !== Function.toString.call(t).indexOf("[native code]")
                }
                function _setPrototypeOf2(t, e) {
                    return _setPrototypeOf2 = Object.setPrototypeOf || function(t, e) {
                        return t.__proto__ = e,
                        t
                    }
                    ,
                    _setPrototypeOf2(t, e)
                }
                function _getPrototypeOf2(t) {
                    return _getPrototypeOf2 = Object.setPrototypeOf ? Object.getPrototypeOf : function(t) {
                        return t.__proto__ || Object.getPrototypeOf(t)
                    }
                    ,
                    _getPrototypeOf2(t)
                }
                function _createForOfIteratorHelper2(t, e) {
                    var r = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                    if (!r) {
                        if (Array.isArray(t) || (r = _unsupportedIterableToArray2(t)) || e && t && "number" == typeof t.length) {
                            r && (t = r);
                            var n = 0
                              , i = function() {};
                            return {
                                s: i,
                                n: function() {
                                    return n >= t.length ? {
                                        done: !0
                                    } : {
                                        done: !1,
                                        value: t[n++]
                                    }
                                },
                                e: function(t) {
                                    throw t
                                },
                                f: i
                            }
                        }
                        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                    }
                    var a, o = !0, s = !1;
                    return {
                        s: function() {
                            r = r.call(t)
                        },
                        n: function() {
                            var t = r.next();
                            return o = t.done,
                            t
                        },
                        e: function(t) {
                            s = !0,
                            a = t
                        },
                        f: function() {
                            try {
                                o || null == r.return || r.return()
                            } finally {
                                if (s)
                                    throw a
                            }
                        }
                    }
                }
                function _unsupportedIterableToArray2(t, e) {
                    if (t) {
                        if ("string" == typeof t)
                            return _arrayLikeToArray2(t, e);
                        var r = Object.prototype.toString.call(t).slice(8, -1);
                        return "Object" === r && t.constructor && (r = t.constructor.name),
                        "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? _arrayLikeToArray2(t, e) : void 0
                    }
                }
                function _arrayLikeToArray2(t, e) {
                    (null == e || e > t.length) && (e = t.length);
                    for (var r = 0, n = new Array(e); r < e; r++)
                        n[r] = t[r];
                    return n
                }
                function _classCallCheck2(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }
                function _defineProperties(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var n = e[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(t, n.key, n)
                    }
                }
                function _createClass2(t, e, r) {
                    return e && _defineProperties(t.prototype, e),
                    r && _defineProperties(t, r),
                    Object.defineProperty(t, "prototype", {
                        writable: !1
                    }),
                    t
                }
                function _typeof2(t) {
                    return _typeof2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                        return typeof t
                    }
                    : function(t) {
                        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                    }
                    ,
                    _typeof2(t)
                }
                var t, e;
                t = void 0,
                e = function(exports) {
                    function _asyncIterator(t) {
                        var e, r, n, i = 2;
                        for ("undefined" != typeof Symbol && (r = Symbol.asyncIterator,
                        n = Symbol.iterator); i--; ) {
                            if (r && null != (e = t[r]))
                                return e.call(t);
                            if (n && null != (e = t[n]))
                                return new AsyncFromSyncIterator(e.call(t));
                            r = "@@asyncIterator",
                            n = "@@iterator"
                        }
                        throw new TypeError("Object is not async iterable")
                    }
                    function AsyncFromSyncIterator(t) {
                        function e(t) {
                            if (Object(t) !== t)
                                return Promise.reject(new TypeError(t + " is not an object."));
                            var e = t.done;
                            return Promise.resolve(t.value).then((function(t) {
                                return {
                                    value: t,
                                    done: e
                                }
                            }
                            ))
                        }
                        return AsyncFromSyncIterator = function(t) {
                            this.s = t,
                            this.n = t.next
                        }
                        ,
                        AsyncFromSyncIterator.prototype = {
                            s: null,
                            n: null,
                            next: function() {
                                return e(this.n.apply(this.s, arguments))
                            },
                            return: function(t) {
                                var r = this.s.return;
                                return void 0 === r ? Promise.resolve({
                                    value: t,
                                    done: !0
                                }) : e(r.apply(this.s, arguments))
                            },
                            throw: function(t) {
                                var r = this.s.return;
                                return void 0 === r ? Promise.reject(t) : e(r.apply(this.s, arguments))
                            }
                        },
                        new AsyncFromSyncIterator(t)
                    }
                    var REACT_ELEMENT_TYPE;
                    function _jsx(t, e, r, n) {
                        REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = "function" == typeof Symbol && Symbol.for && Symbol.for("react.element") || 60103);
                        var i = t && t.defaultProps
                          , a = arguments.length - 3;
                        if (e || 0 === a || (e = {
                            children: void 0
                        }),
                        1 === a)
                            e.children = n;
                        else if (a > 1) {
                            for (var o = new Array(a), s = 0; s < a; s++)
                                o[s] = arguments[s + 3];
                            e.children = o
                        }
                        if (e && i)
                            for (var l in i)
                                void 0 === e[l] && (e[l] = i[l]);
                        else
                            e || (e = i || {});
                        return {
                            $$typeof: REACT_ELEMENT_TYPE,
                            type: t,
                            key: void 0 === r ? null : "" + r,
                            ref: null,
                            props: e,
                            _owner: null
                        }
                    }
                    function ownKeys(t, e) {
                        var r = Object.keys(t);
                        if (Object.getOwnPropertySymbols) {
                            var n = Object.getOwnPropertySymbols(t);
                            e && (n = n.filter((function(e) {
                                return Object.getOwnPropertyDescriptor(t, e).enumerable
                            }
                            ))),
                            r.push.apply(r, n)
                        }
                        return r
                    }
                    function _objectSpread2(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? ownKeys(Object(r), !0).forEach((function(e) {
                                _defineProperty(t, e, r[e])
                            }
                            )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : ownKeys(Object(r)).forEach((function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            }
                            ))
                        }
                        return t
                    }
                    function _typeof(t) {
                        return _typeof = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
                            return _typeof2(t)
                        }
                        : function(t) {
                            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t)
                        }
                        ,
                        _typeof(t)
                    }
                    function _wrapRegExp() {
                        _wrapRegExp = function(t, e) {
                            return new r(t,void 0,e)
                        }
                        ;
                        var t = RegExp.prototype
                          , e = new WeakMap;
                        function r(t, n, i) {
                            var a = new RegExp(t,n);
                            return e.set(a, i || e.get(t)),
                            _setPrototypeOf(a, r.prototype)
                        }
                        function n(t, r) {
                            var n = e.get(r);
                            return Object.keys(n).reduce((function(e, r) {
                                return e[r] = t[n[r]],
                                e
                            }
                            ), Object.create(null))
                        }
                        return _inherits(r, RegExp),
                        r.prototype.exec = function(e) {
                            var r = t.exec.call(this, e);
                            return r && (r.groups = n(r, this)),
                            r
                        }
                        ,
                        r.prototype[Symbol.replace] = function(r, i) {
                            if ("string" == typeof i) {
                                var a = e.get(this);
                                return t[Symbol.replace].call(this, r, i.replace(/\$<([^>]+)>/g, (function(t, e) {
                                    return "$" + a[e]
                                }
                                )))
                            }
                            if ("function" == typeof i) {
                                var o = this;
                                return t[Symbol.replace].call(this, r, (function() {
                                    var t = arguments;
                                    return "object" != _typeof2(t[t.length - 1]) && (t = [].slice.call(t)).push(n(t, o)),
                                    i.apply(this, t)
                                }
                                ))
                            }
                            return t[Symbol.replace].call(this, r, i)
                        }
                        ,
                        _wrapRegExp.apply(this, arguments)
                    }
                    function _AwaitValue(t) {
                        this.wrapped = t
                    }
                    function _AsyncGenerator(t) {
                        var e, r;
                        function n(e, r) {
                            try {
                                var a = t[e](r)
                                  , o = a.value
                                  , s = o instanceof _AwaitValue;
                                Promise.resolve(s ? o.wrapped : o).then((function(t) {
                                    s ? n("return" === e ? "return" : "next", t) : i(a.done ? "return" : "normal", t)
                                }
                                ), (function(t) {
                                    n("throw", t)
                                }
                                ))
                            } catch (t) {
                                i("throw", t)
                            }
                        }
                        function i(t, i) {
                            switch (t) {
                            case "return":
                                e.resolve({
                                    value: i,
                                    done: !0
                                });
                                break;
                            case "throw":
                                e.reject(i);
                                break;
                            default:
                                e.resolve({
                                    value: i,
                                    done: !1
                                })
                            }
                            (e = e.next) ? n(e.key, e.arg) : r = null
                        }
                        this._invoke = function(t, i) {
                            return new Promise((function(a, o) {
                                var s = {
                                    key: t,
                                    arg: i,
                                    resolve: a,
                                    reject: o,
                                    next: null
                                };
                                r ? r = r.next = s : (e = r = s,
                                n(t, i))
                            }
                            ))
                        }
                        ,
                        "function" != typeof t.return && (this.return = void 0)
                    }
                    function _wrapAsyncGenerator(t) {
                        return function() {
                            return new _AsyncGenerator(t.apply(this, arguments))
                        }
                    }
                    function _awaitAsyncGenerator(t) {
                        return new _AwaitValue(t)
                    }
                    function _asyncGeneratorDelegate(t, e) {
                        var r = {}
                          , n = !1;
                        function i(r, i) {
                            return n = !0,
                            i = new Promise((function(e) {
                                e(t[r](i))
                            }
                            )),
                            {
                                done: !1,
                                value: e(i)
                            }
                        }
                        return r["undefined" != typeof Symbol && Symbol.iterator || "@@iterator"] = function() {
                            return this
                        }
                        ,
                        r.next = function(t) {
                            return n ? (n = !1,
                            t) : i("next", t)
                        }
                        ,
                        "function" == typeof t.throw && (r.throw = function(t) {
                            if (n)
                                throw n = !1,
                                t;
                            return i("throw", t)
                        }
                        ),
                        "function" == typeof t.return && (r.return = function(t) {
                            return n ? (n = !1,
                            t) : i("return", t)
                        }
                        ),
                        r
                    }
                    function asyncGeneratorStep(t, e, r, n, i, a, o) {
                        try {
                            var s = t[a](o)
                              , l = s.value
                        } catch (t) {
                            return void r(t)
                        }
                        s.done ? e(l) : Promise.resolve(l).then(n, i)
                    }
                    function _asyncToGenerator(t) {
                        return function() {
                            var e = this
                              , r = arguments;
                            return new Promise((function(n, i) {
                                var a = t.apply(e, r);
                                function o(t) {
                                    asyncGeneratorStep(a, n, i, o, s, "next", t)
                                }
                                function s(t) {
                                    asyncGeneratorStep(a, n, i, o, s, "throw", t)
                                }
                                o(void 0)
                            }
                            ))
                        }
                    }
                    function _classCallCheck(t, e) {
                        if (!(t instanceof e))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    function _defineProperties(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            n.enumerable = n.enumerable || !1,
                            n.configurable = !0,
                            "value"in n && (n.writable = !0),
                            Object.defineProperty(t, n.key, n)
                        }
                    }
                    function _createClass(t, e, r) {
                        return e && _defineProperties(t.prototype, e),
                        r && _defineProperties(t, r),
                        Object.defineProperty(t, "prototype", {
                            writable: !1
                        }),
                        t
                    }
                    function _defineEnumerableProperties(t, e) {
                        for (var r in e)
                            (a = e[r]).configurable = a.enumerable = !0,
                            "value"in a && (a.writable = !0),
                            Object.defineProperty(t, r, a);
                        if (Object.getOwnPropertySymbols)
                            for (var n = Object.getOwnPropertySymbols(e), i = 0; i < n.length; i++) {
                                var a, o = n[i];
                                (a = e[o]).configurable = a.enumerable = !0,
                                "value"in a && (a.writable = !0),
                                Object.defineProperty(t, o, a)
                            }
                        return t
                    }
                    function _defaults(t, e) {
                        for (var r = Object.getOwnPropertyNames(e), n = 0; n < r.length; n++) {
                            var i = r[n]
                              , a = Object.getOwnPropertyDescriptor(e, i);
                            a && a.configurable && void 0 === t[i] && Object.defineProperty(t, i, a)
                        }
                        return t
                    }
                    function _defineProperty(t, e, r) {
                        return e in t ? Object.defineProperty(t, e, {
                            value: r,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : t[e] = r,
                        t
                    }
                    function _extends() {
                        return _extends = Object.assign || function(t) {
                            for (var e = 1; e < arguments.length; e++) {
                                var r = arguments[e];
                                for (var n in r)
                                    Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n])
                            }
                            return t
                        }
                        ,
                        _extends.apply(this, arguments)
                    }
                    function _objectSpread(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? Object(arguments[e]) : {}
                              , n = Object.keys(r);
                            "function" == typeof Object.getOwnPropertySymbols && n.push.apply(n, Object.getOwnPropertySymbols(r).filter((function(t) {
                                return Object.getOwnPropertyDescriptor(r, t).enumerable
                            }
                            ))),
                            n.forEach((function(e) {
                                _defineProperty(t, e, r[e])
                            }
                            ))
                        }
                        return t
                    }
                    function _inherits(t, e) {
                        if ("function" != typeof e && null !== e)
                            throw new TypeError("Super expression must either be null or a function");
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(t, "prototype", {
                            writable: !1
                        }),
                        e && _setPrototypeOf(t, e)
                    }
                    function _inheritsLoose(t, e) {
                        t.prototype = Object.create(e.prototype),
                        t.prototype.constructor = t,
                        _setPrototypeOf(t, e)
                    }
                    function _getPrototypeOf(t) {
                        return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(t) {
                            return t.__proto__ || Object.getPrototypeOf(t)
                        }
                        ,
                        _getPrototypeOf(t)
                    }
                    function _setPrototypeOf(t, e) {
                        return _setPrototypeOf = Object.setPrototypeOf || function(t, e) {
                            return t.__proto__ = e,
                            t
                        }
                        ,
                        _setPrototypeOf(t, e)
                    }
                    function _isNativeReflectConstruct() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            ))),
                            !0
                        } catch (t) {
                            return !1
                        }
                    }
                    function _construct(t, e, r) {
                        return _construct = _isNativeReflectConstruct() ? Reflect.construct : function(t, e, r) {
                            var n = [null];
                            n.push.apply(n, e);
                            var i = new (Function.bind.apply(t, n));
                            return r && _setPrototypeOf(i, r.prototype),
                            i
                        }
                        ,
                        _construct.apply(null, arguments)
                    }
                    function _isNativeFunction(t) {
                        return -1 !== Function.toString.call(t).indexOf("[native code]")
                    }
                    function _wrapNativeSuper(t) {
                        var e = "function" == typeof Map ? new Map : void 0;
                        return _wrapNativeSuper = function(t) {
                            if (null === t || !_isNativeFunction(t))
                                return t;
                            if ("function" != typeof t)
                                throw new TypeError("Super expression must either be null or a function");
                            if (void 0 !== e) {
                                if (e.has(t))
                                    return e.get(t);
                                e.set(t, r)
                            }
                            function r() {
                                return _construct(t, arguments, _getPrototypeOf(this).constructor)
                            }
                            return r.prototype = Object.create(t.prototype, {
                                constructor: {
                                    value: r,
                                    enumerable: !1,
                                    writable: !0,
                                    configurable: !0
                                }
                            }),
                            _setPrototypeOf(r, t)
                        }
                        ,
                        _wrapNativeSuper(t)
                    }
                    function _instanceof(t, e) {
                        return null != e && "undefined" != typeof Symbol && e[Symbol.hasInstance] ? !!e[Symbol.hasInstance](t) : t instanceof e
                    }
                    function _interopRequireDefault(t) {
                        return t && t.__esModule ? t : {
                            default: t
                        }
                    }
                    function _getRequireWildcardCache(t) {
                        if ("function" != typeof WeakMap)
                            return null;
                        var e = new WeakMap
                          , r = new WeakMap;
                        return (_getRequireWildcardCache = function(t) {
                            return t ? r : e
                        }
                        )(t)
                    }
                    function _interopRequireWildcard(t, e) {
                        if (!e && t && t.__esModule)
                            return t;
                        if (null === t || "object" != _typeof2(t) && "function" != typeof t)
                            return {
                                default: t
                            };
                        var r = _getRequireWildcardCache(e);
                        if (r && r.has(t))
                            return r.get(t);
                        var n = {}
                          , i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                        for (var a in t)
                            if ("default" !== a && Object.prototype.hasOwnProperty.call(t, a)) {
                                var o = i ? Object.getOwnPropertyDescriptor(t, a) : null;
                                o && (o.get || o.set) ? Object.defineProperty(n, a, o) : n[a] = t[a]
                            }
                        return n.default = t,
                        r && r.set(t, n),
                        n
                    }
                    function _newArrowCheck(t, e) {
                        if (t !== e)
                            throw new TypeError("Cannot instantiate an arrow function")
                    }
                    function _objectDestructuringEmpty(t) {
                        if (null == t)
                            throw new TypeError("Cannot destructure undefined")
                    }
                    function _objectWithoutPropertiesLoose(t, e) {
                        if (null == t)
                            return {};
                        var r, n, i = {}, a = Object.keys(t);
                        for (n = 0; n < a.length; n++)
                            r = a[n],
                            e.indexOf(r) >= 0 || (i[r] = t[r]);
                        return i
                    }
                    function _objectWithoutProperties(t, e) {
                        if (null == t)
                            return {};
                        var r, n, i = _objectWithoutPropertiesLoose(t, e);
                        if (Object.getOwnPropertySymbols) {
                            var a = Object.getOwnPropertySymbols(t);
                            for (n = 0; n < a.length; n++)
                                r = a[n],
                                e.indexOf(r) >= 0 || Object.prototype.propertyIsEnumerable.call(t, r) && (i[r] = t[r])
                        }
                        return i
                    }
                    function _assertThisInitialized(t) {
                        if (void 0 === t)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return t
                    }
                    function _possibleConstructorReturn(t, e) {
                        if (e && ("object" == _typeof2(e) || "function" == typeof e))
                            return e;
                        if (void 0 !== e)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return _assertThisInitialized(t)
                    }
                    function _createSuper(t) {
                        var e = _isNativeReflectConstruct();
                        return function() {
                            var r, n = _getPrototypeOf(t);
                            if (e) {
                                var i = _getPrototypeOf(this).constructor;
                                r = Reflect.construct(n, arguments, i)
                            } else
                                r = n.apply(this, arguments);
                            return _possibleConstructorReturn(this, r)
                        }
                    }
                    function _superPropBase(t, e) {
                        for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = _getPrototypeOf(t)); )
                            ;
                        return t
                    }
                    function _get() {
                        return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(t, e, r) {
                            var n = _superPropBase(t, e);
                            if (n) {
                                var i = Object.getOwnPropertyDescriptor(n, e);
                                return i.get ? i.get.call(arguments.length < 3 ? t : r) : i.value
                            }
                        }
                        ,
                        _get.apply(this, arguments)
                    }
                    function set(t, e, r, n) {
                        return set = "undefined" != typeof Reflect && Reflect.set ? Reflect.set : function(t, e, r, n) {
                            var i, a = _superPropBase(t, e);
                            if (a) {
                                if ((i = Object.getOwnPropertyDescriptor(a, e)).set)
                                    return i.set.call(n, r),
                                    !0;
                                if (!i.writable)
                                    return !1
                            }
                            if (i = Object.getOwnPropertyDescriptor(n, e)) {
                                if (!i.writable)
                                    return !1;
                                i.value = r,
                                Object.defineProperty(n, e, i)
                            } else
                                _defineProperty(n, e, r);
                            return !0
                        }
                        ,
                        set(t, e, r, n)
                    }
                    function _set(t, e, r, n, i) {
                        if (!set(t, e, r, n || t) && i)
                            throw new Error("failed to set property");
                        return r
                    }
                    function _taggedTemplateLiteral(t, e) {
                        return e || (e = t.slice(0)),
                        Object.freeze(Object.defineProperties(t, {
                            raw: {
                                value: Object.freeze(e)
                            }
                        }))
                    }
                    function _taggedTemplateLiteralLoose(t, e) {
                        return e || (e = t.slice(0)),
                        t.raw = e,
                        t
                    }
                    function _readOnlyError(t) {
                        throw new TypeError('"' + t + '" is read-only')
                    }
                    function _writeOnlyError(t) {
                        throw new TypeError('"' + t + '" is write-only')
                    }
                    function _classNameTDZError(t) {
                        throw new Error('Class "' + t + '" cannot be referenced in computed property keys.')
                    }
                    function _temporalUndefined() {}
                    function _tdz(t) {
                        throw new ReferenceError(t + " is not defined - temporal dead zone")
                    }
                    function _temporalRef(t, e) {
                        return t === _temporalUndefined ? _tdz(e) : t
                    }
                    function _slicedToArray(t, e) {
                        return _arrayWithHoles(t) || _iterableToArrayLimit(t, e) || _unsupportedIterableToArray(t, e) || _nonIterableRest()
                    }
                    function _slicedToArrayLoose(t, e) {
                        return _arrayWithHoles(t) || _iterableToArrayLimitLoose(t, e) || _unsupportedIterableToArray(t, e) || _nonIterableRest()
                    }
                    function _toArray(t) {
                        return _arrayWithHoles(t) || _iterableToArray(t) || _unsupportedIterableToArray(t) || _nonIterableRest()
                    }
                    function _toConsumableArray(t) {
                        return _arrayWithoutHoles(t) || _iterableToArray(t) || _unsupportedIterableToArray(t) || _nonIterableSpread()
                    }
                    function _arrayWithoutHoles(t) {
                        if (Array.isArray(t))
                            return _arrayLikeToArray(t)
                    }
                    function _arrayWithHoles(t) {
                        if (Array.isArray(t))
                            return t
                    }
                    function _maybeArrayLike(t, e, r) {
                        if (e && !Array.isArray(e) && "number" == typeof e.length) {
                            var n = e.length;
                            return _arrayLikeToArray(e, void 0 !== r && r < n ? r : n)
                        }
                        return t(e, r)
                    }
                    function _iterableToArray(t) {
                        if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"])
                            return Array.from(t)
                    }
                    function _iterableToArrayLimit(t, e) {
                        var r = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                        if (null != r) {
                            var n, i, a = [], o = !0, s = !1;
                            try {
                                for (r = r.call(t); !(o = (n = r.next()).done) && (a.push(n.value),
                                !e || a.length !== e); o = !0)
                                    ;
                            } catch (t) {
                                s = !0,
                                i = t
                            } finally {
                                try {
                                    o || null == r.return || r.return()
                                } finally {
                                    if (s)
                                        throw i
                                }
                            }
                            return a
                        }
                    }
                    function _iterableToArrayLimitLoose(t, e) {
                        var r = t && ("undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]);
                        if (null != r) {
                            var n = [];
                            for (r = r.call(t),
                            _step; !(_step = r.next()).done && (n.push(_step.value),
                            !e || n.length !== e); )
                                ;
                            return n
                        }
                    }
                    function _unsupportedIterableToArray(t, e) {
                        if (t) {
                            if ("string" == typeof t)
                                return _arrayLikeToArray(t, e);
                            var r = Object.prototype.toString.call(t).slice(8, -1);
                            return "Object" === r && t.constructor && (r = t.constructor.name),
                            "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? _arrayLikeToArray(t, e) : void 0
                        }
                    }
                    function _arrayLikeToArray(t, e) {
                        (null == e || e > t.length) && (e = t.length);
                        for (var r = 0, n = new Array(e); r < e; r++)
                            n[r] = t[r];
                        return n
                    }
                    function _nonIterableSpread() {
                        throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                    }
                    function _nonIterableRest() {
                        throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                    }
                    function _createForOfIteratorHelper(t, e) {
                        var r = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                        if (!r) {
                            if (Array.isArray(t) || (r = _unsupportedIterableToArray(t)) || e && t && "number" == typeof t.length) {
                                r && (t = r);
                                var n = 0
                                  , i = function() {};
                                return {
                                    s: i,
                                    n: function() {
                                        return n >= t.length ? {
                                            done: !0
                                        } : {
                                            done: !1,
                                            value: t[n++]
                                        }
                                    },
                                    e: function(t) {
                                        throw t
                                    },
                                    f: i
                                }
                            }
                            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                        }
                        var a, o = !0, s = !1;
                        return {
                            s: function() {
                                r = r.call(t)
                            },
                            n: function() {
                                var t = r.next();
                                return o = t.done,
                                t
                            },
                            e: function(t) {
                                s = !0,
                                a = t
                            },
                            f: function() {
                                try {
                                    o || null == r.return || r.return()
                                } finally {
                                    if (s)
                                        throw a
                                }
                            }
                        }
                    }
                    function _createForOfIteratorHelperLoose(t, e) {
                        var r = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                        if (r)
                            return (r = r.call(t)).next.bind(r);
                        if (Array.isArray(t) || (r = _unsupportedIterableToArray(t)) || e && t && "number" == typeof t.length) {
                            r && (t = r);
                            var n = 0;
                            return function() {
                                return n >= t.length ? {
                                    done: !0
                                } : {
                                    done: !1,
                                    value: t[n++]
                                }
                            }
                        }
                        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                    }
                    function _skipFirstGeneratorNext(t) {
                        return function() {
                            var e = t.apply(this, arguments);
                            return e.next(),
                            e
                        }
                    }
                    function _toPrimitive(t, e) {
                        if ("object" != _typeof2(t) || null === t)
                            return t;
                        var r = t[Symbol.toPrimitive];
                        if (void 0 !== r) {
                            var n = r.call(t, e || "default");
                            if ("object" != _typeof2(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return ("string" === e ? String : Number)(t)
                    }
                    function _toPropertyKey(t) {
                        var e = _toPrimitive(t, "string");
                        return "symbol" == _typeof2(e) ? e : String(e)
                    }
                    function _initializerWarningHelper(t, e) {
                        throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")
                    }
                    function _initializerDefineProperty(t, e, r, n) {
                        r && Object.defineProperty(t, e, {
                            enumerable: r.enumerable,
                            configurable: r.configurable,
                            writable: r.writable,
                            value: r.initializer ? r.initializer.call(n) : void 0
                        })
                    }
                    function _applyDecoratedDescriptor(t, e, r, n, i) {
                        var a = {};
                        return Object.keys(n).forEach((function(t) {
                            a[t] = n[t]
                        }
                        )),
                        a.enumerable = !!a.enumerable,
                        a.configurable = !!a.configurable,
                        ("value"in a || a.initializer) && (a.writable = !0),
                        a = r.slice().reverse().reduce((function(r, n) {
                            return n(t, e, r) || r
                        }
                        ), a),
                        i && void 0 !== a.initializer && (a.value = a.initializer ? a.initializer.call(i) : void 0,
                        a.initializer = void 0),
                        void 0 === a.initializer && (Object.defineProperty(t, e, a),
                        a = null),
                        a
                    }
                    _AsyncGenerator.prototype["function" == typeof Symbol && Symbol.asyncIterator || "@@asyncIterator"] = function() {
                        return this
                    }
                    ,
                    _AsyncGenerator.prototype.next = function(t) {
                        return this._invoke("next", t)
                    }
                    ,
                    _AsyncGenerator.prototype.throw = function(t) {
                        return this._invoke("throw", t)
                    }
                    ,
                    _AsyncGenerator.prototype.return = function(t) {
                        return this._invoke("return", t)
                    }
                    ;
                    var id = 0;
                    function _classPrivateFieldLooseKey(t) {
                        return "__private_" + id++ + "_" + t
                    }
                    function _classPrivateFieldLooseBase(t, e) {
                        if (!Object.prototype.hasOwnProperty.call(t, e))
                            throw new TypeError("attempted to use private field on non-instance");
                        return t
                    }
                    function _classPrivateFieldGet(t, e) {
                        return _classApplyDescriptorGet(t, _classExtractFieldDescriptor(t, e, "get"))
                    }
                    function _classPrivateFieldSet(t, e, r) {
                        return _classApplyDescriptorSet(t, _classExtractFieldDescriptor(t, e, "set"), r),
                        r
                    }
                    function _classPrivateFieldDestructureSet(t, e) {
                        return _classApplyDescriptorDestructureSet(t, _classExtractFieldDescriptor(t, e, "set"))
                    }
                    function _classExtractFieldDescriptor(t, e, r) {
                        if (!e.has(t))
                            throw new TypeError("attempted to " + r + " private field on non-instance");
                        return e.get(t)
                    }
                    function _classStaticPrivateFieldSpecGet(t, e, r) {
                        return _classCheckPrivateStaticAccess(t, e),
                        _classCheckPrivateStaticFieldDescriptor(r, "get"),
                        _classApplyDescriptorGet(t, r)
                    }
                    function _classStaticPrivateFieldSpecSet(t, e, r, n) {
                        return _classCheckPrivateStaticAccess(t, e),
                        _classCheckPrivateStaticFieldDescriptor(r, "set"),
                        _classApplyDescriptorSet(t, r, n),
                        n
                    }
                    function _classStaticPrivateMethodGet(t, e, r) {
                        return _classCheckPrivateStaticAccess(t, e),
                        r
                    }
                    function _classStaticPrivateMethodSet() {
                        throw new TypeError("attempted to set read only static private field")
                    }
                    function _classApplyDescriptorGet(t, e) {
                        return e.get ? e.get.call(t) : e.value
                    }
                    function _classApplyDescriptorSet(t, e, r) {
                        if (e.set)
                            e.set.call(t, r);
                        else {
                            if (!e.writable)
                                throw new TypeError("attempted to set read only private field");
                            e.value = r
                        }
                    }
                    function _classApplyDescriptorDestructureSet(t, e) {
                        if (e.set)
                            return "__destrObj"in e || (e.__destrObj = {
                                set value(r) {
                                    e.set.call(t, r)
                                }
                            }),
                            e.__destrObj;
                        if (!e.writable)
                            throw new TypeError("attempted to set read only private field");
                        return e
                    }
                    function _classStaticPrivateFieldDestructureSet(t, e, r) {
                        return _classCheckPrivateStaticAccess(t, e),
                        _classCheckPrivateStaticFieldDescriptor(r, "set"),
                        _classApplyDescriptorDestructureSet(t, r)
                    }
                    function _classCheckPrivateStaticAccess(t, e) {
                        if (t !== e)
                            throw new TypeError("Private static access of wrong provenance")
                    }
                    function _classCheckPrivateStaticFieldDescriptor(t, e) {
                        if (void 0 === t)
                            throw new TypeError("attempted to " + e + " private static field before its declaration")
                    }
                    function _decorate(t, e, r, n) {
                        var i = _getDecoratorsApi();
                        if (n)
                            for (var a = 0; a < n.length; a++)
                                i = n[a](i);
                        var o = e((function(t) {
                            i.initializeInstanceElements(t, s.elements)
                        }
                        ), r)
                          , s = i.decorateClass(_coalesceClassElements(o.d.map(_createElementDescriptor)), t);
                        return i.initializeClassElements(o.F, s.elements),
                        i.runClassFinishers(o.F, s.finishers)
                    }
                    function _getDecoratorsApi() {
                        _getDecoratorsApi = function() {
                            return t
                        }
                        ;
                        var t = {
                            elementsDefinitionOrder: [["method"], ["field"]],
                            initializeInstanceElements: function(t, e) {
                                ["method", "field"].forEach((function(r) {
                                    e.forEach((function(e) {
                                        e.kind === r && "own" === e.placement && this.defineClassElement(t, e)
                                    }
                                    ), this)
                                }
                                ), this)
                            },
                            initializeClassElements: function(t, e) {
                                var r = t.prototype;
                                ["method", "field"].forEach((function(n) {
                                    e.forEach((function(e) {
                                        var i = e.placement;
                                        if (e.kind === n && ("static" === i || "prototype" === i)) {
                                            var a = "static" === i ? t : r;
                                            this.defineClassElement(a, e)
                                        }
                                    }
                                    ), this)
                                }
                                ), this)
                            },
                            defineClassElement: function(t, e) {
                                var r = e.descriptor;
                                if ("field" === e.kind) {
                                    var n = e.initializer;
                                    r = {
                                        enumerable: r.enumerable,
                                        writable: r.writable,
                                        configurable: r.configurable,
                                        value: void 0 === n ? void 0 : n.call(t)
                                    }
                                }
                                Object.defineProperty(t, e.key, r)
                            },
                            decorateClass: function(t, e) {
                                var r = []
                                  , n = []
                                  , i = {
                                    static: [],
                                    prototype: [],
                                    own: []
                                };
                                if (t.forEach((function(t) {
                                    this.addElementPlacement(t, i)
                                }
                                ), this),
                                t.forEach((function(t) {
                                    if (!_hasDecorators(t))
                                        return r.push(t);
                                    var e = this.decorateElement(t, i);
                                    r.push(e.element),
                                    r.push.apply(r, e.extras),
                                    n.push.apply(n, e.finishers)
                                }
                                ), this),
                                !e)
                                    return {
                                        elements: r,
                                        finishers: n
                                    };
                                var a = this.decorateConstructor(r, e);
                                return n.push.apply(n, a.finishers),
                                a.finishers = n,
                                a
                            },
                            addElementPlacement: function(t, e, r) {
                                var n = e[t.placement];
                                if (!r && -1 !== n.indexOf(t.key))
                                    throw new TypeError("Duplicated element (" + t.key + ")");
                                n.push(t.key)
                            },
                            decorateElement: function(t, e) {
                                for (var r = [], n = [], i = t.decorators, a = i.length - 1; a >= 0; a--) {
                                    var o = e[t.placement];
                                    o.splice(o.indexOf(t.key), 1);
                                    var s = this.fromElementDescriptor(t)
                                      , l = this.toElementFinisherExtras((0,
                                    i[a])(s) || s);
                                    t = l.element,
                                    this.addElementPlacement(t, e),
                                    l.finisher && n.push(l.finisher);
                                    var c = l.extras;
                                    if (c) {
                                        for (var h = 0; h < c.length; h++)
                                            this.addElementPlacement(c[h], e);
                                        r.push.apply(r, c)
                                    }
                                }
                                return {
                                    element: t,
                                    finishers: n,
                                    extras: r
                                }
                            },
                            decorateConstructor: function(t, e) {
                                for (var r = [], n = e.length - 1; n >= 0; n--) {
                                    var i = this.fromClassDescriptor(t)
                                      , a = this.toClassDescriptor((0,
                                    e[n])(i) || i);
                                    if (void 0 !== a.finisher && r.push(a.finisher),
                                    void 0 !== a.elements) {
                                        t = a.elements;
                                        for (var o = 0; o < t.length - 1; o++)
                                            for (var s = o + 1; s < t.length; s++)
                                                if (t[o].key === t[s].key && t[o].placement === t[s].placement)
                                                    throw new TypeError("Duplicated element (" + t[o].key + ")")
                                    }
                                }
                                return {
                                    elements: t,
                                    finishers: r
                                }
                            },
                            fromElementDescriptor: function(t) {
                                var e = {
                                    kind: t.kind,
                                    key: t.key,
                                    placement: t.placement,
                                    descriptor: t.descriptor
                                };
                                return Object.defineProperty(e, Symbol.toStringTag, {
                                    value: "Descriptor",
                                    configurable: !0
                                }),
                                "field" === t.kind && (e.initializer = t.initializer),
                                e
                            },
                            toElementDescriptors: function(t) {
                                if (void 0 !== t)
                                    return _toArray(t).map((function(t) {
                                        var e = this.toElementDescriptor(t);
                                        return this.disallowProperty(t, "finisher", "An element descriptor"),
                                        this.disallowProperty(t, "extras", "An element descriptor"),
                                        e
                                    }
                                    ), this)
                            },
                            toElementDescriptor: function(t) {
                                var e = String(t.kind);
                                if ("method" !== e && "field" !== e)
                                    throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "' + e + '"');
                                var r = _toPropertyKey(t.key)
                                  , n = String(t.placement);
                                if ("static" !== n && "prototype" !== n && "own" !== n)
                                    throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "' + n + '"');
                                var i = t.descriptor;
                                this.disallowProperty(t, "elements", "An element descriptor");
                                var a = {
                                    kind: e,
                                    key: r,
                                    placement: n,
                                    descriptor: Object.assign({}, i)
                                };
                                return "field" !== e ? this.disallowProperty(t, "initializer", "A method descriptor") : (this.disallowProperty(i, "get", "The property descriptor of a field descriptor"),
                                this.disallowProperty(i, "set", "The property descriptor of a field descriptor"),
                                this.disallowProperty(i, "value", "The property descriptor of a field descriptor"),
                                a.initializer = t.initializer),
                                a
                            },
                            toElementFinisherExtras: function(t) {
                                return {
                                    element: this.toElementDescriptor(t),
                                    finisher: _optionalCallableProperty(t, "finisher"),
                                    extras: this.toElementDescriptors(t.extras)
                                }
                            },
                            fromClassDescriptor: function(t) {
                                var e = {
                                    kind: "class",
                                    elements: t.map(this.fromElementDescriptor, this)
                                };
                                return Object.defineProperty(e, Symbol.toStringTag, {
                                    value: "Descriptor",
                                    configurable: !0
                                }),
                                e
                            },
                            toClassDescriptor: function(t) {
                                var e = String(t.kind);
                                if ("class" !== e)
                                    throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "' + e + '"');
                                this.disallowProperty(t, "key", "A class descriptor"),
                                this.disallowProperty(t, "placement", "A class descriptor"),
                                this.disallowProperty(t, "descriptor", "A class descriptor"),
                                this.disallowProperty(t, "initializer", "A class descriptor"),
                                this.disallowProperty(t, "extras", "A class descriptor");
                                var r = _optionalCallableProperty(t, "finisher");
                                return {
                                    elements: this.toElementDescriptors(t.elements),
                                    finisher: r
                                }
                            },
                            runClassFinishers: function(t, e) {
                                for (var r = 0; r < e.length; r++) {
                                    var n = (0,
                                    e[r])(t);
                                    if (void 0 !== n) {
                                        if ("function" != typeof n)
                                            throw new TypeError("Finishers must return a constructor.");
                                        t = n
                                    }
                                }
                                return t
                            },
                            disallowProperty: function(t, e, r) {
                                if (void 0 !== t[e])
                                    throw new TypeError(r + " can't have a ." + e + " property.")
                            }
                        };
                        return t
                    }
                    function _createElementDescriptor(t) {
                        var e, r = _toPropertyKey(t.key);
                        "method" === t.kind ? e = {
                            value: t.value,
                            writable: !0,
                            configurable: !0,
                            enumerable: !1
                        } : "get" === t.kind ? e = {
                            get: t.value,
                            configurable: !0,
                            enumerable: !1
                        } : "set" === t.kind ? e = {
                            set: t.value,
                            configurable: !0,
                            enumerable: !1
                        } : "field" === t.kind && (e = {
                            configurable: !0,
                            writable: !0,
                            enumerable: !0
                        });
                        var n = {
                            kind: "field" === t.kind ? "field" : "method",
                            key: r,
                            placement: t.static ? "static" : "field" === t.kind ? "own" : "prototype",
                            descriptor: e
                        };
                        return t.decorators && (n.decorators = t.decorators),
                        "field" === t.kind && (n.initializer = t.value),
                        n
                    }
                    function _coalesceGetterSetter(t, e) {
                        void 0 !== t.descriptor.get ? e.descriptor.get = t.descriptor.get : e.descriptor.set = t.descriptor.set
                    }
                    function _coalesceClassElements(t) {
                        for (var e = [], r = function(t) {
                            return "method" === t.kind && t.key === a.key && t.placement === a.placement
                        }, n = 0; n < t.length; n++) {
                            var i, a = t[n];
                            if ("method" === a.kind && (i = e.find(r)))
                                if (_isDataDescriptor(a.descriptor) || _isDataDescriptor(i.descriptor)) {
                                    if (_hasDecorators(a) || _hasDecorators(i))
                                        throw new ReferenceError("Duplicated methods (" + a.key + ") can't be decorated.");
                                    i.descriptor = a.descriptor
                                } else {
                                    if (_hasDecorators(a)) {
                                        if (_hasDecorators(i))
                                            throw new ReferenceError("Decorators can't be placed on different accessors with for the same property (" + a.key + ").");
                                        i.decorators = a.decorators
                                    }
                                    _coalesceGetterSetter(a, i)
                                }
                            else
                                e.push(a)
                        }
                        return e
                    }
                    function _hasDecorators(t) {
                        return t.decorators && t.decorators.length
                    }
                    function _isDataDescriptor(t) {
                        return void 0 !== t && !(void 0 === t.value && void 0 === t.writable)
                    }
                    function _optionalCallableProperty(t, e) {
                        var r = t[e];
                        if (void 0 !== r && "function" != typeof r)
                            throw new TypeError("Expected '" + e + "' to be a function");
                        return r
                    }
                    function _classPrivateMethodGet(t, e, r) {
                        if (!e.has(t))
                            throw new TypeError("attempted to get private field on non-instance");
                        return r
                    }
                    function _checkPrivateRedeclaration(t, e) {
                        if (e.has(t))
                            throw new TypeError("Cannot initialize the same private elements twice on an object")
                    }
                    function _classPrivateFieldInitSpec(t, e, r) {
                        _checkPrivateRedeclaration(t, e),
                        e.set(t, r)
                    }
                    function _classPrivateMethodInitSpec(t, e) {
                        _checkPrivateRedeclaration(t, e),
                        e.add(t)
                    }
                    function _classPrivateMethodSet() {
                        throw new TypeError("attempted to reassign private method")
                    }
                    var _extendStatics2 = function(t, e) {
                        return _extendStatics2 = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(t, e) {
                            t.__proto__ = e
                        }
                        || function(t, e) {
                            for (var r in e)
                                Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r])
                        }
                        ,
                        _extendStatics2(t, e)
                    };
                    function __extends(t, e) {
                        if ("function" != typeof e && null !== e)
                            throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");
                        function r() {
                            this.constructor = t
                        }
                        _extendStatics2(t, e),
                        t.prototype = null === e ? Object.create(e) : (r.prototype = e.prototype,
                        new r)
                    }
                    var _assign2 = function() {
                        return _assign2 = Object.assign || function(t) {
                            for (var e, r = 1, n = arguments.length; r < n; r++)
                                for (var i in e = arguments[r])
                                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                            return t
                        }
                        ,
                        _assign2.apply(this, arguments)
                    };
                    function __rest(t, e) {
                        var r = {};
                        for (var n in t)
                            Object.prototype.hasOwnProperty.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]);
                        if (null != t && "function" == typeof Object.getOwnPropertySymbols) {
                            var i = 0;
                            for (n = Object.getOwnPropertySymbols(t); i < n.length; i++)
                                e.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n[i]) && (r[n[i]] = t[n[i]])
                        }
                        return r
                    }
                    function __decorate(t, e, r, n) {
                        var i, a = arguments.length, o = a < 3 ? e : null === n ? n = Object.getOwnPropertyDescriptor(e, r) : n;
                        if ("object" == ("undefined" == typeof Reflect ? "undefined" : _typeof2(Reflect)) && "function" == typeof Reflect.decorate)
                            o = Reflect.decorate(t, e, r, n);
                        else
                            for (var s = t.length - 1; s >= 0; s--)
                                (i = t[s]) && (o = (a < 3 ? i(o) : a > 3 ? i(e, r, o) : i(e, r)) || o);
                        return a > 3 && o && Object.defineProperty(e, r, o),
                        o
                    }
                    function __param(t, e) {
                        return function(r, n) {
                            e(r, n, t)
                        }
                    }
                    function __metadata(t, e) {
                        if ("object" == ("undefined" == typeof Reflect ? "undefined" : _typeof2(Reflect)) && "function" == typeof Reflect.metadata)
                            return Reflect.metadata(t, e)
                    }
                    function __awaiter(t, e, r, n) {
                        return new (r || (r = Promise))((function(i, a) {
                            function o(t) {
                                try {
                                    l(n.next(t))
                                } catch (t) {
                                    a(t)
                                }
                            }
                            function s(t) {
                                try {
                                    l(n.throw(t))
                                } catch (t) {
                                    a(t)
                                }
                            }
                            function l(t) {
                                var e;
                                t.done ? i(t.value) : (e = t.value,
                                e instanceof r ? e : new r((function(t) {
                                    t(e)
                                }
                                ))).then(o, s)
                            }
                            l((n = n.apply(t, e || [])).next())
                        }
                        ))
                    }
                    function __generator(t, e) {
                        var r, n, i, a, o = {
                            label: 0,
                            sent: function() {
                                if (1 & i[0])
                                    throw i[1];
                                return i[1]
                            },
                            trys: [],
                            ops: []
                        };
                        return a = {
                            next: s(0),
                            throw: s(1),
                            return: s(2)
                        },
                        "function" == typeof Symbol && (a[Symbol.iterator] = function() {
                            return this
                        }
                        ),
                        a;
                        function s(a) {
                            return function(s) {
                                return function(a) {
                                    if (r)
                                        throw new TypeError("Generator is already executing.");
                                    for (; o; )
                                        try {
                                            if (r = 1,
                                            n && (i = 2 & a[0] ? n.return : a[0] ? n.throw || ((i = n.return) && i.call(n),
                                            0) : n.next) && !(i = i.call(n, a[1])).done)
                                                return i;
                                            switch (n = 0,
                                            i && (a = [2 & a[0], i.value]),
                                            a[0]) {
                                            case 0:
                                            case 1:
                                                i = a;
                                                break;
                                            case 4:
                                                return o.label++,
                                                {
                                                    value: a[1],
                                                    done: !1
                                                };
                                            case 5:
                                                o.label++,
                                                n = a[1],
                                                a = [0];
                                                continue;
                                            case 7:
                                                a = o.ops.pop(),
                                                o.trys.pop();
                                                continue;
                                            default:
                                                if (!((i = (i = o.trys).length > 0 && i[i.length - 1]) || 6 !== a[0] && 2 !== a[0])) {
                                                    o = 0;
                                                    continue
                                                }
                                                if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) {
                                                    o.label = a[1];
                                                    break
                                                }
                                                if (6 === a[0] && o.label < i[1]) {
                                                    o.label = i[1],
                                                    i = a;
                                                    break
                                                }
                                                if (i && o.label < i[2]) {
                                                    o.label = i[2],
                                                    o.ops.push(a);
                                                    break
                                                }
                                                i[2] && o.ops.pop(),
                                                o.trys.pop();
                                                continue
                                            }
                                            a = e.call(t, o)
                                        } catch (t) {
                                            a = [6, t],
                                            n = 0
                                        } finally {
                                            r = i = 0
                                        }
                                    if (5 & a[0])
                                        throw a[1];
                                    return {
                                        value: a[0] ? a[1] : void 0,
                                        done: !0
                                    }
                                }([a, s])
                            }
                        }
                    }
                    var __createBinding = Object.create ? function(t, e, r, n) {
                        void 0 === n && (n = r),
                        Object.defineProperty(t, n, {
                            enumerable: !0,
                            get: function() {
                                return e[r]
                            }
                        })
                    }
                    : function(t, e, r, n) {
                        void 0 === n && (n = r),
                        t[n] = e[r]
                    }
                    ;
                    function __exportStar(t, e) {
                        for (var r in t)
                            "default" === r || Object.prototype.hasOwnProperty.call(e, r) || __createBinding(e, t, r)
                    }
                    function __values(t) {
                        var e = "function" == typeof Symbol && Symbol.iterator
                          , r = e && t[e]
                          , n = 0;
                        if (r)
                            return r.call(t);
                        if (t && "number" == typeof t.length)
                            return {
                                next: function() {
                                    return t && n >= t.length && (t = void 0),
                                    {
                                        value: t && t[n++],
                                        done: !t
                                    }
                                }
                            };
                        throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.")
                    }
                    function __read(t, e) {
                        var r = "function" == typeof Symbol && t[Symbol.iterator];
                        if (!r)
                            return t;
                        var n, i, a = r.call(t), o = [];
                        try {
                            for (; (void 0 === e || e-- > 0) && !(n = a.next()).done; )
                                o.push(n.value)
                        } catch (t) {
                            i = {
                                error: t
                            }
                        } finally {
                            try {
                                n && !n.done && (r = a.return) && r.call(a)
                            } finally {
                                if (i)
                                    throw i.error
                            }
                        }
                        return o
                    }
                    function __spread() {
                        for (var t = [], e = 0; e < arguments.length; e++)
                            t = t.concat(__read(arguments[e]));
                        return t
                    }
                    function __spreadArrays() {
                        for (var t = 0, e = 0, r = arguments.length; e < r; e++)
                            t += arguments[e].length;
                        var n = Array(t)
                          , i = 0;
                        for (e = 0; e < r; e++)
                            for (var a = arguments[e], o = 0, s = a.length; o < s; o++,
                            i++)
                                n[i] = a[o];
                        return n
                    }
                    function __spreadArray(t, e, r) {
                        if (r || 2 === arguments.length)
                            for (var n, i = 0, a = e.length; i < a; i++)
                                !n && i in e || (n || (n = Array.prototype.slice.call(e, 0, i)),
                                n[i] = e[i]);
                        return t.concat(n || Array.prototype.slice.call(e))
                    }
                    function __await(t) {
                        return this instanceof __await ? (this.v = t,
                        this) : new __await(t)
                    }
                    function __asyncGenerator(t, e, r) {
                        if (!Symbol.asyncIterator)
                            throw new TypeError("Symbol.asyncIterator is not defined.");
                        var n, i = r.apply(t, e || []), a = [];
                        return n = {},
                        o("next"),
                        o("throw"),
                        o("return"),
                        n[Symbol.asyncIterator] = function() {
                            return this
                        }
                        ,
                        n;
                        function o(t) {
                            i[t] && (n[t] = function(e) {
                                return new Promise((function(r, n) {
                                    a.push([t, e, r, n]) > 1 || s(t, e)
                                }
                                ))
                            }
                            )
                        }
                        function s(t, e) {
                            try {
                                !function(t) {
                                    t.value instanceof __await ? Promise.resolve(t.value.v).then(l, c) : h(a[0][2], t)
                                }(i[t](e))
                            } catch (t) {
                                h(a[0][3], t)
                            }
                        }
                        function l(t) {
                            s("next", t)
                        }
                        function c(t) {
                            s("throw", t)
                        }
                        function h(t, e) {
                            t(e),
                            a.shift(),
                            a.length && s(a[0][0], a[0][1])
                        }
                    }
                    function __asyncDelegator(t) {
                        var e, r;
                        return e = {},
                        n("next"),
                        n("throw", (function(t) {
                            throw t
                        }
                        )),
                        n("return"),
                        e[Symbol.iterator] = function() {
                            return this
                        }
                        ,
                        e;
                        function n(n, i) {
                            e[n] = t[n] ? function(e) {
                                return (r = !r) ? {
                                    value: __await(t[n](e)),
                                    done: "return" === n
                                } : i ? i(e) : e
                            }
                            : i
                        }
                    }
                    function __asyncValues(t) {
                        if (!Symbol.asyncIterator)
                            throw new TypeError("Symbol.asyncIterator is not defined.");
                        var e, r = t[Symbol.asyncIterator];
                        return r ? r.call(t) : (t = "function" == typeof __values ? __values(t) : t[Symbol.iterator](),
                        e = {},
                        n("next"),
                        n("throw"),
                        n("return"),
                        e[Symbol.asyncIterator] = function() {
                            return this
                        }
                        ,
                        e);
                        function n(r) {
                            e[r] = t[r] && function(e) {
                                return new Promise((function(n, i) {
                                    !function(t, e, r, n) {
                                        Promise.resolve(n).then((function(e) {
                                            t({
                                                value: e,
                                                done: r
                                            })
                                        }
                                        ), e)
                                    }(n, i, (e = t[r](e)).done, e.value)
                                }
                                ))
                            }
                        }
                    }
                    function __makeTemplateObject(t, e) {
                        return Object.defineProperty ? Object.defineProperty(t, "raw", {
                            value: e
                        }) : t.raw = e,
                        t
                    }
                    var __setModuleDefault = Object.create ? function(t, e) {
                        Object.defineProperty(t, "default", {
                            enumerable: !0,
                            value: e
                        })
                    }
                    : function(t, e) {
                        t.default = e
                    }
                    ;
                    function __importStar(t) {
                        if (t && t.__esModule)
                            return t;
                        var e = {};
                        if (null != t)
                            for (var r in t)
                                "default" !== r && Object.prototype.hasOwnProperty.call(t, r) && __createBinding(e, t, r);
                        return __setModuleDefault(e, t),
                        e
                    }
                    function __importDefault(t) {
                        return t && t.__esModule ? t : {
                            default: t
                        }
                    }
                    function __classPrivateFieldGet(t, e, r, n) {
                        if ("a" === r && !n)
                            throw new TypeError("Private accessor was defined without a getter");
                        if ("function" == typeof e ? t !== e || !n : !e.has(t))
                            throw new TypeError("Cannot read private member from an object whose class did not declare it");
                        return "m" === r ? n : "a" === r ? n.call(t) : n ? n.value : e.get(t)
                    }
                    function __classPrivateFieldSet(t, e, r, n, i) {
                        if ("m" === n)
                            throw new TypeError("Private method is not writable");
                        if ("a" === n && !i)
                            throw new TypeError("Private accessor was defined without a setter");
                        if ("function" == typeof e ? t !== e || !i : !e.has(t))
                            throw new TypeError("Cannot write private member to an object whose class did not declare it");
                        return "a" === n ? i.call(t, r) : i ? i.value = r : e.set(t, r),
                        r
                    }
                    var t$3 = window.ShadowRoot && (void 0 === window.ShadyCSS || window.ShadyCSS.nativeShadow) && "adoptedStyleSheets"in Document.prototype && "replace"in CSSStyleSheet.prototype, e$8 = Symbol(), n$5 = new Map, s$3 = function() {
                        function t(e, r) {
                            if (_classCallCheck2(this, t),
                            this._$cssResult$ = !0,
                            r !== e$8)
                                throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
                            this.cssText = e
                        }
                        return _createClass2(t, [{
                            key: "styleSheet",
                            get: function() {
                                var t = n$5.get(this.cssText);
                                return t$3 && void 0 === t && (n$5.set(this.cssText, t = new CSSStyleSheet),
                                t.replaceSync(this.cssText)),
                                t
                            }
                        }, {
                            key: "toString",
                            value: function() {
                                return this.cssText
                            }
                        }]),
                        t
                    }(), o$5 = function(t) {
                        return new s$3("string" == typeof t ? t : t + "",e$8)
                    }, r$3 = function(t) {
                        for (var e = arguments.length, r = new Array(e > 1 ? e - 1 : 0), n = 1; n < e; n++)
                            r[n - 1] = arguments[n];
                        var i = 1 === t.length ? t[0] : r.reduce((function(e, r, n) {
                            return e + function(t) {
                                if (!0 === t._$cssResult$)
                                    return t.cssText;
                                if ("number" == typeof t)
                                    return t;
                                throw Error("Value passed to 'css' function must be a 'css' function result: " + t + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")
                            }(r) + t[n + 1]
                        }
                        ), t[0]);
                        return new s$3(i,e$8)
                    }, i$3 = function(t, e) {
                        t$3 ? t.adoptedStyleSheets = e.map((function(t) {
                            return t instanceof CSSStyleSheet ? t : t.styleSheet
                        }
                        )) : e.forEach((function(e) {
                            var r = document.createElement("style")
                              , n = window.litNonce;
                            void 0 !== n && r.setAttribute("nonce", n),
                            r.textContent = e.cssText,
                            t.appendChild(r)
                        }
                        ))
                    }, S$1 = t$3 ? function(t) {
                        return t
                    }
                    : function(t) {
                        return t instanceof CSSStyleSheet ? function(t) {
                            var e, r = "", n = _createForOfIteratorHelper2(t.cssRules);
                            try {
                                for (n.s(); !(e = n.n()).done; )
                                    r += e.value.cssText
                            } catch (t) {
                                n.e(t)
                            } finally {
                                n.f()
                            }
                            return o$5(r)
                        }(t) : t
                    }
                    , s$2, e$7 = window.trustedTypes, r$2 = e$7 ? e$7.emptyScript : "", h$2 = window.reactiveElementPolyfillSupport, o$4 = {
                        toAttribute: function(t, e) {
                            switch (e) {
                            case Boolean:
                                t = t ? r$2 : null;
                                break;
                            case Object:
                            case Array:
                                t = null == t ? t : JSON.stringify(t)
                            }
                            return t
                        },
                        fromAttribute: function(t, e) {
                            var r = t;
                            switch (e) {
                            case Boolean:
                                r = null !== t;
                                break;
                            case Number:
                                r = null === t ? null : Number(t);
                                break;
                            case Object:
                            case Array:
                                try {
                                    r = JSON.parse(t)
                                } catch (t) {
                                    r = null
                                }
                            }
                            return r
                        }
                    }, n$4 = function(t, e) {
                        return e !== t && (e == e || t == t)
                    }, l$3 = {
                        attribute: !0,
                        type: String,
                        converter: o$4,
                        reflect: !1,
                        hasChanged: n$4
                    }, t$2, a$1 = function(t) {
                        _inherits2(r, t);
                        var e = _createSuper2(r);
                        function r() {
                            var t;
                            return _classCallCheck2(this, r),
                            (t = e.call(this))._$Et = new Map,
                            t.isUpdatePending = !1,
                            t.hasUpdated = !1,
                            t._$Ei = null,
                            t.o(),
                            t
                        }
                        return _createClass2(r, [{
                            key: "o",
                            value: function() {
                                var t, e = this;
                                this._$Ep = new Promise((function(t) {
                                    return e.enableUpdating = t
                                }
                                )),
                                this._$AL = new Map,
                                this._$Em(),
                                this.requestUpdate(),
                                null === (t = this.constructor.l) || void 0 === t || t.forEach((function(t) {
                                    return t(e)
                                }
                                ))
                            }
                        }, {
                            key: "addController",
                            value: function(t) {
                                var e, r;
                                (null !== (e = this._$Eg) && void 0 !== e ? e : this._$Eg = []).push(t),
                                void 0 !== this.renderRoot && this.isConnected && (null === (r = t.hostConnected) || void 0 === r || r.call(t))
                            }
                        }, {
                            key: "removeController",
                            value: function(t) {
                                var e;
                                null === (e = this._$Eg) || void 0 === e || e.splice(this._$Eg.indexOf(t) >>> 0, 1)
                            }
                        }, {
                            key: "_$Em",
                            value: function() {
                                var t = this;
                                this.constructor.elementProperties.forEach((function(e, r) {
                                    t.hasOwnProperty(r) && (t._$Et.set(r, t[r]),
                                    delete t[r])
                                }
                                ))
                            }
                        }, {
                            key: "createRenderRoot",
                            value: function() {
                                var t, e = null !== (t = this.shadowRoot) && void 0 !== t ? t : this.attachShadow(this.constructor.shadowRootOptions);
                                return i$3(e, this.constructor.elementStyles),
                                e
                            }
                        }, {
                            key: "connectedCallback",
                            value: function() {
                                var t;
                                void 0 === this.renderRoot && (this.renderRoot = this.createRenderRoot()),
                                this.enableUpdating(!0),
                                null === (t = this._$Eg) || void 0 === t || t.forEach((function(t) {
                                    var e;
                                    return null === (e = t.hostConnected) || void 0 === e ? void 0 : e.call(t)
                                }
                                ))
                            }
                        }, {
                            key: "enableUpdating",
                            value: function(t) {}
                        }, {
                            key: "disconnectedCallback",
                            value: function() {
                                var t;
                                null === (t = this._$Eg) || void 0 === t || t.forEach((function(t) {
                                    var e;
                                    return null === (e = t.hostDisconnected) || void 0 === e ? void 0 : e.call(t)
                                }
                                ))
                            }
                        }, {
                            key: "attributeChangedCallback",
                            value: function(t, e, r) {
                                this._$AK(t, r)
                            }
                        }, {
                            key: "_$ES",
                            value: function(t, e) {
                                var r, n, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : l$3, a = this.constructor._$Eh(t, i);
                                if (void 0 !== a && !0 === i.reflect) {
                                    var o = (null !== (n = null === (r = i.converter) || void 0 === r ? void 0 : r.toAttribute) && void 0 !== n ? n : o$4.toAttribute)(e, i.type);
                                    this._$Ei = t,
                                    null == o ? this.removeAttribute(a) : this.setAttribute(a, o),
                                    this._$Ei = null
                                }
                            }
                        }, {
                            key: "_$AK",
                            value: function(t, e) {
                                var r, n, i, a = this.constructor, o = a._$Eu.get(t);
                                if (void 0 !== o && this._$Ei !== o) {
                                    var s = a.getPropertyOptions(o)
                                      , l = s.converter
                                      , c = null !== (i = null !== (n = null === (r = l) || void 0 === r ? void 0 : r.fromAttribute) && void 0 !== n ? n : "function" == typeof l ? l : null) && void 0 !== i ? i : o$4.fromAttribute;
                                    this._$Ei = o,
                                    this[o] = c(e, s.type),
                                    this._$Ei = null
                                }
                            }
                        }, {
                            key: "requestUpdate",
                            value: function(t, e, r) {
                                var n = !0;
                                void 0 !== t && (((r = r || this.constructor.getPropertyOptions(t)).hasChanged || n$4)(this[t], e) ? (this._$AL.has(t) || this._$AL.set(t, e),
                                !0 === r.reflect && this._$Ei !== t && (void 0 === this._$E_ && (this._$E_ = new Map),
                                this._$E_.set(t, r))) : n = !1),
                                !this.isUpdatePending && n && (this._$Ep = this._$EC())
                            }
                        }, {
                            key: "_$EC",
                            value: function() {
                                var t = this;
                                return _asyncToGenerator(regeneratorRuntime.mark((function e() {
                                    var r;
                                    return regeneratorRuntime.wrap((function(e) {
                                        for (; ; )
                                            switch (e.prev = e.next) {
                                            case 0:
                                                return t.isUpdatePending = !0,
                                                e.prev = 1,
                                                e.next = 4,
                                                t._$Ep;
                                            case 4:
                                                e.next = 9;
                                                break;
                                            case 6:
                                                e.prev = 6,
                                                e.t0 = e.catch(1),
                                                Promise.reject(e.t0);
                                            case 9:
                                                if (r = t.scheduleUpdate(),
                                                e.t1 = null != r,
                                                !e.t1) {
                                                    e.next = 14;
                                                    break
                                                }
                                                return e.next = 14,
                                                r;
                                            case 14:
                                                return e.abrupt("return", !t.isUpdatePending);
                                            case 15:
                                            case "end":
                                                return e.stop()
                                            }
                                    }
                                    ), e, null, [[1, 6]])
                                }
                                )))()
                            }
                        }, {
                            key: "scheduleUpdate",
                            value: function() {
                                return this.performUpdate()
                            }
                        }, {
                            key: "performUpdate",
                            value: function() {
                                var t, e = this;
                                if (this.isUpdatePending) {
                                    this.hasUpdated,
                                    this._$Et && (this._$Et.forEach((function(t, r) {
                                        return e[r] = t
                                    }
                                    )),
                                    this._$Et = void 0);
                                    var r = !1
                                      , n = this._$AL;
                                    try {
                                        (r = this.shouldUpdate(n)) ? (this.willUpdate(n),
                                        null === (t = this._$Eg) || void 0 === t || t.forEach((function(t) {
                                            var e;
                                            return null === (e = t.hostUpdate) || void 0 === e ? void 0 : e.call(t)
                                        }
                                        )),
                                        this.update(n)) : this._$EU()
                                    } catch (t) {
                                        throw r = !1,
                                        this._$EU(),
                                        t
                                    }
                                    r && this._$AE(n)
                                }
                            }
                        }, {
                            key: "willUpdate",
                            value: function(t) {}
                        }, {
                            key: "_$AE",
                            value: function(t) {
                                var e;
                                null === (e = this._$Eg) || void 0 === e || e.forEach((function(t) {
                                    var e;
                                    return null === (e = t.hostUpdated) || void 0 === e ? void 0 : e.call(t)
                                }
                                )),
                                this.hasUpdated || (this.hasUpdated = !0,
                                this.firstUpdated(t)),
                                this.updated(t)
                            }
                        }, {
                            key: "_$EU",
                            value: function() {
                                this._$AL = new Map,
                                this.isUpdatePending = !1
                            }
                        }, {
                            key: "updateComplete",
                            get: function() {
                                return this.getUpdateComplete()
                            }
                        }, {
                            key: "getUpdateComplete",
                            value: function() {
                                return this._$Ep
                            }
                        }, {
                            key: "shouldUpdate",
                            value: function(t) {
                                return !0
                            }
                        }, {
                            key: "update",
                            value: function(t) {
                                var e = this;
                                void 0 !== this._$E_ && (this._$E_.forEach((function(t, r) {
                                    return e._$ES(r, e[r], t)
                                }
                                )),
                                this._$E_ = void 0),
                                this._$EU()
                            }
                        }, {
                            key: "updated",
                            value: function(t) {}
                        }, {
                            key: "firstUpdated",
                            value: function(t) {}
                        }], [{
                            key: "addInitializer",
                            value: function(t) {
                                var e;
                                null !== (e = this.l) && void 0 !== e || (this.l = []),
                                this.l.push(t)
                            }
                        }, {
                            key: "observedAttributes",
                            get: function() {
                                var t = this;
                                this.finalize();
                                var e = [];
                                return this.elementProperties.forEach((function(r, n) {
                                    var i = t._$Eh(n, r);
                                    void 0 !== i && (t._$Eu.set(i, n),
                                    e.push(i))
                                }
                                )),
                                e
                            }
                        }, {
                            key: "createProperty",
                            value: function(t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : l$3;
                                if (e.state && (e.attribute = !1),
                                this.finalize(),
                                this.elementProperties.set(t, e),
                                !e.noAccessor && !this.prototype.hasOwnProperty(t)) {
                                    var r = "symbol" == _typeof2(t) ? Symbol() : "__" + t
                                      , n = this.getPropertyDescriptor(t, r, e);
                                    void 0 !== n && Object.defineProperty(this.prototype, t, n)
                                }
                            }
                        }, {
                            key: "getPropertyDescriptor",
                            value: function(t, e, r) {
                                return {
                                    get: function() {
                                        return this[e]
                                    },
                                    set: function(n) {
                                        var i = this[t];
                                        this[e] = n,
                                        this.requestUpdate(t, i, r)
                                    },
                                    configurable: !0,
                                    enumerable: !0
                                }
                            }
                        }, {
                            key: "getPropertyOptions",
                            value: function(t) {
                                return this.elementProperties.get(t) || l$3
                            }
                        }, {
                            key: "finalize",
                            value: function() {
                                if (this.hasOwnProperty("finalized"))
                                    return !1;
                                this.finalized = !0;
                                var t = Object.getPrototypeOf(this);
                                if (t.finalize(),
                                this.elementProperties = new Map(t.elementProperties),
                                this._$Eu = new Map,
                                this.hasOwnProperty("properties")) {
                                    var e, r = this.properties, n = _createForOfIteratorHelper2([].concat(_toConsumableArray2(Object.getOwnPropertyNames(r)), _toConsumableArray2(Object.getOwnPropertySymbols(r))));
                                    try {
                                        for (n.s(); !(e = n.n()).done; ) {
                                            var i = e.value;
                                            this.createProperty(i, r[i])
                                        }
                                    } catch (t) {
                                        n.e(t)
                                    } finally {
                                        n.f()
                                    }
                                }
                                return this.elementStyles = this.finalizeStyles(this.styles),
                                !0
                            }
                        }, {
                            key: "finalizeStyles",
                            value: function(t) {
                                var e = [];
                                if (Array.isArray(t)) {
                                    var r, n = _createForOfIteratorHelper2(new Set(t.flat(1 / 0).reverse()));
                                    try {
                                        for (n.s(); !(r = n.n()).done; ) {
                                            var i = r.value;
                                            e.unshift(S$1(i))
                                        }
                                    } catch (t) {
                                        n.e(t)
                                    } finally {
                                        n.f()
                                    }
                                } else
                                    void 0 !== t && e.push(S$1(t));
                                return e
                            }
                        }, {
                            key: "_$Eh",
                            value: function(t, e) {
                                var r = e.attribute;
                                return !1 === r ? void 0 : "string" == typeof r ? r : "string" == typeof t ? t.toLowerCase() : void 0
                            }
                        }]),
                        r
                    }(_wrapNativeSuper2(HTMLElement));
                    a$1.finalized = !0,
                    a$1.elementProperties = new Map,
                    a$1.elementStyles = [],
                    a$1.shadowRootOptions = {
                        mode: "open"
                    },
                    null == h$2 || h$2({
                        ReactiveElement: a$1
                    }),
                    (null !== (s$2 = globalThis.reactiveElementVersions) && void 0 !== s$2 ? s$2 : globalThis.reactiveElementVersions = []).push("1.2.1");
                    var i$2 = globalThis.trustedTypes
                      , s$1 = i$2 ? i$2.createPolicy("lit-html", {
                        createHTML: function(t) {
                            return t
                        }
                    }) : void 0
                      , e$6 = "lit$".concat((Math.random() + "").slice(9), "$")
                      , o$3 = "?" + e$6
                      , n$3 = "<".concat(o$3, ">")
                      , l$2 = document
                      , h$1 = function() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
                        return l$2.createComment(t)
                    }
                      , r$1 = function(t) {
                        return null === t || "object" != _typeof2(t) && "function" != typeof t
                    }
                      , d = Array.isArray
                      , u = function(t) {
                        var e;
                        return d(t) || "function" == typeof (null === (e = t) || void 0 === e ? void 0 : e[Symbol.iterator])
                    }
                      , c = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g
                      , v = /-->/g
                      , a = />/g
                      , f = />|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g
                      , _ = /'/g
                      , m = /"/g
                      , g = /^(?:script|style|textarea)$/i
                      , p = function(t) {
                        return function(e) {
                            for (var r = arguments.length, n = new Array(r > 1 ? r - 1 : 0), i = 1; i < r; i++)
                                n[i - 1] = arguments[i];
                            return {
                                _$litType$: t,
                                strings: e,
                                values: n
                            }
                        }
                    }
                      , $ = p(1)
                      , y = p(2)
                      , b = Symbol.for("lit-noChange")
                      , w = Symbol.for("lit-nothing")
                      , T = new WeakMap
                      , x = function(t, e, r) {
                        var n, i, a = null !== (n = null == r ? void 0 : r.renderBefore) && void 0 !== n ? n : e, o = a._$litPart$;
                        if (void 0 === o) {
                            var s = null !== (i = null == r ? void 0 : r.renderBefore) && void 0 !== i ? i : null;
                            a._$litPart$ = o = new N(e.insertBefore(h$1(), s),s,void 0,null != r ? r : {})
                        }
                        return o._$AI(t),
                        o
                    }
                      , A = l$2.createTreeWalker(l$2, 129, null, !1)
                      , C = function(t, e) {
                        for (var r, n = t.length - 1, i = [], o = 2 === e ? "<svg>" : "", s = c, l = 0; l < n; l++) {
                            for (var h = t[l], u = void 0, p = void 0, d = -1, y = 0; y < h.length && (s.lastIndex = y,
                            null !== (p = s.exec(h))); )
                                y = s.lastIndex,
                                s === c ? "!--" === p[1] ? s = v : void 0 !== p[1] ? s = a : void 0 !== p[2] ? (g.test(p[2]) && (r = RegExp("</" + p[2], "g")),
                                s = f) : void 0 !== p[3] && (s = f) : s === f ? ">" === p[0] ? (s = null != r ? r : c,
                                d = -1) : void 0 === p[1] ? d = -2 : (d = s.lastIndex - p[2].length,
                                u = p[1],
                                s = void 0 === p[3] ? f : '"' === p[3] ? m : _) : s === m || s === _ ? s = f : s === v || s === a ? s = c : (s = f,
                                r = void 0);
                            var x = s === f && t[l + 1].startsWith("/>") ? " " : "";
                            o += s === c ? h + n$3 : d >= 0 ? (i.push(u),
                            h.slice(0, d) + "$lit$" + h.slice(d) + e$6 + x) : h + e$6 + (-2 === d ? (i.push(void 0),
                            l) : x)
                        }
                        var b = o + (t[n] || "<?>") + (2 === e ? "</svg>" : "");
                        if (!Array.isArray(t) || !t.hasOwnProperty("raw"))
                            throw Error("invalid template strings array");
                        return [void 0 !== s$1 ? s$1.createHTML(b) : b, i]
                    }
                      , E = function() {
                        function t(e, r) {
                            _classCallCheck2(this, t);
                            var n, i = e.strings, a = e._$litType$;
                            this.parts = [];
                            var o = 0
                              , s = 0
                              , l = i.length - 1
                              , c = this.parts
                              , h = _slicedToArray2(C(i, a), 2)
                              , u = h[0]
                              , p = h[1];
                            if (this.el = t.createElement(u, r),
                            A.currentNode = this.el.content,
                            2 === a) {
                                var d = this.el.content
                                  , f = d.firstChild;
                                f.remove(),
                                d.append.apply(d, _toConsumableArray2(f.childNodes))
                            }
                            for (; null !== (n = A.nextNode()) && c.length < l; ) {
                                if (1 === n.nodeType) {
                                    if (n.hasAttributes()) {
                                        var m, v = [], y = _createForOfIteratorHelper2(n.getAttributeNames());
                                        try {
                                            for (y.s(); !(m = y.n()).done; ) {
                                                var _ = m.value;
                                                if (_.endsWith("$lit$") || _.startsWith(e$6)) {
                                                    var x = p[s++];
                                                    if (v.push(_),
                                                    void 0 !== x) {
                                                        var b = n.getAttribute(x.toLowerCase() + "$lit$").split(e$6)
                                                          , w = /([.?@])?(.*)/.exec(x);
                                                        c.push({
                                                            type: 1,
                                                            index: o,
                                                            name: w[2],
                                                            strings: b,
                                                            ctor: "." === w[1] ? M : "?" === w[1] ? H : "@" === w[1] ? I : S
                                                        })
                                                    } else
                                                        c.push({
                                                            type: 6,
                                                            index: o
                                                        })
                                                }
                                            }
                                        } catch (t) {
                                            y.e(t)
                                        } finally {
                                            y.f()
                                        }
                                        for (var T = 0, E = v; T < E.length; T++) {
                                            var P = E[T];
                                            n.removeAttribute(P)
                                        }
                                    }
                                    if (g.test(n.tagName)) {
                                        var L = n.textContent.split(e$6)
                                          , D = L.length - 1;
                                        if (D > 0) {
                                            n.textContent = i$2 ? i$2.emptyScript : "";
                                            for (var R = 0; R < D; R++)
                                                n.append(L[R], h$1()),
                                                A.nextNode(),
                                                c.push({
                                                    type: 2,
                                                    index: ++o
                                                });
                                            n.append(L[D], h$1())
                                        }
                                    }
                                } else if (8 === n.nodeType)
                                    if (n.data === o$3)
                                        c.push({
                                            type: 2,
                                            index: o
                                        });
                                    else
                                        for (var k = -1; -1 !== (k = n.data.indexOf(e$6, k + 1)); )
                                            c.push({
                                                type: 7,
                                                index: o
                                            }),
                                            k += e$6.length - 1;
                                o++
                            }
                        }
                        return _createClass2(t, null, [{
                            key: "createElement",
                            value: function(t, e) {
                                var r = l$2.createElement("template");
                                return r.innerHTML = t,
                                r
                            }
                        }]),
                        t
                    }();
                    function P(t, e) {
                        var r, n, i, a, o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : t, s = arguments.length > 3 ? arguments[3] : void 0;
                        if (e === b)
                            return e;
                        var l = void 0 !== s ? null === (r = o._$Cl) || void 0 === r ? void 0 : r[s] : o._$Cu
                          , c = r$1(e) ? void 0 : e._$litDirective$;
                        return (null == l ? void 0 : l.constructor) !== c && (null === (n = null == l ? void 0 : l._$AO) || void 0 === n || n.call(l, !1),
                        void 0 === c ? l = void 0 : (l = new c(t))._$AT(t, o, s),
                        void 0 !== s ? (null !== (i = (a = o)._$Cl) && void 0 !== i ? i : a._$Cl = [])[s] = l : o._$Cu = l),
                        void 0 !== l && (e = P(t, l._$AS(t, e.values), l, s)),
                        e
                    }
                    var V = function() {
                        function t(e, r) {
                            _classCallCheck2(this, t),
                            this.v = [],
                            this._$AN = void 0,
                            this._$AD = e,
                            this._$AM = r
                        }
                        return _createClass2(t, [{
                            key: "parentNode",
                            get: function() {
                                return this._$AM.parentNode
                            }
                        }, {
                            key: "_$AU",
                            get: function() {
                                return this._$AM._$AU
                            }
                        }, {
                            key: "p",
                            value: function(t) {
                                var e, r = this._$AD, n = r.el.content, i = r.parts, a = (null !== (e = null == t ? void 0 : t.creationScope) && void 0 !== e ? e : l$2).importNode(n, !0);
                                A.currentNode = a;
                                for (var o = A.nextNode(), s = 0, l = 0, c = i[0]; void 0 !== c; ) {
                                    if (s === c.index) {
                                        var h = void 0;
                                        2 === c.type ? h = new N(o,o.nextSibling,this,t) : 1 === c.type ? h = new c.ctor(o,c.name,c.strings,this,t) : 6 === c.type && (h = new L(o,this,t)),
                                        this.v.push(h),
                                        c = i[++l]
                                    }
                                    s !== (null == c ? void 0 : c.index) && (o = A.nextNode(),
                                    s++)
                                }
                                return a
                            }
                        }, {
                            key: "m",
                            value: function(t) {
                                var e, r = 0, n = _createForOfIteratorHelper2(this.v);
                                try {
                                    for (n.s(); !(e = n.n()).done; ) {
                                        var i = e.value;
                                        void 0 !== i && (void 0 !== i.strings ? (i._$AI(t, i, r),
                                        r += i.strings.length - 2) : i._$AI(t[r])),
                                        r++
                                    }
                                } catch (t) {
                                    n.e(t)
                                } finally {
                                    n.f()
                                }
                            }
                        }]),
                        t
                    }(), N = function() {
                        function t(e, r, n, i) {
                            var a;
                            _classCallCheck2(this, t),
                            this.type = 2,
                            this._$AH = w,
                            this._$AN = void 0,
                            this._$AA = e,
                            this._$AB = r,
                            this._$AM = n,
                            this.options = i,
                            this._$Cg = null === (a = null == i ? void 0 : i.isConnected) || void 0 === a || a
                        }
                        return _createClass2(t, [{
                            key: "_$AU",
                            get: function() {
                                var t, e;
                                return null !== (e = null === (t = this._$AM) || void 0 === t ? void 0 : t._$AU) && void 0 !== e ? e : this._$Cg
                            }
                        }, {
                            key: "parentNode",
                            get: function() {
                                var t = this._$AA.parentNode
                                  , e = this._$AM;
                                return void 0 !== e && 11 === t.nodeType && (t = e.parentNode),
                                t
                            }
                        }, {
                            key: "startNode",
                            get: function() {
                                return this._$AA
                            }
                        }, {
                            key: "endNode",
                            get: function() {
                                return this._$AB
                            }
                        }, {
                            key: "_$AI",
                            value: function(t) {
                                t = P(this, t, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this),
                                r$1(t) ? t === w || null == t || "" === t ? (this._$AH !== w && this._$AR(),
                                this._$AH = w) : t !== this._$AH && t !== b && this.$(t) : void 0 !== t._$litType$ ? this.T(t) : void 0 !== t.nodeType ? this.S(t) : u(t) ? this.A(t) : this.$(t)
                            }
                        }, {
                            key: "M",
                            value: function(t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this._$AB;
                                return this._$AA.parentNode.insertBefore(t, e)
                            }
                        }, {
                            key: "S",
                            value: function(t) {
                                this._$AH !== t && (this._$AR(),
                                this._$AH = this.M(t))
                            }
                        }, {
                            key: "$",
                            value: function(t) {
                                this._$AH !== w && r$1(this._$AH) ? this._$AA.nextSibling.data = t : this.S(l$2.createTextNode(t)),
                                this._$AH = t
                            }
                        }, {
                            key: "T",
                            value: function(t) {
                                var e, r = t.values, n = t._$litType$, i = "number" == typeof n ? this._$AC(t) : (void 0 === n.el && (n.el = E.createElement(n.h, this.options)),
                                n);
                                if ((null === (e = this._$AH) || void 0 === e ? void 0 : e._$AD) === i)
                                    this._$AH.m(r);
                                else {
                                    var a = new V(i,this)
                                      , o = a.p(this.options);
                                    a.m(r),
                                    this.S(o),
                                    this._$AH = a
                                }
                            }
                        }, {
                            key: "_$AC",
                            value: function(t) {
                                var e = T.get(t.strings);
                                return void 0 === e && T.set(t.strings, e = new E(t)),
                                e
                            }
                        }, {
                            key: "A",
                            value: function(e) {
                                d(this._$AH) || (this._$AH = [],
                                this._$AR());
                                var r, n, i = this._$AH, a = 0, o = _createForOfIteratorHelper2(e);
                                try {
                                    for (o.s(); !(n = o.n()).done; ) {
                                        var s = n.value;
                                        a === i.length ? i.push(r = new t(this.M(h$1()),this.M(h$1()),this,this.options)) : r = i[a],
                                        r._$AI(s),
                                        a++
                                    }
                                } catch (t) {
                                    o.e(t)
                                } finally {
                                    o.f()
                                }
                                a < i.length && (this._$AR(r && r._$AB.nextSibling, a),
                                i.length = a)
                            }
                        }, {
                            key: "_$AR",
                            value: function() {
                                var t, e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._$AA.nextSibling, r = arguments.length > 1 ? arguments[1] : void 0;
                                for (null === (t = this._$AP) || void 0 === t || t.call(this, !1, !0, r); e && e !== this._$AB; ) {
                                    var n = e.nextSibling;
                                    e.remove(),
                                    e = n
                                }
                            }
                        }, {
                            key: "setConnected",
                            value: function(t) {
                                var e;
                                void 0 === this._$AM && (this._$Cg = t,
                                null === (e = this._$AP) || void 0 === e || e.call(this, t))
                            }
                        }]),
                        t
                    }(), S = function() {
                        function t(e, r, n, i, a) {
                            _classCallCheck2(this, t),
                            this.type = 1,
                            this._$AH = w,
                            this._$AN = void 0,
                            this.element = e,
                            this.name = r,
                            this._$AM = i,
                            this.options = a,
                            n.length > 2 || "" !== n[0] || "" !== n[1] ? (this._$AH = Array(n.length - 1).fill(new String),
                            this.strings = n) : this._$AH = w
                        }
                        return _createClass2(t, [{
                            key: "tagName",
                            get: function() {
                                return this.element.tagName
                            }
                        }, {
                            key: "_$AU",
                            get: function() {
                                return this._$AM._$AU
                            }
                        }, {
                            key: "_$AI",
                            value: function(t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this
                                  , r = arguments.length > 2 ? arguments[2] : void 0
                                  , n = arguments.length > 3 ? arguments[3] : void 0
                                  , i = this.strings
                                  , a = !1;
                                if (void 0 === i)
                                    t = P(this, t, e, 0),
                                    (a = !r$1(t) || t !== this._$AH && t !== b) && (this._$AH = t);
                                else {
                                    var o, s, l = t;
                                    for (t = i[0],
                                    o = 0; o < i.length - 1; o++)
                                        (s = P(this, l[r + o], e, o)) === b && (s = this._$AH[o]),
                                        a || (a = !r$1(s) || s !== this._$AH[o]),
                                        s === w ? t = w : t !== w && (t += (null != s ? s : "") + i[o + 1]),
                                        this._$AH[o] = s
                                }
                                a && !n && this.k(t)
                            }
                        }, {
                            key: "k",
                            value: function(t) {
                                t === w ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, null != t ? t : "")
                            }
                        }]),
                        t
                    }(), M = function(t) {
                        _inherits2(r, t);
                        var e = _createSuper2(r);
                        function r() {
                            var t;
                            return _classCallCheck2(this, r),
                            (t = e.apply(this, arguments)).type = 3,
                            t
                        }
                        return _createClass2(r, [{
                            key: "k",
                            value: function(t) {
                                this.element[this.name] = t === w ? void 0 : t
                            }
                        }]),
                        r
                    }(S), _k = i$2 ? i$2.emptyScript : "", H = function(t) {
                        _inherits2(r, t);
                        var e = _createSuper2(r);
                        function r() {
                            var t;
                            return _classCallCheck2(this, r),
                            (t = e.apply(this, arguments)).type = 4,
                            t
                        }
                        return _createClass2(r, [{
                            key: "k",
                            value: function(t) {
                                t && t !== w ? this.element.setAttribute(this.name, _k) : this.element.removeAttribute(this.name)
                            }
                        }]),
                        r
                    }(S), I = function(t) {
                        _inherits2(r, t);
                        var e = _createSuper2(r);
                        function r(t, n, i, a, o) {
                            var s;
                            return _classCallCheck2(this, r),
                            (s = e.call(this, t, n, i, a, o)).type = 5,
                            s
                        }
                        return _createClass2(r, [{
                            key: "_$AI",
                            value: function(t) {
                                var e;
                                if ((t = null !== (e = P(this, t, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this, 0)) && void 0 !== e ? e : w) !== b) {
                                    var r = this._$AH
                                      , n = t === w && r !== w || t.capture !== r.capture || t.once !== r.once || t.passive !== r.passive
                                      , i = t !== w && (r === w || n);
                                    n && this.element.removeEventListener(this.name, this, r),
                                    i && this.element.addEventListener(this.name, this, t),
                                    this._$AH = t
                                }
                            }
                        }, {
                            key: "handleEvent",
                            value: function(t) {
                                var e, r;
                                "function" == typeof this._$AH ? this._$AH.call(null !== (r = null === (e = this.options) || void 0 === e ? void 0 : e.host) && void 0 !== r ? r : this.element, t) : this._$AH.handleEvent(t)
                            }
                        }]),
                        r
                    }(S), L = function() {
                        function t(e, r, n) {
                            _classCallCheck2(this, t),
                            this.element = e,
                            this.type = 6,
                            this._$AN = void 0,
                            this._$AM = r,
                            this.options = n
                        }
                        return _createClass2(t, [{
                            key: "_$AU",
                            get: function() {
                                return this._$AM._$AU
                            }
                        }, {
                            key: "_$AI",
                            value: function(t) {
                                P(this, t)
                            }
                        }]),
                        t
                    }(), R = {
                        P: "$lit$",
                        V: e$6,
                        L: o$3,
                        I: 1,
                        N: C,
                        R: V,
                        D: u,
                        j: P,
                        H: N,
                        O: S,
                        F: H,
                        B: I,
                        W: M,
                        Z: L
                    }, z = window.litHtmlPolyfillSupport, l$1, o$2;
                    null == z || z(E, N),
                    (null !== (t$2 = globalThis.litHtmlVersions) && void 0 !== t$2 ? t$2 : globalThis.litHtmlVersions = []).push("2.1.2");
                    var r = a$1
                      , s = function(t) {
                        _inherits2(r, t);
                        var e = _createSuper2(r);
                        function r() {
                            var t;
                            return _classCallCheck2(this, r),
                            (t = e.apply(this, arguments)).renderOptions = {
                                host: _assertThisInitialized2(t)
                            },
                            t._$Dt = void 0,
                            t
                        }
                        return _createClass2(r, [{
                            key: "createRenderRoot",
                            value: function() {
                                var t, e, n = _get2(_getPrototypeOf2(r.prototype), "createRenderRoot", this).call(this);
                                return null !== (t = (e = this.renderOptions).renderBefore) && void 0 !== t || (e.renderBefore = n.firstChild),
                                n
                            }
                        }, {
                            key: "update",
                            value: function(t) {
                                var e = this.render();
                                this.hasUpdated || (this.renderOptions.isConnected = this.isConnected),
                                _get2(_getPrototypeOf2(r.prototype), "update", this).call(this, t),
                                this._$Dt = x(e, this.renderRoot, this.renderOptions)
                            }
                        }, {
                            key: "connectedCallback",
                            value: function() {
                                var t;
                                _get2(_getPrototypeOf2(r.prototype), "connectedCallback", this).call(this),
                                null === (t = this._$Dt) || void 0 === t || t.setConnected(!0)
                            }
                        }, {
                            key: "disconnectedCallback",
                            value: function() {
                                var t;
                                _get2(_getPrototypeOf2(r.prototype), "disconnectedCallback", this).call(this),
                                null === (t = this._$Dt) || void 0 === t || t.setConnected(!1)
                            }
                        }, {
                            key: "render",
                            value: function() {
                                return b
                            }
                        }]),
                        r
                    }(a$1);
                    s.finalized = !0,
                    s._$litElement$ = !0,
                    null === (l$1 = globalThis.litElementHydrateSupport) || void 0 === l$1 || l$1.call(globalThis, {
                        LitElement: s
                    });
                    var n$2 = globalThis.litElementPolyfillSupport;
                    null == n$2 || n$2({
                        LitElement: s
                    });
                    var h = {
                        _$AK: function(t, e, r) {
                            t._$AK(e, r)
                        },
                        _$AL: function(t) {
                            return t._$AL
                        }
                    };
                    (null !== (o$2 = globalThis.litElementVersions) && void 0 !== o$2 ? o$2 : globalThis.litElementVersions = []).push("3.1.2");
                    var n$1 = function(t) {
                        return function(e) {
                            return "function" == typeof e ? function(t, e) {
                                return window.customElements.define(t, e),
                                e
                            }(t, e) : function(t, e) {
                                return {
                                    kind: e.kind,
                                    elements: e.elements,
                                    finisher: function(e) {
                                        window.customElements.define(t, e)
                                    }
                                }
                            }(t, e)
                        }
                    }
                      , i$1 = function(t, e) {
                        return "method" === e.kind && e.descriptor && !("value"in e.descriptor) ? _objectSpread2(_objectSpread2({}, e), {}, {
                            finisher: function(r) {
                                r.createProperty(e.key, t)
                            }
                        }) : {
                            kind: "field",
                            key: Symbol(),
                            placement: "own",
                            descriptor: {},
                            originalKey: e.key,
                            initializer: function() {
                                "function" == typeof e.initializer && (this[e.key] = e.initializer.call(this))
                            },
                            finisher: function(r) {
                                r.createProperty(e.key, t)
                            }
                        }
                    };
                    function e$5(t) {
                        return function(e, r) {
                            return void 0 !== r ? function(t, e, r) {
                                e.constructor.createProperty(r, t)
                            }(t, e, r) : i$1(t, e)
                        }
                    }
                    function t$1(t) {
                        return e$5(_objectSpread2(_objectSpread2({}, t), {}, {
                            state: !0
                        }))
                    }
                    var e$4 = function(t, e, r) {
                        Object.defineProperty(e, r, t)
                    }, t = function(t, e) {
                        return {
                            kind: "method",
                            placement: "prototype",
                            key: e.key,
                            descriptor: t
                        }
                    }, o$1 = function(t) {
                        var e = t.finisher
                          , r = t.descriptor;
                        return function(t, n) {
                            var i;
                            if (void 0 === n) {
                                var a = null !== (i = t.originalKey) && void 0 !== i ? i : t.key
                                  , o = null != r ? {
                                    kind: "method",
                                    placement: "prototype",
                                    key: a,
                                    descriptor: r(t.key)
                                } : _objectSpread2(_objectSpread2({}, t), {}, {
                                    key: a
                                });
                                return null != e && (o.finisher = function(t) {
                                    e(t, a)
                                }
                                ),
                                o
                            }
                            var s = t.constructor;
                            void 0 !== r && Object.defineProperty(t, n, r(n)),
                            null == e || e(s, n)
                        }
                    }, n;
                    function e$3(t) {
                        return o$1({
                            finisher: function(e, r) {
                                Object.assign(e.prototype[r], t)
                            }
                        })
                    }
                    function i(t, e) {
                        return o$1({
                            descriptor: function(r) {
                                var n = {
                                    get: function() {
                                        var e, r;
                                        return null !== (r = null === (e = this.renderRoot) || void 0 === e ? void 0 : e.querySelector(t)) && void 0 !== r ? r : null
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                };
                                if (e) {
                                    var i = "symbol" == _typeof2(r) ? Symbol() : "__" + r;
                                    n.get = function() {
                                        var e, r;
                                        return void 0 === this[i] && (this[i] = null !== (r = null === (e = this.renderRoot) || void 0 === e ? void 0 : e.querySelector(t)) && void 0 !== r ? r : null),
                                        this[i]
                                    }
                                }
                                return n
                            }
                        })
                    }
                    function e$2(t) {
                        return o$1({
                            descriptor: function(e) {
                                return {
                                    get: function() {
                                        var e, r;
                                        return null !== (r = null === (e = this.renderRoot) || void 0 === e ? void 0 : e.querySelectorAll(t)) && void 0 !== r ? r : []
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                }
                            }
                        })
                    }
                    function e$1(t) {
                        return o$1({
                            descriptor: function(e) {
                                return {
                                    get: function() {
                                        var e = this;
                                        return _asyncToGenerator(regeneratorRuntime.mark((function r() {
                                            var n;
                                            return regeneratorRuntime.wrap((function(r) {
                                                for (; ; )
                                                    switch (r.prev = r.next) {
                                                    case 0:
                                                        return r.next = 2,
                                                        e.updateComplete;
                                                    case 2:
                                                        return r.abrupt("return", null === (n = e.renderRoot) || void 0 === n ? void 0 : n.querySelector(t));
                                                    case 3:
                                                    case "end":
                                                        return r.stop()
                                                    }
                                            }
                                            ), r)
                                        }
                                        )))()
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                }
                            }
                        })
                    }
                    var e = null != (null === (n = window.HTMLSlotElement) || void 0 === n ? void 0 : n.prototype.assignedElements) ? function(t, e) {
                        return t.assignedElements(e)
                    }
                    : function(t, e) {
                        return t.assignedNodes(e).filter((function(t) {
                            return t.nodeType === Node.ELEMENT_NODE
                        }
                        ))
                    }
                    ;
                    function l(t) {
                        var r = null != t ? t : {}
                          , n = r.slot
                          , i = r.selector;
                        return o$1({
                            descriptor: function(r) {
                                return {
                                    get: function() {
                                        var r, a = "slot" + (n ? "[name=".concat(n, "]") : ":not([name])"), o = null === (r = this.renderRoot) || void 0 === r ? void 0 : r.querySelector(a), s = null != o ? e(o, t) : [];
                                        return i ? s.filter((function(t) {
                                            return t.matches(i)
                                        }
                                        )) : s
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                }
                            }
                        })
                    }
                    function o(t, e, r) {
                        var n, i = t;
                        return "object" == _typeof2(t) ? (i = t.slot,
                        n = t) : n = {
                            flatten: e
                        },
                        r ? l({
                            slot: i,
                            flatten: e,
                            selector: r
                        }) : o$1({
                            descriptor: function(t) {
                                return {
                                    get: function() {
                                        var t, e, r = "slot" + (i ? "[name=".concat(i, "]") : ":not([name])"), a = null === (t = this.renderRoot) || void 0 === t ? void 0 : t.querySelector(r);
                                        return null !== (e = null == a ? void 0 : a.assignedNodes(n)) && void 0 !== e ? e : []
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                }
                            }
                        })
                    }
                    var commonjsGlobal = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
                    function getDefaultExportFromCjs(t) {
                        return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t
                    }
                    function getDefaultExportFromNamespaceIfPresent(t) {
                        return t && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t
                    }
                    function getDefaultExportFromNamespaceIfNotNamed(t) {
                        return t && Object.prototype.hasOwnProperty.call(t, "default") && 1 === Object.keys(t).length ? t.default : t
                    }
                    function getAugmentedNamespace(t) {
                        if (t.__esModule)
                            return t;
                        var e = Object.defineProperty({}, "__esModule", {
                            value: !0
                        });
                        return Object.keys(t).forEach((function(r) {
                            var n = Object.getOwnPropertyDescriptor(t, r);
                            Object.defineProperty(e, r, n.get ? n : {
                                enumerable: !0,
                                get: function() {
                                    return t[r]
                                }
                            })
                        }
                        )),
                        e
                    }
                    function commonjsRequire(t) {
                        throw new Error('Could not dynamically require "' + t + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')
                    }
                    var lottie$1 = {
                        exports: {}
                    };
                    (function(module) {
                        var root, factory;
                        "undefined" != typeof navigator && (root = window || {},
                        factory = function factory(window) {
                            var svgNS = "http://www.w3.org/2000/svg", locationHref = "", initialDefaultFrame = -999999, _useWebWorker = !1, subframeEnabled = !0, idPrefix = "", expressionsPlugin, isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent), cachedColors = {}, bmRnd, bmPow = Math.pow, bmSqrt = Math.sqrt, bmFloor = Math.floor, bmMax = Math.max, bmMin = Math.min, BMMath = {};
                            function ProjectInterface() {
                                return {}
                            }
                            !function() {
                                var t, e = ["abs", "acos", "acosh", "asin", "asinh", "atan", "atanh", "atan2", "ceil", "cbrt", "expm1", "clz32", "cos", "cosh", "exp", "floor", "fround", "hypot", "imul", "log", "log1p", "log2", "log10", "max", "min", "pow", "random", "round", "sign", "sin", "sinh", "sqrt", "tan", "tanh", "trunc", "E", "LN10", "LN2", "LOG10E", "LOG2E", "PI", "SQRT1_2", "SQRT2"], r = e.length;
                                for (t = 0; t < r; t += 1)
                                    BMMath[e[t]] = Math[e[t]]
                            }(),
                            BMMath.random = Math.random,
                            BMMath.abs = function(t) {
                                if ("object" == _typeof2(t) && t.length) {
                                    var e, r = createSizedArray(t.length), n = t.length;
                                    for (e = 0; e < n; e += 1)
                                        r[e] = Math.abs(t[e]);
                                    return r
                                }
                                return Math.abs(t)
                            }
                            ;
                            var defaultCurveSegments = 150
                              , degToRads = Math.PI / 180
                              , roundCorner = .5519;
                            function roundValues(t) {
                                bmRnd = t ? Math.round : function(t) {
                                    return t
                                }
                            }
                            function styleDiv(t) {
                                t.style.position = "absolute",
                                t.style.top = 0,
                                t.style.left = 0,
                                t.style.display = "block",
                                t.style.transformOrigin = "0 0",
                                t.style.webkitTransformOrigin = "0 0",
                                t.style.backfaceVisibility = "visible",
                                t.style.webkitBackfaceVisibility = "visible",
                                t.style.transformStyle = "preserve-3d",
                                t.style.webkitTransformStyle = "preserve-3d",
                                t.style.mozTransformStyle = "preserve-3d"
                            }
                            function BMEnterFrameEvent(t, e, r, n) {
                                this.type = t,
                                this.currentTime = e,
                                this.totalTime = r,
                                this.direction = n < 0 ? -1 : 1
                            }
                            function BMCompleteEvent(t, e) {
                                this.type = t,
                                this.direction = e < 0 ? -1 : 1
                            }
                            function BMCompleteLoopEvent(t, e, r, n) {
                                this.type = t,
                                this.currentLoop = r,
                                this.totalLoops = e,
                                this.direction = n < 0 ? -1 : 1
                            }
                            function BMSegmentStartEvent(t, e, r) {
                                this.type = t,
                                this.firstFrame = e,
                                this.totalFrames = r
                            }
                            function BMDestroyEvent(t, e) {
                                this.type = t,
                                this.target = e
                            }
                            function BMRenderFrameErrorEvent(t, e) {
                                this.type = "renderFrameError",
                                this.nativeError = t,
                                this.currentTime = e
                            }
                            function BMConfigErrorEvent(t) {
                                this.type = "configError",
                                this.nativeError = t
                            }
                            function BMAnimationConfigErrorEvent(t, e) {
                                this.type = t,
                                this.nativeError = e
                            }
                            roundValues(!1);
                            var createElementID = (_count = 0,
                            function() {
                                return idPrefix + "__lottie_element_" + (_count += 1)
                            }
                            ), _count;
                            function HSVtoRGB(t, e, r) {
                                var n, i, a, o, s, l, c, h;
                                switch (l = r * (1 - e),
                                c = r * (1 - (s = 6 * t - (o = Math.floor(6 * t))) * e),
                                h = r * (1 - (1 - s) * e),
                                o % 6) {
                                case 0:
                                    n = r,
                                    i = h,
                                    a = l;
                                    break;
                                case 1:
                                    n = c,
                                    i = r,
                                    a = l;
                                    break;
                                case 2:
                                    n = l,
                                    i = r,
                                    a = h;
                                    break;
                                case 3:
                                    n = l,
                                    i = c,
                                    a = r;
                                    break;
                                case 4:
                                    n = h,
                                    i = l,
                                    a = r;
                                    break;
                                case 5:
                                    n = r,
                                    i = l,
                                    a = c
                                }
                                return [n, i, a]
                            }
                            function RGBtoHSV(t, e, r) {
                                var n, i = Math.max(t, e, r), a = Math.min(t, e, r), o = i - a, s = 0 === i ? 0 : o / i, l = i / 255;
                                switch (i) {
                                case a:
                                    n = 0;
                                    break;
                                case t:
                                    n = e - r + o * (e < r ? 6 : 0),
                                    n /= 6 * o;
                                    break;
                                case e:
                                    n = r - t + 2 * o,
                                    n /= 6 * o;
                                    break;
                                case r:
                                    n = t - e + 4 * o,
                                    n /= 6 * o
                                }
                                return [n, s, l]
                            }
                            function addSaturationToRGB(t, e) {
                                var r = RGBtoHSV(255 * t[0], 255 * t[1], 255 * t[2]);
                                return r[1] += e,
                                r[1] > 1 ? r[1] = 1 : r[1] <= 0 && (r[1] = 0),
                                HSVtoRGB(r[0], r[1], r[2])
                            }
                            function addBrightnessToRGB(t, e) {
                                var r = RGBtoHSV(255 * t[0], 255 * t[1], 255 * t[2]);
                                return r[2] += e,
                                r[2] > 1 ? r[2] = 1 : r[2] < 0 && (r[2] = 0),
                                HSVtoRGB(r[0], r[1], r[2])
                            }
                            function addHueToRGB(t, e) {
                                var r = RGBtoHSV(255 * t[0], 255 * t[1], 255 * t[2]);
                                return r[0] += e / 360,
                                r[0] > 1 ? r[0] -= 1 : r[0] < 0 && (r[0] += 1),
                                HSVtoRGB(r[0], r[1], r[2])
                            }
                            var rgbToHex = function() {
                                var t, e, r = [];
                                for (t = 0; t < 256; t += 1)
                                    e = t.toString(16),
                                    r[t] = 1 === e.length ? "0" + e : e;
                                return function(t, e, n) {
                                    return t < 0 && (t = 0),
                                    e < 0 && (e = 0),
                                    n < 0 && (n = 0),
                                    "#" + r[t] + r[e] + r[n]
                                }
                            }();
                            function BaseEvent() {}
                            BaseEvent.prototype = {
                                triggerEvent: function(t, e) {
                                    if (this._cbs[t])
                                        for (var r = this._cbs[t], n = 0; n < r.length; n += 1)
                                            r[n](e)
                                },
                                addEventListener: function(t, e) {
                                    return this._cbs[t] || (this._cbs[t] = []),
                                    this._cbs[t].push(e),
                                    function() {
                                        this.removeEventListener(t, e)
                                    }
                                    .bind(this)
                                },
                                removeEventListener: function(t, e) {
                                    if (e) {
                                        if (this._cbs[t]) {
                                            for (var r = 0, n = this._cbs[t].length; r < n; )
                                                this._cbs[t][r] === e && (this._cbs[t].splice(r, 1),
                                                r -= 1,
                                                n -= 1),
                                                r += 1;
                                            this._cbs[t].length || (this._cbs[t] = null)
                                        }
                                    } else
                                        this._cbs[t] = null
                                }
                            };
                            var createTypedArray = function() {
                                function t(t, e) {
                                    var r, n = 0, i = [];
                                    switch (t) {
                                    case "int16":
                                    case "uint8c":
                                        r = 1;
                                        break;
                                    default:
                                        r = 1.1
                                    }
                                    for (n = 0; n < e; n += 1)
                                        i.push(r);
                                    return i
                                }
                                return "function" == typeof Uint8ClampedArray && "function" == typeof Float32Array ? function(e, r) {
                                    return "float32" === e ? new Float32Array(r) : "int16" === e ? new Int16Array(r) : "uint8c" === e ? new Uint8ClampedArray(r) : t(e, r)
                                }
                                : t
                            }();
                            function createSizedArray(t) {
                                return Array.apply(null, {
                                    length: t
                                })
                            }
                            function createNS(t) {
                                return document.createElementNS(svgNS, t)
                            }
                            function createTag(t) {
                                return document.createElement(t)
                            }
                            function DynamicPropertyContainer() {}
                            DynamicPropertyContainer.prototype = {
                                addDynamicProperty: function(t) {
                                    -1 === this.dynamicProperties.indexOf(t) && (this.dynamicProperties.push(t),
                                    this.container.addDynamicProperty(this),
                                    this._isAnimated = !0)
                                },
                                iterateDynamicProperties: function() {
                                    var t;
                                    this._mdf = !1;
                                    var e = this.dynamicProperties.length;
                                    for (t = 0; t < e; t += 1)
                                        this.dynamicProperties[t].getValue(),
                                        this.dynamicProperties[t]._mdf && (this._mdf = !0)
                                },
                                initDynamicPropertyContainer: function(t) {
                                    this.container = t,
                                    this.dynamicProperties = [],
                                    this._mdf = !1,
                                    this._isAnimated = !1
                                }
                            };
                            var getBlendMode = (blendModeEnums = {
                                0: "source-over",
                                1: "multiply",
                                2: "screen",
                                3: "overlay",
                                4: "darken",
                                5: "lighten",
                                6: "color-dodge",
                                7: "color-burn",
                                8: "hard-light",
                                9: "soft-light",
                                10: "difference",
                                11: "exclusion",
                                12: "hue",
                                13: "saturation",
                                14: "color",
                                15: "luminosity"
                            },
                            function(t) {
                                return blendModeEnums[t] || ""
                            }
                            ), blendModeEnums, lineCapEnum = {
                                1: "butt",
                                2: "round",
                                3: "square"
                            }, lineJoinEnum = {
                                1: "miter",
                                2: "round",
                                3: "bevel"
                            }, Matrix = function() {
                                var t = Math.cos
                                  , e = Math.sin
                                  , r = Math.tan
                                  , n = Math.round;
                                function i() {
                                    return this.props[0] = 1,
                                    this.props[1] = 0,
                                    this.props[2] = 0,
                                    this.props[3] = 0,
                                    this.props[4] = 0,
                                    this.props[5] = 1,
                                    this.props[6] = 0,
                                    this.props[7] = 0,
                                    this.props[8] = 0,
                                    this.props[9] = 0,
                                    this.props[10] = 1,
                                    this.props[11] = 0,
                                    this.props[12] = 0,
                                    this.props[13] = 0,
                                    this.props[14] = 0,
                                    this.props[15] = 1,
                                    this
                                }
                                function a(r) {
                                    if (0 === r)
                                        return this;
                                    var n = t(r)
                                      , i = e(r);
                                    return this._t(n, -i, 0, 0, i, n, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
                                }
                                function o(r) {
                                    if (0 === r)
                                        return this;
                                    var n = t(r)
                                      , i = e(r);
                                    return this._t(1, 0, 0, 0, 0, n, -i, 0, 0, i, n, 0, 0, 0, 0, 1)
                                }
                                function s(r) {
                                    if (0 === r)
                                        return this;
                                    var n = t(r)
                                      , i = e(r);
                                    return this._t(n, 0, i, 0, 0, 1, 0, 0, -i, 0, n, 0, 0, 0, 0, 1)
                                }
                                function l(r) {
                                    if (0 === r)
                                        return this;
                                    var n = t(r)
                                      , i = e(r);
                                    return this._t(n, -i, 0, 0, i, n, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
                                }
                                function c(t, e) {
                                    return this._t(1, e, t, 1, 0, 0)
                                }
                                function h(t, e) {
                                    return this.shear(r(t), r(e))
                                }
                                function u(n, i) {
                                    var a = t(i)
                                      , o = e(i);
                                    return this._t(a, o, 0, 0, -o, a, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, r(n), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(a, -o, 0, 0, o, a, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
                                }
                                function p(t, e, r) {
                                    return r || 0 === r || (r = 1),
                                    1 === t && 1 === e && 1 === r ? this : this._t(t, 0, 0, 0, 0, e, 0, 0, 0, 0, r, 0, 0, 0, 0, 1)
                                }
                                function d(t, e, r, n, i, a, o, s, l, c, h, u, p, d, f, m) {
                                    return this.props[0] = t,
                                    this.props[1] = e,
                                    this.props[2] = r,
                                    this.props[3] = n,
                                    this.props[4] = i,
                                    this.props[5] = a,
                                    this.props[6] = o,
                                    this.props[7] = s,
                                    this.props[8] = l,
                                    this.props[9] = c,
                                    this.props[10] = h,
                                    this.props[11] = u,
                                    this.props[12] = p,
                                    this.props[13] = d,
                                    this.props[14] = f,
                                    this.props[15] = m,
                                    this
                                }
                                function f(t, e, r) {
                                    return r = r || 0,
                                    0 !== t || 0 !== e || 0 !== r ? this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, t, e, r, 1) : this
                                }
                                function m(t, e, r, n, i, a, o, s, l, c, h, u, p, d, f, m) {
                                    var v = this.props;
                                    if (1 === t && 0 === e && 0 === r && 0 === n && 0 === i && 1 === a && 0 === o && 0 === s && 0 === l && 0 === c && 1 === h && 0 === u)
                                        return v[12] = v[12] * t + v[15] * p,
                                        v[13] = v[13] * a + v[15] * d,
                                        v[14] = v[14] * h + v[15] * f,
                                        v[15] *= m,
                                        this._identityCalculated = !1,
                                        this;
                                    var g = v[0]
                                      , y = v[1]
                                      , _ = v[2]
                                      , x = v[3]
                                      , b = v[4]
                                      , w = v[5]
                                      , S = v[6]
                                      , T = v[7]
                                      , M = v[8]
                                      , E = v[9]
                                      , A = v[10]
                                      , P = v[11]
                                      , C = v[12]
                                      , L = v[13]
                                      , D = v[14]
                                      , R = v[15];
                                    return v[0] = g * t + y * i + _ * l + x * p,
                                    v[1] = g * e + y * a + _ * c + x * d,
                                    v[2] = g * r + y * o + _ * h + x * f,
                                    v[3] = g * n + y * s + _ * u + x * m,
                                    v[4] = b * t + w * i + S * l + T * p,
                                    v[5] = b * e + w * a + S * c + T * d,
                                    v[6] = b * r + w * o + S * h + T * f,
                                    v[7] = b * n + w * s + S * u + T * m,
                                    v[8] = M * t + E * i + A * l + P * p,
                                    v[9] = M * e + E * a + A * c + P * d,
                                    v[10] = M * r + E * o + A * h + P * f,
                                    v[11] = M * n + E * s + A * u + P * m,
                                    v[12] = C * t + L * i + D * l + R * p,
                                    v[13] = C * e + L * a + D * c + R * d,
                                    v[14] = C * r + L * o + D * h + R * f,
                                    v[15] = C * n + L * s + D * u + R * m,
                                    this._identityCalculated = !1,
                                    this
                                }
                                function v() {
                                    return this._identityCalculated || (this._identity = !(1 !== this.props[0] || 0 !== this.props[1] || 0 !== this.props[2] || 0 !== this.props[3] || 0 !== this.props[4] || 1 !== this.props[5] || 0 !== this.props[6] || 0 !== this.props[7] || 0 !== this.props[8] || 0 !== this.props[9] || 1 !== this.props[10] || 0 !== this.props[11] || 0 !== this.props[12] || 0 !== this.props[13] || 0 !== this.props[14] || 1 !== this.props[15]),
                                    this._identityCalculated = !0),
                                    this._identity
                                }
                                function g(t) {
                                    for (var e = 0; e < 16; ) {
                                        if (t.props[e] !== this.props[e])
                                            return !1;
                                        e += 1
                                    }
                                    return !0
                                }
                                function y(t) {
                                    var e;
                                    for (e = 0; e < 16; e += 1)
                                        t.props[e] = this.props[e];
                                    return t
                                }
                                function _(t) {
                                    var e;
                                    for (e = 0; e < 16; e += 1)
                                        this.props[e] = t[e]
                                }
                                function x(t, e, r) {
                                    return {
                                        x: t * this.props[0] + e * this.props[4] + r * this.props[8] + this.props[12],
                                        y: t * this.props[1] + e * this.props[5] + r * this.props[9] + this.props[13],
                                        z: t * this.props[2] + e * this.props[6] + r * this.props[10] + this.props[14]
                                    }
                                }
                                function b(t, e, r) {
                                    return t * this.props[0] + e * this.props[4] + r * this.props[8] + this.props[12]
                                }
                                function w(t, e, r) {
                                    return t * this.props[1] + e * this.props[5] + r * this.props[9] + this.props[13]
                                }
                                function S(t, e, r) {
                                    return t * this.props[2] + e * this.props[6] + r * this.props[10] + this.props[14]
                                }
                                function T() {
                                    var t = this.props[0] * this.props[5] - this.props[1] * this.props[4]
                                      , e = this.props[5] / t
                                      , r = -this.props[1] / t
                                      , n = -this.props[4] / t
                                      , i = this.props[0] / t
                                      , a = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / t
                                      , o = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / t
                                      , s = new Matrix;
                                    return s.props[0] = e,
                                    s.props[1] = r,
                                    s.props[4] = n,
                                    s.props[5] = i,
                                    s.props[12] = a,
                                    s.props[13] = o,
                                    s
                                }
                                function M(t) {
                                    return this.getInverseMatrix().applyToPointArray(t[0], t[1], t[2] || 0)
                                }
                                function E(t) {
                                    var e, r = t.length, n = [];
                                    for (e = 0; e < r; e += 1)
                                        n[e] = M(t[e]);
                                    return n
                                }
                                function A(t, e, r) {
                                    var n = createTypedArray("float32", 6);
                                    if (this.isIdentity())
                                        n[0] = t[0],
                                        n[1] = t[1],
                                        n[2] = e[0],
                                        n[3] = e[1],
                                        n[4] = r[0],
                                        n[5] = r[1];
                                    else {
                                        var i = this.props[0]
                                          , a = this.props[1]
                                          , o = this.props[4]
                                          , s = this.props[5]
                                          , l = this.props[12]
                                          , c = this.props[13];
                                        n[0] = t[0] * i + t[1] * o + l,
                                        n[1] = t[0] * a + t[1] * s + c,
                                        n[2] = e[0] * i + e[1] * o + l,
                                        n[3] = e[0] * a + e[1] * s + c,
                                        n[4] = r[0] * i + r[1] * o + l,
                                        n[5] = r[0] * a + r[1] * s + c
                                    }
                                    return n
                                }
                                function P(t, e, r) {
                                    return this.isIdentity() ? [t, e, r] : [t * this.props[0] + e * this.props[4] + r * this.props[8] + this.props[12], t * this.props[1] + e * this.props[5] + r * this.props[9] + this.props[13], t * this.props[2] + e * this.props[6] + r * this.props[10] + this.props[14]]
                                }
                                function C(t, e) {
                                    if (this.isIdentity())
                                        return t + "," + e;
                                    var r = this.props;
                                    return Math.round(100 * (t * r[0] + e * r[4] + r[12])) / 100 + "," + Math.round(100 * (t * r[1] + e * r[5] + r[13])) / 100
                                }
                                function L() {
                                    for (var t = 0, e = this.props, r = "matrix3d("; t < 16; )
                                        r += n(1e4 * e[t]) / 1e4,
                                        r += 15 === t ? ")" : ",",
                                        t += 1;
                                    return r
                                }
                                function D(t) {
                                    return t < 1e-6 && t > 0 || t > -1e-6 && t < 0 ? n(1e4 * t) / 1e4 : t
                                }
                                function R() {
                                    var t = this.props;
                                    return "matrix(" + D(t[0]) + "," + D(t[1]) + "," + D(t[4]) + "," + D(t[5]) + "," + D(t[12]) + "," + D(t[13]) + ")"
                                }
                                return function() {
                                    this.reset = i,
                                    this.rotate = a,
                                    this.rotateX = o,
                                    this.rotateY = s,
                                    this.rotateZ = l,
                                    this.skew = h,
                                    this.skewFromAxis = u,
                                    this.shear = c,
                                    this.scale = p,
                                    this.setTransform = d,
                                    this.translate = f,
                                    this.transform = m,
                                    this.applyToPoint = x,
                                    this.applyToX = b,
                                    this.applyToY = w,
                                    this.applyToZ = S,
                                    this.applyToPointArray = P,
                                    this.applyToTriplePoints = A,
                                    this.applyToPointStringified = C,
                                    this.toCSS = L,
                                    this.to2dCSS = R,
                                    this.clone = y,
                                    this.cloneFromProps = _,
                                    this.equals = g,
                                    this.inversePoints = E,
                                    this.inversePoint = M,
                                    this.getInverseMatrix = T,
                                    this._t = this.transform,
                                    this.isIdentity = v,
                                    this._identity = !0,
                                    this._identityCalculated = !1,
                                    this.props = createTypedArray("float32", 16),
                                    this.reset()
                                }
                            }();
                            !function(t, e) {
                                var r = this
                                  , n = 256
                                  , i = e.pow(n, 6)
                                  , a = e.pow(2, 52)
                                  , o = 2 * a
                                  , s = 255;
                                function l(t) {
                                    var e, r = t.length, i = this, a = 0, o = i.i = i.j = 0, l = i.S = [];
                                    for (r || (t = [r++]); a < n; )
                                        l[a] = a++;
                                    for (a = 0; a < n; a++)
                                        l[a] = l[o = s & o + t[a % r] + (e = l[a])],
                                        l[o] = e;
                                    i.g = function(t) {
                                        for (var e, r = 0, a = i.i, o = i.j, l = i.S; t--; )
                                            e = l[a = s & a + 1],
                                            r = r * n + l[s & (l[a] = l[o = s & o + e]) + (l[o] = e)];
                                        return i.i = a,
                                        i.j = o,
                                        r
                                    }
                                }
                                function c(t, e) {
                                    return e.i = t.i,
                                    e.j = t.j,
                                    e.S = t.S.slice(),
                                    e
                                }
                                function h(t, e) {
                                    var r, n = [], i = _typeof2(t);
                                    if (e && "object" == i)
                                        for (r in t)
                                            try {
                                                n.push(h(t[r], e - 1))
                                            } catch (t) {}
                                    return n.length ? n : "string" == i ? t : t + "\0"
                                }
                                function u(t, e) {
                                    for (var r, n = t + "", i = 0; i < n.length; )
                                        e[s & i] = s & (r ^= 19 * e[s & i]) + n.charCodeAt(i++);
                                    return p(e)
                                }
                                function p(t) {
                                    return String.fromCharCode.apply(0, t)
                                }
                                e.seedrandom = function(s, d, f) {
                                    var m = []
                                      , v = u(h((d = !0 === d ? {
                                        entropy: !0
                                    } : d || {}).entropy ? [s, p(t)] : null === s ? function() {
                                        try {
                                            var e = new Uint8Array(n);
                                            return (r.crypto || r.msCrypto).getRandomValues(e),
                                            p(e)
                                        } catch (e) {
                                            var i = r.navigator
                                              , a = i && i.plugins;
                                            return [+new Date, r, a, r.screen, p(t)]
                                        }
                                    }() : s, 3), m)
                                      , g = new l(m)
                                      , y = function() {
                                        for (var t = g.g(6), e = i, r = 0; t < a; )
                                            t = (t + r) * n,
                                            e *= n,
                                            r = g.g(1);
                                        for (; t >= o; )
                                            t /= 2,
                                            e /= 2,
                                            r >>>= 1;
                                        return (t + r) / e
                                    };
                                    return y.int32 = function() {
                                        return 0 | g.g(4)
                                    }
                                    ,
                                    y.quick = function() {
                                        return g.g(4) / 4294967296
                                    }
                                    ,
                                    y.double = y,
                                    u(p(g.S), t),
                                    (d.pass || f || function(t, r, n, i) {
                                        return i && (i.S && c(i, g),
                                        t.state = function() {
                                            return c(g, {})
                                        }
                                        ),
                                        n ? (e.random = t,
                                        r) : t
                                    }
                                    )(y, v, "global"in d ? d.global : this == e, d.state)
                                }
                                ,
                                u(e.random(), t)
                            }([], BMMath);
                            var BezierFactory = function() {
                                var t = {
                                    getBezierEasing: function(t, r, n, i, a) {
                                        var o = a || ("bez_" + t + "_" + r + "_" + n + "_" + i).replace(/\./g, "p");
                                        if (e[o])
                                            return e[o];
                                        var s = new c([t, r, n, i]);
                                        return e[o] = s,
                                        s
                                    }
                                }
                                  , e = {}
                                  , r = .1
                                  , n = "function" == typeof Float32Array;
                                function i(t, e) {
                                    return 1 - 3 * e + 3 * t
                                }
                                function a(t, e) {
                                    return 3 * e - 6 * t
                                }
                                function o(t) {
                                    return 3 * t
                                }
                                function s(t, e, r) {
                                    return ((i(e, r) * t + a(e, r)) * t + o(e)) * t
                                }
                                function l(t, e, r) {
                                    return 3 * i(e, r) * t * t + 2 * a(e, r) * t + o(e)
                                }
                                function c(t) {
                                    this._p = t,
                                    this._mSampleValues = n ? new Float32Array(11) : new Array(11),
                                    this._precomputed = !1,
                                    this.get = this.get.bind(this)
                                }
                                return c.prototype = {
                                    get: function(t) {
                                        var e = this._p[0]
                                          , r = this._p[1]
                                          , n = this._p[2]
                                          , i = this._p[3];
                                        return this._precomputed || this._precompute(),
                                        e === r && n === i ? t : 0 === t ? 0 : 1 === t ? 1 : s(this._getTForX(t), r, i)
                                    },
                                    _precompute: function() {
                                        var t = this._p[0]
                                          , e = this._p[1]
                                          , r = this._p[2]
                                          , n = this._p[3];
                                        this._precomputed = !0,
                                        t === e && r === n || this._calcSampleValues()
                                    },
                                    _calcSampleValues: function() {
                                        for (var t = this._p[0], e = this._p[2], n = 0; n < 11; ++n)
                                            this._mSampleValues[n] = s(n * r, t, e)
                                    },
                                    _getTForX: function(t) {
                                        for (var e = this._p[0], n = this._p[2], i = this._mSampleValues, a = 0, o = 1; 10 !== o && i[o] <= t; ++o)
                                            a += r;
                                        var c = a + (t - i[--o]) / (i[o + 1] - i[o]) * r
                                          , h = l(c, e, n);
                                        return h >= .001 ? function(t, e, r, n) {
                                            for (var i = 0; i < 4; ++i) {
                                                var a = l(e, r, n);
                                                if (0 === a)
                                                    return e;
                                                e -= (s(e, r, n) - t) / a
                                            }
                                            return e
                                        }(t, c, e, n) : 0 === h ? c : function(t, e, r, n, i) {
                                            var a, o, l = 0;
                                            do {
                                                (a = s(o = e + (r - e) / 2, n, i) - t) > 0 ? r = o : e = o
                                            } while (Math.abs(a) > 1e-7 && ++l < 10);
                                            return o
                                        }(t, a, a + r, e, n)
                                    }
                                },
                                t
                            }();
                            function extendPrototype(t, e) {
                                var r, n, i = t.length;
                                for (r = 0; r < i; r += 1)
                                    for (var a in n = t[r].prototype)
                                        Object.prototype.hasOwnProperty.call(n, a) && (e.prototype[a] = n[a])
                            }
                            function getDescriptor(t, e) {
                                return Object.getOwnPropertyDescriptor(t, e)
                            }
                            function createProxyFunction(t) {
                                function e() {}
                                return e.prototype = t,
                                e
                            }
                            function bezFunction() {
                                var t = Math;
                                function e(t, e, r, n, i, a) {
                                    var o = t * n + e * i + r * a - i * n - a * t - r * e;
                                    return o > -.001 && o < .001
                                }
                                var r = function(t, e, r, n) {
                                    var i, a, o, s, l, c, h = defaultCurveSegments, u = 0, p = [], d = [], f = bezierLengthPool.newElement();
                                    for (o = r.length,
                                    i = 0; i < h; i += 1) {
                                        for (l = i / (h - 1),
                                        c = 0,
                                        a = 0; a < o; a += 1)
                                            s = bmPow(1 - l, 3) * t[a] + 3 * bmPow(1 - l, 2) * l * r[a] + 3 * (1 - l) * bmPow(l, 2) * n[a] + bmPow(l, 3) * e[a],
                                            p[a] = s,
                                            null !== d[a] && (c += bmPow(p[a] - d[a], 2)),
                                            d[a] = p[a];
                                        c && (u += c = bmSqrt(c)),
                                        f.percents[i] = l,
                                        f.lengths[i] = u
                                    }
                                    return f.addedLength = u,
                                    f
                                };
                                function n(t) {
                                    this.segmentLength = 0,
                                    this.points = new Array(t)
                                }
                                function i(t, e) {
                                    this.partialLength = t,
                                    this.point = e
                                }
                                var a, o = (a = {},
                                function(t, r, o, s) {
                                    var l = (t[0] + "_" + t[1] + "_" + r[0] + "_" + r[1] + "_" + o[0] + "_" + o[1] + "_" + s[0] + "_" + s[1]).replace(/\./g, "p");
                                    if (!a[l]) {
                                        var c, h, u, p, d, f, m, v = defaultCurveSegments, g = 0, y = null;
                                        2 === t.length && (t[0] !== r[0] || t[1] !== r[1]) && e(t[0], t[1], r[0], r[1], t[0] + o[0], t[1] + o[1]) && e(t[0], t[1], r[0], r[1], r[0] + s[0], r[1] + s[1]) && (v = 2);
                                        var _ = new n(v);
                                        for (u = o.length,
                                        c = 0; c < v; c += 1) {
                                            for (m = createSizedArray(u),
                                            d = c / (v - 1),
                                            f = 0,
                                            h = 0; h < u; h += 1)
                                                p = bmPow(1 - d, 3) * t[h] + 3 * bmPow(1 - d, 2) * d * (t[h] + o[h]) + 3 * (1 - d) * bmPow(d, 2) * (r[h] + s[h]) + bmPow(d, 3) * r[h],
                                                m[h] = p,
                                                null !== y && (f += bmPow(m[h] - y[h], 2));
                                            g += f = bmSqrt(f),
                                            _.points[c] = new i(f,m),
                                            y = m
                                        }
                                        _.segmentLength = g,
                                        a[l] = _
                                    }
                                    return a[l]
                                }
                                );
                                function s(t, e) {
                                    var r = e.percents
                                      , n = e.lengths
                                      , i = r.length
                                      , a = bmFloor((i - 1) * t)
                                      , o = t * e.addedLength
                                      , s = 0;
                                    if (a === i - 1 || 0 === a || o === n[a])
                                        return r[a];
                                    for (var l = n[a] > o ? -1 : 1, c = !0; c; )
                                        if (n[a] <= o && n[a + 1] > o ? (s = (o - n[a]) / (n[a + 1] - n[a]),
                                        c = !1) : a += l,
                                        a < 0 || a >= i - 1) {
                                            if (a === i - 1)
                                                return r[a];
                                            c = !1
                                        }
                                    return r[a] + (r[a + 1] - r[a]) * s
                                }
                                var l = createTypedArray("float32", 8);
                                return {
                                    getSegmentsLength: function(t) {
                                        var e, n = segmentsLengthPool.newElement(), i = t.c, a = t.v, o = t.o, s = t.i, l = t._length, c = n.lengths, h = 0;
                                        for (e = 0; e < l - 1; e += 1)
                                            c[e] = r(a[e], a[e + 1], o[e], s[e + 1]),
                                            h += c[e].addedLength;
                                        return i && l && (c[e] = r(a[e], a[0], o[e], s[0]),
                                        h += c[e].addedLength),
                                        n.totalLength = h,
                                        n
                                    },
                                    getNewSegment: function(e, r, n, i, a, o, c) {
                                        a < 0 ? a = 0 : a > 1 && (a = 1);
                                        var h, u = s(a, c), p = s(o = o > 1 ? 1 : o, c), d = e.length, f = 1 - u, m = 1 - p, v = f * f * f, g = u * f * f * 3, y = u * u * f * 3, _ = u * u * u, x = f * f * m, b = u * f * m + f * u * m + f * f * p, w = u * u * m + f * u * p + u * f * p, S = u * u * p, T = f * m * m, M = u * m * m + f * p * m + f * m * p, E = u * p * m + f * p * p + u * m * p, A = u * p * p, P = m * m * m, C = p * m * m + m * p * m + m * m * p, L = p * p * m + m * p * p + p * m * p, D = p * p * p;
                                        for (h = 0; h < d; h += 1)
                                            l[4 * h] = t.round(1e3 * (v * e[h] + g * n[h] + y * i[h] + _ * r[h])) / 1e3,
                                            l[4 * h + 1] = t.round(1e3 * (x * e[h] + b * n[h] + w * i[h] + S * r[h])) / 1e3,
                                            l[4 * h + 2] = t.round(1e3 * (T * e[h] + M * n[h] + E * i[h] + A * r[h])) / 1e3,
                                            l[4 * h + 3] = t.round(1e3 * (P * e[h] + C * n[h] + L * i[h] + D * r[h])) / 1e3;
                                        return l
                                    },
                                    getPointInSegment: function(e, r, n, i, a, o) {
                                        var l = s(a, o)
                                          , c = 1 - l;
                                        return [t.round(1e3 * (c * c * c * e[0] + (l * c * c + c * l * c + c * c * l) * n[0] + (l * l * c + c * l * l + l * c * l) * i[0] + l * l * l * r[0])) / 1e3, t.round(1e3 * (c * c * c * e[1] + (l * c * c + c * l * c + c * c * l) * n[1] + (l * l * c + c * l * l + l * c * l) * i[1] + l * l * l * r[1])) / 1e3]
                                    },
                                    buildBezierData: o,
                                    pointOnLine2D: e,
                                    pointOnLine3D: function(r, n, i, a, o, s, l, c, h) {
                                        if (0 === i && 0 === s && 0 === h)
                                            return e(r, n, a, o, l, c);
                                        var u, p = t.sqrt(t.pow(a - r, 2) + t.pow(o - n, 2) + t.pow(s - i, 2)), d = t.sqrt(t.pow(l - r, 2) + t.pow(c - n, 2) + t.pow(h - i, 2)), f = t.sqrt(t.pow(l - a, 2) + t.pow(c - o, 2) + t.pow(h - s, 2));
                                        return (u = p > d ? p > f ? p - d - f : f - d - p : f > d ? f - d - p : d - p - f) > -1e-4 && u < 1e-4
                                    }
                                }
                            }
                            !function() {
                                for (var t = 0, e = ["ms", "moz", "webkit", "o"], r = 0; r < e.length && !window.requestAnimationFrame; ++r)
                                    window.requestAnimationFrame = window[e[r] + "RequestAnimationFrame"],
                                    window.cancelAnimationFrame = window[e[r] + "CancelAnimationFrame"] || window[e[r] + "CancelRequestAnimationFrame"];
                                window.requestAnimationFrame || (window.requestAnimationFrame = function(e) {
                                    var r = (new Date).getTime()
                                      , n = Math.max(0, 16 - (r - t))
                                      , i = setTimeout((function() {
                                        e(r + n)
                                    }
                                    ), n);
                                    return t = r + n,
                                    i
                                }
                                ),
                                window.cancelAnimationFrame || (window.cancelAnimationFrame = function(t) {
                                    clearTimeout(t)
                                }
                                )
                            }();
                            var bez = bezFunction()
                              , dataManager = function() {
                                var t, e, r = 1, n = [], i = {
                                    onmessage: function() {},
                                    postMessage: function(e) {
                                        t({
                                            data: e
                                        })
                                    }
                                }, a = {
                                    postMessage: function(t) {
                                        i.onmessage({
                                            data: t
                                        })
                                    }
                                };
                                function o() {
                                    e || (e = function(e) {
                                        if (window.Worker && window.Blob && _useWebWorker) {
                                            var r = new Blob(["var _workerSelf = self; self.onmessage = ", e.toString()],{
                                                type: "text/javascript"
                                            })
                                              , n = URL.createObjectURL(r);
                                            return new Worker(n)
                                        }
                                        return t = e,
                                        i
                                    }((function(t) {
                                        if (a.dataManager || (a.dataManager = function() {
                                            function t(i, a) {
                                                var o, s, l, c, h, p, d = i.length;
                                                for (s = 0; s < d; s += 1)
                                                    if ("ks"in (o = i[s]) && !o.completed) {
                                                        if (o.completed = !0,
                                                        o.tt && (i[s - 1].td = o.tt),
                                                        o.hasMask) {
                                                            var f = o.masksProperties;
                                                            for (c = f.length,
                                                            l = 0; l < c; l += 1)
                                                                if (f[l].pt.k.i)
                                                                    n(f[l].pt.k);
                                                                else
                                                                    for (p = f[l].pt.k.length,
                                                                    h = 0; h < p; h += 1)
                                                                        f[l].pt.k[h].s && n(f[l].pt.k[h].s[0]),
                                                                        f[l].pt.k[h].e && n(f[l].pt.k[h].e[0])
                                                        }
                                                        0 === o.ty ? (o.layers = e(o.refId, a),
                                                        t(o.layers, a)) : 4 === o.ty ? r(o.shapes) : 5 === o.ty && u(o)
                                                    }
                                            }
                                            function e(t, e) {
                                                for (var r = 0, n = e.length; r < n; ) {
                                                    if (e[r].id === t)
                                                        return e[r].layers.__used ? JSON.parse(JSON.stringify(e[r].layers)) : (e[r].layers.__used = !0,
                                                        e[r].layers);
                                                    r += 1
                                                }
                                                return null
                                            }
                                            function r(t) {
                                                var e, i, a;
                                                for (e = t.length - 1; e >= 0; e -= 1)
                                                    if ("sh" === t[e].ty)
                                                        if (t[e].ks.k.i)
                                                            n(t[e].ks.k);
                                                        else
                                                            for (a = t[e].ks.k.length,
                                                            i = 0; i < a; i += 1)
                                                                t[e].ks.k[i].s && n(t[e].ks.k[i].s[0]),
                                                                t[e].ks.k[i].e && n(t[e].ks.k[i].e[0]);
                                                    else
                                                        "gr" === t[e].ty && r(t[e].it)
                                            }
                                            function n(t) {
                                                var e, r = t.i.length;
                                                for (e = 0; e < r; e += 1)
                                                    t.i[e][0] += t.v[e][0],
                                                    t.i[e][1] += t.v[e][1],
                                                    t.o[e][0] += t.v[e][0],
                                                    t.o[e][1] += t.v[e][1]
                                            }
                                            function i(t, e) {
                                                var r = e ? e.split(".") : [100, 100, 100];
                                                return t[0] > r[0] || !(r[0] > t[0]) && (t[1] > r[1] || !(r[1] > t[1]) && (t[2] > r[2] || !(r[2] > t[2]) && null))
                                            }
                                            var a, o = function() {
                                                var t = [4, 4, 14];
                                                function e(t) {
                                                    var e, r, n, i = t.length;
                                                    for (e = 0; e < i; e += 1)
                                                        5 === t[e].ty && (n = (r = t[e]).t.d,
                                                        r.t.d = {
                                                            k: [{
                                                                s: n,
                                                                t: 0
                                                            }]
                                                        })
                                                }
                                                return function(r) {
                                                    if (i(t, r.v) && (e(r.layers),
                                                    r.assets)) {
                                                        var n, a = r.assets.length;
                                                        for (n = 0; n < a; n += 1)
                                                            r.assets[n].layers && e(r.assets[n].layers)
                                                    }
                                                }
                                            }(), s = (a = [4, 7, 99],
                                            function(t) {
                                                if (t.chars && !i(a, t.v)) {
                                                    var e, r, o, s, l, c = t.chars.length;
                                                    for (e = 0; e < c; e += 1)
                                                        if (t.chars[e].data && t.chars[e].data.shapes)
                                                            for (o = (l = t.chars[e].data.shapes[0].it).length,
                                                            r = 0; r < o; r += 1)
                                                                (s = l[r].ks.k).__converted || (n(l[r].ks.k),
                                                                s.__converted = !0)
                                                }
                                            }
                                            ), l = function() {
                                                var t = [5, 7, 15];
                                                function e(t) {
                                                    var e, r, n = t.length;
                                                    for (e = 0; e < n; e += 1)
                                                        5 === t[e].ty && (r = void 0,
                                                        "number" == typeof (r = t[e].t.p).a && (r.a = {
                                                            a: 0,
                                                            k: r.a
                                                        }),
                                                        "number" == typeof r.p && (r.p = {
                                                            a: 0,
                                                            k: r.p
                                                        }),
                                                        "number" == typeof r.r && (r.r = {
                                                            a: 0,
                                                            k: r.r
                                                        }))
                                                }
                                                return function(r) {
                                                    if (i(t, r.v) && (e(r.layers),
                                                    r.assets)) {
                                                        var n, a = r.assets.length;
                                                        for (n = 0; n < a; n += 1)
                                                            r.assets[n].layers && e(r.assets[n].layers)
                                                    }
                                                }
                                            }(), c = function() {
                                                var t = [4, 1, 9];
                                                function e(t) {
                                                    var r, n, i, a = t.length;
                                                    for (r = 0; r < a; r += 1)
                                                        if ("gr" === t[r].ty)
                                                            e(t[r].it);
                                                        else if ("fl" === t[r].ty || "st" === t[r].ty)
                                                            if (t[r].c.k && t[r].c.k[0].i)
                                                                for (i = t[r].c.k.length,
                                                                n = 0; n < i; n += 1)
                                                                    t[r].c.k[n].s && (t[r].c.k[n].s[0] /= 255,
                                                                    t[r].c.k[n].s[1] /= 255,
                                                                    t[r].c.k[n].s[2] /= 255,
                                                                    t[r].c.k[n].s[3] /= 255),
                                                                    t[r].c.k[n].e && (t[r].c.k[n].e[0] /= 255,
                                                                    t[r].c.k[n].e[1] /= 255,
                                                                    t[r].c.k[n].e[2] /= 255,
                                                                    t[r].c.k[n].e[3] /= 255);
                                                            else
                                                                t[r].c.k[0] /= 255,
                                                                t[r].c.k[1] /= 255,
                                                                t[r].c.k[2] /= 255,
                                                                t[r].c.k[3] /= 255
                                                }
                                                function r(t) {
                                                    var r, n = t.length;
                                                    for (r = 0; r < n; r += 1)
                                                        4 === t[r].ty && e(t[r].shapes)
                                                }
                                                return function(e) {
                                                    if (i(t, e.v) && (r(e.layers),
                                                    e.assets)) {
                                                        var n, a = e.assets.length;
                                                        for (n = 0; n < a; n += 1)
                                                            e.assets[n].layers && r(e.assets[n].layers)
                                                    }
                                                }
                                            }(), h = function() {
                                                var t = [4, 4, 18];
                                                function e(t) {
                                                    var r, n, i;
                                                    for (r = t.length - 1; r >= 0; r -= 1)
                                                        if ("sh" === t[r].ty)
                                                            if (t[r].ks.k.i)
                                                                t[r].ks.k.c = t[r].closed;
                                                            else
                                                                for (i = t[r].ks.k.length,
                                                                n = 0; n < i; n += 1)
                                                                    t[r].ks.k[n].s && (t[r].ks.k[n].s[0].c = t[r].closed),
                                                                    t[r].ks.k[n].e && (t[r].ks.k[n].e[0].c = t[r].closed);
                                                        else
                                                            "gr" === t[r].ty && e(t[r].it)
                                                }
                                                function r(t) {
                                                    var r, n, i, a, o, s, l = t.length;
                                                    for (n = 0; n < l; n += 1) {
                                                        if ((r = t[n]).hasMask) {
                                                            var c = r.masksProperties;
                                                            for (a = c.length,
                                                            i = 0; i < a; i += 1)
                                                                if (c[i].pt.k.i)
                                                                    c[i].pt.k.c = c[i].cl;
                                                                else
                                                                    for (s = c[i].pt.k.length,
                                                                    o = 0; o < s; o += 1)
                                                                        c[i].pt.k[o].s && (c[i].pt.k[o].s[0].c = c[i].cl),
                                                                        c[i].pt.k[o].e && (c[i].pt.k[o].e[0].c = c[i].cl)
                                                        }
                                                        4 === r.ty && e(r.shapes)
                                                    }
                                                }
                                                return function(e) {
                                                    if (i(t, e.v) && (r(e.layers),
                                                    e.assets)) {
                                                        var n, a = e.assets.length;
                                                        for (n = 0; n < a; n += 1)
                                                            e.assets[n].layers && r(e.assets[n].layers)
                                                    }
                                                }
                                            }();
                                            function u(t) {
                                                0 !== t.t.a.length || "m"in t.t.p || (t.singleShape = !0)
                                            }
                                            var p = {
                                                completeData: function(e) {
                                                    e.__complete || (c(e),
                                                    o(e),
                                                    s(e),
                                                    l(e),
                                                    h(e),
                                                    t(e.layers, e.assets),
                                                    e.__complete = !0)
                                                }
                                            };
                                            return p.checkColors = c,
                                            p.checkChars = s,
                                            p.checkPathProperties = l,
                                            p.checkShapes = h,
                                            p.completeLayers = t,
                                            p
                                        }()),
                                        a.assetLoader || (a.assetLoader = function() {
                                            function t(t) {
                                                var e = t.getResponseHeader("content-type");
                                                return e && "json" === t.responseType && -1 !== e.indexOf("json") || t.response && "object" == _typeof2(t.response) ? t.response : t.response && "string" == typeof t.response ? JSON.parse(t.response) : t.responseText ? JSON.parse(t.responseText) : null
                                            }
                                            return {
                                                load: function(e, r, n, i) {
                                                    var a, o = new XMLHttpRequest;
                                                    try {
                                                        o.responseType = "json"
                                                    } catch (t) {}
                                                    o.onreadystatechange = function() {
                                                        if (4 === o.readyState)
                                                            if (200 === o.status)
                                                                a = t(o),
                                                                n(a);
                                                            else
                                                                try {
                                                                    a = t(o),
                                                                    n(a)
                                                                } catch (t) {
                                                                    i && i(t)
                                                                }
                                                    }
                                                    ;
                                                    try {
                                                        o.open("GET", e, !0)
                                                    } catch (t) {
                                                        o.open("GET", r + "/" + e, !0)
                                                    }
                                                    o.send()
                                                }
                                            }
                                        }()),
                                        "loadAnimation" === t.data.type)
                                            a.assetLoader.load(t.data.path, t.data.fullPath, (function(e) {
                                                a.dataManager.completeData(e),
                                                a.postMessage({
                                                    id: t.data.id,
                                                    payload: e,
                                                    status: "success"
                                                })
                                            }
                                            ), (function() {
                                                a.postMessage({
                                                    id: t.data.id,
                                                    status: "error"
                                                })
                                            }
                                            ));
                                        else if ("complete" === t.data.type) {
                                            var e = t.data.animation;
                                            a.dataManager.completeData(e),
                                            a.postMessage({
                                                id: t.data.id,
                                                payload: e,
                                                status: "success"
                                            })
                                        } else
                                            "loadData" === t.data.type && a.assetLoader.load(t.data.path, t.data.fullPath, (function(e) {
                                                a.postMessage({
                                                    id: t.data.id,
                                                    payload: e,
                                                    status: "success"
                                                })
                                            }
                                            ), (function() {
                                                a.postMessage({
                                                    id: t.data.id,
                                                    status: "error"
                                                })
                                            }
                                            ))
                                    }
                                    )),
                                    e.onmessage = function(t) {
                                        var e = t.data
                                          , r = e.id
                                          , i = n[r];
                                        n[r] = null,
                                        "success" === e.status ? i.onComplete(e.payload) : i.onError && i.onError()
                                    }
                                    )
                                }
                                function s(t, e) {
                                    var i = "processId_" + (r += 1);
                                    return n[i] = {
                                        onComplete: t,
                                        onError: e
                                    },
                                    i
                                }
                                return {
                                    loadAnimation: function(t, r, n) {
                                        o();
                                        var i = s(r, n);
                                        e.postMessage({
                                            type: "loadAnimation",
                                            path: t,
                                            fullPath: window.location.origin + window.location.pathname,
                                            id: i
                                        })
                                    },
                                    loadData: function(t, r, n) {
                                        o();
                                        var i = s(r, n);
                                        e.postMessage({
                                            type: "loadData",
                                            path: t,
                                            fullPath: window.location.origin + window.location.pathname,
                                            id: i
                                        })
                                    },
                                    completeAnimation: function(t, r, n) {
                                        o();
                                        var i = s(r, n);
                                        e.postMessage({
                                            type: "complete",
                                            animation: t,
                                            id: i
                                        })
                                    }
                                }
                            }();
                            function getFontProperties(t) {
                                for (var e = t.fStyle ? t.fStyle.split(" ") : [], r = "normal", n = "normal", i = e.length, a = 0; a < i; a += 1)
                                    switch (e[a].toLowerCase()) {
                                    case "italic":
                                        n = "italic";
                                        break;
                                    case "bold":
                                        r = "700";
                                        break;
                                    case "black":
                                        r = "900";
                                        break;
                                    case "medium":
                                        r = "500";
                                        break;
                                    case "regular":
                                    case "normal":
                                        r = "400";
                                        break;
                                    case "light":
                                    case "thin":
                                        r = "200"
                                    }
                                return {
                                    style: n,
                                    weight: t.fWeight || r
                                }
                            }
                            var FontManager = function() {
                                var t = {
                                    w: 0,
                                    size: 0,
                                    shapes: []
                                }
                                  , e = [];
                                e = e.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);
                                var r = ["d83cdffb", "d83cdffc", "d83cdffd", "d83cdffe", "d83cdfff"]
                                  , n = [65039, 8205];
                                function i(t, e) {
                                    var r = createTag("span");
                                    r.setAttribute("aria-hidden", !0),
                                    r.style.fontFamily = e;
                                    var n = createTag("span");
                                    n.innerText = "giItT1WQy@!-/#",
                                    r.style.position = "absolute",
                                    r.style.left = "-10000px",
                                    r.style.top = "-10000px",
                                    r.style.fontSize = "300px",
                                    r.style.fontVariant = "normal",
                                    r.style.fontStyle = "normal",
                                    r.style.fontWeight = "normal",
                                    r.style.letterSpacing = "0",
                                    r.appendChild(n),
                                    document.body.appendChild(r);
                                    var i = n.offsetWidth;
                                    return n.style.fontFamily = function(t) {
                                        var e, r = t.split(","), n = r.length, i = [];
                                        for (e = 0; e < n; e += 1)
                                            "sans-serif" !== r[e] && "monospace" !== r[e] && i.push(r[e]);
                                        return i.join(",")
                                    }(t) + ", " + e,
                                    {
                                        node: n,
                                        w: i,
                                        parent: r
                                    }
                                }
                                function a(t, e) {
                                    var r = createNS("text");
                                    r.style.fontSize = "100px";
                                    var n = getFontProperties(e);
                                    return r.setAttribute("font-family", e.fFamily),
                                    r.setAttribute("font-style", n.style),
                                    r.setAttribute("font-weight", n.weight),
                                    r.textContent = "1",
                                    e.fClass ? (r.style.fontFamily = "inherit",
                                    r.setAttribute("class", e.fClass)) : r.style.fontFamily = e.fFamily,
                                    t.appendChild(r),
                                    createTag("canvas").getContext("2d").font = e.fWeight + " " + e.fStyle + " 100px " + e.fFamily,
                                    r
                                }
                                var o = function() {
                                    this.fonts = [],
                                    this.chars = null,
                                    this.typekitLoaded = 0,
                                    this.isLoaded = !1,
                                    this._warned = !1,
                                    this.initTime = Date.now(),
                                    this.setIsLoadedBinded = this.setIsLoaded.bind(this),
                                    this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this)
                                };
                                o.isModifier = function(t, e) {
                                    var n = t.toString(16) + e.toString(16);
                                    return -1 !== r.indexOf(n)
                                }
                                ,
                                o.isZeroWidthJoiner = function(t, e) {
                                    return e ? t === n[0] && e === n[1] : t === n[1]
                                }
                                ,
                                o.isCombinedCharacter = function(t) {
                                    return -1 !== e.indexOf(t)
                                }
                                ;
                                var s = {
                                    addChars: function(t) {
                                        if (t) {
                                            var e;
                                            this.chars || (this.chars = []);
                                            var r, n, i = t.length, a = this.chars.length;
                                            for (e = 0; e < i; e += 1) {
                                                for (r = 0,
                                                n = !1; r < a; )
                                                    this.chars[r].style === t[e].style && this.chars[r].fFamily === t[e].fFamily && this.chars[r].ch === t[e].ch && (n = !0),
                                                    r += 1;
                                                n || (this.chars.push(t[e]),
                                                a += 1)
                                            }
                                        }
                                    },
                                    addFonts: function(t, e) {
                                        if (t) {
                                            if (this.chars)
                                                return this.isLoaded = !0,
                                                void (this.fonts = t.list);
                                            var r, n = t.list, o = n.length, s = o;
                                            for (r = 0; r < o; r += 1) {
                                                var l, c, h = !0;
                                                if (n[r].loaded = !1,
                                                n[r].monoCase = i(n[r].fFamily, "monospace"),
                                                n[r].sansCase = i(n[r].fFamily, "sans-serif"),
                                                n[r].fPath) {
                                                    if ("p" === n[r].fOrigin || 3 === n[r].origin) {
                                                        if ((l = document.querySelectorAll('style[f-forigin="p"][f-family="' + n[r].fFamily + '"], style[f-origin="3"][f-family="' + n[r].fFamily + '"]')).length > 0 && (h = !1),
                                                        h) {
                                                            var u = createTag("style");
                                                            u.setAttribute("f-forigin", n[r].fOrigin),
                                                            u.setAttribute("f-origin", n[r].origin),
                                                            u.setAttribute("f-family", n[r].fFamily),
                                                            u.type = "text/css",
                                                            u.innerText = "@font-face {font-family: " + n[r].fFamily + "; font-style: normal; src: url('" + n[r].fPath + "');}",
                                                            e.appendChild(u)
                                                        }
                                                    } else if ("g" === n[r].fOrigin || 1 === n[r].origin) {
                                                        for (l = document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),
                                                        c = 0; c < l.length; c += 1)
                                                            -1 !== l[c].href.indexOf(n[r].fPath) && (h = !1);
                                                        if (h) {
                                                            var p = createTag("link");
                                                            p.setAttribute("f-forigin", n[r].fOrigin),
                                                            p.setAttribute("f-origin", n[r].origin),
                                                            p.type = "text/css",
                                                            p.rel = "stylesheet",
                                                            p.href = n[r].fPath,
                                                            document.body.appendChild(p)
                                                        }
                                                    } else if ("t" === n[r].fOrigin || 2 === n[r].origin) {
                                                        for (l = document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),
                                                        c = 0; c < l.length; c += 1)
                                                            n[r].fPath === l[c].src && (h = !1);
                                                        if (h) {
                                                            var d = createTag("link");
                                                            d.setAttribute("f-forigin", n[r].fOrigin),
                                                            d.setAttribute("f-origin", n[r].origin),
                                                            d.setAttribute("rel", "stylesheet"),
                                                            d.setAttribute("href", n[r].fPath),
                                                            e.appendChild(d)
                                                        }
                                                    }
                                                } else
                                                    n[r].loaded = !0,
                                                    s -= 1;
                                                n[r].helper = a(e, n[r]),
                                                n[r].cache = {},
                                                this.fonts.push(n[r])
                                            }
                                            0 === s ? this.isLoaded = !0 : setTimeout(this.checkLoadedFonts.bind(this), 100)
                                        } else
                                            this.isLoaded = !0
                                    },
                                    getCharData: function(e, r, n) {
                                        for (var i = 0, a = this.chars.length; i < a; ) {
                                            if (this.chars[i].ch === e && this.chars[i].style === r && this.chars[i].fFamily === n)
                                                return this.chars[i];
                                            i += 1
                                        }
                                        return ("string" == typeof e && 13 !== e.charCodeAt(0) || !e) && console && console.warn && !this._warned && (this._warned = !0,
                                        console.warn("Missing character from exported characters list: ", e, r, n)),
                                        t
                                    },
                                    getFontByName: function(t) {
                                        for (var e = 0, r = this.fonts.length; e < r; ) {
                                            if (this.fonts[e].fName === t)
                                                return this.fonts[e];
                                            e += 1
                                        }
                                        return this.fonts[0]
                                    },
                                    measureText: function(t, e, r) {
                                        var n = this.getFontByName(e)
                                          , i = t.charCodeAt(0);
                                        if (!n.cache[i + 1]) {
                                            var a = n.helper;
                                            if (" " === t) {
                                                a.textContent = "|" + t + "|";
                                                var o = a.getComputedTextLength();
                                                a.textContent = "||";
                                                var s = a.getComputedTextLength();
                                                n.cache[i + 1] = (o - s) / 100
                                            } else
                                                a.textContent = t,
                                                n.cache[i + 1] = a.getComputedTextLength() / 100
                                        }
                                        return n.cache[i + 1] * r
                                    },
                                    checkLoadedFonts: function() {
                                        var t, e, r, n = this.fonts.length, i = n;
                                        for (t = 0; t < n; t += 1)
                                            this.fonts[t].loaded ? i -= 1 : "n" === this.fonts[t].fOrigin || 0 === this.fonts[t].origin ? this.fonts[t].loaded = !0 : (e = this.fonts[t].monoCase.node,
                                            r = this.fonts[t].monoCase.w,
                                            e.offsetWidth !== r ? (i -= 1,
                                            this.fonts[t].loaded = !0) : (e = this.fonts[t].sansCase.node,
                                            r = this.fonts[t].sansCase.w,
                                            e.offsetWidth !== r && (i -= 1,
                                            this.fonts[t].loaded = !0)),
                                            this.fonts[t].loaded && (this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),
                                            this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));
                                        0 !== i && Date.now() - this.initTime < 5e3 ? setTimeout(this.checkLoadedFontsBinded, 20) : setTimeout(this.setIsLoadedBinded, 10)
                                    },
                                    setIsLoaded: function() {
                                        this.isLoaded = !0
                                    }
                                };
                                return o.prototype = s,
                                o
                            }()
                              , PropertyFactory = function() {
                                var t = initialDefaultFrame
                                  , e = Math.abs;
                                function r(t, e) {
                                    var r, i = this.offsetTime;
                                    "multidimensional" === this.propType && (r = createTypedArray("float32", this.pv.length));
                                    for (var a, o, s, l, c, h, u, p, d, f = e.lastIndex, m = f, v = this.keyframes.length - 1, g = !0; g; ) {
                                        if (a = this.keyframes[m],
                                        o = this.keyframes[m + 1],
                                        m === v - 1 && t >= o.t - i) {
                                            a.h && (a = o),
                                            f = 0;
                                            break
                                        }
                                        if (o.t - i > t) {
                                            f = m;
                                            break
                                        }
                                        m < v - 1 ? m += 1 : (f = 0,
                                        g = !1)
                                    }
                                    s = this.keyframesMetadata[m] || {};
                                    var y, _, x, b, w, S, T, M, E, A, P = o.t - i, C = a.t - i;
                                    if (a.to) {
                                        s.bezierData || (s.bezierData = bez.buildBezierData(a.s, o.s || a.e, a.to, a.ti));
                                        var L = s.bezierData;
                                        if (t >= P || t < C) {
                                            var D = t >= P ? L.points.length - 1 : 0;
                                            for (c = L.points[D].point.length,
                                            l = 0; l < c; l += 1)
                                                r[l] = L.points[D].point[l]
                                        } else {
                                            s.__fnct ? d = s.__fnct : (d = BezierFactory.getBezierEasing(a.o.x, a.o.y, a.i.x, a.i.y, a.n).get,
                                            s.__fnct = d),
                                            h = d((t - C) / (P - C));
                                            var R, I = L.segmentLength * h, k = e.lastFrame < t && e._lastKeyframeIndex === m ? e._lastAddedLength : 0;
                                            for (p = e.lastFrame < t && e._lastKeyframeIndex === m ? e._lastPoint : 0,
                                            g = !0,
                                            u = L.points.length; g; ) {
                                                if (k += L.points[p].partialLength,
                                                0 === I || 0 === h || p === L.points.length - 1) {
                                                    for (c = L.points[p].point.length,
                                                    l = 0; l < c; l += 1)
                                                        r[l] = L.points[p].point[l];
                                                    break
                                                }
                                                if (I >= k && I < k + L.points[p + 1].partialLength) {
                                                    for (R = (I - k) / L.points[p + 1].partialLength,
                                                    c = L.points[p].point.length,
                                                    l = 0; l < c; l += 1)
                                                        r[l] = L.points[p].point[l] + (L.points[p + 1].point[l] - L.points[p].point[l]) * R;
                                                    break
                                                }
                                                p < u - 1 ? p += 1 : g = !1
                                            }
                                            e._lastPoint = p,
                                            e._lastAddedLength = k - L.points[p].partialLength,
                                            e._lastKeyframeIndex = m
                                        }
                                    } else {
                                        var O, F, N, B, z;
                                        if (v = a.s.length,
                                        y = o.s || a.e,
                                        this.sh && 1 !== a.h)
                                            t >= P ? (r[0] = y[0],
                                            r[1] = y[1],
                                            r[2] = y[2]) : t <= C ? (r[0] = a.s[0],
                                            r[1] = a.s[1],
                                            r[2] = a.s[2]) : (_ = r,
                                            x = function(t, e, r) {
                                                var n, i, a, o, s, l = [], c = t[0], h = t[1], u = t[2], p = t[3], d = e[0], f = e[1], m = e[2], v = e[3];
                                                return (i = c * d + h * f + u * m + p * v) < 0 && (i = -i,
                                                d = -d,
                                                f = -f,
                                                m = -m,
                                                v = -v),
                                                1 - i > 1e-6 ? (n = Math.acos(i),
                                                a = Math.sin(n),
                                                o = Math.sin((1 - r) * n) / a,
                                                s = Math.sin(r * n) / a) : (o = 1 - r,
                                                s = r),
                                                l[0] = o * c + s * d,
                                                l[1] = o * h + s * f,
                                                l[2] = o * u + s * m,
                                                l[3] = o * p + s * v,
                                                l
                                            }(n(a.s), n(y), (t - C) / (P - C)),
                                            b = x[0],
                                            w = x[1],
                                            S = x[2],
                                            T = x[3],
                                            M = Math.atan2(2 * w * T - 2 * b * S, 1 - 2 * w * w - 2 * S * S),
                                            E = Math.asin(2 * b * w + 2 * S * T),
                                            A = Math.atan2(2 * b * T - 2 * w * S, 1 - 2 * b * b - 2 * S * S),
                                            _[0] = M / degToRads,
                                            _[1] = E / degToRads,
                                            _[2] = A / degToRads);
                                        else
                                            for (m = 0; m < v; m += 1)
                                                1 !== a.h && (t >= P ? h = 1 : t < C ? h = 0 : (a.o.x.constructor === Array ? (s.__fnct || (s.__fnct = []),
                                                s.__fnct[m] ? d = s.__fnct[m] : (O = void 0 === a.o.x[m] ? a.o.x[0] : a.o.x[m],
                                                F = void 0 === a.o.y[m] ? a.o.y[0] : a.o.y[m],
                                                N = void 0 === a.i.x[m] ? a.i.x[0] : a.i.x[m],
                                                B = void 0 === a.i.y[m] ? a.i.y[0] : a.i.y[m],
                                                d = BezierFactory.getBezierEasing(O, F, N, B).get,
                                                s.__fnct[m] = d)) : s.__fnct ? d = s.__fnct : (O = a.o.x,
                                                F = a.o.y,
                                                N = a.i.x,
                                                B = a.i.y,
                                                d = BezierFactory.getBezierEasing(O, F, N, B).get,
                                                a.keyframeMetadata = d),
                                                h = d((t - C) / (P - C)))),
                                                y = o.s || a.e,
                                                z = 1 === a.h ? a.s[m] : a.s[m] + (y[m] - a.s[m]) * h,
                                                "multidimensional" === this.propType ? r[m] = z : r = z
                                    }
                                    return e.lastIndex = f,
                                    r
                                }
                                function n(t) {
                                    var e = t[0] * degToRads
                                      , r = t[1] * degToRads
                                      , n = t[2] * degToRads
                                      , i = Math.cos(e / 2)
                                      , a = Math.cos(r / 2)
                                      , o = Math.cos(n / 2)
                                      , s = Math.sin(e / 2)
                                      , l = Math.sin(r / 2)
                                      , c = Math.sin(n / 2);
                                    return [s * l * o + i * a * c, s * a * o + i * l * c, i * l * o - s * a * c, i * a * o - s * l * c]
                                }
                                function i() {
                                    var e = this.comp.renderedFrame - this.offsetTime
                                      , r = this.keyframes[0].t - this.offsetTime
                                      , n = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;
                                    if (!(e === this._caching.lastFrame || this._caching.lastFrame !== t && (this._caching.lastFrame >= n && e >= n || this._caching.lastFrame < r && e < r))) {
                                        this._caching.lastFrame >= e && (this._caching._lastKeyframeIndex = -1,
                                        this._caching.lastIndex = 0);
                                        var i = this.interpolateValue(e, this._caching);
                                        this.pv = i
                                    }
                                    return this._caching.lastFrame = e,
                                    this.pv
                                }
                                function a(t) {
                                    var r;
                                    if ("unidimensional" === this.propType)
                                        r = t * this.mult,
                                        e(this.v - r) > 1e-5 && (this.v = r,
                                        this._mdf = !0);
                                    else
                                        for (var n = 0, i = this.v.length; n < i; )
                                            r = t[n] * this.mult,
                                            e(this.v[n] - r) > 1e-5 && (this.v[n] = r,
                                            this._mdf = !0),
                                            n += 1
                                }
                                function o() {
                                    if (this.elem.globalData.frameId !== this.frameId && this.effectsSequence.length)
                                        if (this.lock)
                                            this.setVValue(this.pv);
                                        else {
                                            var t;
                                            this.lock = !0,
                                            this._mdf = this._isFirstFrame;
                                            var e = this.effectsSequence.length
                                              , r = this.kf ? this.pv : this.data.k;
                                            for (t = 0; t < e; t += 1)
                                                r = this.effectsSequence[t](r);
                                            this.setVValue(r),
                                            this._isFirstFrame = !1,
                                            this.lock = !1,
                                            this.frameId = this.elem.globalData.frameId
                                        }
                                }
                                function s(t) {
                                    this.effectsSequence.push(t),
                                    this.container.addDynamicProperty(this)
                                }
                                function l(t, e, r, n) {
                                    this.propType = "unidimensional",
                                    this.mult = r || 1,
                                    this.data = e,
                                    this.v = r ? e.k * r : e.k,
                                    this.pv = e.k,
                                    this._mdf = !1,
                                    this.elem = t,
                                    this.container = n,
                                    this.comp = t.comp,
                                    this.k = !1,
                                    this.kf = !1,
                                    this.vel = 0,
                                    this.effectsSequence = [],
                                    this._isFirstFrame = !0,
                                    this.getValue = o,
                                    this.setVValue = a,
                                    this.addEffect = s
                                }
                                function c(t, e, r, n) {
                                    var i;
                                    this.propType = "multidimensional",
                                    this.mult = r || 1,
                                    this.data = e,
                                    this._mdf = !1,
                                    this.elem = t,
                                    this.container = n,
                                    this.comp = t.comp,
                                    this.k = !1,
                                    this.kf = !1,
                                    this.frameId = -1;
                                    var l = e.k.length;
                                    for (this.v = createTypedArray("float32", l),
                                    this.pv = createTypedArray("float32", l),
                                    this.vel = createTypedArray("float32", l),
                                    i = 0; i < l; i += 1)
                                        this.v[i] = e.k[i] * this.mult,
                                        this.pv[i] = e.k[i];
                                    this._isFirstFrame = !0,
                                    this.effectsSequence = [],
                                    this.getValue = o,
                                    this.setVValue = a,
                                    this.addEffect = s
                                }
                                function h(e, n, l, c) {
                                    this.propType = "unidimensional",
                                    this.keyframes = n.k,
                                    this.keyframesMetadata = [],
                                    this.offsetTime = e.data.st,
                                    this.frameId = -1,
                                    this._caching = {
                                        lastFrame: t,
                                        lastIndex: 0,
                                        value: 0,
                                        _lastKeyframeIndex: -1
                                    },
                                    this.k = !0,
                                    this.kf = !0,
                                    this.data = n,
                                    this.mult = l || 1,
                                    this.elem = e,
                                    this.container = c,
                                    this.comp = e.comp,
                                    this.v = t,
                                    this.pv = t,
                                    this._isFirstFrame = !0,
                                    this.getValue = o,
                                    this.setVValue = a,
                                    this.interpolateValue = r,
                                    this.effectsSequence = [i.bind(this)],
                                    this.addEffect = s
                                }
                                function u(e, n, l, c) {
                                    var h;
                                    this.propType = "multidimensional";
                                    var u, p, d, f, m = n.k.length;
                                    for (h = 0; h < m - 1; h += 1)
                                        n.k[h].to && n.k[h].s && n.k[h + 1] && n.k[h + 1].s && (u = n.k[h].s,
                                        p = n.k[h + 1].s,
                                        d = n.k[h].to,
                                        f = n.k[h].ti,
                                        (2 === u.length && (u[0] !== p[0] || u[1] !== p[1]) && bez.pointOnLine2D(u[0], u[1], p[0], p[1], u[0] + d[0], u[1] + d[1]) && bez.pointOnLine2D(u[0], u[1], p[0], p[1], p[0] + f[0], p[1] + f[1]) || 3 === u.length && (u[0] !== p[0] || u[1] !== p[1] || u[2] !== p[2]) && bez.pointOnLine3D(u[0], u[1], u[2], p[0], p[1], p[2], u[0] + d[0], u[1] + d[1], u[2] + d[2]) && bez.pointOnLine3D(u[0], u[1], u[2], p[0], p[1], p[2], p[0] + f[0], p[1] + f[1], p[2] + f[2])) && (n.k[h].to = null,
                                        n.k[h].ti = null),
                                        u[0] === p[0] && u[1] === p[1] && 0 === d[0] && 0 === d[1] && 0 === f[0] && 0 === f[1] && (2 === u.length || u[2] === p[2] && 0 === d[2] && 0 === f[2]) && (n.k[h].to = null,
                                        n.k[h].ti = null));
                                    this.effectsSequence = [i.bind(this)],
                                    this.data = n,
                                    this.keyframes = n.k,
                                    this.keyframesMetadata = [],
                                    this.offsetTime = e.data.st,
                                    this.k = !0,
                                    this.kf = !0,
                                    this._isFirstFrame = !0,
                                    this.mult = l || 1,
                                    this.elem = e,
                                    this.container = c,
                                    this.comp = e.comp,
                                    this.getValue = o,
                                    this.setVValue = a,
                                    this.interpolateValue = r,
                                    this.frameId = -1;
                                    var v = n.k[0].s.length;
                                    for (this.v = createTypedArray("float32", v),
                                    this.pv = createTypedArray("float32", v),
                                    h = 0; h < v; h += 1)
                                        this.v[h] = t,
                                        this.pv[h] = t;
                                    this._caching = {
                                        lastFrame: t,
                                        lastIndex: 0,
                                        value: createTypedArray("float32", v)
                                    },
                                    this.addEffect = s
                                }
                                var p = {
                                    getProp: function(t, e, r, n, i) {
                                        var a;
                                        if (e.k.length)
                                            if ("number" == typeof e.k[0])
                                                a = new c(t,e,n,i);
                                            else
                                                switch (r) {
                                                case 0:
                                                    a = new h(t,e,n,i);
                                                    break;
                                                case 1:
                                                    a = new u(t,e,n,i)
                                                }
                                        else
                                            a = new l(t,e,n,i);
                                        return a.effectsSequence.length && i.addDynamicProperty(a),
                                        a
                                    }
                                };
                                return p
                            }()
                              , TransformPropertyFactory = function() {
                                var t = [0, 0];
                                function e(t, e, r) {
                                    if (this.elem = t,
                                    this.frameId = -1,
                                    this.propType = "transform",
                                    this.data = e,
                                    this.v = new Matrix,
                                    this.pre = new Matrix,
                                    this.appliedTransformations = 0,
                                    this.initDynamicPropertyContainer(r || t),
                                    e.p && e.p.s ? (this.px = PropertyFactory.getProp(t, e.p.x, 0, 0, this),
                                    this.py = PropertyFactory.getProp(t, e.p.y, 0, 0, this),
                                    e.p.z && (this.pz = PropertyFactory.getProp(t, e.p.z, 0, 0, this))) : this.p = PropertyFactory.getProp(t, e.p || {
                                        k: [0, 0, 0]
                                    }, 1, 0, this),
                                    e.rx) {
                                        if (this.rx = PropertyFactory.getProp(t, e.rx, 0, degToRads, this),
                                        this.ry = PropertyFactory.getProp(t, e.ry, 0, degToRads, this),
                                        this.rz = PropertyFactory.getProp(t, e.rz, 0, degToRads, this),
                                        e.or.k[0].ti) {
                                            var n, i = e.or.k.length;
                                            for (n = 0; n < i; n += 1)
                                                e.or.k[n].to = null,
                                                e.or.k[n].ti = null
                                        }
                                        this.or = PropertyFactory.getProp(t, e.or, 1, degToRads, this),
                                        this.or.sh = !0
                                    } else
                                        this.r = PropertyFactory.getProp(t, e.r || {
                                            k: 0
                                        }, 0, degToRads, this);
                                    e.sk && (this.sk = PropertyFactory.getProp(t, e.sk, 0, degToRads, this),
                                    this.sa = PropertyFactory.getProp(t, e.sa, 0, degToRads, this)),
                                    this.a = PropertyFactory.getProp(t, e.a || {
                                        k: [0, 0, 0]
                                    }, 1, 0, this),
                                    this.s = PropertyFactory.getProp(t, e.s || {
                                        k: [100, 100, 100]
                                    }, 1, .01, this),
                                    e.o ? this.o = PropertyFactory.getProp(t, e.o, 0, .01, t) : this.o = {
                                        _mdf: !1,
                                        v: 1
                                    },
                                    this._isDirty = !0,
                                    this.dynamicProperties.length || this.getValue(!0)
                                }
                                return e.prototype = {
                                    applyToMatrix: function(t) {
                                        var e = this._mdf;
                                        this.iterateDynamicProperties(),
                                        this._mdf = this._mdf || e,
                                        this.a && t.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]),
                                        this.s && t.scale(this.s.v[0], this.s.v[1], this.s.v[2]),
                                        this.sk && t.skewFromAxis(-this.sk.v, this.sa.v),
                                        this.r ? t.rotate(-this.r.v) : t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),
                                        this.data.p.s ? this.data.p.z ? t.translate(this.px.v, this.py.v, -this.pz.v) : t.translate(this.px.v, this.py.v, 0) : t.translate(this.p.v[0], this.p.v[1], -this.p.v[2])
                                    },
                                    getValue: function(e) {
                                        if (this.elem.globalData.frameId !== this.frameId) {
                                            if (this._isDirty && (this.precalculateMatrix(),
                                            this._isDirty = !1),
                                            this.iterateDynamicProperties(),
                                            this._mdf || e) {
                                                var r;
                                                if (this.v.cloneFromProps(this.pre.props),
                                                this.appliedTransformations < 1 && this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]),
                                                this.appliedTransformations < 2 && this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]),
                                                this.sk && this.appliedTransformations < 3 && this.v.skewFromAxis(-this.sk.v, this.sa.v),
                                                this.r && this.appliedTransformations < 4 ? this.v.rotate(-this.r.v) : !this.r && this.appliedTransformations < 4 && this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),
                                                this.autoOriented) {
                                                    var n, i;
                                                    if (r = this.elem.globalData.frameRate,
                                                    this.p && this.p.keyframes && this.p.getValueAtTime)
                                                        this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t ? (n = this.p.getValueAtTime((this.p.keyframes[0].t + .01) / r, 0),
                                                        i = this.p.getValueAtTime(this.p.keyframes[0].t / r, 0)) : this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t ? (n = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / r, 0),
                                                        i = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - .05) / r, 0)) : (n = this.p.pv,
                                                        i = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - .01) / r, this.p.offsetTime));
                                                    else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {
                                                        n = [],
                                                        i = [];
                                                        var a = this.px
                                                          , o = this.py;
                                                        a._caching.lastFrame + a.offsetTime <= a.keyframes[0].t ? (n[0] = a.getValueAtTime((a.keyframes[0].t + .01) / r, 0),
                                                        n[1] = o.getValueAtTime((o.keyframes[0].t + .01) / r, 0),
                                                        i[0] = a.getValueAtTime(a.keyframes[0].t / r, 0),
                                                        i[1] = o.getValueAtTime(o.keyframes[0].t / r, 0)) : a._caching.lastFrame + a.offsetTime >= a.keyframes[a.keyframes.length - 1].t ? (n[0] = a.getValueAtTime(a.keyframes[a.keyframes.length - 1].t / r, 0),
                                                        n[1] = o.getValueAtTime(o.keyframes[o.keyframes.length - 1].t / r, 0),
                                                        i[0] = a.getValueAtTime((a.keyframes[a.keyframes.length - 1].t - .01) / r, 0),
                                                        i[1] = o.getValueAtTime((o.keyframes[o.keyframes.length - 1].t - .01) / r, 0)) : (n = [a.pv, o.pv],
                                                        i[0] = a.getValueAtTime((a._caching.lastFrame + a.offsetTime - .01) / r, a.offsetTime),
                                                        i[1] = o.getValueAtTime((o._caching.lastFrame + o.offsetTime - .01) / r, o.offsetTime))
                                                    } else
                                                        n = i = t;
                                                    this.v.rotate(-Math.atan2(n[1] - i[1], n[0] - i[0]))
                                                }
                                                this.data.p && this.data.p.s ? this.data.p.z ? this.v.translate(this.px.v, this.py.v, -this.pz.v) : this.v.translate(this.px.v, this.py.v, 0) : this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2])
                                            }
                                            this.frameId = this.elem.globalData.frameId
                                        }
                                    },
                                    precalculateMatrix: function() {
                                        if (!this.a.k && (this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]),
                                        this.appliedTransformations = 1,
                                        !this.s.effectsSequence.length)) {
                                            if (this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]),
                                            this.appliedTransformations = 2,
                                            this.sk) {
                                                if (this.sk.effectsSequence.length || this.sa.effectsSequence.length)
                                                    return;
                                                this.pre.skewFromAxis(-this.sk.v, this.sa.v),
                                                this.appliedTransformations = 3
                                            }
                                            this.r ? this.r.effectsSequence.length || (this.pre.rotate(-this.r.v),
                                            this.appliedTransformations = 4) : this.rz.effectsSequence.length || this.ry.effectsSequence.length || this.rx.effectsSequence.length || this.or.effectsSequence.length || (this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),
                                            this.appliedTransformations = 4)
                                        }
                                    },
                                    autoOrient: function() {}
                                },
                                extendPrototype([DynamicPropertyContainer], e),
                                e.prototype.addDynamicProperty = function(t) {
                                    this._addDynamicProperty(t),
                                    this.elem.addDynamicProperty(t),
                                    this._isDirty = !0
                                }
                                ,
                                e.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty,
                                {
                                    getTransformProperty: function(t, r, n) {
                                        return new e(t,r,n)
                                    }
                                }
                            }();
                            function ShapePath() {
                                this.c = !1,
                                this._length = 0,
                                this._maxLength = 8,
                                this.v = createSizedArray(this._maxLength),
                                this.o = createSizedArray(this._maxLength),
                                this.i = createSizedArray(this._maxLength)
                            }
                            ShapePath.prototype.setPathData = function(t, e) {
                                this.c = t,
                                this.setLength(e);
                                for (var r = 0; r < e; )
                                    this.v[r] = pointPool.newElement(),
                                    this.o[r] = pointPool.newElement(),
                                    this.i[r] = pointPool.newElement(),
                                    r += 1
                            }
                            ,
                            ShapePath.prototype.setLength = function(t) {
                                for (; this._maxLength < t; )
                                    this.doubleArrayLength();
                                this._length = t
                            }
                            ,
                            ShapePath.prototype.doubleArrayLength = function() {
                                this.v = this.v.concat(createSizedArray(this._maxLength)),
                                this.i = this.i.concat(createSizedArray(this._maxLength)),
                                this.o = this.o.concat(createSizedArray(this._maxLength)),
                                this._maxLength *= 2
                            }
                            ,
                            ShapePath.prototype.setXYAt = function(t, e, r, n, i) {
                                var a;
                                switch (this._length = Math.max(this._length, n + 1),
                                this._length >= this._maxLength && this.doubleArrayLength(),
                                r) {
                                case "v":
                                    a = this.v;
                                    break;
                                case "i":
                                    a = this.i;
                                    break;
                                case "o":
                                    a = this.o;
                                    break;
                                default:
                                    a = []
                                }
                                (!a[n] || a[n] && !i) && (a[n] = pointPool.newElement()),
                                a[n][0] = t,
                                a[n][1] = e
                            }
                            ,
                            ShapePath.prototype.setTripleAt = function(t, e, r, n, i, a, o, s) {
                                this.setXYAt(t, e, "v", o, s),
                                this.setXYAt(r, n, "o", o, s),
                                this.setXYAt(i, a, "i", o, s)
                            }
                            ,
                            ShapePath.prototype.reverse = function() {
                                var t = new ShapePath;
                                t.setPathData(this.c, this._length);
                                var e = this.v
                                  , r = this.o
                                  , n = this.i
                                  , i = 0;
                                this.c && (t.setTripleAt(e[0][0], e[0][1], n[0][0], n[0][1], r[0][0], r[0][1], 0, !1),
                                i = 1);
                                var a, o = this._length - 1, s = this._length;
                                for (a = i; a < s; a += 1)
                                    t.setTripleAt(e[o][0], e[o][1], n[o][0], n[o][1], r[o][0], r[o][1], a, !1),
                                    o -= 1;
                                return t
                            }
                            ;
                            var ShapePropertyFactory = function() {
                                var t = -999999;
                                function e(t, e, r) {
                                    var n, i, a, o, s, l, c, h, u, p = r.lastIndex, d = this.keyframes;
                                    if (t < d[0].t - this.offsetTime)
                                        n = d[0].s[0],
                                        a = !0,
                                        p = 0;
                                    else if (t >= d[d.length - 1].t - this.offsetTime)
                                        n = d[d.length - 1].s ? d[d.length - 1].s[0] : d[d.length - 2].e[0],
                                        a = !0;
                                    else {
                                        for (var f, m, v, g = p, y = d.length - 1, _ = !0; _ && (f = d[g],
                                        !((m = d[g + 1]).t - this.offsetTime > t)); )
                                            g < y - 1 ? g += 1 : _ = !1;
                                        if (v = this.keyframesMetadata[g] || {},
                                        p = g,
                                        !(a = 1 === f.h)) {
                                            if (t >= m.t - this.offsetTime)
                                                h = 1;
                                            else if (t < f.t - this.offsetTime)
                                                h = 0;
                                            else {
                                                var x;
                                                v.__fnct ? x = v.__fnct : (x = BezierFactory.getBezierEasing(f.o.x, f.o.y, f.i.x, f.i.y).get,
                                                v.__fnct = x),
                                                h = x((t - (f.t - this.offsetTime)) / (m.t - this.offsetTime - (f.t - this.offsetTime)))
                                            }
                                            i = m.s ? m.s[0] : f.e[0]
                                        }
                                        n = f.s[0]
                                    }
                                    for (l = e._length,
                                    c = n.i[0].length,
                                    r.lastIndex = p,
                                    o = 0; o < l; o += 1)
                                        for (s = 0; s < c; s += 1)
                                            u = a ? n.i[o][s] : n.i[o][s] + (i.i[o][s] - n.i[o][s]) * h,
                                            e.i[o][s] = u,
                                            u = a ? n.o[o][s] : n.o[o][s] + (i.o[o][s] - n.o[o][s]) * h,
                                            e.o[o][s] = u,
                                            u = a ? n.v[o][s] : n.v[o][s] + (i.v[o][s] - n.v[o][s]) * h,
                                            e.v[o][s] = u
                                }
                                function r() {
                                    var e = this.comp.renderedFrame - this.offsetTime
                                      , r = this.keyframes[0].t - this.offsetTime
                                      , n = this.keyframes[this.keyframes.length - 1].t - this.offsetTime
                                      , i = this._caching.lastFrame;
                                    return i !== t && (i < r && e < r || i > n && e > n) || (this._caching.lastIndex = i < e ? this._caching.lastIndex : 0,
                                    this.interpolateShape(e, this.pv, this._caching)),
                                    this._caching.lastFrame = e,
                                    this.pv
                                }
                                function n() {
                                    this.paths = this.localShapeCollection
                                }
                                function i(t) {
                                    (function(t, e) {
                                        if (t._length !== e._length || t.c !== e.c)
                                            return !1;
                                        var r, n = t._length;
                                        for (r = 0; r < n; r += 1)
                                            if (t.v[r][0] !== e.v[r][0] || t.v[r][1] !== e.v[r][1] || t.o[r][0] !== e.o[r][0] || t.o[r][1] !== e.o[r][1] || t.i[r][0] !== e.i[r][0] || t.i[r][1] !== e.i[r][1])
                                                return !1;
                                        return !0
                                    }
                                    )(this.v, t) || (this.v = shapePool.clone(t),
                                    this.localShapeCollection.releaseShapes(),
                                    this.localShapeCollection.addShape(this.v),
                                    this._mdf = !0,
                                    this.paths = this.localShapeCollection)
                                }
                                function a() {
                                    if (this.elem.globalData.frameId !== this.frameId)
                                        if (this.effectsSequence.length)
                                            if (this.lock)
                                                this.setVValue(this.pv);
                                            else {
                                                var t, e;
                                                this.lock = !0,
                                                this._mdf = !1,
                                                t = this.kf ? this.pv : this.data.ks ? this.data.ks.k : this.data.pt.k;
                                                var r = this.effectsSequence.length;
                                                for (e = 0; e < r; e += 1)
                                                    t = this.effectsSequence[e](t);
                                                this.setVValue(t),
                                                this.lock = !1,
                                                this.frameId = this.elem.globalData.frameId
                                            }
                                        else
                                            this._mdf = !1
                                }
                                function o(t, e, r) {
                                    this.propType = "shape",
                                    this.comp = t.comp,
                                    this.container = t,
                                    this.elem = t,
                                    this.data = e,
                                    this.k = !1,
                                    this.kf = !1,
                                    this._mdf = !1;
                                    var i = 3 === r ? e.pt.k : e.ks.k;
                                    this.v = shapePool.clone(i),
                                    this.pv = shapePool.clone(this.v),
                                    this.localShapeCollection = shapeCollectionPool.newShapeCollection(),
                                    this.paths = this.localShapeCollection,
                                    this.paths.addShape(this.v),
                                    this.reset = n,
                                    this.effectsSequence = []
                                }
                                function s(t) {
                                    this.effectsSequence.push(t),
                                    this.container.addDynamicProperty(this)
                                }
                                function l(e, i, a) {
                                    this.propType = "shape",
                                    this.comp = e.comp,
                                    this.elem = e,
                                    this.container = e,
                                    this.offsetTime = e.data.st,
                                    this.keyframes = 3 === a ? i.pt.k : i.ks.k,
                                    this.keyframesMetadata = [],
                                    this.k = !0,
                                    this.kf = !0;
                                    var o = this.keyframes[0].s[0].i.length;
                                    this.v = shapePool.newElement(),
                                    this.v.setPathData(this.keyframes[0].s[0].c, o),
                                    this.pv = shapePool.clone(this.v),
                                    this.localShapeCollection = shapeCollectionPool.newShapeCollection(),
                                    this.paths = this.localShapeCollection,
                                    this.paths.addShape(this.v),
                                    this.lastFrame = t,
                                    this.reset = n,
                                    this._caching = {
                                        lastFrame: t,
                                        lastIndex: 0
                                    },
                                    this.effectsSequence = [r.bind(this)]
                                }
                                o.prototype.interpolateShape = e,
                                o.prototype.getValue = a,
                                o.prototype.setVValue = i,
                                o.prototype.addEffect = s,
                                l.prototype.getValue = a,
                                l.prototype.interpolateShape = e,
                                l.prototype.setVValue = i,
                                l.prototype.addEffect = s;
                                var c = function() {
                                    var t = roundCorner;
                                    function e(t, e) {
                                        this.v = shapePool.newElement(),
                                        this.v.setPathData(!0, 4),
                                        this.localShapeCollection = shapeCollectionPool.newShapeCollection(),
                                        this.paths = this.localShapeCollection,
                                        this.localShapeCollection.addShape(this.v),
                                        this.d = e.d,
                                        this.elem = t,
                                        this.comp = t.comp,
                                        this.frameId = -1,
                                        this.initDynamicPropertyContainer(t),
                                        this.p = PropertyFactory.getProp(t, e.p, 1, 0, this),
                                        this.s = PropertyFactory.getProp(t, e.s, 1, 0, this),
                                        this.dynamicProperties.length ? this.k = !0 : (this.k = !1,
                                        this.convertEllToPath())
                                    }
                                    return e.prototype = {
                                        reset: n,
                                        getValue: function() {
                                            this.elem.globalData.frameId !== this.frameId && (this.frameId = this.elem.globalData.frameId,
                                            this.iterateDynamicProperties(),
                                            this._mdf && this.convertEllToPath())
                                        },
                                        convertEllToPath: function() {
                                            var e = this.p.v[0]
                                              , r = this.p.v[1]
                                              , n = this.s.v[0] / 2
                                              , i = this.s.v[1] / 2
                                              , a = 3 !== this.d
                                              , o = this.v;
                                            o.v[0][0] = e,
                                            o.v[0][1] = r - i,
                                            o.v[1][0] = a ? e + n : e - n,
                                            o.v[1][1] = r,
                                            o.v[2][0] = e,
                                            o.v[2][1] = r + i,
                                            o.v[3][0] = a ? e - n : e + n,
                                            o.v[3][1] = r,
                                            o.i[0][0] = a ? e - n * t : e + n * t,
                                            o.i[0][1] = r - i,
                                            o.i[1][0] = a ? e + n : e - n,
                                            o.i[1][1] = r - i * t,
                                            o.i[2][0] = a ? e + n * t : e - n * t,
                                            o.i[2][1] = r + i,
                                            o.i[3][0] = a ? e - n : e + n,
                                            o.i[3][1] = r + i * t,
                                            o.o[0][0] = a ? e + n * t : e - n * t,
                                            o.o[0][1] = r - i,
                                            o.o[1][0] = a ? e + n : e - n,
                                            o.o[1][1] = r + i * t,
                                            o.o[2][0] = a ? e - n * t : e + n * t,
                                            o.o[2][1] = r + i,
                                            o.o[3][0] = a ? e - n : e + n,
                                            o.o[3][1] = r - i * t
                                        }
                                    },
                                    extendPrototype([DynamicPropertyContainer], e),
                                    e
                                }()
                                  , h = function() {
                                    function t(t, e) {
                                        this.v = shapePool.newElement(),
                                        this.v.setPathData(!0, 0),
                                        this.elem = t,
                                        this.comp = t.comp,
                                        this.data = e,
                                        this.frameId = -1,
                                        this.d = e.d,
                                        this.initDynamicPropertyContainer(t),
                                        1 === e.sy ? (this.ir = PropertyFactory.getProp(t, e.ir, 0, 0, this),
                                        this.is = PropertyFactory.getProp(t, e.is, 0, .01, this),
                                        this.convertToPath = this.convertStarToPath) : this.convertToPath = this.convertPolygonToPath,
                                        this.pt = PropertyFactory.getProp(t, e.pt, 0, 0, this),
                                        this.p = PropertyFactory.getProp(t, e.p, 1, 0, this),
                                        this.r = PropertyFactory.getProp(t, e.r, 0, degToRads, this),
                                        this.or = PropertyFactory.getProp(t, e.or, 0, 0, this),
                                        this.os = PropertyFactory.getProp(t, e.os, 0, .01, this),
                                        this.localShapeCollection = shapeCollectionPool.newShapeCollection(),
                                        this.localShapeCollection.addShape(this.v),
                                        this.paths = this.localShapeCollection,
                                        this.dynamicProperties.length ? this.k = !0 : (this.k = !1,
                                        this.convertToPath())
                                    }
                                    return t.prototype = {
                                        reset: n,
                                        getValue: function() {
                                            this.elem.globalData.frameId !== this.frameId && (this.frameId = this.elem.globalData.frameId,
                                            this.iterateDynamicProperties(),
                                            this._mdf && this.convertToPath())
                                        },
                                        convertStarToPath: function() {
                                            var t, e, r, n, i = 2 * Math.floor(this.pt.v), a = 2 * Math.PI / i, o = !0, s = this.or.v, l = this.ir.v, c = this.os.v, h = this.is.v, u = 2 * Math.PI * s / (2 * i), p = 2 * Math.PI * l / (2 * i), d = -Math.PI / 2;
                                            d += this.r.v;
                                            var f = 3 === this.data.d ? -1 : 1;
                                            for (this.v._length = 0,
                                            t = 0; t < i; t += 1) {
                                                r = o ? c : h,
                                                n = o ? u : p;
                                                var m = (e = o ? s : l) * Math.cos(d)
                                                  , v = e * Math.sin(d)
                                                  , g = 0 === m && 0 === v ? 0 : v / Math.sqrt(m * m + v * v)
                                                  , y = 0 === m && 0 === v ? 0 : -m / Math.sqrt(m * m + v * v);
                                                m += +this.p.v[0],
                                                v += +this.p.v[1],
                                                this.v.setTripleAt(m, v, m - g * n * r * f, v - y * n * r * f, m + g * n * r * f, v + y * n * r * f, t, !0),
                                                o = !o,
                                                d += a * f
                                            }
                                        },
                                        convertPolygonToPath: function() {
                                            var t, e = Math.floor(this.pt.v), r = 2 * Math.PI / e, n = this.or.v, i = this.os.v, a = 2 * Math.PI * n / (4 * e), o = .5 * -Math.PI, s = 3 === this.data.d ? -1 : 1;
                                            for (o += this.r.v,
                                            this.v._length = 0,
                                            t = 0; t < e; t += 1) {
                                                var l = n * Math.cos(o)
                                                  , c = n * Math.sin(o)
                                                  , h = 0 === l && 0 === c ? 0 : c / Math.sqrt(l * l + c * c)
                                                  , u = 0 === l && 0 === c ? 0 : -l / Math.sqrt(l * l + c * c);
                                                l += +this.p.v[0],
                                                c += +this.p.v[1],
                                                this.v.setTripleAt(l, c, l - h * a * i * s, c - u * a * i * s, l + h * a * i * s, c + u * a * i * s, t, !0),
                                                o += r * s
                                            }
                                            this.paths.length = 0,
                                            this.paths[0] = this.v
                                        }
                                    },
                                    extendPrototype([DynamicPropertyContainer], t),
                                    t
                                }()
                                  , u = function() {
                                    function t(t, e) {
                                        this.v = shapePool.newElement(),
                                        this.v.c = !0,
                                        this.localShapeCollection = shapeCollectionPool.newShapeCollection(),
                                        this.localShapeCollection.addShape(this.v),
                                        this.paths = this.localShapeCollection,
                                        this.elem = t,
                                        this.comp = t.comp,
                                        this.frameId = -1,
                                        this.d = e.d,
                                        this.initDynamicPropertyContainer(t),
                                        this.p = PropertyFactory.getProp(t, e.p, 1, 0, this),
                                        this.s = PropertyFactory.getProp(t, e.s, 1, 0, this),
                                        this.r = PropertyFactory.getProp(t, e.r, 0, 0, this),
                                        this.dynamicProperties.length ? this.k = !0 : (this.k = !1,
                                        this.convertRectToPath())
                                    }
                                    return t.prototype = {
                                        convertRectToPath: function() {
                                            var t = this.p.v[0]
                                              , e = this.p.v[1]
                                              , r = this.s.v[0] / 2
                                              , n = this.s.v[1] / 2
                                              , i = bmMin(r, n, this.r.v)
                                              , a = i * (1 - roundCorner);
                                            this.v._length = 0,
                                            2 === this.d || 1 === this.d ? (this.v.setTripleAt(t + r, e - n + i, t + r, e - n + i, t + r, e - n + a, 0, !0),
                                            this.v.setTripleAt(t + r, e + n - i, t + r, e + n - a, t + r, e + n - i, 1, !0),
                                            0 !== i ? (this.v.setTripleAt(t + r - i, e + n, t + r - i, e + n, t + r - a, e + n, 2, !0),
                                            this.v.setTripleAt(t - r + i, e + n, t - r + a, e + n, t - r + i, e + n, 3, !0),
                                            this.v.setTripleAt(t - r, e + n - i, t - r, e + n - i, t - r, e + n - a, 4, !0),
                                            this.v.setTripleAt(t - r, e - n + i, t - r, e - n + a, t - r, e - n + i, 5, !0),
                                            this.v.setTripleAt(t - r + i, e - n, t - r + i, e - n, t - r + a, e - n, 6, !0),
                                            this.v.setTripleAt(t + r - i, e - n, t + r - a, e - n, t + r - i, e - n, 7, !0)) : (this.v.setTripleAt(t - r, e + n, t - r + a, e + n, t - r, e + n, 2),
                                            this.v.setTripleAt(t - r, e - n, t - r, e - n + a, t - r, e - n, 3))) : (this.v.setTripleAt(t + r, e - n + i, t + r, e - n + a, t + r, e - n + i, 0, !0),
                                            0 !== i ? (this.v.setTripleAt(t + r - i, e - n, t + r - i, e - n, t + r - a, e - n, 1, !0),
                                            this.v.setTripleAt(t - r + i, e - n, t - r + a, e - n, t - r + i, e - n, 2, !0),
                                            this.v.setTripleAt(t - r, e - n + i, t - r, e - n + i, t - r, e - n + a, 3, !0),
                                            this.v.setTripleAt(t - r, e + n - i, t - r, e + n - a, t - r, e + n - i, 4, !0),
                                            this.v.setTripleAt(t - r + i, e + n, t - r + i, e + n, t - r + a, e + n, 5, !0),
                                            this.v.setTripleAt(t + r - i, e + n, t + r - a, e + n, t + r - i, e + n, 6, !0),
                                            this.v.setTripleAt(t + r, e + n - i, t + r, e + n - i, t + r, e + n - a, 7, !0)) : (this.v.setTripleAt(t - r, e - n, t - r + a, e - n, t - r, e - n, 1, !0),
                                            this.v.setTripleAt(t - r, e + n, t - r, e + n - a, t - r, e + n, 2, !0),
                                            this.v.setTripleAt(t + r, e + n, t + r - a, e + n, t + r, e + n, 3, !0)))
                                        },
                                        getValue: function() {
                                            this.elem.globalData.frameId !== this.frameId && (this.frameId = this.elem.globalData.frameId,
                                            this.iterateDynamicProperties(),
                                            this._mdf && this.convertRectToPath())
                                        },
                                        reset: n
                                    },
                                    extendPrototype([DynamicPropertyContainer], t),
                                    t
                                }()
                                  , p = {
                                    getShapeProp: function(t, e, r) {
                                        var n;
                                        return 3 === r || 4 === r ? n = (3 === r ? e.pt : e.ks).k.length ? new l(t,e,r) : new o(t,e,r) : 5 === r ? n = new u(t,e) : 6 === r ? n = new c(t,e) : 7 === r && (n = new h(t,e)),
                                        n.k && t.addDynamicProperty(n),
                                        n
                                    },
                                    getConstructorFunction: function() {
                                        return o
                                    },
                                    getKeyframedConstructorFunction: function() {
                                        return l
                                    }
                                };
                                return p
                            }(), ShapeModifiers = (ob = {},
                            modifiers = {},
                            ob.registerModifier = function(t, e) {
                                modifiers[t] || (modifiers[t] = e)
                            }
                            ,
                            ob.getModifier = function(t, e, r) {
                                return new modifiers[t](e,r)
                            }
                            ,
                            ob), ob, modifiers;
                            function ShapeModifier() {}
                            function TrimModifier() {}
                            function RoundCornersModifier() {}
                            function PuckerAndBloatModifier() {}
                            function RepeaterModifier() {}
                            function ShapeCollection() {
                                this._length = 0,
                                this._maxLength = 4,
                                this.shapes = createSizedArray(this._maxLength)
                            }
                            function DashProperty(t, e, r, n) {
                                var i;
                                this.elem = t,
                                this.frameId = -1,
                                this.dataProps = createSizedArray(e.length),
                                this.renderer = r,
                                this.k = !1,
                                this.dashStr = "",
                                this.dashArray = createTypedArray("float32", e.length ? e.length - 1 : 0),
                                this.dashoffset = createTypedArray("float32", 1),
                                this.initDynamicPropertyContainer(n);
                                var a, o = e.length || 0;
                                for (i = 0; i < o; i += 1)
                                    a = PropertyFactory.getProp(t, e[i].v, 0, 0, this),
                                    this.k = a.k || this.k,
                                    this.dataProps[i] = {
                                        n: e[i].n,
                                        p: a
                                    };
                                this.k || this.getValue(!0),
                                this._isAnimated = this.k
                            }
                            function GradientProperty(t, e, r) {
                                this.data = e,
                                this.c = createTypedArray("uint8c", 4 * e.p);
                                var n = e.k.k[0].s ? e.k.k[0].s.length - 4 * e.p : e.k.k.length - 4 * e.p;
                                this.o = createTypedArray("float32", n),
                                this._cmdf = !1,
                                this._omdf = !1,
                                this._collapsable = this.checkCollapsable(),
                                this._hasOpacity = n,
                                this.initDynamicPropertyContainer(r),
                                this.prop = PropertyFactory.getProp(t, e.k, 1, null, this),
                                this.k = this.prop.k,
                                this.getValue(!0)
                            }
                            ShapeModifier.prototype.initModifierProperties = function() {}
                            ,
                            ShapeModifier.prototype.addShapeToModifier = function() {}
                            ,
                            ShapeModifier.prototype.addShape = function(t) {
                                if (!this.closed) {
                                    t.sh.container.addDynamicProperty(t.sh);
                                    var e = {
                                        shape: t.sh,
                                        data: t,
                                        localShapeCollection: shapeCollectionPool.newShapeCollection()
                                    };
                                    this.shapes.push(e),
                                    this.addShapeToModifier(e),
                                    this._isAnimated && t.setAsAnimated()
                                }
                            }
                            ,
                            ShapeModifier.prototype.init = function(t, e) {
                                this.shapes = [],
                                this.elem = t,
                                this.initDynamicPropertyContainer(t),
                                this.initModifierProperties(t, e),
                                this.frameId = initialDefaultFrame,
                                this.closed = !1,
                                this.k = !1,
                                this.dynamicProperties.length ? this.k = !0 : this.getValue(!0)
                            }
                            ,
                            ShapeModifier.prototype.processKeys = function() {
                                this.elem.globalData.frameId !== this.frameId && (this.frameId = this.elem.globalData.frameId,
                                this.iterateDynamicProperties())
                            }
                            ,
                            extendPrototype([DynamicPropertyContainer], ShapeModifier),
                            extendPrototype([ShapeModifier], TrimModifier),
                            TrimModifier.prototype.initModifierProperties = function(t, e) {
                                this.s = PropertyFactory.getProp(t, e.s, 0, .01, this),
                                this.e = PropertyFactory.getProp(t, e.e, 0, .01, this),
                                this.o = PropertyFactory.getProp(t, e.o, 0, 0, this),
                                this.sValue = 0,
                                this.eValue = 0,
                                this.getValue = this.processKeys,
                                this.m = e.m,
                                this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length
                            }
                            ,
                            TrimModifier.prototype.addShapeToModifier = function(t) {
                                t.pathsData = []
                            }
                            ,
                            TrimModifier.prototype.calculateShapeEdges = function(t, e, r, n, i) {
                                var a = [];
                                e <= 1 ? a.push({
                                    s: t,
                                    e: e
                                }) : t >= 1 ? a.push({
                                    s: t - 1,
                                    e: e - 1
                                }) : (a.push({
                                    s: t,
                                    e: 1
                                }),
                                a.push({
                                    s: 0,
                                    e: e - 1
                                }));
                                var o, s, l = [], c = a.length;
                                for (o = 0; o < c; o += 1) {
                                    var h, u;
                                    (s = a[o]).e * i < n || s.s * i > n + r || (h = s.s * i <= n ? 0 : (s.s * i - n) / r,
                                    u = s.e * i >= n + r ? 1 : (s.e * i - n) / r,
                                    l.push([h, u]))
                                }
                                return l.length || l.push([0, 0]),
                                l
                            }
                            ,
                            TrimModifier.prototype.releasePathsData = function(t) {
                                var e, r = t.length;
                                for (e = 0; e < r; e += 1)
                                    segmentsLengthPool.release(t[e]);
                                return t.length = 0,
                                t
                            }
                            ,
                            TrimModifier.prototype.processShapes = function(t) {
                                var e, r, n, i;
                                if (this._mdf || t) {
                                    var a = this.o.v % 360 / 360;
                                    if (a < 0 && (a += 1),
                                    (e = this.s.v > 1 ? 1 + a : this.s.v < 0 ? 0 + a : this.s.v + a) > (r = this.e.v > 1 ? 1 + a : this.e.v < 0 ? 0 + a : this.e.v + a)) {
                                        var o = e;
                                        e = r,
                                        r = o
                                    }
                                    e = 1e-4 * Math.round(1e4 * e),
                                    r = 1e-4 * Math.round(1e4 * r),
                                    this.sValue = e,
                                    this.eValue = r
                                } else
                                    e = this.sValue,
                                    r = this.eValue;
                                var s, l, c, h, u, p = this.shapes.length, d = 0;
                                if (r === e)
                                    for (i = 0; i < p; i += 1)
                                        this.shapes[i].localShapeCollection.releaseShapes(),
                                        this.shapes[i].shape._mdf = !0,
                                        this.shapes[i].shape.paths = this.shapes[i].localShapeCollection,
                                        this._mdf && (this.shapes[i].pathsData.length = 0);
                                else if (1 === r && 0 === e || 0 === r && 1 === e) {
                                    if (this._mdf)
                                        for (i = 0; i < p; i += 1)
                                            this.shapes[i].pathsData.length = 0,
                                            this.shapes[i].shape._mdf = !0
                                } else {
                                    var f, m, v = [];
                                    for (i = 0; i < p; i += 1)
                                        if ((f = this.shapes[i]).shape._mdf || this._mdf || t || 2 === this.m) {
                                            if (l = (n = f.shape.paths)._length,
                                            u = 0,
                                            !f.shape._mdf && f.pathsData.length)
                                                u = f.totalShapeLength;
                                            else {
                                                for (c = this.releasePathsData(f.pathsData),
                                                s = 0; s < l; s += 1)
                                                    h = bez.getSegmentsLength(n.shapes[s]),
                                                    c.push(h),
                                                    u += h.totalLength;
                                                f.totalShapeLength = u,
                                                f.pathsData = c
                                            }
                                            d += u,
                                            f.shape._mdf = !0
                                        } else
                                            f.shape.paths = f.localShapeCollection;
                                    var g, y = e, _ = r, x = 0;
                                    for (i = p - 1; i >= 0; i -= 1)
                                        if ((f = this.shapes[i]).shape._mdf) {
                                            for ((m = f.localShapeCollection).releaseShapes(),
                                            2 === this.m && p > 1 ? (g = this.calculateShapeEdges(e, r, f.totalShapeLength, x, d),
                                            x += f.totalShapeLength) : g = [[y, _]],
                                            l = g.length,
                                            s = 0; s < l; s += 1) {
                                                y = g[s][0],
                                                _ = g[s][1],
                                                v.length = 0,
                                                _ <= 1 ? v.push({
                                                    s: f.totalShapeLength * y,
                                                    e: f.totalShapeLength * _
                                                }) : y >= 1 ? v.push({
                                                    s: f.totalShapeLength * (y - 1),
                                                    e: f.totalShapeLength * (_ - 1)
                                                }) : (v.push({
                                                    s: f.totalShapeLength * y,
                                                    e: f.totalShapeLength
                                                }),
                                                v.push({
                                                    s: 0,
                                                    e: f.totalShapeLength * (_ - 1)
                                                }));
                                                var b = this.addShapes(f, v[0]);
                                                if (v[0].s !== v[0].e) {
                                                    if (v.length > 1)
                                                        if (f.shape.paths.shapes[f.shape.paths._length - 1].c) {
                                                            var w = b.pop();
                                                            this.addPaths(b, m),
                                                            b = this.addShapes(f, v[1], w)
                                                        } else
                                                            this.addPaths(b, m),
                                                            b = this.addShapes(f, v[1]);
                                                    this.addPaths(b, m)
                                                }
                                            }
                                            f.shape.paths = m
                                        }
                                }
                            }
                            ,
                            TrimModifier.prototype.addPaths = function(t, e) {
                                var r, n = t.length;
                                for (r = 0; r < n; r += 1)
                                    e.addShape(t[r])
                            }
                            ,
                            TrimModifier.prototype.addSegment = function(t, e, r, n, i, a, o) {
                                i.setXYAt(e[0], e[1], "o", a),
                                i.setXYAt(r[0], r[1], "i", a + 1),
                                o && i.setXYAt(t[0], t[1], "v", a),
                                i.setXYAt(n[0], n[1], "v", a + 1)
                            }
                            ,
                            TrimModifier.prototype.addSegmentFromArray = function(t, e, r, n) {
                                e.setXYAt(t[1], t[5], "o", r),
                                e.setXYAt(t[2], t[6], "i", r + 1),
                                n && e.setXYAt(t[0], t[4], "v", r),
                                e.setXYAt(t[3], t[7], "v", r + 1)
                            }
                            ,
                            TrimModifier.prototype.addShapes = function(t, e, r) {
                                var n, i, a, o, s, l, c, h, u = t.pathsData, p = t.shape.paths.shapes, d = t.shape.paths._length, f = 0, m = [], v = !0;
                                for (r ? (s = r._length,
                                h = r._length) : (r = shapePool.newElement(),
                                s = 0,
                                h = 0),
                                m.push(r),
                                n = 0; n < d; n += 1) {
                                    for (l = u[n].lengths,
                                    r.c = p[n].c,
                                    a = p[n].c ? l.length : l.length + 1,
                                    i = 1; i < a; i += 1)
                                        if (f + (o = l[i - 1]).addedLength < e.s)
                                            f += o.addedLength,
                                            r.c = !1;
                                        else {
                                            if (f > e.e) {
                                                r.c = !1;
                                                break
                                            }
                                            e.s <= f && e.e >= f + o.addedLength ? (this.addSegment(p[n].v[i - 1], p[n].o[i - 1], p[n].i[i], p[n].v[i], r, s, v),
                                            v = !1) : (c = bez.getNewSegment(p[n].v[i - 1], p[n].v[i], p[n].o[i - 1], p[n].i[i], (e.s - f) / o.addedLength, (e.e - f) / o.addedLength, l[i - 1]),
                                            this.addSegmentFromArray(c, r, s, v),
                                            v = !1,
                                            r.c = !1),
                                            f += o.addedLength,
                                            s += 1
                                        }
                                    if (p[n].c && l.length) {
                                        if (o = l[i - 1],
                                        f <= e.e) {
                                            var g = l[i - 1].addedLength;
                                            e.s <= f && e.e >= f + g ? (this.addSegment(p[n].v[i - 1], p[n].o[i - 1], p[n].i[0], p[n].v[0], r, s, v),
                                            v = !1) : (c = bez.getNewSegment(p[n].v[i - 1], p[n].v[0], p[n].o[i - 1], p[n].i[0], (e.s - f) / g, (e.e - f) / g, l[i - 1]),
                                            this.addSegmentFromArray(c, r, s, v),
                                            v = !1,
                                            r.c = !1)
                                        } else
                                            r.c = !1;
                                        f += o.addedLength,
                                        s += 1
                                    }
                                    if (r._length && (r.setXYAt(r.v[h][0], r.v[h][1], "i", h),
                                    r.setXYAt(r.v[r._length - 1][0], r.v[r._length - 1][1], "o", r._length - 1)),
                                    f > e.e)
                                        break;
                                    n < d - 1 && (r = shapePool.newElement(),
                                    v = !0,
                                    m.push(r),
                                    s = 0)
                                }
                                return m
                            }
                            ,
                            ShapeModifiers.registerModifier("tm", TrimModifier),
                            extendPrototype([ShapeModifier], RoundCornersModifier),
                            RoundCornersModifier.prototype.initModifierProperties = function(t, e) {
                                this.getValue = this.processKeys,
                                this.rd = PropertyFactory.getProp(t, e.r, 0, null, this),
                                this._isAnimated = !!this.rd.effectsSequence.length
                            }
                            ,
                            RoundCornersModifier.prototype.processPath = function(t, e) {
                                var r, n = shapePool.newElement();
                                n.c = t.c;
                                var i, a, o, s, l, c, h, u, p, d, f, m, v = t._length, g = 0;
                                for (r = 0; r < v; r += 1)
                                    i = t.v[r],
                                    o = t.o[r],
                                    a = t.i[r],
                                    i[0] === o[0] && i[1] === o[1] && i[0] === a[0] && i[1] === a[1] ? 0 !== r && r !== v - 1 || t.c ? (s = 0 === r ? t.v[v - 1] : t.v[r - 1],
                                    c = (l = Math.sqrt(Math.pow(i[0] - s[0], 2) + Math.pow(i[1] - s[1], 2))) ? Math.min(l / 2, e) / l : 0,
                                    h = f = i[0] + (s[0] - i[0]) * c,
                                    u = m = i[1] - (i[1] - s[1]) * c,
                                    p = h - (h - i[0]) * roundCorner,
                                    d = u - (u - i[1]) * roundCorner,
                                    n.setTripleAt(h, u, p, d, f, m, g),
                                    g += 1,
                                    s = r === v - 1 ? t.v[0] : t.v[r + 1],
                                    c = (l = Math.sqrt(Math.pow(i[0] - s[0], 2) + Math.pow(i[1] - s[1], 2))) ? Math.min(l / 2, e) / l : 0,
                                    h = p = i[0] + (s[0] - i[0]) * c,
                                    u = d = i[1] + (s[1] - i[1]) * c,
                                    f = h - (h - i[0]) * roundCorner,
                                    m = u - (u - i[1]) * roundCorner,
                                    n.setTripleAt(h, u, p, d, f, m, g),
                                    g += 1) : (n.setTripleAt(i[0], i[1], o[0], o[1], a[0], a[1], g),
                                    g += 1) : (n.setTripleAt(t.v[r][0], t.v[r][1], t.o[r][0], t.o[r][1], t.i[r][0], t.i[r][1], g),
                                    g += 1);
                                return n
                            }
                            ,
                            RoundCornersModifier.prototype.processShapes = function(t) {
                                var e, r, n, i, a, o, s = this.shapes.length, l = this.rd.v;
                                if (0 !== l)
                                    for (r = 0; r < s; r += 1) {
                                        if (o = (a = this.shapes[r]).localShapeCollection,
                                        a.shape._mdf || this._mdf || t)
                                            for (o.releaseShapes(),
                                            a.shape._mdf = !0,
                                            e = a.shape.paths.shapes,
                                            i = a.shape.paths._length,
                                            n = 0; n < i; n += 1)
                                                o.addShape(this.processPath(e[n], l));
                                        a.shape.paths = a.localShapeCollection
                                    }
                                this.dynamicProperties.length || (this._mdf = !1)
                            }
                            ,
                            ShapeModifiers.registerModifier("rd", RoundCornersModifier),
                            extendPrototype([ShapeModifier], PuckerAndBloatModifier),
                            PuckerAndBloatModifier.prototype.initModifierProperties = function(t, e) {
                                this.getValue = this.processKeys,
                                this.amount = PropertyFactory.getProp(t, e.a, 0, null, this),
                                this._isAnimated = !!this.amount.effectsSequence.length
                            }
                            ,
                            PuckerAndBloatModifier.prototype.processPath = function(t, e) {
                                var r = e / 100
                                  , n = [0, 0]
                                  , i = t._length
                                  , a = 0;
                                for (a = 0; a < i; a += 1)
                                    n[0] += t.v[a][0],
                                    n[1] += t.v[a][1];
                                n[0] /= i,
                                n[1] /= i;
                                var o, s, l, c, h, u, p = shapePool.newElement();
                                for (p.c = t.c,
                                a = 0; a < i; a += 1)
                                    o = t.v[a][0] + (n[0] - t.v[a][0]) * r,
                                    s = t.v[a][1] + (n[1] - t.v[a][1]) * r,
                                    l = t.o[a][0] + (n[0] - t.o[a][0]) * -r,
                                    c = t.o[a][1] + (n[1] - t.o[a][1]) * -r,
                                    h = t.i[a][0] + (n[0] - t.i[a][0]) * -r,
                                    u = t.i[a][1] + (n[1] - t.i[a][1]) * -r,
                                    p.setTripleAt(o, s, l, c, h, u, a);
                                return p
                            }
                            ,
                            PuckerAndBloatModifier.prototype.processShapes = function(t) {
                                var e, r, n, i, a, o, s = this.shapes.length, l = this.amount.v;
                                if (0 !== l)
                                    for (r = 0; r < s; r += 1) {
                                        if (o = (a = this.shapes[r]).localShapeCollection,
                                        a.shape._mdf || this._mdf || t)
                                            for (o.releaseShapes(),
                                            a.shape._mdf = !0,
                                            e = a.shape.paths.shapes,
                                            i = a.shape.paths._length,
                                            n = 0; n < i; n += 1)
                                                o.addShape(this.processPath(e[n], l));
                                        a.shape.paths = a.localShapeCollection
                                    }
                                this.dynamicProperties.length || (this._mdf = !1)
                            }
                            ,
                            ShapeModifiers.registerModifier("pb", PuckerAndBloatModifier),
                            extendPrototype([ShapeModifier], RepeaterModifier),
                            RepeaterModifier.prototype.initModifierProperties = function(t, e) {
                                this.getValue = this.processKeys,
                                this.c = PropertyFactory.getProp(t, e.c, 0, null, this),
                                this.o = PropertyFactory.getProp(t, e.o, 0, null, this),
                                this.tr = TransformPropertyFactory.getTransformProperty(t, e.tr, this),
                                this.so = PropertyFactory.getProp(t, e.tr.so, 0, .01, this),
                                this.eo = PropertyFactory.getProp(t, e.tr.eo, 0, .01, this),
                                this.data = e,
                                this.dynamicProperties.length || this.getValue(!0),
                                this._isAnimated = !!this.dynamicProperties.length,
                                this.pMatrix = new Matrix,
                                this.rMatrix = new Matrix,
                                this.sMatrix = new Matrix,
                                this.tMatrix = new Matrix,
                                this.matrix = new Matrix
                            }
                            ,
                            RepeaterModifier.prototype.applyTransforms = function(t, e, r, n, i, a) {
                                var o = a ? -1 : 1
                                  , s = n.s.v[0] + (1 - n.s.v[0]) * (1 - i)
                                  , l = n.s.v[1] + (1 - n.s.v[1]) * (1 - i);
                                t.translate(n.p.v[0] * o * i, n.p.v[1] * o * i, n.p.v[2]),
                                e.translate(-n.a.v[0], -n.a.v[1], n.a.v[2]),
                                e.rotate(-n.r.v * o * i),
                                e.translate(n.a.v[0], n.a.v[1], n.a.v[2]),
                                r.translate(-n.a.v[0], -n.a.v[1], n.a.v[2]),
                                r.scale(a ? 1 / s : s, a ? 1 / l : l),
                                r.translate(n.a.v[0], n.a.v[1], n.a.v[2])
                            }
                            ,
                            RepeaterModifier.prototype.init = function(t, e, r, n) {
                                for (this.elem = t,
                                this.arr = e,
                                this.pos = r,
                                this.elemsData = n,
                                this._currentCopies = 0,
                                this._elements = [],
                                this._groups = [],
                                this.frameId = -1,
                                this.initDynamicPropertyContainer(t),
                                this.initModifierProperties(t, e[r]); r > 0; )
                                    r -= 1,
                                    this._elements.unshift(e[r]);
                                this.dynamicProperties.length ? this.k = !0 : this.getValue(!0)
                            }
                            ,
                            RepeaterModifier.prototype.resetElements = function(t) {
                                var e, r = t.length;
                                for (e = 0; e < r; e += 1)
                                    t[e]._processed = !1,
                                    "gr" === t[e].ty && this.resetElements(t[e].it)
                            }
                            ,
                            RepeaterModifier.prototype.cloneElements = function(t) {
                                var e = JSON.parse(JSON.stringify(t));
                                return this.resetElements(e),
                                e
                            }
                            ,
                            RepeaterModifier.prototype.changeGroupRender = function(t, e) {
                                var r, n = t.length;
                                for (r = 0; r < n; r += 1)
                                    t[r]._render = e,
                                    "gr" === t[r].ty && this.changeGroupRender(t[r].it, e)
                            }
                            ,
                            RepeaterModifier.prototype.processShapes = function(t) {
                                var e, r, n, i, a, o = !1;
                                if (this._mdf || t) {
                                    var s, l = Math.ceil(this.c.v);
                                    if (this._groups.length < l) {
                                        for (; this._groups.length < l; ) {
                                            var c = {
                                                it: this.cloneElements(this._elements),
                                                ty: "gr"
                                            };
                                            c.it.push({
                                                a: {
                                                    a: 0,
                                                    ix: 1,
                                                    k: [0, 0]
                                                },
                                                nm: "Transform",
                                                o: {
                                                    a: 0,
                                                    ix: 7,
                                                    k: 100
                                                },
                                                p: {
                                                    a: 0,
                                                    ix: 2,
                                                    k: [0, 0]
                                                },
                                                r: {
                                                    a: 1,
                                                    ix: 6,
                                                    k: [{
                                                        s: 0,
                                                        e: 0,
                                                        t: 0
                                                    }, {
                                                        s: 0,
                                                        e: 0,
                                                        t: 1
                                                    }]
                                                },
                                                s: {
                                                    a: 0,
                                                    ix: 3,
                                                    k: [100, 100]
                                                },
                                                sa: {
                                                    a: 0,
                                                    ix: 5,
                                                    k: 0
                                                },
                                                sk: {
                                                    a: 0,
                                                    ix: 4,
                                                    k: 0
                                                },
                                                ty: "tr"
                                            }),
                                            this.arr.splice(0, 0, c),
                                            this._groups.splice(0, 0, c),
                                            this._currentCopies += 1
                                        }
                                        this.elem.reloadShapes(),
                                        o = !0
                                    }
                                    for (a = 0,
                                    n = 0; n <= this._groups.length - 1; n += 1) {
                                        if (s = a < l,
                                        this._groups[n]._render = s,
                                        this.changeGroupRender(this._groups[n].it, s),
                                        !s) {
                                            var h = this.elemsData[n].it
                                              , u = h[h.length - 1];
                                            0 !== u.transform.op.v ? (u.transform.op._mdf = !0,
                                            u.transform.op.v = 0) : u.transform.op._mdf = !1
                                        }
                                        a += 1
                                    }
                                    this._currentCopies = l;
                                    var p = this.o.v
                                      , d = p % 1
                                      , f = p > 0 ? Math.floor(p) : Math.ceil(p)
                                      , m = this.pMatrix.props
                                      , v = this.rMatrix.props
                                      , g = this.sMatrix.props;
                                    this.pMatrix.reset(),
                                    this.rMatrix.reset(),
                                    this.sMatrix.reset(),
                                    this.tMatrix.reset(),
                                    this.matrix.reset();
                                    var y, _, x = 0;
                                    if (p > 0) {
                                        for (; x < f; )
                                            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, !1),
                                            x += 1;
                                        d && (this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, d, !1),
                                        x += d)
                                    } else if (p < 0) {
                                        for (; x > f; )
                                            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, !0),
                                            x -= 1;
                                        d && (this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -d, !0),
                                        x -= d)
                                    }
                                    for (n = 1 === this.data.m ? 0 : this._currentCopies - 1,
                                    i = 1 === this.data.m ? 1 : -1,
                                    a = this._currentCopies; a; ) {
                                        if (_ = (r = (e = this.elemsData[n].it)[e.length - 1].transform.mProps.v.props).length,
                                        e[e.length - 1].transform.mProps._mdf = !0,
                                        e[e.length - 1].transform.op._mdf = !0,
                                        e[e.length - 1].transform.op.v = 1 === this._currentCopies ? this.so.v : this.so.v + (this.eo.v - this.so.v) * (n / (this._currentCopies - 1)),
                                        0 !== x) {
                                            for ((0 !== n && 1 === i || n !== this._currentCopies - 1 && -1 === i) && this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, !1),
                                            this.matrix.transform(v[0], v[1], v[2], v[3], v[4], v[5], v[6], v[7], v[8], v[9], v[10], v[11], v[12], v[13], v[14], v[15]),
                                            this.matrix.transform(g[0], g[1], g[2], g[3], g[4], g[5], g[6], g[7], g[8], g[9], g[10], g[11], g[12], g[13], g[14], g[15]),
                                            this.matrix.transform(m[0], m[1], m[2], m[3], m[4], m[5], m[6], m[7], m[8], m[9], m[10], m[11], m[12], m[13], m[14], m[15]),
                                            y = 0; y < _; y += 1)
                                                r[y] = this.matrix.props[y];
                                            this.matrix.reset()
                                        } else
                                            for (this.matrix.reset(),
                                            y = 0; y < _; y += 1)
                                                r[y] = this.matrix.props[y];
                                        x += 1,
                                        a -= 1,
                                        n += i
                                    }
                                } else
                                    for (a = this._currentCopies,
                                    n = 0,
                                    i = 1; a; )
                                        r = (e = this.elemsData[n].it)[e.length - 1].transform.mProps.v.props,
                                        e[e.length - 1].transform.mProps._mdf = !1,
                                        e[e.length - 1].transform.op._mdf = !1,
                                        a -= 1,
                                        n += i;
                                return o
                            }
                            ,
                            RepeaterModifier.prototype.addShape = function() {}
                            ,
                            ShapeModifiers.registerModifier("rp", RepeaterModifier),
                            ShapeCollection.prototype.addShape = function(t) {
                                this._length === this._maxLength && (this.shapes = this.shapes.concat(createSizedArray(this._maxLength)),
                                this._maxLength *= 2),
                                this.shapes[this._length] = t,
                                this._length += 1
                            }
                            ,
                            ShapeCollection.prototype.releaseShapes = function() {
                                var t;
                                for (t = 0; t < this._length; t += 1)
                                    shapePool.release(this.shapes[t]);
                                this._length = 0
                            }
                            ,
                            DashProperty.prototype.getValue = function(t) {
                                if ((this.elem.globalData.frameId !== this.frameId || t) && (this.frameId = this.elem.globalData.frameId,
                                this.iterateDynamicProperties(),
                                this._mdf = this._mdf || t,
                                this._mdf)) {
                                    var e = 0
                                      , r = this.dataProps.length;
                                    for ("svg" === this.renderer && (this.dashStr = ""),
                                    e = 0; e < r; e += 1)
                                        "o" !== this.dataProps[e].n ? "svg" === this.renderer ? this.dashStr += " " + this.dataProps[e].p.v : this.dashArray[e] = this.dataProps[e].p.v : this.dashoffset[0] = this.dataProps[e].p.v
                                }
                            }
                            ,
                            extendPrototype([DynamicPropertyContainer], DashProperty),
                            GradientProperty.prototype.comparePoints = function(t, e) {
                                for (var r = 0, n = this.o.length / 2; r < n; ) {
                                    if (Math.abs(t[4 * r] - t[4 * e + 2 * r]) > .01)
                                        return !1;
                                    r += 1
                                }
                                return !0
                            }
                            ,
                            GradientProperty.prototype.checkCollapsable = function() {
                                if (this.o.length / 2 != this.c.length / 4)
                                    return !1;
                                if (this.data.k.k[0].s)
                                    for (var t = 0, e = this.data.k.k.length; t < e; ) {
                                        if (!this.comparePoints(this.data.k.k[t].s, this.data.p))
                                            return !1;
                                        t += 1
                                    }
                                else if (!this.comparePoints(this.data.k.k, this.data.p))
                                    return !1;
                                return !0
                            }
                            ,
                            GradientProperty.prototype.getValue = function(t) {
                                if (this.prop.getValue(),
                                this._mdf = !1,
                                this._cmdf = !1,
                                this._omdf = !1,
                                this.prop._mdf || t) {
                                    var e, r, n, i = 4 * this.data.p;
                                    for (e = 0; e < i; e += 1)
                                        r = e % 4 == 0 ? 100 : 255,
                                        n = Math.round(this.prop.v[e] * r),
                                        this.c[e] !== n && (this.c[e] = n,
                                        this._cmdf = !t);
                                    if (this.o.length)
                                        for (i = this.prop.v.length,
                                        e = 4 * this.data.p; e < i; e += 1)
                                            r = e % 2 == 0 ? 100 : 1,
                                            n = e % 2 == 0 ? Math.round(100 * this.prop.v[e]) : this.prop.v[e],
                                            this.o[e - 4 * this.data.p] !== n && (this.o[e - 4 * this.data.p] = n,
                                            this._omdf = !t);
                                    this._mdf = !t
                                }
                            }
                            ,
                            extendPrototype([DynamicPropertyContainer], GradientProperty);
                            var buildShapeString = function(t, e, r, n) {
                                if (0 === e)
                                    return "";
                                var i, a = t.o, o = t.i, s = t.v, l = " M" + n.applyToPointStringified(s[0][0], s[0][1]);
                                for (i = 1; i < e; i += 1)
                                    l += " C" + n.applyToPointStringified(a[i - 1][0], a[i - 1][1]) + " " + n.applyToPointStringified(o[i][0], o[i][1]) + " " + n.applyToPointStringified(s[i][0], s[i][1]);
                                return r && e && (l += " C" + n.applyToPointStringified(a[i - 1][0], a[i - 1][1]) + " " + n.applyToPointStringified(o[0][0], o[0][1]) + " " + n.applyToPointStringified(s[0][0], s[0][1]),
                                l += "z"),
                                l
                            }
                              , audioControllerFactory = function() {
                                function t(t) {
                                    this.audios = [],
                                    this.audioFactory = t,
                                    this._volume = 1,
                                    this._isMuted = !1
                                }
                                return t.prototype = {
                                    addAudio: function(t) {
                                        this.audios.push(t)
                                    },
                                    pause: function() {
                                        var t, e = this.audios.length;
                                        for (t = 0; t < e; t += 1)
                                            this.audios[t].pause()
                                    },
                                    resume: function() {
                                        var t, e = this.audios.length;
                                        for (t = 0; t < e; t += 1)
                                            this.audios[t].resume()
                                    },
                                    setRate: function(t) {
                                        var e, r = this.audios.length;
                                        for (e = 0; e < r; e += 1)
                                            this.audios[e].setRate(t)
                                    },
                                    createAudio: function(t) {
                                        return this.audioFactory ? this.audioFactory(t) : Howl ? new Howl({
                                            src: [t]
                                        }) : {
                                            isPlaying: !1,
                                            play: function() {
                                                this.isPlaying = !0
                                            },
                                            seek: function() {
                                                this.isPlaying = !1
                                            },
                                            playing: function() {},
                                            rate: function() {},
                                            setVolume: function() {}
                                        }
                                    },
                                    setAudioFactory: function(t) {
                                        this.audioFactory = t
                                    },
                                    setVolume: function(t) {
                                        this._volume = t,
                                        this._updateVolume()
                                    },
                                    mute: function() {
                                        this._isMuted = !0,
                                        this._updateVolume()
                                    },
                                    unmute: function() {
                                        this._isMuted = !1,
                                        this._updateVolume()
                                    },
                                    getVolume: function() {
                                        return this._volume
                                    },
                                    _updateVolume: function() {
                                        var t, e = this.audios.length;
                                        for (t = 0; t < e; t += 1)
                                            this.audios[t].volume(this._volume * (this._isMuted ? 0 : 1))
                                    }
                                },
                                function() {
                                    return new t
                                }
                            }()
                              , ImagePreloader = function() {
                                var t = function() {
                                    var t = createTag("canvas");
                                    t.width = 1,
                                    t.height = 1;
                                    var e = t.getContext("2d");
                                    return e.fillStyle = "rgba(0,0,0,0)",
                                    e.fillRect(0, 0, 1, 1),
                                    t
                                }();
                                function e() {
                                    this.loadedAssets += 1,
                                    this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages && this.imagesLoadedCb && this.imagesLoadedCb(null)
                                }
                                function r() {
                                    this.loadedFootagesCount += 1,
                                    this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages && this.imagesLoadedCb && this.imagesLoadedCb(null)
                                }
                                function n(t, e, r) {
                                    var n = "";
                                    if (t.e)
                                        n = t.p;
                                    else if (e) {
                                        var i = t.p;
                                        -1 !== i.indexOf("images/") && (i = i.split("/")[1]),
                                        n = e + i
                                    } else
                                        n = r,
                                        n += t.u ? t.u : "",
                                        n += t.p;
                                    return n
                                }
                                function i(t) {
                                    var e = 0
                                      , r = setInterval(function() {
                                        (t.getBBox().width || e > 500) && (this._imageLoaded(),
                                        clearInterval(r)),
                                        e += 1
                                    }
                                    .bind(this), 50)
                                }
                                function a(t) {
                                    var e = {
                                        assetData: t
                                    }
                                      , r = n(t, this.assetsPath, this.path);
                                    return dataManager.loadData(r, function(t) {
                                        e.img = t,
                                        this._footageLoaded()
                                    }
                                    .bind(this), function() {
                                        e.img = {},
                                        this._footageLoaded()
                                    }
                                    .bind(this)),
                                    e
                                }
                                function o() {
                                    this._imageLoaded = e.bind(this),
                                    this._footageLoaded = r.bind(this),
                                    this.testImageLoaded = i.bind(this),
                                    this.createFootageData = a.bind(this),
                                    this.assetsPath = "",
                                    this.path = "",
                                    this.totalImages = 0,
                                    this.totalFootages = 0,
                                    this.loadedAssets = 0,
                                    this.loadedFootagesCount = 0,
                                    this.imagesLoadedCb = null,
                                    this.images = []
                                }
                                return o.prototype = {
                                    loadAssets: function(t, e) {
                                        var r;
                                        this.imagesLoadedCb = e;
                                        var n = t.length;
                                        for (r = 0; r < n; r += 1)
                                            t[r].layers || (t[r].t && "seq" !== t[r].t ? 3 === t[r].t && (this.totalFootages += 1,
                                            this.images.push(this.createFootageData(t[r]))) : (this.totalImages += 1,
                                            this.images.push(this._createImageData(t[r]))))
                                    },
                                    setAssetsPath: function(t) {
                                        this.assetsPath = t || ""
                                    },
                                    setPath: function(t) {
                                        this.path = t || ""
                                    },
                                    loadedImages: function() {
                                        return this.totalImages === this.loadedAssets
                                    },
                                    loadedFootages: function() {
                                        return this.totalFootages === this.loadedFootagesCount
                                    },
                                    destroy: function() {
                                        this.imagesLoadedCb = null,
                                        this.images.length = 0
                                    },
                                    getAsset: function(t) {
                                        for (var e = 0, r = this.images.length; e < r; ) {
                                            if (this.images[e].assetData === t)
                                                return this.images[e].img;
                                            e += 1
                                        }
                                        return null
                                    },
                                    createImgData: function(e) {
                                        var r = n(e, this.assetsPath, this.path)
                                          , i = createTag("img");
                                        i.crossOrigin = "anonymous",
                                        i.addEventListener("load", this._imageLoaded, !1),
                                        i.addEventListener("error", function() {
                                            a.img = t,
                                            this._imageLoaded()
                                        }
                                        .bind(this), !1),
                                        i.src = r;
                                        var a = {
                                            img: i,
                                            assetData: e
                                        };
                                        return a
                                    },
                                    createImageData: function(e) {
                                        var r = n(e, this.assetsPath, this.path)
                                          , i = createNS("image");
                                        isSafari ? this.testImageLoaded(i) : i.addEventListener("load", this._imageLoaded, !1),
                                        i.addEventListener("error", function() {
                                            a.img = t,
                                            this._imageLoaded()
                                        }
                                        .bind(this), !1),
                                        i.setAttributeNS("http://www.w3.org/1999/xlink", "href", r),
                                        this._elementHelper.append ? this._elementHelper.append(i) : this._elementHelper.appendChild(i);
                                        var a = {
                                            img: i,
                                            assetData: e
                                        };
                                        return a
                                    },
                                    imageLoaded: e,
                                    footageLoaded: r,
                                    setCacheType: function(t, e) {
                                        "svg" === t ? (this._elementHelper = e,
                                        this._createImageData = this.createImageData.bind(this)) : this._createImageData = this.createImgData.bind(this)
                                    }
                                },
                                o
                            }()
                              , featureSupport = function() {
                                var t = {
                                    maskType: !0
                                };
                                return (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\/\d./i.test(navigator.userAgent)) && (t.maskType = !1),
                                t
                            }()
                              , filtersFactory = function() {
                                var t = {
                                    createFilter: function(t, e) {
                                        var r = createNS("filter");
                                        return r.setAttribute("id", t),
                                        !0 !== e && (r.setAttribute("filterUnits", "objectBoundingBox"),
                                        r.setAttribute("x", "0%"),
                                        r.setAttribute("y", "0%"),
                                        r.setAttribute("width", "100%"),
                                        r.setAttribute("height", "100%")),
                                        r
                                    },
                                    createAlphaToLuminanceFilter: function() {
                                        var t = createNS("feColorMatrix");
                                        return t.setAttribute("type", "matrix"),
                                        t.setAttribute("color-interpolation-filters", "sRGB"),
                                        t.setAttribute("values", "0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),
                                        t
                                    }
                                };
                                return t
                            }();
                            function TextAnimatorProperty(t, e, r) {
                                this._isFirstFrame = !0,
                                this._hasMaskedPath = !1,
                                this._frameId = -1,
                                this._textData = t,
                                this._renderType = e,
                                this._elem = r,
                                this._animatorsData = createSizedArray(this._textData.a.length),
                                this._pathData = {},
                                this._moreOptions = {
                                    alignment: {}
                                },
                                this.renderedLetters = [],
                                this.lettersChangedFlag = !1,
                                this.initDynamicPropertyContainer(r)
                            }
                            function TextAnimatorDataProperty(t, e, r) {
                                var n = {
                                    propType: !1
                                }
                                  , i = PropertyFactory.getProp
                                  , a = e.a;
                                this.a = {
                                    r: a.r ? i(t, a.r, 0, degToRads, r) : n,
                                    rx: a.rx ? i(t, a.rx, 0, degToRads, r) : n,
                                    ry: a.ry ? i(t, a.ry, 0, degToRads, r) : n,
                                    sk: a.sk ? i(t, a.sk, 0, degToRads, r) : n,
                                    sa: a.sa ? i(t, a.sa, 0, degToRads, r) : n,
                                    s: a.s ? i(t, a.s, 1, .01, r) : n,
                                    a: a.a ? i(t, a.a, 1, 0, r) : n,
                                    o: a.o ? i(t, a.o, 0, .01, r) : n,
                                    p: a.p ? i(t, a.p, 1, 0, r) : n,
                                    sw: a.sw ? i(t, a.sw, 0, 0, r) : n,
                                    sc: a.sc ? i(t, a.sc, 1, 0, r) : n,
                                    fc: a.fc ? i(t, a.fc, 1, 0, r) : n,
                                    fh: a.fh ? i(t, a.fh, 0, 0, r) : n,
                                    fs: a.fs ? i(t, a.fs, 0, .01, r) : n,
                                    fb: a.fb ? i(t, a.fb, 0, .01, r) : n,
                                    t: a.t ? i(t, a.t, 0, 0, r) : n
                                },
                                this.s = TextSelectorProp.getTextSelectorProp(t, e.s, r),
                                this.s.t = e.s.t
                            }
                            function LetterProps(t, e, r, n, i, a) {
                                this.o = t,
                                this.sw = e,
                                this.sc = r,
                                this.fc = n,
                                this.m = i,
                                this.p = a,
                                this._mdf = {
                                    o: !0,
                                    sw: !!e,
                                    sc: !!r,
                                    fc: !!n,
                                    m: !0,
                                    p: !0
                                }
                            }
                            function TextProperty(t, e) {
                                this._frameId = initialDefaultFrame,
                                this.pv = "",
                                this.v = "",
                                this.kf = !1,
                                this._isFirstFrame = !0,
                                this._mdf = !1,
                                this.data = e,
                                this.elem = t,
                                this.comp = this.elem.comp,
                                this.keysIndex = 0,
                                this.canResize = !1,
                                this.minimumFontSize = 1,
                                this.effectsSequence = [],
                                this.currentData = {
                                    ascent: 0,
                                    boxWidth: this.defaultBoxWidth,
                                    f: "",
                                    fStyle: "",
                                    fWeight: "",
                                    fc: "",
                                    j: "",
                                    justifyOffset: "",
                                    l: [],
                                    lh: 0,
                                    lineWidths: [],
                                    ls: "",
                                    of: "",
                                    s: "",
                                    sc: "",
                                    sw: 0,
                                    t: 0,
                                    tr: 0,
                                    sz: 0,
                                    ps: null,
                                    fillColorAnim: !1,
                                    strokeColorAnim: !1,
                                    strokeWidthAnim: !1,
                                    yOffset: 0,
                                    finalSize: 0,
                                    finalText: [],
                                    finalLineHeight: 0,
                                    __complete: !1
                                },
                                this.copyData(this.currentData, this.data.d.k[0].s),
                                this.searchProperty() || this.completeTextData(this.currentData)
                            }
                            TextAnimatorProperty.prototype.searchProperties = function() {
                                var t, e, r = this._textData.a.length, n = PropertyFactory.getProp;
                                for (t = 0; t < r; t += 1)
                                    e = this._textData.a[t],
                                    this._animatorsData[t] = new TextAnimatorDataProperty(this._elem,e,this);
                                this._textData.p && "m"in this._textData.p ? (this._pathData = {
                                    a: n(this._elem, this._textData.p.a, 0, 0, this),
                                    f: n(this._elem, this._textData.p.f, 0, 0, this),
                                    l: n(this._elem, this._textData.p.l, 0, 0, this),
                                    r: n(this._elem, this._textData.p.r, 0, 0, this),
                                    p: n(this._elem, this._textData.p.p, 0, 0, this),
                                    m: this._elem.maskManager.getMaskProperty(this._textData.p.m)
                                },
                                this._hasMaskedPath = !0) : this._hasMaskedPath = !1,
                                this._moreOptions.alignment = n(this._elem, this._textData.m.a, 1, 0, this)
                            }
                            ,
                            TextAnimatorProperty.prototype.getMeasures = function(t, e) {
                                if (this.lettersChangedFlag = e,
                                this._mdf || this._isFirstFrame || e || this._hasMaskedPath && this._pathData.m._mdf) {
                                    this._isFirstFrame = !1;
                                    var r, n, i, a, o, s, l, c, h, u, p, d, f, m, v, g, y, _, x, b = this._moreOptions.alignment.v, w = this._animatorsData, S = this._textData, T = this.mHelper, M = this._renderType, E = this.renderedLetters.length, A = t.l;
                                    if (this._hasMaskedPath) {
                                        if (x = this._pathData.m,
                                        !this._pathData.n || this._pathData._mdf) {
                                            var P, C = x.v;
                                            for (this._pathData.r.v && (C = C.reverse()),
                                            o = {
                                                tLength: 0,
                                                segments: []
                                            },
                                            a = C._length - 1,
                                            g = 0,
                                            i = 0; i < a; i += 1)
                                                P = bez.buildBezierData(C.v[i], C.v[i + 1], [C.o[i][0] - C.v[i][0], C.o[i][1] - C.v[i][1]], [C.i[i + 1][0] - C.v[i + 1][0], C.i[i + 1][1] - C.v[i + 1][1]]),
                                                o.tLength += P.segmentLength,
                                                o.segments.push(P),
                                                g += P.segmentLength;
                                            i = a,
                                            x.v.c && (P = bez.buildBezierData(C.v[i], C.v[0], [C.o[i][0] - C.v[i][0], C.o[i][1] - C.v[i][1]], [C.i[0][0] - C.v[0][0], C.i[0][1] - C.v[0][1]]),
                                            o.tLength += P.segmentLength,
                                            o.segments.push(P),
                                            g += P.segmentLength),
                                            this._pathData.pi = o
                                        }
                                        if (o = this._pathData.pi,
                                        s = this._pathData.f.v,
                                        p = 0,
                                        u = 1,
                                        c = 0,
                                        h = !0,
                                        m = o.segments,
                                        s < 0 && x.v.c)
                                            for (o.tLength < Math.abs(s) && (s = -Math.abs(s) % o.tLength),
                                            u = (f = m[p = m.length - 1].points).length - 1; s < 0; )
                                                s += f[u].partialLength,
                                                (u -= 1) < 0 && (u = (f = m[p -= 1].points).length - 1);
                                        d = (f = m[p].points)[u - 1],
                                        v = (l = f[u]).partialLength
                                    }
                                    a = A.length,
                                    r = 0,
                                    n = 0;
                                    var L, D, R, I, k, O = 1.2 * t.finalSize * .714, F = !0;
                                    R = w.length;
                                    var N, B, z, G, H, U, V, j, W, q, X, Y, $ = -1, K = s, Z = p, J = u, Q = -1, tt = "", et = this.defaultPropsArray;
                                    if (2 === t.j || 1 === t.j) {
                                        var rt = 0
                                          , nt = 0
                                          , it = 2 === t.j ? -.5 : -1
                                          , at = 0
                                          , ot = !0;
                                        for (i = 0; i < a; i += 1)
                                            if (A[i].n) {
                                                for (rt && (rt += nt); at < i; )
                                                    A[at].animatorJustifyOffset = rt,
                                                    at += 1;
                                                rt = 0,
                                                ot = !0
                                            } else {
                                                for (D = 0; D < R; D += 1)
                                                    (L = w[D].a).t.propType && (ot && 2 === t.j && (nt += L.t.v * it),
                                                    (k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars)).length ? rt += L.t.v * k[0] * it : rt += L.t.v * k * it);
                                                ot = !1
                                            }
                                        for (rt && (rt += nt); at < i; )
                                            A[at].animatorJustifyOffset = rt,
                                            at += 1
                                    }
                                    for (i = 0; i < a; i += 1) {
                                        if (T.reset(),
                                        G = 1,
                                        A[i].n)
                                            r = 0,
                                            n += t.yOffset,
                                            n += F ? 1 : 0,
                                            s = K,
                                            F = !1,
                                            this._hasMaskedPath && (u = J,
                                            d = (f = m[p = Z].points)[u - 1],
                                            v = (l = f[u]).partialLength,
                                            c = 0),
                                            tt = "",
                                            X = "",
                                            W = "",
                                            Y = "",
                                            et = this.defaultPropsArray;
                                        else {
                                            if (this._hasMaskedPath) {
                                                if (Q !== A[i].line) {
                                                    switch (t.j) {
                                                    case 1:
                                                        s += g - t.lineWidths[A[i].line];
                                                        break;
                                                    case 2:
                                                        s += (g - t.lineWidths[A[i].line]) / 2
                                                    }
                                                    Q = A[i].line
                                                }
                                                $ !== A[i].ind && (A[$] && (s += A[$].extra),
                                                s += A[i].an / 2,
                                                $ = A[i].ind),
                                                s += b[0] * A[i].an * .005;
                                                var st = 0;
                                                for (D = 0; D < R; D += 1)
                                                    (L = w[D].a).p.propType && ((k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars)).length ? st += L.p.v[0] * k[0] : st += L.p.v[0] * k),
                                                    L.a.propType && ((k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars)).length ? st += L.a.v[0] * k[0] : st += L.a.v[0] * k);
                                                for (h = !0,
                                                this._pathData.a.v && (s = .5 * A[0].an + (g - this._pathData.f.v - .5 * A[0].an - .5 * A[A.length - 1].an) * $ / (a - 1),
                                                s += this._pathData.f.v); h; )
                                                    c + v >= s + st || !f ? (y = (s + st - c) / l.partialLength,
                                                    B = d.point[0] + (l.point[0] - d.point[0]) * y,
                                                    z = d.point[1] + (l.point[1] - d.point[1]) * y,
                                                    T.translate(-b[0] * A[i].an * .005, -b[1] * O * .01),
                                                    h = !1) : f && (c += l.partialLength,
                                                    (u += 1) >= f.length && (u = 0,
                                                    m[p += 1] ? f = m[p].points : x.v.c ? (u = 0,
                                                    f = m[p = 0].points) : (c -= l.partialLength,
                                                    f = null)),
                                                    f && (d = l,
                                                    v = (l = f[u]).partialLength));
                                                N = A[i].an / 2 - A[i].add,
                                                T.translate(-N, 0, 0)
                                            } else
                                                N = A[i].an / 2 - A[i].add,
                                                T.translate(-N, 0, 0),
                                                T.translate(-b[0] * A[i].an * .005, -b[1] * O * .01, 0);
                                            for (D = 0; D < R; D += 1)
                                                (L = w[D].a).t.propType && (k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars),
                                                0 === r && 0 === t.j || (this._hasMaskedPath ? k.length ? s += L.t.v * k[0] : s += L.t.v * k : k.length ? r += L.t.v * k[0] : r += L.t.v * k));
                                            for (t.strokeWidthAnim && (U = t.sw || 0),
                                            t.strokeColorAnim && (H = t.sc ? [t.sc[0], t.sc[1], t.sc[2]] : [0, 0, 0]),
                                            t.fillColorAnim && t.fc && (V = [t.fc[0], t.fc[1], t.fc[2]]),
                                            D = 0; D < R; D += 1)
                                                (L = w[D].a).a.propType && ((k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars)).length ? T.translate(-L.a.v[0] * k[0], -L.a.v[1] * k[1], L.a.v[2] * k[2]) : T.translate(-L.a.v[0] * k, -L.a.v[1] * k, L.a.v[2] * k));
                                            for (D = 0; D < R; D += 1)
                                                (L = w[D].a).s.propType && ((k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars)).length ? T.scale(1 + (L.s.v[0] - 1) * k[0], 1 + (L.s.v[1] - 1) * k[1], 1) : T.scale(1 + (L.s.v[0] - 1) * k, 1 + (L.s.v[1] - 1) * k, 1));
                                            for (D = 0; D < R; D += 1) {
                                                if (L = w[D].a,
                                                k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars),
                                                L.sk.propType && (k.length ? T.skewFromAxis(-L.sk.v * k[0], L.sa.v * k[1]) : T.skewFromAxis(-L.sk.v * k, L.sa.v * k)),
                                                L.r.propType && (k.length ? T.rotateZ(-L.r.v * k[2]) : T.rotateZ(-L.r.v * k)),
                                                L.ry.propType && (k.length ? T.rotateY(L.ry.v * k[1]) : T.rotateY(L.ry.v * k)),
                                                L.rx.propType && (k.length ? T.rotateX(L.rx.v * k[0]) : T.rotateX(L.rx.v * k)),
                                                L.o.propType && (k.length ? G += (L.o.v * k[0] - G) * k[0] : G += (L.o.v * k - G) * k),
                                                t.strokeWidthAnim && L.sw.propType && (k.length ? U += L.sw.v * k[0] : U += L.sw.v * k),
                                                t.strokeColorAnim && L.sc.propType)
                                                    for (j = 0; j < 3; j += 1)
                                                        k.length ? H[j] += (L.sc.v[j] - H[j]) * k[0] : H[j] += (L.sc.v[j] - H[j]) * k;
                                                if (t.fillColorAnim && t.fc) {
                                                    if (L.fc.propType)
                                                        for (j = 0; j < 3; j += 1)
                                                            k.length ? V[j] += (L.fc.v[j] - V[j]) * k[0] : V[j] += (L.fc.v[j] - V[j]) * k;
                                                    L.fh.propType && (V = k.length ? addHueToRGB(V, L.fh.v * k[0]) : addHueToRGB(V, L.fh.v * k)),
                                                    L.fs.propType && (V = k.length ? addSaturationToRGB(V, L.fs.v * k[0]) : addSaturationToRGB(V, L.fs.v * k)),
                                                    L.fb.propType && (V = k.length ? addBrightnessToRGB(V, L.fb.v * k[0]) : addBrightnessToRGB(V, L.fb.v * k))
                                                }
                                            }
                                            for (D = 0; D < R; D += 1)
                                                (L = w[D].a).p.propType && (k = w[D].s.getMult(A[i].anIndexes[D], S.a[D].s.totalChars),
                                                this._hasMaskedPath ? k.length ? T.translate(0, L.p.v[1] * k[0], -L.p.v[2] * k[1]) : T.translate(0, L.p.v[1] * k, -L.p.v[2] * k) : k.length ? T.translate(L.p.v[0] * k[0], L.p.v[1] * k[1], -L.p.v[2] * k[2]) : T.translate(L.p.v[0] * k, L.p.v[1] * k, -L.p.v[2] * k));
                                            if (t.strokeWidthAnim && (W = U < 0 ? 0 : U),
                                            t.strokeColorAnim && (q = "rgb(" + Math.round(255 * H[0]) + "," + Math.round(255 * H[1]) + "," + Math.round(255 * H[2]) + ")"),
                                            t.fillColorAnim && t.fc && (X = "rgb(" + Math.round(255 * V[0]) + "," + Math.round(255 * V[1]) + "," + Math.round(255 * V[2]) + ")"),
                                            this._hasMaskedPath) {
                                                if (T.translate(0, -t.ls),
                                                T.translate(0, b[1] * O * .01 + n, 0),
                                                this._pathData.p.v) {
                                                    _ = (l.point[1] - d.point[1]) / (l.point[0] - d.point[0]);
                                                    var lt = 180 * Math.atan(_) / Math.PI;
                                                    l.point[0] < d.point[0] && (lt += 180),
                                                    T.rotate(-lt * Math.PI / 180)
                                                }
                                                T.translate(B, z, 0),
                                                s -= b[0] * A[i].an * .005,
                                                A[i + 1] && $ !== A[i + 1].ind && (s += A[i].an / 2,
                                                s += .001 * t.tr * t.finalSize)
                                            } else {
                                                switch (T.translate(r, n, 0),
                                                t.ps && T.translate(t.ps[0], t.ps[1] + t.ascent, 0),
                                                t.j) {
                                                case 1:
                                                    T.translate(A[i].animatorJustifyOffset + t.justifyOffset + (t.boxWidth - t.lineWidths[A[i].line]), 0, 0);
                                                    break;
                                                case 2:
                                                    T.translate(A[i].animatorJustifyOffset + t.justifyOffset + (t.boxWidth - t.lineWidths[A[i].line]) / 2, 0, 0)
                                                }
                                                T.translate(0, -t.ls),
                                                T.translate(N, 0, 0),
                                                T.translate(b[0] * A[i].an * .005, b[1] * O * .01, 0),
                                                r += A[i].l + .001 * t.tr * t.finalSize
                                            }
                                            "html" === M ? tt = T.toCSS() : "svg" === M ? tt = T.to2dCSS() : et = [T.props[0], T.props[1], T.props[2], T.props[3], T.props[4], T.props[5], T.props[6], T.props[7], T.props[8], T.props[9], T.props[10], T.props[11], T.props[12], T.props[13], T.props[14], T.props[15]],
                                            Y = G
                                        }
                                        E <= i ? (I = new LetterProps(Y,W,q,X,tt,et),
                                        this.renderedLetters.push(I),
                                        E += 1,
                                        this.lettersChangedFlag = !0) : (I = this.renderedLetters[i],
                                        this.lettersChangedFlag = I.update(Y, W, q, X, tt, et) || this.lettersChangedFlag)
                                    }
                                }
                            }
                            ,
                            TextAnimatorProperty.prototype.getValue = function() {
                                this._elem.globalData.frameId !== this._frameId && (this._frameId = this._elem.globalData.frameId,
                                this.iterateDynamicProperties())
                            }
                            ,
                            TextAnimatorProperty.prototype.mHelper = new Matrix,
                            TextAnimatorProperty.prototype.defaultPropsArray = [],
                            extendPrototype([DynamicPropertyContainer], TextAnimatorProperty),
                            LetterProps.prototype.update = function(t, e, r, n, i, a) {
                                this._mdf.o = !1,
                                this._mdf.sw = !1,
                                this._mdf.sc = !1,
                                this._mdf.fc = !1,
                                this._mdf.m = !1,
                                this._mdf.p = !1;
                                var o = !1;
                                return this.o !== t && (this.o = t,
                                this._mdf.o = !0,
                                o = !0),
                                this.sw !== e && (this.sw = e,
                                this._mdf.sw = !0,
                                o = !0),
                                this.sc !== r && (this.sc = r,
                                this._mdf.sc = !0,
                                o = !0),
                                this.fc !== n && (this.fc = n,
                                this._mdf.fc = !0,
                                o = !0),
                                this.m !== i && (this.m = i,
                                this._mdf.m = !0,
                                o = !0),
                                !a.length || this.p[0] === a[0] && this.p[1] === a[1] && this.p[4] === a[4] && this.p[5] === a[5] && this.p[12] === a[12] && this.p[13] === a[13] || (this.p = a,
                                this._mdf.p = !0,
                                o = !0),
                                o
                            }
                            ,
                            TextProperty.prototype.defaultBoxWidth = [0, 0],
                            TextProperty.prototype.copyData = function(t, e) {
                                for (var r in e)
                                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                                return t
                            }
                            ,
                            TextProperty.prototype.setCurrentData = function(t) {
                                t.__complete || this.completeTextData(t),
                                this.currentData = t,
                                this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth,
                                this._mdf = !0
                            }
                            ,
                            TextProperty.prototype.searchProperty = function() {
                                return this.searchKeyframes()
                            }
                            ,
                            TextProperty.prototype.searchKeyframes = function() {
                                return this.kf = this.data.d.k.length > 1,
                                this.kf && this.addEffect(this.getKeyframeValue.bind(this)),
                                this.kf
                            }
                            ,
                            TextProperty.prototype.addEffect = function(t) {
                                this.effectsSequence.push(t),
                                this.elem.addDynamicProperty(this)
                            }
                            ,
                            TextProperty.prototype.getValue = function(t) {
                                if (this.elem.globalData.frameId !== this.frameId && this.effectsSequence.length || t) {
                                    this.currentData.t = this.data.d.k[this.keysIndex].s.t;
                                    var e = this.currentData
                                      , r = this.keysIndex;
                                    if (this.lock)
                                        this.setCurrentData(this.currentData);
                                    else {
                                        var n;
                                        this.lock = !0,
                                        this._mdf = !1;
                                        var i = this.effectsSequence.length
                                          , a = t || this.data.d.k[this.keysIndex].s;
                                        for (n = 0; n < i; n += 1)
                                            a = r !== this.keysIndex ? this.effectsSequence[n](a, a.t) : this.effectsSequence[n](this.currentData, a.t);
                                        e !== a && this.setCurrentData(a),
                                        this.v = this.currentData,
                                        this.pv = this.v,
                                        this.lock = !1,
                                        this.frameId = this.elem.globalData.frameId
                                    }
                                }
                            }
                            ,
                            TextProperty.prototype.getKeyframeValue = function() {
                                for (var t = this.data.d.k, e = this.elem.comp.renderedFrame, r = 0, n = t.length; r <= n - 1 && !(r === n - 1 || t[r + 1].t > e); )
                                    r += 1;
                                return this.keysIndex !== r && (this.keysIndex = r),
                                this.data.d.k[this.keysIndex].s
                            }
                            ,
                            TextProperty.prototype.buildFinalText = function(t) {
                                for (var e, r, n = [], i = 0, a = t.length, o = !1; i < a; )
                                    e = t.charCodeAt(i),
                                    FontManager.isCombinedCharacter(e) ? n[n.length - 1] += t.charAt(i) : e >= 55296 && e <= 56319 ? (r = t.charCodeAt(i + 1)) >= 56320 && r <= 57343 ? (o || FontManager.isModifier(e, r) ? (n[n.length - 1] += t.substr(i, 2),
                                    o = !1) : n.push(t.substr(i, 2)),
                                    i += 1) : n.push(t.charAt(i)) : e > 56319 ? (r = t.charCodeAt(i + 1),
                                    FontManager.isZeroWidthJoiner(e, r) ? (o = !0,
                                    n[n.length - 1] += t.substr(i, 2),
                                    i += 1) : n.push(t.charAt(i))) : FontManager.isZeroWidthJoiner(e) ? (n[n.length - 1] += t.charAt(i),
                                    o = !0) : n.push(t.charAt(i)),
                                    i += 1;
                                return n
                            }
                            ,
                            TextProperty.prototype.completeTextData = function(t) {
                                t.__complete = !0;
                                var e, r, n, i, a, o, s, l = this.elem.globalData.fontManager, c = this.data, h = [], u = 0, p = c.m.g, d = 0, f = 0, m = 0, v = [], g = 0, y = 0, _ = l.getFontByName(t.f), x = 0, b = getFontProperties(_);
                                t.fWeight = b.weight,
                                t.fStyle = b.style,
                                t.finalSize = t.s,
                                t.finalText = this.buildFinalText(t.t),
                                r = t.finalText.length,
                                t.finalLineHeight = t.lh;
                                var w, S = t.tr / 1e3 * t.finalSize;
                                if (t.sz)
                                    for (var T, M, E = !0, A = t.sz[0], P = t.sz[1]; E; ) {
                                        T = 0,
                                        g = 0,
                                        r = (M = this.buildFinalText(t.t)).length,
                                        S = t.tr / 1e3 * t.finalSize;
                                        var C = -1;
                                        for (e = 0; e < r; e += 1)
                                            w = M[e].charCodeAt(0),
                                            n = !1,
                                            " " === M[e] ? C = e : 13 !== w && 3 !== w || (g = 0,
                                            n = !0,
                                            T += t.finalLineHeight || 1.2 * t.finalSize),
                                            l.chars ? (s = l.getCharData(M[e], _.fStyle, _.fFamily),
                                            x = n ? 0 : s.w * t.finalSize / 100) : x = l.measureText(M[e], t.f, t.finalSize),
                                            g + x > A && " " !== M[e] ? (-1 === C ? r += 1 : e = C,
                                            T += t.finalLineHeight || 1.2 * t.finalSize,
                                            M.splice(e, C === e ? 1 : 0, "\r"),
                                            C = -1,
                                            g = 0) : (g += x,
                                            g += S);
                                        T += _.ascent * t.finalSize / 100,
                                        this.canResize && t.finalSize > this.minimumFontSize && P < T ? (t.finalSize -= 1,
                                        t.finalLineHeight = t.finalSize * t.lh / t.s) : (t.finalText = M,
                                        r = t.finalText.length,
                                        E = !1)
                                    }
                                g = -S,
                                x = 0;
                                var L, D = 0;
                                for (e = 0; e < r; e += 1)
                                    if (n = !1,
                                    13 === (w = (L = t.finalText[e]).charCodeAt(0)) || 3 === w ? (D = 0,
                                    v.push(g),
                                    y = g > y ? g : y,
                                    g = -2 * S,
                                    i = "",
                                    n = !0,
                                    m += 1) : i = L,
                                    l.chars ? (s = l.getCharData(L, _.fStyle, l.getFontByName(t.f).fFamily),
                                    x = n ? 0 : s.w * t.finalSize / 100) : x = l.measureText(i, t.f, t.finalSize),
                                    " " === L ? D += x + S : (g += x + S + D,
                                    D = 0),
                                    h.push({
                                        l: x,
                                        an: x,
                                        add: d,
                                        n: n,
                                        anIndexes: [],
                                        val: i,
                                        line: m,
                                        animatorJustifyOffset: 0
                                    }),
                                    2 == p) {
                                        if (d += x,
                                        "" === i || " " === i || e === r - 1) {
                                            for ("" !== i && " " !== i || (d -= x); f <= e; )
                                                h[f].an = d,
                                                h[f].ind = u,
                                                h[f].extra = x,
                                                f += 1;
                                            u += 1,
                                            d = 0
                                        }
                                    } else if (3 == p) {
                                        if (d += x,
                                        "" === i || e === r - 1) {
                                            for ("" === i && (d -= x); f <= e; )
                                                h[f].an = d,
                                                h[f].ind = u,
                                                h[f].extra = x,
                                                f += 1;
                                            d = 0,
                                            u += 1
                                        }
                                    } else
                                        h[u].ind = u,
                                        h[u].extra = 0,
                                        u += 1;
                                if (t.l = h,
                                y = g > y ? g : y,
                                v.push(g),
                                t.sz)
                                    t.boxWidth = t.sz[0],
                                    t.justifyOffset = 0;
                                else
                                    switch (t.boxWidth = y,
                                    t.j) {
                                    case 1:
                                        t.justifyOffset = -t.boxWidth;
                                        break;
                                    case 2:
                                        t.justifyOffset = -t.boxWidth / 2;
                                        break;
                                    default:
                                        t.justifyOffset = 0
                                    }
                                t.lineWidths = v;
                                var R, I, k, O, F = c.a;
                                o = F.length;
                                var N = [];
                                for (a = 0; a < o; a += 1) {
                                    for ((R = F[a]).a.sc && (t.strokeColorAnim = !0),
                                    R.a.sw && (t.strokeWidthAnim = !0),
                                    (R.a.fc || R.a.fh || R.a.fs || R.a.fb) && (t.fillColorAnim = !0),
                                    O = 0,
                                    k = R.s.b,
                                    e = 0; e < r; e += 1)
                                        (I = h[e]).anIndexes[a] = O,
                                        (1 == k && "" !== I.val || 2 == k && "" !== I.val && " " !== I.val || 3 == k && (I.n || " " == I.val || e == r - 1) || 4 == k && (I.n || e == r - 1)) && (1 === R.s.rn && N.push(O),
                                        O += 1);
                                    c.a[a].s.totalChars = O;
                                    var B, z = -1;
                                    if (1 === R.s.rn)
                                        for (e = 0; e < r; e += 1)
                                            z != (I = h[e]).anIndexes[a] && (z = I.anIndexes[a],
                                            B = N.splice(Math.floor(Math.random() * N.length), 1)[0]),
                                            I.anIndexes[a] = B
                                }
                                t.yOffset = t.finalLineHeight || 1.2 * t.finalSize,
                                t.ls = t.ls || 0,
                                t.ascent = _.ascent * t.finalSize / 100
                            }
                            ,
                            TextProperty.prototype.updateDocumentData = function(t, e) {
                                e = void 0 === e ? this.keysIndex : e;
                                var r = this.copyData({}, this.data.d.k[e].s);
                                r = this.copyData(r, t),
                                this.data.d.k[e].s = r,
                                this.recalculate(e),
                                this.elem.addDynamicProperty(this)
                            }
                            ,
                            TextProperty.prototype.recalculate = function(t) {
                                var e = this.data.d.k[t].s;
                                e.__complete = !1,
                                this.keysIndex = 0,
                                this._isFirstFrame = !0,
                                this.getValue(e)
                            }
                            ,
                            TextProperty.prototype.canResizeFont = function(t) {
                                this.canResize = t,
                                this.recalculate(this.keysIndex),
                                this.elem.addDynamicProperty(this)
                            }
                            ,
                            TextProperty.prototype.setMinimumFontSize = function(t) {
                                this.minimumFontSize = Math.floor(t) || 1,
                                this.recalculate(this.keysIndex),
                                this.elem.addDynamicProperty(this)
                            }
                            ;
                            var TextSelectorProp = function() {
                                var t = Math.max
                                  , e = Math.min
                                  , r = Math.floor;
                                function n(t, e) {
                                    this._currentTextLength = -1,
                                    this.k = !1,
                                    this.data = e,
                                    this.elem = t,
                                    this.comp = t.comp,
                                    this.finalS = 0,
                                    this.finalE = 0,
                                    this.initDynamicPropertyContainer(t),
                                    this.s = PropertyFactory.getProp(t, e.s || {
                                        k: 0
                                    }, 0, 0, this),
                                    this.e = "e"in e ? PropertyFactory.getProp(t, e.e, 0, 0, this) : {
                                        v: 100
                                    },
                                    this.o = PropertyFactory.getProp(t, e.o || {
                                        k: 0
                                    }, 0, 0, this),
                                    this.xe = PropertyFactory.getProp(t, e.xe || {
                                        k: 0
                                    }, 0, 0, this),
                                    this.ne = PropertyFactory.getProp(t, e.ne || {
                                        k: 0
                                    }, 0, 0, this),
                                    this.sm = PropertyFactory.getProp(t, e.sm || {
                                        k: 100
                                    }, 0, 0, this),
                                    this.a = PropertyFactory.getProp(t, e.a, 0, .01, this),
                                    this.dynamicProperties.length || this.getValue()
                                }
                                return n.prototype = {
                                    getMult: function(n) {
                                        this._currentTextLength !== this.elem.textProperty.currentData.l.length && this.getValue();
                                        var i = 0
                                          , a = 0
                                          , o = 1
                                          , s = 1;
                                        this.ne.v > 0 ? i = this.ne.v / 100 : a = -this.ne.v / 100,
                                        this.xe.v > 0 ? o = 1 - this.xe.v / 100 : s = 1 + this.xe.v / 100;
                                        var l = BezierFactory.getBezierEasing(i, a, o, s).get
                                          , c = 0
                                          , h = this.finalS
                                          , u = this.finalE
                                          , p = this.data.sh;
                                        if (2 === p)
                                            c = l(c = u === h ? n >= u ? 1 : 0 : t(0, e(.5 / (u - h) + (n - h) / (u - h), 1)));
                                        else if (3 === p)
                                            c = l(c = u === h ? n >= u ? 0 : 1 : 1 - t(0, e(.5 / (u - h) + (n - h) / (u - h), 1)));
                                        else if (4 === p)
                                            u === h ? c = 0 : (c = t(0, e(.5 / (u - h) + (n - h) / (u - h), 1))) < .5 ? c *= 2 : c = 1 - 2 * (c - .5),
                                            c = l(c);
                                        else if (5 === p) {
                                            if (u === h)
                                                c = 0;
                                            else {
                                                var d = u - h
                                                  , f = -d / 2 + (n = e(t(0, n + .5 - h), u - h))
                                                  , m = d / 2;
                                                c = Math.sqrt(1 - f * f / (m * m))
                                            }
                                            c = l(c)
                                        } else
                                            6 === p ? (u === h ? c = 0 : (n = e(t(0, n + .5 - h), u - h),
                                            c = (1 + Math.cos(Math.PI + 2 * Math.PI * n / (u - h))) / 2),
                                            c = l(c)) : (n >= r(h) && (c = t(0, e(n - h < 0 ? e(u, 1) - (h - n) : u - n, 1))),
                                            c = l(c));
                                        if (100 !== this.sm.v) {
                                            var v = .01 * this.sm.v;
                                            0 === v && (v = 1e-8);
                                            var g = .5 - .5 * v;
                                            c < g ? c = 0 : (c = (c - g) / v) > 1 && (c = 1)
                                        }
                                        return c * this.a.v
                                    },
                                    getValue: function(t) {
                                        this.iterateDynamicProperties(),
                                        this._mdf = t || this._mdf,
                                        this._currentTextLength = this.elem.textProperty.currentData.l.length || 0,
                                        t && 2 === this.data.r && (this.e.v = this._currentTextLength);
                                        var e = 2 === this.data.r ? 1 : 100 / this.data.totalChars
                                          , r = this.o.v / e
                                          , n = this.s.v / e + r
                                          , i = this.e.v / e + r;
                                        if (n > i) {
                                            var a = n;
                                            n = i,
                                            i = a
                                        }
                                        this.finalS = n,
                                        this.finalE = i
                                    }
                                },
                                extendPrototype([DynamicPropertyContainer], n),
                                {
                                    getTextSelectorProp: function(t, e, r) {
                                        return new n(t,e,r)
                                    }
                                }
                            }(), poolFactory = function(t, e, r) {
                                var n = 0
                                  , i = t
                                  , a = createSizedArray(i);
                                return {
                                    newElement: function() {
                                        return n ? a[n -= 1] : e()
                                    },
                                    release: function(t) {
                                        n === i && (a = pooling.double(a),
                                        i *= 2),
                                        r && r(t),
                                        a[n] = t,
                                        n += 1
                                    }
                                }
                            }, pooling = {
                                double: function(t) {
                                    return t.concat(createSizedArray(t.length))
                                }
                            }, pointPool = poolFactory(8, (function() {
                                return createTypedArray("float32", 2)
                            }
                            )), shapePool = (factory = poolFactory(4, (function() {
                                return new ShapePath
                            }
                            ), (function(t) {
                                var e, r = t._length;
                                for (e = 0; e < r; e += 1)
                                    pointPool.release(t.v[e]),
                                    pointPool.release(t.i[e]),
                                    pointPool.release(t.o[e]),
                                    t.v[e] = null,
                                    t.i[e] = null,
                                    t.o[e] = null;
                                t._length = 0,
                                t.c = !1
                            }
                            )),
                            factory.clone = function(t) {
                                var e, r = factory.newElement(), n = void 0 === t._length ? t.v.length : t._length;
                                for (r.setLength(n),
                                r.c = t.c,
                                e = 0; e < n; e += 1)
                                    r.setTripleAt(t.v[e][0], t.v[e][1], t.o[e][0], t.o[e][1], t.i[e][0], t.i[e][1], e);
                                return r
                            }
                            ,
                            factory), factory, shapeCollectionPool = function() {
                                var t = {
                                    newShapeCollection: function() {
                                        return e ? n[e -= 1] : new ShapeCollection
                                    },
                                    release: function(t) {
                                        var i, a = t._length;
                                        for (i = 0; i < a; i += 1)
                                            shapePool.release(t.shapes[i]);
                                        t._length = 0,
                                        e === r && (n = pooling.double(n),
                                        r *= 2),
                                        n[e] = t,
                                        e += 1
                                    }
                                }
                                  , e = 0
                                  , r = 4
                                  , n = createSizedArray(r);
                                return t
                            }(), segmentsLengthPool = poolFactory(8, (function() {
                                return {
                                    lengths: [],
                                    totalLength: 0
                                }
                            }
                            ), (function(t) {
                                var e, r = t.lengths.length;
                                for (e = 0; e < r; e += 1)
                                    bezierLengthPool.release(t.lengths[e]);
                                t.lengths.length = 0
                            }
                            )), bezierLengthPool = poolFactory(8, (function() {
                                return {
                                    addedLength: 0,
                                    percents: createTypedArray("float32", defaultCurveSegments),
                                    lengths: createTypedArray("float32", defaultCurveSegments)
                                }
                            }
                            )), markerParser = function() {
                                function t(t) {
                                    for (var e, r = t.split("\r\n"), n = {}, i = 0, a = 0; a < r.length; a += 1)
                                        2 === (e = r[a].split(":")).length && (n[e[0]] = e[1].trim(),
                                        i += 1);
                                    if (0 === i)
                                        throw new Error;
                                    return n
                                }
                                return function(e) {
                                    for (var r = [], n = 0; n < e.length; n += 1) {
                                        var i = e[n]
                                          , a = {
                                            time: i.tm,
                                            duration: i.dr
                                        };
                                        try {
                                            a.payload = JSON.parse(e[n].cm)
                                        } catch (r) {
                                            try {
                                                a.payload = t(e[n].cm)
                                            } catch (t) {
                                                a.payload = {
                                                    name: e[n]
                                                }
                                            }
                                        }
                                        r.push(a)
                                    }
                                    return r
                                }
                            }();
                            function BaseRenderer() {}
                            function SVGRenderer(t, e) {
                                this.animationItem = t,
                                this.layers = null,
                                this.renderedFrame = -1,
                                this.svgElement = createNS("svg");
                                var r = "";
                                if (e && e.title) {
                                    var n = createNS("title")
                                      , i = createElementID();
                                    n.setAttribute("id", i),
                                    n.textContent = e.title,
                                    this.svgElement.appendChild(n),
                                    r += i
                                }
                                if (e && e.description) {
                                    var a = createNS("desc")
                                      , o = createElementID();
                                    a.setAttribute("id", o),
                                    a.textContent = e.description,
                                    this.svgElement.appendChild(a),
                                    r += " " + o
                                }
                                r && this.svgElement.setAttribute("aria-labelledby", r);
                                var s = createNS("defs");
                                this.svgElement.appendChild(s);
                                var l = createNS("g");
                                this.svgElement.appendChild(l),
                                this.layerElement = l,
                                this.renderConfig = {
                                    preserveAspectRatio: e && e.preserveAspectRatio || "xMidYMid meet",
                                    imagePreserveAspectRatio: e && e.imagePreserveAspectRatio || "xMidYMid slice",
                                    contentVisibility: e && e.contentVisibility || "visible",
                                    progressiveLoad: e && e.progressiveLoad || !1,
                                    hideOnTransparent: !(e && !1 === e.hideOnTransparent),
                                    viewBoxOnly: e && e.viewBoxOnly || !1,
                                    viewBoxSize: e && e.viewBoxSize || !1,
                                    className: e && e.className || "",
                                    id: e && e.id || "",
                                    focusable: e && e.focusable,
                                    filterSize: {
                                        width: e && e.filterSize && e.filterSize.width || "100%",
                                        height: e && e.filterSize && e.filterSize.height || "100%",
                                        x: e && e.filterSize && e.filterSize.x || "0%",
                                        y: e && e.filterSize && e.filterSize.y || "0%"
                                    }
                                },
                                this.globalData = {
                                    _mdf: !1,
                                    frameNum: -1,
                                    defs: s,
                                    renderConfig: this.renderConfig
                                },
                                this.elements = [],
                                this.pendingElements = [],
                                this.destroyed = !1,
                                this.rendererType = "svg"
                            }
                            function CanvasRenderer(t, e) {
                                this.animationItem = t,
                                this.renderConfig = {
                                    clearCanvas: !e || void 0 === e.clearCanvas || e.clearCanvas,
                                    context: e && e.context || null,
                                    progressiveLoad: e && e.progressiveLoad || !1,
                                    preserveAspectRatio: e && e.preserveAspectRatio || "xMidYMid meet",
                                    imagePreserveAspectRatio: e && e.imagePreserveAspectRatio || "xMidYMid slice",
                                    contentVisibility: e && e.contentVisibility || "visible",
                                    className: e && e.className || "",
                                    id: e && e.id || ""
                                },
                                this.renderConfig.dpr = e && e.dpr || 1,
                                this.animationItem.wrapper && (this.renderConfig.dpr = e && e.dpr || window.devicePixelRatio || 1),
                                this.renderedFrame = -1,
                                this.globalData = {
                                    frameNum: -1,
                                    _mdf: !1,
                                    renderConfig: this.renderConfig,
                                    currentGlobalAlpha: -1
                                },
                                this.contextData = new CVContextData,
                                this.elements = [],
                                this.pendingElements = [],
                                this.transformMat = new Matrix,
                                this.completeLayers = !1,
                                this.rendererType = "canvas"
                            }
                            function HybridRenderer(t, e) {
                                this.animationItem = t,
                                this.layers = null,
                                this.renderedFrame = -1,
                                this.renderConfig = {
                                    className: e && e.className || "",
                                    imagePreserveAspectRatio: e && e.imagePreserveAspectRatio || "xMidYMid slice",
                                    hideOnTransparent: !(e && !1 === e.hideOnTransparent),
                                    filterSize: {
                                        width: e && e.filterSize && e.filterSize.width || "400%",
                                        height: e && e.filterSize && e.filterSize.height || "400%",
                                        x: e && e.filterSize && e.filterSize.x || "-100%",
                                        y: e && e.filterSize && e.filterSize.y || "-100%"
                                    }
                                },
                                this.globalData = {
                                    _mdf: !1,
                                    frameNum: -1,
                                    renderConfig: this.renderConfig
                                },
                                this.pendingElements = [],
                                this.elements = [],
                                this.threeDElements = [],
                                this.destroyed = !1,
                                this.camera = null,
                                this.supports3d = !0,
                                this.rendererType = "html"
                            }
                            function MaskElement(t, e, r) {
                                this.data = t,
                                this.element = e,
                                this.globalData = r,
                                this.storedData = [],
                                this.masksProperties = this.data.masksProperties || [],
                                this.maskElement = null;
                                var n, i, a = this.globalData.defs, o = this.masksProperties ? this.masksProperties.length : 0;
                                this.viewData = createSizedArray(o),
                                this.solidPath = "";
                                var s, l, c, h, u, p, d = this.masksProperties, f = 0, m = [], v = createElementID(), g = "clipPath", y = "clip-path";
                                for (n = 0; n < o; n += 1)
                                    if (("a" !== d[n].mode && "n" !== d[n].mode || d[n].inv || 100 !== d[n].o.k || d[n].o.x) && (g = "mask",
                                    y = "mask"),
                                    "s" !== d[n].mode && "i" !== d[n].mode || 0 !== f ? c = null : ((c = createNS("rect")).setAttribute("fill", "#ffffff"),
                                    c.setAttribute("width", this.element.comp.data.w || 0),
                                    c.setAttribute("height", this.element.comp.data.h || 0),
                                    m.push(c)),
                                    i = createNS("path"),
                                    "n" === d[n].mode)
                                        this.viewData[n] = {
                                            op: PropertyFactory.getProp(this.element, d[n].o, 0, .01, this.element),
                                            prop: ShapePropertyFactory.getShapeProp(this.element, d[n], 3),
                                            elem: i,
                                            lastPath: ""
                                        },
                                        a.appendChild(i);
                                    else {
                                        var _;
                                        if (f += 1,
                                        i.setAttribute("fill", "s" === d[n].mode ? "#000000" : "#ffffff"),
                                        i.setAttribute("clip-rule", "nonzero"),
                                        0 !== d[n].x.k ? (g = "mask",
                                        y = "mask",
                                        p = PropertyFactory.getProp(this.element, d[n].x, 0, null, this.element),
                                        _ = createElementID(),
                                        (h = createNS("filter")).setAttribute("id", _),
                                        (u = createNS("feMorphology")).setAttribute("operator", "erode"),
                                        u.setAttribute("in", "SourceGraphic"),
                                        u.setAttribute("radius", "0"),
                                        h.appendChild(u),
                                        a.appendChild(h),
                                        i.setAttribute("stroke", "s" === d[n].mode ? "#000000" : "#ffffff")) : (u = null,
                                        p = null),
                                        this.storedData[n] = {
                                            elem: i,
                                            x: p,
                                            expan: u,
                                            lastPath: "",
                                            lastOperator: "",
                                            filterId: _,
                                            lastRadius: 0
                                        },
                                        "i" === d[n].mode) {
                                            l = m.length;
                                            var x = createNS("g");
                                            for (s = 0; s < l; s += 1)
                                                x.appendChild(m[s]);
                                            var b = createNS("mask");
                                            b.setAttribute("mask-type", "alpha"),
                                            b.setAttribute("id", v + "_" + f),
                                            b.appendChild(i),
                                            a.appendChild(b),
                                            x.setAttribute("mask", "url(" + locationHref + "#" + v + "_" + f + ")"),
                                            m.length = 0,
                                            m.push(x)
                                        } else
                                            m.push(i);
                                        d[n].inv && !this.solidPath && (this.solidPath = this.createLayerSolidPath()),
                                        this.viewData[n] = {
                                            elem: i,
                                            lastPath: "",
                                            op: PropertyFactory.getProp(this.element, d[n].o, 0, .01, this.element),
                                            prop: ShapePropertyFactory.getShapeProp(this.element, d[n], 3),
                                            invRect: c
                                        },
                                        this.viewData[n].prop.k || this.drawPath(d[n], this.viewData[n].prop.v, this.viewData[n])
                                    }
                                for (this.maskElement = createNS(g),
                                o = m.length,
                                n = 0; n < o; n += 1)
                                    this.maskElement.appendChild(m[n]);
                                f > 0 && (this.maskElement.setAttribute("id", v),
                                this.element.maskedElement.setAttribute(y, "url(" + locationHref + "#" + v + ")"),
                                a.appendChild(this.maskElement)),
                                this.viewData.length && this.element.addRenderableComponent(this)
                            }
                            function HierarchyElement() {}
                            function FrameElement() {}
                            function TransformElement() {}
                            function RenderableElement() {}
                            function RenderableDOMElement() {}
                            function ProcessedElement(t, e) {
                                this.elem = t,
                                this.pos = e
                            }
                            function SVGStyleData(t, e) {
                                this.data = t,
                                this.type = t.ty,
                                this.d = "",
                                this.lvl = e,
                                this._mdf = !1,
                                this.closed = !0 === t.hd,
                                this.pElem = createNS("path"),
                                this.msElem = null
                            }
                            function SVGShapeData(t, e, r) {
                                this.caches = [],
                                this.styles = [],
                                this.transformers = t,
                                this.lStr = "",
                                this.sh = r,
                                this.lvl = e,
                                this._isAnimated = !!r.k;
                                for (var n = 0, i = t.length; n < i; ) {
                                    if (t[n].mProps.dynamicProperties.length) {
                                        this._isAnimated = !0;
                                        break
                                    }
                                    n += 1
                                }
                            }
                            function SVGTransformData(t, e, r) {
                                this.transform = {
                                    mProps: t,
                                    op: e,
                                    container: r
                                },
                                this.elements = [],
                                this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length
                            }
                            function SVGStrokeStyleData(t, e, r) {
                                this.initDynamicPropertyContainer(t),
                                this.getValue = this.iterateDynamicProperties,
                                this.o = PropertyFactory.getProp(t, e.o, 0, .01, this),
                                this.w = PropertyFactory.getProp(t, e.w, 0, null, this),
                                this.d = new DashProperty(t,e.d || {},"svg",this),
                                this.c = PropertyFactory.getProp(t, e.c, 1, 255, this),
                                this.style = r,
                                this._isAnimated = !!this._isAnimated
                            }
                            function SVGFillStyleData(t, e, r) {
                                this.initDynamicPropertyContainer(t),
                                this.getValue = this.iterateDynamicProperties,
                                this.o = PropertyFactory.getProp(t, e.o, 0, .01, this),
                                this.c = PropertyFactory.getProp(t, e.c, 1, 255, this),
                                this.style = r
                            }
                            function SVGGradientFillStyleData(t, e, r) {
                                this.initDynamicPropertyContainer(t),
                                this.getValue = this.iterateDynamicProperties,
                                this.initGradientData(t, e, r)
                            }
                            function SVGGradientStrokeStyleData(t, e, r) {
                                this.initDynamicPropertyContainer(t),
                                this.getValue = this.iterateDynamicProperties,
                                this.w = PropertyFactory.getProp(t, e.w, 0, null, this),
                                this.d = new DashProperty(t,e.d || {},"svg",this),
                                this.initGradientData(t, e, r),
                                this._isAnimated = !!this._isAnimated
                            }
                            function ShapeGroupData() {
                                this.it = [],
                                this.prevViewData = [],
                                this.gr = createNS("g")
                            }
                            BaseRenderer.prototype.checkLayers = function(t) {
                                var e, r, n = this.layers.length;
                                for (this.completeLayers = !0,
                                e = n - 1; e >= 0; e -= 1)
                                    this.elements[e] || (r = this.layers[e]).ip - r.st <= t - this.layers[e].st && r.op - r.st > t - this.layers[e].st && this.buildItem(e),
                                    this.completeLayers = !!this.elements[e] && this.completeLayers;
                                this.checkPendingElements()
                            }
                            ,
                            BaseRenderer.prototype.createItem = function(t) {
                                switch (t.ty) {
                                case 2:
                                    return this.createImage(t);
                                case 0:
                                    return this.createComp(t);
                                case 1:
                                    return this.createSolid(t);
                                case 3:
                                default:
                                    return this.createNull(t);
                                case 4:
                                    return this.createShape(t);
                                case 5:
                                    return this.createText(t);
                                case 6:
                                    return this.createAudio(t);
                                case 13:
                                    return this.createCamera(t);
                                case 15:
                                    return this.createFootage(t)
                                }
                            }
                            ,
                            BaseRenderer.prototype.createCamera = function() {
                                throw new Error("You're using a 3d camera. Try the html renderer.")
                            }
                            ,
                            BaseRenderer.prototype.createAudio = function(t) {
                                return new AudioElement(t,this.globalData,this)
                            }
                            ,
                            BaseRenderer.prototype.createFootage = function(t) {
                                return new FootageElement(t,this.globalData,this)
                            }
                            ,
                            BaseRenderer.prototype.buildAllItems = function() {
                                var t, e = this.layers.length;
                                for (t = 0; t < e; t += 1)
                                    this.buildItem(t);
                                this.checkPendingElements()
                            }
                            ,
                            BaseRenderer.prototype.includeLayers = function(t) {
                                var e;
                                this.completeLayers = !1;
                                var r, n = t.length, i = this.layers.length;
                                for (e = 0; e < n; e += 1)
                                    for (r = 0; r < i; ) {
                                        if (this.layers[r].id === t[e].id) {
                                            this.layers[r] = t[e];
                                            break
                                        }
                                        r += 1
                                    }
                            }
                            ,
                            BaseRenderer.prototype.setProjectInterface = function(t) {
                                this.globalData.projectInterface = t
                            }
                            ,
                            BaseRenderer.prototype.initItems = function() {
                                this.globalData.progressiveLoad || this.buildAllItems()
                            }
                            ,
                            BaseRenderer.prototype.buildElementParenting = function(t, e, r) {
                                for (var n = this.elements, i = this.layers, a = 0, o = i.length; a < o; )
                                    i[a].ind == e && (n[a] && !0 !== n[a] ? (r.push(n[a]),
                                    n[a].setAsParent(),
                                    void 0 !== i[a].parent ? this.buildElementParenting(t, i[a].parent, r) : t.setHierarchy(r)) : (this.buildItem(a),
                                    this.addPendingElement(t))),
                                    a += 1
                            }
                            ,
                            BaseRenderer.prototype.addPendingElement = function(t) {
                                this.pendingElements.push(t)
                            }
                            ,
                            BaseRenderer.prototype.searchExtraCompositions = function(t) {
                                var e, r = t.length;
                                for (e = 0; e < r; e += 1)
                                    if (t[e].xt) {
                                        var n = this.createComp(t[e]);
                                        n.initExpressions(),
                                        this.globalData.projectInterface.registerComposition(n)
                                    }
                            }
                            ,
                            BaseRenderer.prototype.setupGlobalData = function(t, e) {
                                this.globalData.fontManager = new FontManager,
                                this.globalData.fontManager.addChars(t.chars),
                                this.globalData.fontManager.addFonts(t.fonts, e),
                                this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem),
                                this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem),
                                this.globalData.imageLoader = this.animationItem.imagePreloader,
                                this.globalData.audioController = this.animationItem.audioController,
                                this.globalData.frameId = 0,
                                this.globalData.frameRate = t.fr,
                                this.globalData.nm = t.nm,
                                this.globalData.compSize = {
                                    w: t.w,
                                    h: t.h
                                }
                            }
                            ,
                            extendPrototype([BaseRenderer], SVGRenderer),
                            SVGRenderer.prototype.createNull = function(t) {
                                return new NullElement(t,this.globalData,this)
                            }
                            ,
                            SVGRenderer.prototype.createShape = function(t) {
                                return new SVGShapeElement(t,this.globalData,this)
                            }
                            ,
                            SVGRenderer.prototype.createText = function(t) {
                                return new SVGTextLottieElement(t,this.globalData,this)
                            }
                            ,
                            SVGRenderer.prototype.createImage = function(t) {
                                return new IImageElement(t,this.globalData,this)
                            }
                            ,
                            SVGRenderer.prototype.createComp = function(t) {
                                return new SVGCompElement(t,this.globalData,this)
                            }
                            ,
                            SVGRenderer.prototype.createSolid = function(t) {
                                return new ISolidElement(t,this.globalData,this)
                            }
                            ,
                            SVGRenderer.prototype.configAnimation = function(t) {
                                this.svgElement.setAttribute("xmlns", "http://www.w3.org/2000/svg"),
                                this.renderConfig.viewBoxSize ? this.svgElement.setAttribute("viewBox", this.renderConfig.viewBoxSize) : this.svgElement.setAttribute("viewBox", "0 0 " + t.w + " " + t.h),
                                this.renderConfig.viewBoxOnly || (this.svgElement.setAttribute("width", t.w),
                                this.svgElement.setAttribute("height", t.h),
                                this.svgElement.style.width = "100%",
                                this.svgElement.style.height = "100%",
                                this.svgElement.style.transform = "translate3d(0,0,0)",
                                this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility),
                                this.renderConfig.className && this.svgElement.setAttribute("class", this.renderConfig.className),
                                this.renderConfig.id && this.svgElement.setAttribute("id", this.renderConfig.id),
                                void 0 !== this.renderConfig.focusable && this.svgElement.setAttribute("focusable", this.renderConfig.focusable),
                                this.svgElement.setAttribute("preserveAspectRatio", this.renderConfig.preserveAspectRatio),
                                this.animationItem.wrapper.appendChild(this.svgElement);
                                var e = this.globalData.defs;
                                this.setupGlobalData(t, e),
                                this.globalData.progressiveLoad = this.renderConfig.progressiveLoad,
                                this.data = t;
                                var r = createNS("clipPath")
                                  , n = createNS("rect");
                                n.setAttribute("width", t.w),
                                n.setAttribute("height", t.h),
                                n.setAttribute("x", 0),
                                n.setAttribute("y", 0);
                                var i = createElementID();
                                r.setAttribute("id", i),
                                r.appendChild(n),
                                this.layerElement.setAttribute("clip-path", "url(" + locationHref + "#" + i + ")"),
                                e.appendChild(r),
                                this.layers = t.layers,
                                this.elements = createSizedArray(t.layers.length)
                            }
                            ,
                            SVGRenderer.prototype.destroy = function() {
                                var t;
                                this.animationItem.wrapper && (this.animationItem.wrapper.innerText = ""),
                                this.layerElement = null,
                                this.globalData.defs = null;
                                var e = this.layers ? this.layers.length : 0;
                                for (t = 0; t < e; t += 1)
                                    this.elements[t] && this.elements[t].destroy();
                                this.elements.length = 0,
                                this.destroyed = !0,
                                this.animationItem = null
                            }
                            ,
                            SVGRenderer.prototype.updateContainerSize = function() {}
                            ,
                            SVGRenderer.prototype.buildItem = function(t) {
                                var e = this.elements;
                                if (!e[t] && 99 !== this.layers[t].ty) {
                                    e[t] = !0;
                                    var r = this.createItem(this.layers[t]);
                                    e[t] = r,
                                    expressionsPlugin && (0 === this.layers[t].ty && this.globalData.projectInterface.registerComposition(r),
                                    r.initExpressions()),
                                    this.appendElementInPos(r, t),
                                    this.layers[t].tt && (this.elements[t - 1] && !0 !== this.elements[t - 1] ? r.setMatte(e[t - 1].layerId) : (this.buildItem(t - 1),
                                    this.addPendingElement(r)))
                                }
                            }
                            ,
                            SVGRenderer.prototype.checkPendingElements = function() {
                                for (; this.pendingElements.length; ) {
                                    var t = this.pendingElements.pop();
                                    if (t.checkParenting(),
                                    t.data.tt)
                                        for (var e = 0, r = this.elements.length; e < r; ) {
                                            if (this.elements[e] === t) {
                                                t.setMatte(this.elements[e - 1].layerId);
                                                break
                                            }
                                            e += 1
                                        }
                                }
                            }
                            ,
                            SVGRenderer.prototype.renderFrame = function(t) {
                                if (this.renderedFrame !== t && !this.destroyed) {
                                    var e;
                                    null === t ? t = this.renderedFrame : this.renderedFrame = t,
                                    this.globalData.frameNum = t,
                                    this.globalData.frameId += 1,
                                    this.globalData.projectInterface.currentFrame = t,
                                    this.globalData._mdf = !1;
                                    var r = this.layers.length;
                                    for (this.completeLayers || this.checkLayers(t),
                                    e = r - 1; e >= 0; e -= 1)
                                        (this.completeLayers || this.elements[e]) && this.elements[e].prepareFrame(t - this.layers[e].st);
                                    if (this.globalData._mdf)
                                        for (e = 0; e < r; e += 1)
                                            (this.completeLayers || this.elements[e]) && this.elements[e].renderFrame()
                                }
                            }
                            ,
                            SVGRenderer.prototype.appendElementInPos = function(t, e) {
                                var r = t.getBaseElement();
                                if (r) {
                                    for (var n, i = 0; i < e; )
                                        this.elements[i] && !0 !== this.elements[i] && this.elements[i].getBaseElement() && (n = this.elements[i].getBaseElement()),
                                        i += 1;
                                    n ? this.layerElement.insertBefore(r, n) : this.layerElement.appendChild(r)
                                }
                            }
                            ,
                            SVGRenderer.prototype.hide = function() {
                                this.layerElement.style.display = "none"
                            }
                            ,
                            SVGRenderer.prototype.show = function() {
                                this.layerElement.style.display = "block"
                            }
                            ,
                            extendPrototype([BaseRenderer], CanvasRenderer),
                            CanvasRenderer.prototype.createShape = function(t) {
                                return new CVShapeElement(t,this.globalData,this)
                            }
                            ,
                            CanvasRenderer.prototype.createText = function(t) {
                                return new CVTextElement(t,this.globalData,this)
                            }
                            ,
                            CanvasRenderer.prototype.createImage = function(t) {
                                return new CVImageElement(t,this.globalData,this)
                            }
                            ,
                            CanvasRenderer.prototype.createComp = function(t) {
                                return new CVCompElement(t,this.globalData,this)
                            }
                            ,
                            CanvasRenderer.prototype.createSolid = function(t) {
                                return new CVSolidElement(t,this.globalData,this)
                            }
                            ,
                            CanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull,
                            CanvasRenderer.prototype.ctxTransform = function(t) {
                                if (1 !== t[0] || 0 !== t[1] || 0 !== t[4] || 1 !== t[5] || 0 !== t[12] || 0 !== t[13])
                                    if (this.renderConfig.clearCanvas) {
                                        this.transformMat.cloneFromProps(t);
                                        var e = this.contextData.cTr.props;
                                        this.transformMat.transform(e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]),
                                        this.contextData.cTr.cloneFromProps(this.transformMat.props);
                                        var r = this.contextData.cTr.props;
                                        this.canvasContext.setTransform(r[0], r[1], r[4], r[5], r[12], r[13])
                                    } else
                                        this.canvasContext.transform(t[0], t[1], t[4], t[5], t[12], t[13])
                            }
                            ,
                            CanvasRenderer.prototype.ctxOpacity = function(t) {
                                if (!this.renderConfig.clearCanvas)
                                    return this.canvasContext.globalAlpha *= t < 0 ? 0 : t,
                                    void (this.globalData.currentGlobalAlpha = this.contextData.cO);
                                this.contextData.cO *= t < 0 ? 0 : t,
                                this.globalData.currentGlobalAlpha !== this.contextData.cO && (this.canvasContext.globalAlpha = this.contextData.cO,
                                this.globalData.currentGlobalAlpha = this.contextData.cO)
                            }
                            ,
                            CanvasRenderer.prototype.reset = function() {
                                this.renderConfig.clearCanvas ? this.contextData.reset() : this.canvasContext.restore()
                            }
                            ,
                            CanvasRenderer.prototype.save = function(t) {
                                if (this.renderConfig.clearCanvas) {
                                    t && this.canvasContext.save();
                                    var e, r = this.contextData.cTr.props;
                                    this.contextData._length <= this.contextData.cArrPos && this.contextData.duplicate();
                                    var n = this.contextData.saved[this.contextData.cArrPos];
                                    for (e = 0; e < 16; e += 1)
                                        n[e] = r[e];
                                    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO,
                                    this.contextData.cArrPos += 1
                                } else
                                    this.canvasContext.save()
                            }
                            ,
                            CanvasRenderer.prototype.restore = function(t) {
                                if (this.renderConfig.clearCanvas) {
                                    t && (this.canvasContext.restore(),
                                    this.globalData.blendMode = "source-over"),
                                    this.contextData.cArrPos -= 1;
                                    var e, r = this.contextData.saved[this.contextData.cArrPos], n = this.contextData.cTr.props;
                                    for (e = 0; e < 16; e += 1)
                                        n[e] = r[e];
                                    this.canvasContext.setTransform(r[0], r[1], r[4], r[5], r[12], r[13]),
                                    r = this.contextData.savedOp[this.contextData.cArrPos],
                                    this.contextData.cO = r,
                                    this.globalData.currentGlobalAlpha !== r && (this.canvasContext.globalAlpha = r,
                                    this.globalData.currentGlobalAlpha = r)
                                } else
                                    this.canvasContext.restore()
                            }
                            ,
                            CanvasRenderer.prototype.configAnimation = function(t) {
                                if (this.animationItem.wrapper) {
                                    this.animationItem.container = createTag("canvas");
                                    var e = this.animationItem.container.style;
                                    e.width = "100%",
                                    e.height = "100%";
                                    var r = "0px 0px 0px";
                                    e.transformOrigin = r,
                                    e.mozTransformOrigin = r,
                                    e.webkitTransformOrigin = r,
                                    e["-webkit-transform"] = r,
                                    e.contentVisibility = this.renderConfig.contentVisibility,
                                    this.animationItem.wrapper.appendChild(this.animationItem.container),
                                    this.canvasContext = this.animationItem.container.getContext("2d"),
                                    this.renderConfig.className && this.animationItem.container.setAttribute("class", this.renderConfig.className),
                                    this.renderConfig.id && this.animationItem.container.setAttribute("id", this.renderConfig.id)
                                } else
                                    this.canvasContext = this.renderConfig.context;
                                this.data = t,
                                this.layers = t.layers,
                                this.transformCanvas = {
                                    w: t.w,
                                    h: t.h,
                                    sx: 0,
                                    sy: 0,
                                    tx: 0,
                                    ty: 0
                                },
                                this.setupGlobalData(t, document.body),
                                this.globalData.canvasContext = this.canvasContext,
                                this.globalData.renderer = this,
                                this.globalData.isDashed = !1,
                                this.globalData.progressiveLoad = this.renderConfig.progressiveLoad,
                                this.globalData.transformCanvas = this.transformCanvas,
                                this.elements = createSizedArray(t.layers.length),
                                this.updateContainerSize()
                            }
                            ,
                            CanvasRenderer.prototype.updateContainerSize = function() {
                                var t, e, r, n;
                                if (this.reset(),
                                this.animationItem.wrapper && this.animationItem.container ? (t = this.animationItem.wrapper.offsetWidth,
                                e = this.animationItem.wrapper.offsetHeight,
                                this.animationItem.container.setAttribute("width", t * this.renderConfig.dpr),
                                this.animationItem.container.setAttribute("height", e * this.renderConfig.dpr)) : (t = this.canvasContext.canvas.width * this.renderConfig.dpr,
                                e = this.canvasContext.canvas.height * this.renderConfig.dpr),
                                -1 !== this.renderConfig.preserveAspectRatio.indexOf("meet") || -1 !== this.renderConfig.preserveAspectRatio.indexOf("slice")) {
                                    var i = this.renderConfig.preserveAspectRatio.split(" ")
                                      , a = i[1] || "meet"
                                      , o = i[0] || "xMidYMid"
                                      , s = o.substr(0, 4)
                                      , l = o.substr(4);
                                    r = t / e,
                                    (n = this.transformCanvas.w / this.transformCanvas.h) > r && "meet" === a || n < r && "slice" === a ? (this.transformCanvas.sx = t / (this.transformCanvas.w / this.renderConfig.dpr),
                                    this.transformCanvas.sy = t / (this.transformCanvas.w / this.renderConfig.dpr)) : (this.transformCanvas.sx = e / (this.transformCanvas.h / this.renderConfig.dpr),
                                    this.transformCanvas.sy = e / (this.transformCanvas.h / this.renderConfig.dpr)),
                                    this.transformCanvas.tx = "xMid" === s && (n < r && "meet" === a || n > r && "slice" === a) ? (t - this.transformCanvas.w * (e / this.transformCanvas.h)) / 2 * this.renderConfig.dpr : "xMax" === s && (n < r && "meet" === a || n > r && "slice" === a) ? (t - this.transformCanvas.w * (e / this.transformCanvas.h)) * this.renderConfig.dpr : 0,
                                    this.transformCanvas.ty = "YMid" === l && (n > r && "meet" === a || n < r && "slice" === a) ? (e - this.transformCanvas.h * (t / this.transformCanvas.w)) / 2 * this.renderConfig.dpr : "YMax" === l && (n > r && "meet" === a || n < r && "slice" === a) ? (e - this.transformCanvas.h * (t / this.transformCanvas.w)) * this.renderConfig.dpr : 0
                                } else
                                    "none" === this.renderConfig.preserveAspectRatio ? (this.transformCanvas.sx = t / (this.transformCanvas.w / this.renderConfig.dpr),
                                    this.transformCanvas.sy = e / (this.transformCanvas.h / this.renderConfig.dpr),
                                    this.transformCanvas.tx = 0,
                                    this.transformCanvas.ty = 0) : (this.transformCanvas.sx = this.renderConfig.dpr,
                                    this.transformCanvas.sy = this.renderConfig.dpr,
                                    this.transformCanvas.tx = 0,
                                    this.transformCanvas.ty = 0);
                                this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1],
                                this.ctxTransform(this.transformCanvas.props),
                                this.canvasContext.beginPath(),
                                this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h),
                                this.canvasContext.closePath(),
                                this.canvasContext.clip(),
                                this.renderFrame(this.renderedFrame, !0)
                            }
                            ,
                            CanvasRenderer.prototype.destroy = function() {
                                var t;
                                for (this.renderConfig.clearCanvas && this.animationItem.wrapper && (this.animationItem.wrapper.innerText = ""),
                                t = (this.layers ? this.layers.length : 0) - 1; t >= 0; t -= 1)
                                    this.elements[t] && this.elements[t].destroy();
                                this.elements.length = 0,
                                this.globalData.canvasContext = null,
                                this.animationItem.container = null,
                                this.destroyed = !0
                            }
                            ,
                            CanvasRenderer.prototype.renderFrame = function(t, e) {
                                if ((this.renderedFrame !== t || !0 !== this.renderConfig.clearCanvas || e) && !this.destroyed && -1 !== t) {
                                    var r;
                                    this.renderedFrame = t,
                                    this.globalData.frameNum = t - this.animationItem._isFirstFrame,
                                    this.globalData.frameId += 1,
                                    this.globalData._mdf = !this.renderConfig.clearCanvas || e,
                                    this.globalData.projectInterface.currentFrame = t;
                                    var n = this.layers.length;
                                    for (this.completeLayers || this.checkLayers(t),
                                    r = 0; r < n; r += 1)
                                        (this.completeLayers || this.elements[r]) && this.elements[r].prepareFrame(t - this.layers[r].st);
                                    if (this.globalData._mdf) {
                                        for (!0 === this.renderConfig.clearCanvas ? this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h) : this.save(),
                                        r = n - 1; r >= 0; r -= 1)
                                            (this.completeLayers || this.elements[r]) && this.elements[r].renderFrame();
                                        !0 !== this.renderConfig.clearCanvas && this.restore()
                                    }
                                }
                            }
                            ,
                            CanvasRenderer.prototype.buildItem = function(t) {
                                var e = this.elements;
                                if (!e[t] && 99 !== this.layers[t].ty) {
                                    var r = this.createItem(this.layers[t], this, this.globalData);
                                    e[t] = r,
                                    r.initExpressions()
                                }
                            }
                            ,
                            CanvasRenderer.prototype.checkPendingElements = function() {
                                for (; this.pendingElements.length; )
                                    this.pendingElements.pop().checkParenting()
                            }
                            ,
                            CanvasRenderer.prototype.hide = function() {
                                this.animationItem.container.style.display = "none"
                            }
                            ,
                            CanvasRenderer.prototype.show = function() {
                                this.animationItem.container.style.display = "block"
                            }
                            ,
                            extendPrototype([BaseRenderer], HybridRenderer),
                            HybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem,
                            HybridRenderer.prototype.checkPendingElements = function() {
                                for (; this.pendingElements.length; )
                                    this.pendingElements.pop().checkParenting()
                            }
                            ,
                            HybridRenderer.prototype.appendElementInPos = function(t, e) {
                                var r = t.getBaseElement();
                                if (r) {
                                    var n = this.layers[e];
                                    if (n.ddd && this.supports3d)
                                        this.addTo3dContainer(r, e);
                                    else if (this.threeDElements)
                                        this.addTo3dContainer(r, e);
                                    else {
                                        for (var i, a, o = 0; o < e; )
                                            this.elements[o] && !0 !== this.elements[o] && this.elements[o].getBaseElement && (a = this.elements[o],
                                            i = (this.layers[o].ddd ? this.getThreeDContainerByPos(o) : a.getBaseElement()) || i),
                                            o += 1;
                                        i ? n.ddd && this.supports3d || this.layerElement.insertBefore(r, i) : n.ddd && this.supports3d || this.layerElement.appendChild(r)
                                    }
                                }
                            }
                            ,
                            HybridRenderer.prototype.createShape = function(t) {
                                return this.supports3d ? new HShapeElement(t,this.globalData,this) : new SVGShapeElement(t,this.globalData,this)
                            }
                            ,
                            HybridRenderer.prototype.createText = function(t) {
                                return this.supports3d ? new HTextElement(t,this.globalData,this) : new SVGTextLottieElement(t,this.globalData,this)
                            }
                            ,
                            HybridRenderer.prototype.createCamera = function(t) {
                                return this.camera = new HCameraElement(t,this.globalData,this),
                                this.camera
                            }
                            ,
                            HybridRenderer.prototype.createImage = function(t) {
                                return this.supports3d ? new HImageElement(t,this.globalData,this) : new IImageElement(t,this.globalData,this)
                            }
                            ,
                            HybridRenderer.prototype.createComp = function(t) {
                                return this.supports3d ? new HCompElement(t,this.globalData,this) : new SVGCompElement(t,this.globalData,this)
                            }
                            ,
                            HybridRenderer.prototype.createSolid = function(t) {
                                return this.supports3d ? new HSolidElement(t,this.globalData,this) : new ISolidElement(t,this.globalData,this)
                            }
                            ,
                            HybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull,
                            HybridRenderer.prototype.getThreeDContainerByPos = function(t) {
                                for (var e = 0, r = this.threeDElements.length; e < r; ) {
                                    if (this.threeDElements[e].startPos <= t && this.threeDElements[e].endPos >= t)
                                        return this.threeDElements[e].perspectiveElem;
                                    e += 1
                                }
                                return null
                            }
                            ,
                            HybridRenderer.prototype.createThreeDContainer = function(t, e) {
                                var r, n, i = createTag("div");
                                styleDiv(i);
                                var a = createTag("div");
                                if (styleDiv(a),
                                "3d" === e) {
                                    (r = i.style).width = this.globalData.compSize.w + "px",
                                    r.height = this.globalData.compSize.h + "px";
                                    var o = "50% 50%";
                                    r.webkitTransformOrigin = o,
                                    r.mozTransformOrigin = o,
                                    r.transformOrigin = o;
                                    var s = "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";
                                    (n = a.style).transform = s,
                                    n.webkitTransform = s
                                }
                                i.appendChild(a);
                                var l = {
                                    container: a,
                                    perspectiveElem: i,
                                    startPos: t,
                                    endPos: t,
                                    type: e
                                };
                                return this.threeDElements.push(l),
                                l
                            }
                            ,
                            HybridRenderer.prototype.build3dContainers = function() {
                                var t, e, r = this.layers.length, n = "";
                                for (t = 0; t < r; t += 1)
                                    this.layers[t].ddd && 3 !== this.layers[t].ty ? ("3d" !== n && (n = "3d",
                                    e = this.createThreeDContainer(t, "3d")),
                                    e.endPos = Math.max(e.endPos, t)) : ("2d" !== n && (n = "2d",
                                    e = this.createThreeDContainer(t, "2d")),
                                    e.endPos = Math.max(e.endPos, t));
                                for (t = (r = this.threeDElements.length) - 1; t >= 0; t -= 1)
                                    this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)
                            }
                            ,
                            HybridRenderer.prototype.addTo3dContainer = function(t, e) {
                                for (var r = 0, n = this.threeDElements.length; r < n; ) {
                                    if (e <= this.threeDElements[r].endPos) {
                                        for (var i, a = this.threeDElements[r].startPos; a < e; )
                                            this.elements[a] && this.elements[a].getBaseElement && (i = this.elements[a].getBaseElement()),
                                            a += 1;
                                        i ? this.threeDElements[r].container.insertBefore(t, i) : this.threeDElements[r].container.appendChild(t);
                                        break
                                    }
                                    r += 1
                                }
                            }
                            ,
                            HybridRenderer.prototype.configAnimation = function(t) {
                                var e = createTag("div")
                                  , r = this.animationItem.wrapper
                                  , n = e.style;
                                n.width = t.w + "px",
                                n.height = t.h + "px",
                                this.resizerElem = e,
                                styleDiv(e),
                                n.transformStyle = "flat",
                                n.mozTransformStyle = "flat",
                                n.webkitTransformStyle = "flat",
                                this.renderConfig.className && e.setAttribute("class", this.renderConfig.className),
                                r.appendChild(e),
                                n.overflow = "hidden";
                                var i = createNS("svg");
                                i.setAttribute("width", "1"),
                                i.setAttribute("height", "1"),
                                styleDiv(i),
                                this.resizerElem.appendChild(i);
                                var a = createNS("defs");
                                i.appendChild(a),
                                this.data = t,
                                this.setupGlobalData(t, i),
                                this.globalData.defs = a,
                                this.layers = t.layers,
                                this.layerElement = this.resizerElem,
                                this.build3dContainers(),
                                this.updateContainerSize()
                            }
                            ,
                            HybridRenderer.prototype.destroy = function() {
                                var t;
                                this.animationItem.wrapper && (this.animationItem.wrapper.innerText = ""),
                                this.animationItem.container = null,
                                this.globalData.defs = null;
                                var e = this.layers ? this.layers.length : 0;
                                for (t = 0; t < e; t += 1)
                                    this.elements[t].destroy();
                                this.elements.length = 0,
                                this.destroyed = !0,
                                this.animationItem = null
                            }
                            ,
                            HybridRenderer.prototype.updateContainerSize = function() {
                                var t, e, r, n, i = this.animationItem.wrapper.offsetWidth, a = this.animationItem.wrapper.offsetHeight, o = i / a;
                                this.globalData.compSize.w / this.globalData.compSize.h > o ? (t = i / this.globalData.compSize.w,
                                e = i / this.globalData.compSize.w,
                                r = 0,
                                n = (a - this.globalData.compSize.h * (i / this.globalData.compSize.w)) / 2) : (t = a / this.globalData.compSize.h,
                                e = a / this.globalData.compSize.h,
                                r = (i - this.globalData.compSize.w * (a / this.globalData.compSize.h)) / 2,
                                n = 0);
                                var s = this.resizerElem.style;
                                s.webkitTransform = "matrix3d(" + t + ",0,0,0,0," + e + ",0,0,0,0,1,0," + r + "," + n + ",0,1)",
                                s.transform = s.webkitTransform
                            }
                            ,
                            HybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame,
                            HybridRenderer.prototype.hide = function() {
                                this.resizerElem.style.display = "none"
                            }
                            ,
                            HybridRenderer.prototype.show = function() {
                                this.resizerElem.style.display = "block"
                            }
                            ,
                            HybridRenderer.prototype.initItems = function() {
                                if (this.buildAllItems(),
                                this.camera)
                                    this.camera.setup();
                                else {
                                    var t, e = this.globalData.compSize.w, r = this.globalData.compSize.h, n = this.threeDElements.length;
                                    for (t = 0; t < n; t += 1) {
                                        var i = this.threeDElements[t].perspectiveElem.style;
                                        i.webkitPerspective = Math.sqrt(Math.pow(e, 2) + Math.pow(r, 2)) + "px",
                                        i.perspective = i.webkitPerspective
                                    }
                                }
                            }
                            ,
                            HybridRenderer.prototype.searchExtraCompositions = function(t) {
                                var e, r = t.length, n = createTag("div");
                                for (e = 0; e < r; e += 1)
                                    if (t[e].xt) {
                                        var i = this.createComp(t[e], n, this.globalData.comp, null);
                                        i.initExpressions(),
                                        this.globalData.projectInterface.registerComposition(i)
                                    }
                            }
                            ,
                            MaskElement.prototype.getMaskProperty = function(t) {
                                return this.viewData[t].prop
                            }
                            ,
                            MaskElement.prototype.renderFrame = function(t) {
                                var e, r = this.element.finalTransform.mat, n = this.masksProperties.length;
                                for (e = 0; e < n; e += 1)
                                    if ((this.viewData[e].prop._mdf || t) && this.drawPath(this.masksProperties[e], this.viewData[e].prop.v, this.viewData[e]),
                                    (this.viewData[e].op._mdf || t) && this.viewData[e].elem.setAttribute("fill-opacity", this.viewData[e].op.v),
                                    "n" !== this.masksProperties[e].mode && (this.viewData[e].invRect && (this.element.finalTransform.mProp._mdf || t) && this.viewData[e].invRect.setAttribute("transform", r.getInverseMatrix().to2dCSS()),
                                    this.storedData[e].x && (this.storedData[e].x._mdf || t))) {
                                        var i = this.storedData[e].expan;
                                        this.storedData[e].x.v < 0 ? ("erode" !== this.storedData[e].lastOperator && (this.storedData[e].lastOperator = "erode",
                                        this.storedData[e].elem.setAttribute("filter", "url(" + locationHref + "#" + this.storedData[e].filterId + ")")),
                                        i.setAttribute("radius", -this.storedData[e].x.v)) : ("dilate" !== this.storedData[e].lastOperator && (this.storedData[e].lastOperator = "dilate",
                                        this.storedData[e].elem.setAttribute("filter", null)),
                                        this.storedData[e].elem.setAttribute("stroke-width", 2 * this.storedData[e].x.v))
                                    }
                            }
                            ,
                            MaskElement.prototype.getMaskelement = function() {
                                return this.maskElement
                            }
                            ,
                            MaskElement.prototype.createLayerSolidPath = function() {
                                var t = "M0,0 ";
                                return t += " h" + this.globalData.compSize.w,
                                t += " v" + this.globalData.compSize.h,
                                (t += " h-" + this.globalData.compSize.w) + " v-" + this.globalData.compSize.h + " "
                            }
                            ,
                            MaskElement.prototype.drawPath = function(t, e, r) {
                                var n, i, a = " M" + e.v[0][0] + "," + e.v[0][1];
                                for (i = e._length,
                                n = 1; n < i; n += 1)
                                    a += " C" + e.o[n - 1][0] + "," + e.o[n - 1][1] + " " + e.i[n][0] + "," + e.i[n][1] + " " + e.v[n][0] + "," + e.v[n][1];
                                if (e.c && i > 1 && (a += " C" + e.o[n - 1][0] + "," + e.o[n - 1][1] + " " + e.i[0][0] + "," + e.i[0][1] + " " + e.v[0][0] + "," + e.v[0][1]),
                                r.lastPath !== a) {
                                    var o = "";
                                    r.elem && (e.c && (o = t.inv ? this.solidPath + a : a),
                                    r.elem.setAttribute("d", o)),
                                    r.lastPath = a
                                }
                            }
                            ,
                            MaskElement.prototype.destroy = function() {
                                this.element = null,
                                this.globalData = null,
                                this.maskElement = null,
                                this.data = null,
                                this.masksProperties = null
                            }
                            ,
                            HierarchyElement.prototype = {
                                initHierarchy: function() {
                                    this.hierarchy = [],
                                    this._isParent = !1,
                                    this.checkParenting()
                                },
                                setHierarchy: function(t) {
                                    this.hierarchy = t
                                },
                                setAsParent: function() {
                                    this._isParent = !0
                                },
                                checkParenting: function() {
                                    void 0 !== this.data.parent && this.comp.buildElementParenting(this, this.data.parent, [])
                                }
                            },
                            FrameElement.prototype = {
                                initFrame: function() {
                                    this._isFirstFrame = !1,
                                    this.dynamicProperties = [],
                                    this._mdf = !1
                                },
                                prepareProperties: function(t, e) {
                                    var r, n = this.dynamicProperties.length;
                                    for (r = 0; r < n; r += 1)
                                        (e || this._isParent && "transform" === this.dynamicProperties[r].propType) && (this.dynamicProperties[r].getValue(),
                                        this.dynamicProperties[r]._mdf && (this.globalData._mdf = !0,
                                        this._mdf = !0))
                                },
                                addDynamicProperty: function(t) {
                                    -1 === this.dynamicProperties.indexOf(t) && this.dynamicProperties.push(t)
                                }
                            },
                            TransformElement.prototype = {
                                initTransform: function() {
                                    this.finalTransform = {
                                        mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {
                                            o: 0
                                        },
                                        _matMdf: !1,
                                        _opMdf: !1,
                                        mat: new Matrix
                                    },
                                    this.data.ao && (this.finalTransform.mProp.autoOriented = !0),
                                    this.data.ty
                                },
                                renderTransform: function() {
                                    if (this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame,
                                    this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame,
                                    this.hierarchy) {
                                        var t, e = this.finalTransform.mat, r = 0, n = this.hierarchy.length;
                                        if (!this.finalTransform._matMdf)
                                            for (; r < n; ) {
                                                if (this.hierarchy[r].finalTransform.mProp._mdf) {
                                                    this.finalTransform._matMdf = !0;
                                                    break
                                                }
                                                r += 1
                                            }
                                        if (this.finalTransform._matMdf)
                                            for (t = this.finalTransform.mProp.v.props,
                                            e.cloneFromProps(t),
                                            r = 0; r < n; r += 1)
                                                t = this.hierarchy[r].finalTransform.mProp.v.props,
                                                e.transform(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15])
                                    }
                                },
                                globalToLocal: function(t) {
                                    var e = [];
                                    e.push(this.finalTransform);
                                    for (var r, n = !0, i = this.comp; n; )
                                        i.finalTransform ? (i.data.hasMask && e.splice(0, 0, i.finalTransform),
                                        i = i.comp) : n = !1;
                                    var a, o = e.length;
                                    for (r = 0; r < o; r += 1)
                                        a = e[r].mat.applyToPointArray(0, 0, 0),
                                        t = [t[0] - a[0], t[1] - a[1], 0];
                                    return t
                                },
                                mHelper: new Matrix
                            },
                            RenderableElement.prototype = {
                                initRenderable: function() {
                                    this.isInRange = !1,
                                    this.hidden = !1,
                                    this.isTransparent = !1,
                                    this.renderableComponents = []
                                },
                                addRenderableComponent: function(t) {
                                    -1 === this.renderableComponents.indexOf(t) && this.renderableComponents.push(t)
                                },
                                removeRenderableComponent: function(t) {
                                    -1 !== this.renderableComponents.indexOf(t) && this.renderableComponents.splice(this.renderableComponents.indexOf(t), 1)
                                },
                                prepareRenderableFrame: function(t) {
                                    this.checkLayerLimits(t)
                                },
                                checkTransparency: function() {
                                    this.finalTransform.mProp.o.v <= 0 ? !this.isTransparent && this.globalData.renderConfig.hideOnTransparent && (this.isTransparent = !0,
                                    this.hide()) : this.isTransparent && (this.isTransparent = !1,
                                    this.show())
                                },
                                checkLayerLimits: function(t) {
                                    this.data.ip - this.data.st <= t && this.data.op - this.data.st > t ? !0 !== this.isInRange && (this.globalData._mdf = !0,
                                    this._mdf = !0,
                                    this.isInRange = !0,
                                    this.show()) : !1 !== this.isInRange && (this.globalData._mdf = !0,
                                    this.isInRange = !1,
                                    this.hide())
                                },
                                renderRenderable: function() {
                                    var t, e = this.renderableComponents.length;
                                    for (t = 0; t < e; t += 1)
                                        this.renderableComponents[t].renderFrame(this._isFirstFrame)
                                },
                                sourceRectAtTime: function() {
                                    return {
                                        top: 0,
                                        left: 0,
                                        width: 100,
                                        height: 100
                                    }
                                },
                                getLayerSize: function() {
                                    return 5 === this.data.ty ? {
                                        w: this.data.textData.width,
                                        h: this.data.textData.height
                                    } : {
                                        w: this.data.width,
                                        h: this.data.height
                                    }
                                }
                            },
                            extendPrototype([RenderableElement, createProxyFunction({
                                initElement: function(t, e, r) {
                                    this.initFrame(),
                                    this.initBaseData(t, e, r),
                                    this.initTransform(t, e, r),
                                    this.initHierarchy(),
                                    this.initRenderable(),
                                    this.initRendererElement(),
                                    this.createContainerElements(),
                                    this.createRenderableComponents(),
                                    this.createContent(),
                                    this.hide()
                                },
                                hide: function() {
                                    this.hidden || this.isInRange && !this.isTransparent || ((this.baseElement || this.layerElement).style.display = "none",
                                    this.hidden = !0)
                                },
                                show: function() {
                                    this.isInRange && !this.isTransparent && (this.data.hd || ((this.baseElement || this.layerElement).style.display = "block"),
                                    this.hidden = !1,
                                    this._isFirstFrame = !0)
                                },
                                renderFrame: function() {
                                    this.data.hd || this.hidden || (this.renderTransform(),
                                    this.renderRenderable(),
                                    this.renderElement(),
                                    this.renderInnerContent(),
                                    this._isFirstFrame && (this._isFirstFrame = !1))
                                },
                                renderInnerContent: function() {},
                                prepareFrame: function(t) {
                                    this._mdf = !1,
                                    this.prepareRenderableFrame(t),
                                    this.prepareProperties(t, this.isInRange),
                                    this.checkTransparency()
                                },
                                destroy: function() {
                                    this.innerElem = null,
                                    this.destroyBaseElement()
                                }
                            })], RenderableDOMElement),
                            SVGStyleData.prototype.reset = function() {
                                this.d = "",
                                this._mdf = !1
                            }
                            ,
                            SVGShapeData.prototype.setAsAnimated = function() {
                                this._isAnimated = !0
                            }
                            ,
                            extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData),
                            extendPrototype([DynamicPropertyContainer], SVGFillStyleData),
                            SVGGradientFillStyleData.prototype.initGradientData = function(t, e, r) {
                                this.o = PropertyFactory.getProp(t, e.o, 0, .01, this),
                                this.s = PropertyFactory.getProp(t, e.s, 1, null, this),
                                this.e = PropertyFactory.getProp(t, e.e, 1, null, this),
                                this.h = PropertyFactory.getProp(t, e.h || {
                                    k: 0
                                }, 0, .01, this),
                                this.a = PropertyFactory.getProp(t, e.a || {
                                    k: 0
                                }, 0, degToRads, this),
                                this.g = new GradientProperty(t,e.g,this),
                                this.style = r,
                                this.stops = [],
                                this.setGradientData(r.pElem, e),
                                this.setGradientOpacity(e, r),
                                this._isAnimated = !!this._isAnimated
                            }
                            ,
                            SVGGradientFillStyleData.prototype.setGradientData = function(t, e) {
                                var r = createElementID()
                                  , n = createNS(1 === e.t ? "linearGradient" : "radialGradient");
                                n.setAttribute("id", r),
                                n.setAttribute("spreadMethod", "pad"),
                                n.setAttribute("gradientUnits", "userSpaceOnUse");
                                var i, a, o, s = [];
                                for (o = 4 * e.g.p,
                                a = 0; a < o; a += 4)
                                    i = createNS("stop"),
                                    n.appendChild(i),
                                    s.push(i);
                                t.setAttribute("gf" === e.ty ? "fill" : "stroke", "url(" + locationHref + "#" + r + ")"),
                                this.gf = n,
                                this.cst = s
                            }
                            ,
                            SVGGradientFillStyleData.prototype.setGradientOpacity = function(t, e) {
                                if (this.g._hasOpacity && !this.g._collapsable) {
                                    var r, n, i, a = createNS("mask"), o = createNS("path");
                                    a.appendChild(o);
                                    var s = createElementID()
                                      , l = createElementID();
                                    a.setAttribute("id", l);
                                    var c = createNS(1 === t.t ? "linearGradient" : "radialGradient");
                                    c.setAttribute("id", s),
                                    c.setAttribute("spreadMethod", "pad"),
                                    c.setAttribute("gradientUnits", "userSpaceOnUse"),
                                    i = t.g.k.k[0].s ? t.g.k.k[0].s.length : t.g.k.k.length;
                                    var h = this.stops;
                                    for (n = 4 * t.g.p; n < i; n += 2)
                                        (r = createNS("stop")).setAttribute("stop-color", "rgb(255,255,255)"),
                                        c.appendChild(r),
                                        h.push(r);
                                    o.setAttribute("gf" === t.ty ? "fill" : "stroke", "url(" + locationHref + "#" + s + ")"),
                                    "gs" === t.ty && (o.setAttribute("stroke-linecap", lineCapEnum[t.lc || 2]),
                                    o.setAttribute("stroke-linejoin", lineJoinEnum[t.lj || 2]),
                                    1 === t.lj && o.setAttribute("stroke-miterlimit", t.ml)),
                                    this.of = c,
                                    this.ms = a,
                                    this.ost = h,
                                    this.maskId = l,
                                    e.msElem = o
                                }
                            }
                            ,
                            extendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData),
                            extendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);
                            var SVGElementsRenderer = function() {
                                var t = new Matrix
                                  , e = new Matrix;
                                function r(t, e, r) {
                                    (r || e.transform.op._mdf) && e.transform.container.setAttribute("opacity", e.transform.op.v),
                                    (r || e.transform.mProps._mdf) && e.transform.container.setAttribute("transform", e.transform.mProps.v.to2dCSS())
                                }
                                function n(r, n, i) {
                                    var a, o, s, l, c, h, u, p, d, f, m, v = n.styles.length, g = n.lvl;
                                    for (h = 0; h < v; h += 1) {
                                        if (l = n.sh._mdf || i,
                                        n.styles[h].lvl < g) {
                                            for (p = e.reset(),
                                            f = g - n.styles[h].lvl,
                                            m = n.transformers.length - 1; !l && f > 0; )
                                                l = n.transformers[m].mProps._mdf || l,
                                                f -= 1,
                                                m -= 1;
                                            if (l)
                                                for (f = g - n.styles[h].lvl,
                                                m = n.transformers.length - 1; f > 0; )
                                                    d = n.transformers[m].mProps.v.props,
                                                    p.transform(d[0], d[1], d[2], d[3], d[4], d[5], d[6], d[7], d[8], d[9], d[10], d[11], d[12], d[13], d[14], d[15]),
                                                    f -= 1,
                                                    m -= 1
                                        } else
                                            p = t;
                                        if (o = (u = n.sh.paths)._length,
                                        l) {
                                            for (s = "",
                                            a = 0; a < o; a += 1)
                                                (c = u.shapes[a]) && c._length && (s += buildShapeString(c, c._length, c.c, p));
                                            n.caches[h] = s
                                        } else
                                            s = n.caches[h];
                                        n.styles[h].d += !0 === r.hd ? "" : s,
                                        n.styles[h]._mdf = l || n.styles[h]._mdf
                                    }
                                }
                                function i(t, e, r) {
                                    var n = e.style;
                                    (e.c._mdf || r) && n.pElem.setAttribute("fill", "rgb(" + bmFloor(e.c.v[0]) + "," + bmFloor(e.c.v[1]) + "," + bmFloor(e.c.v[2]) + ")"),
                                    (e.o._mdf || r) && n.pElem.setAttribute("fill-opacity", e.o.v)
                                }
                                function a(t, e, r) {
                                    o(t, e, r),
                                    s(0, e, r)
                                }
                                function o(t, e, r) {
                                    var n, i, a, o, s, l = e.gf, c = e.g._hasOpacity, h = e.s.v, u = e.e.v;
                                    if (e.o._mdf || r) {
                                        var p = "gf" === t.ty ? "fill-opacity" : "stroke-opacity";
                                        e.style.pElem.setAttribute(p, e.o.v)
                                    }
                                    if (e.s._mdf || r) {
                                        var d = 1 === t.t ? "x1" : "cx"
                                          , f = "x1" === d ? "y1" : "cy";
                                        l.setAttribute(d, h[0]),
                                        l.setAttribute(f, h[1]),
                                        c && !e.g._collapsable && (e.of.setAttribute(d, h[0]),
                                        e.of.setAttribute(f, h[1]))
                                    }
                                    if (e.g._cmdf || r) {
                                        n = e.cst;
                                        var m = e.g.c;
                                        for (a = n.length,
                                        i = 0; i < a; i += 1)
                                            (o = n[i]).setAttribute("offset", m[4 * i] + "%"),
                                            o.setAttribute("stop-color", "rgb(" + m[4 * i + 1] + "," + m[4 * i + 2] + "," + m[4 * i + 3] + ")")
                                    }
                                    if (c && (e.g._omdf || r)) {
                                        var v = e.g.o;
                                        for (a = (n = e.g._collapsable ? e.cst : e.ost).length,
                                        i = 0; i < a; i += 1)
                                            o = n[i],
                                            e.g._collapsable || o.setAttribute("offset", v[2 * i] + "%"),
                                            o.setAttribute("stop-opacity", v[2 * i + 1])
                                    }
                                    if (1 === t.t)
                                        (e.e._mdf || r) && (l.setAttribute("x2", u[0]),
                                        l.setAttribute("y2", u[1]),
                                        c && !e.g._collapsable && (e.of.setAttribute("x2", u[0]),
                                        e.of.setAttribute("y2", u[1])));
                                    else if ((e.s._mdf || e.e._mdf || r) && (s = Math.sqrt(Math.pow(h[0] - u[0], 2) + Math.pow(h[1] - u[1], 2)),
                                    l.setAttribute("r", s),
                                    c && !e.g._collapsable && e.of.setAttribute("r", s)),
                                    e.e._mdf || e.h._mdf || e.a._mdf || r) {
                                        s || (s = Math.sqrt(Math.pow(h[0] - u[0], 2) + Math.pow(h[1] - u[1], 2)));
                                        var g = Math.atan2(u[1] - h[1], u[0] - h[0])
                                          , y = e.h.v;
                                        y >= 1 ? y = .99 : y <= -1 && (y = -.99);
                                        var _ = s * y
                                          , x = Math.cos(g + e.a.v) * _ + h[0]
                                          , b = Math.sin(g + e.a.v) * _ + h[1];
                                        l.setAttribute("fx", x),
                                        l.setAttribute("fy", b),
                                        c && !e.g._collapsable && (e.of.setAttribute("fx", x),
                                        e.of.setAttribute("fy", b))
                                    }
                                }
                                function s(t, e, r) {
                                    var n = e.style
                                      , i = e.d;
                                    i && (i._mdf || r) && i.dashStr && (n.pElem.setAttribute("stroke-dasharray", i.dashStr),
                                    n.pElem.setAttribute("stroke-dashoffset", i.dashoffset[0])),
                                    e.c && (e.c._mdf || r) && n.pElem.setAttribute("stroke", "rgb(" + bmFloor(e.c.v[0]) + "," + bmFloor(e.c.v[1]) + "," + bmFloor(e.c.v[2]) + ")"),
                                    (e.o._mdf || r) && n.pElem.setAttribute("stroke-opacity", e.o.v),
                                    (e.w._mdf || r) && (n.pElem.setAttribute("stroke-width", e.w.v),
                                    n.msElem && n.msElem.setAttribute("stroke-width", e.w.v))
                                }
                                return {
                                    createRenderFunction: function(t) {
                                        switch (t.ty) {
                                        case "fl":
                                            return i;
                                        case "gf":
                                            return o;
                                        case "gs":
                                            return a;
                                        case "st":
                                            return s;
                                        case "sh":
                                        case "el":
                                        case "rc":
                                        case "sr":
                                            return n;
                                        case "tr":
                                            return r;
                                        default:
                                            return null
                                        }
                                    }
                                }
                            }();
                            function ShapeTransformManager() {
                                this.sequences = {},
                                this.sequenceList = [],
                                this.transform_key_count = 0
                            }
                            function CVShapeData(t, e, r, n) {
                                this.styledShapes = [],
                                this.tr = [0, 0, 0, 0, 0, 0];
                                var i, a = 4;
                                "rc" === e.ty ? a = 5 : "el" === e.ty ? a = 6 : "sr" === e.ty && (a = 7),
                                this.sh = ShapePropertyFactory.getShapeProp(t, e, a, t);
                                var o, s = r.length;
                                for (i = 0; i < s; i += 1)
                                    r[i].closed || (o = {
                                        transforms: n.addTransformSequence(r[i].transforms),
                                        trNodes: []
                                    },
                                    this.styledShapes.push(o),
                                    r[i].elements.push(o))
                            }
                            function BaseElement() {}
                            function NullElement(t, e, r) {
                                this.initFrame(),
                                this.initBaseData(t, e, r),
                                this.initFrame(),
                                this.initTransform(t, e, r),
                                this.initHierarchy()
                            }
                            function SVGBaseElement() {}
                            function IShapeElement() {}
                            function ITextElement() {}
                            function ICompElement() {}
                            function IImageElement(t, e, r) {
                                this.assetData = e.getAssetData(t.refId),
                                this.initElement(t, e, r),
                                this.sourceRect = {
                                    top: 0,
                                    left: 0,
                                    width: this.assetData.w,
                                    height: this.assetData.h
                                }
                            }
                            function ISolidElement(t, e, r) {
                                this.initElement(t, e, r)
                            }
                            function AudioElement(t, e, r) {
                                this.initFrame(),
                                this.initRenderable(),
                                this.assetData = e.getAssetData(t.refId),
                                this.initBaseData(t, e, r),
                                this._isPlaying = !1,
                                this._canPlay = !1;
                                var n = this.globalData.getAssetsPath(this.assetData);
                                this.audio = this.globalData.audioController.createAudio(n),
                                this._currentTime = 0,
                                this.globalData.audioController.addAudio(this),
                                this.tm = t.tm ? PropertyFactory.getProp(this, t.tm, 0, e.frameRate, this) : {
                                    _placeholder: !0
                                }
                            }
                            function FootageElement(t, e, r) {
                                this.initFrame(),
                                this.initRenderable(),
                                this.assetData = e.getAssetData(t.refId),
                                this.footageData = e.imageLoader.getAsset(this.assetData),
                                this.initBaseData(t, e, r)
                            }
                            function SVGCompElement(t, e, r) {
                                this.layers = t.layers,
                                this.supports3d = !0,
                                this.completeLayers = !1,
                                this.pendingElements = [],
                                this.elements = this.layers ? createSizedArray(this.layers.length) : [],
                                this.initElement(t, e, r),
                                this.tm = t.tm ? PropertyFactory.getProp(this, t.tm, 0, e.frameRate, this) : {
                                    _placeholder: !0
                                }
                            }
                            function SVGTextLottieElement(t, e, r) {
                                this.textSpans = [],
                                this.renderType = "svg",
                                this.initElement(t, e, r)
                            }
                            function SVGShapeElement(t, e, r) {
                                this.shapes = [],
                                this.shapesData = t.shapes,
                                this.stylesList = [],
                                this.shapeModifiers = [],
                                this.itemsData = [],
                                this.processedElements = [],
                                this.animatedContents = [],
                                this.initElement(t, e, r),
                                this.prevViewData = []
                            }
                            function SVGTintFilter(t, e) {
                                this.filterManager = e;
                                var r = createNS("feColorMatrix");
                                if (r.setAttribute("type", "matrix"),
                                r.setAttribute("color-interpolation-filters", "linearRGB"),
                                r.setAttribute("values", "0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),
                                r.setAttribute("result", "f1"),
                                t.appendChild(r),
                                (r = createNS("feColorMatrix")).setAttribute("type", "matrix"),
                                r.setAttribute("color-interpolation-filters", "sRGB"),
                                r.setAttribute("values", "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),
                                r.setAttribute("result", "f2"),
                                t.appendChild(r),
                                this.matrixFilter = r,
                                100 !== e.effectElements[2].p.v || e.effectElements[2].p.k) {
                                    var n, i = createNS("feMerge");
                                    t.appendChild(i),
                                    (n = createNS("feMergeNode")).setAttribute("in", "SourceGraphic"),
                                    i.appendChild(n),
                                    (n = createNS("feMergeNode")).setAttribute("in", "f2"),
                                    i.appendChild(n)
                                }
                            }
                            function SVGFillFilter(t, e) {
                                this.filterManager = e;
                                var r = createNS("feColorMatrix");
                                r.setAttribute("type", "matrix"),
                                r.setAttribute("color-interpolation-filters", "sRGB"),
                                r.setAttribute("values", "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),
                                t.appendChild(r),
                                this.matrixFilter = r
                            }
                            function SVGGaussianBlurEffect(t, e) {
                                t.setAttribute("x", "-100%"),
                                t.setAttribute("y", "-100%"),
                                t.setAttribute("width", "300%"),
                                t.setAttribute("height", "300%"),
                                this.filterManager = e;
                                var r = createNS("feGaussianBlur");
                                t.appendChild(r),
                                this.feGaussianBlur = r
                            }
                            function SVGStrokeEffect(t, e) {
                                this.initialized = !1,
                                this.filterManager = e,
                                this.elem = t,
                                this.paths = []
                            }
                            function SVGTritoneFilter(t, e) {
                                this.filterManager = e;
                                var r = createNS("feColorMatrix");
                                r.setAttribute("type", "matrix"),
                                r.setAttribute("color-interpolation-filters", "linearRGB"),
                                r.setAttribute("values", "0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),
                                r.setAttribute("result", "f1"),
                                t.appendChild(r);
                                var n = createNS("feComponentTransfer");
                                n.setAttribute("color-interpolation-filters", "sRGB"),
                                t.appendChild(n),
                                this.matrixFilter = n;
                                var i = createNS("feFuncR");
                                i.setAttribute("type", "table"),
                                n.appendChild(i),
                                this.feFuncR = i;
                                var a = createNS("feFuncG");
                                a.setAttribute("type", "table"),
                                n.appendChild(a),
                                this.feFuncG = a;
                                var o = createNS("feFuncB");
                                o.setAttribute("type", "table"),
                                n.appendChild(o),
                                this.feFuncB = o
                            }
                            function SVGProLevelsFilter(t, e) {
                                this.filterManager = e;
                                var r = this.filterManager.effectElements
                                  , n = createNS("feComponentTransfer");
                                (r[10].p.k || 0 !== r[10].p.v || r[11].p.k || 1 !== r[11].p.v || r[12].p.k || 1 !== r[12].p.v || r[13].p.k || 0 !== r[13].p.v || r[14].p.k || 1 !== r[14].p.v) && (this.feFuncR = this.createFeFunc("feFuncR", n)),
                                (r[17].p.k || 0 !== r[17].p.v || r[18].p.k || 1 !== r[18].p.v || r[19].p.k || 1 !== r[19].p.v || r[20].p.k || 0 !== r[20].p.v || r[21].p.k || 1 !== r[21].p.v) && (this.feFuncG = this.createFeFunc("feFuncG", n)),
                                (r[24].p.k || 0 !== r[24].p.v || r[25].p.k || 1 !== r[25].p.v || r[26].p.k || 1 !== r[26].p.v || r[27].p.k || 0 !== r[27].p.v || r[28].p.k || 1 !== r[28].p.v) && (this.feFuncB = this.createFeFunc("feFuncB", n)),
                                (r[31].p.k || 0 !== r[31].p.v || r[32].p.k || 1 !== r[32].p.v || r[33].p.k || 1 !== r[33].p.v || r[34].p.k || 0 !== r[34].p.v || r[35].p.k || 1 !== r[35].p.v) && (this.feFuncA = this.createFeFunc("feFuncA", n)),
                                (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) && (n.setAttribute("color-interpolation-filters", "sRGB"),
                                t.appendChild(n),
                                n = createNS("feComponentTransfer")),
                                (r[3].p.k || 0 !== r[3].p.v || r[4].p.k || 1 !== r[4].p.v || r[5].p.k || 1 !== r[5].p.v || r[6].p.k || 0 !== r[6].p.v || r[7].p.k || 1 !== r[7].p.v) && (n.setAttribute("color-interpolation-filters", "sRGB"),
                                t.appendChild(n),
                                this.feFuncRComposed = this.createFeFunc("feFuncR", n),
                                this.feFuncGComposed = this.createFeFunc("feFuncG", n),
                                this.feFuncBComposed = this.createFeFunc("feFuncB", n))
                            }
                            function SVGDropShadowEffect(t, e) {
                                var r = e.container.globalData.renderConfig.filterSize;
                                t.setAttribute("x", r.x),
                                t.setAttribute("y", r.y),
                                t.setAttribute("width", r.width),
                                t.setAttribute("height", r.height),
                                this.filterManager = e;
                                var n = createNS("feGaussianBlur");
                                n.setAttribute("in", "SourceAlpha"),
                                n.setAttribute("result", "drop_shadow_1"),
                                n.setAttribute("stdDeviation", "0"),
                                this.feGaussianBlur = n,
                                t.appendChild(n);
                                var i = createNS("feOffset");
                                i.setAttribute("dx", "25"),
                                i.setAttribute("dy", "0"),
                                i.setAttribute("in", "drop_shadow_1"),
                                i.setAttribute("result", "drop_shadow_2"),
                                this.feOffset = i,
                                t.appendChild(i);
                                var a = createNS("feFlood");
                                a.setAttribute("flood-color", "#00ff00"),
                                a.setAttribute("flood-opacity", "1"),
                                a.setAttribute("result", "drop_shadow_3"),
                                this.feFlood = a,
                                t.appendChild(a);
                                var o = createNS("feComposite");
                                o.setAttribute("in", "drop_shadow_3"),
                                o.setAttribute("in2", "drop_shadow_2"),
                                o.setAttribute("operator", "in"),
                                o.setAttribute("result", "drop_shadow_4"),
                                t.appendChild(o);
                                var s, l = createNS("feMerge");
                                t.appendChild(l),
                                s = createNS("feMergeNode"),
                                l.appendChild(s),
                                (s = createNS("feMergeNode")).setAttribute("in", "SourceGraphic"),
                                this.feMergeNode = s,
                                this.feMerge = l,
                                this.originalNodeAdded = !1,
                                l.appendChild(s)
                            }
                            ShapeTransformManager.prototype = {
                                addTransformSequence: function(t) {
                                    var e, r = t.length, n = "_";
                                    for (e = 0; e < r; e += 1)
                                        n += t[e].transform.key + "_";
                                    var i = this.sequences[n];
                                    return i || (i = {
                                        transforms: [].concat(t),
                                        finalTransform: new Matrix,
                                        _mdf: !1
                                    },
                                    this.sequences[n] = i,
                                    this.sequenceList.push(i)),
                                    i
                                },
                                processSequence: function(t, e) {
                                    for (var r, n = 0, i = t.transforms.length, a = e; n < i && !e; ) {
                                        if (t.transforms[n].transform.mProps._mdf) {
                                            a = !0;
                                            break
                                        }
                                        n += 1
                                    }
                                    if (a)
                                        for (t.finalTransform.reset(),
                                        n = i - 1; n >= 0; n -= 1)
                                            r = t.transforms[n].transform.mProps.v.props,
                                            t.finalTransform.transform(r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8], r[9], r[10], r[11], r[12], r[13], r[14], r[15]);
                                    t._mdf = a
                                },
                                processSequences: function(t) {
                                    var e, r = this.sequenceList.length;
                                    for (e = 0; e < r; e += 1)
                                        this.processSequence(this.sequenceList[e], t)
                                },
                                getNewKey: function() {
                                    return this.transform_key_count += 1,
                                    "_" + this.transform_key_count
                                }
                            },
                            CVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated,
                            BaseElement.prototype = {
                                checkMasks: function() {
                                    if (!this.data.hasMask)
                                        return !1;
                                    for (var t = 0, e = this.data.masksProperties.length; t < e; ) {
                                        if ("n" !== this.data.masksProperties[t].mode && !1 !== this.data.masksProperties[t].cl)
                                            return !0;
                                        t += 1
                                    }
                                    return !1
                                },
                                initExpressions: function() {
                                    this.layerInterface = LayerExpressionInterface(this),
                                    this.data.hasMask && this.maskManager && this.layerInterface.registerMaskInterface(this.maskManager);
                                    var t = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);
                                    this.layerInterface.registerEffectsInterface(t),
                                    0 === this.data.ty || this.data.xt ? this.compInterface = CompExpressionInterface(this) : 4 === this.data.ty ? (this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface),
                                    this.layerInterface.content = this.layerInterface.shapeInterface) : 5 === this.data.ty && (this.layerInterface.textInterface = TextExpressionInterface(this),
                                    this.layerInterface.text = this.layerInterface.textInterface)
                                },
                                setBlendMode: function() {
                                    var t = getBlendMode(this.data.bm);
                                    (this.baseElement || this.layerElement).style["mix-blend-mode"] = t
                                },
                                initBaseData: function(t, e, r) {
                                    this.globalData = e,
                                    this.comp = r,
                                    this.data = t,
                                    this.layerId = createElementID(),
                                    this.data.sr || (this.data.sr = 1),
                                    this.effectsManager = new EffectsManager(this.data,this,this.dynamicProperties)
                                },
                                getType: function() {
                                    return this.type
                                },
                                sourceRectAtTime: function() {}
                            },
                            NullElement.prototype.prepareFrame = function(t) {
                                this.prepareProperties(t, !0)
                            }
                            ,
                            NullElement.prototype.renderFrame = function() {}
                            ,
                            NullElement.prototype.getBaseElement = function() {
                                return null
                            }
                            ,
                            NullElement.prototype.destroy = function() {}
                            ,
                            NullElement.prototype.sourceRectAtTime = function() {}
                            ,
                            NullElement.prototype.hide = function() {}
                            ,
                            extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement),
                            SVGBaseElement.prototype = {
                                initRendererElement: function() {
                                    this.layerElement = createNS("g")
                                },
                                createContainerElements: function() {
                                    this.matteElement = createNS("g"),
                                    this.transformedElement = this.layerElement,
                                    this.maskedElement = this.layerElement,
                                    this._sizeChanged = !1;
                                    var t, e, r, n = null;
                                    if (this.data.td) {
                                        if (3 == this.data.td || 1 == this.data.td) {
                                            var i = createNS("mask");
                                            i.setAttribute("id", this.layerId),
                                            i.setAttribute("mask-type", 3 == this.data.td ? "luminance" : "alpha"),
                                            i.appendChild(this.layerElement),
                                            n = i,
                                            this.globalData.defs.appendChild(i),
                                            featureSupport.maskType || 1 != this.data.td || (i.setAttribute("mask-type", "luminance"),
                                            t = createElementID(),
                                            e = filtersFactory.createFilter(t),
                                            this.globalData.defs.appendChild(e),
                                            e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),
                                            (r = createNS("g")).appendChild(this.layerElement),
                                            n = r,
                                            i.appendChild(r),
                                            r.setAttribute("filter", "url(" + locationHref + "#" + t + ")"))
                                        } else if (2 == this.data.td) {
                                            var a = createNS("mask");
                                            a.setAttribute("id", this.layerId),
                                            a.setAttribute("mask-type", "alpha");
                                            var o = createNS("g");
                                            a.appendChild(o),
                                            t = createElementID(),
                                            e = filtersFactory.createFilter(t);
                                            var s = createNS("feComponentTransfer");
                                            s.setAttribute("in", "SourceGraphic"),
                                            e.appendChild(s);
                                            var l = createNS("feFuncA");
                                            l.setAttribute("type", "table"),
                                            l.setAttribute("tableValues", "1.0 0.0"),
                                            s.appendChild(l),
                                            this.globalData.defs.appendChild(e);
                                            var c = createNS("rect");
                                            c.setAttribute("width", this.comp.data.w),
                                            c.setAttribute("height", this.comp.data.h),
                                            c.setAttribute("x", "0"),
                                            c.setAttribute("y", "0"),
                                            c.setAttribute("fill", "#ffffff"),
                                            c.setAttribute("opacity", "0"),
                                            o.setAttribute("filter", "url(" + locationHref + "#" + t + ")"),
                                            o.appendChild(c),
                                            o.appendChild(this.layerElement),
                                            n = o,
                                            featureSupport.maskType || (a.setAttribute("mask-type", "luminance"),
                                            e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),
                                            r = createNS("g"),
                                            o.appendChild(c),
                                            r.appendChild(this.layerElement),
                                            n = r,
                                            o.appendChild(r)),
                                            this.globalData.defs.appendChild(a)
                                        }
                                    } else
                                        this.data.tt ? (this.matteElement.appendChild(this.layerElement),
                                        n = this.matteElement,
                                        this.baseElement = this.matteElement) : this.baseElement = this.layerElement;
                                    if (this.data.ln && this.layerElement.setAttribute("id", this.data.ln),
                                    this.data.cl && this.layerElement.setAttribute("class", this.data.cl),
                                    0 === this.data.ty && !this.data.hd) {
                                        var h = createNS("clipPath")
                                          , u = createNS("path");
                                        u.setAttribute("d", "M0,0 L" + this.data.w + ",0 L" + this.data.w + "," + this.data.h + " L0," + this.data.h + "z");
                                        var p = createElementID();
                                        if (h.setAttribute("id", p),
                                        h.appendChild(u),
                                        this.globalData.defs.appendChild(h),
                                        this.checkMasks()) {
                                            var d = createNS("g");
                                            d.setAttribute("clip-path", "url(" + locationHref + "#" + p + ")"),
                                            d.appendChild(this.layerElement),
                                            this.transformedElement = d,
                                            n ? n.appendChild(this.transformedElement) : this.baseElement = this.transformedElement
                                        } else
                                            this.layerElement.setAttribute("clip-path", "url(" + locationHref + "#" + p + ")")
                                    }
                                    0 !== this.data.bm && this.setBlendMode()
                                },
                                renderElement: function() {
                                    this.finalTransform._matMdf && this.transformedElement.setAttribute("transform", this.finalTransform.mat.to2dCSS()),
                                    this.finalTransform._opMdf && this.transformedElement.setAttribute("opacity", this.finalTransform.mProp.o.v)
                                },
                                destroyBaseElement: function() {
                                    this.layerElement = null,
                                    this.matteElement = null,
                                    this.maskManager.destroy()
                                },
                                getBaseElement: function() {
                                    return this.data.hd ? null : this.baseElement
                                },
                                createRenderableComponents: function() {
                                    this.maskManager = new MaskElement(this.data,this,this.globalData),
                                    this.renderableEffectsManager = new SVGEffects(this)
                                },
                                setMatte: function(t) {
                                    this.matteElement && this.matteElement.setAttribute("mask", "url(" + locationHref + "#" + t + ")")
                                }
                            },
                            IShapeElement.prototype = {
                                addShapeToModifiers: function(t) {
                                    var e, r = this.shapeModifiers.length;
                                    for (e = 0; e < r; e += 1)
                                        this.shapeModifiers[e].addShape(t)
                                },
                                isShapeInAnimatedModifiers: function(t) {
                                    for (var e = this.shapeModifiers.length; 0 < e; )
                                        if (this.shapeModifiers[0].isAnimatedWithShape(t))
                                            return !0;
                                    return !1
                                },
                                renderModifiers: function() {
                                    if (this.shapeModifiers.length) {
                                        var t, e = this.shapes.length;
                                        for (t = 0; t < e; t += 1)
                                            this.shapes[t].sh.reset();
                                        for (t = (e = this.shapeModifiers.length) - 1; t >= 0 && !this.shapeModifiers[t].processShapes(this._isFirstFrame); t -= 1)
                                            ;
                                    }
                                },
                                searchProcessedElement: function(t) {
                                    for (var e = this.processedElements, r = 0, n = e.length; r < n; ) {
                                        if (e[r].elem === t)
                                            return e[r].pos;
                                        r += 1
                                    }
                                    return 0
                                },
                                addProcessedElement: function(t, e) {
                                    for (var r = this.processedElements, n = r.length; n; )
                                        if (r[n -= 1].elem === t)
                                            return void (r[n].pos = e);
                                    r.push(new ProcessedElement(t,e))
                                },
                                prepareFrame: function(t) {
                                    this.prepareRenderableFrame(t),
                                    this.prepareProperties(t, this.isInRange)
                                }
                            },
                            ITextElement.prototype.initElement = function(t, e, r) {
                                this.lettersChangedFlag = !0,
                                this.initFrame(),
                                this.initBaseData(t, e, r),
                                this.textProperty = new TextProperty(this,t.t,this.dynamicProperties),
                                this.textAnimator = new TextAnimatorProperty(t.t,this.renderType,this),
                                this.initTransform(t, e, r),
                                this.initHierarchy(),
                                this.initRenderable(),
                                this.initRendererElement(),
                                this.createContainerElements(),
                                this.createRenderableComponents(),
                                this.createContent(),
                                this.hide(),
                                this.textAnimator.searchProperties(this.dynamicProperties)
                            }
                            ,
                            ITextElement.prototype.prepareFrame = function(t) {
                                this._mdf = !1,
                                this.prepareRenderableFrame(t),
                                this.prepareProperties(t, this.isInRange),
                                (this.textProperty._mdf || this.textProperty._isFirstFrame) && (this.buildNewText(),
                                this.textProperty._isFirstFrame = !1,
                                this.textProperty._mdf = !1)
                            }
                            ,
                            ITextElement.prototype.createPathShape = function(t, e) {
                                var r, n, i = e.length, a = "";
                                for (r = 0; r < i; r += 1)
                                    n = e[r].ks.k,
                                    a += buildShapeString(n, n.i.length, !0, t);
                                return a
                            }
                            ,
                            ITextElement.prototype.updateDocumentData = function(t, e) {
                                this.textProperty.updateDocumentData(t, e)
                            }
                            ,
                            ITextElement.prototype.canResizeFont = function(t) {
                                this.textProperty.canResizeFont(t)
                            }
                            ,
                            ITextElement.prototype.setMinimumFontSize = function(t) {
                                this.textProperty.setMinimumFontSize(t)
                            }
                            ,
                            ITextElement.prototype.applyTextPropertiesToMatrix = function(t, e, r, n, i) {
                                switch (t.ps && e.translate(t.ps[0], t.ps[1] + t.ascent, 0),
                                e.translate(0, -t.ls, 0),
                                t.j) {
                                case 1:
                                    e.translate(t.justifyOffset + (t.boxWidth - t.lineWidths[r]), 0, 0);
                                    break;
                                case 2:
                                    e.translate(t.justifyOffset + (t.boxWidth - t.lineWidths[r]) / 2, 0, 0)
                                }
                                e.translate(n, i, 0)
                            }
                            ,
                            ITextElement.prototype.buildColor = function(t) {
                                return "rgb(" + Math.round(255 * t[0]) + "," + Math.round(255 * t[1]) + "," + Math.round(255 * t[2]) + ")"
                            }
                            ,
                            ITextElement.prototype.emptyProp = new LetterProps,
                            ITextElement.prototype.destroy = function() {}
                            ,
                            extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement),
                            ICompElement.prototype.initElement = function(t, e, r) {
                                this.initFrame(),
                                this.initBaseData(t, e, r),
                                this.initTransform(t, e, r),
                                this.initRenderable(),
                                this.initHierarchy(),
                                this.initRendererElement(),
                                this.createContainerElements(),
                                this.createRenderableComponents(),
                                !this.data.xt && e.progressiveLoad || this.buildAllItems(),
                                this.hide()
                            }
                            ,
                            ICompElement.prototype.prepareFrame = function(t) {
                                if (this._mdf = !1,
                                this.prepareRenderableFrame(t),
                                this.prepareProperties(t, this.isInRange),
                                this.isInRange || this.data.xt) {
                                    if (this.tm._placeholder)
                                        this.renderedFrame = t / this.data.sr;
                                    else {
                                        var e = this.tm.v;
                                        e === this.data.op && (e = this.data.op - 1),
                                        this.renderedFrame = e
                                    }
                                    var r, n = this.elements.length;
                                    for (this.completeLayers || this.checkLayers(this.renderedFrame),
                                    r = n - 1; r >= 0; r -= 1)
                                        (this.completeLayers || this.elements[r]) && (this.elements[r].prepareFrame(this.renderedFrame - this.layers[r].st),
                                        this.elements[r]._mdf && (this._mdf = !0))
                                }
                            }
                            ,
                            ICompElement.prototype.renderInnerContent = function() {
                                var t, e = this.layers.length;
                                for (t = 0; t < e; t += 1)
                                    (this.completeLayers || this.elements[t]) && this.elements[t].renderFrame()
                            }
                            ,
                            ICompElement.prototype.setElements = function(t) {
                                this.elements = t
                            }
                            ,
                            ICompElement.prototype.getElements = function() {
                                return this.elements
                            }
                            ,
                            ICompElement.prototype.destroyElements = function() {
                                var t, e = this.layers.length;
                                for (t = 0; t < e; t += 1)
                                    this.elements[t] && this.elements[t].destroy()
                            }
                            ,
                            ICompElement.prototype.destroy = function() {
                                this.destroyElements(),
                                this.destroyBaseElement()
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement),
                            IImageElement.prototype.createContent = function() {
                                var t = this.globalData.getAssetsPath(this.assetData);
                                this.innerElem = createNS("image"),
                                this.innerElem.setAttribute("width", this.assetData.w + "px"),
                                this.innerElem.setAttribute("height", this.assetData.h + "px"),
                                this.innerElem.setAttribute("preserveAspectRatio", this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio),
                                this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink", "href", t),
                                this.layerElement.appendChild(this.innerElem)
                            }
                            ,
                            IImageElement.prototype.sourceRectAtTime = function() {
                                return this.sourceRect
                            }
                            ,
                            extendPrototype([IImageElement], ISolidElement),
                            ISolidElement.prototype.createContent = function() {
                                var t = createNS("rect");
                                t.setAttribute("width", this.data.sw),
                                t.setAttribute("height", this.data.sh),
                                t.setAttribute("fill", this.data.sc),
                                this.layerElement.appendChild(t)
                            }
                            ,
                            AudioElement.prototype.prepareFrame = function(t) {
                                if (this.prepareRenderableFrame(t, !0),
                                this.prepareProperties(t, !0),
                                this.tm._placeholder)
                                    this._currentTime = t / this.data.sr;
                                else {
                                    var e = this.tm.v;
                                    this._currentTime = e
                                }
                            }
                            ,
                            extendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement),
                            AudioElement.prototype.renderFrame = function() {
                                this.isInRange && this._canPlay && (this._isPlaying ? (!this.audio.playing() || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > .1) && this.audio.seek(this._currentTime / this.globalData.frameRate) : (this.audio.play(),
                                this.audio.seek(this._currentTime / this.globalData.frameRate),
                                this._isPlaying = !0))
                            }
                            ,
                            AudioElement.prototype.show = function() {}
                            ,
                            AudioElement.prototype.hide = function() {
                                this.audio.pause(),
                                this._isPlaying = !1
                            }
                            ,
                            AudioElement.prototype.pause = function() {
                                this.audio.pause(),
                                this._isPlaying = !1,
                                this._canPlay = !1
                            }
                            ,
                            AudioElement.prototype.resume = function() {
                                this._canPlay = !0
                            }
                            ,
                            AudioElement.prototype.setRate = function(t) {
                                this.audio.rate(t)
                            }
                            ,
                            AudioElement.prototype.volume = function(t) {
                                this.audio.volume(t)
                            }
                            ,
                            AudioElement.prototype.getBaseElement = function() {
                                return null
                            }
                            ,
                            AudioElement.prototype.destroy = function() {}
                            ,
                            AudioElement.prototype.sourceRectAtTime = function() {}
                            ,
                            AudioElement.prototype.initExpressions = function() {}
                            ,
                            FootageElement.prototype.prepareFrame = function() {}
                            ,
                            extendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement),
                            FootageElement.prototype.getBaseElement = function() {
                                return null
                            }
                            ,
                            FootageElement.prototype.renderFrame = function() {}
                            ,
                            FootageElement.prototype.destroy = function() {}
                            ,
                            FootageElement.prototype.initExpressions = function() {
                                this.layerInterface = FootageInterface(this)
                            }
                            ,
                            FootageElement.prototype.getFootageData = function() {
                                return this.footageData
                            }
                            ,
                            extendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement),
                            extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement),
                            SVGTextLottieElement.prototype.createContent = function() {
                                this.data.singleShape && !this.globalData.fontManager.chars && (this.textContainer = createNS("text"))
                            }
                            ,
                            SVGTextLottieElement.prototype.buildTextContents = function(t) {
                                for (var e = 0, r = t.length, n = [], i = ""; e < r; )
                                    t[e] === String.fromCharCode(13) || t[e] === String.fromCharCode(3) ? (n.push(i),
                                    i = "") : i += t[e],
                                    e += 1;
                                return n.push(i),
                                n
                            }
                            ,
                            SVGTextLottieElement.prototype.buildNewText = function() {
                                var t, e, r = this.textProperty.currentData;
                                this.renderedLetters = createSizedArray(r ? r.l.length : 0),
                                r.fc ? this.layerElement.setAttribute("fill", this.buildColor(r.fc)) : this.layerElement.setAttribute("fill", "rgba(0,0,0,0)"),
                                r.sc && (this.layerElement.setAttribute("stroke", this.buildColor(r.sc)),
                                this.layerElement.setAttribute("stroke-width", r.sw)),
                                this.layerElement.setAttribute("font-size", r.finalSize);
                                var n = this.globalData.fontManager.getFontByName(r.f);
                                if (n.fClass)
                                    this.layerElement.setAttribute("class", n.fClass);
                                else {
                                    this.layerElement.setAttribute("font-family", n.fFamily);
                                    var i = r.fWeight
                                      , a = r.fStyle;
                                    this.layerElement.setAttribute("font-style", a),
                                    this.layerElement.setAttribute("font-weight", i)
                                }
                                this.layerElement.setAttribute("aria-label", r.t);
                                var o, s = r.l || [], l = !!this.globalData.fontManager.chars;
                                e = s.length;
                                var c, h = this.mHelper, u = "", p = this.data.singleShape, d = 0, f = 0, m = !0, v = .001 * r.tr * r.finalSize;
                                if (!p || l || r.sz) {
                                    var g, y, _ = this.textSpans.length;
                                    for (t = 0; t < e; t += 1)
                                        l && p && 0 !== t || (o = _ > t ? this.textSpans[t] : createNS(l ? "path" : "text"),
                                        _ <= t && (o.setAttribute("stroke-linecap", "butt"),
                                        o.setAttribute("stroke-linejoin", "round"),
                                        o.setAttribute("stroke-miterlimit", "4"),
                                        this.textSpans[t] = o,
                                        this.layerElement.appendChild(o)),
                                        o.style.display = "inherit"),
                                        h.reset(),
                                        h.scale(r.finalSize / 100, r.finalSize / 100),
                                        p && (s[t].n && (d = -v,
                                        f += r.yOffset,
                                        f += m ? 1 : 0,
                                        m = !1),
                                        this.applyTextPropertiesToMatrix(r, h, s[t].line, d, f),
                                        d += s[t].l || 0,
                                        d += v),
                                        l ? (c = (g = (y = this.globalData.fontManager.getCharData(r.finalText[t], n.fStyle, this.globalData.fontManager.getFontByName(r.f).fFamily)) && y.data || {}).shapes ? g.shapes[0].it : [],
                                        p ? u += this.createPathShape(h, c) : o.setAttribute("d", this.createPathShape(h, c))) : (p && o.setAttribute("transform", "translate(" + h.props[12] + "," + h.props[13] + ")"),
                                        o.textContent = s[t].val,
                                        o.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"));
                                    p && o && o.setAttribute("d", u)
                                } else {
                                    var x = this.textContainer
                                      , b = "start";
                                    switch (r.j) {
                                    case 1:
                                        b = "end";
                                        break;
                                    case 2:
                                        b = "middle";
                                        break;
                                    default:
                                        b = "start"
                                    }
                                    x.setAttribute("text-anchor", b),
                                    x.setAttribute("letter-spacing", v);
                                    var w = this.buildTextContents(r.finalText);
                                    for (e = w.length,
                                    f = r.ps ? r.ps[1] + r.ascent : 0,
                                    t = 0; t < e; t += 1)
                                        (o = this.textSpans[t] || createNS("tspan")).textContent = w[t],
                                        o.setAttribute("x", 0),
                                        o.setAttribute("y", f),
                                        o.style.display = "inherit",
                                        x.appendChild(o),
                                        this.textSpans[t] = o,
                                        f += r.finalLineHeight;
                                    this.layerElement.appendChild(x)
                                }
                                for (; t < this.textSpans.length; )
                                    this.textSpans[t].style.display = "none",
                                    t += 1;
                                this._sizeChanged = !0
                            }
                            ,
                            SVGTextLottieElement.prototype.sourceRectAtTime = function() {
                                if (this.prepareFrame(this.comp.renderedFrame - this.data.st),
                                this.renderInnerContent(),
                                this._sizeChanged) {
                                    this._sizeChanged = !1;
                                    var t = this.layerElement.getBBox();
                                    this.bbox = {
                                        top: t.y,
                                        left: t.x,
                                        width: t.width,
                                        height: t.height
                                    }
                                }
                                return this.bbox
                            }
                            ,
                            SVGTextLottieElement.prototype.renderInnerContent = function() {
                                if (!this.data.singleShape && (this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag),
                                this.lettersChangedFlag || this.textAnimator.lettersChangedFlag)) {
                                    var t, e;
                                    this._sizeChanged = !0;
                                    var r, n, i = this.textAnimator.renderedLetters, a = this.textProperty.currentData.l;
                                    for (e = a.length,
                                    t = 0; t < e; t += 1)
                                        a[t].n || (r = i[t],
                                        n = this.textSpans[t],
                                        r._mdf.m && n.setAttribute("transform", r.m),
                                        r._mdf.o && n.setAttribute("opacity", r.o),
                                        r._mdf.sw && n.setAttribute("stroke-width", r.sw),
                                        r._mdf.sc && n.setAttribute("stroke", r.sc),
                                        r._mdf.fc && n.setAttribute("fill", r.fc))
                                }
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement),
                            SVGShapeElement.prototype.initSecondaryElement = function() {}
                            ,
                            SVGShapeElement.prototype.identityMatrix = new Matrix,
                            SVGShapeElement.prototype.buildExpressionInterface = function() {}
                            ,
                            SVGShapeElement.prototype.createContent = function() {
                                this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], !0),
                                this.filterUniqueShapes()
                            }
                            ,
                            SVGShapeElement.prototype.filterUniqueShapes = function() {
                                var t, e, r, n, i = this.shapes.length, a = this.stylesList.length, o = [], s = !1;
                                for (r = 0; r < a; r += 1) {
                                    for (n = this.stylesList[r],
                                    s = !1,
                                    o.length = 0,
                                    t = 0; t < i; t += 1)
                                        -1 !== (e = this.shapes[t]).styles.indexOf(n) && (o.push(e),
                                        s = e._isAnimated || s);
                                    o.length > 1 && s && this.setShapesAsAnimated(o)
                                }
                            }
                            ,
                            SVGShapeElement.prototype.setShapesAsAnimated = function(t) {
                                var e, r = t.length;
                                for (e = 0; e < r; e += 1)
                                    t[e].setAsAnimated()
                            }
                            ,
                            SVGShapeElement.prototype.createStyleElement = function(t, e) {
                                var r, n = new SVGStyleData(t,e), i = n.pElem;
                                return "st" === t.ty ? r = new SVGStrokeStyleData(this,t,n) : "fl" === t.ty ? r = new SVGFillStyleData(this,t,n) : "gf" !== t.ty && "gs" !== t.ty || (r = new ("gf" === t.ty ? SVGGradientFillStyleData : SVGGradientStrokeStyleData)(this,t,n),
                                this.globalData.defs.appendChild(r.gf),
                                r.maskId && (this.globalData.defs.appendChild(r.ms),
                                this.globalData.defs.appendChild(r.of),
                                i.setAttribute("mask", "url(" + locationHref + "#" + r.maskId + ")"))),
                                "st" !== t.ty && "gs" !== t.ty || (i.setAttribute("stroke-linecap", lineCapEnum[t.lc || 2]),
                                i.setAttribute("stroke-linejoin", lineJoinEnum[t.lj || 2]),
                                i.setAttribute("fill-opacity", "0"),
                                1 === t.lj && i.setAttribute("stroke-miterlimit", t.ml)),
                                2 === t.r && i.setAttribute("fill-rule", "evenodd"),
                                t.ln && i.setAttribute("id", t.ln),
                                t.cl && i.setAttribute("class", t.cl),
                                t.bm && (i.style["mix-blend-mode"] = getBlendMode(t.bm)),
                                this.stylesList.push(n),
                                this.addToAnimatedContents(t, r),
                                r
                            }
                            ,
                            SVGShapeElement.prototype.createGroupElement = function(t) {
                                var e = new ShapeGroupData;
                                return t.ln && e.gr.setAttribute("id", t.ln),
                                t.cl && e.gr.setAttribute("class", t.cl),
                                t.bm && (e.gr.style["mix-blend-mode"] = getBlendMode(t.bm)),
                                e
                            }
                            ,
                            SVGShapeElement.prototype.createTransformElement = function(t, e) {
                                var r = TransformPropertyFactory.getTransformProperty(this, t, this)
                                  , n = new SVGTransformData(r,r.o,e);
                                return this.addToAnimatedContents(t, n),
                                n
                            }
                            ,
                            SVGShapeElement.prototype.createShapeElement = function(t, e, r) {
                                var n = 4;
                                "rc" === t.ty ? n = 5 : "el" === t.ty ? n = 6 : "sr" === t.ty && (n = 7);
                                var i = new SVGShapeData(e,r,ShapePropertyFactory.getShapeProp(this, t, n, this));
                                return this.shapes.push(i),
                                this.addShapeToModifiers(i),
                                this.addToAnimatedContents(t, i),
                                i
                            }
                            ,
                            SVGShapeElement.prototype.addToAnimatedContents = function(t, e) {
                                for (var r = 0, n = this.animatedContents.length; r < n; ) {
                                    if (this.animatedContents[r].element === e)
                                        return;
                                    r += 1
                                }
                                this.animatedContents.push({
                                    fn: SVGElementsRenderer.createRenderFunction(t),
                                    element: e,
                                    data: t
                                })
                            }
                            ,
                            SVGShapeElement.prototype.setElementStyles = function(t) {
                                var e, r = t.styles, n = this.stylesList.length;
                                for (e = 0; e < n; e += 1)
                                    this.stylesList[e].closed || r.push(this.stylesList[e])
                            }
                            ,
                            SVGShapeElement.prototype.reloadShapes = function() {
                                var t;
                                this._isFirstFrame = !0;
                                var e = this.itemsData.length;
                                for (t = 0; t < e; t += 1)
                                    this.prevViewData[t] = this.itemsData[t];
                                for (this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], !0),
                                this.filterUniqueShapes(),
                                e = this.dynamicProperties.length,
                                t = 0; t < e; t += 1)
                                    this.dynamicProperties[t].getValue();
                                this.renderModifiers()
                            }
                            ,
                            SVGShapeElement.prototype.searchShapes = function(t, e, r, n, i, a, o) {
                                var s, l, c, h, u, p, d = [].concat(a), f = t.length - 1, m = [], v = [];
                                for (s = f; s >= 0; s -= 1) {
                                    if ((p = this.searchProcessedElement(t[s])) ? e[s] = r[p - 1] : t[s]._render = o,
                                    "fl" === t[s].ty || "st" === t[s].ty || "gf" === t[s].ty || "gs" === t[s].ty)
                                        p ? e[s].style.closed = !1 : e[s] = this.createStyleElement(t[s], i),
                                        t[s]._render && e[s].style.pElem.parentNode !== n && n.appendChild(e[s].style.pElem),
                                        m.push(e[s].style);
                                    else if ("gr" === t[s].ty) {
                                        if (p)
                                            for (c = e[s].it.length,
                                            l = 0; l < c; l += 1)
                                                e[s].prevViewData[l] = e[s].it[l];
                                        else
                                            e[s] = this.createGroupElement(t[s]);
                                        this.searchShapes(t[s].it, e[s].it, e[s].prevViewData, e[s].gr, i + 1, d, o),
                                        t[s]._render && e[s].gr.parentNode !== n && n.appendChild(e[s].gr)
                                    } else
                                        "tr" === t[s].ty ? (p || (e[s] = this.createTransformElement(t[s], n)),
                                        h = e[s].transform,
                                        d.push(h)) : "sh" === t[s].ty || "rc" === t[s].ty || "el" === t[s].ty || "sr" === t[s].ty ? (p || (e[s] = this.createShapeElement(t[s], d, i)),
                                        this.setElementStyles(e[s])) : "tm" === t[s].ty || "rd" === t[s].ty || "ms" === t[s].ty || "pb" === t[s].ty ? (p ? (u = e[s]).closed = !1 : ((u = ShapeModifiers.getModifier(t[s].ty)).init(this, t[s]),
                                        e[s] = u,
                                        this.shapeModifiers.push(u)),
                                        v.push(u)) : "rp" === t[s].ty && (p ? (u = e[s]).closed = !0 : (u = ShapeModifiers.getModifier(t[s].ty),
                                        e[s] = u,
                                        u.init(this, t, s, e),
                                        this.shapeModifiers.push(u),
                                        o = !1),
                                        v.push(u));
                                    this.addProcessedElement(t[s], s + 1)
                                }
                                for (f = m.length,
                                s = 0; s < f; s += 1)
                                    m[s].closed = !0;
                                for (f = v.length,
                                s = 0; s < f; s += 1)
                                    v[s].closed = !0
                            }
                            ,
                            SVGShapeElement.prototype.renderInnerContent = function() {
                                var t;
                                this.renderModifiers();
                                var e = this.stylesList.length;
                                for (t = 0; t < e; t += 1)
                                    this.stylesList[t].reset();
                                for (this.renderShape(),
                                t = 0; t < e; t += 1)
                                    (this.stylesList[t]._mdf || this._isFirstFrame) && (this.stylesList[t].msElem && (this.stylesList[t].msElem.setAttribute("d", this.stylesList[t].d),
                                    this.stylesList[t].d = "M0 0" + this.stylesList[t].d),
                                    this.stylesList[t].pElem.setAttribute("d", this.stylesList[t].d || "M0 0"))
                            }
                            ,
                            SVGShapeElement.prototype.renderShape = function() {
                                var t, e, r = this.animatedContents.length;
                                for (t = 0; t < r; t += 1)
                                    e = this.animatedContents[t],
                                    (this._isFirstFrame || e.element._isAnimated) && !0 !== e.data && e.fn(e.data, e.element, this._isFirstFrame)
                            }
                            ,
                            SVGShapeElement.prototype.destroy = function() {
                                this.destroyBaseElement(),
                                this.shapesData = null,
                                this.itemsData = null
                            }
                            ,
                            SVGTintFilter.prototype.renderFrame = function(t) {
                                if (t || this.filterManager._mdf) {
                                    var e = this.filterManager.effectElements[0].p.v
                                      , r = this.filterManager.effectElements[1].p.v
                                      , n = this.filterManager.effectElements[2].p.v / 100;
                                    this.matrixFilter.setAttribute("values", r[0] - e[0] + " 0 0 0 " + e[0] + " " + (r[1] - e[1]) + " 0 0 0 " + e[1] + " " + (r[2] - e[2]) + " 0 0 0 " + e[2] + " 0 0 0 " + n + " 0")
                                }
                            }
                            ,
                            SVGFillFilter.prototype.renderFrame = function(t) {
                                if (t || this.filterManager._mdf) {
                                    var e = this.filterManager.effectElements[2].p.v
                                      , r = this.filterManager.effectElements[6].p.v;
                                    this.matrixFilter.setAttribute("values", "0 0 0 0 " + e[0] + " 0 0 0 0 " + e[1] + " 0 0 0 0 " + e[2] + " 0 0 0 " + r + " 0")
                                }
                            }
                            ,
                            SVGGaussianBlurEffect.prototype.renderFrame = function(t) {
                                if (t || this.filterManager._mdf) {
                                    var e = .3 * this.filterManager.effectElements[0].p.v
                                      , r = this.filterManager.effectElements[1].p.v
                                      , n = 3 == r ? 0 : e
                                      , i = 2 == r ? 0 : e;
                                    this.feGaussianBlur.setAttribute("stdDeviation", n + " " + i);
                                    var a = 1 == this.filterManager.effectElements[2].p.v ? "wrap" : "duplicate";
                                    this.feGaussianBlur.setAttribute("edgeMode", a)
                                }
                            }
                            ,
                            SVGStrokeEffect.prototype.initialize = function() {
                                var t, e, r, n, i = this.elem.layerElement.children || this.elem.layerElement.childNodes;
                                for (1 === this.filterManager.effectElements[1].p.v ? (n = this.elem.maskManager.masksProperties.length,
                                r = 0) : n = 1 + (r = this.filterManager.effectElements[0].p.v - 1),
                                (e = createNS("g")).setAttribute("fill", "none"),
                                e.setAttribute("stroke-linecap", "round"),
                                e.setAttribute("stroke-dashoffset", 1); r < n; r += 1)
                                    t = createNS("path"),
                                    e.appendChild(t),
                                    this.paths.push({
                                        p: t,
                                        m: r
                                    });
                                if (3 === this.filterManager.effectElements[10].p.v) {
                                    var a = createNS("mask")
                                      , o = createElementID();
                                    a.setAttribute("id", o),
                                    a.setAttribute("mask-type", "alpha"),
                                    a.appendChild(e),
                                    this.elem.globalData.defs.appendChild(a);
                                    var s = createNS("g");
                                    for (s.setAttribute("mask", "url(" + locationHref + "#" + o + ")"); i[0]; )
                                        s.appendChild(i[0]);
                                    this.elem.layerElement.appendChild(s),
                                    this.masker = a,
                                    e.setAttribute("stroke", "#fff")
                                } else if (1 === this.filterManager.effectElements[10].p.v || 2 === this.filterManager.effectElements[10].p.v) {
                                    if (2 === this.filterManager.effectElements[10].p.v)
                                        for (i = this.elem.layerElement.children || this.elem.layerElement.childNodes; i.length; )
                                            this.elem.layerElement.removeChild(i[0]);
                                    this.elem.layerElement.appendChild(e),
                                    this.elem.layerElement.removeAttribute("mask"),
                                    e.setAttribute("stroke", "#fff")
                                }
                                this.initialized = !0,
                                this.pathMasker = e
                            }
                            ,
                            SVGStrokeEffect.prototype.renderFrame = function(t) {
                                var e;
                                this.initialized || this.initialize();
                                var r, n, i = this.paths.length;
                                for (e = 0; e < i; e += 1)
                                    if (-1 !== this.paths[e].m && (r = this.elem.maskManager.viewData[this.paths[e].m],
                                    n = this.paths[e].p,
                                    (t || this.filterManager._mdf || r.prop._mdf) && n.setAttribute("d", r.lastPath),
                                    t || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || r.prop._mdf)) {
                                        var a;
                                        if (0 !== this.filterManager.effectElements[7].p.v || 100 !== this.filterManager.effectElements[8].p.v) {
                                            var o = .01 * Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v)
                                              , s = .01 * Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v)
                                              , l = n.getTotalLength();
                                            a = "0 0 0 " + l * o + " ";
                                            var c, h = l * (s - o), u = 1 + 2 * this.filterManager.effectElements[4].p.v * this.filterManager.effectElements[9].p.v * .01, p = Math.floor(h / u);
                                            for (c = 0; c < p; c += 1)
                                                a += "1 " + 2 * this.filterManager.effectElements[4].p.v * this.filterManager.effectElements[9].p.v * .01 + " ";
                                            a += "0 " + 10 * l + " 0 0"
                                        } else
                                            a = "1 " + 2 * this.filterManager.effectElements[4].p.v * this.filterManager.effectElements[9].p.v * .01;
                                        n.setAttribute("stroke-dasharray", a)
                                    }
                                if ((t || this.filterManager.effectElements[4].p._mdf) && this.pathMasker.setAttribute("stroke-width", 2 * this.filterManager.effectElements[4].p.v),
                                (t || this.filterManager.effectElements[6].p._mdf) && this.pathMasker.setAttribute("opacity", this.filterManager.effectElements[6].p.v),
                                (1 === this.filterManager.effectElements[10].p.v || 2 === this.filterManager.effectElements[10].p.v) && (t || this.filterManager.effectElements[3].p._mdf)) {
                                    var d = this.filterManager.effectElements[3].p.v;
                                    this.pathMasker.setAttribute("stroke", "rgb(" + bmFloor(255 * d[0]) + "," + bmFloor(255 * d[1]) + "," + bmFloor(255 * d[2]) + ")")
                                }
                            }
                            ,
                            SVGTritoneFilter.prototype.renderFrame = function(t) {
                                if (t || this.filterManager._mdf) {
                                    var e = this.filterManager.effectElements[0].p.v
                                      , r = this.filterManager.effectElements[1].p.v
                                      , n = this.filterManager.effectElements[2].p.v
                                      , i = n[0] + " " + r[0] + " " + e[0]
                                      , a = n[1] + " " + r[1] + " " + e[1]
                                      , o = n[2] + " " + r[2] + " " + e[2];
                                    this.feFuncR.setAttribute("tableValues", i),
                                    this.feFuncG.setAttribute("tableValues", a),
                                    this.feFuncB.setAttribute("tableValues", o)
                                }
                            }
                            ,
                            SVGProLevelsFilter.prototype.createFeFunc = function(t, e) {
                                var r = createNS(t);
                                return r.setAttribute("type", "table"),
                                e.appendChild(r),
                                r
                            }
                            ,
                            SVGProLevelsFilter.prototype.getTableValue = function(t, e, r, n, i) {
                                for (var a, o, s = 0, l = Math.min(t, e), c = Math.max(t, e), h = Array.call(null, {
                                    length: 256
                                }), u = 0, p = i - n, d = e - t; s <= 256; )
                                    o = (a = s / 256) <= l ? d < 0 ? i : n : a >= c ? d < 0 ? n : i : n + p * Math.pow((a - t) / d, 1 / r),
                                    h[u] = o,
                                    u += 1,
                                    s += 256 / 255;
                                return h.join(" ")
                            }
                            ,
                            SVGProLevelsFilter.prototype.renderFrame = function(t) {
                                if (t || this.filterManager._mdf) {
                                    var e, r = this.filterManager.effectElements;
                                    this.feFuncRComposed && (t || r[3].p._mdf || r[4].p._mdf || r[5].p._mdf || r[6].p._mdf || r[7].p._mdf) && (e = this.getTableValue(r[3].p.v, r[4].p.v, r[5].p.v, r[6].p.v, r[7].p.v),
                                    this.feFuncRComposed.setAttribute("tableValues", e),
                                    this.feFuncGComposed.setAttribute("tableValues", e),
                                    this.feFuncBComposed.setAttribute("tableValues", e)),
                                    this.feFuncR && (t || r[10].p._mdf || r[11].p._mdf || r[12].p._mdf || r[13].p._mdf || r[14].p._mdf) && (e = this.getTableValue(r[10].p.v, r[11].p.v, r[12].p.v, r[13].p.v, r[14].p.v),
                                    this.feFuncR.setAttribute("tableValues", e)),
                                    this.feFuncG && (t || r[17].p._mdf || r[18].p._mdf || r[19].p._mdf || r[20].p._mdf || r[21].p._mdf) && (e = this.getTableValue(r[17].p.v, r[18].p.v, r[19].p.v, r[20].p.v, r[21].p.v),
                                    this.feFuncG.setAttribute("tableValues", e)),
                                    this.feFuncB && (t || r[24].p._mdf || r[25].p._mdf || r[26].p._mdf || r[27].p._mdf || r[28].p._mdf) && (e = this.getTableValue(r[24].p.v, r[25].p.v, r[26].p.v, r[27].p.v, r[28].p.v),
                                    this.feFuncB.setAttribute("tableValues", e)),
                                    this.feFuncA && (t || r[31].p._mdf || r[32].p._mdf || r[33].p._mdf || r[34].p._mdf || r[35].p._mdf) && (e = this.getTableValue(r[31].p.v, r[32].p.v, r[33].p.v, r[34].p.v, r[35].p.v),
                                    this.feFuncA.setAttribute("tableValues", e))
                                }
                            }
                            ,
                            SVGDropShadowEffect.prototype.renderFrame = function(t) {
                                if (t || this.filterManager._mdf) {
                                    if ((t || this.filterManager.effectElements[4].p._mdf) && this.feGaussianBlur.setAttribute("stdDeviation", this.filterManager.effectElements[4].p.v / 4),
                                    t || this.filterManager.effectElements[0].p._mdf) {
                                        var e = this.filterManager.effectElements[0].p.v;
                                        this.feFlood.setAttribute("flood-color", rgbToHex(Math.round(255 * e[0]), Math.round(255 * e[1]), Math.round(255 * e[2])))
                                    }
                                    if ((t || this.filterManager.effectElements[1].p._mdf) && this.feFlood.setAttribute("flood-opacity", this.filterManager.effectElements[1].p.v / 255),
                                    t || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {
                                        var r = this.filterManager.effectElements[3].p.v
                                          , n = (this.filterManager.effectElements[2].p.v - 90) * degToRads
                                          , i = r * Math.cos(n)
                                          , a = r * Math.sin(n);
                                        this.feOffset.setAttribute("dx", i),
                                        this.feOffset.setAttribute("dy", a)
                                    }
                                }
                            }
                            ;
                            var _svgMatteSymbols = [];
                            function SVGMatte3Effect(t, e, r) {
                                this.initialized = !1,
                                this.filterManager = e,
                                this.filterElem = t,
                                this.elem = r,
                                r.matteElement = createNS("g"),
                                r.matteElement.appendChild(r.layerElement),
                                r.matteElement.appendChild(r.transformedElement),
                                r.baseElement = r.matteElement
                            }
                            function SVGEffects(t) {
                                var e, r, n = t.data.ef ? t.data.ef.length : 0, i = createElementID(), a = filtersFactory.createFilter(i, !0), o = 0;
                                for (this.filters = [],
                                e = 0; e < n; e += 1)
                                    r = null,
                                    20 === t.data.ef[e].ty ? (o += 1,
                                    r = new SVGTintFilter(a,t.effectsManager.effectElements[e])) : 21 === t.data.ef[e].ty ? (o += 1,
                                    r = new SVGFillFilter(a,t.effectsManager.effectElements[e])) : 22 === t.data.ef[e].ty ? r = new SVGStrokeEffect(t,t.effectsManager.effectElements[e]) : 23 === t.data.ef[e].ty ? (o += 1,
                                    r = new SVGTritoneFilter(a,t.effectsManager.effectElements[e])) : 24 === t.data.ef[e].ty ? (o += 1,
                                    r = new SVGProLevelsFilter(a,t.effectsManager.effectElements[e])) : 25 === t.data.ef[e].ty ? (o += 1,
                                    r = new SVGDropShadowEffect(a,t.effectsManager.effectElements[e])) : 28 === t.data.ef[e].ty ? r = new SVGMatte3Effect(a,t.effectsManager.effectElements[e],t) : 29 === t.data.ef[e].ty && (o += 1,
                                    r = new SVGGaussianBlurEffect(a,t.effectsManager.effectElements[e])),
                                    r && this.filters.push(r);
                                o && (t.globalData.defs.appendChild(a),
                                t.layerElement.setAttribute("filter", "url(" + locationHref + "#" + i + ")")),
                                this.filters.length && t.addRenderableComponent(this)
                            }
                            function CVContextData() {
                                var t;
                                for (this.saved = [],
                                this.cArrPos = 0,
                                this.cTr = new Matrix,
                                this.cO = 1,
                                this.savedOp = createTypedArray("float32", 15),
                                t = 0; t < 15; t += 1)
                                    this.saved[t] = createTypedArray("float32", 16);
                                this._length = 15
                            }
                            function CVBaseElement() {}
                            function CVImageElement(t, e, r) {
                                this.assetData = e.getAssetData(t.refId),
                                this.img = e.imageLoader.getAsset(this.assetData),
                                this.initElement(t, e, r)
                            }
                            function CVCompElement(t, e, r) {
                                this.completeLayers = !1,
                                this.layers = t.layers,
                                this.pendingElements = [],
                                this.elements = createSizedArray(this.layers.length),
                                this.initElement(t, e, r),
                                this.tm = t.tm ? PropertyFactory.getProp(this, t.tm, 0, e.frameRate, this) : {
                                    _placeholder: !0
                                }
                            }
                            function CVMaskElement(t, e) {
                                var r;
                                this.data = t,
                                this.element = e,
                                this.masksProperties = this.data.masksProperties || [],
                                this.viewData = createSizedArray(this.masksProperties.length);
                                var n = this.masksProperties.length
                                  , i = !1;
                                for (r = 0; r < n; r += 1)
                                    "n" !== this.masksProperties[r].mode && (i = !0),
                                    this.viewData[r] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[r], 3);
                                this.hasMasks = i,
                                i && this.element.addRenderableComponent(this)
                            }
                            function CVShapeElement(t, e, r) {
                                this.shapes = [],
                                this.shapesData = t.shapes,
                                this.stylesList = [],
                                this.itemsData = [],
                                this.prevViewData = [],
                                this.shapeModifiers = [],
                                this.processedElements = [],
                                this.transformsManager = new ShapeTransformManager,
                                this.initElement(t, e, r)
                            }
                            function CVSolidElement(t, e, r) {
                                this.initElement(t, e, r)
                            }
                            function CVTextElement(t, e, r) {
                                this.textSpans = [],
                                this.yOffset = 0,
                                this.fillColorAnim = !1,
                                this.strokeColorAnim = !1,
                                this.strokeWidthAnim = !1,
                                this.stroke = !1,
                                this.fill = !1,
                                this.justifyOffset = 0,
                                this.currentRender = null,
                                this.renderType = "canvas",
                                this.values = {
                                    fill: "rgba(0,0,0,0)",
                                    stroke: "rgba(0,0,0,0)",
                                    sWidth: 0,
                                    fValue: ""
                                },
                                this.initElement(t, e, r)
                            }
                            function CVEffects() {}
                            function HBaseElement() {}
                            function HSolidElement(t, e, r) {
                                this.initElement(t, e, r)
                            }
                            function HCompElement(t, e, r) {
                                this.layers = t.layers,
                                this.supports3d = !t.hasMask,
                                this.completeLayers = !1,
                                this.pendingElements = [],
                                this.elements = this.layers ? createSizedArray(this.layers.length) : [],
                                this.initElement(t, e, r),
                                this.tm = t.tm ? PropertyFactory.getProp(this, t.tm, 0, e.frameRate, this) : {
                                    _placeholder: !0
                                }
                            }
                            function HShapeElement(t, e, r) {
                                this.shapes = [],
                                this.shapesData = t.shapes,
                                this.stylesList = [],
                                this.shapeModifiers = [],
                                this.itemsData = [],
                                this.processedElements = [],
                                this.animatedContents = [],
                                this.shapesContainer = createNS("g"),
                                this.initElement(t, e, r),
                                this.prevViewData = [],
                                this.currentBBox = {
                                    x: 999999,
                                    y: -999999,
                                    h: 0,
                                    w: 0
                                }
                            }
                            function HTextElement(t, e, r) {
                                this.textSpans = [],
                                this.textPaths = [],
                                this.currentBBox = {
                                    x: 999999,
                                    y: -999999,
                                    h: 0,
                                    w: 0
                                },
                                this.renderType = "svg",
                                this.isMasked = !1,
                                this.initElement(t, e, r)
                            }
                            function HImageElement(t, e, r) {
                                this.assetData = e.getAssetData(t.refId),
                                this.initElement(t, e, r)
                            }
                            function HCameraElement(t, e, r) {
                                this.initFrame(),
                                this.initBaseData(t, e, r),
                                this.initHierarchy();
                                var n = PropertyFactory.getProp;
                                if (this.pe = n(this, t.pe, 0, 0, this),
                                t.ks.p.s ? (this.px = n(this, t.ks.p.x, 1, 0, this),
                                this.py = n(this, t.ks.p.y, 1, 0, this),
                                this.pz = n(this, t.ks.p.z, 1, 0, this)) : this.p = n(this, t.ks.p, 1, 0, this),
                                t.ks.a && (this.a = n(this, t.ks.a, 1, 0, this)),
                                t.ks.or.k.length && t.ks.or.k[0].to) {
                                    var i, a = t.ks.or.k.length;
                                    for (i = 0; i < a; i += 1)
                                        t.ks.or.k[i].to = null,
                                        t.ks.or.k[i].ti = null
                                }
                                this.or = n(this, t.ks.or, 1, degToRads, this),
                                this.or.sh = !0,
                                this.rx = n(this, t.ks.rx, 0, degToRads, this),
                                this.ry = n(this, t.ks.ry, 0, degToRads, this),
                                this.rz = n(this, t.ks.rz, 0, degToRads, this),
                                this.mat = new Matrix,
                                this._prevMat = new Matrix,
                                this._isFirstFrame = !0,
                                this.finalTransform = {
                                    mProp: this
                                }
                            }
                            function HEffects() {}
                            SVGMatte3Effect.prototype.findSymbol = function(t) {
                                for (var e = 0, r = _svgMatteSymbols.length; e < r; ) {
                                    if (_svgMatteSymbols[e] === t)
                                        return _svgMatteSymbols[e];
                                    e += 1
                                }
                                return null
                            }
                            ,
                            SVGMatte3Effect.prototype.replaceInParent = function(t, e) {
                                var r = t.layerElement.parentNode;
                                if (r) {
                                    for (var n, i = r.children, a = 0, o = i.length; a < o && i[a] !== t.layerElement; )
                                        a += 1;
                                    a <= o - 2 && (n = i[a + 1]);
                                    var s = createNS("use");
                                    s.setAttribute("href", "#" + e),
                                    n ? r.insertBefore(s, n) : r.appendChild(s)
                                }
                            }
                            ,
                            SVGMatte3Effect.prototype.setElementAsMask = function(t, e) {
                                if (!this.findSymbol(e)) {
                                    var r = createElementID()
                                      , n = createNS("mask");
                                    n.setAttribute("id", e.layerId),
                                    n.setAttribute("mask-type", "alpha"),
                                    _svgMatteSymbols.push(e);
                                    var i = t.globalData.defs;
                                    i.appendChild(n);
                                    var a = createNS("symbol");
                                    a.setAttribute("id", r),
                                    this.replaceInParent(e, r),
                                    a.appendChild(e.layerElement),
                                    i.appendChild(a);
                                    var o = createNS("use");
                                    o.setAttribute("href", "#" + r),
                                    n.appendChild(o),
                                    e.data.hd = !1,
                                    e.show()
                                }
                                t.setMatte(e.layerId)
                            }
                            ,
                            SVGMatte3Effect.prototype.initialize = function() {
                                for (var t = this.filterManager.effectElements[0].p.v, e = this.elem.comp.elements, r = 0, n = e.length; r < n; )
                                    e[r] && e[r].data.ind === t && this.setElementAsMask(this.elem, e[r]),
                                    r += 1;
                                this.initialized = !0
                            }
                            ,
                            SVGMatte3Effect.prototype.renderFrame = function() {
                                this.initialized || this.initialize()
                            }
                            ,
                            SVGEffects.prototype.renderFrame = function(t) {
                                var e, r = this.filters.length;
                                for (e = 0; e < r; e += 1)
                                    this.filters[e].renderFrame(t)
                            }
                            ,
                            CVContextData.prototype.duplicate = function() {
                                var t = 2 * this._length
                                  , e = this.savedOp;
                                this.savedOp = createTypedArray("float32", t),
                                this.savedOp.set(e);
                                var r = 0;
                                for (r = this._length; r < t; r += 1)
                                    this.saved[r] = createTypedArray("float32", 16);
                                this._length = t
                            }
                            ,
                            CVContextData.prototype.reset = function() {
                                this.cArrPos = 0,
                                this.cTr.reset(),
                                this.cO = 1
                            }
                            ,
                            CVBaseElement.prototype = {
                                createElements: function() {},
                                initRendererElement: function() {},
                                createContainerElements: function() {
                                    this.canvasContext = this.globalData.canvasContext,
                                    this.renderableEffectsManager = new CVEffects(this)
                                },
                                createContent: function() {},
                                setBlendMode: function() {
                                    var t = this.globalData;
                                    if (t.blendMode !== this.data.bm) {
                                        t.blendMode = this.data.bm;
                                        var e = getBlendMode(this.data.bm);
                                        t.canvasContext.globalCompositeOperation = e
                                    }
                                },
                                createRenderableComponents: function() {
                                    this.maskManager = new CVMaskElement(this.data,this)
                                },
                                hideElement: function() {
                                    this.hidden || this.isInRange && !this.isTransparent || (this.hidden = !0)
                                },
                                showElement: function() {
                                    this.isInRange && !this.isTransparent && (this.hidden = !1,
                                    this._isFirstFrame = !0,
                                    this.maskManager._isFirstFrame = !0)
                                },
                                renderFrame: function() {
                                    if (!this.hidden && !this.data.hd) {
                                        this.renderTransform(),
                                        this.renderRenderable(),
                                        this.setBlendMode();
                                        var t = 0 === this.data.ty;
                                        this.globalData.renderer.save(t),
                                        this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),
                                        this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),
                                        this.renderInnerContent(),
                                        this.globalData.renderer.restore(t),
                                        this.maskManager.hasMasks && this.globalData.renderer.restore(!0),
                                        this._isFirstFrame && (this._isFirstFrame = !1)
                                    }
                                },
                                destroy: function() {
                                    this.canvasContext = null,
                                    this.data = null,
                                    this.globalData = null,
                                    this.maskManager.destroy()
                                },
                                mHelper: new Matrix
                            },
                            CVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement,
                            CVBaseElement.prototype.show = CVBaseElement.prototype.showElement,
                            extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement),
                            CVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement,
                            CVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame,
                            CVImageElement.prototype.createContent = function() {
                                if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {
                                    var t = createTag("canvas");
                                    t.width = this.assetData.w,
                                    t.height = this.assetData.h;
                                    var e, r, n = t.getContext("2d"), i = this.img.width, a = this.img.height, o = i / a, s = this.assetData.w / this.assetData.h, l = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;
                                    o > s && "xMidYMid slice" === l || o < s && "xMidYMid slice" !== l ? e = (r = a) * s : r = (e = i) / s,
                                    n.drawImage(this.img, (i - e) / 2, (a - r) / 2, e, r, 0, 0, this.assetData.w, this.assetData.h),
                                    this.img = t
                                }
                            }
                            ,
                            CVImageElement.prototype.renderInnerContent = function() {
                                this.canvasContext.drawImage(this.img, 0, 0)
                            }
                            ,
                            CVImageElement.prototype.destroy = function() {
                                this.img = null
                            }
                            ,
                            extendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement),
                            CVCompElement.prototype.renderInnerContent = function() {
                                var t, e = this.canvasContext;
                                for (e.beginPath(),
                                e.moveTo(0, 0),
                                e.lineTo(this.data.w, 0),
                                e.lineTo(this.data.w, this.data.h),
                                e.lineTo(0, this.data.h),
                                e.lineTo(0, 0),
                                e.clip(),
                                t = this.layers.length - 1; t >= 0; t -= 1)
                                    (this.completeLayers || this.elements[t]) && this.elements[t].renderFrame()
                            }
                            ,
                            CVCompElement.prototype.destroy = function() {
                                var t;
                                for (t = this.layers.length - 1; t >= 0; t -= 1)
                                    this.elements[t] && this.elements[t].destroy();
                                this.layers = null,
                                this.elements = null
                            }
                            ,
                            CVMaskElement.prototype.renderFrame = function() {
                                if (this.hasMasks) {
                                    var t, e, r, n, i = this.element.finalTransform.mat, a = this.element.canvasContext, o = this.masksProperties.length;
                                    for (a.beginPath(),
                                    t = 0; t < o; t += 1)
                                        if ("n" !== this.masksProperties[t].mode) {
                                            var s;
                                            this.masksProperties[t].inv && (a.moveTo(0, 0),
                                            a.lineTo(this.element.globalData.compSize.w, 0),
                                            a.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h),
                                            a.lineTo(0, this.element.globalData.compSize.h),
                                            a.lineTo(0, 0)),
                                            n = this.viewData[t].v,
                                            e = i.applyToPointArray(n.v[0][0], n.v[0][1], 0),
                                            a.moveTo(e[0], e[1]);
                                            var l = n._length;
                                            for (s = 1; s < l; s += 1)
                                                r = i.applyToTriplePoints(n.o[s - 1], n.i[s], n.v[s]),
                                                a.bezierCurveTo(r[0], r[1], r[2], r[3], r[4], r[5]);
                                            r = i.applyToTriplePoints(n.o[s - 1], n.i[0], n.v[0]),
                                            a.bezierCurveTo(r[0], r[1], r[2], r[3], r[4], r[5])
                                        }
                                    this.element.globalData.renderer.save(!0),
                                    a.clip()
                                }
                            }
                            ,
                            CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty,
                            CVMaskElement.prototype.destroy = function() {
                                this.element = null
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement),
                            CVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement,
                            CVShapeElement.prototype.transformHelper = {
                                opacity: 1,
                                _opMdf: !1
                            },
                            CVShapeElement.prototype.dashResetter = [],
                            CVShapeElement.prototype.createContent = function() {
                                this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, !0, [])
                            }
                            ,
                            CVShapeElement.prototype.createStyleElement = function(t, e) {
                                var r = {
                                    data: t,
                                    type: t.ty,
                                    preTransforms: this.transformsManager.addTransformSequence(e),
                                    transforms: [],
                                    elements: [],
                                    closed: !0 === t.hd
                                }
                                  , n = {};
                                if ("fl" === t.ty || "st" === t.ty ? (n.c = PropertyFactory.getProp(this, t.c, 1, 255, this),
                                n.c.k || (r.co = "rgb(" + bmFloor(n.c.v[0]) + "," + bmFloor(n.c.v[1]) + "," + bmFloor(n.c.v[2]) + ")")) : "gf" !== t.ty && "gs" !== t.ty || (n.s = PropertyFactory.getProp(this, t.s, 1, null, this),
                                n.e = PropertyFactory.getProp(this, t.e, 1, null, this),
                                n.h = PropertyFactory.getProp(this, t.h || {
                                    k: 0
                                }, 0, .01, this),
                                n.a = PropertyFactory.getProp(this, t.a || {
                                    k: 0
                                }, 0, degToRads, this),
                                n.g = new GradientProperty(this,t.g,this)),
                                n.o = PropertyFactory.getProp(this, t.o, 0, .01, this),
                                "st" === t.ty || "gs" === t.ty) {
                                    if (r.lc = lineCapEnum[t.lc || 2],
                                    r.lj = lineJoinEnum[t.lj || 2],
                                    1 == t.lj && (r.ml = t.ml),
                                    n.w = PropertyFactory.getProp(this, t.w, 0, null, this),
                                    n.w.k || (r.wi = n.w.v),
                                    t.d) {
                                        var i = new DashProperty(this,t.d,"canvas",this);
                                        n.d = i,
                                        n.d.k || (r.da = n.d.dashArray,
                                        r.do = n.d.dashoffset[0])
                                    }
                                } else
                                    r.r = 2 === t.r ? "evenodd" : "nonzero";
                                return this.stylesList.push(r),
                                n.style = r,
                                n
                            }
                            ,
                            CVShapeElement.prototype.createGroupElement = function() {
                                return {
                                    it: [],
                                    prevViewData: []
                                }
                            }
                            ,
                            CVShapeElement.prototype.createTransformElement = function(t) {
                                return {
                                    transform: {
                                        opacity: 1,
                                        _opMdf: !1,
                                        key: this.transformsManager.getNewKey(),
                                        op: PropertyFactory.getProp(this, t.o, 0, .01, this),
                                        mProps: TransformPropertyFactory.getTransformProperty(this, t, this)
                                    }
                                }
                            }
                            ,
                            CVShapeElement.prototype.createShapeElement = function(t) {
                                var e = new CVShapeData(this,t,this.stylesList,this.transformsManager);
                                return this.shapes.push(e),
                                this.addShapeToModifiers(e),
                                e
                            }
                            ,
                            CVShapeElement.prototype.reloadShapes = function() {
                                var t;
                                this._isFirstFrame = !0;
                                var e = this.itemsData.length;
                                for (t = 0; t < e; t += 1)
                                    this.prevViewData[t] = this.itemsData[t];
                                for (this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, !0, []),
                                e = this.dynamicProperties.length,
                                t = 0; t < e; t += 1)
                                    this.dynamicProperties[t].getValue();
                                this.renderModifiers(),
                                this.transformsManager.processSequences(this._isFirstFrame)
                            }
                            ,
                            CVShapeElement.prototype.addTransformToStyleList = function(t) {
                                var e, r = this.stylesList.length;
                                for (e = 0; e < r; e += 1)
                                    this.stylesList[e].closed || this.stylesList[e].transforms.push(t)
                            }
                            ,
                            CVShapeElement.prototype.removeTransformFromStyleList = function() {
                                var t, e = this.stylesList.length;
                                for (t = 0; t < e; t += 1)
                                    this.stylesList[t].closed || this.stylesList[t].transforms.pop()
                            }
                            ,
                            CVShapeElement.prototype.closeStyles = function(t) {
                                var e, r = t.length;
                                for (e = 0; e < r; e += 1)
                                    t[e].closed = !0
                            }
                            ,
                            CVShapeElement.prototype.searchShapes = function(t, e, r, n, i) {
                                var a, o, s, l, c, h, u = t.length - 1, p = [], d = [], f = [].concat(i);
                                for (a = u; a >= 0; a -= 1) {
                                    if ((l = this.searchProcessedElement(t[a])) ? e[a] = r[l - 1] : t[a]._shouldRender = n,
                                    "fl" === t[a].ty || "st" === t[a].ty || "gf" === t[a].ty || "gs" === t[a].ty)
                                        l ? e[a].style.closed = !1 : e[a] = this.createStyleElement(t[a], f),
                                        p.push(e[a].style);
                                    else if ("gr" === t[a].ty) {
                                        if (l)
                                            for (s = e[a].it.length,
                                            o = 0; o < s; o += 1)
                                                e[a].prevViewData[o] = e[a].it[o];
                                        else
                                            e[a] = this.createGroupElement(t[a]);
                                        this.searchShapes(t[a].it, e[a].it, e[a].prevViewData, n, f)
                                    } else
                                        "tr" === t[a].ty ? (l || (h = this.createTransformElement(t[a]),
                                        e[a] = h),
                                        f.push(e[a]),
                                        this.addTransformToStyleList(e[a])) : "sh" === t[a].ty || "rc" === t[a].ty || "el" === t[a].ty || "sr" === t[a].ty ? l || (e[a] = this.createShapeElement(t[a])) : "tm" === t[a].ty || "rd" === t[a].ty || "pb" === t[a].ty ? (l ? (c = e[a]).closed = !1 : ((c = ShapeModifiers.getModifier(t[a].ty)).init(this, t[a]),
                                        e[a] = c,
                                        this.shapeModifiers.push(c)),
                                        d.push(c)) : "rp" === t[a].ty && (l ? (c = e[a]).closed = !0 : (c = ShapeModifiers.getModifier(t[a].ty),
                                        e[a] = c,
                                        c.init(this, t, a, e),
                                        this.shapeModifiers.push(c),
                                        n = !1),
                                        d.push(c));
                                    this.addProcessedElement(t[a], a + 1)
                                }
                                for (this.removeTransformFromStyleList(),
                                this.closeStyles(p),
                                u = d.length,
                                a = 0; a < u; a += 1)
                                    d[a].closed = !0
                            }
                            ,
                            CVShapeElement.prototype.renderInnerContent = function() {
                                this.transformHelper.opacity = 1,
                                this.transformHelper._opMdf = !1,
                                this.renderModifiers(),
                                this.transformsManager.processSequences(this._isFirstFrame),
                                this.renderShape(this.transformHelper, this.shapesData, this.itemsData, !0)
                            }
                            ,
                            CVShapeElement.prototype.renderShapeTransform = function(t, e) {
                                (t._opMdf || e.op._mdf || this._isFirstFrame) && (e.opacity = t.opacity,
                                e.opacity *= e.op.v,
                                e._opMdf = !0)
                            }
                            ,
                            CVShapeElement.prototype.drawLayer = function() {
                                var t, e, r, n, i, a, o, s, l, c = this.stylesList.length, h = this.globalData.renderer, u = this.globalData.canvasContext;
                                for (t = 0; t < c; t += 1)
                                    if (("st" !== (s = (l = this.stylesList[t]).type) && "gs" !== s || 0 !== l.wi) && l.data._shouldRender && 0 !== l.coOp && 0 !== this.globalData.currentGlobalAlpha) {
                                        for (h.save(),
                                        a = l.elements,
                                        "st" === s || "gs" === s ? (u.strokeStyle = "st" === s ? l.co : l.grd,
                                        u.lineWidth = l.wi,
                                        u.lineCap = l.lc,
                                        u.lineJoin = l.lj,
                                        u.miterLimit = l.ml || 0) : u.fillStyle = "fl" === s ? l.co : l.grd,
                                        h.ctxOpacity(l.coOp),
                                        "st" !== s && "gs" !== s && u.beginPath(),
                                        h.ctxTransform(l.preTransforms.finalTransform.props),
                                        r = a.length,
                                        e = 0; e < r; e += 1) {
                                            for ("st" !== s && "gs" !== s || (u.beginPath(),
                                            l.da && (u.setLineDash(l.da),
                                            u.lineDashOffset = l.do)),
                                            i = (o = a[e].trNodes).length,
                                            n = 0; n < i; n += 1)
                                                "m" === o[n].t ? u.moveTo(o[n].p[0], o[n].p[1]) : "c" === o[n].t ? u.bezierCurveTo(o[n].pts[0], o[n].pts[1], o[n].pts[2], o[n].pts[3], o[n].pts[4], o[n].pts[5]) : u.closePath();
                                            "st" !== s && "gs" !== s || (u.stroke(),
                                            l.da && u.setLineDash(this.dashResetter))
                                        }
                                        "st" !== s && "gs" !== s && u.fill(l.r),
                                        h.restore()
                                    }
                            }
                            ,
                            CVShapeElement.prototype.renderShape = function(t, e, r, n) {
                                var i, a;
                                for (a = t,
                                i = e.length - 1; i >= 0; i -= 1)
                                    "tr" === e[i].ty ? (a = r[i].transform,
                                    this.renderShapeTransform(t, a)) : "sh" === e[i].ty || "el" === e[i].ty || "rc" === e[i].ty || "sr" === e[i].ty ? this.renderPath(e[i], r[i]) : "fl" === e[i].ty ? this.renderFill(e[i], r[i], a) : "st" === e[i].ty ? this.renderStroke(e[i], r[i], a) : "gf" === e[i].ty || "gs" === e[i].ty ? this.renderGradientFill(e[i], r[i], a) : "gr" === e[i].ty ? this.renderShape(a, e[i].it, r[i].it) : e[i].ty;
                                n && this.drawLayer()
                            }
                            ,
                            CVShapeElement.prototype.renderStyledShape = function(t, e) {
                                if (this._isFirstFrame || e._mdf || t.transforms._mdf) {
                                    var r, n, i, a = t.trNodes, o = e.paths, s = o._length;
                                    a.length = 0;
                                    var l = t.transforms.finalTransform;
                                    for (i = 0; i < s; i += 1) {
                                        var c = o.shapes[i];
                                        if (c && c.v) {
                                            for (n = c._length,
                                            r = 1; r < n; r += 1)
                                                1 === r && a.push({
                                                    t: "m",
                                                    p: l.applyToPointArray(c.v[0][0], c.v[0][1], 0)
                                                }),
                                                a.push({
                                                    t: "c",
                                                    pts: l.applyToTriplePoints(c.o[r - 1], c.i[r], c.v[r])
                                                });
                                            1 === n && a.push({
                                                t: "m",
                                                p: l.applyToPointArray(c.v[0][0], c.v[0][1], 0)
                                            }),
                                            c.c && n && (a.push({
                                                t: "c",
                                                pts: l.applyToTriplePoints(c.o[r - 1], c.i[0], c.v[0])
                                            }),
                                            a.push({
                                                t: "z"
                                            }))
                                        }
                                    }
                                    t.trNodes = a
                                }
                            }
                            ,
                            CVShapeElement.prototype.renderPath = function(t, e) {
                                if (!0 !== t.hd && t._shouldRender) {
                                    var r, n = e.styledShapes.length;
                                    for (r = 0; r < n; r += 1)
                                        this.renderStyledShape(e.styledShapes[r], e.sh)
                                }
                            }
                            ,
                            CVShapeElement.prototype.renderFill = function(t, e, r) {
                                var n = e.style;
                                (e.c._mdf || this._isFirstFrame) && (n.co = "rgb(" + bmFloor(e.c.v[0]) + "," + bmFloor(e.c.v[1]) + "," + bmFloor(e.c.v[2]) + ")"),
                                (e.o._mdf || r._opMdf || this._isFirstFrame) && (n.coOp = e.o.v * r.opacity)
                            }
                            ,
                            CVShapeElement.prototype.renderGradientFill = function(t, e, r) {
                                var n, i = e.style;
                                if (!i.grd || e.g._mdf || e.s._mdf || e.e._mdf || 1 !== t.t && (e.h._mdf || e.a._mdf)) {
                                    var a, o = this.globalData.canvasContext, s = e.s.v, l = e.e.v;
                                    if (1 === t.t)
                                        n = o.createLinearGradient(s[0], s[1], l[0], l[1]);
                                    else {
                                        var c = Math.sqrt(Math.pow(s[0] - l[0], 2) + Math.pow(s[1] - l[1], 2))
                                          , h = Math.atan2(l[1] - s[1], l[0] - s[0])
                                          , u = e.h.v;
                                        u >= 1 ? u = .99 : u <= -1 && (u = -.99);
                                        var p = c * u
                                          , d = Math.cos(h + e.a.v) * p + s[0]
                                          , f = Math.sin(h + e.a.v) * p + s[1];
                                        n = o.createRadialGradient(d, f, 0, s[0], s[1], c)
                                    }
                                    var m = t.g.p
                                      , v = e.g.c
                                      , g = 1;
                                    for (a = 0; a < m; a += 1)
                                        e.g._hasOpacity && e.g._collapsable && (g = e.g.o[2 * a + 1]),
                                        n.addColorStop(v[4 * a] / 100, "rgba(" + v[4 * a + 1] + "," + v[4 * a + 2] + "," + v[4 * a + 3] + "," + g + ")");
                                    i.grd = n
                                }
                                i.coOp = e.o.v * r.opacity
                            }
                            ,
                            CVShapeElement.prototype.renderStroke = function(t, e, r) {
                                var n = e.style
                                  , i = e.d;
                                i && (i._mdf || this._isFirstFrame) && (n.da = i.dashArray,
                                n.do = i.dashoffset[0]),
                                (e.c._mdf || this._isFirstFrame) && (n.co = "rgb(" + bmFloor(e.c.v[0]) + "," + bmFloor(e.c.v[1]) + "," + bmFloor(e.c.v[2]) + ")"),
                                (e.o._mdf || r._opMdf || this._isFirstFrame) && (n.coOp = e.o.v * r.opacity),
                                (e.w._mdf || this._isFirstFrame) && (n.wi = e.w.v)
                            }
                            ,
                            CVShapeElement.prototype.destroy = function() {
                                this.shapesData = null,
                                this.globalData = null,
                                this.canvasContext = null,
                                this.stylesList.length = 0,
                                this.itemsData.length = 0
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement),
                            CVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement,
                            CVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame,
                            CVSolidElement.prototype.renderInnerContent = function() {
                                var t = this.canvasContext;
                                t.fillStyle = this.data.sc,
                                t.fillRect(0, 0, this.data.sw, this.data.sh)
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement),
                            CVTextElement.prototype.tHelper = createTag("canvas").getContext("2d"),
                            CVTextElement.prototype.buildNewText = function() {
                                var t = this.textProperty.currentData;
                                this.renderedLetters = createSizedArray(t.l ? t.l.length : 0);
                                var e = !1;
                                t.fc ? (e = !0,
                                this.values.fill = this.buildColor(t.fc)) : this.values.fill = "rgba(0,0,0,0)",
                                this.fill = e;
                                var r = !1;
                                t.sc && (r = !0,
                                this.values.stroke = this.buildColor(t.sc),
                                this.values.sWidth = t.sw);
                                var n, i, a, o, s, l, c, h, u, p, d, f, m = this.globalData.fontManager.getFontByName(t.f), v = t.l, g = this.mHelper;
                                this.stroke = r,
                                this.values.fValue = t.finalSize + "px " + this.globalData.fontManager.getFontByName(t.f).fFamily,
                                i = t.finalText.length;
                                var y = this.data.singleShape
                                  , _ = .001 * t.tr * t.finalSize
                                  , x = 0
                                  , b = 0
                                  , w = !0
                                  , S = 0;
                                for (n = 0; n < i; n += 1) {
                                    for (o = (a = this.globalData.fontManager.getCharData(t.finalText[n], m.fStyle, this.globalData.fontManager.getFontByName(t.f).fFamily)) && a.data || {},
                                    g.reset(),
                                    y && v[n].n && (x = -_,
                                    b += t.yOffset,
                                    b += w ? 1 : 0,
                                    w = !1),
                                    u = (c = o.shapes ? o.shapes[0].it : []).length,
                                    g.scale(t.finalSize / 100, t.finalSize / 100),
                                    y && this.applyTextPropertiesToMatrix(t, g, v[n].line, x, b),
                                    d = createSizedArray(u),
                                    h = 0; h < u; h += 1) {
                                        for (l = c[h].ks.k.i.length,
                                        p = c[h].ks.k,
                                        f = [],
                                        s = 1; s < l; s += 1)
                                            1 === s && f.push(g.applyToX(p.v[0][0], p.v[0][1], 0), g.applyToY(p.v[0][0], p.v[0][1], 0)),
                                            f.push(g.applyToX(p.o[s - 1][0], p.o[s - 1][1], 0), g.applyToY(p.o[s - 1][0], p.o[s - 1][1], 0), g.applyToX(p.i[s][0], p.i[s][1], 0), g.applyToY(p.i[s][0], p.i[s][1], 0), g.applyToX(p.v[s][0], p.v[s][1], 0), g.applyToY(p.v[s][0], p.v[s][1], 0));
                                        f.push(g.applyToX(p.o[s - 1][0], p.o[s - 1][1], 0), g.applyToY(p.o[s - 1][0], p.o[s - 1][1], 0), g.applyToX(p.i[0][0], p.i[0][1], 0), g.applyToY(p.i[0][0], p.i[0][1], 0), g.applyToX(p.v[0][0], p.v[0][1], 0), g.applyToY(p.v[0][0], p.v[0][1], 0)),
                                        d[h] = f
                                    }
                                    y && (x += v[n].l,
                                    x += _),
                                    this.textSpans[S] ? this.textSpans[S].elem = d : this.textSpans[S] = {
                                        elem: d
                                    },
                                    S += 1
                                }
                            }
                            ,
                            CVTextElement.prototype.renderInnerContent = function() {
                                var t, e, r, n, i, a, o = this.canvasContext;
                                o.font = this.values.fValue,
                                o.lineCap = "butt",
                                o.lineJoin = "miter",
                                o.miterLimit = 4,
                                this.data.singleShape || this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);
                                var s, l = this.textAnimator.renderedLetters, c = this.textProperty.currentData.l;
                                e = c.length;
                                var h, u, p = null, d = null, f = null;
                                for (t = 0; t < e; t += 1)
                                    if (!c[t].n) {
                                        if ((s = l[t]) && (this.globalData.renderer.save(),
                                        this.globalData.renderer.ctxTransform(s.p),
                                        this.globalData.renderer.ctxOpacity(s.o)),
                                        this.fill) {
                                            for (s && s.fc ? p !== s.fc && (p = s.fc,
                                            o.fillStyle = s.fc) : p !== this.values.fill && (p = this.values.fill,
                                            o.fillStyle = this.values.fill),
                                            n = (h = this.textSpans[t].elem).length,
                                            this.globalData.canvasContext.beginPath(),
                                            r = 0; r < n; r += 1)
                                                for (a = (u = h[r]).length,
                                                this.globalData.canvasContext.moveTo(u[0], u[1]),
                                                i = 2; i < a; i += 6)
                                                    this.globalData.canvasContext.bezierCurveTo(u[i], u[i + 1], u[i + 2], u[i + 3], u[i + 4], u[i + 5]);
                                            this.globalData.canvasContext.closePath(),
                                            this.globalData.canvasContext.fill()
                                        }
                                        if (this.stroke) {
                                            for (s && s.sw ? f !== s.sw && (f = s.sw,
                                            o.lineWidth = s.sw) : f !== this.values.sWidth && (f = this.values.sWidth,
                                            o.lineWidth = this.values.sWidth),
                                            s && s.sc ? d !== s.sc && (d = s.sc,
                                            o.strokeStyle = s.sc) : d !== this.values.stroke && (d = this.values.stroke,
                                            o.strokeStyle = this.values.stroke),
                                            n = (h = this.textSpans[t].elem).length,
                                            this.globalData.canvasContext.beginPath(),
                                            r = 0; r < n; r += 1)
                                                for (a = (u = h[r]).length,
                                                this.globalData.canvasContext.moveTo(u[0], u[1]),
                                                i = 2; i < a; i += 6)
                                                    this.globalData.canvasContext.bezierCurveTo(u[i], u[i + 1], u[i + 2], u[i + 3], u[i + 4], u[i + 5]);
                                            this.globalData.canvasContext.closePath(),
                                            this.globalData.canvasContext.stroke()
                                        }
                                        s && this.globalData.renderer.restore()
                                    }
                            }
                            ,
                            CVEffects.prototype.renderFrame = function() {}
                            ,
                            HBaseElement.prototype = {
                                checkBlendMode: function() {},
                                initRendererElement: function() {
                                    this.baseElement = createTag(this.data.tg || "div"),
                                    this.data.hasMask ? (this.svgElement = createNS("svg"),
                                    this.layerElement = createNS("g"),
                                    this.maskedElement = this.layerElement,
                                    this.svgElement.appendChild(this.layerElement),
                                    this.baseElement.appendChild(this.svgElement)) : this.layerElement = this.baseElement,
                                    styleDiv(this.baseElement)
                                },
                                createContainerElements: function() {
                                    this.renderableEffectsManager = new CVEffects(this),
                                    this.transformedElement = this.baseElement,
                                    this.maskedElement = this.layerElement,
                                    this.data.ln && this.layerElement.setAttribute("id", this.data.ln),
                                    this.data.cl && this.layerElement.setAttribute("class", this.data.cl),
                                    0 !== this.data.bm && this.setBlendMode()
                                },
                                renderElement: function() {
                                    var t = this.transformedElement ? this.transformedElement.style : {};
                                    if (this.finalTransform._matMdf) {
                                        var e = this.finalTransform.mat.toCSS();
                                        t.transform = e,
                                        t.webkitTransform = e
                                    }
                                    this.finalTransform._opMdf && (t.opacity = this.finalTransform.mProp.o.v)
                                },
                                renderFrame: function() {
                                    this.data.hd || this.hidden || (this.renderTransform(),
                                    this.renderRenderable(),
                                    this.renderElement(),
                                    this.renderInnerContent(),
                                    this._isFirstFrame && (this._isFirstFrame = !1))
                                },
                                destroy: function() {
                                    this.layerElement = null,
                                    this.transformedElement = null,
                                    this.matteElement && (this.matteElement = null),
                                    this.maskManager && (this.maskManager.destroy(),
                                    this.maskManager = null)
                                },
                                createRenderableComponents: function() {
                                    this.maskManager = new MaskElement(this.data,this,this.globalData)
                                },
                                addEffects: function() {},
                                setMatte: function() {}
                            },
                            HBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement,
                            HBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy,
                            HBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting,
                            extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement),
                            HSolidElement.prototype.createContent = function() {
                                var t;
                                this.data.hasMask ? ((t = createNS("rect")).setAttribute("width", this.data.sw),
                                t.setAttribute("height", this.data.sh),
                                t.setAttribute("fill", this.data.sc),
                                this.svgElement.setAttribute("width", this.data.sw),
                                this.svgElement.setAttribute("height", this.data.sh)) : ((t = createTag("div")).style.width = this.data.sw + "px",
                                t.style.height = this.data.sh + "px",
                                t.style.backgroundColor = this.data.sc),
                                this.layerElement.appendChild(t)
                            }
                            ,
                            extendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement),
                            HCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements,
                            HCompElement.prototype.createContainerElements = function() {
                                this._createBaseContainerElements(),
                                this.data.hasMask ? (this.svgElement.setAttribute("width", this.data.w),
                                this.svgElement.setAttribute("height", this.data.h),
                                this.transformedElement = this.baseElement) : this.transformedElement = this.layerElement
                            }
                            ,
                            HCompElement.prototype.addTo3dContainer = function(t, e) {
                                for (var r, n = 0; n < e; )
                                    this.elements[n] && this.elements[n].getBaseElement && (r = this.elements[n].getBaseElement()),
                                    n += 1;
                                r ? this.layerElement.insertBefore(t, r) : this.layerElement.appendChild(t)
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement),
                            HShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent,
                            HShapeElement.prototype.createContent = function() {
                                var t;
                                if (this.baseElement.style.fontSize = 0,
                                this.data.hasMask)
                                    this.layerElement.appendChild(this.shapesContainer),
                                    t = this.svgElement;
                                else {
                                    t = createNS("svg");
                                    var e = this.comp.data ? this.comp.data : this.globalData.compSize;
                                    t.setAttribute("width", e.w),
                                    t.setAttribute("height", e.h),
                                    t.appendChild(this.shapesContainer),
                                    this.layerElement.appendChild(t)
                                }
                                this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], !0),
                                this.filterUniqueShapes(),
                                this.shapeCont = t
                            }
                            ,
                            HShapeElement.prototype.getTransformedPoint = function(t, e) {
                                var r, n = t.length;
                                for (r = 0; r < n; r += 1)
                                    e = t[r].mProps.v.applyToPointArray(e[0], e[1], 0);
                                return e
                            }
                            ,
                            HShapeElement.prototype.calculateShapeBoundingBox = function(t, e) {
                                var r, n, i, a, o, s = t.sh.v, l = t.transformers, c = s._length;
                                if (!(c <= 1)) {
                                    for (r = 0; r < c - 1; r += 1)
                                        n = this.getTransformedPoint(l, s.v[r]),
                                        i = this.getTransformedPoint(l, s.o[r]),
                                        a = this.getTransformedPoint(l, s.i[r + 1]),
                                        o = this.getTransformedPoint(l, s.v[r + 1]),
                                        this.checkBounds(n, i, a, o, e);
                                    s.c && (n = this.getTransformedPoint(l, s.v[r]),
                                    i = this.getTransformedPoint(l, s.o[r]),
                                    a = this.getTransformedPoint(l, s.i[0]),
                                    o = this.getTransformedPoint(l, s.v[0]),
                                    this.checkBounds(n, i, a, o, e))
                                }
                            }
                            ,
                            HShapeElement.prototype.checkBounds = function(t, e, r, n, i) {
                                this.getBoundsOfCurve(t, e, r, n);
                                var a = this.shapeBoundingBox;
                                i.x = bmMin(a.left, i.x),
                                i.xMax = bmMax(a.right, i.xMax),
                                i.y = bmMin(a.top, i.y),
                                i.yMax = bmMax(a.bottom, i.yMax)
                            }
                            ,
                            HShapeElement.prototype.shapeBoundingBox = {
                                left: 0,
                                right: 0,
                                top: 0,
                                bottom: 0
                            },
                            HShapeElement.prototype.tempBoundingBox = {
                                x: 0,
                                xMax: 0,
                                y: 0,
                                yMax: 0,
                                width: 0,
                                height: 0
                            },
                            HShapeElement.prototype.getBoundsOfCurve = function(t, e, r, n) {
                                for (var i, a, o, s, l, c, h, u = [[t[0], n[0]], [t[1], n[1]]], p = 0; p < 2; ++p)
                                    a = 6 * t[p] - 12 * e[p] + 6 * r[p],
                                    i = -3 * t[p] + 9 * e[p] - 9 * r[p] + 3 * n[p],
                                    o = 3 * e[p] - 3 * t[p],
                                    a |= 0,
                                    o |= 0,
                                    0 == (i |= 0) && 0 === a || (0 === i ? (s = -o / a) > 0 && s < 1 && u[p].push(this.calculateF(s, t, e, r, n, p)) : (l = a * a - 4 * o * i) >= 0 && ((c = (-a + bmSqrt(l)) / (2 * i)) > 0 && c < 1 && u[p].push(this.calculateF(c, t, e, r, n, p)),
                                    (h = (-a - bmSqrt(l)) / (2 * i)) > 0 && h < 1 && u[p].push(this.calculateF(h, t, e, r, n, p))));
                                this.shapeBoundingBox.left = bmMin.apply(null, u[0]),
                                this.shapeBoundingBox.top = bmMin.apply(null, u[1]),
                                this.shapeBoundingBox.right = bmMax.apply(null, u[0]),
                                this.shapeBoundingBox.bottom = bmMax.apply(null, u[1])
                            }
                            ,
                            HShapeElement.prototype.calculateF = function(t, e, r, n, i, a) {
                                return bmPow(1 - t, 3) * e[a] + 3 * bmPow(1 - t, 2) * t * r[a] + 3 * (1 - t) * bmPow(t, 2) * n[a] + bmPow(t, 3) * i[a]
                            }
                            ,
                            HShapeElement.prototype.calculateBoundingBox = function(t, e) {
                                var r, n = t.length;
                                for (r = 0; r < n; r += 1)
                                    t[r] && t[r].sh ? this.calculateShapeBoundingBox(t[r], e) : t[r] && t[r].it && this.calculateBoundingBox(t[r].it, e)
                            }
                            ,
                            HShapeElement.prototype.currentBoxContains = function(t) {
                                return this.currentBBox.x <= t.x && this.currentBBox.y <= t.y && this.currentBBox.width + this.currentBBox.x >= t.x + t.width && this.currentBBox.height + this.currentBBox.y >= t.y + t.height
                            }
                            ,
                            HShapeElement.prototype.renderInnerContent = function() {
                                if (this._renderShapeFrame(),
                                !this.hidden && (this._isFirstFrame || this._mdf)) {
                                    var t = this.tempBoundingBox
                                      , e = 999999;
                                    if (t.x = e,
                                    t.xMax = -e,
                                    t.y = e,
                                    t.yMax = -e,
                                    this.calculateBoundingBox(this.itemsData, t),
                                    t.width = t.xMax < t.x ? 0 : t.xMax - t.x,
                                    t.height = t.yMax < t.y ? 0 : t.yMax - t.y,
                                    this.currentBoxContains(t))
                                        return;
                                    var r = !1;
                                    if (this.currentBBox.w !== t.width && (this.currentBBox.w = t.width,
                                    this.shapeCont.setAttribute("width", t.width),
                                    r = !0),
                                    this.currentBBox.h !== t.height && (this.currentBBox.h = t.height,
                                    this.shapeCont.setAttribute("height", t.height),
                                    r = !0),
                                    r || this.currentBBox.x !== t.x || this.currentBBox.y !== t.y) {
                                        this.currentBBox.w = t.width,
                                        this.currentBBox.h = t.height,
                                        this.currentBBox.x = t.x,
                                        this.currentBBox.y = t.y,
                                        this.shapeCont.setAttribute("viewBox", this.currentBBox.x + " " + this.currentBBox.y + " " + this.currentBBox.w + " " + this.currentBBox.h);
                                        var n = this.shapeCont.style
                                          , i = "translate(" + this.currentBBox.x + "px," + this.currentBBox.y + "px)";
                                        n.transform = i,
                                        n.webkitTransform = i
                                    }
                                }
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement),
                            HTextElement.prototype.createContent = function() {
                                if (this.isMasked = this.checkMasks(),
                                this.isMasked) {
                                    this.renderType = "svg",
                                    this.compW = this.comp.data.w,
                                    this.compH = this.comp.data.h,
                                    this.svgElement.setAttribute("width", this.compW),
                                    this.svgElement.setAttribute("height", this.compH);
                                    var t = createNS("g");
                                    this.maskedElement.appendChild(t),
                                    this.innerElem = t
                                } else
                                    this.renderType = "html",
                                    this.innerElem = this.layerElement;
                                this.checkParenting()
                            }
                            ,
                            HTextElement.prototype.buildNewText = function() {
                                var t = this.textProperty.currentData;
                                this.renderedLetters = createSizedArray(t.l ? t.l.length : 0);
                                var e = this.innerElem.style
                                  , r = t.fc ? this.buildColor(t.fc) : "rgba(0,0,0,0)";
                                e.fill = r,
                                e.color = r,
                                t.sc && (e.stroke = this.buildColor(t.sc),
                                e.strokeWidth = t.sw + "px");
                                var n, i, a = this.globalData.fontManager.getFontByName(t.f);
                                if (!this.globalData.fontManager.chars)
                                    if (e.fontSize = t.finalSize + "px",
                                    e.lineHeight = t.finalSize + "px",
                                    a.fClass)
                                        this.innerElem.className = a.fClass;
                                    else {
                                        e.fontFamily = a.fFamily;
                                        var o = t.fWeight
                                          , s = t.fStyle;
                                        e.fontStyle = s,
                                        e.fontWeight = o
                                    }
                                var l, c, h, u = t.l;
                                i = u.length;
                                var p, d = this.mHelper, f = "", m = 0;
                                for (n = 0; n < i; n += 1) {
                                    if (this.globalData.fontManager.chars ? (this.textPaths[m] ? l = this.textPaths[m] : ((l = createNS("path")).setAttribute("stroke-linecap", lineCapEnum[1]),
                                    l.setAttribute("stroke-linejoin", lineJoinEnum[2]),
                                    l.setAttribute("stroke-miterlimit", "4")),
                                    this.isMasked || (this.textSpans[m] ? h = (c = this.textSpans[m]).children[0] : ((c = createTag("div")).style.lineHeight = 0,
                                    (h = createNS("svg")).appendChild(l),
                                    styleDiv(c)))) : this.isMasked ? l = this.textPaths[m] ? this.textPaths[m] : createNS("text") : this.textSpans[m] ? (c = this.textSpans[m],
                                    l = this.textPaths[m]) : (styleDiv(c = createTag("span")),
                                    styleDiv(l = createTag("span")),
                                    c.appendChild(l)),
                                    this.globalData.fontManager.chars) {
                                        var v, g = this.globalData.fontManager.getCharData(t.finalText[n], a.fStyle, this.globalData.fontManager.getFontByName(t.f).fFamily);
                                        if (v = g ? g.data : null,
                                        d.reset(),
                                        v && v.shapes && (p = v.shapes[0].it,
                                        d.scale(t.finalSize / 100, t.finalSize / 100),
                                        f = this.createPathShape(d, p),
                                        l.setAttribute("d", f)),
                                        this.isMasked)
                                            this.innerElem.appendChild(l);
                                        else {
                                            if (this.innerElem.appendChild(c),
                                            v && v.shapes) {
                                                document.body.appendChild(h);
                                                var y = h.getBBox();
                                                h.setAttribute("width", y.width + 2),
                                                h.setAttribute("height", y.height + 2),
                                                h.setAttribute("viewBox", y.x - 1 + " " + (y.y - 1) + " " + (y.width + 2) + " " + (y.height + 2));
                                                var _ = h.style
                                                  , x = "translate(" + (y.x - 1) + "px," + (y.y - 1) + "px)";
                                                _.transform = x,
                                                _.webkitTransform = x,
                                                u[n].yOffset = y.y - 1
                                            } else
                                                h.setAttribute("width", 1),
                                                h.setAttribute("height", 1);
                                            c.appendChild(h)
                                        }
                                    } else if (l.textContent = u[n].val,
                                    l.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"),
                                    this.isMasked)
                                        this.innerElem.appendChild(l);
                                    else {
                                        this.innerElem.appendChild(c);
                                        var b = l.style
                                          , w = "translate3d(0," + -t.finalSize / 1.2 + "px,0)";
                                        b.transform = w,
                                        b.webkitTransform = w
                                    }
                                    this.isMasked ? this.textSpans[m] = l : this.textSpans[m] = c,
                                    this.textSpans[m].style.display = "block",
                                    this.textPaths[m] = l,
                                    m += 1
                                }
                                for (; m < this.textSpans.length; )
                                    this.textSpans[m].style.display = "none",
                                    m += 1
                            }
                            ,
                            HTextElement.prototype.renderInnerContent = function() {
                                var t;
                                if (this.data.singleShape) {
                                    if (!this._isFirstFrame && !this.lettersChangedFlag)
                                        return;
                                    if (this.isMasked && this.finalTransform._matMdf) {
                                        this.svgElement.setAttribute("viewBox", -this.finalTransform.mProp.p.v[0] + " " + -this.finalTransform.mProp.p.v[1] + " " + this.compW + " " + this.compH),
                                        t = this.svgElement.style;
                                        var e = "translate(" + -this.finalTransform.mProp.p.v[0] + "px," + -this.finalTransform.mProp.p.v[1] + "px)";
                                        t.transform = e,
                                        t.webkitTransform = e
                                    }
                                }
                                if (this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag),
                                this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {
                                    var r, n, i, a, o, s = 0, l = this.textAnimator.renderedLetters, c = this.textProperty.currentData.l;
                                    for (n = c.length,
                                    r = 0; r < n; r += 1)
                                        c[r].n ? s += 1 : (a = this.textSpans[r],
                                        o = this.textPaths[r],
                                        i = l[s],
                                        s += 1,
                                        i._mdf.m && (this.isMasked ? a.setAttribute("transform", i.m) : (a.style.webkitTransform = i.m,
                                        a.style.transform = i.m)),
                                        a.style.opacity = i.o,
                                        i.sw && i._mdf.sw && o.setAttribute("stroke-width", i.sw),
                                        i.sc && i._mdf.sc && o.setAttribute("stroke", i.sc),
                                        i.fc && i._mdf.fc && (o.setAttribute("fill", i.fc),
                                        o.style.color = i.fc));
                                    if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {
                                        var h = this.innerElem.getBBox();
                                        if (this.currentBBox.w !== h.width && (this.currentBBox.w = h.width,
                                        this.svgElement.setAttribute("width", h.width)),
                                        this.currentBBox.h !== h.height && (this.currentBBox.h = h.height,
                                        this.svgElement.setAttribute("height", h.height)),
                                        this.currentBBox.w !== h.width + 2 || this.currentBBox.h !== h.height + 2 || this.currentBBox.x !== h.x - 1 || this.currentBBox.y !== h.y - 1) {
                                            this.currentBBox.w = h.width + 2,
                                            this.currentBBox.h = h.height + 2,
                                            this.currentBBox.x = h.x - 1,
                                            this.currentBBox.y = h.y - 1,
                                            this.svgElement.setAttribute("viewBox", this.currentBBox.x + " " + this.currentBBox.y + " " + this.currentBBox.w + " " + this.currentBBox.h),
                                            t = this.svgElement.style;
                                            var u = "translate(" + this.currentBBox.x + "px," + this.currentBBox.y + "px)";
                                            t.transform = u,
                                            t.webkitTransform = u
                                        }
                                    }
                                }
                            }
                            ,
                            extendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement),
                            HImageElement.prototype.createContent = function() {
                                var t = this.globalData.getAssetsPath(this.assetData)
                                  , e = new Image;
                                this.data.hasMask ? (this.imageElem = createNS("image"),
                                this.imageElem.setAttribute("width", this.assetData.w + "px"),
                                this.imageElem.setAttribute("height", this.assetData.h + "px"),
                                this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink", "href", t),
                                this.layerElement.appendChild(this.imageElem),
                                this.baseElement.setAttribute("width", this.assetData.w),
                                this.baseElement.setAttribute("height", this.assetData.h)) : this.layerElement.appendChild(e),
                                e.crossOrigin = "anonymous",
                                e.src = t,
                                this.data.ln && this.baseElement.setAttribute("id", this.data.ln)
                            }
                            ,
                            extendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement),
                            HCameraElement.prototype.setup = function() {
                                var t, e, r, n, i = this.comp.threeDElements.length;
                                for (t = 0; t < i; t += 1)
                                    if ("3d" === (e = this.comp.threeDElements[t]).type) {
                                        r = e.perspectiveElem.style,
                                        n = e.container.style;
                                        var a = this.pe.v + "px"
                                          , o = "0px 0px 0px"
                                          , s = "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";
                                        r.perspective = a,
                                        r.webkitPerspective = a,
                                        n.transformOrigin = o,
                                        n.mozTransformOrigin = o,
                                        n.webkitTransformOrigin = o,
                                        r.transform = s,
                                        r.webkitTransform = s
                                    }
                            }
                            ,
                            HCameraElement.prototype.createElements = function() {}
                            ,
                            HCameraElement.prototype.hide = function() {}
                            ,
                            HCameraElement.prototype.renderFrame = function() {
                                var t, e, r = this._isFirstFrame;
                                if (this.hierarchy)
                                    for (e = this.hierarchy.length,
                                    t = 0; t < e; t += 1)
                                        r = this.hierarchy[t].finalTransform.mProp._mdf || r;
                                if (r || this.pe._mdf || this.p && this.p._mdf || this.px && (this.px._mdf || this.py._mdf || this.pz._mdf) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || this.a && this.a._mdf) {
                                    if (this.mat.reset(),
                                    this.hierarchy)
                                        for (t = e = this.hierarchy.length - 1; t >= 0; t -= 1) {
                                            var n = this.hierarchy[t].finalTransform.mProp;
                                            this.mat.translate(-n.p.v[0], -n.p.v[1], n.p.v[2]),
                                            this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),
                                            this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),
                                            this.mat.scale(1 / n.s.v[0], 1 / n.s.v[1], 1 / n.s.v[2]),
                                            this.mat.translate(n.a.v[0], n.a.v[1], n.a.v[2])
                                        }
                                    if (this.p ? this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]) : this.mat.translate(-this.px.v, -this.py.v, this.pz.v),
                                    this.a) {
                                        var i;
                                        i = this.p ? [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]] : [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];
                                        var a = Math.sqrt(Math.pow(i[0], 2) + Math.pow(i[1], 2) + Math.pow(i[2], 2))
                                          , o = [i[0] / a, i[1] / a, i[2] / a]
                                          , s = Math.sqrt(o[2] * o[2] + o[0] * o[0])
                                          , l = Math.atan2(o[1], s)
                                          , c = Math.atan2(o[0], -o[2]);
                                        this.mat.rotateY(c).rotateX(-l)
                                    }
                                    this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),
                                    this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),
                                    this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0),
                                    this.mat.translate(0, 0, this.pe.v);
                                    var h = !this._prevMat.equals(this.mat);
                                    if ((h || this.pe._mdf) && this.comp.threeDElements) {
                                        var u, p, d;
                                        for (e = this.comp.threeDElements.length,
                                        t = 0; t < e; t += 1)
                                            if ("3d" === (u = this.comp.threeDElements[t]).type) {
                                                if (h) {
                                                    var f = this.mat.toCSS();
                                                    (d = u.container.style).transform = f,
                                                    d.webkitTransform = f
                                                }
                                                this.pe._mdf && ((p = u.perspectiveElem.style).perspective = this.pe.v + "px",
                                                p.webkitPerspective = this.pe.v + "px")
                                            }
                                        this.mat.clone(this._prevMat)
                                    }
                                }
                                this._isFirstFrame = !1
                            }
                            ,
                            HCameraElement.prototype.prepareFrame = function(t) {
                                this.prepareProperties(t, !0)
                            }
                            ,
                            HCameraElement.prototype.destroy = function() {}
                            ,
                            HCameraElement.prototype.getBaseElement = function() {
                                return null
                            }
                            ,
                            HEffects.prototype.renderFrame = function() {}
                            ;
                            var animationManager = function() {
                                var t = {}
                                  , e = []
                                  , r = 0
                                  , n = 0
                                  , i = 0
                                  , a = !0
                                  , o = !1;
                                function s(t) {
                                    for (var r = 0, i = t.target; r < n; )
                                        e[r].animation === i && (e.splice(r, 1),
                                        r -= 1,
                                        n -= 1,
                                        i.isPaused || h()),
                                        r += 1
                                }
                                function l(t, r) {
                                    if (!t)
                                        return null;
                                    for (var i = 0; i < n; ) {
                                        if (e[i].elem === t && null !== e[i].elem)
                                            return e[i].animation;
                                        i += 1
                                    }
                                    var a = new AnimationItem;
                                    return u(a, t),
                                    a.setData(t, r),
                                    a
                                }
                                function c() {
                                    i += 1,
                                    f()
                                }
                                function h() {
                                    i -= 1
                                }
                                function u(t, r) {
                                    t.addEventListener("destroy", s),
                                    t.addEventListener("_active", c),
                                    t.addEventListener("_idle", h),
                                    e.push({
                                        elem: r,
                                        animation: t
                                    }),
                                    n += 1
                                }
                                function p(t) {
                                    var s, l = t - r;
                                    for (s = 0; s < n; s += 1)
                                        e[s].animation.advanceTime(l);
                                    r = t,
                                    i && !o ? window.requestAnimationFrame(p) : a = !0
                                }
                                function d(t) {
                                    r = t,
                                    window.requestAnimationFrame(p)
                                }
                                function f() {
                                    !o && i && a && (window.requestAnimationFrame(d),
                                    a = !1)
                                }
                                return t.registerAnimation = l,
                                t.loadAnimation = function(t) {
                                    var e = new AnimationItem;
                                    return u(e, null),
                                    e.setParams(t),
                                    e
                                }
                                ,
                                t.setSpeed = function(t, r) {
                                    var i;
                                    for (i = 0; i < n; i += 1)
                                        e[i].animation.setSpeed(t, r)
                                }
                                ,
                                t.setDirection = function(t, r) {
                                    var i;
                                    for (i = 0; i < n; i += 1)
                                        e[i].animation.setDirection(t, r)
                                }
                                ,
                                t.play = function(t) {
                                    var r;
                                    for (r = 0; r < n; r += 1)
                                        e[r].animation.play(t)
                                }
                                ,
                                t.pause = function(t) {
                                    var r;
                                    for (r = 0; r < n; r += 1)
                                        e[r].animation.pause(t)
                                }
                                ,
                                t.stop = function(t) {
                                    var r;
                                    for (r = 0; r < n; r += 1)
                                        e[r].animation.stop(t)
                                }
                                ,
                                t.togglePause = function(t) {
                                    var r;
                                    for (r = 0; r < n; r += 1)
                                        e[r].animation.togglePause(t)
                                }
                                ,
                                t.searchAnimations = function(t, e, r) {
                                    var n, i = [].concat([].slice.call(document.getElementsByClassName("lottie")), [].slice.call(document.getElementsByClassName("bodymovin"))), a = i.length;
                                    for (n = 0; n < a; n += 1)
                                        r && i[n].setAttribute("data-bm-type", r),
                                        l(i[n], t);
                                    if (e && 0 === a) {
                                        r || (r = "svg");
                                        var o = document.getElementsByTagName("body")[0];
                                        o.innerText = "";
                                        var s = createTag("div");
                                        s.style.width = "100%",
                                        s.style.height = "100%",
                                        s.setAttribute("data-bm-type", r),
                                        o.appendChild(s),
                                        l(s, t)
                                    }
                                }
                                ,
                                t.resize = function() {
                                    var t;
                                    for (t = 0; t < n; t += 1)
                                        e[t].animation.resize()
                                }
                                ,
                                t.goToAndStop = function(t, r, i) {
                                    var a;
                                    for (a = 0; a < n; a += 1)
                                        e[a].animation.goToAndStop(t, r, i)
                                }
                                ,
                                t.destroy = function(t) {
                                    var r;
                                    for (r = n - 1; r >= 0; r -= 1)
                                        e[r].animation.destroy(t)
                                }
                                ,
                                t.freeze = function() {
                                    o = !0
                                }
                                ,
                                t.unfreeze = function() {
                                    o = !1,
                                    f()
                                }
                                ,
                                t.setVolume = function(t, r) {
                                    var i;
                                    for (i = 0; i < n; i += 1)
                                        e[i].animation.setVolume(t, r)
                                }
                                ,
                                t.mute = function(t) {
                                    var r;
                                    for (r = 0; r < n; r += 1)
                                        e[r].animation.mute(t)
                                }
                                ,
                                t.unmute = function(t) {
                                    var r;
                                    for (r = 0; r < n; r += 1)
                                        e[r].animation.unmute(t)
                                }
                                ,
                                t.getRegisteredAnimations = function() {
                                    var t, r = e.length, n = [];
                                    for (t = 0; t < r; t += 1)
                                        n.push(e[t].animation);
                                    return n
                                }
                                ,
                                t
                            }()
                              , AnimationItem = function() {
                                this._cbs = [],
                                this.name = "",
                                this.path = "",
                                this.isLoaded = !1,
                                this.currentFrame = 0,
                                this.currentRawFrame = 0,
                                this.firstFrame = 0,
                                this.totalFrames = 0,
                                this.frameRate = 0,
                                this.frameMult = 0,
                                this.playSpeed = 1,
                                this.playDirection = 1,
                                this.playCount = 0,
                                this.animationData = {},
                                this.assets = [],
                                this.isPaused = !0,
                                this.autoplay = !1,
                                this.loop = !0,
                                this.renderer = null,
                                this.animationID = createElementID(),
                                this.assetsPath = "",
                                this.timeCompleted = 0,
                                this.segmentPos = 0,
                                this.isSubframeEnabled = subframeEnabled,
                                this.segments = [],
                                this._idle = !0,
                                this._completedLoop = !1,
                                this.projectInterface = ProjectInterface(),
                                this.imagePreloader = new ImagePreloader,
                                this.audioController = audioControllerFactory(),
                                this.markers = [],
                                this.configAnimation = this.configAnimation.bind(this),
                                this.onSetupError = this.onSetupError.bind(this),
                                this.onSegmentComplete = this.onSegmentComplete.bind(this)
                            };
                            extendPrototype([BaseEvent], AnimationItem),
                            AnimationItem.prototype.setParams = function(t) {
                                (t.wrapper || t.container) && (this.wrapper = t.wrapper || t.container);
                                var e = "svg";
                                switch (t.animType ? e = t.animType : t.renderer && (e = t.renderer),
                                e) {
                                case "canvas":
                                    this.renderer = new CanvasRenderer(this,t.rendererSettings);
                                    break;
                                case "svg":
                                    this.renderer = new SVGRenderer(this,t.rendererSettings);
                                    break;
                                default:
                                    this.renderer = new HybridRenderer(this,t.rendererSettings)
                                }
                                this.imagePreloader.setCacheType(e, this.renderer.globalData.defs),
                                this.renderer.setProjectInterface(this.projectInterface),
                                this.animType = e,
                                "" === t.loop || null === t.loop || void 0 === t.loop || !0 === t.loop ? this.loop = !0 : !1 === t.loop ? this.loop = !1 : this.loop = parseInt(t.loop, 10),
                                this.autoplay = !("autoplay"in t) || t.autoplay,
                                this.name = t.name ? t.name : "",
                                this.autoloadSegments = !Object.prototype.hasOwnProperty.call(t, "autoloadSegments") || t.autoloadSegments,
                                this.assetsPath = t.assetsPath,
                                this.initialSegment = t.initialSegment,
                                t.audioFactory && this.audioController.setAudioFactory(t.audioFactory),
                                t.animationData ? this.setupAnimation(t.animationData) : t.path && (-1 !== t.path.lastIndexOf("\\") ? this.path = t.path.substr(0, t.path.lastIndexOf("\\") + 1) : this.path = t.path.substr(0, t.path.lastIndexOf("/") + 1),
                                this.fileName = t.path.substr(t.path.lastIndexOf("/") + 1),
                                this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf(".json")),
                                dataManager.loadAnimation(t.path, this.configAnimation, this.onSetupError))
                            }
                            ,
                            AnimationItem.prototype.onSetupError = function() {
                                this.trigger("data_failed")
                            }
                            ,
                            AnimationItem.prototype.setupAnimation = function(t) {
                                dataManager.completeAnimation(t, this.configAnimation)
                            }
                            ,
                            AnimationItem.prototype.setData = function(t, e) {
                                e && "object" != _typeof2(e) && (e = JSON.parse(e));
                                var r = {
                                    wrapper: t,
                                    animationData: e
                                }
                                  , n = t.attributes;
                                r.path = n.getNamedItem("data-animation-path") ? n.getNamedItem("data-animation-path").value : n.getNamedItem("data-bm-path") ? n.getNamedItem("data-bm-path").value : n.getNamedItem("bm-path") ? n.getNamedItem("bm-path").value : "",
                                r.animType = n.getNamedItem("data-anim-type") ? n.getNamedItem("data-anim-type").value : n.getNamedItem("data-bm-type") ? n.getNamedItem("data-bm-type").value : n.getNamedItem("bm-type") ? n.getNamedItem("bm-type").value : n.getNamedItem("data-bm-renderer") ? n.getNamedItem("data-bm-renderer").value : n.getNamedItem("bm-renderer") ? n.getNamedItem("bm-renderer").value : "canvas";
                                var i = n.getNamedItem("data-anim-loop") ? n.getNamedItem("data-anim-loop").value : n.getNamedItem("data-bm-loop") ? n.getNamedItem("data-bm-loop").value : n.getNamedItem("bm-loop") ? n.getNamedItem("bm-loop").value : "";
                                "false" === i ? r.loop = !1 : "true" === i ? r.loop = !0 : "" !== i && (r.loop = parseInt(i, 10));
                                var a = n.getNamedItem("data-anim-autoplay") ? n.getNamedItem("data-anim-autoplay").value : n.getNamedItem("data-bm-autoplay") ? n.getNamedItem("data-bm-autoplay").value : !n.getNamedItem("bm-autoplay") || n.getNamedItem("bm-autoplay").value;
                                r.autoplay = "false" !== a,
                                r.name = n.getNamedItem("data-name") ? n.getNamedItem("data-name").value : n.getNamedItem("data-bm-name") ? n.getNamedItem("data-bm-name").value : n.getNamedItem("bm-name") ? n.getNamedItem("bm-name").value : "",
                                "false" === (n.getNamedItem("data-anim-prerender") ? n.getNamedItem("data-anim-prerender").value : n.getNamedItem("data-bm-prerender") ? n.getNamedItem("data-bm-prerender").value : n.getNamedItem("bm-prerender") ? n.getNamedItem("bm-prerender").value : "") && (r.prerender = !1),
                                this.setParams(r)
                            }
                            ,
                            AnimationItem.prototype.includeLayers = function(t) {
                                t.op > this.animationData.op && (this.animationData.op = t.op,
                                this.totalFrames = Math.floor(t.op - this.animationData.ip));
                                var e, r, n = this.animationData.layers, i = n.length, a = t.layers, o = a.length;
                                for (r = 0; r < o; r += 1)
                                    for (e = 0; e < i; ) {
                                        if (n[e].id === a[r].id) {
                                            n[e] = a[r];
                                            break
                                        }
                                        e += 1
                                    }
                                if ((t.chars || t.fonts) && (this.renderer.globalData.fontManager.addChars(t.chars),
                                this.renderer.globalData.fontManager.addFonts(t.fonts, this.renderer.globalData.defs)),
                                t.assets)
                                    for (i = t.assets.length,
                                    e = 0; e < i; e += 1)
                                        this.animationData.assets.push(t.assets[e]);
                                this.animationData.__complete = !1,
                                dataManager.completeAnimation(this.animationData, this.onSegmentComplete)
                            }
                            ,
                            AnimationItem.prototype.onSegmentComplete = function(t) {
                                this.animationData = t,
                                expressionsPlugin && expressionsPlugin.initExpressions(this),
                                this.loadNextSegment()
                            }
                            ,
                            AnimationItem.prototype.loadNextSegment = function() {
                                var t = this.animationData.segments;
                                if (!t || 0 === t.length || !this.autoloadSegments)
                                    return this.trigger("data_ready"),
                                    void (this.timeCompleted = this.totalFrames);
                                var e = t.shift();
                                this.timeCompleted = e.time * this.frameRate;
                                var r = this.path + this.fileName + "_" + this.segmentPos + ".json";
                                this.segmentPos += 1,
                                dataManager.loadData(r, this.includeLayers.bind(this), function() {
                                    this.trigger("data_failed")
                                }
                                .bind(this))
                            }
                            ,
                            AnimationItem.prototype.loadSegments = function() {
                                this.animationData.segments || (this.timeCompleted = this.totalFrames),
                                this.loadNextSegment()
                            }
                            ,
                            AnimationItem.prototype.imagesLoaded = function() {
                                this.trigger("loaded_images"),
                                this.checkLoaded()
                            }
                            ,
                            AnimationItem.prototype.preloadImages = function() {
                                this.imagePreloader.setAssetsPath(this.assetsPath),
                                this.imagePreloader.setPath(this.path),
                                this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this))
                            }
                            ,
                            AnimationItem.prototype.configAnimation = function(t) {
                                if (this.renderer)
                                    try {
                                        this.animationData = t,
                                        this.initialSegment ? (this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]),
                                        this.firstFrame = Math.round(this.initialSegment[0])) : (this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip),
                                        this.firstFrame = Math.round(this.animationData.ip)),
                                        this.renderer.configAnimation(t),
                                        t.assets || (t.assets = []),
                                        this.assets = this.animationData.assets,
                                        this.frameRate = this.animationData.fr,
                                        this.frameMult = this.animationData.fr / 1e3,
                                        this.renderer.searchExtraCompositions(t.assets),
                                        this.markers = markerParser(t.markers || []),
                                        this.trigger("config_ready"),
                                        this.preloadImages(),
                                        this.loadSegments(),
                                        this.updaFrameModifier(),
                                        this.waitForFontsLoaded(),
                                        this.isPaused && this.audioController.pause()
                                    } catch (t) {
                                        this.triggerConfigError(t)
                                    }
                            }
                            ,
                            AnimationItem.prototype.waitForFontsLoaded = function() {
                                this.renderer && (this.renderer.globalData.fontManager.isLoaded ? this.checkLoaded() : setTimeout(this.waitForFontsLoaded.bind(this), 20))
                            }
                            ,
                            AnimationItem.prototype.checkLoaded = function() {
                                !this.isLoaded && this.renderer.globalData.fontManager.isLoaded && (this.imagePreloader.loadedImages() || "canvas" !== this.renderer.rendererType) && this.imagePreloader.loadedFootages() && (this.isLoaded = !0,
                                expressionsPlugin && expressionsPlugin.initExpressions(this),
                                this.renderer.initItems(),
                                setTimeout(function() {
                                    this.trigger("DOMLoaded")
                                }
                                .bind(this), 0),
                                this.gotoFrame(),
                                this.autoplay && this.play())
                            }
                            ,
                            AnimationItem.prototype.resize = function() {
                                this.renderer.updateContainerSize()
                            }
                            ,
                            AnimationItem.prototype.setSubframe = function(t) {
                                this.isSubframeEnabled = !!t
                            }
                            ,
                            AnimationItem.prototype.gotoFrame = function() {
                                this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame,
                                this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted && (this.currentFrame = this.timeCompleted),
                                this.trigger("enterFrame"),
                                this.renderFrame(),
                                this.trigger("drawnFrame")
                            }
                            ,
                            AnimationItem.prototype.renderFrame = function() {
                                if (!1 !== this.isLoaded && this.renderer)
                                    try {
                                        this.renderer.renderFrame(this.currentFrame + this.firstFrame)
                                    } catch (t) {
                                        this.triggerRenderFrameError(t)
                                    }
                            }
                            ,
                            AnimationItem.prototype.play = function(t) {
                                t && this.name !== t || !0 === this.isPaused && (this.isPaused = !1,
                                this.audioController.resume(),
                                this._idle && (this._idle = !1,
                                this.trigger("_active")))
                            }
                            ,
                            AnimationItem.prototype.pause = function(t) {
                                t && this.name !== t || !1 === this.isPaused && (this.isPaused = !0,
                                this._idle = !0,
                                this.trigger("_idle"),
                                this.audioController.pause())
                            }
                            ,
                            AnimationItem.prototype.togglePause = function(t) {
                                t && this.name !== t || (!0 === this.isPaused ? this.play() : this.pause())
                            }
                            ,
                            AnimationItem.prototype.stop = function(t) {
                                t && this.name !== t || (this.pause(),
                                this.playCount = 0,
                                this._completedLoop = !1,
                                this.setCurrentRawFrameValue(0))
                            }
                            ,
                            AnimationItem.prototype.getMarkerData = function(t) {
                                for (var e, r = 0; r < this.markers.length; r += 1)
                                    if ((e = this.markers[r]).payload && e.payload.name === t)
                                        return e;
                                return null
                            }
                            ,
                            AnimationItem.prototype.goToAndStop = function(t, e, r) {
                                if (!r || this.name === r) {
                                    var n = Number(t);
                                    if (isNaN(n)) {
                                        var i = this.getMarkerData(t);
                                        i && this.goToAndStop(i.time, !0)
                                    } else
                                        e ? this.setCurrentRawFrameValue(t) : this.setCurrentRawFrameValue(t * this.frameModifier);
                                    this.pause()
                                }
                            }
                            ,
                            AnimationItem.prototype.goToAndPlay = function(t, e, r) {
                                if (!r || this.name === r) {
                                    var n = Number(t);
                                    if (isNaN(n)) {
                                        var i = this.getMarkerData(t);
                                        i && (i.duration ? this.playSegments([i.time, i.time + i.duration], !0) : this.goToAndStop(i.time, !0))
                                    } else
                                        this.goToAndStop(n, e, r);
                                    this.play()
                                }
                            }
                            ,
                            AnimationItem.prototype.advanceTime = function(t) {
                                if (!0 !== this.isPaused && !1 !== this.isLoaded) {
                                    var e = this.currentRawFrame + t * this.frameModifier
                                      , r = !1;
                                    e >= this.totalFrames - 1 && this.frameModifier > 0 ? this.loop && this.playCount !== this.loop ? e >= this.totalFrames ? (this.playCount += 1,
                                    this.checkSegments(e % this.totalFrames) || (this.setCurrentRawFrameValue(e % this.totalFrames),
                                    this._completedLoop = !0,
                                    this.trigger("loopComplete"))) : this.setCurrentRawFrameValue(e) : this.checkSegments(e > this.totalFrames ? e % this.totalFrames : 0) || (r = !0,
                                    e = this.totalFrames - 1) : e < 0 ? this.checkSegments(e % this.totalFrames) || (!this.loop || this.playCount-- <= 0 && !0 !== this.loop ? (r = !0,
                                    e = 0) : (this.setCurrentRawFrameValue(this.totalFrames + e % this.totalFrames),
                                    this._completedLoop ? this.trigger("loopComplete") : this._completedLoop = !0)) : this.setCurrentRawFrameValue(e),
                                    r && (this.setCurrentRawFrameValue(e),
                                    this.pause(),
                                    this.trigger("complete"))
                                }
                            }
                            ,
                            AnimationItem.prototype.adjustSegment = function(t, e) {
                                this.playCount = 0,
                                t[1] < t[0] ? (this.frameModifier > 0 && (this.playSpeed < 0 ? this.setSpeed(-this.playSpeed) : this.setDirection(-1)),
                                this.totalFrames = t[0] - t[1],
                                this.timeCompleted = this.totalFrames,
                                this.firstFrame = t[1],
                                this.setCurrentRawFrameValue(this.totalFrames - .001 - e)) : t[1] > t[0] && (this.frameModifier < 0 && (this.playSpeed < 0 ? this.setSpeed(-this.playSpeed) : this.setDirection(1)),
                                this.totalFrames = t[1] - t[0],
                                this.timeCompleted = this.totalFrames,
                                this.firstFrame = t[0],
                                this.setCurrentRawFrameValue(.001 + e)),
                                this.trigger("segmentStart")
                            }
                            ,
                            AnimationItem.prototype.setSegment = function(t, e) {
                                var r = -1;
                                this.isPaused && (this.currentRawFrame + this.firstFrame < t ? r = t : this.currentRawFrame + this.firstFrame > e && (r = e - t)),
                                this.firstFrame = t,
                                this.totalFrames = e - t,
                                this.timeCompleted = this.totalFrames,
                                -1 !== r && this.goToAndStop(r, !0)
                            }
                            ,
                            AnimationItem.prototype.playSegments = function(t, e) {
                                if (e && (this.segments.length = 0),
                                "object" == _typeof2(t[0])) {
                                    var r, n = t.length;
                                    for (r = 0; r < n; r += 1)
                                        this.segments.push(t[r])
                                } else
                                    this.segments.push(t);
                                this.segments.length && e && this.adjustSegment(this.segments.shift(), 0),
                                this.isPaused && this.play()
                            }
                            ,
                            AnimationItem.prototype.resetSegments = function(t) {
                                this.segments.length = 0,
                                this.segments.push([this.animationData.ip, this.animationData.op]),
                                t && this.checkSegments(0)
                            }
                            ,
                            AnimationItem.prototype.checkSegments = function(t) {
                                return !!this.segments.length && (this.adjustSegment(this.segments.shift(), t),
                                !0)
                            }
                            ,
                            AnimationItem.prototype.destroy = function(t) {
                                t && this.name !== t || !this.renderer || (this.renderer.destroy(),
                                this.imagePreloader.destroy(),
                                this.trigger("destroy"),
                                this._cbs = null,
                                this.onEnterFrame = null,
                                this.onLoopComplete = null,
                                this.onComplete = null,
                                this.onSegmentStart = null,
                                this.onDestroy = null,
                                this.renderer = null,
                                this.renderer = null,
                                this.imagePreloader = null,
                                this.projectInterface = null)
                            }
                            ,
                            AnimationItem.prototype.setCurrentRawFrameValue = function(t) {
                                this.currentRawFrame = t,
                                this.gotoFrame()
                            }
                            ,
                            AnimationItem.prototype.setSpeed = function(t) {
                                this.playSpeed = t,
                                this.updaFrameModifier()
                            }
                            ,
                            AnimationItem.prototype.setDirection = function(t) {
                                this.playDirection = t < 0 ? -1 : 1,
                                this.updaFrameModifier()
                            }
                            ,
                            AnimationItem.prototype.setVolume = function(t, e) {
                                e && this.name !== e || this.audioController.setVolume(t)
                            }
                            ,
                            AnimationItem.prototype.getVolume = function() {
                                return this.audioController.getVolume()
                            }
                            ,
                            AnimationItem.prototype.mute = function(t) {
                                t && this.name !== t || this.audioController.mute()
                            }
                            ,
                            AnimationItem.prototype.unmute = function(t) {
                                t && this.name !== t || this.audioController.unmute()
                            }
                            ,
                            AnimationItem.prototype.updaFrameModifier = function() {
                                this.frameModifier = this.frameMult * this.playSpeed * this.playDirection,
                                this.audioController.setRate(this.playSpeed * this.playDirection)
                            }
                            ,
                            AnimationItem.prototype.getPath = function() {
                                return this.path
                            }
                            ,
                            AnimationItem.prototype.getAssetsPath = function(t) {
                                var e = "";
                                if (t.e)
                                    e = t.p;
                                else if (this.assetsPath) {
                                    var r = t.p;
                                    -1 !== r.indexOf("images/") && (r = r.split("/")[1]),
                                    e = this.assetsPath + r
                                } else
                                    e = this.path,
                                    e += t.u ? t.u : "",
                                    e += t.p;
                                return e
                            }
                            ,
                            AnimationItem.prototype.getAssetData = function(t) {
                                for (var e = 0, r = this.assets.length; e < r; ) {
                                    if (t === this.assets[e].id)
                                        return this.assets[e];
                                    e += 1
                                }
                                return null
                            }
                            ,
                            AnimationItem.prototype.hide = function() {
                                this.renderer.hide()
                            }
                            ,
                            AnimationItem.prototype.show = function() {
                                this.renderer.show()
                            }
                            ,
                            AnimationItem.prototype.getDuration = function(t) {
                                return t ? this.totalFrames : this.totalFrames / this.frameRate
                            }
                            ,
                            AnimationItem.prototype.trigger = function(t) {
                                if (this._cbs && this._cbs[t])
                                    switch (t) {
                                    case "enterFrame":
                                    case "drawnFrame":
                                        this.triggerEvent(t, new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));
                                        break;
                                    case "loopComplete":
                                        this.triggerEvent(t, new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));
                                        break;
                                    case "complete":
                                        this.triggerEvent(t, new BMCompleteEvent(t,this.frameMult));
                                        break;
                                    case "segmentStart":
                                        this.triggerEvent(t, new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));
                                        break;
                                    case "destroy":
                                        this.triggerEvent(t, new BMDestroyEvent(t,this));
                                        break;
                                    default:
                                        this.triggerEvent(t)
                                    }
                                "enterFrame" === t && this.onEnterFrame && this.onEnterFrame.call(this, new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),
                                "loopComplete" === t && this.onLoopComplete && this.onLoopComplete.call(this, new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),
                                "complete" === t && this.onComplete && this.onComplete.call(this, new BMCompleteEvent(t,this.frameMult)),
                                "segmentStart" === t && this.onSegmentStart && this.onSegmentStart.call(this, new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),
                                "destroy" === t && this.onDestroy && this.onDestroy.call(this, new BMDestroyEvent(t,this))
                            }
                            ,
                            AnimationItem.prototype.triggerRenderFrameError = function(t) {
                                var e = new BMRenderFrameErrorEvent(t,this.currentFrame);
                                this.triggerEvent("error", e),
                                this.onError && this.onError.call(this, e)
                            }
                            ,
                            AnimationItem.prototype.triggerConfigError = function(t) {
                                var e = new BMConfigErrorEvent(t,this.currentFrame);
                                this.triggerEvent("error", e),
                                this.onError && this.onError.call(this, e)
                            }
                            ;
                            var Expressions = function() {
                                var t = {
                                    initExpressions: function(t) {
                                        var e = 0
                                          , r = [];
                                        t.renderer.compInterface = CompExpressionInterface(t.renderer),
                                        t.renderer.globalData.projectInterface.registerComposition(t.renderer),
                                        t.renderer.globalData.pushExpression = function() {
                                            e += 1
                                        }
                                        ,
                                        t.renderer.globalData.popExpression = function() {
                                            0 == (e -= 1) && function() {
                                                var t, e = r.length;
                                                for (t = 0; t < e; t += 1)
                                                    r[t].release();
                                                r.length = 0
                                            }()
                                        }
                                        ,
                                        t.renderer.globalData.registerExpressionProperty = function(t) {
                                            -1 === r.indexOf(t) && r.push(t)
                                        }
                                    }
                                };
                                return t
                            }();
                            expressionsPlugin = Expressions;
                            var ExpressionManager = function() {
                                var ob = {}
                                  , Math = BMMath
                                  , window = null
                                  , document = null
                                  , XMLHttpRequest = null
                                  , fetch = null
                                  , frames = null;
                                function $bm_isInstanceOfArray(t) {
                                    return t.constructor === Array || t.constructor === Float32Array
                                }
                                function isNumerable(t, e) {
                                    return "number" === t || "boolean" === t || "string" === t || e instanceof Number
                                }
                                function $bm_neg(t) {
                                    var e = _typeof2(t);
                                    if ("number" === e || "boolean" === e || t instanceof Number)
                                        return -t;
                                    if ($bm_isInstanceOfArray(t)) {
                                        var r, n = t.length, i = [];
                                        for (r = 0; r < n; r += 1)
                                            i[r] = -t[r];
                                        return i
                                    }
                                    return t.propType ? t.v : -t
                                }
                                var easeInBez = BezierFactory.getBezierEasing(.333, 0, .833, .833, "easeIn").get
                                  , easeOutBez = BezierFactory.getBezierEasing(.167, .167, .667, 1, "easeOut").get
                                  , easeInOutBez = BezierFactory.getBezierEasing(.33, 0, .667, 1, "easeInOut").get;
                                function sum(t, e) {
                                    var r = _typeof2(t)
                                      , n = _typeof2(e);
                                    if ("string" === r || "string" === n)
                                        return t + e;
                                    if (isNumerable(r, t) && isNumerable(n, e))
                                        return t + e;
                                    if ($bm_isInstanceOfArray(t) && isNumerable(n, e))
                                        return (t = t.slice(0))[0] += e,
                                        t;
                                    if (isNumerable(r, t) && $bm_isInstanceOfArray(e))
                                        return (e = e.slice(0))[0] = t + e[0],
                                        e;
                                    if ($bm_isInstanceOfArray(t) && $bm_isInstanceOfArray(e)) {
                                        for (var i = 0, a = t.length, o = e.length, s = []; i < a || i < o; )
                                            ("number" == typeof t[i] || t[i]instanceof Number) && ("number" == typeof e[i] || e[i]instanceof Number) ? s[i] = t[i] + e[i] : s[i] = void 0 === e[i] ? t[i] : t[i] || e[i],
                                            i += 1;
                                        return s
                                    }
                                    return 0
                                }
                                var add = sum;
                                function sub(t, e) {
                                    var r = _typeof2(t)
                                      , n = _typeof2(e);
                                    if (isNumerable(r, t) && isNumerable(n, e))
                                        return "string" === r && (t = parseInt(t, 10)),
                                        "string" === n && (e = parseInt(e, 10)),
                                        t - e;
                                    if ($bm_isInstanceOfArray(t) && isNumerable(n, e))
                                        return (t = t.slice(0))[0] -= e,
                                        t;
                                    if (isNumerable(r, t) && $bm_isInstanceOfArray(e))
                                        return (e = e.slice(0))[0] = t - e[0],
                                        e;
                                    if ($bm_isInstanceOfArray(t) && $bm_isInstanceOfArray(e)) {
                                        for (var i = 0, a = t.length, o = e.length, s = []; i < a || i < o; )
                                            ("number" == typeof t[i] || t[i]instanceof Number) && ("number" == typeof e[i] || e[i]instanceof Number) ? s[i] = t[i] - e[i] : s[i] = void 0 === e[i] ? t[i] : t[i] || e[i],
                                            i += 1;
                                        return s
                                    }
                                    return 0
                                }
                                function mul(t, e) {
                                    var r, n, i, a = _typeof2(t), o = _typeof2(e);
                                    if (isNumerable(a, t) && isNumerable(o, e))
                                        return t * e;
                                    if ($bm_isInstanceOfArray(t) && isNumerable(o, e)) {
                                        for (i = t.length,
                                        r = createTypedArray("float32", i),
                                        n = 0; n < i; n += 1)
                                            r[n] = t[n] * e;
                                        return r
                                    }
                                    if (isNumerable(a, t) && $bm_isInstanceOfArray(e)) {
                                        for (i = e.length,
                                        r = createTypedArray("float32", i),
                                        n = 0; n < i; n += 1)
                                            r[n] = t * e[n];
                                        return r
                                    }
                                    return 0
                                }
                                function div(t, e) {
                                    var r, n, i, a = _typeof2(t), o = _typeof2(e);
                                    if (isNumerable(a, t) && isNumerable(o, e))
                                        return t / e;
                                    if ($bm_isInstanceOfArray(t) && isNumerable(o, e)) {
                                        for (i = t.length,
                                        r = createTypedArray("float32", i),
                                        n = 0; n < i; n += 1)
                                            r[n] = t[n] / e;
                                        return r
                                    }
                                    if (isNumerable(a, t) && $bm_isInstanceOfArray(e)) {
                                        for (i = e.length,
                                        r = createTypedArray("float32", i),
                                        n = 0; n < i; n += 1)
                                            r[n] = t / e[n];
                                        return r
                                    }
                                    return 0
                                }
                                function mod(t, e) {
                                    return "string" == typeof t && (t = parseInt(t, 10)),
                                    "string" == typeof e && (e = parseInt(e, 10)),
                                    t % e
                                }
                                var $bm_sum = sum
                                  , $bm_sub = sub
                                  , $bm_mul = mul
                                  , $bm_div = div
                                  , $bm_mod = mod;
                                function clamp(t, e, r) {
                                    if (e > r) {
                                        var n = r;
                                        r = e,
                                        e = n
                                    }
                                    return Math.min(Math.max(t, e), r)
                                }
                                function radiansToDegrees(t) {
                                    return t / degToRads
                                }
                                var radians_to_degrees = radiansToDegrees;
                                function degreesToRadians(t) {
                                    return t * degToRads
                                }
                                var degrees_to_radians = radiansToDegrees
                                  , helperLengthArray = [0, 0, 0, 0, 0, 0];
                                function length(t, e) {
                                    if ("number" == typeof t || t instanceof Number)
                                        return e = e || 0,
                                        Math.abs(t - e);
                                    var r;
                                    e || (e = helperLengthArray);
                                    var n = Math.min(t.length, e.length)
                                      , i = 0;
                                    for (r = 0; r < n; r += 1)
                                        i += Math.pow(e[r] - t[r], 2);
                                    return Math.sqrt(i)
                                }
                                function normalize(t) {
                                    return div(t, length(t))
                                }
                                function rgbToHsl(t) {
                                    var e, r, n = t[0], i = t[1], a = t[2], o = Math.max(n, i, a), s = Math.min(n, i, a), l = (o + s) / 2;
                                    if (o === s)
                                        e = 0,
                                        r = 0;
                                    else {
                                        var c = o - s;
                                        switch (r = l > .5 ? c / (2 - o - s) : c / (o + s),
                                        o) {
                                        case n:
                                            e = (i - a) / c + (i < a ? 6 : 0);
                                            break;
                                        case i:
                                            e = (a - n) / c + 2;
                                            break;
                                        case a:
                                            e = (n - i) / c + 4
                                        }
                                        e /= 6
                                    }
                                    return [e, r, l, t[3]]
                                }
                                function hue2rgb(t, e, r) {
                                    return r < 0 && (r += 1),
                                    r > 1 && (r -= 1),
                                    r < 1 / 6 ? t + 6 * (e - t) * r : r < .5 ? e : r < 2 / 3 ? t + (e - t) * (2 / 3 - r) * 6 : t
                                }
                                function hslToRgb(t) {
                                    var e, r, n, i = t[0], a = t[1], o = t[2];
                                    if (0 === a)
                                        e = o,
                                        n = o,
                                        r = o;
                                    else {
                                        var s = o < .5 ? o * (1 + a) : o + a - o * a
                                          , l = 2 * o - s;
                                        e = hue2rgb(l, s, i + 1 / 3),
                                        r = hue2rgb(l, s, i),
                                        n = hue2rgb(l, s, i - 1 / 3)
                                    }
                                    return [e, r, n, t[3]]
                                }
                                function linear(t, e, r, n, i) {
                                    if (void 0 !== n && void 0 !== i || (n = e,
                                    i = r,
                                    e = 0,
                                    r = 1),
                                    r < e) {
                                        var a = r;
                                        r = e,
                                        e = a
                                    }
                                    if (t <= e)
                                        return n;
                                    if (t >= r)
                                        return i;
                                    var o, s = r === e ? 0 : (t - e) / (r - e);
                                    if (!n.length)
                                        return n + (i - n) * s;
                                    var l = n.length
                                      , c = createTypedArray("float32", l);
                                    for (o = 0; o < l; o += 1)
                                        c[o] = n[o] + (i[o] - n[o]) * s;
                                    return c
                                }
                                function random(t, e) {
                                    if (void 0 === e && (void 0 === t ? (t = 0,
                                    e = 1) : (e = t,
                                    t = void 0)),
                                    e.length) {
                                        var r, n = e.length;
                                        t || (t = createTypedArray("float32", n));
                                        var i = createTypedArray("float32", n)
                                          , a = BMMath.random();
                                        for (r = 0; r < n; r += 1)
                                            i[r] = t[r] + a * (e[r] - t[r]);
                                        return i
                                    }
                                    return void 0 === t && (t = 0),
                                    t + BMMath.random() * (e - t)
                                }
                                function createPath(t, e, r, n) {
                                    var i, a = t.length, o = shapePool.newElement();
                                    o.setPathData(!!n, a);
                                    var s, l, c = [0, 0];
                                    for (i = 0; i < a; i += 1)
                                        s = e && e[i] ? e[i] : c,
                                        l = r && r[i] ? r[i] : c,
                                        o.setTripleAt(t[i][0], t[i][1], l[0] + t[i][0], l[1] + t[i][1], s[0] + t[i][0], s[1] + t[i][1], i, !0);
                                    return o
                                }
                                function initiateExpression(elem, data, property) {
                                    var val = data.x, needsVelocity = /velocity(?![\w\d])/.test(val), _needsRandom = -1 !== val.indexOf("random"), elemType = elem.data.ty, transform, $bm_transform, content, effect, thisProperty = property;
                                    thisProperty.valueAtTime = thisProperty.getValueAtTime,
                                    Object.defineProperty(thisProperty, "value", {
                                        get: function() {
                                            return thisProperty.v
                                        }
                                    }),
                                    elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate,
                                    elem.comp.displayStartTime = 0;
                                    var inPoint = elem.data.ip / elem.comp.globalData.frameRate, outPoint = elem.data.op / elem.comp.globalData.frameRate, width = elem.data.sw ? elem.data.sw : 0, height = elem.data.sh ? elem.data.sh : 0, name = elem.data.nm, loopIn, loop_in, loopOut, loop_out, smooth, toWorld, fromWorld, fromComp, toComp, fromCompToSurface, position, rotation, anchorPoint, scale, thisLayer, thisComp, mask, valueAtTime, velocityAtTime, scoped_bm_rt, expression_function = eval("[function _expression_function(){" + val + ";scoped_bm_rt=$bm_rt}]")[0], numKeys = property.kf ? data.k.length : 0, active = !this.data || !0 !== this.data.hd, wiggle = function(t, e) {
                                        var r, n, i = this.pv.length ? this.pv.length : 1, a = createTypedArray("float32", i), o = Math.floor(5 * time);
                                        for (r = 0,
                                        n = 0; r < o; ) {
                                            for (n = 0; n < i; n += 1)
                                                a[n] += -e + 2 * e * BMMath.random();
                                            r += 1
                                        }
                                        var s = 5 * time
                                          , l = s - Math.floor(s)
                                          , c = createTypedArray("float32", i);
                                        if (i > 1) {
                                            for (n = 0; n < i; n += 1)
                                                c[n] = this.pv[n] + a[n] + (-e + 2 * e * BMMath.random()) * l;
                                            return c
                                        }
                                        return this.pv + a[0] + (-e + 2 * e * BMMath.random()) * l
                                    }
                                    .bind(this);
                                    function loopInDuration(t, e) {
                                        return loopIn(t, e, !0)
                                    }
                                    function loopOutDuration(t, e) {
                                        return loopOut(t, e, !0)
                                    }
                                    thisProperty.loopIn && (loopIn = thisProperty.loopIn.bind(thisProperty),
                                    loop_in = loopIn),
                                    thisProperty.loopOut && (loopOut = thisProperty.loopOut.bind(thisProperty),
                                    loop_out = loopOut),
                                    thisProperty.smooth && (smooth = thisProperty.smooth.bind(thisProperty)),
                                    this.getValueAtTime && (valueAtTime = this.getValueAtTime.bind(this)),
                                    this.getVelocityAtTime && (velocityAtTime = this.getVelocityAtTime.bind(this));
                                    var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface), time, velocity, value, text, textIndex, textTotal, selectorValue;
                                    function lookAt(t, e) {
                                        var r = [e[0] - t[0], e[1] - t[1], e[2] - t[2]]
                                          , n = Math.atan2(r[0], Math.sqrt(r[1] * r[1] + r[2] * r[2])) / degToRads;
                                        return [-Math.atan2(r[1], r[2]) / degToRads, n, 0]
                                    }
                                    function easeOut(t, e, r, n, i) {
                                        return applyEase(easeOutBez, t, e, r, n, i)
                                    }
                                    function easeIn(t, e, r, n, i) {
                                        return applyEase(easeInBez, t, e, r, n, i)
                                    }
                                    function ease(t, e, r, n, i) {
                                        return applyEase(easeInOutBez, t, e, r, n, i)
                                    }
                                    function applyEase(t, e, r, n, i, a) {
                                        void 0 === i ? (i = r,
                                        a = n) : e = (e - r) / (n - r),
                                        e > 1 ? e = 1 : e < 0 && (e = 0);
                                        var o = t(e);
                                        if ($bm_isInstanceOfArray(i)) {
                                            var s, l = i.length, c = createTypedArray("float32", l);
                                            for (s = 0; s < l; s += 1)
                                                c[s] = (a[s] - i[s]) * o + i[s];
                                            return c
                                        }
                                        return (a - i) * o + i
                                    }
                                    function nearestKey(t) {
                                        var e, r, n, i = data.k.length;
                                        if (data.k.length && "number" != typeof data.k[0])
                                            if (r = -1,
                                            (t *= elem.comp.globalData.frameRate) < data.k[0].t)
                                                r = 1,
                                                n = data.k[0].t;
                                            else {
                                                for (e = 0; e < i - 1; e += 1) {
                                                    if (t === data.k[e].t) {
                                                        r = e + 1,
                                                        n = data.k[e].t;
                                                        break
                                                    }
                                                    if (t > data.k[e].t && t < data.k[e + 1].t) {
                                                        t - data.k[e].t > data.k[e + 1].t - t ? (r = e + 2,
                                                        n = data.k[e + 1].t) : (r = e + 1,
                                                        n = data.k[e].t);
                                                        break
                                                    }
                                                }
                                                -1 === r && (r = e + 1,
                                                n = data.k[e].t)
                                            }
                                        else
                                            r = 0,
                                            n = 0;
                                        var a = {};
                                        return a.index = r,
                                        a.time = n / elem.comp.globalData.frameRate,
                                        a
                                    }
                                    function key(t) {
                                        var e, r, n;
                                        if (!data.k.length || "number" == typeof data.k[0])
                                            throw new Error("The property has no keyframe at index " + t);
                                        t -= 1,
                                        e = {
                                            time: data.k[t].t / elem.comp.globalData.frameRate,
                                            value: []
                                        };
                                        var i = Object.prototype.hasOwnProperty.call(data.k[t], "s") ? data.k[t].s : data.k[t - 1].e;
                                        for (n = i.length,
                                        r = 0; r < n; r += 1)
                                            e[r] = i[r],
                                            e.value[r] = i[r];
                                        return e
                                    }
                                    function framesToTime(t, e) {
                                        return e || (e = elem.comp.globalData.frameRate),
                                        t / e
                                    }
                                    function timeToFrames(t, e) {
                                        return t || 0 === t || (t = time),
                                        e || (e = elem.comp.globalData.frameRate),
                                        t * e
                                    }
                                    function seedRandom(t) {
                                        BMMath.seedrandom(randSeed + t)
                                    }
                                    function sourceRectAtTime() {
                                        return elem.sourceRectAtTime()
                                    }
                                    function substring(t, e) {
                                        return "string" == typeof value ? void 0 === e ? value.substring(t) : value.substring(t, e) : ""
                                    }
                                    function substr(t, e) {
                                        return "string" == typeof value ? void 0 === e ? value.substr(t) : value.substr(t, e) : ""
                                    }
                                    function posterizeTime(t) {
                                        time = 0 === t ? 0 : Math.floor(time * t) / t,
                                        value = valueAtTime(time)
                                    }
                                    var index = elem.data.ind, hasParent = !(!elem.hierarchy || !elem.hierarchy.length), parent, randSeed = Math.floor(1e6 * Math.random()), globalData = elem.globalData;
                                    function executeExpression(t) {
                                        return value = t,
                                        this.frameExpressionId === elem.globalData.frameId && "textSelector" !== this.propType ? value : ("textSelector" === this.propType && (textIndex = this.textIndex,
                                        textTotal = this.textTotal,
                                        selectorValue = this.selectorValue),
                                        thisLayer || (text = elem.layerInterface.text,
                                        thisLayer = elem.layerInterface,
                                        thisComp = elem.comp.compInterface,
                                        toWorld = thisLayer.toWorld.bind(thisLayer),
                                        fromWorld = thisLayer.fromWorld.bind(thisLayer),
                                        fromComp = thisLayer.fromComp.bind(thisLayer),
                                        toComp = thisLayer.toComp.bind(thisLayer),
                                        mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null,
                                        fromCompToSurface = fromComp),
                                        transform || (transform = elem.layerInterface("ADBE Transform Group"),
                                        $bm_transform = transform,
                                        transform && (anchorPoint = transform.anchorPoint)),
                                        4 !== elemType || content || (content = thisLayer("ADBE Root Vectors Group")),
                                        effect || (effect = thisLayer(4)),
                                        (hasParent = !(!elem.hierarchy || !elem.hierarchy.length)) && !parent && (parent = elem.hierarchy[0].layerInterface),
                                        time = this.comp.renderedFrame / this.comp.globalData.frameRate,
                                        _needsRandom && seedRandom(randSeed + time),
                                        needsVelocity && (velocity = velocityAtTime(time)),
                                        expression_function(),
                                        this.frameExpressionId = elem.globalData.frameId,
                                        "shape" === scoped_bm_rt.propType && (scoped_bm_rt = scoped_bm_rt.v),
                                        scoped_bm_rt)
                                    }
                                    return executeExpression
                                }
                                return ob.initiateExpression = initiateExpression,
                                ob
                            }()
                              , expressionHelpers = {
                                searchExpressions: function(t, e, r) {
                                    e.x && (r.k = !0,
                                    r.x = !0,
                                    r.initiateExpression = ExpressionManager.initiateExpression,
                                    r.effectsSequence.push(r.initiateExpression(t, e, r).bind(r)))
                                },
                                getSpeedAtTime: function(t) {
                                    var e = this.getValueAtTime(t)
                                      , r = this.getValueAtTime(t + -.01)
                                      , n = 0;
                                    if (e.length) {
                                        var i;
                                        for (i = 0; i < e.length; i += 1)
                                            n += Math.pow(r[i] - e[i], 2);
                                        n = 100 * Math.sqrt(n)
                                    } else
                                        n = 0;
                                    return n
                                },
                                getVelocityAtTime: function(t) {
                                    if (void 0 !== this.vel)
                                        return this.vel;
                                    var e, r, n = -.001, i = this.getValueAtTime(t), a = this.getValueAtTime(t + n);
                                    if (i.length)
                                        for (e = createTypedArray("float32", i.length),
                                        r = 0; r < i.length; r += 1)
                                            e[r] = (a[r] - i[r]) / n;
                                    else
                                        e = (a - i) / n;
                                    return e
                                },
                                getValueAtTime: function(t) {
                                    return t *= this.elem.globalData.frameRate,
                                    (t -= this.offsetTime) !== this._cachingAtTime.lastFrame && (this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < t ? this._cachingAtTime.lastIndex : 0,
                                    this._cachingAtTime.value = this.interpolateValue(t, this._cachingAtTime),
                                    this._cachingAtTime.lastFrame = t),
                                    this._cachingAtTime.value
                                },
                                getStaticValueAtTime: function() {
                                    return this.pv
                                },
                                setGroupProperty: function(t) {
                                    this.propertyGroup = t
                                }
                            };
                            !function() {
                                function t(t, e, r) {
                                    if (!this.k || !this.keyframes)
                                        return this.pv;
                                    t = t ? t.toLowerCase() : "";
                                    var n, i, a, o, s, l = this.comp.renderedFrame, c = this.keyframes, h = c[c.length - 1].t;
                                    if (l <= h)
                                        return this.pv;
                                    if (r ? i = h - (n = e ? Math.abs(h - this.elem.comp.globalData.frameRate * e) : Math.max(0, h - this.elem.data.ip)) : ((!e || e > c.length - 1) && (e = c.length - 1),
                                    n = h - (i = c[c.length - 1 - e].t)),
                                    "pingpong" === t) {
                                        if (Math.floor((l - i) / n) % 2 != 0)
                                            return this.getValueAtTime((n - (l - i) % n + i) / this.comp.globalData.frameRate, 0)
                                    } else {
                                        if ("offset" === t) {
                                            var u = this.getValueAtTime(i / this.comp.globalData.frameRate, 0)
                                              , p = this.getValueAtTime(h / this.comp.globalData.frameRate, 0)
                                              , d = this.getValueAtTime(((l - i) % n + i) / this.comp.globalData.frameRate, 0)
                                              , f = Math.floor((l - i) / n);
                                            if (this.pv.length) {
                                                for (o = (s = new Array(u.length)).length,
                                                a = 0; a < o; a += 1)
                                                    s[a] = (p[a] - u[a]) * f + d[a];
                                                return s
                                            }
                                            return (p - u) * f + d
                                        }
                                        if ("continue" === t) {
                                            var m = this.getValueAtTime(h / this.comp.globalData.frameRate, 0)
                                              , v = this.getValueAtTime((h - .001) / this.comp.globalData.frameRate, 0);
                                            if (this.pv.length) {
                                                for (o = (s = new Array(m.length)).length,
                                                a = 0; a < o; a += 1)
                                                    s[a] = m[a] + (m[a] - v[a]) * ((l - h) / this.comp.globalData.frameRate) / 5e-4;
                                                return s
                                            }
                                            return m + (l - h) / .001 * (m - v)
                                        }
                                    }
                                    return this.getValueAtTime(((l - i) % n + i) / this.comp.globalData.frameRate, 0)
                                }
                                function e(t, e, r) {
                                    if (!this.k)
                                        return this.pv;
                                    t = t ? t.toLowerCase() : "";
                                    var n, i, a, o, s, l = this.comp.renderedFrame, c = this.keyframes, h = c[0].t;
                                    if (l >= h)
                                        return this.pv;
                                    if (r ? i = h + (n = e ? Math.abs(this.elem.comp.globalData.frameRate * e) : Math.max(0, this.elem.data.op - h)) : ((!e || e > c.length - 1) && (e = c.length - 1),
                                    n = (i = c[e].t) - h),
                                    "pingpong" === t) {
                                        if (Math.floor((h - l) / n) % 2 == 0)
                                            return this.getValueAtTime(((h - l) % n + h) / this.comp.globalData.frameRate, 0)
                                    } else {
                                        if ("offset" === t) {
                                            var u = this.getValueAtTime(h / this.comp.globalData.frameRate, 0)
                                              , p = this.getValueAtTime(i / this.comp.globalData.frameRate, 0)
                                              , d = this.getValueAtTime((n - (h - l) % n + h) / this.comp.globalData.frameRate, 0)
                                              , f = Math.floor((h - l) / n) + 1;
                                            if (this.pv.length) {
                                                for (o = (s = new Array(u.length)).length,
                                                a = 0; a < o; a += 1)
                                                    s[a] = d[a] - (p[a] - u[a]) * f;
                                                return s
                                            }
                                            return d - (p - u) * f
                                        }
                                        if ("continue" === t) {
                                            var m = this.getValueAtTime(h / this.comp.globalData.frameRate, 0)
                                              , v = this.getValueAtTime((h + .001) / this.comp.globalData.frameRate, 0);
                                            if (this.pv.length) {
                                                for (o = (s = new Array(m.length)).length,
                                                a = 0; a < o; a += 1)
                                                    s[a] = m[a] + (m[a] - v[a]) * (h - l) / .001;
                                                return s
                                            }
                                            return m + (m - v) * (h - l) / .001
                                        }
                                    }
                                    return this.getValueAtTime((n - ((h - l) % n + h)) / this.comp.globalData.frameRate, 0)
                                }
                                function r(t, e) {
                                    if (!this.k)
                                        return this.pv;
                                    if (t = .5 * (t || .4),
                                    (e = Math.floor(e || 5)) <= 1)
                                        return this.pv;
                                    var r, n, i = this.comp.renderedFrame / this.comp.globalData.frameRate, a = i - t, o = e > 1 ? (i + t - a) / (e - 1) : 1, s = 0, l = 0;
                                    for (r = this.pv.length ? createTypedArray("float32", this.pv.length) : 0; s < e; ) {
                                        if (n = this.getValueAtTime(a + s * o),
                                        this.pv.length)
                                            for (l = 0; l < this.pv.length; l += 1)
                                                r[l] += n[l];
                                        else
                                            r += n;
                                        s += 1
                                    }
                                    if (this.pv.length)
                                        for (l = 0; l < this.pv.length; l += 1)
                                            r[l] /= e;
                                    else
                                        r /= e;
                                    return r
                                }
                                function n(t) {
                                    this._transformCachingAtTime || (this._transformCachingAtTime = {
                                        v: new Matrix
                                    });
                                    var e = this._transformCachingAtTime.v;
                                    if (e.cloneFromProps(this.pre.props),
                                    this.appliedTransformations < 1) {
                                        var r = this.a.getValueAtTime(t);
                                        e.translate(-r[0] * this.a.mult, -r[1] * this.a.mult, r[2] * this.a.mult)
                                    }
                                    if (this.appliedTransformations < 2) {
                                        var n = this.s.getValueAtTime(t);
                                        e.scale(n[0] * this.s.mult, n[1] * this.s.mult, n[2] * this.s.mult)
                                    }
                                    if (this.sk && this.appliedTransformations < 3) {
                                        var i = this.sk.getValueAtTime(t)
                                          , a = this.sa.getValueAtTime(t);
                                        e.skewFromAxis(-i * this.sk.mult, a * this.sa.mult)
                                    }
                                    if (this.r && this.appliedTransformations < 4) {
                                        var o = this.r.getValueAtTime(t);
                                        e.rotate(-o * this.r.mult)
                                    } else if (!this.r && this.appliedTransformations < 4) {
                                        var s = this.rz.getValueAtTime(t)
                                          , l = this.ry.getValueAtTime(t)
                                          , c = this.rx.getValueAtTime(t)
                                          , h = this.or.getValueAtTime(t);
                                        e.rotateZ(-s * this.rz.mult).rotateY(l * this.ry.mult).rotateX(c * this.rx.mult).rotateZ(-h[2] * this.or.mult).rotateY(h[1] * this.or.mult).rotateX(h[0] * this.or.mult)
                                    }
                                    if (this.data.p && this.data.p.s) {
                                        var u = this.px.getValueAtTime(t)
                                          , p = this.py.getValueAtTime(t);
                                        if (this.data.p.z) {
                                            var d = this.pz.getValueAtTime(t);
                                            e.translate(u * this.px.mult, p * this.py.mult, -d * this.pz.mult)
                                        } else
                                            e.translate(u * this.px.mult, p * this.py.mult, 0)
                                    } else {
                                        var f = this.p.getValueAtTime(t);
                                        e.translate(f[0] * this.p.mult, f[1] * this.p.mult, -f[2] * this.p.mult)
                                    }
                                    return e
                                }
                                function i() {
                                    return this.v.clone(new Matrix)
                                }
                                var a = TransformPropertyFactory.getTransformProperty;
                                TransformPropertyFactory.getTransformProperty = function(t, e, r) {
                                    var o = a(t, e, r);
                                    return o.dynamicProperties.length ? o.getValueAtTime = n.bind(o) : o.getValueAtTime = i.bind(o),
                                    o.setGroupProperty = expressionHelpers.setGroupProperty,
                                    o
                                }
                                ;
                                var o = PropertyFactory.getProp;
                                PropertyFactory.getProp = function(n, i, a, s, l) {
                                    var c = o(n, i, a, s, l);
                                    c.kf ? c.getValueAtTime = expressionHelpers.getValueAtTime.bind(c) : c.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(c),
                                    c.setGroupProperty = expressionHelpers.setGroupProperty,
                                    c.loopOut = t,
                                    c.loopIn = e,
                                    c.smooth = r,
                                    c.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(c),
                                    c.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(c),
                                    c.numKeys = 1 === i.a ? i.k.length : 0,
                                    c.propertyIndex = i.ix;
                                    var h = 0;
                                    return 0 !== a && (h = createTypedArray("float32", 1 === i.a ? i.k[0].s.length : i.k.length)),
                                    c._cachingAtTime = {
                                        lastFrame: initialDefaultFrame,
                                        lastIndex: 0,
                                        value: h
                                    },
                                    expressionHelpers.searchExpressions(n, i, c),
                                    c.k && l.addDynamicProperty(c),
                                    c
                                }
                                ;
                                var s = ShapePropertyFactory.getConstructorFunction()
                                  , l = ShapePropertyFactory.getKeyframedConstructorFunction();
                                function c() {}
                                c.prototype = {
                                    vertices: function(t, e) {
                                        this.k && this.getValue();
                                        var r, n = this.v;
                                        void 0 !== e && (n = this.getValueAtTime(e, 0));
                                        var i = n._length
                                          , a = n[t]
                                          , o = n.v
                                          , s = createSizedArray(i);
                                        for (r = 0; r < i; r += 1)
                                            s[r] = "i" === t || "o" === t ? [a[r][0] - o[r][0], a[r][1] - o[r][1]] : [a[r][0], a[r][1]];
                                        return s
                                    },
                                    points: function(t) {
                                        return this.vertices("v", t)
                                    },
                                    inTangents: function(t) {
                                        return this.vertices("i", t)
                                    },
                                    outTangents: function(t) {
                                        return this.vertices("o", t)
                                    },
                                    isClosed: function() {
                                        return this.v.c
                                    },
                                    pointOnPath: function(t, e) {
                                        var r = this.v;
                                        void 0 !== e && (r = this.getValueAtTime(e, 0)),
                                        this._segmentsLength || (this._segmentsLength = bez.getSegmentsLength(r));
                                        for (var n, i = this._segmentsLength, a = i.lengths, o = i.totalLength * t, s = 0, l = a.length, c = 0; s < l; ) {
                                            if (c + a[s].addedLength > o) {
                                                var h = s
                                                  , u = r.c && s === l - 1 ? 0 : s + 1
                                                  , p = (o - c) / a[s].addedLength;
                                                n = bez.getPointInSegment(r.v[h], r.v[u], r.o[h], r.i[u], p, a[s]);
                                                break
                                            }
                                            c += a[s].addedLength,
                                            s += 1
                                        }
                                        return n || (n = r.c ? [r.v[0][0], r.v[0][1]] : [r.v[r._length - 1][0], r.v[r._length - 1][1]]),
                                        n
                                    },
                                    vectorOnPath: function(t, e, r) {
                                        1 == t ? t = this.v.c : 0 == t && (t = .999);
                                        var n = this.pointOnPath(t, e)
                                          , i = this.pointOnPath(t + .001, e)
                                          , a = i[0] - n[0]
                                          , o = i[1] - n[1]
                                          , s = Math.sqrt(Math.pow(a, 2) + Math.pow(o, 2));
                                        return 0 === s ? [0, 0] : "tangent" === r ? [a / s, o / s] : [-o / s, a / s]
                                    },
                                    tangentOnPath: function(t, e) {
                                        return this.vectorOnPath(t, e, "tangent")
                                    },
                                    normalOnPath: function(t, e) {
                                        return this.vectorOnPath(t, e, "normal")
                                    },
                                    setGroupProperty: expressionHelpers.setGroupProperty,
                                    getValueAtTime: expressionHelpers.getStaticValueAtTime
                                },
                                extendPrototype([c], s),
                                extendPrototype([c], l),
                                l.prototype.getValueAtTime = function(t) {
                                    return this._cachingAtTime || (this._cachingAtTime = {
                                        shapeValue: shapePool.clone(this.pv),
                                        lastIndex: 0,
                                        lastTime: initialDefaultFrame
                                    }),
                                    t *= this.elem.globalData.frameRate,
                                    (t -= this.offsetTime) !== this._cachingAtTime.lastTime && (this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < t ? this._caching.lastIndex : 0,
                                    this._cachingAtTime.lastTime = t,
                                    this.interpolateShape(t, this._cachingAtTime.shapeValue, this._cachingAtTime)),
                                    this._cachingAtTime.shapeValue
                                }
                                ,
                                l.prototype.initiateExpression = ExpressionManager.initiateExpression;
                                var h = ShapePropertyFactory.getShapeProp;
                                ShapePropertyFactory.getShapeProp = function(t, e, r, n, i) {
                                    var a = h(t, e, r, n, i);
                                    return a.propertyIndex = e.ix,
                                    a.lock = !1,
                                    3 === r ? expressionHelpers.searchExpressions(t, e.pt, a) : 4 === r && expressionHelpers.searchExpressions(t, e.ks, a),
                                    a.k && t.addDynamicProperty(a),
                                    a
                                }
                            }(),
                            TextProperty.prototype.getExpressionValue = function(t, e) {
                                var r = this.calculateExpression(e);
                                if (t.t !== r) {
                                    var n = {};
                                    return this.copyData(n, t),
                                    n.t = r.toString(),
                                    n.__complete = !1,
                                    n
                                }
                                return t
                            }
                            ,
                            TextProperty.prototype.searchProperty = function() {
                                var t = this.searchKeyframes()
                                  , e = this.searchExpressions();
                                return this.kf = t || e,
                                this.kf
                            }
                            ,
                            TextProperty.prototype.searchExpressions = function() {
                                return this.data.d.x ? (this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this),
                                this.addEffect(this.getExpressionValue.bind(this)),
                                !0) : null
                            }
                            ;
                            var ShapePathInterface = function(t, e, r) {
                                var n = e.sh;
                                function i(t) {
                                    return "Shape" === t || "shape" === t || "Path" === t || "path" === t || "ADBE Vector Shape" === t || 2 === t ? i.path : null
                                }
                                var a = propertyGroupFactory(i, r);
                                return n.setGroupProperty(PropertyInterface("Path", a)),
                                Object.defineProperties(i, {
                                    path: {
                                        get: function() {
                                            return n.k && n.getValue(),
                                            n
                                        }
                                    },
                                    shape: {
                                        get: function() {
                                            return n.k && n.getValue(),
                                            n
                                        }
                                    },
                                    _name: {
                                        value: t.nm
                                    },
                                    ix: {
                                        value: t.ix
                                    },
                                    propertyIndex: {
                                        value: t.ix
                                    },
                                    mn: {
                                        value: t.mn
                                    },
                                    propertyGroup: {
                                        value: r
                                    }
                                }),
                                i
                            }, propertyGroupFactory = function(t, e) {
                                return function(r) {
                                    return (r = void 0 === r ? 1 : r) <= 0 ? t : e(r - 1)
                                }
                            }, PropertyInterface = function(t, e) {
                                var r = {
                                    _name: t
                                };
                                return function(t) {
                                    return (t = void 0 === t ? 1 : t) <= 0 ? r : e(t - 1)
                                }
                            }, ShapeExpressionInterface = function() {
                                function t(t, o, p) {
                                    var d, f = [], m = t ? t.length : 0;
                                    for (d = 0; d < m; d += 1)
                                        "gr" === t[d].ty ? f.push(e(t[d], o[d], p)) : "fl" === t[d].ty ? f.push(r(t[d], o[d], p)) : "st" === t[d].ty ? f.push(i(t[d], o[d], p)) : "tm" === t[d].ty ? f.push(a(t[d], o[d], p)) : "tr" === t[d].ty || ("el" === t[d].ty ? f.push(s(t[d], o[d], p)) : "sr" === t[d].ty ? f.push(l(t[d], o[d], p)) : "sh" === t[d].ty ? f.push(ShapePathInterface(t[d], o[d], p)) : "rc" === t[d].ty ? f.push(c(t[d], o[d], p)) : "rd" === t[d].ty ? f.push(h(t[d], o[d], p)) : "rp" === t[d].ty ? f.push(u(t[d], o[d], p)) : "gf" === t[d].ty ? f.push(n(t[d], o[d], p)) : f.push((t[d],
                                        o[d],
                                        function() {
                                            return null
                                        }
                                        )));
                                    return f
                                }
                                function e(e, r, n) {
                                    var i = function t(e) {
                                        switch (e) {
                                        case "ADBE Vectors Group":
                                        case "Contents":
                                        case 2:
                                            return t.content;
                                        default:
                                            return t.transform
                                        }
                                    };
                                    i.propertyGroup = propertyGroupFactory(i, n);
                                    var a = function(e, r, n) {
                                        var i, a = function(t) {
                                            for (var e = 0, r = i.length; e < r; ) {
                                                if (i[e]._name === t || i[e].mn === t || i[e].propertyIndex === t || i[e].ix === t || i[e].ind === t)
                                                    return i[e];
                                                e += 1
                                            }
                                            return "number" == typeof t ? i[t - 1] : null
                                        };
                                        a.propertyGroup = propertyGroupFactory(a, n),
                                        i = t(e.it, r.it, a.propertyGroup),
                                        a.numProperties = i.length;
                                        var s = o(e.it[e.it.length - 1], r.it[r.it.length - 1], a.propertyGroup);
                                        return a.transform = s,
                                        a.propertyIndex = e.cix,
                                        a._name = e.nm,
                                        a
                                    }(e, r, i.propertyGroup)
                                      , s = o(e.it[e.it.length - 1], r.it[r.it.length - 1], i.propertyGroup);
                                    return i.content = a,
                                    i.transform = s,
                                    Object.defineProperty(i, "_name", {
                                        get: function() {
                                            return e.nm
                                        }
                                    }),
                                    i.numProperties = e.np,
                                    i.propertyIndex = e.ix,
                                    i.nm = e.nm,
                                    i.mn = e.mn,
                                    i
                                }
                                function r(t, e, r) {
                                    function n(t) {
                                        return "Color" === t || "color" === t ? n.color : "Opacity" === t || "opacity" === t ? n.opacity : null
                                    }
                                    return Object.defineProperties(n, {
                                        color: {
                                            get: ExpressionPropertyInterface(e.c)
                                        },
                                        opacity: {
                                            get: ExpressionPropertyInterface(e.o)
                                        },
                                        _name: {
                                            value: t.nm
                                        },
                                        mn: {
                                            value: t.mn
                                        }
                                    }),
                                    e.c.setGroupProperty(PropertyInterface("Color", r)),
                                    e.o.setGroupProperty(PropertyInterface("Opacity", r)),
                                    n
                                }
                                function n(t, e, r) {
                                    function n(t) {
                                        return "Start Point" === t || "start point" === t ? n.startPoint : "End Point" === t || "end point" === t ? n.endPoint : "Opacity" === t || "opacity" === t ? n.opacity : null
                                    }
                                    return Object.defineProperties(n, {
                                        startPoint: {
                                            get: ExpressionPropertyInterface(e.s)
                                        },
                                        endPoint: {
                                            get: ExpressionPropertyInterface(e.e)
                                        },
                                        opacity: {
                                            get: ExpressionPropertyInterface(e.o)
                                        },
                                        type: {
                                            get: function() {
                                                return "a"
                                            }
                                        },
                                        _name: {
                                            value: t.nm
                                        },
                                        mn: {
                                            value: t.mn
                                        }
                                    }),
                                    e.s.setGroupProperty(PropertyInterface("Start Point", r)),
                                    e.e.setGroupProperty(PropertyInterface("End Point", r)),
                                    e.o.setGroupProperty(PropertyInterface("Opacity", r)),
                                    n
                                }
                                function i(t, e, r) {
                                    var n, i = propertyGroupFactory(c, r), a = propertyGroupFactory(l, i);
                                    function o(r) {
                                        Object.defineProperty(l, t.d[r].nm, {
                                            get: ExpressionPropertyInterface(e.d.dataProps[r].p)
                                        })
                                    }
                                    var s = t.d ? t.d.length : 0
                                      , l = {};
                                    for (n = 0; n < s; n += 1)
                                        o(n),
                                        e.d.dataProps[n].p.setGroupProperty(a);
                                    function c(t) {
                                        return "Color" === t || "color" === t ? c.color : "Opacity" === t || "opacity" === t ? c.opacity : "Stroke Width" === t || "stroke width" === t ? c.strokeWidth : null
                                    }
                                    return Object.defineProperties(c, {
                                        color: {
                                            get: ExpressionPropertyInterface(e.c)
                                        },
                                        opacity: {
                                            get: ExpressionPropertyInterface(e.o)
                                        },
                                        strokeWidth: {
                                            get: ExpressionPropertyInterface(e.w)
                                        },
                                        dash: {
                                            get: function() {
                                                return l
                                            }
                                        },
                                        _name: {
                                            value: t.nm
                                        },
                                        mn: {
                                            value: t.mn
                                        }
                                    }),
                                    e.c.setGroupProperty(PropertyInterface("Color", i)),
                                    e.o.setGroupProperty(PropertyInterface("Opacity", i)),
                                    e.w.setGroupProperty(PropertyInterface("Stroke Width", i)),
                                    c
                                }
                                function a(t, e, r) {
                                    function n(e) {
                                        return e === t.e.ix || "End" === e || "end" === e ? n.end : e === t.s.ix ? n.start : e === t.o.ix ? n.offset : null
                                    }
                                    var i = propertyGroupFactory(n, r);
                                    return n.propertyIndex = t.ix,
                                    e.s.setGroupProperty(PropertyInterface("Start", i)),
                                    e.e.setGroupProperty(PropertyInterface("End", i)),
                                    e.o.setGroupProperty(PropertyInterface("Offset", i)),
                                    n.propertyIndex = t.ix,
                                    n.propertyGroup = r,
                                    Object.defineProperties(n, {
                                        start: {
                                            get: ExpressionPropertyInterface(e.s)
                                        },
                                        end: {
                                            get: ExpressionPropertyInterface(e.e)
                                        },
                                        offset: {
                                            get: ExpressionPropertyInterface(e.o)
                                        },
                                        _name: {
                                            value: t.nm
                                        }
                                    }),
                                    n.mn = t.mn,
                                    n
                                }
                                function o(t, e, r) {
                                    function n(e) {
                                        return t.a.ix === e || "Anchor Point" === e ? n.anchorPoint : t.o.ix === e || "Opacity" === e ? n.opacity : t.p.ix === e || "Position" === e ? n.position : t.r.ix === e || "Rotation" === e || "ADBE Vector Rotation" === e ? n.rotation : t.s.ix === e || "Scale" === e ? n.scale : t.sk && t.sk.ix === e || "Skew" === e ? n.skew : t.sa && t.sa.ix === e || "Skew Axis" === e ? n.skewAxis : null
                                    }
                                    var i = propertyGroupFactory(n, r);
                                    return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity", i)),
                                    e.transform.mProps.p.setGroupProperty(PropertyInterface("Position", i)),
                                    e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point", i)),
                                    e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale", i)),
                                    e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation", i)),
                                    e.transform.mProps.sk && (e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew", i)),
                                    e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle", i))),
                                    e.transform.op.setGroupProperty(PropertyInterface("Opacity", i)),
                                    Object.defineProperties(n, {
                                        opacity: {
                                            get: ExpressionPropertyInterface(e.transform.mProps.o)
                                        },
                                        position: {
                                            get: ExpressionPropertyInterface(e.transform.mProps.p)
                                        },
                                        anchorPoint: {
                                            get: ExpressionPropertyInterface(e.transform.mProps.a)
                                        },
                                        scale: {
                                            get: ExpressionPropertyInterface(e.transform.mProps.s)
                                        },
                                        rotation: {
                                            get: ExpressionPropertyInterface(e.transform.mProps.r)
                                        },
                                        skew: {
                                            get: ExpressionPropertyInterface(e.transform.mProps.sk)
                                        },
                                        skewAxis: {
                                            get: ExpressionPropertyInterface(e.transform.mProps.sa)
                                        },
                                        _name: {
                                            value: t.nm
                                        }
                                    }),
                                    n.ty = "tr",
                                    n.mn = t.mn,
                                    n.propertyGroup = r,
                                    n
                                }
                                function s(t, e, r) {
                                    function n(e) {
                                        return t.p.ix === e ? n.position : t.s.ix === e ? n.size : null
                                    }
                                    var i = propertyGroupFactory(n, r);
                                    n.propertyIndex = t.ix;
                                    var a = "tm" === e.sh.ty ? e.sh.prop : e.sh;
                                    return a.s.setGroupProperty(PropertyInterface("Size", i)),
                                    a.p.setGroupProperty(PropertyInterface("Position", i)),
                                    Object.defineProperties(n, {
                                        size: {
                                            get: ExpressionPropertyInterface(a.s)
                                        },
                                        position: {
                                            get: ExpressionPropertyInterface(a.p)
                                        },
                                        _name: {
                                            value: t.nm
                                        }
                                    }),
                                    n.mn = t.mn,
                                    n
                                }
                                function l(t, e, r) {
                                    function n(e) {
                                        return t.p.ix === e ? n.position : t.r.ix === e ? n.rotation : t.pt.ix === e ? n.points : t.or.ix === e || "ADBE Vector Star Outer Radius" === e ? n.outerRadius : t.os.ix === e ? n.outerRoundness : !t.ir || t.ir.ix !== e && "ADBE Vector Star Inner Radius" !== e ? t.is && t.is.ix === e ? n.innerRoundness : null : n.innerRadius
                                    }
                                    var i = propertyGroupFactory(n, r)
                                      , a = "tm" === e.sh.ty ? e.sh.prop : e.sh;
                                    return n.propertyIndex = t.ix,
                                    a.or.setGroupProperty(PropertyInterface("Outer Radius", i)),
                                    a.os.setGroupProperty(PropertyInterface("Outer Roundness", i)),
                                    a.pt.setGroupProperty(PropertyInterface("Points", i)),
                                    a.p.setGroupProperty(PropertyInterface("Position", i)),
                                    a.r.setGroupProperty(PropertyInterface("Rotation", i)),
                                    t.ir && (a.ir.setGroupProperty(PropertyInterface("Inner Radius", i)),
                                    a.is.setGroupProperty(PropertyInterface("Inner Roundness", i))),
                                    Object.defineProperties(n, {
                                        position: {
                                            get: ExpressionPropertyInterface(a.p)
                                        },
                                        rotation: {
                                            get: ExpressionPropertyInterface(a.r)
                                        },
                                        points: {
                                            get: ExpressionPropertyInterface(a.pt)
                                        },
                                        outerRadius: {
                                            get: ExpressionPropertyInterface(a.or)
                                        },
                                        outerRoundness: {
                                            get: ExpressionPropertyInterface(a.os)
                                        },
                                        innerRadius: {
                                            get: ExpressionPropertyInterface(a.ir)
                                        },
                                        innerRoundness: {
                                            get: ExpressionPropertyInterface(a.is)
                                        },
                                        _name: {
                                            value: t.nm
                                        }
                                    }),
                                    n.mn = t.mn,
                                    n
                                }
                                function c(t, e, r) {
                                    function n(e) {
                                        return t.p.ix === e ? n.position : t.r.ix === e ? n.roundness : t.s.ix === e || "Size" === e || "ADBE Vector Rect Size" === e ? n.size : null
                                    }
                                    var i = propertyGroupFactory(n, r)
                                      , a = "tm" === e.sh.ty ? e.sh.prop : e.sh;
                                    return n.propertyIndex = t.ix,
                                    a.p.setGroupProperty(PropertyInterface("Position", i)),
                                    a.s.setGroupProperty(PropertyInterface("Size", i)),
                                    a.r.setGroupProperty(PropertyInterface("Rotation", i)),
                                    Object.defineProperties(n, {
                                        position: {
                                            get: ExpressionPropertyInterface(a.p)
                                        },
                                        roundness: {
                                            get: ExpressionPropertyInterface(a.r)
                                        },
                                        size: {
                                            get: ExpressionPropertyInterface(a.s)
                                        },
                                        _name: {
                                            value: t.nm
                                        }
                                    }),
                                    n.mn = t.mn,
                                    n
                                }
                                function h(t, e, r) {
                                    function n(e) {
                                        return t.r.ix === e || "Round Corners 1" === e ? n.radius : null
                                    }
                                    var i = propertyGroupFactory(n, r)
                                      , a = e;
                                    return n.propertyIndex = t.ix,
                                    a.rd.setGroupProperty(PropertyInterface("Radius", i)),
                                    Object.defineProperties(n, {
                                        radius: {
                                            get: ExpressionPropertyInterface(a.rd)
                                        },
                                        _name: {
                                            value: t.nm
                                        }
                                    }),
                                    n.mn = t.mn,
                                    n
                                }
                                function u(t, e, r) {
                                    function n(e) {
                                        return t.c.ix === e || "Copies" === e ? n.copies : t.o.ix === e || "Offset" === e ? n.offset : null
                                    }
                                    var i = propertyGroupFactory(n, r)
                                      , a = e;
                                    return n.propertyIndex = t.ix,
                                    a.c.setGroupProperty(PropertyInterface("Copies", i)),
                                    a.o.setGroupProperty(PropertyInterface("Offset", i)),
                                    Object.defineProperties(n, {
                                        copies: {
                                            get: ExpressionPropertyInterface(a.c)
                                        },
                                        offset: {
                                            get: ExpressionPropertyInterface(a.o)
                                        },
                                        _name: {
                                            value: t.nm
                                        }
                                    }),
                                    n.mn = t.mn,
                                    n
                                }
                                return function(e, r, n) {
                                    var i;
                                    function a(t) {
                                        if ("number" == typeof t)
                                            return 0 === (t = void 0 === t ? 1 : t) ? n : i[t - 1];
                                        for (var e = 0, r = i.length; e < r; ) {
                                            if (i[e]._name === t)
                                                return i[e];
                                            e += 1
                                        }
                                        return null
                                    }
                                    return a.propertyGroup = propertyGroupFactory(a, (function() {
                                        return n
                                    }
                                    )),
                                    i = t(e, r, a.propertyGroup),
                                    a.numProperties = i.length,
                                    a._name = "Contents",
                                    a
                                }
                            }(), TextExpressionInterface = function(t) {
                                var e, r;
                                function n(t) {
                                    return "ADBE Text Document" === t ? n.sourceText : null
                                }
                                return Object.defineProperty(n, "sourceText", {
                                    get: function() {
                                        t.textProperty.getValue();
                                        var n = t.textProperty.currentData.t;
                                        return n !== e && (t.textProperty.currentData.t = e,
                                        (r = new String(n)).value = n || new String(n)),
                                        r
                                    }
                                }),
                                n
                            }, LayerExpressionInterface = function() {
                                function t(t) {
                                    var e = new Matrix;
                                    return void 0 !== t ? this._elem.finalTransform.mProp.getValueAtTime(t).clone(e) : this._elem.finalTransform.mProp.applyToMatrix(e),
                                    e
                                }
                                function e(t, e) {
                                    var r = this.getMatrix(e);
                                    return r.props[12] = 0,
                                    r.props[13] = 0,
                                    r.props[14] = 0,
                                    this.applyPoint(r, t)
                                }
                                function r(t, e) {
                                    var r = this.getMatrix(e);
                                    return this.applyPoint(r, t)
                                }
                                function n(t, e) {
                                    var r = this.getMatrix(e);
                                    return r.props[12] = 0,
                                    r.props[13] = 0,
                                    r.props[14] = 0,
                                    this.invertPoint(r, t)
                                }
                                function i(t, e) {
                                    var r = this.getMatrix(e);
                                    return this.invertPoint(r, t)
                                }
                                function a(t, e) {
                                    if (this._elem.hierarchy && this._elem.hierarchy.length) {
                                        var r, n = this._elem.hierarchy.length;
                                        for (r = 0; r < n; r += 1)
                                            this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t)
                                    }
                                    return t.applyToPointArray(e[0], e[1], e[2] || 0)
                                }
                                function o(t, e) {
                                    if (this._elem.hierarchy && this._elem.hierarchy.length) {
                                        var r, n = this._elem.hierarchy.length;
                                        for (r = 0; r < n; r += 1)
                                            this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t)
                                    }
                                    return t.inversePoint(e)
                                }
                                function s(t) {
                                    var e = new Matrix;
                                    if (e.reset(),
                                    this._elem.finalTransform.mProp.applyToMatrix(e),
                                    this._elem.hierarchy && this._elem.hierarchy.length) {
                                        var r, n = this._elem.hierarchy.length;
                                        for (r = 0; r < n; r += 1)
                                            this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(e);
                                        return e.inversePoint(t)
                                    }
                                    return e.inversePoint(t)
                                }
                                function l() {
                                    return [1, 1, 1, 1]
                                }
                                return function(c) {
                                    var h;
                                    function u(t) {
                                        switch (t) {
                                        case "ADBE Root Vectors Group":
                                        case "Contents":
                                        case 2:
                                            return u.shapeInterface;
                                        case 1:
                                        case 6:
                                        case "Transform":
                                        case "transform":
                                        case "ADBE Transform Group":
                                            return h;
                                        case 4:
                                        case "ADBE Effect Parade":
                                        case "effects":
                                        case "Effects":
                                            return u.effect;
                                        case "ADBE Text Properties":
                                            return u.textInterface;
                                        default:
                                            return null
                                        }
                                    }
                                    u.getMatrix = t,
                                    u.invertPoint = o,
                                    u.applyPoint = a,
                                    u.toWorld = r,
                                    u.toWorldVec = e,
                                    u.fromWorld = i,
                                    u.fromWorldVec = n,
                                    u.toComp = r,
                                    u.fromComp = s,
                                    u.sampleImage = l,
                                    u.sourceRectAtTime = c.sourceRectAtTime.bind(c),
                                    u._elem = c;
                                    var p = getDescriptor(h = TransformExpressionInterface(c.finalTransform.mProp), "anchorPoint");
                                    return Object.defineProperties(u, {
                                        hasParent: {
                                            get: function() {
                                                return c.hierarchy.length
                                            }
                                        },
                                        parent: {
                                            get: function() {
                                                return c.hierarchy[0].layerInterface
                                            }
                                        },
                                        rotation: getDescriptor(h, "rotation"),
                                        scale: getDescriptor(h, "scale"),
                                        position: getDescriptor(h, "position"),
                                        opacity: getDescriptor(h, "opacity"),
                                        anchorPoint: p,
                                        anchor_point: p,
                                        transform: {
                                            get: function() {
                                                return h
                                            }
                                        },
                                        active: {
                                            get: function() {
                                                return c.isInRange
                                            }
                                        }
                                    }),
                                    u.startTime = c.data.st,
                                    u.index = c.data.ind,
                                    u.source = c.data.refId,
                                    u.height = 0 === c.data.ty ? c.data.h : 100,
                                    u.width = 0 === c.data.ty ? c.data.w : 100,
                                    u.inPoint = c.data.ip / c.comp.globalData.frameRate,
                                    u.outPoint = c.data.op / c.comp.globalData.frameRate,
                                    u._name = c.data.nm,
                                    u.registerMaskInterface = function(t) {
                                        u.mask = new MaskManagerInterface(t,c)
                                    }
                                    ,
                                    u.registerEffectsInterface = function(t) {
                                        u.effect = t
                                    }
                                    ,
                                    u
                                }
                            }(), FootageInterface = (dataInterfaceFactory = function(t) {
                                function e(t) {
                                    return "Outline" === t ? e.outlineInterface() : null
                                }
                                return e._name = "Outline",
                                e.outlineInterface = function(t) {
                                    var e = ""
                                      , r = t.getFootageData();
                                    function n(t) {
                                        if (r[t])
                                            return e = t,
                                            "object" == _typeof2(r = r[t]) ? n : r;
                                        var i = t.indexOf(e);
                                        if (-1 !== i) {
                                            var a = parseInt(t.substr(i + e.length), 10);
                                            return "object" == _typeof2(r = r[a]) ? n : r
                                        }
                                        return ""
                                    }
                                    return function() {
                                        return e = "",
                                        r = t.getFootageData(),
                                        n
                                    }
                                }(t),
                                e
                            }
                            ,
                            function(t) {
                                function e(t) {
                                    return "Data" === t ? e.dataInterface : null
                                }
                                return e._name = "Data",
                                e.dataInterface = dataInterfaceFactory(t),
                                e
                            }
                            ), dataInterfaceFactory, CompExpressionInterface = function(t) {
                                function e(e) {
                                    for (var r = 0, n = t.layers.length; r < n; ) {
                                        if (t.layers[r].nm === e || t.layers[r].ind === e)
                                            return t.elements[r].layerInterface;
                                        r += 1
                                    }
                                    return null
                                }
                                return Object.defineProperty(e, "_name", {
                                    value: t.data.nm
                                }),
                                e.layer = e,
                                e.pixelAspect = 1,
                                e.height = t.data.h || t.globalData.compSize.h,
                                e.width = t.data.w || t.globalData.compSize.w,
                                e.pixelAspect = 1,
                                e.frameDuration = 1 / t.globalData.frameRate,
                                e.displayStartTime = 0,
                                e.numLayers = t.layers.length,
                                e
                            }, TransformExpressionInterface = function(t) {
                                function e(t) {
                                    switch (t) {
                                    case "scale":
                                    case "Scale":
                                    case "ADBE Scale":
                                    case 6:
                                        return e.scale;
                                    case "rotation":
                                    case "Rotation":
                                    case "ADBE Rotation":
                                    case "ADBE Rotate Z":
                                    case 10:
                                        return e.rotation;
                                    case "ADBE Rotate X":
                                        return e.xRotation;
                                    case "ADBE Rotate Y":
                                        return e.yRotation;
                                    case "position":
                                    case "Position":
                                    case "ADBE Position":
                                    case 2:
                                        return e.position;
                                    case "ADBE Position_0":
                                        return e.xPosition;
                                    case "ADBE Position_1":
                                        return e.yPosition;
                                    case "ADBE Position_2":
                                        return e.zPosition;
                                    case "anchorPoint":
                                    case "AnchorPoint":
                                    case "Anchor Point":
                                    case "ADBE AnchorPoint":
                                    case 1:
                                        return e.anchorPoint;
                                    case "opacity":
                                    case "Opacity":
                                    case 11:
                                        return e.opacity;
                                    default:
                                        return null
                                    }
                                }
                                var r, n, i, a;
                                return Object.defineProperty(e, "rotation", {
                                    get: ExpressionPropertyInterface(t.r || t.rz)
                                }),
                                Object.defineProperty(e, "zRotation", {
                                    get: ExpressionPropertyInterface(t.rz || t.r)
                                }),
                                Object.defineProperty(e, "xRotation", {
                                    get: ExpressionPropertyInterface(t.rx)
                                }),
                                Object.defineProperty(e, "yRotation", {
                                    get: ExpressionPropertyInterface(t.ry)
                                }),
                                Object.defineProperty(e, "scale", {
                                    get: ExpressionPropertyInterface(t.s)
                                }),
                                t.p ? a = ExpressionPropertyInterface(t.p) : (r = ExpressionPropertyInterface(t.px),
                                n = ExpressionPropertyInterface(t.py),
                                t.pz && (i = ExpressionPropertyInterface(t.pz))),
                                Object.defineProperty(e, "position", {
                                    get: function() {
                                        return t.p ? a() : [r(), n(), i ? i() : 0]
                                    }
                                }),
                                Object.defineProperty(e, "xPosition", {
                                    get: ExpressionPropertyInterface(t.px)
                                }),
                                Object.defineProperty(e, "yPosition", {
                                    get: ExpressionPropertyInterface(t.py)
                                }),
                                Object.defineProperty(e, "zPosition", {
                                    get: ExpressionPropertyInterface(t.pz)
                                }),
                                Object.defineProperty(e, "anchorPoint", {
                                    get: ExpressionPropertyInterface(t.a)
                                }),
                                Object.defineProperty(e, "opacity", {
                                    get: ExpressionPropertyInterface(t.o)
                                }),
                                Object.defineProperty(e, "skew", {
                                    get: ExpressionPropertyInterface(t.sk)
                                }),
                                Object.defineProperty(e, "skewAxis", {
                                    get: ExpressionPropertyInterface(t.sa)
                                }),
                                Object.defineProperty(e, "orientation", {
                                    get: ExpressionPropertyInterface(t.or)
                                }),
                                e
                            }, ProjectInterface = function() {
                                function t(t) {
                                    this.compositions.push(t)
                                }
                                return function() {
                                    function e(t) {
                                        for (var e = 0, r = this.compositions.length; e < r; ) {
                                            if (this.compositions[e].data && this.compositions[e].data.nm === t)
                                                return this.compositions[e].prepareFrame && this.compositions[e].data.xt && this.compositions[e].prepareFrame(this.currentFrame),
                                                this.compositions[e].compInterface;
                                            e += 1
                                        }
                                        return null
                                    }
                                    return e.compositions = [],
                                    e.currentFrame = 0,
                                    e.registerComposition = t,
                                    e
                                }
                            }(), EffectsExpressionInterface = function() {
                                var t = {
                                    createEffectsInterface: function(t, r) {
                                        if (t.effectsManager) {
                                            var n, i = [], a = t.data.ef, o = t.effectsManager.effectElements.length;
                                            for (n = 0; n < o; n += 1)
                                                i.push(e(a[n], t.effectsManager.effectElements[n], r, t));
                                            var s = t.data.ef || []
                                              , l = function(t) {
                                                for (n = 0,
                                                o = s.length; n < o; ) {
                                                    if (t === s[n].nm || t === s[n].mn || t === s[n].ix)
                                                        return i[n];
                                                    n += 1
                                                }
                                                return null
                                            };
                                            return Object.defineProperty(l, "numProperties", {
                                                get: function() {
                                                    return s.length
                                                }
                                            }),
                                            l
                                        }
                                        return null
                                    }
                                };
                                function e(t, n, i, a) {
                                    function o(e) {
                                        for (var r = t.ef, n = 0, i = r.length; n < i; ) {
                                            if (e === r[n].nm || e === r[n].mn || e === r[n].ix)
                                                return 5 === r[n].ty ? c[n] : c[n]();
                                            n += 1
                                        }
                                        throw new Error
                                    }
                                    var s, l = propertyGroupFactory(o, i), c = [], h = t.ef.length;
                                    for (s = 0; s < h; s += 1)
                                        5 === t.ef[s].ty ? c.push(e(t.ef[s], n.effectElements[s], n.effectElements[s].propertyGroup, a)) : c.push(r(n.effectElements[s], t.ef[s].ty, a, l));
                                    return "ADBE Color Control" === t.mn && Object.defineProperty(o, "color", {
                                        get: function() {
                                            return c[0]()
                                        }
                                    }),
                                    Object.defineProperties(o, {
                                        numProperties: {
                                            get: function() {
                                                return t.np
                                            }
                                        },
                                        _name: {
                                            value: t.nm
                                        },
                                        propertyGroup: {
                                            value: l
                                        }
                                    }),
                                    o.enabled = 0 !== t.en,
                                    o.active = o.enabled,
                                    o
                                }
                                function r(t, e, r, n) {
                                    var i = ExpressionPropertyInterface(t.p);
                                    return t.p.setGroupProperty && t.p.setGroupProperty(PropertyInterface("", n)),
                                    function() {
                                        return 10 === e ? r.comp.compInterface(t.p.v) : i()
                                    }
                                }
                                return t
                            }(), MaskManagerInterface = function() {
                                function t(t, e) {
                                    this._mask = t,
                                    this._data = e
                                }
                                return Object.defineProperty(t.prototype, "maskPath", {
                                    get: function() {
                                        return this._mask.prop.k && this._mask.prop.getValue(),
                                        this._mask.prop
                                    }
                                }),
                                Object.defineProperty(t.prototype, "maskOpacity", {
                                    get: function() {
                                        return this._mask.op.k && this._mask.op.getValue(),
                                        100 * this._mask.op.v
                                    }
                                }),
                                function(e) {
                                    var r, n = createSizedArray(e.viewData.length), i = e.viewData.length;
                                    for (r = 0; r < i; r += 1)
                                        n[r] = new t(e.viewData[r],e.masksProperties[r]);
                                    return function(t) {
                                        for (r = 0; r < i; ) {
                                            if (e.masksProperties[r].nm === t)
                                                return n[r];
                                            r += 1
                                        }
                                        return null
                                    }
                                }
                            }(), ExpressionPropertyInterface = function() {
                                var t = {
                                    pv: 0,
                                    v: 0,
                                    mult: 1
                                }
                                  , e = {
                                    pv: [0, 0, 0],
                                    v: [0, 0, 0],
                                    mult: 1
                                };
                                function r(t, e, r) {
                                    Object.defineProperty(t, "velocity", {
                                        get: function() {
                                            return e.getVelocityAtTime(e.comp.currentFrame)
                                        }
                                    }),
                                    t.numKeys = e.keyframes ? e.keyframes.length : 0,
                                    t.key = function(n) {
                                        if (!t.numKeys)
                                            return 0;
                                        var i;
                                        i = "s"in e.keyframes[n - 1] ? e.keyframes[n - 1].s : "e"in e.keyframes[n - 2] ? e.keyframes[n - 2].e : e.keyframes[n - 2].s;
                                        var a = "unidimensional" === r ? new Number(i) : Object.assign({}, i);
                                        return a.time = e.keyframes[n - 1].t / e.elem.comp.globalData.frameRate,
                                        a.value = "unidimensional" === r ? i[0] : i,
                                        a
                                    }
                                    ,
                                    t.valueAtTime = e.getValueAtTime,
                                    t.speedAtTime = e.getSpeedAtTime,
                                    t.velocityAtTime = e.getVelocityAtTime,
                                    t.propertyGroup = e.propertyGroup
                                }
                                function n() {
                                    return t
                                }
                                return function(i) {
                                    return i ? "unidimensional" === i.propType ? function(e) {
                                        e && "pv"in e || (e = t);
                                        var n = 1 / e.mult
                                          , i = e.pv * n
                                          , a = new Number(i);
                                        return a.value = i,
                                        r(a, e, "unidimensional"),
                                        function() {
                                            return e.k && e.getValue(),
                                            i = e.v * n,
                                            a.value !== i && ((a = new Number(i)).value = i,
                                            r(a, e, "unidimensional")),
                                            a
                                        }
                                    }(i) : function(t) {
                                        t && "pv"in t || (t = e);
                                        var n = 1 / t.mult
                                          , i = t.data && t.data.l || t.pv.length
                                          , a = createTypedArray("float32", i)
                                          , o = createTypedArray("float32", i);
                                        return a.value = o,
                                        r(a, t, "multidimensional"),
                                        function() {
                                            t.k && t.getValue();
                                            for (var e = 0; e < i; e += 1)
                                                o[e] = t.v[e] * n,
                                                a[e] = o[e];
                                            return a
                                        }
                                    }(i) : n
                                }
                            }(), TextExpressionSelectorPropFactory = function() {
                                function t(t, e) {
                                    return this.textIndex = t + 1,
                                    this.textTotal = e,
                                    this.v = this.getValue() * this.mult,
                                    this.v
                                }
                                return function(e, r) {
                                    this.pv = 1,
                                    this.comp = e.comp,
                                    this.elem = e,
                                    this.mult = .01,
                                    this.propType = "textSelector",
                                    this.textTotal = r.totalChars,
                                    this.selectorValue = 100,
                                    this.lastValue = [1, 1, 1],
                                    this.k = !0,
                                    this.x = !0,
                                    this.getValue = ExpressionManager.initiateExpression.bind(this)(e, r, this),
                                    this.getMult = t,
                                    this.getVelocityAtTime = expressionHelpers.getVelocityAtTime,
                                    this.kf ? this.getValueAtTime = expressionHelpers.getValueAtTime.bind(this) : this.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(this),
                                    this.setGroupProperty = expressionHelpers.setGroupProperty
                                }
                            }(), propertyGetTextProp = TextSelectorProp.getTextSelectorProp;
                            function SliderEffect(t, e, r) {
                                this.p = PropertyFactory.getProp(e, t.v, 0, 0, r)
                            }
                            function AngleEffect(t, e, r) {
                                this.p = PropertyFactory.getProp(e, t.v, 0, 0, r)
                            }
                            function ColorEffect(t, e, r) {
                                this.p = PropertyFactory.getProp(e, t.v, 1, 0, r)
                            }
                            function PointEffect(t, e, r) {
                                this.p = PropertyFactory.getProp(e, t.v, 1, 0, r)
                            }
                            function LayerIndexEffect(t, e, r) {
                                this.p = PropertyFactory.getProp(e, t.v, 0, 0, r)
                            }
                            function MaskIndexEffect(t, e, r) {
                                this.p = PropertyFactory.getProp(e, t.v, 0, 0, r)
                            }
                            function CheckboxEffect(t, e, r) {
                                this.p = PropertyFactory.getProp(e, t.v, 0, 0, r)
                            }
                            function NoValueEffect() {
                                this.p = {}
                            }
                            function EffectsManager(t, e) {
                                var r, n = t.ef || [];
                                this.effectElements = [];
                                var i, a = n.length;
                                for (r = 0; r < a; r += 1)
                                    i = new GroupEffect(n[r],e),
                                    this.effectElements.push(i)
                            }
                            function GroupEffect(t, e) {
                                this.init(t, e)
                            }
                            TextSelectorProp.getTextSelectorProp = function(t, e, r) {
                                return 1 === e.t ? new TextExpressionSelectorPropFactory(t,e,r) : propertyGetTextProp(t, e, r)
                            }
                            ,
                            extendPrototype([DynamicPropertyContainer], GroupEffect),
                            GroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties,
                            GroupEffect.prototype.init = function(t, e) {
                                var r;
                                this.data = t,
                                this.effectElements = [],
                                this.initDynamicPropertyContainer(e);
                                var n, i = this.data.ef.length, a = this.data.ef;
                                for (r = 0; r < i; r += 1) {
                                    switch (n = null,
                                    a[r].ty) {
                                    case 0:
                                        n = new SliderEffect(a[r],e,this);
                                        break;
                                    case 1:
                                        n = new AngleEffect(a[r],e,this);
                                        break;
                                    case 2:
                                        n = new ColorEffect(a[r],e,this);
                                        break;
                                    case 3:
                                        n = new PointEffect(a[r],e,this);
                                        break;
                                    case 4:
                                    case 7:
                                        n = new CheckboxEffect(a[r],e,this);
                                        break;
                                    case 10:
                                        n = new LayerIndexEffect(a[r],e,this);
                                        break;
                                    case 11:
                                        n = new MaskIndexEffect(a[r],e,this);
                                        break;
                                    case 5:
                                        n = new EffectsManager(a[r],e,this);
                                        break;
                                    default:
                                        n = new NoValueEffect(a[r],e,this)
                                    }
                                    n && this.effectElements.push(n)
                                }
                            }
                            ;
                            var lottie = {};
                            function setLocationHref(t) {
                                locationHref = t
                            }
                            function searchAnimations() {
                                !0 === standalone ? animationManager.searchAnimations(animationData, standalone, renderer) : animationManager.searchAnimations()
                            }
                            function setSubframeRendering(t) {
                                subframeEnabled = t
                            }
                            function setIDPrefix(t) {
                                idPrefix = t
                            }
                            function loadAnimation(t) {
                                return !0 === standalone && (t.animationData = JSON.parse(animationData)),
                                animationManager.loadAnimation(t)
                            }
                            function setQuality(t) {
                                if ("string" == typeof t)
                                    switch (t) {
                                    case "high":
                                        defaultCurveSegments = 200;
                                        break;
                                    default:
                                    case "medium":
                                        defaultCurveSegments = 50;
                                        break;
                                    case "low":
                                        defaultCurveSegments = 10
                                    }
                                else
                                    !isNaN(t) && t > 1 && (defaultCurveSegments = t);
                                roundValues(!(defaultCurveSegments >= 50))
                            }
                            function inBrowser() {
                                return "undefined" != typeof navigator
                            }
                            function installPlugin(t, e) {
                                "expressions" === t && (expressionsPlugin = e)
                            }
                            function getFactory(t) {
                                switch (t) {
                                case "propertyFactory":
                                    return PropertyFactory;
                                case "shapePropertyFactory":
                                    return ShapePropertyFactory;
                                case "matrix":
                                    return Matrix;
                                default:
                                    return null
                                }
                            }
                            function checkReady() {
                                "complete" === document.readyState && (clearInterval(readyStateCheckInterval),
                                searchAnimations())
                            }
                            function getQueryVariable(t) {
                                for (var e = queryString.split("&"), r = 0; r < e.length; r += 1) {
                                    var n = e[r].split("=");
                                    if (decodeURIComponent(n[0]) == t)
                                        return decodeURIComponent(n[1])
                                }
                                return null
                            }
                            lottie.play = animationManager.play,
                            lottie.pause = animationManager.pause,
                            lottie.setLocationHref = setLocationHref,
                            lottie.togglePause = animationManager.togglePause,
                            lottie.setSpeed = animationManager.setSpeed,
                            lottie.setDirection = animationManager.setDirection,
                            lottie.stop = animationManager.stop,
                            lottie.searchAnimations = searchAnimations,
                            lottie.registerAnimation = animationManager.registerAnimation,
                            lottie.loadAnimation = loadAnimation,
                            lottie.setSubframeRendering = setSubframeRendering,
                            lottie.resize = animationManager.resize,
                            lottie.goToAndStop = animationManager.goToAndStop,
                            lottie.destroy = animationManager.destroy,
                            lottie.setQuality = setQuality,
                            lottie.inBrowser = inBrowser,
                            lottie.installPlugin = installPlugin,
                            lottie.freeze = animationManager.freeze,
                            lottie.unfreeze = animationManager.unfreeze,
                            lottie.setVolume = animationManager.setVolume,
                            lottie.mute = animationManager.mute,
                            lottie.unmute = animationManager.unmute,
                            lottie.getRegisteredAnimations = animationManager.getRegisteredAnimations,
                            lottie.useWebWorker = function(t) {
                                _useWebWorker = t
                            }
                            ,
                            lottie.setIDPrefix = setIDPrefix,
                            lottie.__getFactory = getFactory,
                            lottie.version = "5.8.1";
                            var standalone = "__[STANDALONE]__", animationData = "__[ANIMATIONDATA]__", renderer = "", queryString;
                            if (standalone) {
                                var scripts = document.getElementsByTagName("script")
                                  , index = scripts.length - 1
                                  , myScript = scripts[index] || {
                                    src: ""
                                };
                                queryString = myScript.src.replace(/^[^\?]+\??/, ""),
                                renderer = getQueryVariable("renderer")
                            }
                            var readyStateCheckInterval = setInterval(checkReady, 100);
                            return lottie
                        }
                        ,
                        module.exports ? module.exports = factory(root) : (root.lottie = factory(root),
                        root.bodymovin = root.lottie))
                    }
                    )(lottie$1);
                    var lottie = lottie$1.exports, _templateObject$1, styles = r$3(_templateObject$1 || (_templateObject$1 = _taggedTemplateLiteral(["\n  * {\n    box-sizing: border-box;\n  }\n\n  :host {\n    --lottie-player-toolbar-height: 35px;\n    --lottie-player-toolbar-background-color: transparent;\n    --lottie-player-toolbar-icon-color: #999;\n    --lottie-player-toolbar-icon-hover-color: #222;\n    --lottie-player-toolbar-icon-active-color: #555;\n    --lottie-player-seeker-track-color: #ccc;\n    --lottie-player-seeker-thumb-color: rgba(0, 107, 120, 0.8);\n    --lottie-player-seeker-display: block;\n\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n\n  .main {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    width: 100%;\n  }\n\n  .animation {\n    width: 100%;\n    height: 100%;\n    display: flex;\n  }\n  .animation.controls {\n    height: calc(100% - 35px);\n  }\n\n  .toolbar {\n    display: flex;\n    align-items: center;\n    justify-items: center;\n    background-color: var(--lottie-player-toolbar-background-color);\n    margin: 0 5px;\n    height: 35px;\n  }\n\n  .toolbar button {\n    cursor: pointer;\n    fill: var(--lottie-player-toolbar-icon-color);\n    display: flex;\n    background: none;\n    border: 0;\n    padding: 0;\n    outline: none;\n    height: 100%;\n  }\n\n  .toolbar button:hover {\n    fill: var(--lottie-player-toolbar-icon-hover-color);\n  }\n\n  .toolbar button.active {\n    fill: var(--lottie-player-toolbar-icon-active-color);\n  }\n\n  .toolbar button.active:hover {\n    fill: var(--lottie-player-toolbar-icon-hover-color);\n  }\n\n  .toolbar button:focus {\n    outline: 1px dotted var(--lottie-player-toolbar-icon-active-color);\n  }\n\n  .toolbar button svg {\n  }\n\n  .toolbar button.disabled svg {\n    display: none;\n  }\n\n  .seeker {\n    -webkit-appearance: none;\n    width: 95%;\n    outline: none;\n    background-color: var(--lottie-player-toolbar-background-color);\n    display: var(--lottie-player-seeker-display);\n  }\n\n  .seeker::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 5px;\n    cursor: pointer;\n    background: var(--lottie-player-seeker-track-color);\n    border-radius: 3px;\n  }\n  .seeker::-webkit-slider-thumb {\n    height: 15px;\n    width: 15px;\n    border-radius: 50%;\n    background: var(--lottie-player-seeker-thumb-color);\n    cursor: pointer;\n    -webkit-appearance: none;\n    margin-top: -5px;\n  }\n  .seeker:focus::-webkit-slider-runnable-track {\n    background: #999;\n  }\n  .seeker::-moz-range-track {\n    width: 100%;\n    height: 5px;\n    cursor: pointer;\n    background: var(--lottie-player-seeker-track-color);\n    border-radius: 3px;\n  }\n  .seeker::-moz-range-thumb {\n    height: 15px;\n    width: 15px;\n    border-radius: 50%;\n    background: var(--lottie-player-seeker-thumb-color);\n    cursor: pointer;\n  }\n  .seeker::-ms-track {\n    width: 100%;\n    height: 5px;\n    cursor: pointer;\n    background: transparent;\n    border-color: transparent;\n    color: transparent;\n  }\n  .seeker::-ms-fill-lower {\n    background: var(--lottie-player-seeker-track-color);\n    border-radius: 3px;\n  }\n  .seeker::-ms-fill-upper {\n    background: var(--lottie-player-seeker-track-color);\n    border-radius: 3px;\n  }\n  .seeker::-ms-thumb {\n    border: 0;\n    height: 15px;\n    width: 15px;\n    border-radius: 50%;\n    background: var(--lottie-player-seeker-thumb-color);\n    cursor: pointer;\n  }\n  .seeker:focus::-ms-fill-lower {\n    background: var(--lottie-player-seeker-track-color);\n  }\n  .seeker:focus::-ms-fill-upper {\n    background: var(--lottie-player-seeker-track-color);\n  }\n\n  .error {\n    display: flex;\n    justify-content: center;\n    height: 100%;\n    align-items: center;\n  }\n"]))), _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, PlayerState, PlayMode, PlayerEvents;
                    function parseSrc(t) {
                        if ("object" == _typeof2(t))
                            return t;
                        try {
                            return JSON.parse(t)
                        } catch (e) {
                            return new URL(t,window.location.href).toString()
                        }
                    }
                    function isLottie(t) {
                        return ["v", "ip", "op", "layers", "fr", "w", "h"].every((function(e) {
                            return Object.prototype.hasOwnProperty.call(t, e)
                        }
                        ))
                    }
                    function fromURL(t) {
                        return _fromURL.apply(this, arguments)
                    }
                    function _fromURL() {
                        return (_fromURL = _asyncToGenerator(regeneratorRuntime.mark((function t(e) {
                            var r, n, i;
                            return regeneratorRuntime.wrap((function(t) {
                                for (; ; )
                                    switch (t.prev = t.next) {
                                    case 0:
                                        if ("string" == typeof e) {
                                            t.next = 2;
                                            break
                                        }
                                        throw new Error("The url value must be a string");
                                    case 2:
                                        return t.prev = 2,
                                        n = new URL(e),
                                        t.next = 6,
                                        fetch(n.toString());
                                    case 6:
                                        return i = t.sent,
                                        t.next = 9,
                                        i.json();
                                    case 9:
                                        r = t.sent,
                                        t.next = 15;
                                        break;
                                    case 12:
                                        throw t.prev = 12,
                                        t.t0 = t.catch(2),
                                        new Error("An error occurred while trying to load the Lottie file from URL");
                                    case 15:
                                        return t.abrupt("return", r);
                                    case 16:
                                    case "end":
                                        return t.stop()
                                    }
                            }
                            ), t, null, [[2, 12]])
                        }
                        )))).apply(this, arguments)
                    }
                    exports.PlayerState = void 0,
                    PlayerState = exports.PlayerState || (exports.PlayerState = {}),
                    PlayerState.Destroyed = "destroyed",
                    PlayerState.Error = "error",
                    PlayerState.Frozen = "frozen",
                    PlayerState.Loading = "loading",
                    PlayerState.Paused = "paused",
                    PlayerState.Playing = "playing",
                    PlayerState.Stopped = "stopped",
                    exports.PlayMode = void 0,
                    PlayMode = exports.PlayMode || (exports.PlayMode = {}),
                    PlayMode.Bounce = "bounce",
                    PlayMode.Normal = "normal",
                    exports.PlayerEvents = void 0,
                    PlayerEvents = exports.PlayerEvents || (exports.PlayerEvents = {}),
                    PlayerEvents.Complete = "complete",
                    PlayerEvents.Destroyed = "destroyed",
                    PlayerEvents.Error = "error",
                    PlayerEvents.Frame = "frame",
                    PlayerEvents.Freeze = "freeze",
                    PlayerEvents.Load = "load",
                    PlayerEvents.Loop = "loop",
                    PlayerEvents.Pause = "pause",
                    PlayerEvents.Play = "play",
                    PlayerEvents.Ready = "ready",
                    PlayerEvents.Rendered = "rendered",
                    PlayerEvents.Stop = "stop",
                    exports.LottiePlayer = function(t) {
                        _inherits2(r, t);
                        var e = _createSuper2(r);
                        function r() {
                            var t;
                            return _classCallCheck2(this, r),
                            (t = e.apply(this, arguments)).autoplay = !1,
                            t.background = "transparent",
                            t.controls = !1,
                            t.currentState = exports.PlayerState.Loading,
                            t.description = "Lottie animation",
                            t.direction = 1,
                            t.hover = !1,
                            t.intermission = 1,
                            t.loop = !1,
                            t.mode = exports.PlayMode.Normal,
                            t.preserveAspectRatio = "xMidYMid meet",
                            t.renderer = "svg",
                            t.speed = 1,
                            t._io = void 0,
                            t._counter = 1,
                            t
                        }
                        return _createClass2(r, [{
                            key: "load",
                            value: function(t) {
                                var e = this;
                                return _asyncToGenerator(regeneratorRuntime.mark((function r() {
                                    var n, i, a, o;
                                    return regeneratorRuntime.wrap((function(r) {
                                        for (; ; )
                                            switch (r.prev = r.next) {
                                            case 0:
                                                if (!e.shadowRoot) {
                                                    r.next = 22;
                                                    break
                                                }
                                                if (n = {
                                                    container: e.container,
                                                    loop: !1,
                                                    autoplay: !1,
                                                    renderer: e.renderer,
                                                    rendererSettings: {
                                                        preserveAspectRatio: e.preserveAspectRatio,
                                                        clearCanvas: !1,
                                                        progressiveLoad: !0,
                                                        hideOnTransparent: !0
                                                    }
                                                },
                                                r.prev = 2,
                                                i = parseSrc(t),
                                                a = {},
                                                o = "string" == typeof i ? "path" : "animationData",
                                                e._lottie && e._lottie.destroy(),
                                                e.webworkers && lottie$1.exports.useWebWorker(!0),
                                                e._lottie = lottie$1.exports.loadAnimation(Object.assign(Object.assign({}, n), _defineProperty2({}, o, i))),
                                                e._attachEventListeners(),
                                                "path" !== o) {
                                                    r.next = 15;
                                                    break
                                                }
                                                return r.next = 11,
                                                fromURL(i);
                                            case 11:
                                                a = r.sent,
                                                o = "animationData",
                                                r.next = 16;
                                                break;
                                            case 15:
                                                a = i;
                                            case 16:
                                                isLottie(a) || (e.currentState = exports.PlayerState.Error,
                                                e.dispatchEvent(new CustomEvent(exports.PlayerEvents.Error))),
                                                r.next = 22;
                                                break;
                                            case 19:
                                                r.prev = 19,
                                                r.t0 = r.catch(2),
                                                e.currentState = exports.PlayerState.Error,
                                                e.dispatchEvent(new CustomEvent(exports.PlayerEvents.Error));
                                            case 22:
                                            case "end":
                                                return r.stop()
                                            }
                                    }
                                    ), r, null, [[2, 19]])
                                }
                                )))()
                            }
                        }, {
                            key: "getLottie",
                            value: function() {
                                return this._lottie
                            }
                        }, {
                            key: "play",
                            value: function() {
                                this._lottie && (this._lottie.play(),
                                this.currentState = exports.PlayerState.Playing,
                                this.dispatchEvent(new CustomEvent(exports.PlayerEvents.Play)))
                            }
                        }, {
                            key: "pause",
                            value: function() {
                                this._lottie && (this._lottie.pause(),
                                this.currentState = exports.PlayerState.Paused,
                                this.dispatchEvent(new CustomEvent(exports.PlayerEvents.Pause)))
                            }
                        }, {
                            key: "stop",
                            value: function() {
                                this._lottie && (this._counter = 1,
                                this._lottie.stop(),
                                this.currentState = exports.PlayerState.Stopped,
                                this.dispatchEvent(new CustomEvent(exports.PlayerEvents.Stop)))
                            }
                        }, {
                            key: "destroy",
                            value: function() {
                                this._lottie && (this._lottie.destroy(),
                                this._lottie = null,
                                this.currentState = exports.PlayerState.Destroyed,
                                this.dispatchEvent(new CustomEvent(exports.PlayerEvents.Destroyed)),
                                this.remove())
                            }
                        }, {
                            key: "seek",
                            value: function(t) {
                                if (this._lottie) {
                                    var e = /^(\d+)(%?)$/.exec(t.toString());
                                    if (e) {
                                        var r = "%" === e[2] ? this._lottie.totalFrames * Number(e[1]) / 100 : Number(e[1]);
                                        this.seeker = r,
                                        this.currentState === exports.PlayerState.Playing ? this._lottie.goToAndPlay(r, !0) : (this._lottie.goToAndStop(r, !0),
                                        this._lottie.pause())
                                    }
                                }
                            }
                        }, {
                            key: "snapshot",
                            value: function() {
                                var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                                if (this.shadowRoot) {
                                    var e = this.shadowRoot.querySelector(".animation svg")
                                      , r = (new XMLSerializer).serializeToString(e);
                                    if (t) {
                                        var n = document.createElement("a");
                                        n.href = "data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(r)),
                                        n.download = "download_".concat(this.seeker, ".svg"),
                                        document.body.appendChild(n),
                                        n.click(),
                                        document.body.removeChild(n)
                                    }
                                    return r
                                }
                            }
                        }, {
                            key: "setSpeed",
                            value: function() {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
                                this._lottie && this._lottie.setSpeed(t)
                            }
                        }, {
                            key: "setDirection",
                            value: function(t) {
                                this._lottie && this._lottie.setDirection(t)
                            }
                        }, {
                            key: "setLooping",
                            value: function(t) {
                                this._lottie && (this.loop = t,
                                this._lottie.loop = t)
                            }
                        }, {
                            key: "togglePlay",
                            value: function() {
                                return this.currentState === exports.PlayerState.Playing ? this.pause() : this.play()
                            }
                        }, {
                            key: "toggleLooping",
                            value: function() {
                                this.setLooping(!this.loop)
                            }
                        }, {
                            key: "resize",
                            value: function() {
                                this._lottie && this._lottie.resize()
                            }
                        }, {
                            key: "disconnectedCallback",
                            value: function() {
                                var t = this;
                                this.isConnected || (this._io && (this._io.disconnect(),
                                this._io = void 0),
                                document.removeEventListener("visibilitychange", (function() {
                                    return t._onVisibilityChange()
                                }
                                )),
                                this.destroy())
                            }
                        }, {
                            key: "render",
                            value: function() {
                                var t = this.controls ? "main controls" : "main"
                                  , e = this.controls ? "animation controls" : "animation";
                                return $(_templateObject || (_templateObject = _taggedTemplateLiteral([' <div\n      id="animation-container"\n      class=', '\n      lang="en"\n      aria-label=', '\n      role="img"\n    >\n      <div\n        id="animation"\n        class=', '\n        style="background:', ';"\n      >\n        ', "\n      </div>\n      ", "\n    </div>"])), t, this.description, e, this.background, this.currentState === exports.PlayerState.Error ? $(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral(['<div class="error"></div>']))) : void 0, this.controls ? this.renderControls() : void 0)
                            }
                        }, {
                            key: "firstUpdated",
                            value: function() {
                                var t = this;
                                "IntersectionObserver"in window && (this._io = new IntersectionObserver((function(e) {
                                    e[0].isIntersecting ? t.currentState === exports.PlayerState.Frozen && t.play() : t.currentState === exports.PlayerState.Playing && t.freeze()
                                }
                                )),
                                this._io.observe(this.container)),
                                void 0 !== document.hidden && document.addEventListener("visibilitychange", (function() {
                                    return t._onVisibilityChange()
                                }
                                )),
                                this.src && this.load(this.src),
                                this.dispatchEvent(new CustomEvent(exports.PlayerEvents.Rendered))
                            }
                        }, {
                            key: "renderControls",
                            value: function() {
                                var t = this
                                  , e = this.currentState === exports.PlayerState.Playing
                                  , r = this.currentState === exports.PlayerState.Paused
                                  , n = this.currentState === exports.PlayerState.Stopped;
                                return $(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral(['\n      <div\n        id="lottie-controls"\n        aria-label="lottie-animation-controls"\n        class="toolbar"\n      >\n        <button\n          id="lottie-play-button"\n          @click=', "\n          class=", '\n          style="align-items:center;"\n          tabindex="0"\n          aria-label="play-pause"\n        >\n          ', '\n        </button>\n        <button\n          id="lottie-stop-button"\n          @click=', "\n          class=", '\n          style="align-items:center;"\n          tabindex="0"\n          aria-label="stop"\n        >\n          <svg width="24" height="24" aria-hidden="true" focusable="false">\n            <path d="M6 6h12v12H6V6z" />\n          </svg>\n        </button>\n        <input\n          id="lottie-seeker-input"\n          class="seeker"\n          type="range"\n          min="0"\n          step="1"\n          max="100"\n          .value=', "\n          @input=", "\n          @mousedown=", "\n          @mouseup=", '\n          aria-valuemin="1"\n          aria-valuemax="100"\n          role="slider"\n          aria-valuenow=', '\n          tabindex="0"\n          aria-label="lottie-seek-input"\n        />\n        <button\n          id="lottie-loop-toggle"\n          @click=', "\n          class=", '\n          style="align-items:center;"\n          tabindex="0"\n          aria-label="loop-toggle"\n        >\n          <svg width="24" height="24" aria-hidden="true" focusable="false">\n            <path\n              d="M17.016 17.016v-4.031h1.969v6h-12v3l-3.984-3.984 3.984-3.984v3h10.031zM6.984 6.984v4.031H5.015v-6h12v-3l3.984 3.984-3.984 3.984v-3H6.984z"\n            />\n          </svg>\n        </button>\n      </div>\n    '])), this.togglePlay, e || r ? "active" : "", $(e ? _templateObject4 || (_templateObject4 = _taggedTemplateLiteral(['<svg\n                width="24"\n                height="24"\n                aria-hidden="true"\n                focusable="false"\n              >\n                <path\n                  d="M14.016 5.016H18v13.969h-3.984V5.016zM6 18.984V5.015h3.984v13.969H6z"\n                />\n              </svg>'])) : _templateObject5 || (_templateObject5 = _taggedTemplateLiteral(['<svg\n                width="24"\n                height="24"\n                aria-hidden="true"\n                focusable="false"\n              >\n                <path d="M8.016 5.016L18.985 12 8.016 18.984V5.015z" />\n              </svg>']))), this.stop, n ? "active" : "", this.seeker, this._handleSeekChange, (function() {
                                    t._prevState = t.currentState,
                                    t.freeze()
                                }
                                ), (function() {
                                    t._prevState === exports.PlayerState.Playing && t.play()
                                }
                                ), this.seeker, this.toggleLooping, this.loop ? "active" : "")
                            }
                        }, {
                            key: "_onVisibilityChange",
                            value: function() {
                                !0 === document.hidden && this.currentState === exports.PlayerState.Playing ? this.freeze() : this.currentState === exports.PlayerState.Frozen && this.play()
                            }
                        }, {
                            key: "_handleSeekChange",
                            value: function(t) {
                                if (this._lottie && !isNaN(t.target.value)) {
                                    var e = t.target.value / 100 * this._lottie.totalFrames;
                                    this.seek(e)
                                }
                            }
                        }, {
                            key: "_attachEventListeners",
                            value: function() {
                                var t = this;
                                this._lottie.addEventListener("enterFrame", (function() {
                                    t.seeker = t._lottie.currentFrame / t._lottie.totalFrames * 100,
                                    t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Frame,{
                                        detail: {
                                            frame: t._lottie.currentFrame,
                                            seeker: t.seeker
                                        }
                                    }))
                                }
                                )),
                                this._lottie.addEventListener("complete", (function() {
                                    if (t.currentState === exports.PlayerState.Playing) {
                                        if (!t.loop || t.count && t._counter >= t.count) {
                                            if (t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Complete)),
                                            t.mode !== exports.PlayMode.Bounce)
                                                return;
                                            if (0 === t._lottie.currentFrame)
                                                return
                                        }
                                        t.mode === exports.PlayMode.Bounce ? (t.count && (t._counter += .5),
                                        setTimeout((function() {
                                            t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Loop)),
                                            t.currentState === exports.PlayerState.Playing && (t._lottie.setDirection(-1 * t._lottie.playDirection),
                                            t._lottie.play())
                                        }
                                        ), t.intermission)) : (t.count && (t._counter += 1),
                                        window.setTimeout((function() {
                                            t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Loop)),
                                            t.currentState === exports.PlayerState.Playing && (-1 === t.direction ? (t.seek("99%"),
                                            t.play()) : (t._lottie.stop(),
                                            t._lottie.play()))
                                        }
                                        ), t.intermission))
                                    } else
                                        t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Complete))
                                }
                                )),
                                this._lottie.addEventListener("DOMLoaded", (function() {
                                    t.setSpeed(t.speed),
                                    t.setDirection(t.direction),
                                    t.autoplay && (-1 === t.direction && t.seek("100%"),
                                    t.play()),
                                    t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Ready))
                                }
                                )),
                                this._lottie.addEventListener("data_ready", (function() {
                                    t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Load))
                                }
                                )),
                                this._lottie.addEventListener("data_failed", (function() {
                                    t.currentState = exports.PlayerState.Error,
                                    t.dispatchEvent(new CustomEvent(exports.PlayerEvents.Error))
                                }
                                )),
                                this.container.addEventListener("mouseenter", (function() {
                                    t.hover && t.currentState !== exports.PlayerState.Playing && t.play()
                                }
                                )),
                                this.container.addEventListener("mouseleave", (function() {
                                    t.hover && t.currentState === exports.PlayerState.Playing && t.stop()
                                }
                                ))
                            }
                        }, {
                            key: "freeze",
                            value: function() {
                                this._lottie && (this._lottie.pause(),
                                this.currentState = exports.PlayerState.Frozen,
                                this.dispatchEvent(new CustomEvent(exports.PlayerEvents.Freeze)))
                            }
                        }], [{
                            key: "styles",
                            get: function() {
                                return styles
                            }
                        }]),
                        r
                    }(s),
                    __decorate([e$5({
                        type: Boolean
                    })], exports.LottiePlayer.prototype, "autoplay", void 0),
                    __decorate([e$5({
                        type: String,
                        reflect: !0
                    })], exports.LottiePlayer.prototype, "background", void 0),
                    __decorate([e$5({
                        type: Boolean
                    })], exports.LottiePlayer.prototype, "controls", void 0),
                    __decorate([e$5({
                        type: Number
                    })], exports.LottiePlayer.prototype, "count", void 0),
                    __decorate([e$5({
                        type: String
                    })], exports.LottiePlayer.prototype, "currentState", void 0),
                    __decorate([e$5({
                        type: String
                    })], exports.LottiePlayer.prototype, "description", void 0),
                    __decorate([e$5({
                        type: Number
                    })], exports.LottiePlayer.prototype, "direction", void 0),
                    __decorate([e$5({
                        type: Boolean
                    })], exports.LottiePlayer.prototype, "hover", void 0),
                    __decorate([e$5()], exports.LottiePlayer.prototype, "intermission", void 0),
                    __decorate([e$5({
                        type: Boolean,
                        reflect: !0
                    })], exports.LottiePlayer.prototype, "loop", void 0),
                    __decorate([e$5()], exports.LottiePlayer.prototype, "mode", void 0),
                    __decorate([e$5({
                        type: String
                    })], exports.LottiePlayer.prototype, "preserveAspectRatio", void 0),
                    __decorate([e$5({
                        type: String
                    })], exports.LottiePlayer.prototype, "renderer", void 0),
                    __decorate([e$5()], exports.LottiePlayer.prototype, "seeker", void 0),
                    __decorate([e$5({
                        type: Number
                    })], exports.LottiePlayer.prototype, "speed", void 0),
                    __decorate([e$5({
                        type: String
                    })], exports.LottiePlayer.prototype, "src", void 0),
                    __decorate([e$5({
                        type: Boolean
                    })], exports.LottiePlayer.prototype, "webworkers", void 0),
                    __decorate([i(".animation")], exports.LottiePlayer.prototype, "container", void 0),
                    exports.LottiePlayer = __decorate([n$1("lottie-player")], exports.LottiePlayer),
                    exports.parseSrc = parseSrc,
                    Object.defineProperty(exports, "__esModule", {
                        value: !0
                    })
                }
                ,
                "object" == ("undefined" == typeof exports ? "undefined" : _typeof2(exports)) && "undefined" != typeof module ? e(exports) : "function" == typeof define && define.amd ? define(["exports"], e) : e((t = "undefined" != typeof globalThis ? globalThis : t || self)["lottie-player"] = {})
            }
            ).call(this)
        }
        ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
    }
    , {}],
    2: [function(t, e, r) {
        "use strict";
        e.exports = function(t, e, r, n) {
            if (n = (r = window.getComputedStyle) ? r(t) : t.currentStyle)
                return n[e.replace(/-(\w)/gi, (function(t, e) {
                    return e.toUpperCase()
                }
                ))]
        }
    }
    , {}],
    3: [function(t, e, r) {
        "use strict";
        e.exports = function(t) {
            "string" == typeof t && (t = [t]);
            for (var e = [].slice.call(arguments, 1), r = [], n = 0; n < t.length - 1; n++)
                r.push(t[n], e[n] || "");
            return r.push(t[n]),
            r.join("")
        }
    }
    , {}],
    4: [function(t, e, r) {
        "use strict";
        function n(t) {
            return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            }
            : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            }
            ,
            n(t)
        }
        !function(t, i) {
            "object" === ("undefined" == typeof r ? "undefined" : n(r)) && "undefined" != typeof e ? i(r) : "function" == typeof define && define.amd ? define(["exports"], i) : i((t = t || self).window = t.window || {})
        }(void 0, (function(t) {
            function e(t, e) {
                t.prototype = Object.create(e.prototype),
                t.prototype.constructor = t,
                t.__proto__ = e
            }
            function r(t) {
                if (void 0 === t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return t
            }
            var i, a, o, s, l, c, h, u, p, d, f, m, v, g, y, _, x, b, w, S, T, M, E, A, P, C, L, D, R = {
                autoSleep: 120,
                force3D: "auto",
                nullTargetWarn: 1,
                units: {
                    lineHeight: ""
                }
            }, I = {
                duration: .5,
                overwrite: !1,
                delay: 0
            }, k = 1e8, O = 1e-8, F = 2 * Math.PI, N = F / 4, B = 0, z = Math.sqrt, G = Math.cos, H = Math.sin, U = function(t) {
                return "string" == typeof t
            }, V = function(t) {
                return "function" == typeof t
            }, j = function(t) {
                return "number" == typeof t
            }, W = function(t) {
                return "undefined" == typeof t
            }, q = function(t) {
                return "object" === n(t)
            }, X = function(t) {
                return !1 !== t
            }, Y = function() {
                return "undefined" != typeof window
            }, $ = function(t) {
                return V(t) || U(t)
            }, K = "function" == typeof ArrayBuffer && ArrayBuffer.isView || function() {}
            , Z = Array.isArray, J = /(?:-?\.?\d|\.)+/gi, Q = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g, tt = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g, et = /[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi, rt = /[+-]=-?[.\d]+/, nt = /[^,'"\[\]\s]+/gi, it = /^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i, at = {}, ot = {}, st = function(t) {
                return (ot = It(t, at)) && wr
            }, lt = function(t, e) {
                return console.warn("Invalid property", t, "set to", e, "Missing plugin? gsap.registerPlugin()")
            }, ct = function(t, e) {
                return !e && console.warn(t)
            }, ht = function(t, e) {
                return t && (at[t] = e) && ot && (ot[t] = e) || at
            }, ut = function() {
                return 0
            }, pt = {}, dt = [], ft = {}, mt = {}, vt = {}, gt = 30, yt = [], _t = "", xt = function(t) {
                var e, r, n = t[0];
                if (q(n) || V(n) || (t = [t]),
                !(e = (n._gsap || {}).harness)) {
                    for (r = yt.length; r-- && !yt[r].targetTest(n); )
                        ;
                    e = yt[r]
                }
                for (r = t.length; r--; )
                    t[r] && (t[r]._gsap || (t[r]._gsap = new We(t[r],e))) || t.splice(r, 1);
                return t
            }, bt = function(t) {
                return t._gsap || xt(he(t))[0]._gsap
            }, wt = function(t, e, r) {
                return (r = t[e]) && V(r) ? t[e]() : W(r) && t.getAttribute && t.getAttribute(e) || r
            }, St = function(t, e) {
                return (t = t.split(",")).forEach(e) || t
            }, Tt = function(t) {
                return Math.round(1e5 * t) / 1e5 || 0
            }, Mt = function(t) {
                return Math.round(1e7 * t) / 1e7 || 0
            }, Et = function(t, e) {
                var r = e.charAt(0)
                  , n = parseFloat(e.substr(2));
                return t = parseFloat(t),
                "+" === r ? t + n : "-" === r ? t - n : "*" === r ? t * n : t / n
            }, At = function(t, e) {
                for (var r = e.length, n = 0; t.indexOf(e[n]) < 0 && ++n < r; )
                    ;
                return n < r
            }, Pt = function() {
                var t, e, r = dt.length, n = dt.slice(0);
                for (ft = {},
                dt.length = 0,
                t = 0; t < r; t++)
                    (e = n[t]) && e._lazy && (e.render(e._lazy[0], e._lazy[1], !0)._lazy = 0)
            }, Ct = function(t, e, r, n) {
                dt.length && Pt(),
                t.render(e, r, n),
                dt.length && Pt()
            }, Lt = function(t) {
                var e = parseFloat(t);
                return (e || 0 === e) && (t + "").match(nt).length < 2 ? e : U(t) ? t.trim() : t
            }, Dt = function(t) {
                return t
            }, Rt = function(t, e) {
                for (var r in e)
                    r in t || (t[r] = e[r]);
                return t
            }, It = function(t, e) {
                for (var r in e)
                    t[r] = e[r];
                return t
            }, kt = function t(e, r) {
                for (var n in r)
                    "__proto__" !== n && "constructor" !== n && "prototype" !== n && (e[n] = q(r[n]) ? t(e[n] || (e[n] = {}), r[n]) : r[n]);
                return e
            }, Ot = function(t, e) {
                var r, n = {};
                for (r in t)
                    r in e || (n[r] = t[r]);
                return n
            }, Ft = function(t) {
                var e, r = t.parent || a, n = t.keyframes ? (e = Z(t.keyframes),
                function(t, r) {
                    for (var n in r)
                        n in t || "duration" === n && e || "ease" === n || (t[n] = r[n])
                }
                ) : Rt;
                if (X(t.inherit))
                    for (; r; )
                        n(t, r.vars.defaults),
                        r = r.parent || r._dp;
                return t
            }, Nt = function(t, e, r, n, i) {
                void 0 === r && (r = "_first"),
                void 0 === n && (n = "_last");
                var a, o = t[n];
                if (i)
                    for (a = e[i]; o && o[i] > a; )
                        o = o._prev;
                return o ? (e._next = o._next,
                o._next = e) : (e._next = t[r],
                t[r] = e),
                e._next ? e._next._prev = e : t[n] = e,
                e._prev = o,
                e.parent = e._dp = t,
                e
            }, Bt = function(t, e, r, n) {
                void 0 === r && (r = "_first"),
                void 0 === n && (n = "_last");
                var i = e._prev
                  , a = e._next;
                i ? i._next = a : t[r] === e && (t[r] = a),
                a ? a._prev = i : t[n] === e && (t[n] = i),
                e._next = e._prev = e.parent = null
            }, zt = function(t, e) {
                t.parent && (!e || t.parent.autoRemoveChildren) && t.parent.remove(t),
                t._act = 0
            }, Gt = function(t, e) {
                if (t && (!e || e._end > t._dur || e._start < 0))
                    for (var r = t; r; )
                        r._dirty = 1,
                        r = r.parent;
                return t
            }, Ht = function(t) {
                for (var e = t.parent; e && e.parent; )
                    e._dirty = 1,
                    e.totalDuration(),
                    e = e.parent;
                return t
            }, Ut = function t(e) {
                return !e || e._ts && t(e.parent)
            }, Vt = function(t) {
                return t._repeat ? jt(t._tTime, t = t.duration() + t._rDelay) * t : 0
            }, jt = function(t, e) {
                var r = Math.floor(t /= e);
                return t && r === t ? r - 1 : r
            }, Wt = function(t, e) {
                return (t - e._start) * e._ts + (e._ts >= 0 ? 0 : e._dirty ? e.totalDuration() : e._tDur)
            }, qt = function(t) {
                return t._end = Mt(t._start + (t._tDur / Math.abs(t._ts || t._rts || O) || 0))
            }, Xt = function(t, e) {
                var r = t._dp;
                return r && r.smoothChildTiming && t._ts && (t._start = Mt(r._time - (t._ts > 0 ? e / t._ts : ((t._dirty ? t.totalDuration() : t._tDur) - e) / -t._ts)),
                qt(t),
                r._dirty || Gt(r, t)),
                t
            }, Yt = function(t, e) {
                var r;
                if ((e._time || e._initted && !e._dur) && (r = Wt(t.rawTime(), e),
                (!e._dur || oe(0, e.totalDuration(), r) - e._tTime > O) && e.render(r, !0)),
                Gt(t, e)._dp && t._initted && t._time >= t._dur && t._ts) {
                    if (t._dur < t.duration())
                        for (r = t; r._dp; )
                            r.rawTime() >= 0 && r.totalTime(r._tTime),
                            r = r._dp;
                    t._zTime = -1e-8
                }
            }, $t = function(t, e, r, n) {
                return e.parent && zt(e),
                e._start = Mt((j(r) ? r : r || t !== a ? ne(t, r, e) : t._time) + e._delay),
                e._end = Mt(e._start + (e.totalDuration() / Math.abs(e.timeScale()) || 0)),
                Nt(t, e, "_first", "_last", t._sort ? "_start" : 0),
                Qt(e) || (t._recent = e),
                n || Yt(t, e),
                t
            }, Kt = function(t, e) {
                return (at.ScrollTrigger || lt("scrollTrigger", e)) && at.ScrollTrigger.create(e, t)
            }, Zt = function(t, e, r, n) {
                return Qe(t, e),
                t._initted ? !r && t._pt && (t._dur && !1 !== t.vars.lazy || !t._dur && t.vars.lazy) && h !== Re.frame ? (dt.push(t),
                t._lazy = [e, n],
                1) : void 0 : 1
            }, Jt = function t(e) {
                var r = e.parent;
                return r && r._ts && r._initted && !r._lock && (r.rawTime() < 0 || t(r))
            }, Qt = function(t) {
                var e = t.data;
                return "isFromStart" === e || "isStart" === e
            }, te = function(t, e, r, n) {
                var i = t._repeat
                  , a = Mt(e) || 0
                  , o = t._tTime / t._tDur;
                return o && !n && (t._time *= a / t._dur),
                t._dur = a,
                t._tDur = i ? i < 0 ? 1e10 : Mt(a * (i + 1) + t._rDelay * i) : a,
                o > 0 && !n ? Xt(t, t._tTime = t._tDur * o) : t.parent && qt(t),
                r || Gt(t.parent, t),
                t
            }, ee = function(t) {
                return t instanceof Xe ? Gt(t) : te(t, t._dur)
            }, re = {
                _start: 0,
                endTime: ut,
                totalDuration: ut
            }, ne = function t(e, r, n) {
                var i, a, o, s = e.labels, l = e._recent || re, c = e.duration() >= k ? l.endTime(!1) : e._dur;
                return U(r) && (isNaN(r) || r in s) ? (a = r.charAt(0),
                o = "%" === r.substr(-1),
                i = r.indexOf("="),
                "<" === a || ">" === a ? (i >= 0 && (r = r.replace(/=/, "")),
                ("<" === a ? l._start : l.endTime(l._repeat >= 0)) + (parseFloat(r.substr(1)) || 0) * (o ? (i < 0 ? l : n).totalDuration() / 100 : 1)) : i < 0 ? (r in s || (s[r] = c),
                s[r]) : (a = parseFloat(r.charAt(i - 1) + r.substr(i + 1)),
                o && n && (a = a / 100 * (Z(n) ? n[0] : n).totalDuration()),
                i > 1 ? t(e, r.substr(0, i - 1), n) + a : c + a)) : null == r ? c : +r
            }, ie = function(t, e, r) {
                var n, i, a = j(e[1]), o = (a ? 2 : 1) + (t < 2 ? 0 : 1), s = e[o];
                if (a && (s.duration = e[1]),
                s.parent = r,
                t) {
                    for (n = s,
                    i = r; i && !("immediateRender"in n); )
                        n = i.vars.defaults || {},
                        i = X(i.vars.inherit) && i.parent;
                    s.immediateRender = X(n.immediateRender),
                    t < 2 ? s.runBackwards = 1 : s.startAt = e[o - 1]
                }
                return new ir(e[0],s,e[o + 1])
            }, ae = function(t, e) {
                return t || 0 === t ? e(t) : e
            }, oe = function(t, e, r) {
                return r < t ? t : r > e ? e : r
            }, se = function(t, e) {
                return U(t) && (e = it.exec(t)) ? e[1] : ""
            }, le = [].slice, ce = function(t, e) {
                return t && q(t) && "length"in t && (!e && !t.length || t.length - 1 in t && q(t[0])) && !t.nodeType && t !== o
            }, he = function(t, e, r) {
                return !U(t) || r || !s && Ie() ? Z(t) ? function(t, e, r) {
                    return void 0 === r && (r = []),
                    t.forEach((function(t) {
                        var n;
                        return U(t) && !e || ce(t, 1) ? (n = r).push.apply(n, he(t)) : r.push(t)
                    }
                    )) || r
                }(t, r) : ce(t) ? le.call(t, 0) : t ? [t] : [] : le.call((e || l).querySelectorAll(t), 0)
            }, ue = function(t) {
                return t.sort((function() {
                    return .5 - Math.random()
                }
                ))
            }, pe = function(t) {
                if (V(t))
                    return t;
                var e = q(t) ? t : {
                    each: t
                }
                  , r = Ge(e.ease)
                  , n = e.from || 0
                  , i = parseFloat(e.base) || 0
                  , a = {}
                  , o = n > 0 && n < 1
                  , s = isNaN(n) || o
                  , l = e.axis
                  , c = n
                  , h = n;
                return U(n) ? c = h = {
                    center: .5,
                    edges: .5,
                    end: 1
                }[n] || 0 : !o && s && (c = n[0],
                h = n[1]),
                function(t, o, u) {
                    var p, d, f, m, v, g, y, _, x, b = (u || e).length, w = a[b];
                    if (!w) {
                        if (!(x = "auto" === e.grid ? 0 : (e.grid || [1, k])[1])) {
                            for (y = -k; y < (y = u[x++].getBoundingClientRect().left) && x < b; )
                                ;
                            x--
                        }
                        for (w = a[b] = [],
                        p = s ? Math.min(x, b) * c - .5 : n % x,
                        d = x === k ? 0 : s ? b * h / x - .5 : n / x | 0,
                        y = 0,
                        _ = k,
                        g = 0; g < b; g++)
                            f = g % x - p,
                            m = d - (g / x | 0),
                            w[g] = v = l ? Math.abs("y" === l ? m : f) : z(f * f + m * m),
                            v > y && (y = v),
                            v < _ && (_ = v);
                        "random" === n && ue(w),
                        w.max = y - _,
                        w.min = _,
                        w.v = b = (parseFloat(e.amount) || parseFloat(e.each) * (x > b ? b - 1 : l ? "y" === l ? b / x : x : Math.max(x, b / x)) || 0) * ("edges" === n ? -1 : 1),
                        w.b = b < 0 ? i - b : i,
                        w.u = se(e.amount || e.each) || 0,
                        r = r && b < 0 ? Be(r) : r
                    }
                    return b = (w[t] - w.min) / w.max || 0,
                    Mt(w.b + (r ? r(b) : b) * w.v) + w.u
                }
            }, de = function(t) {
                var e = Math.pow(10, ((t + "").split(".")[1] || "").length);
                return function(r) {
                    var n = Math.round(parseFloat(r) / t) * t * e;
                    return (n - n % 1) / e + (j(r) ? 0 : se(r))
                }
            }, fe = function(t, e) {
                var r, n, i = Z(t);
                return !i && q(t) && (r = i = t.radius || k,
                t.values ? (t = he(t.values),
                (n = !j(t[0])) && (r *= r)) : t = de(t.increment)),
                ae(e, i ? V(t) ? function(e) {
                    return n = t(e),
                    Math.abs(n - e) <= r ? n : e
                }
                : function(e) {
                    for (var i, a, o = parseFloat(n ? e.x : e), s = parseFloat(n ? e.y : 0), l = k, c = 0, h = t.length; h--; )
                        (i = n ? (i = t[h].x - o) * i + (a = t[h].y - s) * a : Math.abs(t[h] - o)) < l && (l = i,
                        c = h);
                    return c = !r || l <= r ? t[c] : e,
                    n || c === e || j(e) ? c : c + se(e)
                }
                : de(t))
            }, me = function(t, e, r, n) {
                return ae(Z(t) ? !e : !0 === r ? !!(r = 0) : !n, (function() {
                    return Z(t) ? t[~~(Math.random() * t.length)] : (r = r || 1e-5) && (n = r < 1 ? Math.pow(10, (r + "").length - 2) : 1) && Math.floor(Math.round((t - r / 2 + Math.random() * (e - t + .99 * r)) / r) * r * n) / n
                }
                ))
            }, ve = function(t, e, r) {
                return ae(r, (function(r) {
                    return t[~~e(r)]
                }
                ))
            }, ge = function(t) {
                for (var e, r, n, i, a = 0, o = ""; ~(e = t.indexOf("random(", a)); )
                    n = t.indexOf(")", e),
                    i = "[" === t.charAt(e + 7),
                    r = t.substr(e + 7, n - e - 7).match(i ? nt : J),
                    o += t.substr(a, e - a) + me(i ? r : +r[0], i ? 0 : +r[1], +r[2] || 1e-5),
                    a = n + 1;
                return o + t.substr(a, t.length - a)
            }, ye = function(t, e, r, n, i) {
                var a = e - t
                  , o = n - r;
                return ae(i, (function(e) {
                    return r + ((e - t) / a * o || 0)
                }
                ))
            }, _e = function(t, e, r) {
                var n, i, a, o = t.labels, s = k;
                for (n in o)
                    (i = o[n] - e) < 0 == !!r && i && s > (i = Math.abs(i)) && (a = n,
                    s = i);
                return a
            }, xe = function(t, e, r) {
                var n, i, a = t.vars, o = a[e];
                if (o)
                    return n = a[e + "Params"],
                    i = a.callbackScope || t,
                    r && dt.length && Pt(),
                    n ? o.apply(i, n) : o.call(i)
            }, be = function(t) {
                return zt(t),
                t.scrollTrigger && t.scrollTrigger.kill(!1),
                t.progress() < 1 && xe(t, "onInterrupt"),
                t
            }, we = function(t) {
                var e = (t = !t.name && t.default || t).name
                  , r = V(t)
                  , n = e && !r && t.init ? function() {
                    this._props = []
                }
                : t
                  , i = {
                    init: ut,
                    render: dr,
                    add: Ze,
                    kill: mr,
                    modifier: fr,
                    rawVars: 0
                }
                  , a = {
                    targetTest: 0,
                    get: 0,
                    getSetter: cr,
                    aliases: {},
                    register: 0
                };
                if (Ie(),
                t !== n) {
                    if (mt[e])
                        return;
                    Rt(n, Rt(Ot(t, i), a)),
                    It(n.prototype, It(i, Ot(t, a))),
                    mt[n.prop = e] = n,
                    t.targetTest && (yt.push(n),
                    pt[e] = 1),
                    e = ("css" === e ? "CSS" : e.charAt(0).toUpperCase() + e.substr(1)) + "Plugin"
                }
                ht(e, n),
                t.register && t.register(wr, n, yr)
            }, Se = 255, Te = {
                aqua: [0, Se, Se],
                lime: [0, Se, 0],
                silver: [192, 192, 192],
                black: [0, 0, 0],
                maroon: [128, 0, 0],
                teal: [0, 128, 128],
                blue: [0, 0, Se],
                navy: [0, 0, 128],
                white: [Se, Se, Se],
                olive: [128, 128, 0],
                yellow: [Se, Se, 0],
                orange: [Se, 165, 0],
                gray: [128, 128, 128],
                purple: [128, 0, 128],
                green: [0, 128, 0],
                red: [Se, 0, 0],
                pink: [Se, 192, 203],
                cyan: [0, Se, Se],
                transparent: [Se, Se, Se, 0]
            }, Me = function(t, e, r) {
                return (6 * (t += t < 0 ? 1 : t > 1 ? -1 : 0) < 1 ? e + (r - e) * t * 6 : t < .5 ? r : 3 * t < 2 ? e + (r - e) * (2 / 3 - t) * 6 : e) * Se + .5 | 0
            }, Ee = function(t, e, r) {
                var n, i, a, o, s, l, c, h, u, p, d = t ? j(t) ? [t >> 16, t >> 8 & Se, t & Se] : 0 : Te.black;
                if (!d) {
                    if ("," === t.substr(-1) && (t = t.substr(0, t.length - 1)),
                    Te[t])
                        d = Te[t];
                    else if ("#" === t.charAt(0)) {
                        if (t.length < 6 && (n = t.charAt(1),
                        i = t.charAt(2),
                        a = t.charAt(3),
                        t = "#" + n + n + i + i + a + a + (5 === t.length ? t.charAt(4) + t.charAt(4) : "")),
                        9 === t.length)
                            return [(d = parseInt(t.substr(1, 6), 16)) >> 16, d >> 8 & Se, d & Se, parseInt(t.substr(7), 16) / 255];
                        d = [(t = parseInt(t.substr(1), 16)) >> 16, t >> 8 & Se, t & Se]
                    } else if ("hsl" === t.substr(0, 3))
                        if (d = p = t.match(J),
                        e) {
                            if (~t.indexOf("="))
                                return d = t.match(Q),
                                r && d.length < 4 && (d[3] = 1),
                                d
                        } else
                            o = +d[0] % 360 / 360,
                            s = +d[1] / 100,
                            n = 2 * (l = +d[2] / 100) - (i = l <= .5 ? l * (s + 1) : l + s - l * s),
                            d.length > 3 && (d[3] *= 1),
                            d[0] = Me(o + 1 / 3, n, i),
                            d[1] = Me(o, n, i),
                            d[2] = Me(o - 1 / 3, n, i);
                    else
                        d = t.match(J) || Te.transparent;
                    d = d.map(Number)
                }
                return e && !p && (n = d[0] / Se,
                i = d[1] / Se,
                a = d[2] / Se,
                l = ((c = Math.max(n, i, a)) + (h = Math.min(n, i, a))) / 2,
                c === h ? o = s = 0 : (u = c - h,
                s = l > .5 ? u / (2 - c - h) : u / (c + h),
                o = c === n ? (i - a) / u + (i < a ? 6 : 0) : c === i ? (a - n) / u + 2 : (n - i) / u + 4,
                o *= 60),
                d[0] = ~~(o + .5),
                d[1] = ~~(100 * s + .5),
                d[2] = ~~(100 * l + .5)),
                r && d.length < 4 && (d[3] = 1),
                d
            }, Ae = function(t) {
                var e = []
                  , r = []
                  , n = -1;
                return t.split(Ce).forEach((function(t) {
                    var i = t.match(tt) || [];
                    e.push.apply(e, i),
                    r.push(n += i.length + 1)
                }
                )),
                e.c = r,
                e
            }, Pe = function(t, e, r) {
                var n, i, a, o, s = "", l = (t + s).match(Ce), c = e ? "hsla(" : "rgba(", h = 0;
                if (!l)
                    return t;
                if (l = l.map((function(t) {
                    return (t = Ee(t, e, 1)) && c + (e ? t[0] + "," + t[1] + "%," + t[2] + "%," + t[3] : t.join(",")) + ")"
                }
                )),
                r && (a = Ae(t),
                (n = r.c).join(s) !== a.c.join(s)))
                    for (o = (i = t.replace(Ce, "1").split(tt)).length - 1; h < o; h++)
                        s += i[h] + (~n.indexOf(h) ? l.shift() || c + "0,0,0,0)" : (a.length ? a : l.length ? l : r).shift());
                if (!i)
                    for (o = (i = t.split(Ce)).length - 1; h < o; h++)
                        s += i[h] + l[h];
                return s + i[o]
            }, Ce = function() {
                var t, e = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";
                for (t in Te)
                    e += "|" + t + "\\b";
                return new RegExp(e + ")","gi")
            }(), Le = /hsl[a]?\(/, De = function(t) {
                var e, r = t.join(" ");
                if (Ce.lastIndex = 0,
                Ce.test(r))
                    return e = Le.test(r),
                    t[1] = Pe(t[1], e),
                    t[0] = Pe(t[0], e, Ae(t[1])),
                    !0
            }, Re = (_ = Date.now,
            x = 500,
            b = 33,
            w = _(),
            S = w,
            M = T = 1e3 / 240,
            A = function t(e) {
                var r, n, i, a, o = _() - S, s = !0 === e;
                if (o > x && (w += o - b),
                ((r = (i = (S += o) - w) - M) > 0 || s) && (a = ++v.frame,
                g = i - 1e3 * v.time,
                v.time = i /= 1e3,
                M += r + (r >= T ? 4 : T - r),
                n = 1),
                s || (d = f(t)),
                n)
                    for (y = 0; y < E.length; y++)
                        E[y](i, g, a, e)
            }
            ,
            v = {
                time: 0,
                frame: 0,
                tick: function() {
                    A(!0)
                },
                deltaRatio: function(t) {
                    return g / (1e3 / (t || 60))
                },
                wake: function() {
                    c && (!s && Y() && (o = s = window,
                    l = o.document || {},
                    at.gsap = wr,
                    (o.gsapVersions || (o.gsapVersions = [])).push(wr.version),
                    st(ot || o.GreenSockGlobals || !o.gsap && o || {}),
                    m = o.requestAnimationFrame),
                    d && v.sleep(),
                    f = m || function(t) {
                        return setTimeout(t, M - 1e3 * v.time + 1 | 0)
                    }
                    ,
                    p = 1,
                    A(2))
                },
                sleep: function() {
                    (m ? o.cancelAnimationFrame : clearTimeout)(d),
                    p = 0,
                    f = ut
                },
                lagSmoothing: function(t, e) {
                    x = t || 1e8,
                    b = Math.min(e, x, 0)
                },
                fps: function(t) {
                    T = 1e3 / (t || 240),
                    M = 1e3 * v.time + T
                },
                add: function(t, e, r) {
                    var n = e ? function(e, r, i, a) {
                        t(e, r, i, a),
                        v.remove(n)
                    }
                    : t;
                    return v.remove(t),
                    E[r ? "unshift" : "push"](n),
                    Ie(),
                    n
                },
                remove: function(t, e) {
                    ~(e = E.indexOf(t)) && E.splice(e, 1) && y >= e && y--
                },
                _listeners: E = []
            }), Ie = function() {
                return !p && Re.wake()
            }, ke = {}, Oe = /^[\d.\-M][\d.\-,\s]/, Fe = /["']/g, Ne = function(t) {
                for (var e, r, n, i = {}, a = t.substr(1, t.length - 3).split(":"), o = a[0], s = 1, l = a.length; s < l; s++)
                    r = a[s],
                    e = s !== l - 1 ? r.lastIndexOf(",") : r.length,
                    n = r.substr(0, e),
                    i[o] = isNaN(n) ? n.replace(Fe, "").trim() : +n,
                    o = r.substr(e + 1).trim();
                return i
            }, Be = function(t) {
                return function(e) {
                    return 1 - t(1 - e)
                }
            }, ze = function t(e, r) {
                for (var n, i = e._first; i; )
                    i instanceof Xe ? t(i, r) : !i.vars.yoyoEase || i._yoyo && i._repeat || i._yoyo === r || (i.timeline ? t(i.timeline, r) : (n = i._ease,
                    i._ease = i._yEase,
                    i._yEase = n,
                    i._yoyo = r)),
                    i = i._next
            }, Ge = function(t, e) {
                return t && (V(t) ? t : ke[t] || function(t) {
                    var e, r, n, i, a = (t + "").split("("), o = ke[a[0]];
                    return o && a.length > 1 && o.config ? o.config.apply(null, ~t.indexOf("{") ? [Ne(a[1])] : (e = t,
                    r = e.indexOf("(") + 1,
                    n = e.indexOf(")"),
                    i = e.indexOf("(", r),
                    e.substring(r, ~i && i < n ? e.indexOf(")", n + 1) : n)).split(",").map(Lt)) : ke._CE && Oe.test(t) ? ke._CE("", t) : o
                }(t)) || e
            }, He = function(t, e, r, n) {
                void 0 === r && (r = function(t) {
                    return 1 - e(1 - t)
                }
                ),
                void 0 === n && (n = function(t) {
                    return t < .5 ? e(2 * t) / 2 : 1 - e(2 * (1 - t)) / 2
                }
                );
                var i, a = {
                    easeIn: e,
                    easeOut: r,
                    easeInOut: n
                };
                return St(t, (function(t) {
                    for (var e in ke[t] = at[t] = a,
                    ke[i = t.toLowerCase()] = r,
                    a)
                        ke[i + ("easeIn" === e ? ".in" : "easeOut" === e ? ".out" : ".inOut")] = ke[t + "." + e] = a[e]
                }
                )),
                a
            }, Ue = function(t) {
                return function(e) {
                    return e < .5 ? (1 - t(1 - 2 * e)) / 2 : .5 + t(2 * (e - .5)) / 2
                }
            }, Ve = function t(e, r, n) {
                var i = r >= 1 ? r : 1
                  , a = (n || (e ? .3 : .45)) / (r < 1 ? r : 1)
                  , o = a / F * (Math.asin(1 / i) || 0)
                  , s = function(t) {
                    return 1 === t ? 1 : i * Math.pow(2, -10 * t) * H((t - o) * a) + 1
                }
                  , l = "out" === e ? s : "in" === e ? function(t) {
                    return 1 - s(1 - t)
                }
                : Ue(s);
                return a = F / a,
                l.config = function(r, n) {
                    return t(e, r, n)
                }
                ,
                l
            }, je = function t(e, r) {
                void 0 === r && (r = 1.70158);
                var n = function(t) {
                    return t ? --t * t * ((r + 1) * t + r) + 1 : 0
                }
                  , i = "out" === e ? n : "in" === e ? function(t) {
                    return 1 - n(1 - t)
                }
                : Ue(n);
                return i.config = function(r) {
                    return t(e, r)
                }
                ,
                i
            };
            St("Linear,Quad,Cubic,Quart,Quint,Strong", (function(t, e) {
                var r = e < 5 ? e + 1 : e;
                He(t + ",Power" + (r - 1), e ? function(t) {
                    return Math.pow(t, r)
                }
                : function(t) {
                    return t
                }
                , (function(t) {
                    return 1 - Math.pow(1 - t, r)
                }
                ), (function(t) {
                    return t < .5 ? Math.pow(2 * t, r) / 2 : 1 - Math.pow(2 * (1 - t), r) / 2
                }
                ))
            }
            )),
            ke.Linear.easeNone = ke.none = ke.Linear.easeIn,
            He("Elastic", Ve("in"), Ve("out"), Ve()),
            P = 7.5625,
            L = 1 / (C = 2.75),
            He("Bounce", (function(t) {
                return 1 - D(1 - t)
            }
            ), D = function(t) {
                return t < L ? P * t * t : t < .7272727272727273 ? P * Math.pow(t - 1.5 / C, 2) + .75 : t < .9090909090909092 ? P * (t -= 2.25 / C) * t + .9375 : P * Math.pow(t - 2.625 / C, 2) + .984375
            }
            ),
            He("Expo", (function(t) {
                return t ? Math.pow(2, 10 * (t - 1)) : 0
            }
            )),
            He("Circ", (function(t) {
                return -(z(1 - t * t) - 1)
            }
            )),
            He("Sine", (function(t) {
                return 1 === t ? 1 : 1 - G(t * N)
            }
            )),
            He("Back", je("in"), je("out"), je()),
            ke.SteppedEase = ke.steps = at.SteppedEase = {
                config: function(t, e) {
                    void 0 === t && (t = 1);
                    var r = 1 / t
                      , n = t + (e ? 0 : 1)
                      , i = e ? 1 : 0;
                    return function(t) {
                        return ((n * oe(0, .99999999, t) | 0) + i) * r
                    }
                }
            },
            I.ease = ke["quad.out"],
            St("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt", (function(t) {
                return _t += t + "," + t + "Params,"
            }
            ));
            var We = function(t, e) {
                this.id = B++,
                t._gsap = this,
                this.target = t,
                this.harness = e,
                this.get = e ? e.get : wt,
                this.set = e ? e.getSetter : cr
            }
              , qe = function() {
                function t(t) {
                    this.vars = t,
                    this._delay = +t.delay || 0,
                    (this._repeat = t.repeat === 1 / 0 ? -2 : t.repeat || 0) && (this._rDelay = t.repeatDelay || 0,
                    this._yoyo = !!t.yoyo || !!t.yoyoEase),
                    this._ts = 1,
                    te(this, +t.duration, 1, 1),
                    this.data = t.data,
                    p || Re.wake()
                }
                var e = t.prototype;
                return e.delay = function(t) {
                    return t || 0 === t ? (this.parent && this.parent.smoothChildTiming && this.startTime(this._start + t - this._delay),
                    this._delay = t,
                    this) : this._delay
                }
                ,
                e.duration = function(t) {
                    return arguments.length ? this.totalDuration(this._repeat > 0 ? t + (t + this._rDelay) * this._repeat : t) : this.totalDuration() && this._dur
                }
                ,
                e.totalDuration = function(t) {
                    return arguments.length ? (this._dirty = 0,
                    te(this, this._repeat < 0 ? t : (t - this._repeat * this._rDelay) / (this._repeat + 1))) : this._tDur
                }
                ,
                e.totalTime = function(t, e) {
                    if (Ie(),
                    !arguments.length)
                        return this._tTime;
                    var r = this._dp;
                    if (r && r.smoothChildTiming && this._ts) {
                        for (Xt(this, t),
                        !r._dp || r.parent || Yt(r, this); r && r.parent; )
                            r.parent._time !== r._start + (r._ts >= 0 ? r._tTime / r._ts : (r.totalDuration() - r._tTime) / -r._ts) && r.totalTime(r._tTime, !0),
                            r = r.parent;
                        !this.parent && this._dp.autoRemoveChildren && (this._ts > 0 && t < this._tDur || this._ts < 0 && t > 0 || !this._tDur && !t) && $t(this._dp, this, this._start - this._delay)
                    }
                    return (this._tTime !== t || !this._dur && !e || this._initted && Math.abs(this._zTime) === O || !t && !this._initted && (this.add || this._ptLookup)) && (this._ts || (this._pTime = t),
                    Ct(this, t, e)),
                    this
                }
                ,
                e.time = function(t, e) {
                    return arguments.length ? this.totalTime(Math.min(this.totalDuration(), t + Vt(this)) % (this._dur + this._rDelay) || (t ? this._dur : 0), e) : this._time
                }
                ,
                e.totalProgress = function(t, e) {
                    return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this.totalDuration() ? Math.min(1, this._tTime / this._tDur) : this.ratio
                }
                ,
                e.progress = function(t, e) {
                    return arguments.length ? this.totalTime(this.duration() * (!this._yoyo || 1 & this.iteration() ? t : 1 - t) + Vt(this), e) : this.duration() ? Math.min(1, this._time / this._dur) : this.ratio
                }
                ,
                e.iteration = function(t, e) {
                    var r = this.duration() + this._rDelay;
                    return arguments.length ? this.totalTime(this._time + (t - 1) * r, e) : this._repeat ? jt(this._tTime, r) + 1 : 1
                }
                ,
                e.timeScale = function(t) {
                    if (!arguments.length)
                        return -1e-8 === this._rts ? 0 : this._rts;
                    if (this._rts === t)
                        return this;
                    var e = this.parent && this._ts ? Wt(this.parent._time, this) : this._tTime;
                    return this._rts = +t || 0,
                    this._ts = this._ps || -1e-8 === t ? 0 : this._rts,
                    this.totalTime(oe(-this._delay, this._tDur, e), !0),
                    qt(this),
                    Ht(this)
                }
                ,
                e.paused = function(t) {
                    return arguments.length ? (this._ps !== t && (this._ps = t,
                    t ? (this._pTime = this._tTime || Math.max(-this._delay, this.rawTime()),
                    this._ts = this._act = 0) : (Ie(),
                    this._ts = this._rts,
                    this.totalTime(this.parent && !this.parent.smoothChildTiming ? this.rawTime() : this._tTime || this._pTime, 1 === this.progress() && Math.abs(this._zTime) !== O && (this._tTime -= O)))),
                    this) : this._ps
                }
                ,
                e.startTime = function(t) {
                    if (arguments.length) {
                        this._start = t;
                        var e = this.parent || this._dp;
                        return e && (e._sort || !this.parent) && $t(e, this, t - this._delay),
                        this
                    }
                    return this._start
                }
                ,
                e.endTime = function(t) {
                    return this._start + (X(t) ? this.totalDuration() : this.duration()) / Math.abs(this._ts || 1)
                }
                ,
                e.rawTime = function(t) {
                    var e = this.parent || this._dp;
                    return e ? t && (!this._ts || this._repeat && this._time && this.totalProgress() < 1) ? this._tTime % (this._dur + this._rDelay) : this._ts ? Wt(e.rawTime(t), this) : this._tTime : this._tTime
                }
                ,
                e.globalTime = function(t) {
                    for (var e = this, r = arguments.length ? t : e.rawTime(); e; )
                        r = e._start + r / (e._ts || 1),
                        e = e._dp;
                    return r
                }
                ,
                e.repeat = function(t) {
                    return arguments.length ? (this._repeat = t === 1 / 0 ? -2 : t,
                    ee(this)) : -2 === this._repeat ? 1 / 0 : this._repeat
                }
                ,
                e.repeatDelay = function(t) {
                    if (arguments.length) {
                        var e = this._time;
                        return this._rDelay = t,
                        ee(this),
                        e ? this.time(e) : this
                    }
                    return this._rDelay
                }
                ,
                e.yoyo = function(t) {
                    return arguments.length ? (this._yoyo = t,
                    this) : this._yoyo
                }
                ,
                e.seek = function(t, e) {
                    return this.totalTime(ne(this, t), X(e))
                }
                ,
                e.restart = function(t, e) {
                    return this.play().totalTime(t ? -this._delay : 0, X(e))
                }
                ,
                e.play = function(t, e) {
                    return null != t && this.seek(t, e),
                    this.reversed(!1).paused(!1)
                }
                ,
                e.reverse = function(t, e) {
                    return null != t && this.seek(t || this.totalDuration(), e),
                    this.reversed(!0).paused(!1)
                }
                ,
                e.pause = function(t, e) {
                    return null != t && this.seek(t, e),
                    this.paused(!0)
                }
                ,
                e.resume = function() {
                    return this.paused(!1)
                }
                ,
                e.reversed = function(t) {
                    return arguments.length ? (!!t !== this.reversed() && this.timeScale(-this._rts || (t ? -1e-8 : 0)),
                    this) : this._rts < 0
                }
                ,
                e.invalidate = function() {
                    return this._initted = this._act = 0,
                    this._zTime = -1e-8,
                    this
                }
                ,
                e.isActive = function() {
                    var t, e = this.parent || this._dp, r = this._start;
                    return !(e && !(this._ts && this._initted && e.isActive() && (t = e.rawTime(!0)) >= r && t < this.endTime(!0) - O))
                }
                ,
                e.eventCallback = function(t, e, r) {
                    var n = this.vars;
                    return arguments.length > 1 ? (e ? (n[t] = e,
                    r && (n[t + "Params"] = r),
                    "onUpdate" === t && (this._onUpdate = e)) : delete n[t],
                    this) : n[t]
                }
                ,
                e.then = function(t) {
                    var e = this;
                    return new Promise((function(r) {
                        var n = V(t) ? t : Dt
                          , i = function() {
                            var t = e.then;
                            e.then = null,
                            V(n) && (n = n(e)) && (n.then || n === e) && (e.then = t),
                            r(n),
                            e.then = t
                        };
                        e._initted && 1 === e.totalProgress() && e._ts >= 0 || !e._tTime && e._ts < 0 ? i() : e._prom = i
                    }
                    ))
                }
                ,
                e.kill = function() {
                    be(this)
                }
                ,
                t
            }();
            Rt(qe.prototype, {
                _time: 0,
                _start: 0,
                _end: 0,
                _tTime: 0,
                _tDur: 0,
                _dirty: 0,
                _repeat: 0,
                _yoyo: !1,
                parent: null,
                _initted: !1,
                _rDelay: 0,
                _ts: 1,
                _dp: 0,
                ratio: 0,
                _zTime: -1e-8,
                _prom: 0,
                _ps: !1,
                _rts: 1
            });
            var Xe = function(t) {
                function n(e, n) {
                    var i;
                    return void 0 === e && (e = {}),
                    (i = t.call(this, e) || this).labels = {},
                    i.smoothChildTiming = !!e.smoothChildTiming,
                    i.autoRemoveChildren = !!e.autoRemoveChildren,
                    i._sort = X(e.sortChildren),
                    a && $t(e.parent || a, r(i), n),
                    e.reversed && i.reverse(),
                    e.paused && i.paused(!0),
                    e.scrollTrigger && Kt(r(i), e.scrollTrigger),
                    i
                }
                e(n, t);
                var i = n.prototype;
                return i.to = function(t, e, r) {
                    return ie(0, arguments, this),
                    this
                }
                ,
                i.from = function(t, e, r) {
                    return ie(1, arguments, this),
                    this
                }
                ,
                i.fromTo = function(t, e, r, n) {
                    return ie(2, arguments, this),
                    this
                }
                ,
                i.set = function(t, e, r) {
                    return e.duration = 0,
                    e.parent = this,
                    Ft(e).repeatDelay || (e.repeat = 0),
                    e.immediateRender = !!e.immediateRender,
                    new ir(t,e,ne(this, r),1),
                    this
                }
                ,
                i.call = function(t, e, r) {
                    return $t(this, ir.delayedCall(0, t, e), r)
                }
                ,
                i.staggerTo = function(t, e, r, n, i, a, o) {
                    return r.duration = e,
                    r.stagger = r.stagger || n,
                    r.onComplete = a,
                    r.onCompleteParams = o,
                    r.parent = this,
                    new ir(t,r,ne(this, i)),
                    this
                }
                ,
                i.staggerFrom = function(t, e, r, n, i, a, o) {
                    return r.runBackwards = 1,
                    Ft(r).immediateRender = X(r.immediateRender),
                    this.staggerTo(t, e, r, n, i, a, o)
                }
                ,
                i.staggerFromTo = function(t, e, r, n, i, a, o, s) {
                    return n.startAt = r,
                    Ft(n).immediateRender = X(n.immediateRender),
                    this.staggerTo(t, e, n, i, a, o, s)
                }
                ,
                i.render = function(t, e, r) {
                    var n, i, o, s, l, c, h, u, p, d, f, m, v = this._time, g = this._dirty ? this.totalDuration() : this._tDur, y = this._dur, _ = t <= 0 ? 0 : Mt(t), x = this._zTime < 0 != t < 0 && (this._initted || !y);
                    if (this !== a && _ > g && t >= 0 && (_ = g),
                    _ !== this._tTime || r || x) {
                        if (v !== this._time && y && (_ += this._time - v,
                        t += this._time - v),
                        n = _,
                        p = this._start,
                        c = !(u = this._ts),
                        x && (y || (v = this._zTime),
                        (t || !e) && (this._zTime = t)),
                        this._repeat) {
                            if (f = this._yoyo,
                            l = y + this._rDelay,
                            this._repeat < -1 && t < 0)
                                return this.totalTime(100 * l + t, e, r);
                            if (n = Mt(_ % l),
                            _ === g ? (s = this._repeat,
                            n = y) : ((s = ~~(_ / l)) && s === _ / l && (n = y,
                            s--),
                            n > y && (n = y)),
                            d = jt(this._tTime, l),
                            !v && this._tTime && d !== s && (d = s),
                            f && 1 & s && (n = y - n,
                            m = 1),
                            s !== d && !this._lock) {
                                var b = f && 1 & d
                                  , w = b === (f && 1 & s);
                                if (s < d && (b = !b),
                                v = b ? 0 : y,
                                this._lock = 1,
                                this.render(v || (m ? 0 : Mt(s * l)), e, !y)._lock = 0,
                                this._tTime = _,
                                !e && this.parent && xe(this, "onRepeat"),
                                this.vars.repeatRefresh && !m && (this.invalidate()._lock = 1),
                                v && v !== this._time || c !== !this._ts || this.vars.onRepeat && !this.parent && !this._act)
                                    return this;
                                if (y = this._dur,
                                g = this._tDur,
                                w && (this._lock = 2,
                                v = b ? y : -1e-4,
                                this.render(v, !0),
                                this.vars.repeatRefresh && !m && this.invalidate()),
                                this._lock = 0,
                                !this._ts && !c)
                                    return this;
                                ze(this, m)
                            }
                        }
                        if (this._hasPause && !this._forcing && this._lock < 2 && (h = function(t, e, r) {
                            var n;
                            if (r > e)
                                for (n = t._first; n && n._start <= r; ) {
                                    if ("isPause" === n.data && n._start > e)
                                        return n;
                                    n = n._next
                                }
                            else
                                for (n = t._last; n && n._start >= r; ) {
                                    if ("isPause" === n.data && n._start < e)
                                        return n;
                                    n = n._prev
                                }
                        }(this, Mt(v), Mt(n)),
                        h && (_ -= n - (n = h._start))),
                        this._tTime = _,
                        this._time = n,
                        this._act = !u,
                        this._initted || (this._onUpdate = this.vars.onUpdate,
                        this._initted = 1,
                        this._zTime = t,
                        v = 0),
                        !v && n && !e && (xe(this, "onStart"),
                        this._tTime !== _))
                            return this;
                        if (n >= v && t >= 0)
                            for (i = this._first; i; ) {
                                if (o = i._next,
                                (i._act || n >= i._start) && i._ts && h !== i) {
                                    if (i.parent !== this)
                                        return this.render(t, e, r);
                                    if (i.render(i._ts > 0 ? (n - i._start) * i._ts : (i._dirty ? i.totalDuration() : i._tDur) + (n - i._start) * i._ts, e, r),
                                    n !== this._time || !this._ts && !c) {
                                        h = 0,
                                        o && (_ += this._zTime = -1e-8);
                                        break
                                    }
                                }
                                i = o
                            }
                        else {
                            i = this._last;
                            for (var S = t < 0 ? t : n; i; ) {
                                if (o = i._prev,
                                (i._act || S <= i._end) && i._ts && h !== i) {
                                    if (i.parent !== this)
                                        return this.render(t, e, r);
                                    if (i.render(i._ts > 0 ? (S - i._start) * i._ts : (i._dirty ? i.totalDuration() : i._tDur) + (S - i._start) * i._ts, e, r),
                                    n !== this._time || !this._ts && !c) {
                                        h = 0,
                                        o && (_ += this._zTime = S ? -1e-8 : O);
                                        break
                                    }
                                }
                                i = o
                            }
                        }
                        if (h && !e && (this.pause(),
                        h.render(n >= v ? 0 : -1e-8)._zTime = n >= v ? 1 : -1,
                        this._ts))
                            return this._start = p,
                            qt(this),
                            this.render(t, e, r);
                        this._onUpdate && !e && xe(this, "onUpdate", !0),
                        (_ === g && this._tTime >= this.totalDuration() || !_ && v) && (p !== this._start && Math.abs(u) === Math.abs(this._ts) || this._lock || ((t || !y) && (_ === g && this._ts > 0 || !_ && this._ts < 0) && zt(this, 1),
                        e || t < 0 && !v || !_ && !v && g || (xe(this, _ === g && t >= 0 ? "onComplete" : "onReverseComplete", !0),
                        this._prom && !(_ < g && this.timeScale() > 0) && this._prom())))
                    }
                    return this
                }
                ,
                i.add = function(t, e) {
                    var r = this;
                    if (j(e) || (e = ne(this, e, t)),
                    !(t instanceof qe)) {
                        if (Z(t))
                            return t.forEach((function(t) {
                                return r.add(t, e)
                            }
                            )),
                            this;
                        if (U(t))
                            return this.addLabel(t, e);
                        if (!V(t))
                            return this;
                        t = ir.delayedCall(0, t)
                    }
                    return this !== t ? $t(this, t, e) : this
                }
                ,
                i.getChildren = function(t, e, r, n) {
                    void 0 === t && (t = !0),
                    void 0 === e && (e = !0),
                    void 0 === r && (r = !0),
                    void 0 === n && (n = -k);
                    for (var i = [], a = this._first; a; )
                        a._start >= n && (a instanceof ir ? e && i.push(a) : (r && i.push(a),
                        t && i.push.apply(i, a.getChildren(!0, e, r)))),
                        a = a._next;
                    return i
                }
                ,
                i.getById = function(t) {
                    for (var e = this.getChildren(1, 1, 1), r = e.length; r--; )
                        if (e[r].vars.id === t)
                            return e[r]
                }
                ,
                i.remove = function(t) {
                    return U(t) ? this.removeLabel(t) : V(t) ? this.killTweensOf(t) : (Bt(this, t),
                    t === this._recent && (this._recent = this._last),
                    Gt(this))
                }
                ,
                i.totalTime = function(e, r) {
                    return arguments.length ? (this._forcing = 1,
                    !this._dp && this._ts && (this._start = Mt(Re.time - (this._ts > 0 ? e / this._ts : (this.totalDuration() - e) / -this._ts))),
                    t.prototype.totalTime.call(this, e, r),
                    this._forcing = 0,
                    this) : this._tTime
                }
                ,
                i.addLabel = function(t, e) {
                    return this.labels[t] = ne(this, e),
                    this
                }
                ,
                i.removeLabel = function(t) {
                    return delete this.labels[t],
                    this
                }
                ,
                i.addPause = function(t, e, r) {
                    var n = ir.delayedCall(0, e || ut, r);
                    return n.data = "isPause",
                    this._hasPause = 1,
                    $t(this, n, ne(this, t))
                }
                ,
                i.removePause = function(t) {
                    var e = this._first;
                    for (t = ne(this, t); e; )
                        e._start === t && "isPause" === e.data && zt(e),
                        e = e._next
                }
                ,
                i.killTweensOf = function(t, e, r) {
                    for (var n = this.getTweensOf(t, r), i = n.length; i--; )
                        Ye !== n[i] && n[i].kill(t, e);
                    return this
                }
                ,
                i.getTweensOf = function(t, e) {
                    for (var r, n = [], i = he(t), a = this._first, o = j(e); a; )
                        a instanceof ir ? At(a._targets, i) && (o ? (!Ye || a._initted && a._ts) && a.globalTime(0) <= e && a.globalTime(a.totalDuration()) > e : !e || a.isActive()) && n.push(a) : (r = a.getTweensOf(i, e)).length && n.push.apply(n, r),
                        a = a._next;
                    return n
                }
                ,
                i.tweenTo = function(t, e) {
                    e = e || {};
                    var r, n = this, i = ne(n, t), a = e, o = a.startAt, s = a.onStart, l = a.onStartParams, c = a.immediateRender, h = ir.to(n, Rt({
                        ease: e.ease || "none",
                        lazy: !1,
                        immediateRender: !1,
                        time: i,
                        overwrite: "auto",
                        duration: e.duration || Math.abs((i - (o && "time"in o ? o.time : n._time)) / n.timeScale()) || O,
                        onStart: function() {
                            if (n.pause(),
                            !r) {
                                var t = e.duration || Math.abs((i - (o && "time"in o ? o.time : n._time)) / n.timeScale());
                                h._dur !== t && te(h, t, 0, 1).render(h._time, !0, !0),
                                r = 1
                            }
                            s && s.apply(h, l || [])
                        }
                    }, e));
                    return c ? h.render(0) : h
                }
                ,
                i.tweenFromTo = function(t, e, r) {
                    return this.tweenTo(e, Rt({
                        startAt: {
                            time: ne(this, t)
                        }
                    }, r))
                }
                ,
                i.recent = function() {
                    return this._recent
                }
                ,
                i.nextLabel = function(t) {
                    return void 0 === t && (t = this._time),
                    _e(this, ne(this, t))
                }
                ,
                i.previousLabel = function(t) {
                    return void 0 === t && (t = this._time),
                    _e(this, ne(this, t), 1)
                }
                ,
                i.currentLabel = function(t) {
                    return arguments.length ? this.seek(t, !0) : this.previousLabel(this._time + O)
                }
                ,
                i.shiftChildren = function(t, e, r) {
                    void 0 === r && (r = 0);
                    for (var n, i = this._first, a = this.labels; i; )
                        i._start >= r && (i._start += t,
                        i._end += t),
                        i = i._next;
                    if (e)
                        for (n in a)
                            a[n] >= r && (a[n] += t);
                    return Gt(this)
                }
                ,
                i.invalidate = function() {
                    var e = this._first;
                    for (this._lock = 0; e; )
                        e.invalidate(),
                        e = e._next;
                    return t.prototype.invalidate.call(this)
                }
                ,
                i.clear = function(t) {
                    void 0 === t && (t = !0);
                    for (var e, r = this._first; r; )
                        e = r._next,
                        this.remove(r),
                        r = e;
                    return this._dp && (this._time = this._tTime = this._pTime = 0),
                    t && (this.labels = {}),
                    Gt(this)
                }
                ,
                i.totalDuration = function(t) {
                    var e, r, n, i = 0, o = this, s = o._last, l = k;
                    if (arguments.length)
                        return o.timeScale((o._repeat < 0 ? o.duration() : o.totalDuration()) / (o.reversed() ? -t : t));
                    if (o._dirty) {
                        for (n = o.parent; s; )
                            e = s._prev,
                            s._dirty && s.totalDuration(),
                            (r = s._start) > l && o._sort && s._ts && !o._lock ? (o._lock = 1,
                            $t(o, s, r - s._delay, 1)._lock = 0) : l = r,
                            r < 0 && s._ts && (i -= r,
                            (!n && !o._dp || n && n.smoothChildTiming) && (o._start += r / o._ts,
                            o._time -= r,
                            o._tTime -= r),
                            o.shiftChildren(-r, !1, -Infinity),
                            l = 0),
                            s._end > i && s._ts && (i = s._end),
                            s = e;
                        te(o, o === a && o._time > i ? o._time : i, 1, 1),
                        o._dirty = 0
                    }
                    return o._tDur
                }
                ,
                n.updateRoot = function(t) {
                    if (a._ts && (Ct(a, Wt(t, a)),
                    h = Re.frame),
                    Re.frame >= gt) {
                        gt += R.autoSleep || 120;
                        var e = a._first;
                        if ((!e || !e._ts) && R.autoSleep && Re._listeners.length < 2) {
                            for (; e && !e._ts; )
                                e = e._next;
                            e || Re.sleep()
                        }
                    }
                }
                ,
                n
            }(qe);
            Rt(Xe.prototype, {
                _lock: 0,
                _hasPause: 0,
                _forcing: 0
            });
            var Ye, $e, Ke = function(t, e, r, n, i, a, o) {
                var s, l, c, h, u, p, d, f, m = new yr(this._pt,t,e,0,1,pr,null,i), v = 0, g = 0;
                for (m.b = r,
                m.e = n,
                r += "",
                (d = ~(n += "").indexOf("random(")) && (n = ge(n)),
                a && (a(f = [r, n], t, e),
                r = f[0],
                n = f[1]),
                l = r.match(et) || []; s = et.exec(n); )
                    h = s[0],
                    u = n.substring(v, s.index),
                    c ? c = (c + 1) % 5 : "rgba(" === u.substr(-5) && (c = 1),
                    h !== l[g++] && (p = parseFloat(l[g - 1]) || 0,
                    m._pt = {
                        _next: m._pt,
                        p: u || 1 === g ? u : ",",
                        s: p,
                        c: "=" === h.charAt(1) ? Et(p, h) - p : parseFloat(h) - p,
                        m: c && c < 4 ? Math.round : 0
                    },
                    v = et.lastIndex);
                return m.c = v < n.length ? n.substring(v, n.length) : "",
                m.fp = o,
                (rt.test(n) || d) && (m.e = 0),
                this._pt = m,
                m
            }, Ze = function(t, e, r, n, i, a, o, s, l) {
                V(n) && (n = n(i || 0, t, a));
                var c, h = t[e], u = "get" !== r ? r : V(h) ? l ? t[e.indexOf("set") || !V(t["get" + e.substr(3)]) ? e : "get" + e.substr(3)](l) : t[e]() : h, p = V(h) ? l ? sr : or : ar;
                if (U(n) && (~n.indexOf("random(") && (n = ge(n)),
                "=" === n.charAt(1) && ((c = Et(u, n) + (se(u) || 0)) || 0 === c) && (n = c)),
                u !== n || $e)
                    return isNaN(u * n) || "" === n ? (!h && !(e in t) && lt(e, n),
                    Ke.call(this, t, e, u, n, p, s || R.stringFilter, l)) : (c = new yr(this._pt,t,e,+u || 0,n - (u || 0),"boolean" == typeof h ? ur : hr,0,p),
                    l && (c.fp = l),
                    o && c.modifier(o, this, t),
                    this._pt = c)
            }, Je = function(t, e, r, n, i, a) {
                var o, s, l, c;
                if (mt[t] && !1 !== (o = new mt[t]).init(i, o.rawVars ? e[t] : function(t, e, r, n, i) {
                    if (V(t) && (t = er(t, i, e, r, n)),
                    !q(t) || t.style && t.nodeType || Z(t) || K(t))
                        return U(t) ? er(t, i, e, r, n) : t;
                    var a, o = {};
                    for (a in t)
                        o[a] = er(t[a], i, e, r, n);
                    return o
                }(e[t], n, i, a, r), r, n, a) && (r._pt = s = new yr(r._pt,i,t,0,1,o.render,o,0,o.priority),
                r !== u))
                    for (l = r._ptLookup[r._targets.indexOf(i)],
                    c = o._props.length; c--; )
                        l[o._props[c]] = s;
                return o
            }, Qe = function t(e, r) {
                var n, o, s, l, c, h, u, p, d, f, m, v, g, y = e.vars, _ = y.ease, x = y.startAt, b = y.immediateRender, w = y.lazy, S = y.onUpdate, T = y.onUpdateParams, M = y.callbackScope, E = y.runBackwards, A = y.yoyoEase, P = y.keyframes, C = y.autoRevert, L = e._dur, D = e._startAt, R = e._targets, F = e.parent, N = F && "nested" === F.data ? F.parent._targets : R, B = "auto" === e._overwrite && !i, z = e.timeline;
                if (z && (!P || !_) && (_ = "none"),
                e._ease = Ge(_, I.ease),
                e._yEase = A ? Be(Ge(!0 === A ? _ : A, I.ease)) : 0,
                A && e._yoyo && !e._repeat && (A = e._yEase,
                e._yEase = e._ease,
                e._ease = A),
                e._from = !z && !!y.runBackwards,
                !z || P && !y.stagger) {
                    if (v = (p = R[0] ? bt(R[0]).harness : 0) && y[p.prop],
                    n = Ot(y, pt),
                    D && (zt(D.render(-1, !0)),
                    D._lazy = 0),
                    x)
                        if (zt(e._startAt = ir.set(R, Rt({
                            data: "isStart",
                            overwrite: !1,
                            parent: F,
                            immediateRender: !0,
                            lazy: X(w),
                            startAt: null,
                            delay: 0,
                            onUpdate: S,
                            onUpdateParams: T,
                            callbackScope: M,
                            stagger: 0
                        }, x))),
                        r < 0 && !b && !C && e._startAt.render(-1, !0),
                        b) {
                            if (r > 0 && !C && (e._startAt = 0),
                            L && r <= 0)
                                return void (r && (e._zTime = r))
                        } else
                            !1 === C && (e._startAt = 0);
                    else if (E && L)
                        if (D)
                            !C && (e._startAt = 0);
                        else if (r && (b = !1),
                        s = Rt({
                            overwrite: !1,
                            data: "isFromStart",
                            lazy: b && X(w),
                            immediateRender: b,
                            stagger: 0,
                            parent: F
                        }, n),
                        v && (s[p.prop] = v),
                        zt(e._startAt = ir.set(R, s)),
                        r < 0 && e._startAt.render(-1, !0),
                        e._zTime = r,
                        b) {
                            if (!r)
                                return
                        } else
                            t(e._startAt, O);
                    for (e._pt = e._ptCache = 0,
                    w = L && X(w) || w && !L,
                    o = 0; o < R.length; o++) {
                        if (u = (c = R[o])._gsap || xt(R)[o]._gsap,
                        e._ptLookup[o] = f = {},
                        ft[u.id] && dt.length && Pt(),
                        m = N === R ? o : N.indexOf(c),
                        p && !1 !== (d = new p).init(c, v || n, e, m, N) && (e._pt = l = new yr(e._pt,c,d.name,0,1,d.render,d,0,d.priority),
                        d._props.forEach((function(t) {
                            f[t] = l
                        }
                        )),
                        d.priority && (h = 1)),
                        !p || v)
                            for (s in n)
                                mt[s] && (d = Je(s, n, e, m, c, N)) ? d.priority && (h = 1) : f[s] = l = Ze.call(e, c, s, "get", n[s], m, N, 0, y.stringFilter);
                        e._op && e._op[o] && e.kill(c, e._op[o]),
                        B && e._pt && (Ye = e,
                        a.killTweensOf(c, f, e.globalTime(r)),
                        g = !e.parent,
                        Ye = 0),
                        e._pt && w && (ft[u.id] = 1)
                    }
                    h && gr(e),
                    e._onInit && e._onInit(e)
                }
                e._onUpdate = S,
                e._initted = (!e._op || e._pt) && !g,
                P && r <= 0 && z.render(k, !0, !0)
            }, tr = function(t, e, r, n) {
                var i, a, o = e.ease || n || "power1.inOut";
                if (Z(e))
                    a = r[t] || (r[t] = []),
                    e.forEach((function(t, r) {
                        return a.push({
                            t: r / (e.length - 1) * 100,
                            v: t,
                            e: o
                        })
                    }
                    ));
                else
                    for (i in e)
                        a = r[i] || (r[i] = []),
                        "ease" === i || a.push({
                            t: parseFloat(t),
                            v: e[i],
                            e: o
                        })
            }, er = function(t, e, r, n, i) {
                return V(t) ? t.call(e, r, n, i) : U(t) && ~t.indexOf("random(") ? ge(t) : t
            }, rr = _t + "repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert", nr = {};
            St(rr + ",id,stagger,delay,duration,paused,scrollTrigger", (function(t) {
                return nr[t] = 1
            }
            ));
            var ir = function(t) {
                function n(e, n, o, s) {
                    var l;
                    "number" == typeof n && (o.duration = n,
                    n = o,
                    o = null);
                    var c, h, u, p, d, f, m, v, g = (l = t.call(this, s ? n : Ft(n)) || this).vars, y = g.duration, _ = g.delay, x = g.immediateRender, b = g.stagger, w = g.overwrite, S = g.keyframes, T = g.defaults, M = g.scrollTrigger, E = g.yoyoEase, A = n.parent || a, P = (Z(e) || K(e) ? j(e[0]) : "length"in n) ? [e] : he(e);
                    if (l._targets = P.length ? xt(P) : ct("GSAP target " + e + " not found. https://greensock.com", !R.nullTargetWarn) || [],
                    l._ptLookup = [],
                    l._overwrite = w,
                    S || b || $(y) || $(_)) {
                        if (n = l.vars,
                        (c = l.timeline = new Xe({
                            data: "nested",
                            defaults: T || {}
                        })).kill(),
                        c.parent = c._dp = r(l),
                        c._start = 0,
                        b || $(y) || $(_)) {
                            if (p = P.length,
                            m = b && pe(b),
                            q(b))
                                for (d in b)
                                    ~rr.indexOf(d) && (v || (v = {}),
                                    v[d] = b[d]);
                            for (h = 0; h < p; h++)
                                (u = Ot(n, nr)).stagger = 0,
                                E && (u.yoyoEase = E),
                                v && It(u, v),
                                f = P[h],
                                u.duration = +er(y, r(l), h, f, P),
                                u.delay = (+er(_, r(l), h, f, P) || 0) - l._delay,
                                !b && 1 === p && u.delay && (l._delay = _ = u.delay,
                                l._start += _,
                                u.delay = 0),
                                c.to(f, u, m ? m(h, f, P) : 0),
                                c._ease = ke.none;
                            c.duration() ? y = _ = 0 : l.timeline = 0
                        } else if (S) {
                            Ft(Rt(c.vars.defaults, {
                                ease: "none"
                            })),
                            c._ease = Ge(S.ease || n.ease || "none");
                            var C, L, D, I = 0;
                            if (Z(S))
                                S.forEach((function(t) {
                                    return c.to(P, t, ">")
                                }
                                ));
                            else {
                                for (d in u = {},
                                S)
                                    "ease" === d || "easeEach" === d || tr(d, S[d], u, S.easeEach);
                                for (d in u)
                                    for (C = u[d].sort((function(t, e) {
                                        return t.t - e.t
                                    }
                                    )),
                                    I = 0,
                                    h = 0; h < C.length; h++)
                                        (D = {
                                            ease: (L = C[h]).e,
                                            duration: (L.t - (h ? C[h - 1].t : 0)) / 100 * y
                                        })[d] = L.v,
                                        c.to(P, D, I),
                                        I += D.duration;
                                c.duration() < y && c.to({}, {
                                    duration: y - c.duration()
                                })
                            }
                        }
                        y || l.duration(y = c.duration())
                    } else
                        l.timeline = 0;
                    return !0 !== w || i || (Ye = r(l),
                    a.killTweensOf(P),
                    Ye = 0),
                    $t(A, r(l), o),
                    n.reversed && l.reverse(),
                    n.paused && l.paused(!0),
                    (x || !y && !S && l._start === Mt(A._time) && X(x) && Ut(r(l)) && "nested" !== A.data) && (l._tTime = -1e-8,
                    l.render(Math.max(0, -_))),
                    M && Kt(r(l), M),
                    l
                }
                e(n, t);
                var o = n.prototype;
                return o.render = function(t, e, r) {
                    var n, i, a, o, s, l, c, h, u, p = this._time, d = this._tDur, f = this._dur, m = t > d - O && t >= 0 ? d : t < O ? 0 : t;
                    if (f) {
                        if (m !== this._tTime || !t || r || !this._initted && this._tTime || this._startAt && this._zTime < 0 != t < 0) {
                            if (n = m,
                            h = this.timeline,
                            this._repeat) {
                                if (o = f + this._rDelay,
                                this._repeat < -1 && t < 0)
                                    return this.totalTime(100 * o + t, e, r);
                                if (n = Mt(m % o),
                                m === d ? (a = this._repeat,
                                n = f) : ((a = ~~(m / o)) && a === m / o && (n = f,
                                a--),
                                n > f && (n = f)),
                                (l = this._yoyo && 1 & a) && (u = this._yEase,
                                n = f - n),
                                s = jt(this._tTime, o),
                                n === p && !r && this._initted)
                                    return this._tTime = m,
                                    this;
                                a !== s && (h && this._yEase && ze(h, l),
                                !this.vars.repeatRefresh || l || this._lock || (this._lock = r = 1,
                                this.render(Mt(o * a), !0).invalidate()._lock = 0))
                            }
                            if (!this._initted) {
                                if (Zt(this, t < 0 ? t : n, r, e))
                                    return this._tTime = 0,
                                    this;
                                if (p !== this._time)
                                    return this;
                                if (f !== this._dur)
                                    return this.render(t, e, r)
                            }
                            if (this._tTime = m,
                            this._time = n,
                            !this._act && this._ts && (this._act = 1,
                            this._lazy = 0),
                            this.ratio = c = (u || this._ease)(n / f),
                            this._from && (this.ratio = c = 1 - c),
                            n && !p && !e && (xe(this, "onStart"),
                            this._tTime !== m))
                                return this;
                            for (i = this._pt; i; )
                                i.r(c, i.d),
                                i = i._next;
                            h && h.render(t < 0 ? t : !n && l ? -1e-8 : h._dur * h._ease(n / this._dur), e, r) || this._startAt && (this._zTime = t),
                            this._onUpdate && !e && (t < 0 && this._startAt && this._startAt.render(t, !0, r),
                            xe(this, "onUpdate")),
                            this._repeat && a !== s && this.vars.onRepeat && !e && this.parent && xe(this, "onRepeat"),
                            m !== this._tDur && m || this._tTime !== m || (t < 0 && this._startAt && !this._onUpdate && this._startAt.render(t, !0, !0),
                            (t || !f) && (m === this._tDur && this._ts > 0 || !m && this._ts < 0) && zt(this, 1),
                            e || t < 0 && !p || !m && !p || (xe(this, m === d ? "onComplete" : "onReverseComplete", !0),
                            this._prom && !(m < d && this.timeScale() > 0) && this._prom()))
                        }
                    } else
                        !function(t, e, r, n) {
                            var i, a, o, s = t.ratio, l = e < 0 || !e && (!t._start && Jt(t) && (t._initted || !Qt(t)) || (t._ts < 0 || t._dp._ts < 0) && !Qt(t)) ? 0 : 1, c = t._rDelay, h = 0;
                            if (c && t._repeat && (h = oe(0, t._tDur, e),
                            a = jt(h, c),
                            t._yoyo && 1 & a && (l = 1 - l),
                            a !== jt(t._tTime, c) && (s = 1 - l,
                            t.vars.repeatRefresh && t._initted && t.invalidate())),
                            l !== s || n || t._zTime === O || !e && t._zTime) {
                                if (!t._initted && Zt(t, e, n, r))
                                    return;
                                for (o = t._zTime,
                                t._zTime = e || (r ? O : 0),
                                r || (r = e && !o),
                                t.ratio = l,
                                t._from && (l = 1 - l),
                                t._time = 0,
                                t._tTime = h,
                                i = t._pt; i; )
                                    i.r(l, i.d),
                                    i = i._next;
                                t._startAt && e < 0 && t._startAt.render(e, !0, !0),
                                t._onUpdate && !r && xe(t, "onUpdate"),
                                h && t._repeat && !r && t.parent && xe(t, "onRepeat"),
                                (e >= t._tDur || e < 0) && t.ratio === l && (l && zt(t, 1),
                                r || (xe(t, l ? "onComplete" : "onReverseComplete", !0),
                                t._prom && t._prom()))
                            } else
                                t._zTime || (t._zTime = e)
                        }(this, t, e, r);
                    return this
                }
                ,
                o.targets = function() {
                    return this._targets
                }
                ,
                o.invalidate = function() {
                    return this._pt = this._op = this._startAt = this._onUpdate = this._lazy = this.ratio = 0,
                    this._ptLookup = [],
                    this.timeline && this.timeline.invalidate(),
                    t.prototype.invalidate.call(this)
                }
                ,
                o.resetTo = function(t, e, r, n) {
                    p || Re.wake(),
                    this._ts || this.play();
                    var i = Math.min(this._dur, (this._dp._time - this._start) * this._ts);
                    return this._initted || Qe(this, i),
                    function(t, e, r, n, i, a, o) {
                        var s, l, c, h = (t._pt && t._ptCache || (t._ptCache = {}))[e];
                        if (!h)
                            for (h = t._ptCache[e] = [],
                            l = t._ptLookup,
                            c = t._targets.length; c--; ) {
                                if ((s = l[c][e]) && s.d && s.d._pt)
                                    for (s = s.d._pt; s && s.p !== e; )
                                        s = s._next;
                                if (!s)
                                    return $e = 1,
                                    t.vars[e] = "+=0",
                                    Qe(t, o),
                                    $e = 0,
                                    1;
                                h.push(s)
                            }
                        for (c = h.length; c--; )
                            (s = h[c]).s = !n && 0 !== n || i ? s.s + (n || 0) + a * s.c : n,
                            s.c = r - s.s,
                            s.e && (s.e = Tt(r) + se(s.e)),
                            s.b && (s.b = s.s + se(s.b))
                    }(this, t, e, r, n, this._ease(i / this._dur), i) ? this.resetTo(t, e, r, n) : (Xt(this, 0),
                    this.parent || Nt(this._dp, this, "_first", "_last", this._dp._sort ? "_start" : 0),
                    this.render(0))
                }
                ,
                o.kill = function(t, e) {
                    if (void 0 === e && (e = "all"),
                    !(t || e && "all" !== e))
                        return this._lazy = this._pt = 0,
                        this.parent ? be(this) : this;
                    if (this.timeline) {
                        var r = this.timeline.totalDuration();
                        return this.timeline.killTweensOf(t, e, Ye && !0 !== Ye.vars.overwrite)._first || be(this),
                        this.parent && r !== this.timeline.totalDuration() && te(this, this._dur * this.timeline._tDur / r, 0, 1),
                        this
                    }
                    var n, i, a, o, s, l, c, h = this._targets, u = t ? he(t) : h, p = this._ptLookup, d = this._pt;
                    if ((!e || "all" === e) && function(t, e) {
                        for (var r = t.length, n = r === e.length; n && r-- && t[r] === e[r]; )
                            ;
                        return r < 0
                    }(h, u))
                        return "all" === e && (this._pt = 0),
                        be(this);
                    for (n = this._op = this._op || [],
                    "all" !== e && (U(e) && (s = {},
                    St(e, (function(t) {
                        return s[t] = 1
                    }
                    )),
                    e = s),
                    e = function(t, e) {
                        var r, n, i, a, o = t[0] ? bt(t[0]).harness : 0, s = o && o.aliases;
                        if (!s)
                            return e;
                        for (n in r = It({}, e),
                        s)
                            if (n in r)
                                for (i = (a = s[n].split(",")).length; i--; )
                                    r[a[i]] = r[n];
                        return r
                    }(h, e)),
                    c = h.length; c--; )
                        if (~u.indexOf(h[c]))
                            for (s in i = p[c],
                            "all" === e ? (n[c] = e,
                            o = i,
                            a = {}) : (a = n[c] = n[c] || {},
                            o = e),
                            o)
                                (l = i && i[s]) && ("kill"in l.d && !0 !== l.d.kill(s) || Bt(this, l, "_pt"),
                                delete i[s]),
                                "all" !== a && (a[s] = 1);
                    return this._initted && !this._pt && d && be(this),
                    this
                }
                ,
                n.to = function(t, e) {
                    return new n(t,e,arguments[2])
                }
                ,
                n.from = function(t, e) {
                    return ie(1, arguments)
                }
                ,
                n.delayedCall = function(t, e, r, i) {
                    return new n(e,0,{
                        immediateRender: !1,
                        lazy: !1,
                        overwrite: !1,
                        delay: t,
                        onComplete: e,
                        onReverseComplete: e,
                        onCompleteParams: r,
                        onReverseCompleteParams: r,
                        callbackScope: i
                    })
                }
                ,
                n.fromTo = function(t, e, r) {
                    return ie(2, arguments)
                }
                ,
                n.set = function(t, e) {
                    return e.duration = 0,
                    e.repeatDelay || (e.repeat = 0),
                    new n(t,e)
                }
                ,
                n.killTweensOf = function(t, e, r) {
                    return a.killTweensOf(t, e, r)
                }
                ,
                n
            }(qe);
            Rt(ir.prototype, {
                _targets: [],
                _lazy: 0,
                _startAt: 0,
                _op: 0,
                _onInit: 0
            }),
            St("staggerTo,staggerFrom,staggerFromTo", (function(t) {
                ir[t] = function() {
                    var e = new Xe
                      , r = le.call(arguments, 0);
                    return r.splice("staggerFromTo" === t ? 5 : 4, 0, 0),
                    e[t].apply(e, r)
                }
            }
            ));
            var ar = function(t, e, r) {
                return t[e] = r
            }
              , or = function(t, e, r) {
                return t[e](r)
            }
              , sr = function(t, e, r, n) {
                return t[e](n.fp, r)
            }
              , lr = function(t, e, r) {
                return t.setAttribute(e, r)
            }
              , cr = function(t, e) {
                return V(t[e]) ? or : W(t[e]) && t.setAttribute ? lr : ar
            }
              , hr = function(t, e) {
                return e.set(e.t, e.p, Math.round(1e6 * (e.s + e.c * t)) / 1e6, e)
            }
              , ur = function(t, e) {
                return e.set(e.t, e.p, !!(e.s + e.c * t), e)
            }
              , pr = function(t, e) {
                var r = e._pt
                  , n = "";
                if (!t && e.b)
                    n = e.b;
                else if (1 === t && e.e)
                    n = e.e;
                else {
                    for (; r; )
                        n = r.p + (r.m ? r.m(r.s + r.c * t) : Math.round(1e4 * (r.s + r.c * t)) / 1e4) + n,
                        r = r._next;
                    n += e.c
                }
                e.set(e.t, e.p, n, e)
            }
              , dr = function(t, e) {
                for (var r = e._pt; r; )
                    r.r(t, r.d),
                    r = r._next
            }
              , fr = function(t, e, r, n) {
                for (var i, a = this._pt; a; )
                    i = a._next,
                    a.p === n && a.modifier(t, e, r),
                    a = i
            }
              , mr = function(t) {
                for (var e, r, n = this._pt; n; )
                    r = n._next,
                    n.p === t && !n.op || n.op === t ? Bt(this, n, "_pt") : n.dep || (e = 1),
                    n = r;
                return !e
            }
              , vr = function(t, e, r, n) {
                n.mSet(t, e, n.m.call(n.tween, r, n.mt), n)
            }
              , gr = function(t) {
                for (var e, r, n, i, a = t._pt; a; ) {
                    for (e = a._next,
                    r = n; r && r.pr > a.pr; )
                        r = r._next;
                    (a._prev = r ? r._prev : i) ? a._prev._next = a : n = a,
                    (a._next = r) ? r._prev = a : i = a,
                    a = e
                }
                t._pt = n
            }
              , yr = function() {
                function t(t, e, r, n, i, a, o, s, l) {
                    this.t = e,
                    this.s = n,
                    this.c = i,
                    this.p = r,
                    this.r = a || hr,
                    this.d = o || this,
                    this.set = s || ar,
                    this.pr = l || 0,
                    this._next = t,
                    t && (t._prev = this)
                }
                return t.prototype.modifier = function(t, e, r) {
                    this.mSet = this.mSet || this.set,
                    this.set = vr,
                    this.m = t,
                    this.mt = r,
                    this.tween = e
                }
                ,
                t
            }();
            St(_t + "parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger", (function(t) {
                return pt[t] = 1
            }
            )),
            at.TweenMax = at.TweenLite = ir,
            at.TimelineLite = at.TimelineMax = Xe,
            a = new Xe({
                sortChildren: !1,
                defaults: I,
                autoRemoveChildren: !0,
                id: "root",
                smoothChildTiming: !0
            }),
            R.stringFilter = De;
            var _r = {
                registerPlugin: function() {
                    for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++)
                        e[r] = arguments[r];
                    e.forEach((function(t) {
                        return we(t)
                    }
                    ))
                },
                timeline: function(t) {
                    return new Xe(t)
                },
                getTweensOf: function(t, e) {
                    return a.getTweensOf(t, e)
                },
                getProperty: function(t, e, r, n) {
                    U(t) && (t = he(t)[0]);
                    var i = bt(t || {}).get
                      , a = r ? Dt : Lt;
                    return "native" === r && (r = ""),
                    t ? e ? a((mt[e] && mt[e].get || i)(t, e, r, n)) : function(e, r, n) {
                        return a((mt[e] && mt[e].get || i)(t, e, r, n))
                    }
                    : t
                },
                quickSetter: function(t, e, r) {
                    if ((t = he(t)).length > 1) {
                        var n = t.map((function(t) {
                            return wr.quickSetter(t, e, r)
                        }
                        ))
                          , i = n.length;
                        return function(t) {
                            for (var e = i; e--; )
                                n[e](t)
                        }
                    }
                    t = t[0] || {};
                    var a = mt[e]
                      , o = bt(t)
                      , s = o.harness && (o.harness.aliases || {})[e] || e
                      , l = a ? function(e) {
                        var n = new a;
                        u._pt = 0,
                        n.init(t, r ? e + r : e, u, 0, [t]),
                        n.render(1, n),
                        u._pt && dr(1, u)
                    }
                    : o.set(t, s);
                    return a ? l : function(e) {
                        return l(t, s, r ? e + r : e, o, 1)
                    }
                },
                quickTo: function(t, e, r) {
                    var n, i = wr.to(t, It(((n = {})[e] = "+=0.1",
                    n.paused = !0,
                    n), r || {})), a = function(t, r, n) {
                        return i.resetTo(e, t, r, n)
                    };
                    return a.tween = i,
                    a
                },
                isTweening: function(t) {
                    return a.getTweensOf(t, !0).length > 0
                },
                defaults: function(t) {
                    return t && t.ease && (t.ease = Ge(t.ease, I.ease)),
                    kt(I, t || {})
                },
                config: function(t) {
                    return kt(R, t || {})
                },
                registerEffect: function(t) {
                    var e = t.name
                      , r = t.effect
                      , n = t.plugins
                      , i = t.defaults
                      , a = t.extendTimeline;
                    (n || "").split(",").forEach((function(t) {
                        return t && !mt[t] && !at[t] && ct(e + " effect requires " + t + " plugin.")
                    }
                    )),
                    vt[e] = function(t, e, n) {
                        return r(he(t), Rt(e || {}, i), n)
                    }
                    ,
                    a && (Xe.prototype[e] = function(t, r, n) {
                        return this.add(vt[e](t, q(r) ? r : (n = r) && {}, this), n)
                    }
                    )
                },
                registerEase: function(t, e) {
                    ke[t] = Ge(e)
                },
                parseEase: function(t, e) {
                    return arguments.length ? Ge(t, e) : ke
                },
                getById: function(t) {
                    return a.getById(t)
                },
                exportRoot: function(t, e) {
                    void 0 === t && (t = {});
                    var r, n, i = new Xe(t);
                    for (i.smoothChildTiming = X(t.smoothChildTiming),
                    a.remove(i),
                    i._dp = 0,
                    i._time = i._tTime = a._time,
                    r = a._first; r; )
                        n = r._next,
                        !e && !r._dur && r instanceof ir && r.vars.onComplete === r._targets[0] || $t(i, r, r._start - r._delay),
                        r = n;
                    return $t(a, i, 0),
                    i
                },
                utils: {
                    wrap: function t(e, r, n) {
                        var i = r - e;
                        return Z(e) ? ve(e, t(0, e.length), r) : ae(n, (function(t) {
                            return (i + (t - e) % i) % i + e
                        }
                        ))
                    },
                    wrapYoyo: function t(e, r, n) {
                        var i = r - e
                          , a = 2 * i;
                        return Z(e) ? ve(e, t(0, e.length - 1), r) : ae(n, (function(t) {
                            return e + ((t = (a + (t - e) % a) % a || 0) > i ? a - t : t)
                        }
                        ))
                    },
                    distribute: pe,
                    random: me,
                    snap: fe,
                    normalize: function(t, e, r) {
                        return ye(t, e, 0, 1, r)
                    },
                    getUnit: se,
                    clamp: function(t, e, r) {
                        return ae(r, (function(r) {
                            return oe(t, e, r)
                        }
                        ))
                    },
                    splitColor: Ee,
                    toArray: he,
                    selector: function(t) {
                        return t = he(t)[0] || ct("Invalid scope") || {},
                        function(e) {
                            var r = t.current || t.nativeElement || t;
                            return he(e, r.querySelectorAll ? r : r === t ? ct("Invalid scope") || l.createElement("div") : t)
                        }
                    },
                    mapRange: ye,
                    pipe: function() {
                        for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++)
                            e[r] = arguments[r];
                        return function(t) {
                            return e.reduce((function(t, e) {
                                return e(t)
                            }
                            ), t)
                        }
                    },
                    unitize: function(t, e) {
                        return function(r) {
                            return t(parseFloat(r)) + (e || se(r))
                        }
                    },
                    interpolate: function t(e, r, n, i) {
                        var a = isNaN(e + r) ? 0 : function(t) {
                            return (1 - t) * e + t * r
                        }
                        ;
                        if (!a) {
                            var o, s, l, c, h, u = U(e), p = {};
                            if (!0 === n && (i = 1) && (n = null),
                            u)
                                e = {
                                    p: e
                                },
                                r = {
                                    p: r
                                };
                            else if (Z(e) && !Z(r)) {
                                for (l = [],
                                c = e.length,
                                h = c - 2,
                                s = 1; s < c; s++)
                                    l.push(t(e[s - 1], e[s]));
                                c--,
                                a = function(t) {
                                    t *= c;
                                    var e = Math.min(h, ~~t);
                                    return l[e](t - e)
                                }
                                ,
                                n = r
                            } else
                                i || (e = It(Z(e) ? [] : {}, e));
                            if (!l) {
                                for (o in r)
                                    Ze.call(p, e, o, "get", r[o]);
                                a = function(t) {
                                    return dr(t, p) || (u ? e.p : e)
                                }
                            }
                        }
                        return ae(n, a)
                    },
                    shuffle: ue
                },
                install: st,
                effects: vt,
                ticker: Re,
                updateRoot: Xe.updateRoot,
                plugins: mt,
                globalTimeline: a,
                core: {
                    PropTween: yr,
                    globals: ht,
                    Tween: ir,
                    Timeline: Xe,
                    Animation: qe,
                    getCache: bt,
                    _removeLinkedListItem: Bt,
                    suppressOverwrites: function(t) {
                        return i = t
                    }
                }
            };
            St("to,from,fromTo,delayedCall,set,killTweensOf", (function(t) {
                return _r[t] = ir[t]
            }
            )),
            Re.add(Xe.updateRoot),
            u = _r.to({}, {
                duration: 0
            });
            var xr = function(t, e) {
                for (var r = t._pt; r && r.p !== e && r.op !== e && r.fp !== e; )
                    r = r._next;
                return r
            }
              , br = function(t, e) {
                return {
                    name: t,
                    rawVars: 1,
                    init: function(t, r, n) {
                        n._onInit = function(t) {
                            var n, i;
                            if (U(r) && (n = {},
                            St(r, (function(t) {
                                return n[t] = 1
                            }
                            )),
                            r = n),
                            e) {
                                for (i in n = {},
                                r)
                                    n[i] = e(r[i]);
                                r = n
                            }
                            !function(t, e) {
                                var r, n, i, a = t._targets;
                                for (r in e)
                                    for (n = a.length; n--; )
                                        (i = t._ptLookup[n][r]) && (i = i.d) && (i._pt && (i = xr(i, r)),
                                        i && i.modifier && i.modifier(e[r], t, a[n], r))
                            }(t, r)
                        }
                    }
                }
            }
              , wr = _r.registerPlugin({
                name: "attr",
                init: function(t, e, r, n, i) {
                    var a, o;
                    for (a in e)
                        (o = this.add(t, "setAttribute", (t.getAttribute(a) || 0) + "", e[a], n, i, 0, 0, a)) && (o.op = a),
                        this._props.push(a)
                }
            }, {
                name: "endArray",
                init: function(t, e) {
                    for (var r = e.length; r--; )
                        this.add(t, r, t[r] || 0, e[r])
                }
            }, br("roundProps", de), br("modifiers"), br("snap", fe)) || _r;
            ir.version = Xe.version = wr.version = "3.10.4",
            c = 1,
            Y() && Ie();
            var Sr, Tr, Mr, Er, Ar, Pr, Cr, Lr = ke.Power0, Dr = ke.Power1, Rr = ke.Power2, Ir = ke.Power3, kr = ke.Power4, Or = ke.Linear, Fr = ke.Quad, Nr = ke.Cubic, Br = ke.Quart, zr = ke.Quint, Gr = ke.Strong, Hr = ke.Elastic, Ur = ke.Back, Vr = ke.SteppedEase, jr = ke.Bounce, Wr = ke.Sine, qr = ke.Expo, Xr = ke.Circ, Yr = {}, $r = 180 / Math.PI, Kr = Math.PI / 180, Zr = Math.atan2, Jr = /([A-Z])/g, Qr = /(left|right|width|margin|padding|x)/i, tn = /[\s,\(]\S/, en = {
                autoAlpha: "opacity,visibility",
                scale: "scaleX,scaleY",
                alpha: "opacity"
            }, rn = function(t, e) {
                return e.set(e.t, e.p, Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u, e)
            }, nn = function(t, e) {
                return e.set(e.t, e.p, 1 === t ? e.e : Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u, e)
            }, an = function(t, e) {
                return e.set(e.t, e.p, t ? Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u : e.b, e)
            }, on = function(t, e) {
                var r = e.s + e.c * t;
                e.set(e.t, e.p, ~~(r + (r < 0 ? -.5 : .5)) + e.u, e)
            }, sn = function(t, e) {
                return e.set(e.t, e.p, t ? e.e : e.b, e)
            }, ln = function(t, e) {
                return e.set(e.t, e.p, 1 !== t ? e.b : e.e, e)
            }, cn = function(t, e, r) {
                return t.style[e] = r
            }, hn = function(t, e, r) {
                return t.style.setProperty(e, r)
            }, un = function(t, e, r) {
                return t._gsap[e] = r
            }, pn = function(t, e, r) {
                return t._gsap.scaleX = t._gsap.scaleY = r
            }, dn = function(t, e, r, n, i) {
                var a = t._gsap;
                a.scaleX = a.scaleY = r,
                a.renderTransform(i, a)
            }, fn = function(t, e, r, n, i) {
                var a = t._gsap;
                a[e] = r,
                a.renderTransform(i, a)
            }, mn = "transform", vn = mn + "Origin", gn = function(t, e) {
                var r = Tr.createElementNS ? Tr.createElementNS((e || "http://www.w3.org/1999/xhtml").replace(/^https/, "http"), t) : Tr.createElement(t);
                return r.style ? r : Tr.createElement(t)
            }, yn = function t(e, r, n) {
                var i = getComputedStyle(e);
                return i[r] || i.getPropertyValue(r.replace(Jr, "-$1").toLowerCase()) || i.getPropertyValue(r) || !n && t(e, xn(r) || r, 1) || ""
            }, _n = "O,Moz,ms,Ms,Webkit".split(","), xn = function(t, e, r) {
                var n = (e || Ar).style
                  , i = 5;
                if (t in n && !r)
                    return t;
                for (t = t.charAt(0).toUpperCase() + t.substr(1); i-- && !(_n[i] + t in n); )
                    ;
                return i < 0 ? null : (3 === i ? "ms" : i >= 0 ? _n[i] : "") + t
            }, bn = function() {
                "undefined" != typeof window && window.document && (Sr = window,
                Tr = Sr.document,
                Mr = Tr.documentElement,
                Ar = gn("div") || {
                    style: {}
                },
                gn("div"),
                mn = xn(mn),
                vn = mn + "Origin",
                Ar.style.cssText = "border-width:0;line-height:0;position:absolute;padding:0",
                Cr = !!xn("perspective"),
                Er = 1)
            }, wn = function t(e) {
                var r, n = gn("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"), i = this.parentNode, a = this.nextSibling, o = this.style.cssText;
                if (Mr.appendChild(n),
                n.appendChild(this),
                this.style.display = "block",
                e)
                    try {
                        r = this.getBBox(),
                        this._gsapBBox = this.getBBox,
                        this.getBBox = t
                    } catch (t) {}
                else
                    this._gsapBBox && (r = this._gsapBBox());
                return i && (a ? i.insertBefore(this, a) : i.appendChild(this)),
                Mr.removeChild(n),
                this.style.cssText = o,
                r
            }, Sn = function(t, e) {
                for (var r = e.length; r--; )
                    if (t.hasAttribute(e[r]))
                        return t.getAttribute(e[r])
            }, Tn = function(t) {
                var e;
                try {
                    e = t.getBBox()
                } catch (r) {
                    e = wn.call(t, !0)
                }
                return e && (e.width || e.height) || t.getBBox === wn || (e = wn.call(t, !0)),
                !e || e.width || e.x || e.y ? e : {
                    x: +Sn(t, ["x", "cx", "x1"]) || 0,
                    y: +Sn(t, ["y", "cy", "y1"]) || 0,
                    width: 0,
                    height: 0
                }
            }, Mn = function(t) {
                return !(!t.getCTM || t.parentNode && !t.ownerSVGElement || !Tn(t))
            }, En = function(t, e) {
                if (e) {
                    var r = t.style;
                    e in Yr && e !== vn && (e = mn),
                    r.removeProperty ? ("ms" !== e.substr(0, 2) && "webkit" !== e.substr(0, 6) || (e = "-" + e),
                    r.removeProperty(e.replace(Jr, "-$1").toLowerCase())) : r.removeAttribute(e)
                }
            }, An = function(t, e, r, n, i, a) {
                var o = new yr(t._pt,e,r,0,1,a ? ln : sn);
                return t._pt = o,
                o.b = n,
                o.e = i,
                t._props.push(r),
                o
            }, Pn = {
                deg: 1,
                rad: 1,
                turn: 1
            }, Cn = function t(e, r, n, i) {
                var a, o, s, l, c = parseFloat(n) || 0, h = (n + "").trim().substr((c + "").length) || "px", u = Ar.style, p = Qr.test(r), d = "svg" === e.tagName.toLowerCase(), f = (d ? "client" : "offset") + (p ? "Width" : "Height"), m = 100, v = "px" === i, g = "%" === i;
                return i === h || !c || Pn[i] || Pn[h] ? c : ("px" !== h && !v && (c = t(e, r, n, "px")),
                l = e.getCTM && Mn(e),
                !g && "%" !== h || !Yr[r] && !~r.indexOf("adius") ? (u[p ? "width" : "height"] = m + (v ? h : i),
                o = ~r.indexOf("adius") || "em" === i && e.appendChild && !d ? e : e.parentNode,
                l && (o = (e.ownerSVGElement || {}).parentNode),
                o && o !== Tr && o.appendChild || (o = Tr.body),
                (s = o._gsap) && g && s.width && p && s.time === Re.time ? Tt(c / s.width * m) : ((g || "%" === h) && (u.position = yn(e, "position")),
                o === e && (u.position = "static"),
                o.appendChild(Ar),
                a = Ar[f],
                o.removeChild(Ar),
                u.position = "absolute",
                p && g && ((s = bt(o)).time = Re.time,
                s.width = o[f]),
                Tt(v ? a * c / m : a && c ? m / a * c : 0))) : (a = l ? e.getBBox()[p ? "width" : "height"] : e[f],
                Tt(g ? c / a * m : c / 100 * a)))
            }, Ln = function(t, e, r, n) {
                var i;
                return Er || bn(),
                e in en && "transform" !== e && ~(e = en[e]).indexOf(",") && (e = e.split(",")[0]),
                Yr[e] && "transform" !== e ? (i = Hn(t, n),
                i = "transformOrigin" !== e ? i[e] : i.svg ? i.origin : Un(yn(t, vn)) + " " + i.zOrigin + "px") : (!(i = t.style[e]) || "auto" === i || n || ~(i + "").indexOf("calc(")) && (i = kn[e] && kn[e](t, e, r) || yn(t, e) || wt(t, e) || ("opacity" === e ? 1 : 0)),
                r && !~(i + "").trim().indexOf(" ") ? Cn(t, e, i, r) + r : i
            }, Dn = function(t, e, r, n) {
                if (!r || "none" === r) {
                    var i = xn(e, t, 1)
                      , a = i && yn(t, i, 1);
                    a && a !== r ? (e = i,
                    r = a) : "borderColor" === e && (r = yn(t, "borderTopColor"))
                }
                var o, s, l, c, h, u, p, d, f, m, v, g = new yr(this._pt,t.style,e,0,1,pr), y = 0, _ = 0;
                if (g.b = r,
                g.e = n,
                r += "",
                "auto" == (n += "") && (t.style[e] = n,
                n = yn(t, e) || n,
                t.style[e] = r),
                De(o = [r, n]),
                n = o[1],
                l = (r = o[0]).match(tt) || [],
                (n.match(tt) || []).length) {
                    for (; s = tt.exec(n); )
                        p = s[0],
                        f = n.substring(y, s.index),
                        h ? h = (h + 1) % 5 : "rgba(" !== f.substr(-5) && "hsla(" !== f.substr(-5) || (h = 1),
                        p !== (u = l[_++] || "") && (c = parseFloat(u) || 0,
                        v = u.substr((c + "").length),
                        "=" === p.charAt(1) && (p = Et(c, p) + v),
                        d = parseFloat(p),
                        m = p.substr((d + "").length),
                        y = tt.lastIndex - m.length,
                        m || (m = m || R.units[e] || v,
                        y === n.length && (n += m,
                        g.e += m)),
                        v !== m && (c = Cn(t, e, u, m) || 0),
                        g._pt = {
                            _next: g._pt,
                            p: f || 1 === _ ? f : ",",
                            s: c,
                            c: d - c,
                            m: h && h < 4 || "zIndex" === e ? Math.round : 0
                        });
                    g.c = y < n.length ? n.substring(y, n.length) : ""
                } else
                    g.r = "display" === e && "none" === n ? ln : sn;
                return rt.test(n) && (g.e = 0),
                this._pt = g,
                g
            }, Rn = {
                top: "0%",
                bottom: "100%",
                left: "0%",
                right: "100%",
                center: "50%"
            }, In = function(t, e) {
                if (e.tween && e.tween._time === e.tween._dur) {
                    var r, n, i, a = e.t, o = a.style, s = e.u, l = a._gsap;
                    if ("all" === s || !0 === s)
                        o.cssText = "",
                        n = 1;
                    else
                        for (i = (s = s.split(",")).length; --i > -1; )
                            r = s[i],
                            Yr[r] && (n = 1,
                            r = "transformOrigin" === r ? vn : mn),
                            En(a, r);
                    n && (En(a, mn),
                    l && (l.svg && a.removeAttribute("transform"),
                    Hn(a, 1),
                    l.uncache = 1))
                }
            }, kn = {
                clearProps: function(t, e, r, n, i) {
                    if ("isFromStart" !== i.data) {
                        var a = t._pt = new yr(t._pt,e,r,0,0,In);
                        return a.u = n,
                        a.pr = -10,
                        a.tween = i,
                        t._props.push(r),
                        1
                    }
                }
            }, On = [1, 0, 0, 1, 0, 0], Fn = {}, Nn = function(t) {
                return "matrix(1, 0, 0, 1, 0, 0)" === t || "none" === t || !t
            }, Bn = function(t) {
                var e = yn(t, mn);
                return Nn(e) ? On : e.substr(7).match(Q).map(Tt)
            }, zn = function(t, e) {
                var r, n, i, a, o = t._gsap || bt(t), s = t.style, l = Bn(t);
                return o.svg && t.getAttribute("transform") ? "1,0,0,1,0,0" === (l = [(i = t.transform.baseVal.consolidate().matrix).a, i.b, i.c, i.d, i.e, i.f]).join(",") ? On : l : (l !== On || t.offsetParent || t === Mr || o.svg || (i = s.display,
                s.display = "block",
                (r = t.parentNode) && t.offsetParent || (a = 1,
                n = t.nextSibling,
                Mr.appendChild(t)),
                l = Bn(t),
                i ? s.display = i : En(t, "display"),
                a && (n ? r.insertBefore(t, n) : r ? r.appendChild(t) : Mr.removeChild(t))),
                e && l.length > 6 ? [l[0], l[1], l[4], l[5], l[12], l[13]] : l)
            }, Gn = function(t, e, r, n, i, a) {
                var o, s, l, c = t._gsap, h = i || zn(t, !0), u = c.xOrigin || 0, p = c.yOrigin || 0, d = c.xOffset || 0, f = c.yOffset || 0, m = h[0], v = h[1], g = h[2], y = h[3], _ = h[4], x = h[5], b = e.split(" "), w = parseFloat(b[0]) || 0, S = parseFloat(b[1]) || 0;
                r ? h !== On && (s = m * y - v * g) && (l = w * (-v / s) + S * (m / s) - (m * x - v * _) / s,
                w = w * (y / s) + S * (-g / s) + (g * x - y * _) / s,
                S = l) : (w = (o = Tn(t)).x + (~b[0].indexOf("%") ? w / 100 * o.width : w),
                S = o.y + (~(b[1] || b[0]).indexOf("%") ? S / 100 * o.height : S)),
                n || !1 !== n && c.smooth ? (_ = w - u,
                x = S - p,
                c.xOffset = d + (_ * m + x * g) - _,
                c.yOffset = f + (_ * v + x * y) - x) : c.xOffset = c.yOffset = 0,
                c.xOrigin = w,
                c.yOrigin = S,
                c.smooth = !!n,
                c.origin = e,
                c.originIsAbsolute = !!r,
                t.style[vn] = "0px 0px",
                a && (An(a, c, "xOrigin", u, w),
                An(a, c, "yOrigin", p, S),
                An(a, c, "xOffset", d, c.xOffset),
                An(a, c, "yOffset", f, c.yOffset)),
                t.setAttribute("data-svg-origin", w + " " + S)
            }, Hn = function(t, e) {
                var r = t._gsap || new We(t);
                if ("x"in r && !e && !r.uncache)
                    return r;
                var n, i, a, o, s, l, c, h, u, p, d, f, m, v, g, y, _, x, b, w, S, T, M, E, A, P, C, L, D, I, k, O, F = t.style, N = r.scaleX < 0, B = "px", z = "deg", G = yn(t, vn) || "0";
                return n = i = a = l = c = h = u = p = d = 0,
                o = s = 1,
                r.svg = !(!t.getCTM || !Mn(t)),
                v = zn(t, r.svg),
                r.svg && (E = (!r.uncache || "0px 0px" === G) && !e && t.getAttribute("data-svg-origin"),
                Gn(t, E || G, !!E || r.originIsAbsolute, !1 !== r.smooth, v)),
                f = r.xOrigin || 0,
                m = r.yOrigin || 0,
                v !== On && (x = v[0],
                b = v[1],
                w = v[2],
                S = v[3],
                n = T = v[4],
                i = M = v[5],
                6 === v.length ? (o = Math.sqrt(x * x + b * b),
                s = Math.sqrt(S * S + w * w),
                l = x || b ? Zr(b, x) * $r : 0,
                (u = w || S ? Zr(w, S) * $r + l : 0) && (s *= Math.abs(Math.cos(u * Kr))),
                r.svg && (n -= f - (f * x + m * w),
                i -= m - (f * b + m * S))) : (O = v[6],
                I = v[7],
                C = v[8],
                L = v[9],
                D = v[10],
                k = v[11],
                n = v[12],
                i = v[13],
                a = v[14],
                c = (g = Zr(O, D)) * $r,
                g && (E = T * (y = Math.cos(-g)) + C * (_ = Math.sin(-g)),
                A = M * y + L * _,
                P = O * y + D * _,
                C = T * -_ + C * y,
                L = M * -_ + L * y,
                D = O * -_ + D * y,
                k = I * -_ + k * y,
                T = E,
                M = A,
                O = P),
                h = (g = Zr(-w, D)) * $r,
                g && (y = Math.cos(-g),
                k = S * (_ = Math.sin(-g)) + k * y,
                x = E = x * y - C * _,
                b = A = b * y - L * _,
                w = P = w * y - D * _),
                l = (g = Zr(b, x)) * $r,
                g && (E = x * (y = Math.cos(g)) + b * (_ = Math.sin(g)),
                A = T * y + M * _,
                b = b * y - x * _,
                M = M * y - T * _,
                x = E,
                T = A),
                c && Math.abs(c) + Math.abs(l) > 359.9 && (c = l = 0,
                h = 180 - h),
                o = Tt(Math.sqrt(x * x + b * b + w * w)),
                s = Tt(Math.sqrt(M * M + O * O)),
                g = Zr(T, M),
                u = Math.abs(g) > 2e-4 ? g * $r : 0,
                d = k ? 1 / (k < 0 ? -k : k) : 0),
                r.svg && (E = t.getAttribute("transform"),
                r.forceCSS = t.setAttribute("transform", "") || !Nn(yn(t, mn)),
                E && t.setAttribute("transform", E))),
                Math.abs(u) > 90 && Math.abs(u) < 270 && (N ? (o *= -1,
                u += l <= 0 ? 180 : -180,
                l += l <= 0 ? 180 : -180) : (s *= -1,
                u += u <= 0 ? 180 : -180)),
                e = e || r.uncache,
                r.x = n - ((r.xPercent = n && (!e && r.xPercent || (Math.round(t.offsetWidth / 2) === Math.round(-n) ? -50 : 0))) ? t.offsetWidth * r.xPercent / 100 : 0) + B,
                r.y = i - ((r.yPercent = i && (!e && r.yPercent || (Math.round(t.offsetHeight / 2) === Math.round(-i) ? -50 : 0))) ? t.offsetHeight * r.yPercent / 100 : 0) + B,
                r.z = a + B,
                r.scaleX = Tt(o),
                r.scaleY = Tt(s),
                r.rotation = Tt(l) + z,
                r.rotationX = Tt(c) + z,
                r.rotationY = Tt(h) + z,
                r.skewX = u + z,
                r.skewY = p + z,
                r.transformPerspective = d + B,
                (r.zOrigin = parseFloat(G.split(" ")[2]) || 0) && (F[vn] = Un(G)),
                r.xOffset = r.yOffset = 0,
                r.force3D = R.force3D,
                r.renderTransform = r.svg ? $n : Cr ? Yn : jn,
                r.uncache = 0,
                r
            }, Un = function(t) {
                return (t = t.split(" "))[0] + " " + t[1]
            }, Vn = function(t, e, r) {
                var n = se(e);
                return Tt(parseFloat(e) + parseFloat(Cn(t, "x", r + "px", n))) + n
            }, jn = function(t, e) {
                e.z = "0px",
                e.rotationY = e.rotationX = "0deg",
                e.force3D = 0,
                Yn(t, e)
            }, Wn = "0deg", qn = "0px", Xn = ") ", Yn = function(t, e) {
                var r = e || this
                  , n = r.xPercent
                  , i = r.yPercent
                  , a = r.x
                  , o = r.y
                  , s = r.z
                  , l = r.rotation
                  , c = r.rotationY
                  , h = r.rotationX
                  , u = r.skewX
                  , p = r.skewY
                  , d = r.scaleX
                  , f = r.scaleY
                  , m = r.transformPerspective
                  , v = r.force3D
                  , g = r.target
                  , y = r.zOrigin
                  , _ = ""
                  , x = "auto" === v && t && 1 !== t || !0 === v;
                if (y && (h !== Wn || c !== Wn)) {
                    var b, w = parseFloat(c) * Kr, S = Math.sin(w), T = Math.cos(w);
                    w = parseFloat(h) * Kr,
                    b = Math.cos(w),
                    a = Vn(g, a, S * b * -y),
                    o = Vn(g, o, -Math.sin(w) * -y),
                    s = Vn(g, s, T * b * -y + y)
                }
                m !== qn && (_ += "perspective(" + m + Xn),
                (n || i) && (_ += "translate(" + n + "%, " + i + "%) "),
                (x || a !== qn || o !== qn || s !== qn) && (_ += s !== qn || x ? "translate3d(" + a + ", " + o + ", " + s + ") " : "translate(" + a + ", " + o + Xn),
                l !== Wn && (_ += "rotate(" + l + Xn),
                c !== Wn && (_ += "rotateY(" + c + Xn),
                h !== Wn && (_ += "rotateX(" + h + Xn),
                u === Wn && p === Wn || (_ += "skew(" + u + ", " + p + Xn),
                1 === d && 1 === f || (_ += "scale(" + d + ", " + f + Xn),
                g.style[mn] = _ || "translate(0, 0)"
            }, $n = function(t, e) {
                var r, n, i, a, o, s = e || this, l = s.xPercent, c = s.yPercent, h = s.x, u = s.y, p = s.rotation, d = s.skewX, f = s.skewY, m = s.scaleX, v = s.scaleY, g = s.target, y = s.xOrigin, _ = s.yOrigin, x = s.xOffset, b = s.yOffset, w = s.forceCSS, S = parseFloat(h), T = parseFloat(u);
                p = parseFloat(p),
                d = parseFloat(d),
                (f = parseFloat(f)) && (d += f = parseFloat(f),
                p += f),
                p || d ? (p *= Kr,
                d *= Kr,
                r = Math.cos(p) * m,
                n = Math.sin(p) * m,
                i = Math.sin(p - d) * -v,
                a = Math.cos(p - d) * v,
                d && (f *= Kr,
                o = Math.tan(d - f),
                i *= o = Math.sqrt(1 + o * o),
                a *= o,
                f && (o = Math.tan(f),
                r *= o = Math.sqrt(1 + o * o),
                n *= o)),
                r = Tt(r),
                n = Tt(n),
                i = Tt(i),
                a = Tt(a)) : (r = m,
                a = v,
                n = i = 0),
                (S && !~(h + "").indexOf("px") || T && !~(u + "").indexOf("px")) && (S = Cn(g, "x", h, "px"),
                T = Cn(g, "y", u, "px")),
                (y || _ || x || b) && (S = Tt(S + y - (y * r + _ * i) + x),
                T = Tt(T + _ - (y * n + _ * a) + b)),
                (l || c) && (o = g.getBBox(),
                S = Tt(S + l / 100 * o.width),
                T = Tt(T + c / 100 * o.height)),
                o = "matrix(" + r + "," + n + "," + i + "," + a + "," + S + "," + T + ")",
                g.setAttribute("transform", o),
                w && (g.style[mn] = o)
            }, Kn = function(t, e, r, n, i) {
                var a, o, s = 360, l = U(i), c = parseFloat(i) * (l && ~i.indexOf("rad") ? $r : 1) - n, h = n + c + "deg";
                return l && ("short" === (a = i.split("_")[1]) && (c %= s) != c % 180 && (c += c < 0 ? s : -360),
                "cw" === a && c < 0 ? c = (c + 36e9) % s - ~~(c / s) * s : "ccw" === a && c > 0 && (c = (c - 36e9) % s - ~~(c / s) * s)),
                t._pt = o = new yr(t._pt,e,r,n,c,nn),
                o.e = h,
                o.u = "deg",
                t._props.push(r),
                o
            }, Zn = function(t, e) {
                for (var r in e)
                    t[r] = e[r];
                return t
            }, Jn = function(t, e, r) {
                var n, i, a, o, s, l, c, h = Zn({}, r._gsap), u = r.style;
                for (i in h.svg ? (a = r.getAttribute("transform"),
                r.setAttribute("transform", ""),
                u[mn] = e,
                n = Hn(r, 1),
                En(r, mn),
                r.setAttribute("transform", a)) : (a = getComputedStyle(r)[mn],
                u[mn] = e,
                n = Hn(r, 1),
                u[mn] = a),
                Yr)
                    (a = h[i]) !== (o = n[i]) && "perspective,force3D,transformOrigin,svgOrigin".indexOf(i) < 0 && (s = se(a) !== (c = se(o)) ? Cn(r, i, a, c) : parseFloat(a),
                    l = parseFloat(o),
                    t._pt = new yr(t._pt,n,i,s,l - s,rn),
                    t._pt.u = c || 0,
                    t._props.push(i));
                Zn(n, h)
            };
            St("padding,margin,Width,Radius", (function(t, e) {
                var r = "Top"
                  , n = "Right"
                  , i = "Bottom"
                  , a = "Left"
                  , o = (e < 3 ? [r, n, i, a] : [r + a, r + n, i + n, i + a]).map((function(r) {
                    return e < 2 ? t + r : "border" + r + t
                }
                ));
                kn[e > 1 ? "border" + t : t] = function(t, e, r, n, i) {
                    var a, s;
                    if (arguments.length < 4)
                        return a = o.map((function(e) {
                            return Ln(t, e, r)
                        }
                        )),
                        5 === (s = a.join(" ")).split(a[0]).length ? a[0] : s;
                    a = (n + "").split(" "),
                    s = {},
                    o.forEach((function(t, e) {
                        return s[t] = a[e] = a[e] || a[(e - 1) / 2 | 0]
                    }
                    )),
                    t.init(e, s, i)
                }
            }
            ));
            var Qn, ti, ei = {
                name: "css",
                register: bn,
                targetTest: function(t) {
                    return t.style && t.nodeType
                },
                init: function(t, e, r, i, a) {
                    var o, s, l, c, h, u, p, d, f, m, v, g, y, _, x, b, w, S, T, M = this._props, E = t.style, A = r.vars.startAt;
                    for (p in Er || bn(),
                    e)
                        if ("autoRound" !== p && (s = e[p],
                        !mt[p] || !Je(p, e, r, i, t, a)))
                            if (h = n(s),
                            u = kn[p],
                            "function" === h && (h = n(s = s.call(r, i, t, a))),
                            "string" === h && ~s.indexOf("random(") && (s = ge(s)),
                            u)
                                u(this, t, p, s, r) && (x = 1);
                            else if ("--" === p.substr(0, 2))
                                o = (getComputedStyle(t).getPropertyValue(p) + "").trim(),
                                s += "",
                                Ce.lastIndex = 0,
                                Ce.test(o) || (d = se(o),
                                f = se(s)),
                                f ? d !== f && (o = Cn(t, p, o, f) + f) : d && (s += d),
                                this.add(E, "setProperty", o, s, i, a, 0, 0, p),
                                M.push(p);
                            else if ("undefined" !== h) {
                                if (A && p in A ? (o = "function" == typeof A[p] ? A[p].call(r, i, t, a) : A[p],
                                U(o) && ~o.indexOf("random(") && (o = ge(o)),
                                se(o + "") || (o += R.units[p] || se(Ln(t, p)) || ""),
                                "=" === (o + "").charAt(1) && (o = Ln(t, p))) : o = Ln(t, p),
                                c = parseFloat(o),
                                (m = "string" === h && "=" === s.charAt(1) && s.substr(0, 2)) && (s = s.substr(2)),
                                l = parseFloat(s),
                                p in en && ("autoAlpha" === p && (1 === c && "hidden" === Ln(t, "visibility") && l && (c = 0),
                                An(this, E, "visibility", c ? "inherit" : "hidden", l ? "inherit" : "hidden", !l)),
                                "scale" !== p && "transform" !== p && ~(p = en[p]).indexOf(",") && (p = p.split(",")[0])),
                                v = p in Yr)
                                    if (g || ((y = t._gsap).renderTransform && !e.parseTransform || Hn(t, e.parseTransform),
                                    _ = !1 !== e.smoothOrigin && y.smooth,
                                    (g = this._pt = new yr(this._pt,E,mn,0,1,y.renderTransform,y,0,-1)).dep = 1),
                                    "scale" === p)
                                        this._pt = new yr(this._pt,y,"scaleY",y.scaleY,(m ? Et(y.scaleY, m + l) : l) - y.scaleY || 0),
                                        M.push("scaleY", p),
                                        p += "X";
                                    else {
                                        if ("transformOrigin" === p) {
                                            w = void 0,
                                            S = void 0,
                                            T = void 0,
                                            S = (w = (b = s).split(" "))[0],
                                            T = w[1] || "50%",
                                            "top" !== S && "bottom" !== S && "left" !== T && "right" !== T || (b = S,
                                            S = T,
                                            T = b),
                                            w[0] = Rn[S] || S,
                                            w[1] = Rn[T] || T,
                                            s = w.join(" "),
                                            y.svg ? Gn(t, s, 0, _, 0, this) : ((f = parseFloat(s.split(" ")[2]) || 0) !== y.zOrigin && An(this, y, "zOrigin", y.zOrigin, f),
                                            An(this, E, p, Un(o), Un(s)));
                                            continue
                                        }
                                        if ("svgOrigin" === p) {
                                            Gn(t, s, 1, _, 0, this);
                                            continue
                                        }
                                        if (p in Fn) {
                                            Kn(this, y, p, c, m ? Et(c, m + s) : s);
                                            continue
                                        }
                                        if ("smoothOrigin" === p) {
                                            An(this, y, "smooth", y.smooth, s);
                                            continue
                                        }
                                        if ("force3D" === p) {
                                            y[p] = s;
                                            continue
                                        }
                                        if ("transform" === p) {
                                            Jn(this, s, t);
                                            continue
                                        }
                                    }
                                else
                                    p in E || (p = xn(p) || p);
                                if (v || (l || 0 === l) && (c || 0 === c) && !tn.test(s) && p in E)
                                    l || (l = 0),
                                    (d = (o + "").substr((c + "").length)) !== (f = se(s) || (p in R.units ? R.units[p] : d)) && (c = Cn(t, p, o, f)),
                                    this._pt = new yr(this._pt,v ? y : E,p,c,(m ? Et(c, m + l) : l) - c,v || "px" !== f && "zIndex" !== p || !1 === e.autoRound ? rn : on),
                                    this._pt.u = f || 0,
                                    d !== f && "%" !== f && (this._pt.b = o,
                                    this._pt.r = an);
                                else if (p in E)
                                    Dn.call(this, t, p, o, m ? m + s : s);
                                else {
                                    if (!(p in t)) {
                                        lt(p, s);
                                        continue
                                    }
                                    this.add(t, p, o || t[p], m ? m + s : s, i, a)
                                }
                                M.push(p)
                            }
                    x && gr(this)
                },
                get: Ln,
                aliases: en,
                getSetter: function(t, e, r) {
                    var n = en[e];
                    return n && n.indexOf(",") < 0 && (e = n),
                    e in Yr && e !== vn && (t._gsap.x || Ln(t, "x")) ? r && Pr === r ? "scale" === e ? pn : un : (Pr = r || {}) && ("scale" === e ? dn : fn) : t.style && !W(t.style[e]) ? cn : ~e.indexOf("-") ? hn : cr(t, e)
                },
                core: {
                    _removeProperty: En,
                    _getMatrix: zn
                }
            };
            wr.utils.checkPrefix = xn,
            ti = St("x,y,z,scale,scaleX,scaleY,xPercent,yPercent" + "," + (Qn = "rotation,rotationX,rotationY,skewX,skewY") + ",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective", (function(t) {
                Yr[t] = 1
            }
            )),
            St(Qn, (function(t) {
                R.units[t] = "deg",
                Fn[t] = 1
            }
            )),
            en[ti[13]] = "x,y,z,scale,scaleX,scaleY,xPercent,yPercent," + Qn,
            St("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY", (function(t) {
                var e = t.split(":");
                en[e[1]] = ti[e[0]]
            }
            )),
            St("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective", (function(t) {
                R.units[t] = "px"
            }
            )),
            wr.registerPlugin(ei);
            var ri = wr.registerPlugin(ei) || wr
              , ni = ri.core.Tween;
            t.Back = Ur,
            t.Bounce = jr,
            t.CSSPlugin = ei,
            t.Circ = Xr,
            t.Cubic = Nr,
            t.Elastic = Hr,
            t.Expo = qr,
            t.Linear = Or,
            t.Power0 = Lr,
            t.Power1 = Dr,
            t.Power2 = Rr,
            t.Power3 = Ir,
            t.Power4 = kr,
            t.Quad = Fr,
            t.Quart = Br,
            t.Quint = zr,
            t.Sine = Wr,
            t.SteppedEase = Vr,
            t.Strong = Gr,
            t.TimelineLite = Xe,
            t.TimelineMax = Xe,
            t.TweenLite = ir,
            t.TweenMax = ni,
            t.default = ri,
            t.gsap = ri,
            "undefined" == typeof window || window !== t ? Object.defineProperty(t, "__esModule", {
                value: !0
            }) : delete window.default
        }
        ))
    }
    , {}],
    5: [function(t, e, r) {
        "use strict";
        !function(t) {
            function r() {
                this._listeners = [],
                this.dispatchCount = 0
            }
            var n = r.prototype;
            n.add = s,
            n.addOnce = function(e, r, n, o) {
                if (!e)
                    throw i;
                var l = this
                  , c = function() {
                    return l.remove.call(l, e, r),
                    e.apply(r, a.call(arguments, 0))
                };
                1 === (o = a.call(arguments, 0)).length && o.push(t),
                o.splice(2, 0, c),
                s.apply(l, o)
            }
            ,
            n.remove = function(t, e) {
                if (!t)
                    return this._listeners.length = 0,
                    !0;
                for (var r, n = this._listeners, i = n.length; i--; )
                    if ((r = n[i]).f === t && (!e || r.c === e))
                        return r.j = 0,
                        n.splice(i, 1),
                        !0;
                return !1
            }
            ,
            n.dispatch = function(t) {
                t = a.call(arguments, 0),
                this.dispatchCount++;
                for (var e, r, n = this.dispatchCount, i = this._listeners, o = i.length; o--; )
                    if ((e = i[o]) && e.j < n && (e.j = n,
                    !1 === e.r.apply(e.c, e.a.concat(t)))) {
                        r = e;
                        break
                    }
                for (o = (i = this._listeners).length; o--; )
                    i[o].j = 0;
                return r
            }
            ;
            var i = "Callback function is missing!"
              , a = Array.prototype.slice;
            function o(t) {
                t.sort((function(t, e) {
                    return t = t.p,
                    (e = e.p) < t ? 1 : t > e ? -1 : 0
                }
                ))
            }
            function s(t, e, r, n) {
                if (!t)
                    throw i;
                r = r || 0;
                for (var s, l, c, h = this._listeners, u = h.length; u--; )
                    if ((s = h[u]).f === t && s.c === e)
                        return !1;
                "function" == typeof r && (l = r,
                r = n,
                c = 4),
                h.unshift({
                    f: t,
                    c: e,
                    p: r,
                    r: l || t,
                    a: a.call(arguments, c || 3),
                    j: 0
                }),
                o(h)
            }
            "undefined" != typeof e && (e.exports = r)
        }()
    }
    , {}],
    6: [function(t, e, r) {
        "use strict";
        var n = t("./kindOf")
          , i = t("./isPlainObject")
          , a = t("../object/mixIn");
        e.exports = function(t) {
            switch (n(t)) {
            case "Object":
                return i(o = t) ? a({}, o) : o;
            case "Array":
                return t.slice();
            case "RegExp":
                return r = "",
                r += (e = t).multiline ? "m" : "",
                r += e.global ? "g" : "",
                r += e.ignoreCase ? "i" : "",
                new RegExp(e.source,r);
            case "Date":
                return new Date(+t);
            default:
                return t
            }
            var e, r, o
        }
    }
    , {
        "../object/mixIn": 20,
        "./isPlainObject": 14,
        "./kindOf": 15
    }],
    7: [function(t, e, r) {
        "use strict";
        var n = t("./clone")
          , i = t("../object/forOwn")
          , a = t("./kindOf")
          , o = t("./isPlainObject");
        e.exports = function t(e, r) {
            switch (a(e)) {
            case "Object":
                return function(e, r) {
                    if (o(e)) {
                        var n = {};
                        return i(e, (function(e, n) {
                            this[n] = t(e, r)
                        }
                        ), n),
                        n
                    }
                    return r ? r(e) : e
                }(e, r);
            case "Array":
                return function(e, r) {
                    for (var n = [], i = -1, a = e.length; ++i < a; )
                        n[i] = t(e[i], r);
                    return n
                }(e, r);
            default:
                return n(e)
            }
        }
    }
    , {
        "../object/forOwn": 17,
        "./clone": 6,
        "./isPlainObject": 14,
        "./kindOf": 15
    }],
    8: [function(t, e, r) {
        "use strict";
        var n = t("./isKind")
          , i = Array.isArray || function(t) {
            return n(t, "Array")
        }
        ;
        e.exports = i
    }
    , {
        "./isKind": 11
    }],
    9: [function(t, e, r) {
        "use strict";
        var n = t("./isKind");
        e.exports = function(t) {
            return n(t, "Boolean")
        }
    }
    , {
        "./isKind": 11
    }],
    10: [function(t, e, r) {
        "use strict";
        var n = t("./isNumber");
        e.exports = function(t) {
            return n(t) && t % 1 == 0
        }
    }
    , {
        "./isNumber": 12
    }],
    11: [function(t, e, r) {
        "use strict";
        var n = t("./kindOf");
        e.exports = function(t, e) {
            return n(t) === e
        }
    }
    , {
        "./kindOf": 15
    }],
    12: [function(t, e, r) {
        "use strict";
        var n = t("./isKind");
        e.exports = function(t) {
            return n(t, "Number")
        }
    }
    , {
        "./isKind": 11
    }],
    13: [function(t, e, r) {
        "use strict";
        var n = t("./isKind");
        e.exports = function(t) {
            return n(t, "Object")
        }
    }
    , {
        "./isKind": 11
    }],
    14: [function(t, e, r) {
        "use strict";
        function n(t) {
            return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            }
            : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            }
            ,
            n(t)
        }
        e.exports = function(t) {
            return !!t && "object" === n(t) && t.constructor === Object
        }
    }
    , {}],
    15: [function(t, e, r) {
        "use strict";
        e.exports = function(t) {
            return Object.prototype.toString.call(t).slice(8, -1)
        }
    }
    , {}],
    16: [function(t, e, r) {
        "use strict";
        var n, i, a = t("./hasOwn");
        function o(t, e, r, n) {
            return t.call(n, e[r], r, e)
        }
        e.exports = function(t, e, r) {
            var s, l = 0;
            for (s in null == n && function() {
                for (var t in i = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
                n = !0,
                {
                    toString: null
                })
                    n = !1
            }(),
            t)
                if (!1 === o(e, t, s, r))
                    break;
            if (n)
                for (var c = t.constructor, h = !!c && t === c.prototype; (s = i[l++]) && ("constructor" === s && (h || !a(t, s)) || t[s] === Object.prototype[s] || !1 !== o(e, t, s, r)); )
                    ;
        }
    }
    , {
        "./hasOwn": 18
    }],
    17: [function(t, e, r) {
        "use strict";
        var n = t("./hasOwn")
          , i = t("./forIn");
        e.exports = function(t, e, r) {
            i(t, (function(i, a) {
                if (n(t, a))
                    return e.call(r, t[a], a, t)
            }
            ))
        }
    }
    , {
        "./forIn": 16,
        "./hasOwn": 18
    }],
    18: [function(t, e, r) {
        "use strict";
        e.exports = function(t, e) {
            return Object.prototype.hasOwnProperty.call(t, e)
        }
    }
    , {}],
    19: [function(t, e, r) {
        "use strict";
        var n = t("./hasOwn")
          , i = t("../lang/deepClone")
          , a = t("../lang/isObject");
        e.exports = function t() {
            var e, r, o, s, l = 1;
            for (s = i(arguments[0]); o = arguments[l++]; )
                for (e in o)
                    n(o, e) && (r = o[e],
                    a(r) && a(s[e]) ? s[e] = t(s[e], r) : s[e] = i(r));
            return s
        }
    }
    , {
        "../lang/deepClone": 7,
        "../lang/isObject": 13,
        "./hasOwn": 18
    }],
    20: [function(t, e, r) {
        "use strict";
        var n = t("./forOwn");
        function i(t, e) {
            this[e] = t
        }
        e.exports = function(t, e) {
            for (var r, a = 0, o = arguments.length; ++a < o; )
                null != (r = arguments[a]) && n(r, i, t);
            return t
        }
    }
    , {
        "./forOwn": 17
    }],
    21: [function(t, e, r) {
        "use strict";
        var n = t("../string/typecast")
          , i = t("../lang/isArray")
          , a = t("../object/hasOwn");
        e.exports = function(t, e) {
            for (var r, o, s, l, c = (t || "").replace("?", "").split("&"), h = -1, u = {}; o = c[++h]; )
                r = o.indexOf("="),
                l = o.substring(0, r),
                s = decodeURIComponent(o.substring(r + 1)),
                !1 !== e && (s = n(s)),
                a(u, l) ? i(u[l]) ? u[l].push(s) : u[l] = [u[l], s] : u[l] = s;
            return u
        }
    }
    , {
        "../lang/isArray": 8,
        "../object/hasOwn": 18,
        "../string/typecast": 24
    }],
    22: [function(t, e, r) {
        "use strict";
        e.exports = function(t) {
            var e = /\?[a-zA-Z0-9\=\&\%\$\-\_\.\+\!\*\'\(\)\,]+/.exec(t);
            return e ? decodeURIComponent(e[0].replace(/\+/g, " ")) : ""
        }
    }
    , {}],
    23: [function(t, e, r) {
        "use strict";
        var n = t("./decode")
          , i = t("./getQuery");
        e.exports = function(t, e) {
            return n(i(t), e)
        }
    }
    , {
        "./decode": 21,
        "./getQuery": 22
    }],
    24: [function(t, e, r) {
        "use strict";
        var n;
        e.exports = function(t) {
            return null === t || "null" === t ? null : "true" === t || "false" !== t && (t === n || "undefined" === t ? n : "" === t || isNaN(t) ? t : parseFloat(t))
        }
    }
    , {}],
    25: [function(t, e, r) {
        "use strict";
        e.exports = t("./src/quickLoader"),
        t("./src/types/JSONPItem"),
        t("./src/types/JSONItem"),
        t("./src/types/TextItem"),
        t("./src/types/AudioItem"),
        t("./src/types/VideoItem"),
        t("./src/types/AnyItem"),
        t("./src/types/ImageItem"),
        t("./src/types/XHRItem")
    }
    , {
        "./src/quickLoader": 27,
        "./src/types/AnyItem": 29,
        "./src/types/AudioItem": 30,
        "./src/types/ImageItem": 31,
        "./src/types/JSONItem": 32,
        "./src/types/JSONPItem": 33,
        "./src/types/TextItem": 34,
        "./src/types/VideoItem": 35,
        "./src/types/XHRItem": 36
    }],
    26: [function(t, e, r) {
        arguments[4][5][0].apply(r, arguments)
    }
    , {
        dup: 5
    }],
    27: [function(t, e, r) {
        "use strict";
        var n, i = t("min-signal");
        function a() {
            this.isLoading = !1,
            this.totalWeight = 0,
            this.loadedWeight = 0,
            this.itemUrls = {},
            this.itemList = [],
            this.loadingSignal = new i,
            this.crossOriginMap = {},
            this.queue = [],
            this.activeItems = [],
            this.maxActiveItems = 4
        }
        var o = a.prototype;
        o.addChunk = function(t, e) {
            var r, n, i, a, o, s = m(t, e);
            for (r = 0,
            i = s.length; r < i; r++)
                for (n = 0,
                a = (o = s[r]).items.length; n < a; n++)
                    this.add(o.items[n], {
                        type: o.type
                    });
            return s
        }
        ,
        o.setCrossOrigin = function(t, e) {
            this.crossOriginMap[t] = e
        }
        ,
        o.add = function(t, e) {
            var r = s[t];
            return r || (r = this._createItem(t, e && e.type ? e.type : v(t).type, e)),
            e && e.onLoad && r.onLoaded.addOnce(e.onLoad),
            this.itemUrls[t] || (this.itemUrls[t] = r,
            this.itemList.push(r),
            this.totalWeight += r.weight),
            r
        }
        ,
        o.load = function(t, e) {
            var r = s[t];
            return r || (r = this._createItem(t, e && e.type ? e.type : v(t).type, e)),
            e && e.onLoad && r.onLoaded.addOnce(e.onLoad),
            l[t] ? r.dispatch() : r.isStartLoaded || r.load(),
            r
        }
        ,
        o.start = function(t) {
            t && this.loadingSignal.add(t),
            this.isLoading = !0;
            var e = this.itemList.length;
            if (e) {
                var r, i = this.itemList.splice(0, this.itemList.length);
                for (var a in this.itemUrls)
                    delete this.itemUrls[a];
                for (var o = 0; o < e; o++) {
                    r = i[o];
                    var s = !!l[r.url];
                    r.onLoaded.addOnce(d, this, -1024, r, i, s),
                    r.hasLoading && r.loadingSignal.add(u, this, -1024, r, i, n),
                    s ? r.dispatch(d) : r.isStartLoaded || this.queue.push(r)
                }
                this.queue.length && this.loadNext()
            } else
                d.call(this, n, this.itemList)
        }
        ,
        o.loadNext = function() {
            if (this.queue.length && this.activeItems.length < this.maxActiveItems) {
                var t = this.queue.shift();
                this.activeItems.push(t),
                this.loadNext(),
                t.load()
            }
        }
        ,
        o._createItem = function(t, e, r) {
            if (!(r = r || {}).crossOrigin)
                for (var n in this.crossOriginMap)
                    if (0 === t.indexOf(n)) {
                        r.crossOrigin = this.crossOriginMap[n];
                        break
                    }
            return new h[e](t,r)
        }
        ,
        o._onLoading = u,
        o.VERSION = "0.1.17",
        o.register = function(t) {
            h[t.type] || (c.push(t),
            h[t.type] = t)
        }
        ,
        o.retrieveAll = m,
        o.retrieve = v,
        o.testExtensions = g,
        o.create = y,
        o.check = function() {
            var t = []
              , e = [];
            for (var r in s)
                t.push(r),
                l[r] || e.push(s[r]);
            console.log({
                added: t,
                notLoaded: e
            })
        }
        ;
        var s = o.addedItems = {}
          , l = o.loadedItems = {}
          , c = o.ITEM_CLASS_LIST = []
          , h = o.ITEM_CLASSES = {};
        function u(t, e, r, i, a) {
            t && !t.isLoaded && 1 === t.getCombinedPercent(i) || (a === n && (this.loadedWeight = p(e),
            a = this.loadedWeight / this.totalWeight),
            (r = r || this.loadingSignal).dispatch(a, t))
        }
        function p(t) {
            for (var e = 0, r = 0, n = t.length; r < n; r++)
                e += t[r].loadedWeight;
            return e
        }
        function d(t, e, r) {
            if (this.loadedWeight = p(e),
            !r)
                for (var n = this.activeItems, a = n.length; a--; )
                    if (n[a] === t) {
                        n.splice(a, 1);
                        break
                    }
            var o = this.loadingSignal;
            this.loadedWeight === this.totalWeight ? (this.isLoading = !1,
            this.loadedWeight = 0,
            this.totalWeight = 0,
            this.loadingSignal = new i,
            this._onLoading(t, e, o, 1, 1),
            t && t.noCache && f(t)) : (this._onLoading(t, e, o, 1, this.loadedWeight / this.totalWeight),
            t && t.noCache && f(t),
            r || this.loadNext())
        }
        function f(t) {
            var e = t.url;
            t.content = n,
            s[e] = n,
            l[e] = n
        }
        function m(t, e) {
            var r, n, i = t.length, a = [];
            if (i && "string" != typeof t)
                for (r = 0; r < i; r++)
                    (n = v(t[r], e)) && (a = a.concat(n));
            else
                (n = v(t, e)) && (a = a.concat(n));
            return a
        }
        function v(t, e) {
            var r, i, a, o, s;
            if (e)
                a = (o = h[e]).retrieve(t);
            else
                for (r = 0,
                i = c.length; r < i; r++) {
                    if (s = (o = c[r]).type,
                    "string" == typeof t) {
                        if (g(t, o)) {
                            a = [t];
                            break
                        }
                    } else if ((a = o.retrieve(t)) && a.length && "string" == typeof a[0] && g(a[0], o))
                        break;
                    a = n,
                    s = n
                }
            if (a)
                return {
                    type: e || s,
                    items: a
                }
        }
        function g(t, e) {
            if (t) {
                for (var r = function(t) {
                    return t.split(".").pop().split(/#|\?/)[0]
                }(t), n = e.extensions, i = n.length; i--; )
                    if (r === n[i])
                        return !0;
                return !1
            }
        }
        function y() {
            return new a
        }
        e.exports = y()
    }
    , {
        "min-signal": 26
    }],
    28: [function(t, e, r) {
        "use strict";
        var n = t("min-signal")
          , i = t("../quickLoader");
        function a(t, e) {
            if (t) {
                for (var r in this.url = t,
                this.loadedWeight = 0,
                this.weight = 1,
                this.postPercent = 0,
                e)
                    this[r] = e[r];
                this.type || (this.type = this.constructor.type),
                this.hasLoading && (this.loadingSignal = new n,
                this.loadingSignal.add(s, this),
                this.onLoading && this.loadingSignal.add(this.onLoading)),
                this.onPost ? (this.onPostLoadingSignal = new n,
                this.onPostLoadingSignal.add(this._onPostLoading, this),
                this.postWeightRatio = this.postWeightRatio || .1) : this.postWeightRatio = 0;
                var a = this;
                this.boundOnLoad = function() {
                    a._onLoad()
                }
                ,
                this.onLoaded = new n,
                i.addedItems[t] = this
            }
        }
        e.exports = a;
        var o = a.prototype;
        function s(t) {
            this.loadedWeight = this.weight * this.getCombinedPercent(t)
        }
        o.load = function() {
            this.isStartLoaded = !0
        }
        ,
        o._onLoad = function() {
            this.onPost ? this.onPost.call(this, this.content, this.onPostLoadingSignal) : this._onLoadComplete()
        }
        ,
        o._onLoading = s,
        o._onPostLoading = function(t) {
            this.postPercent = t,
            this.hasLoading && this.loadingSignal.dispatch(1),
            1 === t && this._onLoadComplete()
        }
        ,
        o._onLoadComplete = function() {
            this.isLoaded = !0,
            this.loadedWeight = this.weight,
            i.loadedItems[this.url] = this,
            this.onLoaded.dispatch(this.content)
        }
        ,
        o.getCombinedPercent = function(t) {
            return t * (1 - this.postWeightRatio) + this.postWeightRatio * this.postPercent
        }
        ,
        o.dispatch = function() {
            this.hasLoading && this.loadingSignal.remove(),
            this.onLoaded.dispatch(this.content)
        }
        ,
        a.extensions = [],
        a.retrieve = function() {
            return !1
        }
    }
    , {
        "../quickLoader": 27,
        "min-signal": 26
    }],
    29: [function(t, e, r) {
        "use strict";
        var n = t("./AbstractItem")
          , i = t("../quickLoader");
        function a(t, e) {
            t && (o.constructor.call(this, t, e),
            !this.loadFunc && console && console[console.error || console.log]("require loadFunc in the config object."))
        }
        e.exports = a,
        a.type = "any",
        a.extensions = [],
        i.register(a),
        a.retrieve = function() {
            return !1
        }
        ;
        var o = n.prototype
          , s = a.prototype = new n;
        s.constructor = a,
        s.load = function() {
            var t = this;
            this.loadFunc(this.url, (function(e) {
                t.content = e,
                o._onLoad.call(t)
            }
            ), this.loadingSignal)
        }
    }
    , {
        "../quickLoader": 27,
        "./AbstractItem": 28
    }],
    30: [function(t, e, r) {
        "use strict";
        var n, i = t("./AbstractItem"), a = t("../quickLoader");
        function o(t, e) {
            if (t) {
                this.loadThrough = !e || e.loadThrough === n || e.loadThrough,
                s.constructor.apply(this, arguments);
                try {
                    this.content = this.content || new Audio
                } catch (t) {
                    this.content = this.content || document.createElement("audio")
                }
                this.crossOrigin && (this.content.crossOrigin = this.crossOrigin)
            }
        }
        e.exports = o,
        o.type = "audio",
        o.extensions = ["mp3", "ogg"],
        a.register(o),
        o.retrieve = function(t) {
            return !1
        }
        ;
        var s = i.prototype
          , l = o.prototype = new i;
        l.constructor = o,
        l.load = function() {
            s.load.apply(this, arguments);
            var t = this
              , e = t.content;
            e.src = this.url,
            this.loadThrough ? e.addEventListener("canplaythrough", this.boundOnLoad, !1) : e.addEventListener("canplay", this.boundOnLoad, !1),
            e.load()
        }
        ,
        l._onLoad = function() {
            this.content.removeEventListener("canplaythrough", this.boundOnLoad, !1),
            this.content.removeEventListener("canplay", this.boundOnLoad, !1),
            this.isLoaded || s._onLoad.call(this)
        }
    }
    , {
        "../quickLoader": 27,
        "./AbstractItem": 28
    }],
    31: [function(t, e, r) {
        "use strict";
        var n = t("./AbstractItem")
          , i = t("computed-style")
          , a = t("../quickLoader");
        function o(t, e) {
            t && (s.constructor.apply(this, arguments),
            this.content = this.content || new Image,
            this.crossOrigin && (this.content.crossOrigin = this.crossOrigin))
        }
        e.exports = o;
        var s = n.prototype
          , l = o.prototype = new n;
        l.constructor = o,
        l.load = function() {
            s.load.apply(this, arguments);
            var t = this.content;
            t.onload = this.boundOnLoad,
            t.src = this.url
        }
        ,
        l._onLoad = function() {
            delete this.content.onload,
            this.width = this.content.width,
            this.height = this.content.height,
            s._onLoad.call(this)
        }
        ,
        o.retrieve = function(t) {
            if (t.nodeType && t.style) {
                var e = [];
                "img" === t.nodeName.toLowerCase() && t.src.indexOf(";") < 0 && e.push(t.src),
                i(t, "background-image").replace(/s?url\(\s*?['"]?([^;]*?)['"]?\s*?\)/g, (function(t, r) {
                    e.push(r)
                }
                ));
                for (var r = e.length; r--; )
                    0 === e[r].indexOf("data:") && e.splice(r, 1);
                return !!e.length && e
            }
            return "string" == typeof t && [t]
        }
        ,
        o.type = "image",
        o.extensions = ["jpg", "gif", "png"],
        a.register(o)
    }
    , {
        "../quickLoader": 27,
        "./AbstractItem": 28,
        "computed-style": 2
    }],
    32: [function(require, module, exports) {
        "use strict";
        var TextItem = require("./TextItem")
          , quickLoader = require("../quickLoader");
        function JSONItem(t) {
            t && _super.constructor.apply(this, arguments)
        }
        module.exports = JSONItem,
        JSONItem.type = "json",
        JSONItem.extensions = ["json"],
        quickLoader.register(JSONItem),
        JSONItem.retrieve = function() {
            return !1
        }
        ;
        var _super = TextItem.prototype
          , _p = JSONItem.prototype = new TextItem;
        function _onLoad() {
            this.content || (this.content = window.JSON && window.JSON.parse ? JSON.parse(this.xmlhttp.responseText.toString()) : eval(this.xmlhttp.responseText.toString())),
            _super._onLoad.call(this)
        }
        _p.constructor = JSONItem,
        _p._onLoad = _onLoad
    }
    , {
        "../quickLoader": 27,
        "./TextItem": 34
    }],
    33: [function(t, e, r) {
        "use strict";
        var n = t("./AbstractItem")
          , i = t("../quickLoader");
        function a() {
            return "_jsonp" + (new Date).getTime() + ~~(1e8 * Math.random())
        }
        function o(t) {
            t && s.constructor.apply(this, arguments)
        }
        e.exports = o,
        o.type = "jsonp",
        o.extensions = [],
        i.register(o),
        o.retrieve = function(t) {
            return "string" == typeof t && t.indexOf("=") > -1 && [t]
        }
        ;
        var s = n.prototype
          , l = o.prototype = new n;
        l.constructor = o,
        l.load = function(t) {
            s.load.apply(this, arguments);
            var e = this
              , r = this.url.lastIndexOf("=") + 1
              , n = this.url.substr(0, r)
              , i = this.url.substr(r);
            0 === i.length ? (i = a(),
            this.jsonpCallback = t) : this.jsonpCallback = this.jsonpCallback || window[i],
            window[i] = function(t) {
                o.parentNode && o.parentNode.removeChild(o),
                e.content = t,
                e._onLoad()
            }
            ;
            var o = document.createElement("script");
            o.type = "text/javascript",
            o.src = n + i,
            document.getElementsByTagName("head")[0].appendChild(o)
        }
    }
    , {
        "../quickLoader": 27,
        "./AbstractItem": 28
    }],
    34: [function(t, e, r) {
        "use strict";
        var n = t("./XHRItem")
          , i = t("../quickLoader");
        function a(t, e) {
            t && (e.responseType = "text",
            o.constructor.apply(this, arguments))
        }
        e.exports = a,
        a.type = "text",
        a.extensions = ["html", "txt", "svg"],
        i.register(a),
        a.retrieve = function() {
            return !1
        }
        ;
        var o = n.prototype
          , s = a.prototype = new n;
        s.constructor = a,
        s._onLoad = function() {
            this.content || (this.content = this.xmlhttp.responseText),
            o._onLoad.apply(this, arguments)
        }
    }
    , {
        "../quickLoader": 27,
        "./XHRItem": 36
    }],
    35: [function(t, e, r) {
        "use strict";
        var n, i = t("./AbstractItem"), a = t("../quickLoader");
        function o(t, e) {
            if (t) {
                this.loadThrough = !e || e.loadThrough === n || e.loadThrough,
                s.constructor.apply(this, arguments);
                try {
                    this.content = this.content || new Video
                } catch (t) {
                    this.content = this.content || document.createElement("video")
                }
                this.crossOrigin && (this.content.crossOrigin = this.crossOrigin)
            }
        }
        e.exports = o,
        o.type = "video",
        o.extensions = ["mp4", "webm", "ogv"],
        a.register(o),
        o.retrieve = function(t) {
            return !1
        }
        ;
        var s = i.prototype
          , l = o.prototype = new i;
        l.constructor = o,
        l.load = function() {
            s.load.apply(this, arguments);
            var t = this.content;
            t.preload = "auto",
            t.src = this.url,
            this.loadThrough ? t.addEventListener("canplaythrough", this.boundOnLoad, !1) : t.addEventListener("canplay", this.boundOnLoad, !1),
            t.load()
        }
        ,
        l._onLoad = function() {
            this.content.removeEventListener("canplaythrough", this.boundOnLoad),
            this.content.removeEventListener("canplay", this.boundOnLoad),
            this.isLoaded || s._onLoad.call(this)
        }
    }
    , {
        "../quickLoader": 27,
        "./AbstractItem": 28
    }],
    36: [function(t, e, r) {
        "use strict";
        var n = t("./AbstractItem")
          , i = t("../quickLoader")
          , a = !!window.XMLHttpRequest;
        function o(t) {
            t && (s.constructor.apply(this, arguments),
            this.responseType = this.responseType || "",
            this.method = this.method || "GET")
        }
        e.exports = o,
        o.type = "xhr",
        o.extensions = [],
        i.register(o),
        o.retrieve = function() {
            return !1
        }
        ;
        var s = n.prototype
          , l = o.prototype = new n;
        l.constructor = o,
        l.load = function() {
            s.load.apply(this, arguments);
            var t, e = this;
            t = this.xmlhttp = a ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP"),
            this.hasLoading && (t.onprogress = function(t) {
                e._onXmlHttpProgress(t)
            }
            ),
            t.onreadystatechange = function() {
                e._onXmlHttpChange()
            }
            ,
            t.open(this.method, this.url, !0),
            this.xmlhttp.responseType = this.responseType,
            a ? t.send(null) : t.send()
        }
        ,
        l._onXmlHttpChange = function() {
            4 === this.xmlhttp.readyState && 200 === this.xmlhttp.status && this._onLoad(this.xmlhttp)
        }
        ,
        l._onXmlHttpProgress = function(t) {
            this.loadingSignal.dispatch(t.loaded / t.total)
        }
        ,
        l._onLoad = function() {
            this.content || (this.content = this.xmlhttp.response),
            this.xmlhttp = void 0,
            s._onLoad.call(this)
        }
    }
    , {
        "../quickLoader": 27,
        "./AbstractItem": 28
    }],
    37: [function(t, e, r) {
        "use strict";
        function n(t) {
            return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            }
            : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            }
            ,
            n(t)
        }
        var i = function(t) {
            var e, r = Object.prototype, i = r.hasOwnProperty, a = "function" == typeof Symbol ? Symbol : {}, o = a.iterator || "@@iterator", s = a.asyncIterator || "@@asyncIterator", l = a.toStringTag || "@@toStringTag";
            function c(t, e, r) {
                return Object.defineProperty(t, e, {
                    value: r,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }),
                t[e]
            }
            try {
                c({}, "")
            } catch (t) {
                c = function(t, e, r) {
                    return t[e] = r
                }
            }
            function h(t, e, r, n) {
                var i = e && e.prototype instanceof g ? e : g
                  , a = Object.create(i.prototype)
                  , o = new C(n || []);
                return a._invoke = function(t, e, r) {
                    var n = p;
                    return function(i, a) {
                        if (n === f)
                            throw new Error("Generator is already running");
                        if (n === m) {
                            if ("throw" === i)
                                throw a;
                            return D()
                        }
                        for (r.method = i,
                        r.arg = a; ; ) {
                            var o = r.delegate;
                            if (o) {
                                var s = E(o, r);
                                if (s) {
                                    if (s === v)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === r.method)
                                r.sent = r._sent = r.arg;
                            else if ("throw" === r.method) {
                                if (n === p)
                                    throw n = m,
                                    r.arg;
                                r.dispatchException(r.arg)
                            } else
                                "return" === r.method && r.abrupt("return", r.arg);
                            n = f;
                            var l = u(t, e, r);
                            if ("normal" === l.type) {
                                if (n = r.done ? m : d,
                                l.arg === v)
                                    continue;
                                return {
                                    value: l.arg,
                                    done: r.done
                                }
                            }
                            "throw" === l.type && (n = m,
                            r.method = "throw",
                            r.arg = l.arg)
                        }
                    }
                }(t, r, o),
                a
            }
            function u(t, e, r) {
                try {
                    return {
                        type: "normal",
                        arg: t.call(e, r)
                    }
                } catch (t) {
                    return {
                        type: "throw",
                        arg: t
                    }
                }
            }
            t.wrap = h;
            var p = "suspendedStart"
              , d = "suspendedYield"
              , f = "executing"
              , m = "completed"
              , v = {};
            function g() {}
            function y() {}
            function _() {}
            var x = {};
            c(x, o, (function() {
                return this
            }
            ));
            var b = Object.getPrototypeOf
              , w = b && b(b(L([])));
            w && w !== r && i.call(w, o) && (x = w);
            var S = _.prototype = g.prototype = Object.create(x);
            function T(t) {
                ["next", "throw", "return"].forEach((function(e) {
                    c(t, e, (function(t) {
                        return this._invoke(e, t)
                    }
                    ))
                }
                ))
            }
            function M(t, e) {
                function r(a, o, s, l) {
                    var c = u(t[a], t, o);
                    if ("throw" !== c.type) {
                        var h = c.arg
                          , p = h.value;
                        return p && "object" === n(p) && i.call(p, "__await") ? e.resolve(p.__await).then((function(t) {
                            r("next", t, s, l)
                        }
                        ), (function(t) {
                            r("throw", t, s, l)
                        }
                        )) : e.resolve(p).then((function(t) {
                            h.value = t,
                            s(h)
                        }
                        ), (function(t) {
                            return r("throw", t, s, l)
                        }
                        ))
                    }
                    l(c.arg)
                }
                var a;
                this._invoke = function(t, n) {
                    function i() {
                        return new e((function(e, i) {
                            r(t, n, e, i)
                        }
                        ))
                    }
                    return a = a ? a.then(i, i) : i()
                }
            }
            function E(t, r) {
                var n = t.iterator[r.method];
                if (n === e) {
                    if (r.delegate = null,
                    "throw" === r.method) {
                        if (t.iterator.return && (r.method = "return",
                        r.arg = e,
                        E(t, r),
                        "throw" === r.method))
                            return v;
                        r.method = "throw",
                        r.arg = new TypeError("The iterator does not provide a 'throw' method")
                    }
                    return v
                }
                var i = u(n, t.iterator, r.arg);
                if ("throw" === i.type)
                    return r.method = "throw",
                    r.arg = i.arg,
                    r.delegate = null,
                    v;
                var a = i.arg;
                return a ? a.done ? (r[t.resultName] = a.value,
                r.next = t.nextLoc,
                "return" !== r.method && (r.method = "next",
                r.arg = e),
                r.delegate = null,
                v) : a : (r.method = "throw",
                r.arg = new TypeError("iterator result is not an object"),
                r.delegate = null,
                v)
            }
            function A(t) {
                var e = {
                    tryLoc: t[0]
                };
                1 in t && (e.catchLoc = t[1]),
                2 in t && (e.finallyLoc = t[2],
                e.afterLoc = t[3]),
                this.tryEntries.push(e)
            }
            function P(t) {
                var e = t.completion || {};
                e.type = "normal",
                delete e.arg,
                t.completion = e
            }
            function C(t) {
                this.tryEntries = [{
                    tryLoc: "root"
                }],
                t.forEach(A, this),
                this.reset(!0)
            }
            function L(t) {
                if (t) {
                    var r = t[o];
                    if (r)
                        return r.call(t);
                    if ("function" == typeof t.next)
                        return t;
                    if (!isNaN(t.length)) {
                        var n = -1
                          , a = function r() {
                            for (; ++n < t.length; )
                                if (i.call(t, n))
                                    return r.value = t[n],
                                    r.done = !1,
                                    r;
                            return r.value = e,
                            r.done = !0,
                            r
                        };
                        return a.next = a
                    }
                }
                return {
                    next: D
                }
            }
            function D() {
                return {
                    value: e,
                    done: !0
                }
            }
            return y.prototype = _,
            c(S, "constructor", _),
            c(_, "constructor", y),
            y.displayName = c(_, l, "GeneratorFunction"),
            t.isGeneratorFunction = function(t) {
                var e = "function" == typeof t && t.constructor;
                return !!e && (e === y || "GeneratorFunction" === (e.displayName || e.name))
            }
            ,
            t.mark = function(t) {
                return Object.setPrototypeOf ? Object.setPrototypeOf(t, _) : (t.__proto__ = _,
                c(t, l, "GeneratorFunction")),
                t.prototype = Object.create(S),
                t
            }
            ,
            t.awrap = function(t) {
                return {
                    __await: t
                }
            }
            ,
            T(M.prototype),
            c(M.prototype, s, (function() {
                return this
            }
            )),
            t.AsyncIterator = M,
            t.async = function(e, r, n, i, a) {
                void 0 === a && (a = Promise);
                var o = new M(h(e, r, n, i),a);
                return t.isGeneratorFunction(r) ? o : o.next().then((function(t) {
                    return t.done ? t.value : o.next()
                }
                ))
            }
            ,
            T(S),
            c(S, l, "Generator"),
            c(S, o, (function() {
                return this
            }
            )),
            c(S, "toString", (function() {
                return "[object Generator]"
            }
            )),
            t.keys = function(t) {
                var e = [];
                for (var r in t)
                    e.push(r);
                return e.reverse(),
                function r() {
                    for (; e.length; ) {
                        var n = e.pop();
                        if (n in t)
                            return r.value = n,
                            r.done = !1,
                            r
                    }
                    return r.done = !0,
                    r
                }
            }
            ,
            t.values = L,
            C.prototype = {
                constructor: C,
                reset: function(t) {
                    if (this.prev = 0,
                    this.next = 0,
                    this.sent = this._sent = e,
                    this.done = !1,
                    this.delegate = null,
                    this.method = "next",
                    this.arg = e,
                    this.tryEntries.forEach(P),
                    !t)
                        for (var r in this)
                            "t" === r.charAt(0) && i.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = e)
                },
                stop: function() {
                    this.done = !0;
                    var t = this.tryEntries[0].completion;
                    if ("throw" === t.type)
                        throw t.arg;
                    return this.rval
                },
                dispatchException: function(t) {
                    if (this.done)
                        throw t;
                    var r = this;
                    function n(n, i) {
                        return s.type = "throw",
                        s.arg = t,
                        r.next = n,
                        i && (r.method = "next",
                        r.arg = e),
                        !!i
                    }
                    for (var a = this.tryEntries.length - 1; a >= 0; --a) {
                        var o = this.tryEntries[a]
                          , s = o.completion;
                        if ("root" === o.tryLoc)
                            return n("end");
                        if (o.tryLoc <= this.prev) {
                            var l = i.call(o, "catchLoc")
                              , c = i.call(o, "finallyLoc");
                            if (l && c) {
                                if (this.prev < o.catchLoc)
                                    return n(o.catchLoc, !0);
                                if (this.prev < o.finallyLoc)
                                    return n(o.finallyLoc)
                            } else if (l) {
                                if (this.prev < o.catchLoc)
                                    return n(o.catchLoc, !0)
                            } else {
                                if (!c)
                                    throw new Error("try statement without catch or finally");
                                if (this.prev < o.finallyLoc)
                                    return n(o.finallyLoc)
                            }
                        }
                    }
                },
                abrupt: function(t, e) {
                    for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                        var n = this.tryEntries[r];
                        if (n.tryLoc <= this.prev && i.call(n, "finallyLoc") && this.prev < n.finallyLoc) {
                            var a = n;
                            break
                        }
                    }
                    a && ("break" === t || "continue" === t) && a.tryLoc <= e && e <= a.finallyLoc && (a = null);
                    var o = a ? a.completion : {};
                    return o.type = t,
                    o.arg = e,
                    a ? (this.method = "next",
                    this.next = a.finallyLoc,
                    v) : this.complete(o)
                },
                complete: function(t, e) {
                    if ("throw" === t.type)
                        throw t.arg;
                    return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg,
                    this.method = "return",
                    this.next = "end") : "normal" === t.type && e && (this.next = e),
                    v
                },
                finish: function(t) {
                    for (var e = this.tryEntries.length - 1; e >= 0; --e) {
                        var r = this.tryEntries[e];
                        if (r.finallyLoc === t)
                            return this.complete(r.completion, r.afterLoc),
                            P(r),
                            v
                    }
                },
                catch: function(t) {
                    for (var e = this.tryEntries.length - 1; e >= 0; --e) {
                        var r = this.tryEntries[e];
                        if (r.tryLoc === t) {
                            var n = r.completion;
                            if ("throw" === n.type) {
                                var i = n.arg;
                                P(r)
                            }
                            return i
                        }
                    }
                    throw new Error("illegal catch attempt")
                },
                delegateYield: function(t, r, n) {
                    return this.delegate = {
                        iterator: L(t),
                        resultName: r,
                        nextLoc: n
                    },
                    "next" === this.method && (this.arg = e),
                    v
                }
            },
            t
        }("object" === ("undefined" == typeof e ? "undefined" : n(e)) ? e.exports : {});
        try {
            regeneratorRuntime = i
        } catch (t) {
            "object" === ("undefined" == typeof globalThis ? "undefined" : n(globalThis)) ? globalThis.regeneratorRuntime = i : Function("r", "regeneratorRuntime = r")(i)
        }
    }
    , {}],
    38: [function(t, e, r) {
        "use strict";
        function n(t) {
            return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            }
            : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            }
            ,
            n(t)
        }
        !function(t, i) {
            "object" === ("undefined" == typeof r ? "undefined" : n(r)) && "undefined" != typeof e ? i(r) : "function" == typeof define && define.amd ? define(["exports"], i) : i((t = "undefined" != typeof globalThis ? globalThis : t || self).THREE = {})
        }(void 0, (function(t) {
            void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)),
            void 0 === Number.isInteger && (Number.isInteger = function(t) {
                return "number" == typeof t && isFinite(t) && Math.floor(t) === t
            }
            ),
            void 0 === Math.sign && (Math.sign = function(t) {
                return t < 0 ? -1 : t > 0 ? 1 : +t
            }
            ),
            "name"in Function.prototype == 0 && Object.defineProperty(Function.prototype, "name", {
                get: function() {
                    return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]
                }
            }),
            void 0 === Object.assign && (Object.assign = function(t) {
                if (null == t)
                    throw new TypeError("Cannot convert undefined or null to object");
                for (var e = Object(t), r = 1; r < arguments.length; r++) {
                    var n = arguments[r];
                    if (null != n)
                        for (var i in n)
                            Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            }
            );
            var e = 100
              , r = 300
              , i = 301
              , a = 302
              , o = 303
              , s = 304
              , l = 306
              , c = 307
              , h = 1e3
              , u = 1001
              , p = 1002
              , d = 1003
              , f = 1004
              , m = 1005
              , v = 1006
              , g = 1008
              , y = 1009
              , _ = 1012
              , x = 1014
              , b = 1015
              , w = 1016
              , S = 1020
              , T = 1022
              , M = 1023
              , E = 1026
              , A = 1027
              , P = 33776
              , C = 33777
              , L = 33778
              , D = 33779
              , R = 35840
              , I = 35841
              , k = 35842
              , O = 35843
              , F = 37492
              , N = 37496
              , B = 2300
              , z = 2301
              , G = 2302
              , H = 2400
              , U = 2401
              , V = 2402
              , j = 2500
              , W = 2501
              , q = 3e3
              , X = 3001
              , Y = 3007
              , $ = 3002
              , K = 7680
              , Z = 35044
              , J = 35048
              , Q = "300 es";
            function tt() {}
            Object.assign(tt.prototype, {
                addEventListener: function(t, e) {
                    void 0 === this._listeners && (this._listeners = {});
                    var r = this._listeners;
                    void 0 === r[t] && (r[t] = []),
                    -1 === r[t].indexOf(e) && r[t].push(e)
                },
                hasEventListener: function(t, e) {
                    if (void 0 === this._listeners)
                        return !1;
                    var r = this._listeners;
                    return void 0 !== r[t] && -1 !== r[t].indexOf(e)
                },
                removeEventListener: function(t, e) {
                    if (void 0 !== this._listeners) {
                        var r = this._listeners[t];
                        if (void 0 !== r) {
                            var n = r.indexOf(e);
                            -1 !== n && r.splice(n, 1)
                        }
                    }
                },
                dispatchEvent: function(t) {
                    if (void 0 !== this._listeners) {
                        var e = this._listeners[t.type];
                        if (void 0 !== e) {
                            t.target = this;
                            for (var r = e.slice(0), n = 0, i = r.length; n < i; n++)
                                r[n].call(this, t)
                        }
                    }
                }
            });
            for (var et = [], rt = 0; rt < 256; rt++)
                et[rt] = (rt < 16 ? "0" : "") + rt.toString(16);
            var nt = 1234567
              , it = {
                DEG2RAD: Math.PI / 180,
                RAD2DEG: 180 / Math.PI,
                generateUUID: function() {
                    var t = 4294967295 * Math.random() | 0
                      , e = 4294967295 * Math.random() | 0
                      , r = 4294967295 * Math.random() | 0
                      , n = 4294967295 * Math.random() | 0;
                    return (et[255 & t] + et[t >> 8 & 255] + et[t >> 16 & 255] + et[t >> 24 & 255] + "-" + et[255 & e] + et[e >> 8 & 255] + "-" + et[e >> 16 & 15 | 64] + et[e >> 24 & 255] + "-" + et[63 & r | 128] + et[r >> 8 & 255] + "-" + et[r >> 16 & 255] + et[r >> 24 & 255] + et[255 & n] + et[n >> 8 & 255] + et[n >> 16 & 255] + et[n >> 24 & 255]).toUpperCase()
                },
                clamp: function(t, e, r) {
                    return Math.max(e, Math.min(r, t))
                },
                euclideanModulo: function(t, e) {
                    return (t % e + e) % e
                },
                mapLinear: function(t, e, r, n, i) {
                    return n + (t - e) * (i - n) / (r - e)
                },
                lerp: function(t, e, r) {
                    return (1 - r) * t + r * e
                },
                smoothstep: function(t, e, r) {
                    return t <= e ? 0 : t >= r ? 1 : (t = (t - e) / (r - e)) * t * (3 - 2 * t)
                },
                smootherstep: function(t, e, r) {
                    return t <= e ? 0 : t >= r ? 1 : (t = (t - e) / (r - e)) * t * t * (t * (6 * t - 15) + 10)
                },
                randInt: function(t, e) {
                    return t + Math.floor(Math.random() * (e - t + 1))
                },
                randFloat: function(t, e) {
                    return t + Math.random() * (e - t)
                },
                randFloatSpread: function(t) {
                    return t * (.5 - Math.random())
                },
                seededRandom: function(t) {
                    return void 0 !== t && (nt = t % 2147483647),
                    ((nt = 16807 * nt % 2147483647) - 1) / 2147483646
                },
                degToRad: function(t) {
                    return t * it.DEG2RAD
                },
                radToDeg: function(t) {
                    return t * it.RAD2DEG
                },
                isPowerOfTwo: function(t) {
                    return 0 == (t & t - 1) && 0 !== t
                },
                ceilPowerOfTwo: function(t) {
                    return Math.pow(2, Math.ceil(Math.log(t) / Math.LN2))
                },
                floorPowerOfTwo: function(t) {
                    return Math.pow(2, Math.floor(Math.log(t) / Math.LN2))
                },
                setQuaternionFromProperEuler: function(t, e, r, n, i) {
                    var a = Math.cos
                      , o = Math.sin
                      , s = a(r / 2)
                      , l = o(r / 2)
                      , c = a((e + n) / 2)
                      , h = o((e + n) / 2)
                      , u = a((e - n) / 2)
                      , p = o((e - n) / 2)
                      , d = a((n - e) / 2)
                      , f = o((n - e) / 2);
                    switch (i) {
                    case "XYX":
                        t.set(s * h, l * u, l * p, s * c);
                        break;
                    case "YZY":
                        t.set(l * p, s * h, l * u, s * c);
                        break;
                    case "ZXZ":
                        t.set(l * u, l * p, s * h, s * c);
                        break;
                    case "XZX":
                        t.set(s * h, l * f, l * d, s * c);
                        break;
                    case "YXY":
                        t.set(l * d, s * h, l * f, s * c);
                        break;
                    case "ZYZ":
                        t.set(l * f, l * d, s * h, s * c);
                        break;
                    default:
                        console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " + i)
                    }
                }
            };
            function at(t, e) {
                for (var r = 0; r < e.length; r++) {
                    var n = e[r];
                    n.enumerable = n.enumerable || !1,
                    n.configurable = !0,
                    "value"in n && (n.writable = !0),
                    Object.defineProperty(t, n.key, n)
                }
            }
            function ot(t, e, r) {
                return e && at(t.prototype, e),
                r && at(t, r),
                t
            }
            function st(t, e) {
                t.prototype = Object.create(e.prototype),
                t.prototype.constructor = t,
                t.__proto__ = e
            }
            function lt(t) {
                if (void 0 === t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return t
            }
            var ct, ht = function() {
                function t(t, e) {
                    void 0 === t && (t = 0),
                    void 0 === e && (e = 0),
                    Object.defineProperty(this, "isVector2", {
                        value: !0
                    }),
                    this.x = t,
                    this.y = e
                }
                var e = t.prototype;
                return e.set = function(t, e) {
                    return this.x = t,
                    this.y = e,
                    this
                }
                ,
                e.setScalar = function(t) {
                    return this.x = t,
                    this.y = t,
                    this
                }
                ,
                e.setX = function(t) {
                    return this.x = t,
                    this
                }
                ,
                e.setY = function(t) {
                    return this.y = t,
                    this
                }
                ,
                e.setComponent = function(t, e) {
                    switch (t) {
                    case 0:
                        this.x = e;
                        break;
                    case 1:
                        this.y = e;
                        break;
                    default:
                        throw new Error("index is out of range: " + t)
                    }
                    return this
                }
                ,
                e.getComponent = function(t) {
                    switch (t) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    default:
                        throw new Error("index is out of range: " + t)
                    }
                }
                ,
                e.clone = function() {
                    return new this.constructor(this.x,this.y)
                }
                ,
                e.copy = function(t) {
                    return this.x = t.x,
                    this.y = t.y,
                    this
                }
                ,
                e.add = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                    this.addVectors(t, e)) : (this.x += t.x,
                    this.y += t.y,
                    this)
                }
                ,
                e.addScalar = function(t) {
                    return this.x += t,
                    this.y += t,
                    this
                }
                ,
                e.addVectors = function(t, e) {
                    return this.x = t.x + e.x,
                    this.y = t.y + e.y,
                    this
                }
                ,
                e.addScaledVector = function(t, e) {
                    return this.x += t.x * e,
                    this.y += t.y * e,
                    this
                }
                ,
                e.sub = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                    this.subVectors(t, e)) : (this.x -= t.x,
                    this.y -= t.y,
                    this)
                }
                ,
                e.subScalar = function(t) {
                    return this.x -= t,
                    this.y -= t,
                    this
                }
                ,
                e.subVectors = function(t, e) {
                    return this.x = t.x - e.x,
                    this.y = t.y - e.y,
                    this
                }
                ,
                e.multiply = function(t) {
                    return this.x *= t.x,
                    this.y *= t.y,
                    this
                }
                ,
                e.multiplyScalar = function(t) {
                    return this.x *= t,
                    this.y *= t,
                    this
                }
                ,
                e.divide = function(t) {
                    return this.x /= t.x,
                    this.y /= t.y,
                    this
                }
                ,
                e.divideScalar = function(t) {
                    return this.multiplyScalar(1 / t)
                }
                ,
                e.applyMatrix3 = function(t) {
                    var e = this.x
                      , r = this.y
                      , n = t.elements;
                    return this.x = n[0] * e + n[3] * r + n[6],
                    this.y = n[1] * e + n[4] * r + n[7],
                    this
                }
                ,
                e.min = function(t) {
                    return this.x = Math.min(this.x, t.x),
                    this.y = Math.min(this.y, t.y),
                    this
                }
                ,
                e.max = function(t) {
                    return this.x = Math.max(this.x, t.x),
                    this.y = Math.max(this.y, t.y),
                    this
                }
                ,
                e.clamp = function(t, e) {
                    return this.x = Math.max(t.x, Math.min(e.x, this.x)),
                    this.y = Math.max(t.y, Math.min(e.y, this.y)),
                    this
                }
                ,
                e.clampScalar = function(t, e) {
                    return this.x = Math.max(t, Math.min(e, this.x)),
                    this.y = Math.max(t, Math.min(e, this.y)),
                    this
                }
                ,
                e.clampLength = function(t, e) {
                    var r = this.length();
                    return this.divideScalar(r || 1).multiplyScalar(Math.max(t, Math.min(e, r)))
                }
                ,
                e.floor = function() {
                    return this.x = Math.floor(this.x),
                    this.y = Math.floor(this.y),
                    this
                }
                ,
                e.ceil = function() {
                    return this.x = Math.ceil(this.x),
                    this.y = Math.ceil(this.y),
                    this
                }
                ,
                e.round = function() {
                    return this.x = Math.round(this.x),
                    this.y = Math.round(this.y),
                    this
                }
                ,
                e.roundToZero = function() {
                    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                    this
                }
                ,
                e.negate = function() {
                    return this.x = -this.x,
                    this.y = -this.y,
                    this
                }
                ,
                e.dot = function(t) {
                    return this.x * t.x + this.y * t.y
                }
                ,
                e.cross = function(t) {
                    return this.x * t.y - this.y * t.x
                }
                ,
                e.lengthSq = function() {
                    return this.x * this.x + this.y * this.y
                }
                ,
                e.length = function() {
                    return Math.sqrt(this.x * this.x + this.y * this.y)
                }
                ,
                e.manhattanLength = function() {
                    return Math.abs(this.x) + Math.abs(this.y)
                }
                ,
                e.normalize = function() {
                    return this.divideScalar(this.length() || 1)
                }
                ,
                e.angle = function() {
                    return Math.atan2(-this.y, -this.x) + Math.PI
                }
                ,
                e.distanceTo = function(t) {
                    return Math.sqrt(this.distanceToSquared(t))
                }
                ,
                e.distanceToSquared = function(t) {
                    var e = this.x - t.x
                      , r = this.y - t.y;
                    return e * e + r * r
                }
                ,
                e.manhattanDistanceTo = function(t) {
                    return Math.abs(this.x - t.x) + Math.abs(this.y - t.y)
                }
                ,
                e.setLength = function(t) {
                    return this.normalize().multiplyScalar(t)
                }
                ,
                e.lerp = function(t, e) {
                    return this.x += (t.x - this.x) * e,
                    this.y += (t.y - this.y) * e,
                    this
                }
                ,
                e.lerpVectors = function(t, e, r) {
                    return this.x = t.x + (e.x - t.x) * r,
                    this.y = t.y + (e.y - t.y) * r,
                    this
                }
                ,
                e.equals = function(t) {
                    return t.x === this.x && t.y === this.y
                }
                ,
                e.fromArray = function(t, e) {
                    return void 0 === e && (e = 0),
                    this.x = t[e],
                    this.y = t[e + 1],
                    this
                }
                ,
                e.toArray = function(t, e) {
                    return void 0 === t && (t = []),
                    void 0 === e && (e = 0),
                    t[e] = this.x,
                    t[e + 1] = this.y,
                    t
                }
                ,
                e.fromBufferAttribute = function(t, e, r) {
                    return void 0 !== r && console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),
                    this.x = t.getX(e),
                    this.y = t.getY(e),
                    this
                }
                ,
                e.rotateAround = function(t, e) {
                    var r = Math.cos(e)
                      , n = Math.sin(e)
                      , i = this.x - t.x
                      , a = this.y - t.y;
                    return this.x = i * r - a * n + t.x,
                    this.y = i * n + a * r + t.y,
                    this
                }
                ,
                e.random = function() {
                    return this.x = Math.random(),
                    this.y = Math.random(),
                    this
                }
                ,
                ot(t, [{
                    key: "width",
                    get: function() {
                        return this.x
                    },
                    set: function(t) {
                        this.x = t
                    }
                }, {
                    key: "height",
                    get: function() {
                        return this.y
                    },
                    set: function(t) {
                        this.y = t
                    }
                }]),
                t
            }(), ut = function() {
                function t() {
                    Object.defineProperty(this, "isMatrix3", {
                        value: !0
                    }),
                    this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1],
                    arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
                }
                var e = t.prototype;
                return e.set = function(t, e, r, n, i, a, o, s, l) {
                    var c = this.elements;
                    return c[0] = t,
                    c[1] = n,
                    c[2] = o,
                    c[3] = e,
                    c[4] = i,
                    c[5] = s,
                    c[6] = r,
                    c[7] = a,
                    c[8] = l,
                    this
                }
                ,
                e.identity = function() {
                    return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).fromArray(this.elements)
                }
                ,
                e.copy = function(t) {
                    var e = this.elements
                      , r = t.elements;
                    return e[0] = r[0],
                    e[1] = r[1],
                    e[2] = r[2],
                    e[3] = r[3],
                    e[4] = r[4],
                    e[5] = r[5],
                    e[6] = r[6],
                    e[7] = r[7],
                    e[8] = r[8],
                    this
                }
                ,
                e.extractBasis = function(t, e, r) {
                    return t.setFromMatrix3Column(this, 0),
                    e.setFromMatrix3Column(this, 1),
                    r.setFromMatrix3Column(this, 2),
                    this
                }
                ,
                e.setFromMatrix4 = function(t) {
                    var e = t.elements;
                    return this.set(e[0], e[4], e[8], e[1], e[5], e[9], e[2], e[6], e[10]),
                    this
                }
                ,
                e.multiply = function(t) {
                    return this.multiplyMatrices(this, t)
                }
                ,
                e.premultiply = function(t) {
                    return this.multiplyMatrices(t, this)
                }
                ,
                e.multiplyMatrices = function(t, e) {
                    var r = t.elements
                      , n = e.elements
                      , i = this.elements
                      , a = r[0]
                      , o = r[3]
                      , s = r[6]
                      , l = r[1]
                      , c = r[4]
                      , h = r[7]
                      , u = r[2]
                      , p = r[5]
                      , d = r[8]
                      , f = n[0]
                      , m = n[3]
                      , v = n[6]
                      , g = n[1]
                      , y = n[4]
                      , _ = n[7]
                      , x = n[2]
                      , b = n[5]
                      , w = n[8];
                    return i[0] = a * f + o * g + s * x,
                    i[3] = a * m + o * y + s * b,
                    i[6] = a * v + o * _ + s * w,
                    i[1] = l * f + c * g + h * x,
                    i[4] = l * m + c * y + h * b,
                    i[7] = l * v + c * _ + h * w,
                    i[2] = u * f + p * g + d * x,
                    i[5] = u * m + p * y + d * b,
                    i[8] = u * v + p * _ + d * w,
                    this
                }
                ,
                e.multiplyScalar = function(t) {
                    var e = this.elements;
                    return e[0] *= t,
                    e[3] *= t,
                    e[6] *= t,
                    e[1] *= t,
                    e[4] *= t,
                    e[7] *= t,
                    e[2] *= t,
                    e[5] *= t,
                    e[8] *= t,
                    this
                }
                ,
                e.determinant = function() {
                    var t = this.elements
                      , e = t[0]
                      , r = t[1]
                      , n = t[2]
                      , i = t[3]
                      , a = t[4]
                      , o = t[5]
                      , s = t[6]
                      , l = t[7]
                      , c = t[8];
                    return e * a * c - e * o * l - r * i * c + r * o * s + n * i * l - n * a * s
                }
                ,
                e.getInverse = function(t, e) {
                    void 0 !== e && console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");
                    var r = t.elements
                      , n = this.elements
                      , i = r[0]
                      , a = r[1]
                      , o = r[2]
                      , s = r[3]
                      , l = r[4]
                      , c = r[5]
                      , h = r[6]
                      , u = r[7]
                      , p = r[8]
                      , d = p * l - c * u
                      , f = c * h - p * s
                      , m = u * s - l * h
                      , v = i * d + a * f + o * m;
                    if (0 === v)
                        return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
                    var g = 1 / v;
                    return n[0] = d * g,
                    n[1] = (o * u - p * a) * g,
                    n[2] = (c * a - o * l) * g,
                    n[3] = f * g,
                    n[4] = (p * i - o * h) * g,
                    n[5] = (o * s - c * i) * g,
                    n[6] = m * g,
                    n[7] = (a * h - u * i) * g,
                    n[8] = (l * i - a * s) * g,
                    this
                }
                ,
                e.transpose = function() {
                    var t, e = this.elements;
                    return t = e[1],
                    e[1] = e[3],
                    e[3] = t,
                    t = e[2],
                    e[2] = e[6],
                    e[6] = t,
                    t = e[5],
                    e[5] = e[7],
                    e[7] = t,
                    this
                }
                ,
                e.getNormalMatrix = function(t) {
                    return this.setFromMatrix4(t).getInverse(this).transpose()
                }
                ,
                e.transposeIntoArray = function(t) {
                    var e = this.elements;
                    return t[0] = e[0],
                    t[1] = e[3],
                    t[2] = e[6],
                    t[3] = e[1],
                    t[4] = e[4],
                    t[5] = e[7],
                    t[6] = e[2],
                    t[7] = e[5],
                    t[8] = e[8],
                    this
                }
                ,
                e.setUvTransform = function(t, e, r, n, i, a, o) {
                    var s = Math.cos(i)
                      , l = Math.sin(i);
                    this.set(r * s, r * l, -r * (s * a + l * o) + a + t, -n * l, n * s, -n * (-l * a + s * o) + o + e, 0, 0, 1)
                }
                ,
                e.scale = function(t, e) {
                    var r = this.elements;
                    return r[0] *= t,
                    r[3] *= t,
                    r[6] *= t,
                    r[1] *= e,
                    r[4] *= e,
                    r[7] *= e,
                    this
                }
                ,
                e.rotate = function(t) {
                    var e = Math.cos(t)
                      , r = Math.sin(t)
                      , n = this.elements
                      , i = n[0]
                      , a = n[3]
                      , o = n[6]
                      , s = n[1]
                      , l = n[4]
                      , c = n[7];
                    return n[0] = e * i + r * s,
                    n[3] = e * a + r * l,
                    n[6] = e * o + r * c,
                    n[1] = -r * i + e * s,
                    n[4] = -r * a + e * l,
                    n[7] = -r * o + e * c,
                    this
                }
                ,
                e.translate = function(t, e) {
                    var r = this.elements;
                    return r[0] += t * r[2],
                    r[3] += t * r[5],
                    r[6] += t * r[8],
                    r[1] += e * r[2],
                    r[4] += e * r[5],
                    r[7] += e * r[8],
                    this
                }
                ,
                e.equals = function(t) {
                    for (var e = this.elements, r = t.elements, n = 0; n < 9; n++)
                        if (e[n] !== r[n])
                            return !1;
                    return !0
                }
                ,
                e.fromArray = function(t, e) {
                    void 0 === e && (e = 0);
                    for (var r = 0; r < 9; r++)
                        this.elements[r] = t[r + e];
                    return this
                }
                ,
                e.toArray = function(t, e) {
                    void 0 === t && (t = []),
                    void 0 === e && (e = 0);
                    var r = this.elements;
                    return t[e] = r[0],
                    t[e + 1] = r[1],
                    t[e + 2] = r[2],
                    t[e + 3] = r[3],
                    t[e + 4] = r[4],
                    t[e + 5] = r[5],
                    t[e + 6] = r[6],
                    t[e + 7] = r[7],
                    t[e + 8] = r[8],
                    t
                }
                ,
                t
            }(), pt = {
                getDataURL: function(t) {
                    if (/^data:/i.test(t.src))
                        return t.src;
                    if ("undefined" == typeof HTMLCanvasElement)
                        return t.src;
                    var e;
                    if (t instanceof HTMLCanvasElement)
                        e = t;
                    else {
                        void 0 === ct && (ct = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")),
                        ct.width = t.width,
                        ct.height = t.height;
                        var r = ct.getContext("2d");
                        t instanceof ImageData ? r.putImageData(t, 0, 0) : r.drawImage(t, 0, 0, t.width, t.height),
                        e = ct
                    }
                    return e.width > 2048 || e.height > 2048 ? e.toDataURL("image/jpeg", .6) : e.toDataURL("image/png")
                }
            }, dt = 0;
            function ft(t, e, r, n, i, a, o, s, l, c) {
                Object.defineProperty(this, "id", {
                    value: dt++
                }),
                this.uuid = it.generateUUID(),
                this.name = "",
                this.image = void 0 !== t ? t : ft.DEFAULT_IMAGE,
                this.mipmaps = [],
                this.mapping = void 0 !== e ? e : ft.DEFAULT_MAPPING,
                this.wrapS = void 0 !== r ? r : u,
                this.wrapT = void 0 !== n ? n : u,
                this.magFilter = void 0 !== i ? i : v,
                this.minFilter = void 0 !== a ? a : g,
                this.anisotropy = void 0 !== l ? l : 1,
                this.format = void 0 !== o ? o : M,
                this.internalFormat = null,
                this.type = void 0 !== s ? s : y,
                this.offset = new ht(0,0),
                this.repeat = new ht(1,1),
                this.center = new ht(0,0),
                this.rotation = 0,
                this.matrixAutoUpdate = !0,
                this.matrix = new ut,
                this.generateMipmaps = !0,
                this.premultiplyAlpha = !1,
                this.flipY = !0,
                this.unpackAlignment = 4,
                this.encoding = void 0 !== c ? c : q,
                this.version = 0,
                this.onUpdate = null
            }
            ft.DEFAULT_IMAGE = void 0,
            ft.DEFAULT_MAPPING = r,
            ft.prototype = Object.assign(Object.create(tt.prototype), {
                constructor: ft,
                isTexture: !0,
                updateMatrix: function() {
                    this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y)
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(t) {
                    return this.name = t.name,
                    this.image = t.image,
                    this.mipmaps = t.mipmaps.slice(0),
                    this.mapping = t.mapping,
                    this.wrapS = t.wrapS,
                    this.wrapT = t.wrapT,
                    this.magFilter = t.magFilter,
                    this.minFilter = t.minFilter,
                    this.anisotropy = t.anisotropy,
                    this.format = t.format,
                    this.internalFormat = t.internalFormat,
                    this.type = t.type,
                    this.offset.copy(t.offset),
                    this.repeat.copy(t.repeat),
                    this.center.copy(t.center),
                    this.rotation = t.rotation,
                    this.matrixAutoUpdate = t.matrixAutoUpdate,
                    this.matrix.copy(t.matrix),
                    this.generateMipmaps = t.generateMipmaps,
                    this.premultiplyAlpha = t.premultiplyAlpha,
                    this.flipY = t.flipY,
                    this.unpackAlignment = t.unpackAlignment,
                    this.encoding = t.encoding,
                    this
                },
                toJSON: function(t) {
                    var e = void 0 === t || "string" == typeof t;
                    if (!e && void 0 !== t.textures[this.uuid])
                        return t.textures[this.uuid];
                    var r = {
                        metadata: {
                            version: 4.5,
                            type: "Texture",
                            generator: "Texture.toJSON"
                        },
                        uuid: this.uuid,
                        name: this.name,
                        mapping: this.mapping,
                        repeat: [this.repeat.x, this.repeat.y],
                        offset: [this.offset.x, this.offset.y],
                        center: [this.center.x, this.center.y],
                        rotation: this.rotation,
                        wrap: [this.wrapS, this.wrapT],
                        format: this.format,
                        type: this.type,
                        encoding: this.encoding,
                        minFilter: this.minFilter,
                        magFilter: this.magFilter,
                        anisotropy: this.anisotropy,
                        flipY: this.flipY,
                        premultiplyAlpha: this.premultiplyAlpha,
                        unpackAlignment: this.unpackAlignment
                    };
                    if (void 0 !== this.image) {
                        var n = this.image;
                        if (void 0 === n.uuid && (n.uuid = it.generateUUID()),
                        !e && void 0 === t.images[n.uuid]) {
                            var i;
                            if (Array.isArray(n)) {
                                i = [];
                                for (var a = 0, o = n.length; a < o; a++)
                                    i.push(pt.getDataURL(n[a]))
                            } else
                                i = pt.getDataURL(n);
                            t.images[n.uuid] = {
                                uuid: n.uuid,
                                url: i
                            }
                        }
                        r.image = n.uuid
                    }
                    return e || (t.textures[this.uuid] = r),
                    r
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                },
                transformUv: function(t) {
                    if (this.mapping !== r)
                        return t;
                    if (t.applyMatrix3(this.matrix),
                    t.x < 0 || t.x > 1)
                        switch (this.wrapS) {
                        case h:
                            t.x = t.x - Math.floor(t.x);
                            break;
                        case u:
                            t.x = t.x < 0 ? 0 : 1;
                            break;
                        case p:
                            1 === Math.abs(Math.floor(t.x) % 2) ? t.x = Math.ceil(t.x) - t.x : t.x = t.x - Math.floor(t.x)
                        }
                    if (t.y < 0 || t.y > 1)
                        switch (this.wrapT) {
                        case h:
                            t.y = t.y - Math.floor(t.y);
                            break;
                        case u:
                            t.y = t.y < 0 ? 0 : 1;
                            break;
                        case p:
                            1 === Math.abs(Math.floor(t.y) % 2) ? t.y = Math.ceil(t.y) - t.y : t.y = t.y - Math.floor(t.y)
                        }
                    return this.flipY && (t.y = 1 - t.y),
                    t
                }
            }),
            Object.defineProperty(ft.prototype, "needsUpdate", {
                set: function(t) {
                    !0 === t && this.version++
                }
            });
            var mt = function() {
                function t(t, e, r, n) {
                    void 0 === t && (t = 0),
                    void 0 === e && (e = 0),
                    void 0 === r && (r = 0),
                    void 0 === n && (n = 1),
                    Object.defineProperty(this, "isVector4", {
                        value: !0
                    }),
                    this.x = t,
                    this.y = e,
                    this.z = r,
                    this.w = n
                }
                var e = t.prototype;
                return e.set = function(t, e, r, n) {
                    return this.x = t,
                    this.y = e,
                    this.z = r,
                    this.w = n,
                    this
                }
                ,
                e.setScalar = function(t) {
                    return this.x = t,
                    this.y = t,
                    this.z = t,
                    this.w = t,
                    this
                }
                ,
                e.setX = function(t) {
                    return this.x = t,
                    this
                }
                ,
                e.setY = function(t) {
                    return this.y = t,
                    this
                }
                ,
                e.setZ = function(t) {
                    return this.z = t,
                    this
                }
                ,
                e.setW = function(t) {
                    return this.w = t,
                    this
                }
                ,
                e.setComponent = function(t, e) {
                    switch (t) {
                    case 0:
                        this.x = e;
                        break;
                    case 1:
                        this.y = e;
                        break;
                    case 2:
                        this.z = e;
                        break;
                    case 3:
                        this.w = e;
                        break;
                    default:
                        throw new Error("index is out of range: " + t)
                    }
                    return this
                }
                ,
                e.getComponent = function(t) {
                    switch (t) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    case 3:
                        return this.w;
                    default:
                        throw new Error("index is out of range: " + t)
                    }
                }
                ,
                e.clone = function() {
                    return new this.constructor(this.x,this.y,this.z,this.w)
                }
                ,
                e.copy = function(t) {
                    return this.x = t.x,
                    this.y = t.y,
                    this.z = t.z,
                    this.w = void 0 !== t.w ? t.w : 1,
                    this
                }
                ,
                e.add = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                    this.addVectors(t, e)) : (this.x += t.x,
                    this.y += t.y,
                    this.z += t.z,
                    this.w += t.w,
                    this)
                }
                ,
                e.addScalar = function(t) {
                    return this.x += t,
                    this.y += t,
                    this.z += t,
                    this.w += t,
                    this
                }
                ,
                e.addVectors = function(t, e) {
                    return this.x = t.x + e.x,
                    this.y = t.y + e.y,
                    this.z = t.z + e.z,
                    this.w = t.w + e.w,
                    this
                }
                ,
                e.addScaledVector = function(t, e) {
                    return this.x += t.x * e,
                    this.y += t.y * e,
                    this.z += t.z * e,
                    this.w += t.w * e,
                    this
                }
                ,
                e.sub = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                    this.subVectors(t, e)) : (this.x -= t.x,
                    this.y -= t.y,
                    this.z -= t.z,
                    this.w -= t.w,
                    this)
                }
                ,
                e.subScalar = function(t) {
                    return this.x -= t,
                    this.y -= t,
                    this.z -= t,
                    this.w -= t,
                    this
                }
                ,
                e.subVectors = function(t, e) {
                    return this.x = t.x - e.x,
                    this.y = t.y - e.y,
                    this.z = t.z - e.z,
                    this.w = t.w - e.w,
                    this
                }
                ,
                e.multiplyScalar = function(t) {
                    return this.x *= t,
                    this.y *= t,
                    this.z *= t,
                    this.w *= t,
                    this
                }
                ,
                e.applyMatrix4 = function(t) {
                    var e = this.x
                      , r = this.y
                      , n = this.z
                      , i = this.w
                      , a = t.elements;
                    return this.x = a[0] * e + a[4] * r + a[8] * n + a[12] * i,
                    this.y = a[1] * e + a[5] * r + a[9] * n + a[13] * i,
                    this.z = a[2] * e + a[6] * r + a[10] * n + a[14] * i,
                    this.w = a[3] * e + a[7] * r + a[11] * n + a[15] * i,
                    this
                }
                ,
                e.divideScalar = function(t) {
                    return this.multiplyScalar(1 / t)
                }
                ,
                e.setAxisAngleFromQuaternion = function(t) {
                    this.w = 2 * Math.acos(t.w);
                    var e = Math.sqrt(1 - t.w * t.w);
                    return e < 1e-4 ? (this.x = 1,
                    this.y = 0,
                    this.z = 0) : (this.x = t.x / e,
                    this.y = t.y / e,
                    this.z = t.z / e),
                    this
                }
                ,
                e.setAxisAngleFromRotationMatrix = function(t) {
                    var e, r, n, i, a = .01, o = .1, s = t.elements, l = s[0], c = s[4], h = s[8], u = s[1], p = s[5], d = s[9], f = s[2], m = s[6], v = s[10];
                    if (Math.abs(c - u) < a && Math.abs(h - f) < a && Math.abs(d - m) < a) {
                        if (Math.abs(c + u) < o && Math.abs(h + f) < o && Math.abs(d + m) < o && Math.abs(l + p + v - 3) < o)
                            return this.set(1, 0, 0, 0),
                            this;
                        e = Math.PI;
                        var g = (l + 1) / 2
                          , y = (p + 1) / 2
                          , _ = (v + 1) / 2
                          , x = (c + u) / 4
                          , b = (h + f) / 4
                          , w = (d + m) / 4;
                        return g > y && g > _ ? g < a ? (r = 0,
                        n = .707106781,
                        i = .707106781) : (n = x / (r = Math.sqrt(g)),
                        i = b / r) : y > _ ? y < a ? (r = .707106781,
                        n = 0,
                        i = .707106781) : (r = x / (n = Math.sqrt(y)),
                        i = w / n) : _ < a ? (r = .707106781,
                        n = .707106781,
                        i = 0) : (r = b / (i = Math.sqrt(_)),
                        n = w / i),
                        this.set(r, n, i, e),
                        this
                    }
                    var S = Math.sqrt((m - d) * (m - d) + (h - f) * (h - f) + (u - c) * (u - c));
                    return Math.abs(S) < .001 && (S = 1),
                    this.x = (m - d) / S,
                    this.y = (h - f) / S,
                    this.z = (u - c) / S,
                    this.w = Math.acos((l + p + v - 1) / 2),
                    this
                }
                ,
                e.min = function(t) {
                    return this.x = Math.min(this.x, t.x),
                    this.y = Math.min(this.y, t.y),
                    this.z = Math.min(this.z, t.z),
                    this.w = Math.min(this.w, t.w),
                    this
                }
                ,
                e.max = function(t) {
                    return this.x = Math.max(this.x, t.x),
                    this.y = Math.max(this.y, t.y),
                    this.z = Math.max(this.z, t.z),
                    this.w = Math.max(this.w, t.w),
                    this
                }
                ,
                e.clamp = function(t, e) {
                    return this.x = Math.max(t.x, Math.min(e.x, this.x)),
                    this.y = Math.max(t.y, Math.min(e.y, this.y)),
                    this.z = Math.max(t.z, Math.min(e.z, this.z)),
                    this.w = Math.max(t.w, Math.min(e.w, this.w)),
                    this
                }
                ,
                e.clampScalar = function(t, e) {
                    return this.x = Math.max(t, Math.min(e, this.x)),
                    this.y = Math.max(t, Math.min(e, this.y)),
                    this.z = Math.max(t, Math.min(e, this.z)),
                    this.w = Math.max(t, Math.min(e, this.w)),
                    this
                }
                ,
                e.clampLength = function(t, e) {
                    var r = this.length();
                    return this.divideScalar(r || 1).multiplyScalar(Math.max(t, Math.min(e, r)))
                }
                ,
                e.floor = function() {
                    return this.x = Math.floor(this.x),
                    this.y = Math.floor(this.y),
                    this.z = Math.floor(this.z),
                    this.w = Math.floor(this.w),
                    this
                }
                ,
                e.ceil = function() {
                    return this.x = Math.ceil(this.x),
                    this.y = Math.ceil(this.y),
                    this.z = Math.ceil(this.z),
                    this.w = Math.ceil(this.w),
                    this
                }
                ,
                e.round = function() {
                    return this.x = Math.round(this.x),
                    this.y = Math.round(this.y),
                    this.z = Math.round(this.z),
                    this.w = Math.round(this.w),
                    this
                }
                ,
                e.roundToZero = function() {
                    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                    this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z),
                    this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w),
                    this
                }
                ,
                e.negate = function() {
                    return this.x = -this.x,
                    this.y = -this.y,
                    this.z = -this.z,
                    this.w = -this.w,
                    this
                }
                ,
                e.dot = function(t) {
                    return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w
                }
                ,
                e.lengthSq = function() {
                    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
                }
                ,
                e.length = function() {
                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
                }
                ,
                e.manhattanLength = function() {
                    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
                }
                ,
                e.normalize = function() {
                    return this.divideScalar(this.length() || 1)
                }
                ,
                e.setLength = function(t) {
                    return this.normalize().multiplyScalar(t)
                }
                ,
                e.lerp = function(t, e) {
                    return this.x += (t.x - this.x) * e,
                    this.y += (t.y - this.y) * e,
                    this.z += (t.z - this.z) * e,
                    this.w += (t.w - this.w) * e,
                    this
                }
                ,
                e.lerpVectors = function(t, e, r) {
                    return this.x = t.x + (e.x - t.x) * r,
                    this.y = t.y + (e.y - t.y) * r,
                    this.z = t.z + (e.z - t.z) * r,
                    this.w = t.w + (e.w - t.w) * r,
                    this
                }
                ,
                e.equals = function(t) {
                    return t.x === this.x && t.y === this.y && t.z === this.z && t.w === this.w
                }
                ,
                e.fromArray = function(t, e) {
                    return void 0 === e && (e = 0),
                    this.x = t[e],
                    this.y = t[e + 1],
                    this.z = t[e + 2],
                    this.w = t[e + 3],
                    this
                }
                ,
                e.toArray = function(t, e) {
                    return void 0 === t && (t = []),
                    void 0 === e && (e = 0),
                    t[e] = this.x,
                    t[e + 1] = this.y,
                    t[e + 2] = this.z,
                    t[e + 3] = this.w,
                    t
                }
                ,
                e.fromBufferAttribute = function(t, e, r) {
                    return void 0 !== r && console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),
                    this.x = t.getX(e),
                    this.y = t.getY(e),
                    this.z = t.getZ(e),
                    this.w = t.getW(e),
                    this
                }
                ,
                e.random = function() {
                    return this.x = Math.random(),
                    this.y = Math.random(),
                    this.z = Math.random(),
                    this.w = Math.random(),
                    this
                }
                ,
                ot(t, [{
                    key: "width",
                    get: function() {
                        return this.z
                    },
                    set: function(t) {
                        this.z = t
                    }
                }, {
                    key: "height",
                    get: function() {
                        return this.w
                    },
                    set: function(t) {
                        this.w = t
                    }
                }]),
                t
            }();
            function vt(t, e, r) {
                this.width = t,
                this.height = e,
                this.scissor = new mt(0,0,t,e),
                this.scissorTest = !1,
                this.viewport = new mt(0,0,t,e),
                r = r || {},
                this.texture = new ft(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),
                this.texture.image = {},
                this.texture.image.width = t,
                this.texture.image.height = e,
                this.texture.generateMipmaps = void 0 !== r.generateMipmaps && r.generateMipmaps,
                this.texture.minFilter = void 0 !== r.minFilter ? r.minFilter : v,
                this.depthBuffer = void 0 === r.depthBuffer || r.depthBuffer,
                this.stencilBuffer = void 0 !== r.stencilBuffer && r.stencilBuffer,
                this.depthTexture = void 0 !== r.depthTexture ? r.depthTexture : null
            }
            function gt(t, e, r) {
                vt.call(this, t, e, r),
                this.samples = 4
            }
            vt.prototype = Object.assign(Object.create(tt.prototype), {
                constructor: vt,
                isWebGLRenderTarget: !0,
                setSize: function(t, e) {
                    this.width === t && this.height === e || (this.width = t,
                    this.height = e,
                    this.texture.image.width = t,
                    this.texture.image.height = e,
                    this.dispose()),
                    this.viewport.set(0, 0, t, e),
                    this.scissor.set(0, 0, t, e)
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(t) {
                    return this.width = t.width,
                    this.height = t.height,
                    this.viewport.copy(t.viewport),
                    this.texture = t.texture.clone(),
                    this.depthBuffer = t.depthBuffer,
                    this.stencilBuffer = t.stencilBuffer,
                    this.depthTexture = t.depthTexture,
                    this
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            }),
            gt.prototype = Object.assign(Object.create(vt.prototype), {
                constructor: gt,
                isWebGLMultisampleRenderTarget: !0,
                copy: function(t) {
                    return vt.prototype.copy.call(this, t),
                    this.samples = t.samples,
                    this
                }
            });
            var yt = function() {
                function t(t, e, r, n) {
                    void 0 === t && (t = 0),
                    void 0 === e && (e = 0),
                    void 0 === r && (r = 0),
                    void 0 === n && (n = 1),
                    Object.defineProperty(this, "isQuaternion", {
                        value: !0
                    }),
                    this._x = t,
                    this._y = e,
                    this._z = r,
                    this._w = n
                }
                t.slerp = function(t, e, r, n) {
                    return r.copy(t).slerp(e, n)
                }
                ,
                t.slerpFlat = function(t, e, r, n, i, a, o) {
                    var s = r[n + 0]
                      , l = r[n + 1]
                      , c = r[n + 2]
                      , h = r[n + 3]
                      , u = i[a + 0]
                      , p = i[a + 1]
                      , d = i[a + 2]
                      , f = i[a + 3];
                    if (h !== f || s !== u || l !== p || c !== d) {
                        var m = 1 - o
                          , v = s * u + l * p + c * d + h * f
                          , g = v >= 0 ? 1 : -1
                          , y = 1 - v * v;
                        if (y > Number.EPSILON) {
                            var _ = Math.sqrt(y)
                              , x = Math.atan2(_, v * g);
                            m = Math.sin(m * x) / _,
                            o = Math.sin(o * x) / _
                        }
                        var b = o * g;
                        if (s = s * m + u * b,
                        l = l * m + p * b,
                        c = c * m + d * b,
                        h = h * m + f * b,
                        m === 1 - o) {
                            var w = 1 / Math.sqrt(s * s + l * l + c * c + h * h);
                            s *= w,
                            l *= w,
                            c *= w,
                            h *= w
                        }
                    }
                    t[e] = s,
                    t[e + 1] = l,
                    t[e + 2] = c,
                    t[e + 3] = h
                }
                ,
                t.multiplyQuaternionsFlat = function(t, e, r, n, i, a) {
                    var o = r[n]
                      , s = r[n + 1]
                      , l = r[n + 2]
                      , c = r[n + 3]
                      , h = i[a]
                      , u = i[a + 1]
                      , p = i[a + 2]
                      , d = i[a + 3];
                    return t[e] = o * d + c * h + s * p - l * u,
                    t[e + 1] = s * d + c * u + l * h - o * p,
                    t[e + 2] = l * d + c * p + o * u - s * h,
                    t[e + 3] = c * d - o * h - s * u - l * p,
                    t
                }
                ;
                var e = t.prototype;
                return e.set = function(t, e, r, n) {
                    return this._x = t,
                    this._y = e,
                    this._z = r,
                    this._w = n,
                    this._onChangeCallback(),
                    this
                }
                ,
                e.clone = function() {
                    return new this.constructor(this._x,this._y,this._z,this._w)
                }
                ,
                e.copy = function(t) {
                    return this._x = t.x,
                    this._y = t.y,
                    this._z = t.z,
                    this._w = t.w,
                    this._onChangeCallback(),
                    this
                }
                ,
                e.setFromEuler = function(t, e) {
                    if (!t || !t.isEuler)
                        throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
                    var r = t._x
                      , n = t._y
                      , i = t._z
                      , a = t._order
                      , o = Math.cos
                      , s = Math.sin
                      , l = o(r / 2)
                      , c = o(n / 2)
                      , h = o(i / 2)
                      , u = s(r / 2)
                      , p = s(n / 2)
                      , d = s(i / 2);
                    switch (a) {
                    case "XYZ":
                        this._x = u * c * h + l * p * d,
                        this._y = l * p * h - u * c * d,
                        this._z = l * c * d + u * p * h,
                        this._w = l * c * h - u * p * d;
                        break;
                    case "YXZ":
                        this._x = u * c * h + l * p * d,
                        this._y = l * p * h - u * c * d,
                        this._z = l * c * d - u * p * h,
                        this._w = l * c * h + u * p * d;
                        break;
                    case "ZXY":
                        this._x = u * c * h - l * p * d,
                        this._y = l * p * h + u * c * d,
                        this._z = l * c * d + u * p * h,
                        this._w = l * c * h - u * p * d;
                        break;
                    case "ZYX":
                        this._x = u * c * h - l * p * d,
                        this._y = l * p * h + u * c * d,
                        this._z = l * c * d - u * p * h,
                        this._w = l * c * h + u * p * d;
                        break;
                    case "YZX":
                        this._x = u * c * h + l * p * d,
                        this._y = l * p * h + u * c * d,
                        this._z = l * c * d - u * p * h,
                        this._w = l * c * h - u * p * d;
                        break;
                    case "XZY":
                        this._x = u * c * h - l * p * d,
                        this._y = l * p * h - u * c * d,
                        this._z = l * c * d + u * p * h,
                        this._w = l * c * h + u * p * d;
                        break;
                    default:
                        console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: " + a)
                    }
                    return !1 !== e && this._onChangeCallback(),
                    this
                }
                ,
                e.setFromAxisAngle = function(t, e) {
                    var r = e / 2
                      , n = Math.sin(r);
                    return this._x = t.x * n,
                    this._y = t.y * n,
                    this._z = t.z * n,
                    this._w = Math.cos(r),
                    this._onChangeCallback(),
                    this
                }
                ,
                e.setFromRotationMatrix = function(t) {
                    var e = t.elements
                      , r = e[0]
                      , n = e[4]
                      , i = e[8]
                      , a = e[1]
                      , o = e[5]
                      , s = e[9]
                      , l = e[2]
                      , c = e[6]
                      , h = e[10]
                      , u = r + o + h;
                    if (u > 0) {
                        var p = .5 / Math.sqrt(u + 1);
                        this._w = .25 / p,
                        this._x = (c - s) * p,
                        this._y = (i - l) * p,
                        this._z = (a - n) * p
                    } else if (r > o && r > h) {
                        var d = 2 * Math.sqrt(1 + r - o - h);
                        this._w = (c - s) / d,
                        this._x = .25 * d,
                        this._y = (n + a) / d,
                        this._z = (i + l) / d
                    } else if (o > h) {
                        var f = 2 * Math.sqrt(1 + o - r - h);
                        this._w = (i - l) / f,
                        this._x = (n + a) / f,
                        this._y = .25 * f,
                        this._z = (s + c) / f
                    } else {
                        var m = 2 * Math.sqrt(1 + h - r - o);
                        this._w = (a - n) / m,
                        this._x = (i + l) / m,
                        this._y = (s + c) / m,
                        this._z = .25 * m
                    }
                    return this._onChangeCallback(),
                    this
                }
                ,
                e.setFromUnitVectors = function(t, e) {
                    var r = t.dot(e) + 1;
                    return r < 1e-6 ? (r = 0,
                    Math.abs(t.x) > Math.abs(t.z) ? (this._x = -t.y,
                    this._y = t.x,
                    this._z = 0,
                    this._w = r) : (this._x = 0,
                    this._y = -t.z,
                    this._z = t.y,
                    this._w = r)) : (this._x = t.y * e.z - t.z * e.y,
                    this._y = t.z * e.x - t.x * e.z,
                    this._z = t.x * e.y - t.y * e.x,
                    this._w = r),
                    this.normalize()
                }
                ,
                e.angleTo = function(t) {
                    return 2 * Math.acos(Math.abs(it.clamp(this.dot(t), -1, 1)))
                }
                ,
                e.rotateTowards = function(t, e) {
                    var r = this.angleTo(t);
                    if (0 === r)
                        return this;
                    var n = Math.min(1, e / r);
                    return this.slerp(t, n),
                    this
                }
                ,
                e.identity = function() {
                    return this.set(0, 0, 0, 1)
                }
                ,
                e.inverse = function() {
                    return this.conjugate()
                }
                ,
                e.conjugate = function() {
                    return this._x *= -1,
                    this._y *= -1,
                    this._z *= -1,
                    this._onChangeCallback(),
                    this
                }
                ,
                e.dot = function(t) {
                    return this._x * t._x + this._y * t._y + this._z * t._z + this._w * t._w
                }
                ,
                e.lengthSq = function() {
                    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
                }
                ,
                e.length = function() {
                    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
                }
                ,
                e.normalize = function() {
                    var t = this.length();
                    return 0 === t ? (this._x = 0,
                    this._y = 0,
                    this._z = 0,
                    this._w = 1) : (t = 1 / t,
                    this._x = this._x * t,
                    this._y = this._y * t,
                    this._z = this._z * t,
                    this._w = this._w * t),
                    this._onChangeCallback(),
                    this
                }
                ,
                e.multiply = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
                    this.multiplyQuaternions(t, e)) : this.multiplyQuaternions(this, t)
                }
                ,
                e.premultiply = function(t) {
                    return this.multiplyQuaternions(t, this)
                }
                ,
                e.multiplyQuaternions = function(t, e) {
                    var r = t._x
                      , n = t._y
                      , i = t._z
                      , a = t._w
                      , o = e._x
                      , s = e._y
                      , l = e._z
                      , c = e._w;
                    return this._x = r * c + a * o + n * l - i * s,
                    this._y = n * c + a * s + i * o - r * l,
                    this._z = i * c + a * l + r * s - n * o,
                    this._w = a * c - r * o - n * s - i * l,
                    this._onChangeCallback(),
                    this
                }
                ,
                e.slerp = function(t, e) {
                    if (0 === e)
                        return this;
                    if (1 === e)
                        return this.copy(t);
                    var r = this._x
                      , n = this._y
                      , i = this._z
                      , a = this._w
                      , o = a * t._w + r * t._x + n * t._y + i * t._z;
                    if (o < 0 ? (this._w = -t._w,
                    this._x = -t._x,
                    this._y = -t._y,
                    this._z = -t._z,
                    o = -o) : this.copy(t),
                    o >= 1)
                        return this._w = a,
                        this._x = r,
                        this._y = n,
                        this._z = i,
                        this;
                    var s = 1 - o * o;
                    if (s <= Number.EPSILON) {
                        var l = 1 - e;
                        return this._w = l * a + e * this._w,
                        this._x = l * r + e * this._x,
                        this._y = l * n + e * this._y,
                        this._z = l * i + e * this._z,
                        this.normalize(),
                        this._onChangeCallback(),
                        this
                    }
                    var c = Math.sqrt(s)
                      , h = Math.atan2(c, o)
                      , u = Math.sin((1 - e) * h) / c
                      , p = Math.sin(e * h) / c;
                    return this._w = a * u + this._w * p,
                    this._x = r * u + this._x * p,
                    this._y = n * u + this._y * p,
                    this._z = i * u + this._z * p,
                    this._onChangeCallback(),
                    this
                }
                ,
                e.equals = function(t) {
                    return t._x === this._x && t._y === this._y && t._z === this._z && t._w === this._w
                }
                ,
                e.fromArray = function(t, e) {
                    return void 0 === e && (e = 0),
                    this._x = t[e],
                    this._y = t[e + 1],
                    this._z = t[e + 2],
                    this._w = t[e + 3],
                    this._onChangeCallback(),
                    this
                }
                ,
                e.toArray = function(t, e) {
                    return void 0 === t && (t = []),
                    void 0 === e && (e = 0),
                    t[e] = this._x,
                    t[e + 1] = this._y,
                    t[e + 2] = this._z,
                    t[e + 3] = this._w,
                    t
                }
                ,
                e.fromBufferAttribute = function(t, e) {
                    return this._x = t.getX(e),
                    this._y = t.getY(e),
                    this._z = t.getZ(e),
                    this._w = t.getW(e),
                    this
                }
                ,
                e._onChange = function(t) {
                    return this._onChangeCallback = t,
                    this
                }
                ,
                e._onChangeCallback = function() {}
                ,
                ot(t, [{
                    key: "x",
                    get: function() {
                        return this._x
                    },
                    set: function(t) {
                        this._x = t,
                        this._onChangeCallback()
                    }
                }, {
                    key: "y",
                    get: function() {
                        return this._y
                    },
                    set: function(t) {
                        this._y = t,
                        this._onChangeCallback()
                    }
                }, {
                    key: "z",
                    get: function() {
                        return this._z
                    },
                    set: function(t) {
                        this._z = t,
                        this._onChangeCallback()
                    }
                }, {
                    key: "w",
                    get: function() {
                        return this._w
                    },
                    set: function(t) {
                        this._w = t,
                        this._onChangeCallback()
                    }
                }]),
                t
            }()
              , _t = function() {
                function t(t, e, r) {
                    void 0 === t && (t = 0),
                    void 0 === e && (e = 0),
                    void 0 === r && (r = 0),
                    Object.defineProperty(this, "isVector3", {
                        value: !0
                    }),
                    this.x = t,
                    this.y = e,
                    this.z = r
                }
                var e = t.prototype;
                return e.set = function(t, e, r) {
                    return void 0 === r && (r = this.z),
                    this.x = t,
                    this.y = e,
                    this.z = r,
                    this
                }
                ,
                e.setScalar = function(t) {
                    return this.x = t,
                    this.y = t,
                    this.z = t,
                    this
                }
                ,
                e.setX = function(t) {
                    return this.x = t,
                    this
                }
                ,
                e.setY = function(t) {
                    return this.y = t,
                    this
                }
                ,
                e.setZ = function(t) {
                    return this.z = t,
                    this
                }
                ,
                e.setComponent = function(t, e) {
                    switch (t) {
                    case 0:
                        this.x = e;
                        break;
                    case 1:
                        this.y = e;
                        break;
                    case 2:
                        this.z = e;
                        break;
                    default:
                        throw new Error("index is out of range: " + t)
                    }
                    return this
                }
                ,
                e.getComponent = function(t) {
                    switch (t) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    default:
                        throw new Error("index is out of range: " + t)
                    }
                }
                ,
                e.clone = function() {
                    return new this.constructor(this.x,this.y,this.z)
                }
                ,
                e.copy = function(t) {
                    return this.x = t.x,
                    this.y = t.y,
                    this.z = t.z,
                    this
                }
                ,
                e.add = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                    this.addVectors(t, e)) : (this.x += t.x,
                    this.y += t.y,
                    this.z += t.z,
                    this)
                }
                ,
                e.addScalar = function(t) {
                    return this.x += t,
                    this.y += t,
                    this.z += t,
                    this
                }
                ,
                e.addVectors = function(t, e) {
                    return this.x = t.x + e.x,
                    this.y = t.y + e.y,
                    this.z = t.z + e.z,
                    this
                }
                ,
                e.addScaledVector = function(t, e) {
                    return this.x += t.x * e,
                    this.y += t.y * e,
                    this.z += t.z * e,
                    this
                }
                ,
                e.sub = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                    this.subVectors(t, e)) : (this.x -= t.x,
                    this.y -= t.y,
                    this.z -= t.z,
                    this)
                }
                ,
                e.subScalar = function(t) {
                    return this.x -= t,
                    this.y -= t,
                    this.z -= t,
                    this
                }
                ,
                e.subVectors = function(t, e) {
                    return this.x = t.x - e.x,
                    this.y = t.y - e.y,
                    this.z = t.z - e.z,
                    this
                }
                ,
                e.multiply = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
                    this.multiplyVectors(t, e)) : (this.x *= t.x,
                    this.y *= t.y,
                    this.z *= t.z,
                    this)
                }
                ,
                e.multiplyScalar = function(t) {
                    return this.x *= t,
                    this.y *= t,
                    this.z *= t,
                    this
                }
                ,
                e.multiplyVectors = function(t, e) {
                    return this.x = t.x * e.x,
                    this.y = t.y * e.y,
                    this.z = t.z * e.z,
                    this
                }
                ,
                e.applyEuler = function(t) {
                    return t && t.isEuler || console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),
                    this.applyQuaternion(bt.setFromEuler(t))
                }
                ,
                e.applyAxisAngle = function(t, e) {
                    return this.applyQuaternion(bt.setFromAxisAngle(t, e))
                }
                ,
                e.applyMatrix3 = function(t) {
                    var e = this.x
                      , r = this.y
                      , n = this.z
                      , i = t.elements;
                    return this.x = i[0] * e + i[3] * r + i[6] * n,
                    this.y = i[1] * e + i[4] * r + i[7] * n,
                    this.z = i[2] * e + i[5] * r + i[8] * n,
                    this
                }
                ,
                e.applyNormalMatrix = function(t) {
                    return this.applyMatrix3(t).normalize()
                }
                ,
                e.applyMatrix4 = function(t) {
                    var e = this.x
                      , r = this.y
                      , n = this.z
                      , i = t.elements
                      , a = 1 / (i[3] * e + i[7] * r + i[11] * n + i[15]);
                    return this.x = (i[0] * e + i[4] * r + i[8] * n + i[12]) * a,
                    this.y = (i[1] * e + i[5] * r + i[9] * n + i[13]) * a,
                    this.z = (i[2] * e + i[6] * r + i[10] * n + i[14]) * a,
                    this
                }
                ,
                e.applyQuaternion = function(t) {
                    var e = this.x
                      , r = this.y
                      , n = this.z
                      , i = t.x
                      , a = t.y
                      , o = t.z
                      , s = t.w
                      , l = s * e + a * n - o * r
                      , c = s * r + o * e - i * n
                      , h = s * n + i * r - a * e
                      , u = -i * e - a * r - o * n;
                    return this.x = l * s + u * -i + c * -o - h * -a,
                    this.y = c * s + u * -a + h * -i - l * -o,
                    this.z = h * s + u * -o + l * -a - c * -i,
                    this
                }
                ,
                e.project = function(t) {
                    return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)
                }
                ,
                e.unproject = function(t) {
                    return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)
                }
                ,
                e.transformDirection = function(t) {
                    var e = this.x
                      , r = this.y
                      , n = this.z
                      , i = t.elements;
                    return this.x = i[0] * e + i[4] * r + i[8] * n,
                    this.y = i[1] * e + i[5] * r + i[9] * n,
                    this.z = i[2] * e + i[6] * r + i[10] * n,
                    this.normalize()
                }
                ,
                e.divide = function(t) {
                    return this.x /= t.x,
                    this.y /= t.y,
                    this.z /= t.z,
                    this
                }
                ,
                e.divideScalar = function(t) {
                    return this.multiplyScalar(1 / t)
                }
                ,
                e.min = function(t) {
                    return this.x = Math.min(this.x, t.x),
                    this.y = Math.min(this.y, t.y),
                    this.z = Math.min(this.z, t.z),
                    this
                }
                ,
                e.max = function(t) {
                    return this.x = Math.max(this.x, t.x),
                    this.y = Math.max(this.y, t.y),
                    this.z = Math.max(this.z, t.z),
                    this
                }
                ,
                e.clamp = function(t, e) {
                    return this.x = Math.max(t.x, Math.min(e.x, this.x)),
                    this.y = Math.max(t.y, Math.min(e.y, this.y)),
                    this.z = Math.max(t.z, Math.min(e.z, this.z)),
                    this
                }
                ,
                e.clampScalar = function(t, e) {
                    return this.x = Math.max(t, Math.min(e, this.x)),
                    this.y = Math.max(t, Math.min(e, this.y)),
                    this.z = Math.max(t, Math.min(e, this.z)),
                    this
                }
                ,
                e.clampLength = function(t, e) {
                    var r = this.length();
                    return this.divideScalar(r || 1).multiplyScalar(Math.max(t, Math.min(e, r)))
                }
                ,
                e.floor = function() {
                    return this.x = Math.floor(this.x),
                    this.y = Math.floor(this.y),
                    this.z = Math.floor(this.z),
                    this
                }
                ,
                e.ceil = function() {
                    return this.x = Math.ceil(this.x),
                    this.y = Math.ceil(this.y),
                    this.z = Math.ceil(this.z),
                    this
                }
                ,
                e.round = function() {
                    return this.x = Math.round(this.x),
                    this.y = Math.round(this.y),
                    this.z = Math.round(this.z),
                    this
                }
                ,
                e.roundToZero = function() {
                    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                    this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z),
                    this
                }
                ,
                e.negate = function() {
                    return this.x = -this.x,
                    this.y = -this.y,
                    this.z = -this.z,
                    this
                }
                ,
                e.dot = function(t) {
                    return this.x * t.x + this.y * t.y + this.z * t.z
                }
                ,
                e.lengthSq = function() {
                    return this.x * this.x + this.y * this.y + this.z * this.z
                }
                ,
                e.length = function() {
                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
                }
                ,
                e.manhattanLength = function() {
                    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
                }
                ,
                e.normalize = function() {
                    return this.divideScalar(this.length() || 1)
                }
                ,
                e.setLength = function(t) {
                    return this.normalize().multiplyScalar(t)
                }
                ,
                e.lerp = function(t, e) {
                    return this.x += (t.x - this.x) * e,
                    this.y += (t.y - this.y) * e,
                    this.z += (t.z - this.z) * e,
                    this
                }
                ,
                e.lerpVectors = function(t, e, r) {
                    return this.x = t.x + (e.x - t.x) * r,
                    this.y = t.y + (e.y - t.y) * r,
                    this.z = t.z + (e.z - t.z) * r,
                    this
                }
                ,
                e.cross = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
                    this.crossVectors(t, e)) : this.crossVectors(this, t)
                }
                ,
                e.crossVectors = function(t, e) {
                    var r = t.x
                      , n = t.y
                      , i = t.z
                      , a = e.x
                      , o = e.y
                      , s = e.z;
                    return this.x = n * s - i * o,
                    this.y = i * a - r * s,
                    this.z = r * o - n * a,
                    this
                }
                ,
                e.projectOnVector = function(t) {
                    var e = t.lengthSq();
                    if (0 === e)
                        return this.set(0, 0, 0);
                    var r = t.dot(this) / e;
                    return this.copy(t).multiplyScalar(r)
                }
                ,
                e.projectOnPlane = function(t) {
                    return xt.copy(this).projectOnVector(t),
                    this.sub(xt)
                }
                ,
                e.reflect = function(t) {
                    return this.sub(xt.copy(t).multiplyScalar(2 * this.dot(t)))
                }
                ,
                e.angleTo = function(t) {
                    var e = Math.sqrt(this.lengthSq() * t.lengthSq());
                    if (0 === e)
                        return Math.PI / 2;
                    var r = this.dot(t) / e;
                    return Math.acos(it.clamp(r, -1, 1))
                }
                ,
                e.distanceTo = function(t) {
                    return Math.sqrt(this.distanceToSquared(t))
                }
                ,
                e.distanceToSquared = function(t) {
                    var e = this.x - t.x
                      , r = this.y - t.y
                      , n = this.z - t.z;
                    return e * e + r * r + n * n
                }
                ,
                e.manhattanDistanceTo = function(t) {
                    return Math.abs(this.x - t.x) + Math.abs(this.y - t.y) + Math.abs(this.z - t.z)
                }
                ,
                e.setFromSpherical = function(t) {
                    return this.setFromSphericalCoords(t.radius, t.phi, t.theta)
                }
                ,
                e.setFromSphericalCoords = function(t, e, r) {
                    var n = Math.sin(e) * t;
                    return this.x = n * Math.sin(r),
                    this.y = Math.cos(e) * t,
                    this.z = n * Math.cos(r),
                    this
                }
                ,
                e.setFromCylindrical = function(t) {
                    return this.setFromCylindricalCoords(t.radius, t.theta, t.y)
                }
                ,
                e.setFromCylindricalCoords = function(t, e, r) {
                    return this.x = t * Math.sin(e),
                    this.y = r,
                    this.z = t * Math.cos(e),
                    this
                }
                ,
                e.setFromMatrixPosition = function(t) {
                    var e = t.elements;
                    return this.x = e[12],
                    this.y = e[13],
                    this.z = e[14],
                    this
                }
                ,
                e.setFromMatrixScale = function(t) {
                    var e = this.setFromMatrixColumn(t, 0).length()
                      , r = this.setFromMatrixColumn(t, 1).length()
                      , n = this.setFromMatrixColumn(t, 2).length();
                    return this.x = e,
                    this.y = r,
                    this.z = n,
                    this
                }
                ,
                e.setFromMatrixColumn = function(t, e) {
                    return this.fromArray(t.elements, 4 * e)
                }
                ,
                e.setFromMatrix3Column = function(t, e) {
                    return this.fromArray(t.elements, 3 * e)
                }
                ,
                e.equals = function(t) {
                    return t.x === this.x && t.y === this.y && t.z === this.z
                }
                ,
                e.fromArray = function(t, e) {
                    return void 0 === e && (e = 0),
                    this.x = t[e],
                    this.y = t[e + 1],
                    this.z = t[e + 2],
                    this
                }
                ,
                e.toArray = function(t, e) {
                    return void 0 === t && (t = []),
                    void 0 === e && (e = 0),
                    t[e] = this.x,
                    t[e + 1] = this.y,
                    t[e + 2] = this.z,
                    t
                }
                ,
                e.fromBufferAttribute = function(t, e, r) {
                    return void 0 !== r && console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),
                    this.x = t.getX(e),
                    this.y = t.getY(e),
                    this.z = t.getZ(e),
                    this
                }
                ,
                e.random = function() {
                    return this.x = Math.random(),
                    this.y = Math.random(),
                    this.z = Math.random(),
                    this
                }
                ,
                t
            }()
              , xt = new _t
              , bt = new yt
              , wt = function() {
                function t(t, e) {
                    Object.defineProperty(this, "isBox3", {
                        value: !0
                    }),
                    this.min = void 0 !== t ? t : new _t(1 / 0,1 / 0,1 / 0),
                    this.max = void 0 !== e ? e : new _t(-1 / 0,-1 / 0,-1 / 0)
                }
                var e = t.prototype;
                return e.set = function(t, e) {
                    return this.min.copy(t),
                    this.max.copy(e),
                    this
                }
                ,
                e.setFromArray = function(t) {
                    for (var e = 1 / 0, r = 1 / 0, n = 1 / 0, i = -1 / 0, a = -1 / 0, o = -1 / 0, s = 0, l = t.length; s < l; s += 3) {
                        var c = t[s]
                          , h = t[s + 1]
                          , u = t[s + 2];
                        c < e && (e = c),
                        h < r && (r = h),
                        u < n && (n = u),
                        c > i && (i = c),
                        h > a && (a = h),
                        u > o && (o = u)
                    }
                    return this.min.set(e, r, n),
                    this.max.set(i, a, o),
                    this
                }
                ,
                e.setFromBufferAttribute = function(t) {
                    for (var e = 1 / 0, r = 1 / 0, n = 1 / 0, i = -1 / 0, a = -1 / 0, o = -1 / 0, s = 0, l = t.count; s < l; s++) {
                        var c = t.getX(s)
                          , h = t.getY(s)
                          , u = t.getZ(s);
                        c < e && (e = c),
                        h < r && (r = h),
                        u < n && (n = u),
                        c > i && (i = c),
                        h > a && (a = h),
                        u > o && (o = u)
                    }
                    return this.min.set(e, r, n),
                    this.max.set(i, a, o),
                    this
                }
                ,
                e.setFromPoints = function(t) {
                    this.makeEmpty();
                    for (var e = 0, r = t.length; e < r; e++)
                        this.expandByPoint(t[e]);
                    return this
                }
                ,
                e.setFromCenterAndSize = function(t, e) {
                    var r = Mt.copy(e).multiplyScalar(.5);
                    return this.min.copy(t).sub(r),
                    this.max.copy(t).add(r),
                    this
                }
                ,
                e.setFromObject = function(t) {
                    return this.makeEmpty(),
                    this.expandByObject(t)
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.min.copy(t.min),
                    this.max.copy(t.max),
                    this
                }
                ,
                e.makeEmpty = function() {
                    return this.min.x = this.min.y = this.min.z = 1 / 0,
                    this.max.x = this.max.y = this.max.z = -1 / 0,
                    this
                }
                ,
                e.isEmpty = function() {
                    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
                }
                ,
                e.getCenter = function(t) {
                    return void 0 === t && (console.warn("THREE.Box3: .getCenter() target is now required"),
                    t = new _t),
                    this.isEmpty() ? t.set(0, 0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5)
                }
                ,
                e.getSize = function(t) {
                    return void 0 === t && (console.warn("THREE.Box3: .getSize() target is now required"),
                    t = new _t),
                    this.isEmpty() ? t.set(0, 0, 0) : t.subVectors(this.max, this.min)
                }
                ,
                e.expandByPoint = function(t) {
                    return this.min.min(t),
                    this.max.max(t),
                    this
                }
                ,
                e.expandByVector = function(t) {
                    return this.min.sub(t),
                    this.max.add(t),
                    this
                }
                ,
                e.expandByScalar = function(t) {
                    return this.min.addScalar(-t),
                    this.max.addScalar(t),
                    this
                }
                ,
                e.expandByObject = function(t) {
                    t.updateWorldMatrix(!1, !1);
                    var e = t.geometry;
                    void 0 !== e && (null === e.boundingBox && e.computeBoundingBox(),
                    Et.copy(e.boundingBox),
                    Et.applyMatrix4(t.matrixWorld),
                    this.union(Et));
                    for (var r = t.children, n = 0, i = r.length; n < i; n++)
                        this.expandByObject(r[n]);
                    return this
                }
                ,
                e.containsPoint = function(t) {
                    return !(t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y || t.z < this.min.z || t.z > this.max.z)
                }
                ,
                e.containsBox = function(t) {
                    return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y && this.min.z <= t.min.z && t.max.z <= this.max.z
                }
                ,
                e.getParameter = function(t, e) {
                    return void 0 === e && (console.warn("THREE.Box3: .getParameter() target is now required"),
                    e = new _t),
                    e.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y), (t.z - this.min.z) / (this.max.z - this.min.z))
                }
                ,
                e.intersectsBox = function(t) {
                    return !(t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y || t.max.z < this.min.z || t.min.z > this.max.z)
                }
                ,
                e.intersectsSphere = function(t) {
                    return this.clampPoint(t.center, Mt),
                    Mt.distanceToSquared(t.center) <= t.radius * t.radius
                }
                ,
                e.intersectsPlane = function(t) {
                    var e, r;
                    return t.normal.x > 0 ? (e = t.normal.x * this.min.x,
                    r = t.normal.x * this.max.x) : (e = t.normal.x * this.max.x,
                    r = t.normal.x * this.min.x),
                    t.normal.y > 0 ? (e += t.normal.y * this.min.y,
                    r += t.normal.y * this.max.y) : (e += t.normal.y * this.max.y,
                    r += t.normal.y * this.min.y),
                    t.normal.z > 0 ? (e += t.normal.z * this.min.z,
                    r += t.normal.z * this.max.z) : (e += t.normal.z * this.max.z,
                    r += t.normal.z * this.min.z),
                    e <= -t.constant && r >= -t.constant
                }
                ,
                e.intersectsTriangle = function(t) {
                    if (this.isEmpty())
                        return !1;
                    this.getCenter(It),
                    kt.subVectors(this.max, It),
                    At.subVectors(t.a, It),
                    Pt.subVectors(t.b, It),
                    Ct.subVectors(t.c, It),
                    Lt.subVectors(Pt, At),
                    Dt.subVectors(Ct, Pt),
                    Rt.subVectors(At, Ct);
                    var e = [0, -Lt.z, Lt.y, 0, -Dt.z, Dt.y, 0, -Rt.z, Rt.y, Lt.z, 0, -Lt.x, Dt.z, 0, -Dt.x, Rt.z, 0, -Rt.x, -Lt.y, Lt.x, 0, -Dt.y, Dt.x, 0, -Rt.y, Rt.x, 0];
                    return !!St(e, At, Pt, Ct, kt) && !!St(e = [1, 0, 0, 0, 1, 0, 0, 0, 1], At, Pt, Ct, kt) && (Ot.crossVectors(Lt, Dt),
                    St(e = [Ot.x, Ot.y, Ot.z], At, Pt, Ct, kt))
                }
                ,
                e.clampPoint = function(t, e) {
                    return void 0 === e && (console.warn("THREE.Box3: .clampPoint() target is now required"),
                    e = new _t),
                    e.copy(t).clamp(this.min, this.max)
                }
                ,
                e.distanceToPoint = function(t) {
                    return Mt.copy(t).clamp(this.min, this.max).sub(t).length()
                }
                ,
                e.getBoundingSphere = function(t) {
                    return void 0 === t && console.error("THREE.Box3: .getBoundingSphere() target is now required"),
                    this.getCenter(t.center),
                    t.radius = .5 * this.getSize(Mt).length(),
                    t
                }
                ,
                e.intersect = function(t) {
                    return this.min.max(t.min),
                    this.max.min(t.max),
                    this.isEmpty() && this.makeEmpty(),
                    this
                }
                ,
                e.union = function(t) {
                    return this.min.min(t.min),
                    this.max.max(t.max),
                    this
                }
                ,
                e.applyMatrix4 = function(t) {
                    return this.isEmpty() || (Tt[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t),
                    Tt[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t),
                    Tt[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t),
                    Tt[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t),
                    Tt[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t),
                    Tt[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t),
                    Tt[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t),
                    Tt[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t),
                    this.setFromPoints(Tt)),
                    this
                }
                ,
                e.translate = function(t) {
                    return this.min.add(t),
                    this.max.add(t),
                    this
                }
                ,
                e.equals = function(t) {
                    return t.min.equals(this.min) && t.max.equals(this.max)
                }
                ,
                t
            }();
            function St(t, e, r, n, i) {
                for (var a = 0, o = t.length - 3; a <= o; a += 3) {
                    Ft.fromArray(t, a);
                    var s = i.x * Math.abs(Ft.x) + i.y * Math.abs(Ft.y) + i.z * Math.abs(Ft.z)
                      , l = e.dot(Ft)
                      , c = r.dot(Ft)
                      , h = n.dot(Ft);
                    if (Math.max(-Math.max(l, c, h), Math.min(l, c, h)) > s)
                        return !1
                }
                return !0
            }
            var Tt = [new _t, new _t, new _t, new _t, new _t, new _t, new _t, new _t]
              , Mt = new _t
              , Et = new wt
              , At = new _t
              , Pt = new _t
              , Ct = new _t
              , Lt = new _t
              , Dt = new _t
              , Rt = new _t
              , It = new _t
              , kt = new _t
              , Ot = new _t
              , Ft = new _t
              , Nt = new wt
              , Bt = function() {
                function t(t, e) {
                    this.center = void 0 !== t ? t : new _t,
                    this.radius = void 0 !== e ? e : -1
                }
                var e = t.prototype;
                return e.set = function(t, e) {
                    return this.center.copy(t),
                    this.radius = e,
                    this
                }
                ,
                e.setFromPoints = function(t, e) {
                    var r = this.center;
                    void 0 !== e ? r.copy(e) : Nt.setFromPoints(t).getCenter(r);
                    for (var n = 0, i = 0, a = t.length; i < a; i++)
                        n = Math.max(n, r.distanceToSquared(t[i]));
                    return this.radius = Math.sqrt(n),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.center.copy(t.center),
                    this.radius = t.radius,
                    this
                }
                ,
                e.isEmpty = function() {
                    return this.radius < 0
                }
                ,
                e.makeEmpty = function() {
                    return this.center.set(0, 0, 0),
                    this.radius = -1,
                    this
                }
                ,
                e.containsPoint = function(t) {
                    return t.distanceToSquared(this.center) <= this.radius * this.radius
                }
                ,
                e.distanceToPoint = function(t) {
                    return t.distanceTo(this.center) - this.radius
                }
                ,
                e.intersectsSphere = function(t) {
                    var e = this.radius + t.radius;
                    return t.center.distanceToSquared(this.center) <= e * e
                }
                ,
                e.intersectsBox = function(t) {
                    return t.intersectsSphere(this)
                }
                ,
                e.intersectsPlane = function(t) {
                    return Math.abs(t.distanceToPoint(this.center)) <= this.radius
                }
                ,
                e.clampPoint = function(t, e) {
                    var r = this.center.distanceToSquared(t);
                    return void 0 === e && (console.warn("THREE.Sphere: .clampPoint() target is now required"),
                    e = new _t),
                    e.copy(t),
                    r > this.radius * this.radius && (e.sub(this.center).normalize(),
                    e.multiplyScalar(this.radius).add(this.center)),
                    e
                }
                ,
                e.getBoundingBox = function(t) {
                    return void 0 === t && (console.warn("THREE.Sphere: .getBoundingBox() target is now required"),
                    t = new wt),
                    this.isEmpty() ? (t.makeEmpty(),
                    t) : (t.set(this.center, this.center),
                    t.expandByScalar(this.radius),
                    t)
                }
                ,
                e.applyMatrix4 = function(t) {
                    return this.center.applyMatrix4(t),
                    this.radius = this.radius * t.getMaxScaleOnAxis(),
                    this
                }
                ,
                e.translate = function(t) {
                    return this.center.add(t),
                    this
                }
                ,
                e.equals = function(t) {
                    return t.center.equals(this.center) && t.radius === this.radius
                }
                ,
                t
            }()
              , zt = new _t
              , Gt = new _t
              , Ht = new _t
              , Ut = new _t
              , Vt = new _t
              , jt = new _t
              , Wt = new _t
              , qt = function() {
                function t(t, e) {
                    this.origin = void 0 !== t ? t : new _t,
                    this.direction = void 0 !== e ? e : new _t(0,0,-1)
                }
                var e = t.prototype;
                return e.set = function(t, e) {
                    return this.origin.copy(t),
                    this.direction.copy(e),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.origin.copy(t.origin),
                    this.direction.copy(t.direction),
                    this
                }
                ,
                e.at = function(t, e) {
                    return void 0 === e && (console.warn("THREE.Ray: .at() target is now required"),
                    e = new _t),
                    e.copy(this.direction).multiplyScalar(t).add(this.origin)
                }
                ,
                e.lookAt = function(t) {
                    return this.direction.copy(t).sub(this.origin).normalize(),
                    this
                }
                ,
                e.recast = function(t) {
                    return this.origin.copy(this.at(t, zt)),
                    this
                }
                ,
                e.closestPointToPoint = function(t, e) {
                    void 0 === e && (console.warn("THREE.Ray: .closestPointToPoint() target is now required"),
                    e = new _t),
                    e.subVectors(t, this.origin);
                    var r = e.dot(this.direction);
                    return r < 0 ? e.copy(this.origin) : e.copy(this.direction).multiplyScalar(r).add(this.origin)
                }
                ,
                e.distanceToPoint = function(t) {
                    return Math.sqrt(this.distanceSqToPoint(t))
                }
                ,
                e.distanceSqToPoint = function(t) {
                    var e = zt.subVectors(t, this.origin).dot(this.direction);
                    return e < 0 ? this.origin.distanceToSquared(t) : (zt.copy(this.direction).multiplyScalar(e).add(this.origin),
                    zt.distanceToSquared(t))
                }
                ,
                e.distanceSqToSegment = function(t, e, r, n) {
                    Gt.copy(t).add(e).multiplyScalar(.5),
                    Ht.copy(e).sub(t).normalize(),
                    Ut.copy(this.origin).sub(Gt);
                    var i, a, o, s, l = .5 * t.distanceTo(e), c = -this.direction.dot(Ht), h = Ut.dot(this.direction), u = -Ut.dot(Ht), p = Ut.lengthSq(), d = Math.abs(1 - c * c);
                    if (d > 0)
                        if (a = c * h - u,
                        s = l * d,
                        (i = c * u - h) >= 0)
                            if (a >= -s)
                                if (a <= s) {
                                    var f = 1 / d;
                                    o = (i *= f) * (i + c * (a *= f) + 2 * h) + a * (c * i + a + 2 * u) + p
                                } else
                                    a = l,
                                    o = -(i = Math.max(0, -(c * a + h))) * i + a * (a + 2 * u) + p;
                            else
                                a = -l,
                                o = -(i = Math.max(0, -(c * a + h))) * i + a * (a + 2 * u) + p;
                        else
                            a <= -s ? o = -(i = Math.max(0, -(-c * l + h))) * i + (a = i > 0 ? -l : Math.min(Math.max(-l, -u), l)) * (a + 2 * u) + p : a <= s ? (i = 0,
                            o = (a = Math.min(Math.max(-l, -u), l)) * (a + 2 * u) + p) : o = -(i = Math.max(0, -(c * l + h))) * i + (a = i > 0 ? l : Math.min(Math.max(-l, -u), l)) * (a + 2 * u) + p;
                    else
                        a = c > 0 ? -l : l,
                        o = -(i = Math.max(0, -(c * a + h))) * i + a * (a + 2 * u) + p;
                    return r && r.copy(this.direction).multiplyScalar(i).add(this.origin),
                    n && n.copy(Ht).multiplyScalar(a).add(Gt),
                    o
                }
                ,
                e.intersectSphere = function(t, e) {
                    zt.subVectors(t.center, this.origin);
                    var r = zt.dot(this.direction)
                      , n = zt.dot(zt) - r * r
                      , i = t.radius * t.radius;
                    if (n > i)
                        return null;
                    var a = Math.sqrt(i - n)
                      , o = r - a
                      , s = r + a;
                    return o < 0 && s < 0 ? null : o < 0 ? this.at(s, e) : this.at(o, e)
                }
                ,
                e.intersectsSphere = function(t) {
                    return this.distanceSqToPoint(t.center) <= t.radius * t.radius
                }
                ,
                e.distanceToPlane = function(t) {
                    var e = t.normal.dot(this.direction);
                    if (0 === e)
                        return 0 === t.distanceToPoint(this.origin) ? 0 : null;
                    var r = -(this.origin.dot(t.normal) + t.constant) / e;
                    return r >= 0 ? r : null
                }
                ,
                e.intersectPlane = function(t, e) {
                    var r = this.distanceToPlane(t);
                    return null === r ? null : this.at(r, e)
                }
                ,
                e.intersectsPlane = function(t) {
                    var e = t.distanceToPoint(this.origin);
                    return 0 === e || t.normal.dot(this.direction) * e < 0
                }
                ,
                e.intersectBox = function(t, e) {
                    var r, n, i, a, o, s, l = 1 / this.direction.x, c = 1 / this.direction.y, h = 1 / this.direction.z, u = this.origin;
                    return l >= 0 ? (r = (t.min.x - u.x) * l,
                    n = (t.max.x - u.x) * l) : (r = (t.max.x - u.x) * l,
                    n = (t.min.x - u.x) * l),
                    c >= 0 ? (i = (t.min.y - u.y) * c,
                    a = (t.max.y - u.y) * c) : (i = (t.max.y - u.y) * c,
                    a = (t.min.y - u.y) * c),
                    r > a || i > n ? null : ((i > r || r != r) && (r = i),
                    (a < n || n != n) && (n = a),
                    h >= 0 ? (o = (t.min.z - u.z) * h,
                    s = (t.max.z - u.z) * h) : (o = (t.max.z - u.z) * h,
                    s = (t.min.z - u.z) * h),
                    r > s || o > n ? null : ((o > r || r != r) && (r = o),
                    (s < n || n != n) && (n = s),
                    n < 0 ? null : this.at(r >= 0 ? r : n, e)))
                }
                ,
                e.intersectsBox = function(t) {
                    return null !== this.intersectBox(t, zt)
                }
                ,
                e.intersectTriangle = function(t, e, r, n, i) {
                    Vt.subVectors(e, t),
                    jt.subVectors(r, t),
                    Wt.crossVectors(Vt, jt);
                    var a, o = this.direction.dot(Wt);
                    if (o > 0) {
                        if (n)
                            return null;
                        a = 1
                    } else {
                        if (!(o < 0))
                            return null;
                        a = -1,
                        o = -o
                    }
                    Ut.subVectors(this.origin, t);
                    var s = a * this.direction.dot(jt.crossVectors(Ut, jt));
                    if (s < 0)
                        return null;
                    var l = a * this.direction.dot(Vt.cross(Ut));
                    if (l < 0)
                        return null;
                    if (s + l > o)
                        return null;
                    var c = -a * Ut.dot(Wt);
                    return c < 0 ? null : this.at(c / o, i)
                }
                ,
                e.applyMatrix4 = function(t) {
                    return this.origin.applyMatrix4(t),
                    this.direction.transformDirection(t),
                    this
                }
                ,
                e.equals = function(t) {
                    return t.origin.equals(this.origin) && t.direction.equals(this.direction)
                }
                ,
                t
            }()
              , Xt = function() {
                function t() {
                    Object.defineProperty(this, "isMatrix4", {
                        value: !0
                    }),
                    this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
                    arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
                }
                var e = t.prototype;
                return e.set = function(t, e, r, n, i, a, o, s, l, c, h, u, p, d, f, m) {
                    var v = this.elements;
                    return v[0] = t,
                    v[4] = e,
                    v[8] = r,
                    v[12] = n,
                    v[1] = i,
                    v[5] = a,
                    v[9] = o,
                    v[13] = s,
                    v[2] = l,
                    v[6] = c,
                    v[10] = h,
                    v[14] = u,
                    v[3] = p,
                    v[7] = d,
                    v[11] = f,
                    v[15] = m,
                    this
                }
                ,
                e.identity = function() {
                    return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.clone = function() {
                    return (new t).fromArray(this.elements)
                }
                ,
                e.copy = function(t) {
                    var e = this.elements
                      , r = t.elements;
                    return e[0] = r[0],
                    e[1] = r[1],
                    e[2] = r[2],
                    e[3] = r[3],
                    e[4] = r[4],
                    e[5] = r[5],
                    e[6] = r[6],
                    e[7] = r[7],
                    e[8] = r[8],
                    e[9] = r[9],
                    e[10] = r[10],
                    e[11] = r[11],
                    e[12] = r[12],
                    e[13] = r[13],
                    e[14] = r[14],
                    e[15] = r[15],
                    this
                }
                ,
                e.copyPosition = function(t) {
                    var e = this.elements
                      , r = t.elements;
                    return e[12] = r[12],
                    e[13] = r[13],
                    e[14] = r[14],
                    this
                }
                ,
                e.extractBasis = function(t, e, r) {
                    return t.setFromMatrixColumn(this, 0),
                    e.setFromMatrixColumn(this, 1),
                    r.setFromMatrixColumn(this, 2),
                    this
                }
                ,
                e.makeBasis = function(t, e, r) {
                    return this.set(t.x, e.x, r.x, 0, t.y, e.y, r.y, 0, t.z, e.z, r.z, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.extractRotation = function(t) {
                    var e = this.elements
                      , r = t.elements
                      , n = 1 / Yt.setFromMatrixColumn(t, 0).length()
                      , i = 1 / Yt.setFromMatrixColumn(t, 1).length()
                      , a = 1 / Yt.setFromMatrixColumn(t, 2).length();
                    return e[0] = r[0] * n,
                    e[1] = r[1] * n,
                    e[2] = r[2] * n,
                    e[3] = 0,
                    e[4] = r[4] * i,
                    e[5] = r[5] * i,
                    e[6] = r[6] * i,
                    e[7] = 0,
                    e[8] = r[8] * a,
                    e[9] = r[9] * a,
                    e[10] = r[10] * a,
                    e[11] = 0,
                    e[12] = 0,
                    e[13] = 0,
                    e[14] = 0,
                    e[15] = 1,
                    this
                }
                ,
                e.makeRotationFromEuler = function(t) {
                    t && t.isEuler || console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                    var e = this.elements
                      , r = t.x
                      , n = t.y
                      , i = t.z
                      , a = Math.cos(r)
                      , o = Math.sin(r)
                      , s = Math.cos(n)
                      , l = Math.sin(n)
                      , c = Math.cos(i)
                      , h = Math.sin(i);
                    if ("XYZ" === t.order) {
                        var u = a * c
                          , p = a * h
                          , d = o * c
                          , f = o * h;
                        e[0] = s * c,
                        e[4] = -s * h,
                        e[8] = l,
                        e[1] = p + d * l,
                        e[5] = u - f * l,
                        e[9] = -o * s,
                        e[2] = f - u * l,
                        e[6] = d + p * l,
                        e[10] = a * s
                    } else if ("YXZ" === t.order) {
                        var m = s * c
                          , v = s * h
                          , g = l * c
                          , y = l * h;
                        e[0] = m + y * o,
                        e[4] = g * o - v,
                        e[8] = a * l,
                        e[1] = a * h,
                        e[5] = a * c,
                        e[9] = -o,
                        e[2] = v * o - g,
                        e[6] = y + m * o,
                        e[10] = a * s
                    } else if ("ZXY" === t.order) {
                        var _ = s * c
                          , x = s * h
                          , b = l * c
                          , w = l * h;
                        e[0] = _ - w * o,
                        e[4] = -a * h,
                        e[8] = b + x * o,
                        e[1] = x + b * o,
                        e[5] = a * c,
                        e[9] = w - _ * o,
                        e[2] = -a * l,
                        e[6] = o,
                        e[10] = a * s
                    } else if ("ZYX" === t.order) {
                        var S = a * c
                          , T = a * h
                          , M = o * c
                          , E = o * h;
                        e[0] = s * c,
                        e[4] = M * l - T,
                        e[8] = S * l + E,
                        e[1] = s * h,
                        e[5] = E * l + S,
                        e[9] = T * l - M,
                        e[2] = -l,
                        e[6] = o * s,
                        e[10] = a * s
                    } else if ("YZX" === t.order) {
                        var A = a * s
                          , P = a * l
                          , C = o * s
                          , L = o * l;
                        e[0] = s * c,
                        e[4] = L - A * h,
                        e[8] = C * h + P,
                        e[1] = h,
                        e[5] = a * c,
                        e[9] = -o * c,
                        e[2] = -l * c,
                        e[6] = P * h + C,
                        e[10] = A - L * h
                    } else if ("XZY" === t.order) {
                        var D = a * s
                          , R = a * l
                          , I = o * s
                          , k = o * l;
                        e[0] = s * c,
                        e[4] = -h,
                        e[8] = l * c,
                        e[1] = D * h + k,
                        e[5] = a * c,
                        e[9] = R * h - I,
                        e[2] = I * h - R,
                        e[6] = o * c,
                        e[10] = k * h + D
                    }
                    return e[3] = 0,
                    e[7] = 0,
                    e[11] = 0,
                    e[12] = 0,
                    e[13] = 0,
                    e[14] = 0,
                    e[15] = 1,
                    this
                }
                ,
                e.makeRotationFromQuaternion = function(t) {
                    return this.compose(Kt, t, Zt)
                }
                ,
                e.lookAt = function(t, e, r) {
                    var n = this.elements;
                    return te.subVectors(t, e),
                    0 === te.lengthSq() && (te.z = 1),
                    te.normalize(),
                    Jt.crossVectors(r, te),
                    0 === Jt.lengthSq() && (1 === Math.abs(r.z) ? te.x += 1e-4 : te.z += 1e-4,
                    te.normalize(),
                    Jt.crossVectors(r, te)),
                    Jt.normalize(),
                    Qt.crossVectors(te, Jt),
                    n[0] = Jt.x,
                    n[4] = Qt.x,
                    n[8] = te.x,
                    n[1] = Jt.y,
                    n[5] = Qt.y,
                    n[9] = te.y,
                    n[2] = Jt.z,
                    n[6] = Qt.z,
                    n[10] = te.z,
                    this
                }
                ,
                e.multiply = function(t, e) {
                    return void 0 !== e ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
                    this.multiplyMatrices(t, e)) : this.multiplyMatrices(this, t)
                }
                ,
                e.premultiply = function(t) {
                    return this.multiplyMatrices(t, this)
                }
                ,
                e.multiplyMatrices = function(t, e) {
                    var r = t.elements
                      , n = e.elements
                      , i = this.elements
                      , a = r[0]
                      , o = r[4]
                      , s = r[8]
                      , l = r[12]
                      , c = r[1]
                      , h = r[5]
                      , u = r[9]
                      , p = r[13]
                      , d = r[2]
                      , f = r[6]
                      , m = r[10]
                      , v = r[14]
                      , g = r[3]
                      , y = r[7]
                      , _ = r[11]
                      , x = r[15]
                      , b = n[0]
                      , w = n[4]
                      , S = n[8]
                      , T = n[12]
                      , M = n[1]
                      , E = n[5]
                      , A = n[9]
                      , P = n[13]
                      , C = n[2]
                      , L = n[6]
                      , D = n[10]
                      , R = n[14]
                      , I = n[3]
                      , k = n[7]
                      , O = n[11]
                      , F = n[15];
                    return i[0] = a * b + o * M + s * C + l * I,
                    i[4] = a * w + o * E + s * L + l * k,
                    i[8] = a * S + o * A + s * D + l * O,
                    i[12] = a * T + o * P + s * R + l * F,
                    i[1] = c * b + h * M + u * C + p * I,
                    i[5] = c * w + h * E + u * L + p * k,
                    i[9] = c * S + h * A + u * D + p * O,
                    i[13] = c * T + h * P + u * R + p * F,
                    i[2] = d * b + f * M + m * C + v * I,
                    i[6] = d * w + f * E + m * L + v * k,
                    i[10] = d * S + f * A + m * D + v * O,
                    i[14] = d * T + f * P + m * R + v * F,
                    i[3] = g * b + y * M + _ * C + x * I,
                    i[7] = g * w + y * E + _ * L + x * k,
                    i[11] = g * S + y * A + _ * D + x * O,
                    i[15] = g * T + y * P + _ * R + x * F,
                    this
                }
                ,
                e.multiplyScalar = function(t) {
                    var e = this.elements;
                    return e[0] *= t,
                    e[4] *= t,
                    e[8] *= t,
                    e[12] *= t,
                    e[1] *= t,
                    e[5] *= t,
                    e[9] *= t,
                    e[13] *= t,
                    e[2] *= t,
                    e[6] *= t,
                    e[10] *= t,
                    e[14] *= t,
                    e[3] *= t,
                    e[7] *= t,
                    e[11] *= t,
                    e[15] *= t,
                    this
                }
                ,
                e.determinant = function() {
                    var t = this.elements
                      , e = t[0]
                      , r = t[4]
                      , n = t[8]
                      , i = t[12]
                      , a = t[1]
                      , o = t[5]
                      , s = t[9]
                      , l = t[13]
                      , c = t[2]
                      , h = t[6]
                      , u = t[10]
                      , p = t[14];
                    return t[3] * (+i * s * h - n * l * h - i * o * u + r * l * u + n * o * p - r * s * p) + t[7] * (+e * s * p - e * l * u + i * a * u - n * a * p + n * l * c - i * s * c) + t[11] * (+e * l * h - e * o * p - i * a * h + r * a * p + i * o * c - r * l * c) + t[15] * (-n * o * c - e * s * h + e * o * u + n * a * h - r * a * u + r * s * c)
                }
                ,
                e.transpose = function() {
                    var t, e = this.elements;
                    return t = e[1],
                    e[1] = e[4],
                    e[4] = t,
                    t = e[2],
                    e[2] = e[8],
                    e[8] = t,
                    t = e[6],
                    e[6] = e[9],
                    e[9] = t,
                    t = e[3],
                    e[3] = e[12],
                    e[12] = t,
                    t = e[7],
                    e[7] = e[13],
                    e[13] = t,
                    t = e[11],
                    e[11] = e[14],
                    e[14] = t,
                    this
                }
                ,
                e.setPosition = function(t, e, r) {
                    var n = this.elements;
                    return t.isVector3 ? (n[12] = t.x,
                    n[13] = t.y,
                    n[14] = t.z) : (n[12] = t,
                    n[13] = e,
                    n[14] = r),
                    this
                }
                ,
                e.getInverse = function(t, e) {
                    void 0 !== e && console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");
                    var r = this.elements
                      , n = t.elements
                      , i = n[0]
                      , a = n[1]
                      , o = n[2]
                      , s = n[3]
                      , l = n[4]
                      , c = n[5]
                      , h = n[6]
                      , u = n[7]
                      , p = n[8]
                      , d = n[9]
                      , f = n[10]
                      , m = n[11]
                      , v = n[12]
                      , g = n[13]
                      , y = n[14]
                      , _ = n[15]
                      , x = d * y * u - g * f * u + g * h * m - c * y * m - d * h * _ + c * f * _
                      , b = v * f * u - p * y * u - v * h * m + l * y * m + p * h * _ - l * f * _
                      , w = p * g * u - v * d * u + v * c * m - l * g * m - p * c * _ + l * d * _
                      , S = v * d * h - p * g * h - v * c * f + l * g * f + p * c * y - l * d * y
                      , T = i * x + a * b + o * w + s * S;
                    if (0 === T)
                        return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
                    var M = 1 / T;
                    return r[0] = x * M,
                    r[1] = (g * f * s - d * y * s - g * o * m + a * y * m + d * o * _ - a * f * _) * M,
                    r[2] = (c * y * s - g * h * s + g * o * u - a * y * u - c * o * _ + a * h * _) * M,
                    r[3] = (d * h * s - c * f * s - d * o * u + a * f * u + c * o * m - a * h * m) * M,
                    r[4] = b * M,
                    r[5] = (p * y * s - v * f * s + v * o * m - i * y * m - p * o * _ + i * f * _) * M,
                    r[6] = (v * h * s - l * y * s - v * o * u + i * y * u + l * o * _ - i * h * _) * M,
                    r[7] = (l * f * s - p * h * s + p * o * u - i * f * u - l * o * m + i * h * m) * M,
                    r[8] = w * M,
                    r[9] = (v * d * s - p * g * s - v * a * m + i * g * m + p * a * _ - i * d * _) * M,
                    r[10] = (l * g * s - v * c * s + v * a * u - i * g * u - l * a * _ + i * c * _) * M,
                    r[11] = (p * c * s - l * d * s - p * a * u + i * d * u + l * a * m - i * c * m) * M,
                    r[12] = S * M,
                    r[13] = (p * g * o - v * d * o + v * a * f - i * g * f - p * a * y + i * d * y) * M,
                    r[14] = (v * c * o - l * g * o - v * a * h + i * g * h + l * a * y - i * c * y) * M,
                    r[15] = (l * d * o - p * c * o + p * a * h - i * d * h - l * a * f + i * c * f) * M,
                    this
                }
                ,
                e.scale = function(t) {
                    var e = this.elements
                      , r = t.x
                      , n = t.y
                      , i = t.z;
                    return e[0] *= r,
                    e[4] *= n,
                    e[8] *= i,
                    e[1] *= r,
                    e[5] *= n,
                    e[9] *= i,
                    e[2] *= r,
                    e[6] *= n,
                    e[10] *= i,
                    e[3] *= r,
                    e[7] *= n,
                    e[11] *= i,
                    this
                }
                ,
                e.getMaxScaleOnAxis = function() {
                    var t = this.elements
                      , e = t[0] * t[0] + t[1] * t[1] + t[2] * t[2]
                      , r = t[4] * t[4] + t[5] * t[5] + t[6] * t[6]
                      , n = t[8] * t[8] + t[9] * t[9] + t[10] * t[10];
                    return Math.sqrt(Math.max(e, r, n))
                }
                ,
                e.makeTranslation = function(t, e, r) {
                    return this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, r, 0, 0, 0, 1),
                    this
                }
                ,
                e.makeRotationX = function(t) {
                    var e = Math.cos(t)
                      , r = Math.sin(t);
                    return this.set(1, 0, 0, 0, 0, e, -r, 0, 0, r, e, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.makeRotationY = function(t) {
                    var e = Math.cos(t)
                      , r = Math.sin(t);
                    return this.set(e, 0, r, 0, 0, 1, 0, 0, -r, 0, e, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.makeRotationZ = function(t) {
                    var e = Math.cos(t)
                      , r = Math.sin(t);
                    return this.set(e, -r, 0, 0, r, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.makeRotationAxis = function(t, e) {
                    var r = Math.cos(e)
                      , n = Math.sin(e)
                      , i = 1 - r
                      , a = t.x
                      , o = t.y
                      , s = t.z
                      , l = i * a
                      , c = i * o;
                    return this.set(l * a + r, l * o - n * s, l * s + n * o, 0, l * o + n * s, c * o + r, c * s - n * a, 0, l * s - n * o, c * s + n * a, i * s * s + r, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.makeScale = function(t, e, r) {
                    return this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, r, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.makeShear = function(t, e, r) {
                    return this.set(1, e, r, 0, t, 1, r, 0, t, e, 1, 0, 0, 0, 0, 1),
                    this
                }
                ,
                e.compose = function(t, e, r) {
                    var n = this.elements
                      , i = e._x
                      , a = e._y
                      , o = e._z
                      , s = e._w
                      , l = i + i
                      , c = a + a
                      , h = o + o
                      , u = i * l
                      , p = i * c
                      , d = i * h
                      , f = a * c
                      , m = a * h
                      , v = o * h
                      , g = s * l
                      , y = s * c
                      , _ = s * h
                      , x = r.x
                      , b = r.y
                      , w = r.z;
                    return n[0] = (1 - (f + v)) * x,
                    n[1] = (p + _) * x,
                    n[2] = (d - y) * x,
                    n[3] = 0,
                    n[4] = (p - _) * b,
                    n[5] = (1 - (u + v)) * b,
                    n[6] = (m + g) * b,
                    n[7] = 0,
                    n[8] = (d + y) * w,
                    n[9] = (m - g) * w,
                    n[10] = (1 - (u + f)) * w,
                    n[11] = 0,
                    n[12] = t.x,
                    n[13] = t.y,
                    n[14] = t.z,
                    n[15] = 1,
                    this
                }
                ,
                e.decompose = function(t, e, r) {
                    var n = this.elements
                      , i = Yt.set(n[0], n[1], n[2]).length()
                      , a = Yt.set(n[4], n[5], n[6]).length()
                      , o = Yt.set(n[8], n[9], n[10]).length();
                    this.determinant() < 0 && (i = -i),
                    t.x = n[12],
                    t.y = n[13],
                    t.z = n[14],
                    $t.copy(this);
                    var s = 1 / i
                      , l = 1 / a
                      , c = 1 / o;
                    return $t.elements[0] *= s,
                    $t.elements[1] *= s,
                    $t.elements[2] *= s,
                    $t.elements[4] *= l,
                    $t.elements[5] *= l,
                    $t.elements[6] *= l,
                    $t.elements[8] *= c,
                    $t.elements[9] *= c,
                    $t.elements[10] *= c,
                    e.setFromRotationMatrix($t),
                    r.x = i,
                    r.y = a,
                    r.z = o,
                    this
                }
                ,
                e.makePerspective = function(t, e, r, n, i, a) {
                    void 0 === a && console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
                    var o = this.elements
                      , s = 2 * i / (e - t)
                      , l = 2 * i / (r - n)
                      , c = (e + t) / (e - t)
                      , h = (r + n) / (r - n)
                      , u = -(a + i) / (a - i)
                      , p = -2 * a * i / (a - i);
                    return o[0] = s,
                    o[4] = 0,
                    o[8] = c,
                    o[12] = 0,
                    o[1] = 0,
                    o[5] = l,
                    o[9] = h,
                    o[13] = 0,
                    o[2] = 0,
                    o[6] = 0,
                    o[10] = u,
                    o[14] = p,
                    o[3] = 0,
                    o[7] = 0,
                    o[11] = -1,
                    o[15] = 0,
                    this
                }
                ,
                e.makeOrthographic = function(t, e, r, n, i, a) {
                    var o = this.elements
                      , s = 1 / (e - t)
                      , l = 1 / (r - n)
                      , c = 1 / (a - i)
                      , h = (e + t) * s
                      , u = (r + n) * l
                      , p = (a + i) * c;
                    return o[0] = 2 * s,
                    o[4] = 0,
                    o[8] = 0,
                    o[12] = -h,
                    o[1] = 0,
                    o[5] = 2 * l,
                    o[9] = 0,
                    o[13] = -u,
                    o[2] = 0,
                    o[6] = 0,
                    o[10] = -2 * c,
                    o[14] = -p,
                    o[3] = 0,
                    o[7] = 0,
                    o[11] = 0,
                    o[15] = 1,
                    this
                }
                ,
                e.equals = function(t) {
                    for (var e = this.elements, r = t.elements, n = 0; n < 16; n++)
                        if (e[n] !== r[n])
                            return !1;
                    return !0
                }
                ,
                e.fromArray = function(t, e) {
                    void 0 === e && (e = 0);
                    for (var r = 0; r < 16; r++)
                        this.elements[r] = t[r + e];
                    return this
                }
                ,
                e.toArray = function(t, e) {
                    void 0 === t && (t = []),
                    void 0 === e && (e = 0);
                    var r = this.elements;
                    return t[e] = r[0],
                    t[e + 1] = r[1],
                    t[e + 2] = r[2],
                    t[e + 3] = r[3],
                    t[e + 4] = r[4],
                    t[e + 5] = r[5],
                    t[e + 6] = r[6],
                    t[e + 7] = r[7],
                    t[e + 8] = r[8],
                    t[e + 9] = r[9],
                    t[e + 10] = r[10],
                    t[e + 11] = r[11],
                    t[e + 12] = r[12],
                    t[e + 13] = r[13],
                    t[e + 14] = r[14],
                    t[e + 15] = r[15],
                    t
                }
                ,
                t
            }()
              , Yt = new _t
              , $t = new Xt
              , Kt = new _t(0,0,0)
              , Zt = new _t(1,1,1)
              , Jt = new _t
              , Qt = new _t
              , te = new _t
              , ee = function() {
                function t(e, r, n, i) {
                    void 0 === e && (e = 0),
                    void 0 === r && (r = 0),
                    void 0 === n && (n = 0),
                    void 0 === i && (i = t.DefaultOrder),
                    Object.defineProperty(this, "isEuler", {
                        value: !0
                    }),
                    this._x = e,
                    this._y = r,
                    this._z = n,
                    this._order = i
                }
                var e = t.prototype;
                return e.set = function(t, e, r, n) {
                    return this._x = t,
                    this._y = e,
                    this._z = r,
                    this._order = n || this._order,
                    this._onChangeCallback(),
                    this
                }
                ,
                e.clone = function() {
                    return new this.constructor(this._x,this._y,this._z,this._order)
                }
                ,
                e.copy = function(t) {
                    return this._x = t._x,
                    this._y = t._y,
                    this._z = t._z,
                    this._order = t._order,
                    this._onChangeCallback(),
                    this
                }
                ,
                e.setFromRotationMatrix = function(t, e, r) {
                    var n = it.clamp
                      , i = t.elements
                      , a = i[0]
                      , o = i[4]
                      , s = i[8]
                      , l = i[1]
                      , c = i[5]
                      , h = i[9]
                      , u = i[2]
                      , p = i[6]
                      , d = i[10];
                    switch (e = e || this._order) {
                    case "XYZ":
                        this._y = Math.asin(n(s, -1, 1)),
                        Math.abs(s) < .9999999 ? (this._x = Math.atan2(-h, d),
                        this._z = Math.atan2(-o, a)) : (this._x = Math.atan2(p, c),
                        this._z = 0);
                        break;
                    case "YXZ":
                        this._x = Math.asin(-n(h, -1, 1)),
                        Math.abs(h) < .9999999 ? (this._y = Math.atan2(s, d),
                        this._z = Math.atan2(l, c)) : (this._y = Math.atan2(-u, a),
                        this._z = 0);
                        break;
                    case "ZXY":
                        this._x = Math.asin(n(p, -1, 1)),
                        Math.abs(p) < .9999999 ? (this._y = Math.atan2(-u, d),
                        this._z = Math.atan2(-o, c)) : (this._y = 0,
                        this._z = Math.atan2(l, a));
                        break;
                    case "ZYX":
                        this._y = Math.asin(-n(u, -1, 1)),
                        Math.abs(u) < .9999999 ? (this._x = Math.atan2(p, d),
                        this._z = Math.atan2(l, a)) : (this._x = 0,
                        this._z = Math.atan2(-o, c));
                        break;
                    case "YZX":
                        this._z = Math.asin(n(l, -1, 1)),
                        Math.abs(l) < .9999999 ? (this._x = Math.atan2(-h, c),
                        this._y = Math.atan2(-u, a)) : (this._x = 0,
                        this._y = Math.atan2(s, d));
                        break;
                    case "XZY":
                        this._z = Math.asin(-n(o, -1, 1)),
                        Math.abs(o) < .9999999 ? (this._x = Math.atan2(p, c),
                        this._y = Math.atan2(s, a)) : (this._x = Math.atan2(-h, d),
                        this._y = 0);
                        break;
                    default:
                        console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " + e)
                    }
                    return this._order = e,
                    !1 !== r && this._onChangeCallback(),
                    this
                }
                ,
                e.setFromQuaternion = function(t, e, r) {
                    return re.makeRotationFromQuaternion(t),
                    this.setFromRotationMatrix(re, e, r)
                }
                ,
                e.setFromVector3 = function(t, e) {
                    return this.set(t.x, t.y, t.z, e || this._order)
                }
                ,
                e.reorder = function(t) {
                    return ne.setFromEuler(this),
                    this.setFromQuaternion(ne, t)
                }
                ,
                e.equals = function(t) {
                    return t._x === this._x && t._y === this._y && t._z === this._z && t._order === this._order
                }
                ,
                e.fromArray = function(t) {
                    return this._x = t[0],
                    this._y = t[1],
                    this._z = t[2],
                    void 0 !== t[3] && (this._order = t[3]),
                    this._onChangeCallback(),
                    this
                }
                ,
                e.toArray = function(t, e) {
                    return void 0 === t && (t = []),
                    void 0 === e && (e = 0),
                    t[e] = this._x,
                    t[e + 1] = this._y,
                    t[e + 2] = this._z,
                    t[e + 3] = this._order,
                    t
                }
                ,
                e.toVector3 = function(t) {
                    return t ? t.set(this._x, this._y, this._z) : new _t(this._x,this._y,this._z)
                }
                ,
                e._onChange = function(t) {
                    return this._onChangeCallback = t,
                    this
                }
                ,
                e._onChangeCallback = function() {}
                ,
                ot(t, [{
                    key: "x",
                    get: function() {
                        return this._x
                    },
                    set: function(t) {
                        this._x = t,
                        this._onChangeCallback()
                    }
                }, {
                    key: "y",
                    get: function() {
                        return this._y
                    },
                    set: function(t) {
                        this._y = t,
                        this._onChangeCallback()
                    }
                }, {
                    key: "z",
                    get: function() {
                        return this._z
                    },
                    set: function(t) {
                        this._z = t,
                        this._onChangeCallback()
                    }
                }, {
                    key: "order",
                    get: function() {
                        return this._order
                    },
                    set: function(t) {
                        this._order = t,
                        this._onChangeCallback()
                    }
                }]),
                t
            }();
            ee.DefaultOrder = "XYZ",
            ee.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"];
            var re = new Xt
              , ne = new yt
              , ie = function() {
                function t() {
                    this.mask = 1
                }
                var e = t.prototype;
                return e.set = function(t) {
                    this.mask = 1 << t | 0
                }
                ,
                e.enable = function(t) {
                    this.mask |= 1 << t | 0
                }
                ,
                e.enableAll = function() {
                    this.mask = -1
                }
                ,
                e.toggle = function(t) {
                    this.mask ^= 1 << t | 0
                }
                ,
                e.disable = function(t) {
                    this.mask &= ~(1 << t | 0)
                }
                ,
                e.disableAll = function() {
                    this.mask = 0
                }
                ,
                e.test = function(t) {
                    return 0 != (this.mask & t.mask)
                }
                ,
                t
            }()
              , ae = 0
              , oe = new _t
              , se = new yt
              , le = new Xt
              , ce = new _t
              , he = new _t
              , ue = new _t
              , pe = new yt
              , de = new _t(1,0,0)
              , fe = new _t(0,1,0)
              , me = new _t(0,0,1)
              , ve = {
                type: "added"
            }
              , ge = {
                type: "removed"
            };
            function ye() {
                Object.defineProperty(this, "id", {
                    value: ae++
                }),
                this.uuid = it.generateUUID(),
                this.name = "",
                this.type = "Object3D",
                this.parent = null,
                this.children = [],
                this.up = ye.DefaultUp.clone();
                var t = new _t
                  , e = new ee
                  , r = new yt
                  , n = new _t(1,1,1);
                e._onChange((function() {
                    r.setFromEuler(e, !1)
                }
                )),
                r._onChange((function() {
                    e.setFromQuaternion(r, void 0, !1)
                }
                )),
                Object.defineProperties(this, {
                    position: {
                        configurable: !0,
                        enumerable: !0,
                        value: t
                    },
                    rotation: {
                        configurable: !0,
                        enumerable: !0,
                        value: e
                    },
                    quaternion: {
                        configurable: !0,
                        enumerable: !0,
                        value: r
                    },
                    scale: {
                        configurable: !0,
                        enumerable: !0,
                        value: n
                    },
                    modelViewMatrix: {
                        value: new Xt
                    },
                    normalMatrix: {
                        value: new ut
                    }
                }),
                this.matrix = new Xt,
                this.matrixWorld = new Xt,
                this.matrixAutoUpdate = ye.DefaultMatrixAutoUpdate,
                this.matrixWorldNeedsUpdate = !1,
                this.layers = new ie,
                this.visible = !0,
                this.castShadow = !1,
                this.receiveShadow = !1,
                this.frustumCulled = !0,
                this.renderOrder = 0,
                this.userData = {}
            }
            ye.DefaultUp = new _t(0,1,0),
            ye.DefaultMatrixAutoUpdate = !0,
            ye.prototype = Object.assign(Object.create(tt.prototype), {
                constructor: ye,
                isObject3D: !0,
                onBeforeRender: function() {},
                onAfterRender: function() {},
                applyMatrix4: function(t) {
                    this.matrixAutoUpdate && this.updateMatrix(),
                    this.matrix.premultiply(t),
                    this.matrix.decompose(this.position, this.quaternion, this.scale)
                },
                applyQuaternion: function(t) {
                    return this.quaternion.premultiply(t),
                    this
                },
                setRotationFromAxisAngle: function(t, e) {
                    this.quaternion.setFromAxisAngle(t, e)
                },
                setRotationFromEuler: function(t) {
                    this.quaternion.setFromEuler(t, !0)
                },
                setRotationFromMatrix: function(t) {
                    this.quaternion.setFromRotationMatrix(t)
                },
                setRotationFromQuaternion: function(t) {
                    this.quaternion.copy(t)
                },
                rotateOnAxis: function(t, e) {
                    return se.setFromAxisAngle(t, e),
                    this.quaternion.multiply(se),
                    this
                },
                rotateOnWorldAxis: function(t, e) {
                    return se.setFromAxisAngle(t, e),
                    this.quaternion.premultiply(se),
                    this
                },
                rotateX: function(t) {
                    return this.rotateOnAxis(de, t)
                },
                rotateY: function(t) {
                    return this.rotateOnAxis(fe, t)
                },
                rotateZ: function(t) {
                    return this.rotateOnAxis(me, t)
                },
                translateOnAxis: function(t, e) {
                    return oe.copy(t).applyQuaternion(this.quaternion),
                    this.position.add(oe.multiplyScalar(e)),
                    this
                },
                translateX: function(t) {
                    return this.translateOnAxis(de, t)
                },
                translateY: function(t) {
                    return this.translateOnAxis(fe, t)
                },
                translateZ: function(t) {
                    return this.translateOnAxis(me, t)
                },
                localToWorld: function(t) {
                    return t.applyMatrix4(this.matrixWorld)
                },
                worldToLocal: function(t) {
                    return t.applyMatrix4(le.getInverse(this.matrixWorld))
                },
                lookAt: function(t, e, r) {
                    t.isVector3 ? ce.copy(t) : ce.set(t, e, r);
                    var n = this.parent;
                    this.updateWorldMatrix(!0, !1),
                    he.setFromMatrixPosition(this.matrixWorld),
                    this.isCamera || this.isLight ? le.lookAt(he, ce, this.up) : le.lookAt(ce, he, this.up),
                    this.quaternion.setFromRotationMatrix(le),
                    n && (le.extractRotation(n.matrixWorld),
                    se.setFromRotationMatrix(le),
                    this.quaternion.premultiply(se.inverse()))
                },
                add: function(t) {
                    if (arguments.length > 1) {
                        for (var e = 0; e < arguments.length; e++)
                            this.add(arguments[e]);
                        return this
                    }
                    return t === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", t),
                    this) : (t && t.isObject3D ? (null !== t.parent && t.parent.remove(t),
                    t.parent = this,
                    this.children.push(t),
                    t.dispatchEvent(ve)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", t),
                    this)
                },
                remove: function(t) {
                    if (arguments.length > 1) {
                        for (var e = 0; e < arguments.length; e++)
                            this.remove(arguments[e]);
                        return this
                    }
                    var r = this.children.indexOf(t);
                    return -1 !== r && (t.parent = null,
                    this.children.splice(r, 1),
                    t.dispatchEvent(ge)),
                    this
                },
                clear: function() {
                    for (var t = 0; t < this.children.length; t++) {
                        var e = this.children[t];
                        e.parent = null,
                        e.dispatchEvent(ge)
                    }
                    return this.children.length = 0,
                    this
                },
                attach: function(t) {
                    return this.updateWorldMatrix(!0, !1),
                    le.getInverse(this.matrixWorld),
                    null !== t.parent && (t.parent.updateWorldMatrix(!0, !1),
                    le.multiply(t.parent.matrixWorld)),
                    t.applyMatrix4(le),
                    t.updateWorldMatrix(!1, !1),
                    this.add(t),
                    this
                },
                getObjectById: function(t) {
                    return this.getObjectByProperty("id", t)
                },
                getObjectByName: function(t) {
                    return this.getObjectByProperty("name", t)
                },
                getObjectByProperty: function(t, e) {
                    if (this[t] === e)
                        return this;
                    for (var r = 0, n = this.children.length; r < n; r++) {
                        var i = this.children[r].getObjectByProperty(t, e);
                        if (void 0 !== i)
                            return i
                    }
                },
                getWorldPosition: function(t) {
                    return void 0 === t && (console.warn("THREE.Object3D: .getWorldPosition() target is now required"),
                    t = new _t),
                    this.updateWorldMatrix(!0, !1),
                    t.setFromMatrixPosition(this.matrixWorld)
                },
                getWorldQuaternion: function(t) {
                    return void 0 === t && (console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),
                    t = new yt),
                    this.updateWorldMatrix(!0, !1),
                    this.matrixWorld.decompose(he, t, ue),
                    t
                },
                getWorldScale: function(t) {
                    return void 0 === t && (console.warn("THREE.Object3D: .getWorldScale() target is now required"),
                    t = new _t),
                    this.updateWorldMatrix(!0, !1),
                    this.matrixWorld.decompose(he, pe, t),
                    t
                },
                getWorldDirection: function(t) {
                    void 0 === t && (console.warn("THREE.Object3D: .getWorldDirection() target is now required"),
                    t = new _t),
                    this.updateWorldMatrix(!0, !1);
                    var e = this.matrixWorld.elements;
                    return t.set(e[8], e[9], e[10]).normalize()
                },
                raycast: function() {},
                traverse: function(t) {
                    t(this);
                    for (var e = this.children, r = 0, n = e.length; r < n; r++)
                        e[r].traverse(t)
                },
                traverseVisible: function(t) {
                    if (!1 !== this.visible) {
                        t(this);
                        for (var e = this.children, r = 0, n = e.length; r < n; r++)
                            e[r].traverseVisible(t)
                    }
                },
                traverseAncestors: function(t) {
                    var e = this.parent;
                    null !== e && (t(e),
                    e.traverseAncestors(t))
                },
                updateMatrix: function() {
                    this.matrix.compose(this.position, this.quaternion, this.scale),
                    this.matrixWorldNeedsUpdate = !0
                },
                updateMatrixWorld: function(t) {
                    this.matrixAutoUpdate && this.updateMatrix(),
                    (this.matrixWorldNeedsUpdate || t) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
                    this.matrixWorldNeedsUpdate = !1,
                    t = !0);
                    for (var e = this.children, r = 0, n = e.length; r < n; r++)
                        e[r].updateMatrixWorld(t)
                },
                updateWorldMatrix: function(t, e) {
                    var r = this.parent;
                    if (!0 === t && null !== r && r.updateWorldMatrix(!0, !1),
                    this.matrixAutoUpdate && this.updateMatrix(),
                    null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
                    !0 === e)
                        for (var n = this.children, i = 0, a = n.length; i < a; i++)
                            n[i].updateWorldMatrix(!1, !0)
                },
                toJSON: function(t) {
                    var e = void 0 === t || "string" == typeof t
                      , r = {};
                    e && (t = {
                        geometries: {},
                        materials: {},
                        textures: {},
                        images: {},
                        shapes: {}
                    },
                    r.metadata = {
                        version: 4.5,
                        type: "Object",
                        generator: "Object3D.toJSON"
                    });
                    var n = {};
                    function i(e, r) {
                        return void 0 === e[r.uuid] && (e[r.uuid] = r.toJSON(t)),
                        r.uuid
                    }
                    if (n.uuid = this.uuid,
                    n.type = this.type,
                    "" !== this.name && (n.name = this.name),
                    !0 === this.castShadow && (n.castShadow = !0),
                    !0 === this.receiveShadow && (n.receiveShadow = !0),
                    !1 === this.visible && (n.visible = !1),
                    !1 === this.frustumCulled && (n.frustumCulled = !1),
                    0 !== this.renderOrder && (n.renderOrder = this.renderOrder),
                    "{}" !== JSON.stringify(this.userData) && (n.userData = this.userData),
                    n.layers = this.layers.mask,
                    n.matrix = this.matrix.toArray(),
                    !1 === this.matrixAutoUpdate && (n.matrixAutoUpdate = !1),
                    this.isInstancedMesh && (n.type = "InstancedMesh",
                    n.count = this.count,
                    n.instanceMatrix = this.instanceMatrix.toJSON()),
                    this.isMesh || this.isLine || this.isPoints) {
                        n.geometry = i(t.geometries, this.geometry);
                        var a = this.geometry.parameters;
                        if (void 0 !== a && void 0 !== a.shapes) {
                            var o = a.shapes;
                            if (Array.isArray(o))
                                for (var s = 0, l = o.length; s < l; s++) {
                                    var c = o[s];
                                    i(t.shapes, c)
                                }
                            else
                                i(t.shapes, o)
                        }
                    }
                    if (void 0 !== this.material)
                        if (Array.isArray(this.material)) {
                            for (var h = [], u = 0, p = this.material.length; u < p; u++)
                                h.push(i(t.materials, this.material[u]));
                            n.material = h
                        } else
                            n.material = i(t.materials, this.material);
                    if (this.children.length > 0) {
                        n.children = [];
                        for (var d = 0; d < this.children.length; d++)
                            n.children.push(this.children[d].toJSON(t).object)
                    }
                    if (e) {
                        var f = _(t.geometries)
                          , m = _(t.materials)
                          , v = _(t.textures)
                          , g = _(t.images)
                          , y = _(t.shapes);
                        f.length > 0 && (r.geometries = f),
                        m.length > 0 && (r.materials = m),
                        v.length > 0 && (r.textures = v),
                        g.length > 0 && (r.images = g),
                        y.length > 0 && (r.shapes = y)
                    }
                    return r.object = n,
                    r;
                    function _(t) {
                        var e = [];
                        for (var r in t) {
                            var n = t[r];
                            delete n.metadata,
                            e.push(n)
                        }
                        return e
                    }
                },
                clone: function(t) {
                    return (new this.constructor).copy(this, t)
                },
                copy: function(t, e) {
                    if (void 0 === e && (e = !0),
                    this.name = t.name,
                    this.up.copy(t.up),
                    this.position.copy(t.position),
                    this.rotation.order = t.rotation.order,
                    this.quaternion.copy(t.quaternion),
                    this.scale.copy(t.scale),
                    this.matrix.copy(t.matrix),
                    this.matrixWorld.copy(t.matrixWorld),
                    this.matrixAutoUpdate = t.matrixAutoUpdate,
                    this.matrixWorldNeedsUpdate = t.matrixWorldNeedsUpdate,
                    this.layers.mask = t.layers.mask,
                    this.visible = t.visible,
                    this.castShadow = t.castShadow,
                    this.receiveShadow = t.receiveShadow,
                    this.frustumCulled = t.frustumCulled,
                    this.renderOrder = t.renderOrder,
                    this.userData = JSON.parse(JSON.stringify(t.userData)),
                    !0 === e)
                        for (var r = 0; r < t.children.length; r++) {
                            var n = t.children[r];
                            this.add(n.clone())
                        }
                    return this
                }
            });
            var _e = new _t
              , xe = new _t
              , be = new ut
              , we = function() {
                function t(t, e) {
                    Object.defineProperty(this, "isPlane", {
                        value: !0
                    }),
                    this.normal = void 0 !== t ? t : new _t(1,0,0),
                    this.constant = void 0 !== e ? e : 0
                }
                var e = t.prototype;
                return e.set = function(t, e) {
                    return this.normal.copy(t),
                    this.constant = e,
                    this
                }
                ,
                e.setComponents = function(t, e, r, n) {
                    return this.normal.set(t, e, r),
                    this.constant = n,
                    this
                }
                ,
                e.setFromNormalAndCoplanarPoint = function(t, e) {
                    return this.normal.copy(t),
                    this.constant = -e.dot(this.normal),
                    this
                }
                ,
                e.setFromCoplanarPoints = function(t, e, r) {
                    var n = _e.subVectors(r, e).cross(xe.subVectors(t, e)).normalize();
                    return this.setFromNormalAndCoplanarPoint(n, t),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.normal.copy(t.normal),
                    this.constant = t.constant,
                    this
                }
                ,
                e.normalize = function() {
                    var t = 1 / this.normal.length();
                    return this.normal.multiplyScalar(t),
                    this.constant *= t,
                    this
                }
                ,
                e.negate = function() {
                    return this.constant *= -1,
                    this.normal.negate(),
                    this
                }
                ,
                e.distanceToPoint = function(t) {
                    return this.normal.dot(t) + this.constant
                }
                ,
                e.distanceToSphere = function(t) {
                    return this.distanceToPoint(t.center) - t.radius
                }
                ,
                e.projectPoint = function(t, e) {
                    return void 0 === e && (console.warn("THREE.Plane: .projectPoint() target is now required"),
                    e = new _t),
                    e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)
                }
                ,
                e.intersectLine = function(t, e) {
                    void 0 === e && (console.warn("THREE.Plane: .intersectLine() target is now required"),
                    e = new _t);
                    var r = t.delta(_e)
                      , n = this.normal.dot(r);
                    if (0 === n)
                        return 0 === this.distanceToPoint(t.start) ? e.copy(t.start) : void 0;
                    var i = -(t.start.dot(this.normal) + this.constant) / n;
                    return i < 0 || i > 1 ? void 0 : e.copy(r).multiplyScalar(i).add(t.start)
                }
                ,
                e.intersectsLine = function(t) {
                    var e = this.distanceToPoint(t.start)
                      , r = this.distanceToPoint(t.end);
                    return e < 0 && r > 0 || r < 0 && e > 0
                }
                ,
                e.intersectsBox = function(t) {
                    return t.intersectsPlane(this)
                }
                ,
                e.intersectsSphere = function(t) {
                    return t.intersectsPlane(this)
                }
                ,
                e.coplanarPoint = function(t) {
                    return void 0 === t && (console.warn("THREE.Plane: .coplanarPoint() target is now required"),
                    t = new _t),
                    t.copy(this.normal).multiplyScalar(-this.constant)
                }
                ,
                e.applyMatrix4 = function(t, e) {
                    var r = e || be.getNormalMatrix(t)
                      , n = this.coplanarPoint(_e).applyMatrix4(t)
                      , i = this.normal.applyMatrix3(r).normalize();
                    return this.constant = -n.dot(i),
                    this
                }
                ,
                e.translate = function(t) {
                    return this.constant -= t.dot(this.normal),
                    this
                }
                ,
                e.equals = function(t) {
                    return t.normal.equals(this.normal) && t.constant === this.constant
                }
                ,
                t
            }()
              , Se = new _t
              , Te = new _t
              , Me = new _t
              , Ee = new _t
              , Ae = new _t
              , Pe = new _t
              , Ce = new _t
              , Le = new _t
              , De = new _t
              , Re = new _t
              , Ie = function() {
                function t(t, e, r) {
                    this.a = void 0 !== t ? t : new _t,
                    this.b = void 0 !== e ? e : new _t,
                    this.c = void 0 !== r ? r : new _t
                }
                t.getNormal = function(t, e, r, n) {
                    void 0 === n && (console.warn("THREE.Triangle: .getNormal() target is now required"),
                    n = new _t),
                    n.subVectors(r, e),
                    Se.subVectors(t, e),
                    n.cross(Se);
                    var i = n.lengthSq();
                    return i > 0 ? n.multiplyScalar(1 / Math.sqrt(i)) : n.set(0, 0, 0)
                }
                ,
                t.getBarycoord = function(t, e, r, n, i) {
                    Se.subVectors(n, e),
                    Te.subVectors(r, e),
                    Me.subVectors(t, e);
                    var a = Se.dot(Se)
                      , o = Se.dot(Te)
                      , s = Se.dot(Me)
                      , l = Te.dot(Te)
                      , c = Te.dot(Me)
                      , h = a * l - o * o;
                    if (void 0 === i && (console.warn("THREE.Triangle: .getBarycoord() target is now required"),
                    i = new _t),
                    0 === h)
                        return i.set(-2, -1, -1);
                    var u = 1 / h
                      , p = (l * s - o * c) * u
                      , d = (a * c - o * s) * u;
                    return i.set(1 - p - d, d, p)
                }
                ,
                t.containsPoint = function(t, e, r, n) {
                    return this.getBarycoord(t, e, r, n, Ee),
                    Ee.x >= 0 && Ee.y >= 0 && Ee.x + Ee.y <= 1
                }
                ,
                t.getUV = function(t, e, r, n, i, a, o, s) {
                    return this.getBarycoord(t, e, r, n, Ee),
                    s.set(0, 0),
                    s.addScaledVector(i, Ee.x),
                    s.addScaledVector(a, Ee.y),
                    s.addScaledVector(o, Ee.z),
                    s
                }
                ,
                t.isFrontFacing = function(t, e, r, n) {
                    return Se.subVectors(r, e),
                    Te.subVectors(t, e),
                    Se.cross(Te).dot(n) < 0
                }
                ;
                var e = t.prototype;
                return e.set = function(t, e, r) {
                    return this.a.copy(t),
                    this.b.copy(e),
                    this.c.copy(r),
                    this
                }
                ,
                e.setFromPointsAndIndices = function(t, e, r, n) {
                    return this.a.copy(t[e]),
                    this.b.copy(t[r]),
                    this.c.copy(t[n]),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.a.copy(t.a),
                    this.b.copy(t.b),
                    this.c.copy(t.c),
                    this
                }
                ,
                e.getArea = function() {
                    return Se.subVectors(this.c, this.b),
                    Te.subVectors(this.a, this.b),
                    .5 * Se.cross(Te).length()
                }
                ,
                e.getMidpoint = function(t) {
                    return void 0 === t && (console.warn("THREE.Triangle: .getMidpoint() target is now required"),
                    t = new _t),
                    t.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
                }
                ,
                e.getNormal = function(e) {
                    return t.getNormal(this.a, this.b, this.c, e)
                }
                ,
                e.getPlane = function(t) {
                    return void 0 === t && (console.warn("THREE.Triangle: .getPlane() target is now required"),
                    t = new we),
                    t.setFromCoplanarPoints(this.a, this.b, this.c)
                }
                ,
                e.getBarycoord = function(e, r) {
                    return t.getBarycoord(e, this.a, this.b, this.c, r)
                }
                ,
                e.getUV = function(e, r, n, i, a) {
                    return t.getUV(e, this.a, this.b, this.c, r, n, i, a)
                }
                ,
                e.containsPoint = function(e) {
                    return t.containsPoint(e, this.a, this.b, this.c)
                }
                ,
                e.isFrontFacing = function(e) {
                    return t.isFrontFacing(this.a, this.b, this.c, e)
                }
                ,
                e.intersectsBox = function(t) {
                    return t.intersectsTriangle(this)
                }
                ,
                e.closestPointToPoint = function(t, e) {
                    void 0 === e && (console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),
                    e = new _t);
                    var r, n, i = this.a, a = this.b, o = this.c;
                    Ae.subVectors(a, i),
                    Pe.subVectors(o, i),
                    Le.subVectors(t, i);
                    var s = Ae.dot(Le)
                      , l = Pe.dot(Le);
                    if (s <= 0 && l <= 0)
                        return e.copy(i);
                    De.subVectors(t, a);
                    var c = Ae.dot(De)
                      , h = Pe.dot(De);
                    if (c >= 0 && h <= c)
                        return e.copy(a);
                    var u = s * h - c * l;
                    if (u <= 0 && s >= 0 && c <= 0)
                        return r = s / (s - c),
                        e.copy(i).addScaledVector(Ae, r);
                    Re.subVectors(t, o);
                    var p = Ae.dot(Re)
                      , d = Pe.dot(Re);
                    if (d >= 0 && p <= d)
                        return e.copy(o);
                    var f = p * l - s * d;
                    if (f <= 0 && l >= 0 && d <= 0)
                        return n = l / (l - d),
                        e.copy(i).addScaledVector(Pe, n);
                    var m = c * d - p * h;
                    if (m <= 0 && h - c >= 0 && p - d >= 0)
                        return Ce.subVectors(o, a),
                        n = (h - c) / (h - c + (p - d)),
                        e.copy(a).addScaledVector(Ce, n);
                    var v = 1 / (m + f + u);
                    return r = f * v,
                    n = u * v,
                    e.copy(i).addScaledVector(Ae, r).addScaledVector(Pe, n)
                }
                ,
                e.equals = function(t) {
                    return t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c)
                }
                ,
                t
            }()
              , ke = {
                aliceblue: 15792383,
                antiquewhite: 16444375,
                aqua: 65535,
                aquamarine: 8388564,
                azure: 15794175,
                beige: 16119260,
                bisque: 16770244,
                black: 0,
                blanchedalmond: 16772045,
                blue: 255,
                blueviolet: 9055202,
                brown: 10824234,
                burlywood: 14596231,
                cadetblue: 6266528,
                chartreuse: 8388352,
                chocolate: 13789470,
                coral: 16744272,
                cornflowerblue: 6591981,
                cornsilk: 16775388,
                crimson: 14423100,
                cyan: 65535,
                darkblue: 139,
                darkcyan: 35723,
                darkgoldenrod: 12092939,
                darkgray: 11119017,
                darkgreen: 25600,
                darkgrey: 11119017,
                darkkhaki: 12433259,
                darkmagenta: 9109643,
                darkolivegreen: 5597999,
                darkorange: 16747520,
                darkorchid: 10040012,
                darkred: 9109504,
                darksalmon: 15308410,
                darkseagreen: 9419919,
                darkslateblue: 4734347,
                darkslategray: 3100495,
                darkslategrey: 3100495,
                darkturquoise: 52945,
                darkviolet: 9699539,
                deeppink: 16716947,
                deepskyblue: 49151,
                dimgray: 6908265,
                dimgrey: 6908265,
                dodgerblue: 2003199,
                firebrick: 11674146,
                floralwhite: 16775920,
                forestgreen: 2263842,
                fuchsia: 16711935,
                gainsboro: 14474460,
                ghostwhite: 16316671,
                gold: 16766720,
                goldenrod: 14329120,
                gray: 8421504,
                green: 32768,
                greenyellow: 11403055,
                grey: 8421504,
                honeydew: 15794160,
                hotpink: 16738740,
                indianred: 13458524,
                indigo: 4915330,
                ivory: 16777200,
                khaki: 15787660,
                lavender: 15132410,
                lavenderblush: 16773365,
                lawngreen: 8190976,
                lemonchiffon: 16775885,
                lightblue: 11393254,
                lightcoral: 15761536,
                lightcyan: 14745599,
                lightgoldenrodyellow: 16448210,
                lightgray: 13882323,
                lightgreen: 9498256,
                lightgrey: 13882323,
                lightpink: 16758465,
                lightsalmon: 16752762,
                lightseagreen: 2142890,
                lightskyblue: 8900346,
                lightslategray: 7833753,
                lightslategrey: 7833753,
                lightsteelblue: 11584734,
                lightyellow: 16777184,
                lime: 65280,
                limegreen: 3329330,
                linen: 16445670,
                magenta: 16711935,
                maroon: 8388608,
                mediumaquamarine: 6737322,
                mediumblue: 205,
                mediumorchid: 12211667,
                mediumpurple: 9662683,
                mediumseagreen: 3978097,
                mediumslateblue: 8087790,
                mediumspringgreen: 64154,
                mediumturquoise: 4772300,
                mediumvioletred: 13047173,
                midnightblue: 1644912,
                mintcream: 16121850,
                mistyrose: 16770273,
                moccasin: 16770229,
                navajowhite: 16768685,
                navy: 128,
                oldlace: 16643558,
                olive: 8421376,
                olivedrab: 7048739,
                orange: 16753920,
                orangered: 16729344,
                orchid: 14315734,
                palegoldenrod: 15657130,
                palegreen: 10025880,
                paleturquoise: 11529966,
                palevioletred: 14381203,
                papayawhip: 16773077,
                peachpuff: 16767673,
                peru: 13468991,
                pink: 16761035,
                plum: 14524637,
                powderblue: 11591910,
                purple: 8388736,
                rebeccapurple: 6697881,
                red: 16711680,
                rosybrown: 12357519,
                royalblue: 4286945,
                saddlebrown: 9127187,
                salmon: 16416882,
                sandybrown: 16032864,
                seagreen: 3050327,
                seashell: 16774638,
                sienna: 10506797,
                silver: 12632256,
                skyblue: 8900331,
                slateblue: 6970061,
                slategray: 7372944,
                slategrey: 7372944,
                snow: 16775930,
                springgreen: 65407,
                steelblue: 4620980,
                tan: 13808780,
                teal: 32896,
                thistle: 14204888,
                tomato: 16737095,
                turquoise: 4251856,
                violet: 15631086,
                wheat: 16113331,
                white: 16777215,
                whitesmoke: 16119285,
                yellow: 16776960,
                yellowgreen: 10145074
            }
              , Oe = {
                h: 0,
                s: 0,
                l: 0
            }
              , Fe = {
                h: 0,
                s: 0,
                l: 0
            };
            function Ne(t, e, r) {
                return r < 0 && (r += 1),
                r > 1 && (r -= 1),
                r < 1 / 6 ? t + 6 * (e - t) * r : r < .5 ? e : r < 2 / 3 ? t + 6 * (e - t) * (2 / 3 - r) : t
            }
            function Be(t) {
                return t < .04045 ? .0773993808 * t : Math.pow(.9478672986 * t + .0521327014, 2.4)
            }
            function ze(t) {
                return t < .0031308 ? 12.92 * t : 1.055 * Math.pow(t, .41666) - .055
            }
            var Ge = function() {
                function t(t, e, r) {
                    return Object.defineProperty(this, "isColor", {
                        value: !0
                    }),
                    void 0 === e && void 0 === r ? this.set(t) : this.setRGB(t, e, r)
                }
                var e = t.prototype;
                return e.set = function(t) {
                    return t && t.isColor ? this.copy(t) : "number" == typeof t ? this.setHex(t) : "string" == typeof t && this.setStyle(t),
                    this
                }
                ,
                e.setScalar = function(t) {
                    return this.r = t,
                    this.g = t,
                    this.b = t,
                    this
                }
                ,
                e.setHex = function(t) {
                    return t = Math.floor(t),
                    this.r = (t >> 16 & 255) / 255,
                    this.g = (t >> 8 & 255) / 255,
                    this.b = (255 & t) / 255,
                    this
                }
                ,
                e.setRGB = function(t, e, r) {
                    return this.r = t,
                    this.g = e,
                    this.b = r,
                    this
                }
                ,
                e.setHSL = function(t, e, r) {
                    if (t = it.euclideanModulo(t, 1),
                    e = it.clamp(e, 0, 1),
                    r = it.clamp(r, 0, 1),
                    0 === e)
                        this.r = this.g = this.b = r;
                    else {
                        var n = r <= .5 ? r * (1 + e) : r + e - r * e
                          , i = 2 * r - n;
                        this.r = Ne(i, n, t + 1 / 3),
                        this.g = Ne(i, n, t),
                        this.b = Ne(i, n, t - 1 / 3)
                    }
                    return this
                }
                ,
                e.setStyle = function(t) {
                    function e(e) {
                        void 0 !== e && parseFloat(e) < 1 && console.warn("THREE.Color: Alpha component of " + t + " will be ignored.")
                    }
                    var r;
                    if (r = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)) {
                        var n, i = r[1], a = r[2];
                        switch (i) {
                        case "rgb":
                        case "rgba":
                            if (n = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))
                                return this.r = Math.min(255, parseInt(n[1], 10)) / 255,
                                this.g = Math.min(255, parseInt(n[2], 10)) / 255,
                                this.b = Math.min(255, parseInt(n[3], 10)) / 255,
                                e(n[5]),
                                this;
                            if (n = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))
                                return this.r = Math.min(100, parseInt(n[1], 10)) / 100,
                                this.g = Math.min(100, parseInt(n[2], 10)) / 100,
                                this.b = Math.min(100, parseInt(n[3], 10)) / 100,
                                e(n[5]),
                                this;
                            break;
                        case "hsl":
                        case "hsla":
                            if (n = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)) {
                                var o = parseFloat(n[1]) / 360
                                  , s = parseInt(n[2], 10) / 100
                                  , l = parseInt(n[3], 10) / 100;
                                return e(n[5]),
                                this.setHSL(o, s, l)
                            }
                        }
                    } else if (r = /^\#([A-Fa-f0-9]+)$/.exec(t)) {
                        var c = r[1]
                          , h = c.length;
                        if (3 === h)
                            return this.r = parseInt(c.charAt(0) + c.charAt(0), 16) / 255,
                            this.g = parseInt(c.charAt(1) + c.charAt(1), 16) / 255,
                            this.b = parseInt(c.charAt(2) + c.charAt(2), 16) / 255,
                            this;
                        if (6 === h)
                            return this.r = parseInt(c.charAt(0) + c.charAt(1), 16) / 255,
                            this.g = parseInt(c.charAt(2) + c.charAt(3), 16) / 255,
                            this.b = parseInt(c.charAt(4) + c.charAt(5), 16) / 255,
                            this
                    }
                    return t && t.length > 0 ? this.setColorName(t) : this
                }
                ,
                e.setColorName = function(t) {
                    var e = ke[t];
                    return void 0 !== e ? this.setHex(e) : console.warn("THREE.Color: Unknown color " + t),
                    this
                }
                ,
                e.clone = function() {
                    return new this.constructor(this.r,this.g,this.b)
                }
                ,
                e.copy = function(t) {
                    return this.r = t.r,
                    this.g = t.g,
                    this.b = t.b,
                    this
                }
                ,
                e.copyGammaToLinear = function(t, e) {
                    return void 0 === e && (e = 2),
                    this.r = Math.pow(t.r, e),
                    this.g = Math.pow(t.g, e),
                    this.b = Math.pow(t.b, e),
                    this
                }
                ,
                e.copyLinearToGamma = function(t, e) {
                    void 0 === e && (e = 2);
                    var r = e > 0 ? 1 / e : 1;
                    return this.r = Math.pow(t.r, r),
                    this.g = Math.pow(t.g, r),
                    this.b = Math.pow(t.b, r),
                    this
                }
                ,
                e.convertGammaToLinear = function(t) {
                    return this.copyGammaToLinear(this, t),
                    this
                }
                ,
                e.convertLinearToGamma = function(t) {
                    return this.copyLinearToGamma(this, t),
                    this
                }
                ,
                e.copySRGBToLinear = function(t) {
                    return this.r = Be(t.r),
                    this.g = Be(t.g),
                    this.b = Be(t.b),
                    this
                }
                ,
                e.copyLinearToSRGB = function(t) {
                    return this.r = ze(t.r),
                    this.g = ze(t.g),
                    this.b = ze(t.b),
                    this
                }
                ,
                e.convertSRGBToLinear = function() {
                    return this.copySRGBToLinear(this),
                    this
                }
                ,
                e.convertLinearToSRGB = function() {
                    return this.copyLinearToSRGB(this),
                    this
                }
                ,
                e.getHex = function() {
                    return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
                }
                ,
                e.getHexString = function() {
                    return ("000000" + this.getHex().toString(16)).slice(-6)
                }
                ,
                e.getHSL = function(t) {
                    void 0 === t && (console.warn("THREE.Color: .getHSL() target is now required"),
                    t = {
                        h: 0,
                        s: 0,
                        l: 0
                    });
                    var e, r, n = this.r, i = this.g, a = this.b, o = Math.max(n, i, a), s = Math.min(n, i, a), l = (s + o) / 2;
                    if (s === o)
                        e = 0,
                        r = 0;
                    else {
                        var c = o - s;
                        switch (r = l <= .5 ? c / (o + s) : c / (2 - o - s),
                        o) {
                        case n:
                            e = (i - a) / c + (i < a ? 6 : 0);
                            break;
                        case i:
                            e = (a - n) / c + 2;
                            break;
                        case a:
                            e = (n - i) / c + 4
                        }
                        e /= 6
                    }
                    return t.h = e,
                    t.s = r,
                    t.l = l,
                    t
                }
                ,
                e.getStyle = function() {
                    return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
                }
                ,
                e.offsetHSL = function(t, e, r) {
                    return this.getHSL(Oe),
                    Oe.h += t,
                    Oe.s += e,
                    Oe.l += r,
                    this.setHSL(Oe.h, Oe.s, Oe.l),
                    this
                }
                ,
                e.add = function(t) {
                    return this.r += t.r,
                    this.g += t.g,
                    this.b += t.b,
                    this
                }
                ,
                e.addColors = function(t, e) {
                    return this.r = t.r + e.r,
                    this.g = t.g + e.g,
                    this.b = t.b + e.b,
                    this
                }
                ,
                e.addScalar = function(t) {
                    return this.r += t,
                    this.g += t,
                    this.b += t,
                    this
                }
                ,
                e.sub = function(t) {
                    return this.r = Math.max(0, this.r - t.r),
                    this.g = Math.max(0, this.g - t.g),
                    this.b = Math.max(0, this.b - t.b),
                    this
                }
                ,
                e.multiply = function(t) {
                    return this.r *= t.r,
                    this.g *= t.g,
                    this.b *= t.b,
                    this
                }
                ,
                e.multiplyScalar = function(t) {
                    return this.r *= t,
                    this.g *= t,
                    this.b *= t,
                    this
                }
                ,
                e.lerp = function(t, e) {
                    return this.r += (t.r - this.r) * e,
                    this.g += (t.g - this.g) * e,
                    this.b += (t.b - this.b) * e,
                    this
                }
                ,
                e.lerpHSL = function(t, e) {
                    this.getHSL(Oe),
                    t.getHSL(Fe);
                    var r = it.lerp(Oe.h, Fe.h, e)
                      , n = it.lerp(Oe.s, Fe.s, e)
                      , i = it.lerp(Oe.l, Fe.l, e);
                    return this.setHSL(r, n, i),
                    this
                }
                ,
                e.equals = function(t) {
                    return t.r === this.r && t.g === this.g && t.b === this.b
                }
                ,
                e.fromArray = function(t, e) {
                    return void 0 === e && (e = 0),
                    this.r = t[e],
                    this.g = t[e + 1],
                    this.b = t[e + 2],
                    this
                }
                ,
                e.toArray = function(t, e) {
                    return void 0 === t && (t = []),
                    void 0 === e && (e = 0),
                    t[e] = this.r,
                    t[e + 1] = this.g,
                    t[e + 2] = this.b,
                    t
                }
                ,
                e.fromBufferAttribute = function(t, e) {
                    return this.r = t.getX(e),
                    this.g = t.getY(e),
                    this.b = t.getZ(e),
                    !0 === t.normalized && (this.r /= 255,
                    this.g /= 255,
                    this.b /= 255),
                    this
                }
                ,
                e.toJSON = function() {
                    return this.getHex()
                }
                ,
                t
            }();
            Ge.NAMES = ke,
            Ge.prototype.r = 1,
            Ge.prototype.g = 1,
            Ge.prototype.b = 1;
            var He = function() {
                function t(t, e, r, n, i, a) {
                    this.a = t,
                    this.b = e,
                    this.c = r,
                    this.normal = n && n.isVector3 ? n : new _t,
                    this.vertexNormals = Array.isArray(n) ? n : [],
                    this.color = i && i.isColor ? i : new Ge,
                    this.vertexColors = Array.isArray(i) ? i : [],
                    this.materialIndex = void 0 !== a ? a : 0
                }
                var e = t.prototype;
                return e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    this.a = t.a,
                    this.b = t.b,
                    this.c = t.c,
                    this.normal.copy(t.normal),
                    this.color.copy(t.color),
                    this.materialIndex = t.materialIndex;
                    for (var e = 0, r = t.vertexNormals.length; e < r; e++)
                        this.vertexNormals[e] = t.vertexNormals[e].clone();
                    for (var n = 0, i = t.vertexColors.length; n < i; n++)
                        this.vertexColors[n] = t.vertexColors[n].clone();
                    return this
                }
                ,
                t
            }()
              , Ue = 0;
            function Ve() {
                Object.defineProperty(this, "id", {
                    value: Ue++
                }),
                this.uuid = it.generateUUID(),
                this.name = "",
                this.type = "Material",
                this.fog = !0,
                this.blending = 1,
                this.side = 0,
                this.flatShading = !1,
                this.vertexColors = !1,
                this.opacity = 1,
                this.transparent = !1,
                this.blendSrc = 204,
                this.blendDst = 205,
                this.blendEquation = e,
                this.blendSrcAlpha = null,
                this.blendDstAlpha = null,
                this.blendEquationAlpha = null,
                this.depthFunc = 3,
                this.depthTest = !0,
                this.depthWrite = !0,
                this.stencilWriteMask = 255,
                this.stencilFunc = 519,
                this.stencilRef = 0,
                this.stencilFuncMask = 255,
                this.stencilFail = K,
                this.stencilZFail = K,
                this.stencilZPass = K,
                this.stencilWrite = !1,
                this.clippingPlanes = null,
                this.clipIntersection = !1,
                this.clipShadows = !1,
                this.shadowSide = null,
                this.colorWrite = !0,
                this.precision = null,
                this.polygonOffset = !1,
                this.polygonOffsetFactor = 0,
                this.polygonOffsetUnits = 0,
                this.dithering = !1,
                this.alphaTest = 0,
                this.premultipliedAlpha = !1,
                this.visible = !0,
                this.toneMapped = !0,
                this.userData = {},
                this.version = 0
            }
            function je(t) {
                Ve.call(this),
                this.type = "MeshBasicMaterial",
                this.color = new Ge(16777215),
                this.map = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.specularMap = null,
                this.alphaMap = null,
                this.envMap = null,
                this.combine = 0,
                this.reflectivity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.setValues(t)
            }
            Ve.prototype = Object.assign(Object.create(tt.prototype), {
                constructor: Ve,
                isMaterial: !0,
                onBeforeCompile: function() {},
                customProgramCacheKey: function() {
                    return this.onBeforeCompile.toString()
                },
                setValues: function(t) {
                    if (void 0 !== t)
                        for (var e in t) {
                            var r = t[e];
                            if (void 0 !== r)
                                if ("shading" !== e) {
                                    var n = this[e];
                                    void 0 !== n ? n && n.isColor ? n.set(r) : n && n.isVector3 && r && r.isVector3 ? n.copy(r) : this[e] = r : console.warn("THREE." + this.type + ": '" + e + "' is not a property of this material.")
                                } else
                                    console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."),
                                    this.flatShading = 1 === r;
                            else
                                console.warn("THREE.Material: '" + e + "' parameter is undefined.")
                        }
                },
                toJSON: function(t) {
                    var e = void 0 === t || "string" == typeof t;
                    e && (t = {
                        textures: {},
                        images: {}
                    });
                    var r = {
                        metadata: {
                            version: 4.5,
                            type: "Material",
                            generator: "Material.toJSON"
                        }
                    };
                    function n(t) {
                        var e = [];
                        for (var r in t) {
                            var n = t[r];
                            delete n.metadata,
                            e.push(n)
                        }
                        return e
                    }
                    if (r.uuid = this.uuid,
                    r.type = this.type,
                    "" !== this.name && (r.name = this.name),
                    this.color && this.color.isColor && (r.color = this.color.getHex()),
                    void 0 !== this.roughness && (r.roughness = this.roughness),
                    void 0 !== this.metalness && (r.metalness = this.metalness),
                    this.sheen && this.sheen.isColor && (r.sheen = this.sheen.getHex()),
                    this.emissive && this.emissive.isColor && (r.emissive = this.emissive.getHex()),
                    this.emissiveIntensity && 1 !== this.emissiveIntensity && (r.emissiveIntensity = this.emissiveIntensity),
                    this.specular && this.specular.isColor && (r.specular = this.specular.getHex()),
                    void 0 !== this.shininess && (r.shininess = this.shininess),
                    void 0 !== this.clearcoat && (r.clearcoat = this.clearcoat),
                    void 0 !== this.clearcoatRoughness && (r.clearcoatRoughness = this.clearcoatRoughness),
                    this.clearcoatMap && this.clearcoatMap.isTexture && (r.clearcoatMap = this.clearcoatMap.toJSON(t).uuid),
                    this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture && (r.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(t).uuid),
                    this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (r.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(t).uuid,
                    r.clearcoatNormalScale = this.clearcoatNormalScale.toArray()),
                    this.map && this.map.isTexture && (r.map = this.map.toJSON(t).uuid),
                    this.matcap && this.matcap.isTexture && (r.matcap = this.matcap.toJSON(t).uuid),
                    this.alphaMap && this.alphaMap.isTexture && (r.alphaMap = this.alphaMap.toJSON(t).uuid),
                    this.lightMap && this.lightMap.isTexture && (r.lightMap = this.lightMap.toJSON(t).uuid),
                    this.aoMap && this.aoMap.isTexture && (r.aoMap = this.aoMap.toJSON(t).uuid,
                    r.aoMapIntensity = this.aoMapIntensity),
                    this.bumpMap && this.bumpMap.isTexture && (r.bumpMap = this.bumpMap.toJSON(t).uuid,
                    r.bumpScale = this.bumpScale),
                    this.normalMap && this.normalMap.isTexture && (r.normalMap = this.normalMap.toJSON(t).uuid,
                    r.normalMapType = this.normalMapType,
                    r.normalScale = this.normalScale.toArray()),
                    this.displacementMap && this.displacementMap.isTexture && (r.displacementMap = this.displacementMap.toJSON(t).uuid,
                    r.displacementScale = this.displacementScale,
                    r.displacementBias = this.displacementBias),
                    this.roughnessMap && this.roughnessMap.isTexture && (r.roughnessMap = this.roughnessMap.toJSON(t).uuid),
                    this.metalnessMap && this.metalnessMap.isTexture && (r.metalnessMap = this.metalnessMap.toJSON(t).uuid),
                    this.emissiveMap && this.emissiveMap.isTexture && (r.emissiveMap = this.emissiveMap.toJSON(t).uuid),
                    this.specularMap && this.specularMap.isTexture && (r.specularMap = this.specularMap.toJSON(t).uuid),
                    this.envMap && this.envMap.isTexture && (r.envMap = this.envMap.toJSON(t).uuid,
                    r.reflectivity = this.reflectivity,
                    r.refractionRatio = this.refractionRatio,
                    void 0 !== this.combine && (r.combine = this.combine),
                    void 0 !== this.envMapIntensity && (r.envMapIntensity = this.envMapIntensity)),
                    this.gradientMap && this.gradientMap.isTexture && (r.gradientMap = this.gradientMap.toJSON(t).uuid),
                    void 0 !== this.size && (r.size = this.size),
                    void 0 !== this.sizeAttenuation && (r.sizeAttenuation = this.sizeAttenuation),
                    1 !== this.blending && (r.blending = this.blending),
                    !0 === this.flatShading && (r.flatShading = this.flatShading),
                    0 !== this.side && (r.side = this.side),
                    this.vertexColors && (r.vertexColors = !0),
                    this.opacity < 1 && (r.opacity = this.opacity),
                    !0 === this.transparent && (r.transparent = this.transparent),
                    r.depthFunc = this.depthFunc,
                    r.depthTest = this.depthTest,
                    r.depthWrite = this.depthWrite,
                    r.stencilWrite = this.stencilWrite,
                    r.stencilWriteMask = this.stencilWriteMask,
                    r.stencilFunc = this.stencilFunc,
                    r.stencilRef = this.stencilRef,
                    r.stencilFuncMask = this.stencilFuncMask,
                    r.stencilFail = this.stencilFail,
                    r.stencilZFail = this.stencilZFail,
                    r.stencilZPass = this.stencilZPass,
                    this.rotation && 0 !== this.rotation && (r.rotation = this.rotation),
                    !0 === this.polygonOffset && (r.polygonOffset = !0),
                    0 !== this.polygonOffsetFactor && (r.polygonOffsetFactor = this.polygonOffsetFactor),
                    0 !== this.polygonOffsetUnits && (r.polygonOffsetUnits = this.polygonOffsetUnits),
                    this.linewidth && 1 !== this.linewidth && (r.linewidth = this.linewidth),
                    void 0 !== this.dashSize && (r.dashSize = this.dashSize),
                    void 0 !== this.gapSize && (r.gapSize = this.gapSize),
                    void 0 !== this.scale && (r.scale = this.scale),
                    !0 === this.dithering && (r.dithering = !0),
                    this.alphaTest > 0 && (r.alphaTest = this.alphaTest),
                    !0 === this.premultipliedAlpha && (r.premultipliedAlpha = this.premultipliedAlpha),
                    !0 === this.wireframe && (r.wireframe = this.wireframe),
                    this.wireframeLinewidth > 1 && (r.wireframeLinewidth = this.wireframeLinewidth),
                    "round" !== this.wireframeLinecap && (r.wireframeLinecap = this.wireframeLinecap),
                    "round" !== this.wireframeLinejoin && (r.wireframeLinejoin = this.wireframeLinejoin),
                    !0 === this.morphTargets && (r.morphTargets = !0),
                    !0 === this.morphNormals && (r.morphNormals = !0),
                    !0 === this.skinning && (r.skinning = !0),
                    !1 === this.visible && (r.visible = !1),
                    !1 === this.toneMapped && (r.toneMapped = !1),
                    "{}" !== JSON.stringify(this.userData) && (r.userData = this.userData),
                    e) {
                        var i = n(t.textures)
                          , a = n(t.images);
                        i.length > 0 && (r.textures = i),
                        a.length > 0 && (r.images = a)
                    }
                    return r
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(t) {
                    this.name = t.name,
                    this.fog = t.fog,
                    this.blending = t.blending,
                    this.side = t.side,
                    this.flatShading = t.flatShading,
                    this.vertexColors = t.vertexColors,
                    this.opacity = t.opacity,
                    this.transparent = t.transparent,
                    this.blendSrc = t.blendSrc,
                    this.blendDst = t.blendDst,
                    this.blendEquation = t.blendEquation,
                    this.blendSrcAlpha = t.blendSrcAlpha,
                    this.blendDstAlpha = t.blendDstAlpha,
                    this.blendEquationAlpha = t.blendEquationAlpha,
                    this.depthFunc = t.depthFunc,
                    this.depthTest = t.depthTest,
                    this.depthWrite = t.depthWrite,
                    this.stencilWriteMask = t.stencilWriteMask,
                    this.stencilFunc = t.stencilFunc,
                    this.stencilRef = t.stencilRef,
                    this.stencilFuncMask = t.stencilFuncMask,
                    this.stencilFail = t.stencilFail,
                    this.stencilZFail = t.stencilZFail,
                    this.stencilZPass = t.stencilZPass,
                    this.stencilWrite = t.stencilWrite;
                    var e = t.clippingPlanes
                      , r = null;
                    if (null !== e) {
                        var n = e.length;
                        r = new Array(n);
                        for (var i = 0; i !== n; ++i)
                            r[i] = e[i].clone()
                    }
                    return this.clippingPlanes = r,
                    this.clipIntersection = t.clipIntersection,
                    this.clipShadows = t.clipShadows,
                    this.shadowSide = t.shadowSide,
                    this.colorWrite = t.colorWrite,
                    this.precision = t.precision,
                    this.polygonOffset = t.polygonOffset,
                    this.polygonOffsetFactor = t.polygonOffsetFactor,
                    this.polygonOffsetUnits = t.polygonOffsetUnits,
                    this.dithering = t.dithering,
                    this.alphaTest = t.alphaTest,
                    this.premultipliedAlpha = t.premultipliedAlpha,
                    this.visible = t.visible,
                    this.toneMapped = t.toneMapped,
                    this.userData = JSON.parse(JSON.stringify(t.userData)),
                    this
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            }),
            Object.defineProperty(Ve.prototype, "needsUpdate", {
                set: function(t) {
                    !0 === t && this.version++
                }
            }),
            je.prototype = Object.create(Ve.prototype),
            je.prototype.constructor = je,
            je.prototype.isMeshBasicMaterial = !0,
            je.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this.map = t.map,
                this.lightMap = t.lightMap,
                this.lightMapIntensity = t.lightMapIntensity,
                this.aoMap = t.aoMap,
                this.aoMapIntensity = t.aoMapIntensity,
                this.specularMap = t.specularMap,
                this.alphaMap = t.alphaMap,
                this.envMap = t.envMap,
                this.combine = t.combine,
                this.reflectivity = t.reflectivity,
                this.refractionRatio = t.refractionRatio,
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this.wireframeLinecap = t.wireframeLinecap,
                this.wireframeLinejoin = t.wireframeLinejoin,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this
            }
            ;
            var We = new _t
              , qe = new ht;
            function Xe(t, e, r) {
                if (Array.isArray(t))
                    throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
                this.name = "",
                this.array = t,
                this.itemSize = e,
                this.count = void 0 !== t ? t.length / e : 0,
                this.normalized = !0 === r,
                this.usage = Z,
                this.updateRange = {
                    offset: 0,
                    count: -1
                },
                this.version = 0
            }
            function Ye(t, e, r) {
                Xe.call(this, new Int8Array(t), e, r)
            }
            function $e(t, e, r) {
                Xe.call(this, new Uint8Array(t), e, r)
            }
            function Ke(t, e, r) {
                Xe.call(this, new Uint8ClampedArray(t), e, r)
            }
            function Ze(t, e, r) {
                Xe.call(this, new Int16Array(t), e, r)
            }
            function Je(t, e, r) {
                Xe.call(this, new Uint16Array(t), e, r)
            }
            function Qe(t, e, r) {
                Xe.call(this, new Int32Array(t), e, r)
            }
            function tr(t, e, r) {
                Xe.call(this, new Uint32Array(t), e, r)
            }
            function er(t, e, r) {
                Xe.call(this, new Float32Array(t), e, r)
            }
            function rr(t, e, r) {
                Xe.call(this, new Float64Array(t), e, r)
            }
            Object.defineProperty(Xe.prototype, "needsUpdate", {
                set: function(t) {
                    !0 === t && this.version++
                }
            }),
            Object.assign(Xe.prototype, {
                isBufferAttribute: !0,
                onUploadCallback: function() {},
                setUsage: function(t) {
                    return this.usage = t,
                    this
                },
                copy: function(t) {
                    return this.name = t.name,
                    this.array = new t.array.constructor(t.array),
                    this.itemSize = t.itemSize,
                    this.count = t.count,
                    this.normalized = t.normalized,
                    this.usage = t.usage,
                    this
                },
                copyAt: function(t, e, r) {
                    t *= this.itemSize,
                    r *= e.itemSize;
                    for (var n = 0, i = this.itemSize; n < i; n++)
                        this.array[t + n] = e.array[r + n];
                    return this
                },
                copyArray: function(t) {
                    return this.array.set(t),
                    this
                },
                copyColorsArray: function(t) {
                    for (var e = this.array, r = 0, n = 0, i = t.length; n < i; n++) {
                        var a = t[n];
                        void 0 === a && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", n),
                        a = new Ge),
                        e[r++] = a.r,
                        e[r++] = a.g,
                        e[r++] = a.b
                    }
                    return this
                },
                copyVector2sArray: function(t) {
                    for (var e = this.array, r = 0, n = 0, i = t.length; n < i; n++) {
                        var a = t[n];
                        void 0 === a && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", n),
                        a = new ht),
                        e[r++] = a.x,
                        e[r++] = a.y
                    }
                    return this
                },
                copyVector3sArray: function(t) {
                    for (var e = this.array, r = 0, n = 0, i = t.length; n < i; n++) {
                        var a = t[n];
                        void 0 === a && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", n),
                        a = new _t),
                        e[r++] = a.x,
                        e[r++] = a.y,
                        e[r++] = a.z
                    }
                    return this
                },
                copyVector4sArray: function(t) {
                    for (var e = this.array, r = 0, n = 0, i = t.length; n < i; n++) {
                        var a = t[n];
                        void 0 === a && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", n),
                        a = new mt),
                        e[r++] = a.x,
                        e[r++] = a.y,
                        e[r++] = a.z,
                        e[r++] = a.w
                    }
                    return this
                },
                applyMatrix3: function(t) {
                    if (2 === this.itemSize)
                        for (var e = 0, r = this.count; e < r; e++)
                            qe.fromBufferAttribute(this, e),
                            qe.applyMatrix3(t),
                            this.setXY(e, qe.x, qe.y);
                    else if (3 === this.itemSize)
                        for (var n = 0, i = this.count; n < i; n++)
                            We.fromBufferAttribute(this, n),
                            We.applyMatrix3(t),
                            this.setXYZ(n, We.x, We.y, We.z);
                    return this
                },
                applyMatrix4: function(t) {
                    for (var e = 0, r = this.count; e < r; e++)
                        We.x = this.getX(e),
                        We.y = this.getY(e),
                        We.z = this.getZ(e),
                        We.applyMatrix4(t),
                        this.setXYZ(e, We.x, We.y, We.z);
                    return this
                },
                applyNormalMatrix: function(t) {
                    for (var e = 0, r = this.count; e < r; e++)
                        We.x = this.getX(e),
                        We.y = this.getY(e),
                        We.z = this.getZ(e),
                        We.applyNormalMatrix(t),
                        this.setXYZ(e, We.x, We.y, We.z);
                    return this
                },
                transformDirection: function(t) {
                    for (var e = 0, r = this.count; e < r; e++)
                        We.x = this.getX(e),
                        We.y = this.getY(e),
                        We.z = this.getZ(e),
                        We.transformDirection(t),
                        this.setXYZ(e, We.x, We.y, We.z);
                    return this
                },
                set: function(t, e) {
                    return void 0 === e && (e = 0),
                    this.array.set(t, e),
                    this
                },
                getX: function(t) {
                    return this.array[t * this.itemSize]
                },
                setX: function(t, e) {
                    return this.array[t * this.itemSize] = e,
                    this
                },
                getY: function(t) {
                    return this.array[t * this.itemSize + 1]
                },
                setY: function(t, e) {
                    return this.array[t * this.itemSize + 1] = e,
                    this
                },
                getZ: function(t) {
                    return this.array[t * this.itemSize + 2]
                },
                setZ: function(t, e) {
                    return this.array[t * this.itemSize + 2] = e,
                    this
                },
                getW: function(t) {
                    return this.array[t * this.itemSize + 3]
                },
                setW: function(t, e) {
                    return this.array[t * this.itemSize + 3] = e,
                    this
                },
                setXY: function(t, e, r) {
                    return t *= this.itemSize,
                    this.array[t + 0] = e,
                    this.array[t + 1] = r,
                    this
                },
                setXYZ: function(t, e, r, n) {
                    return t *= this.itemSize,
                    this.array[t + 0] = e,
                    this.array[t + 1] = r,
                    this.array[t + 2] = n,
                    this
                },
                setXYZW: function(t, e, r, n, i) {
                    return t *= this.itemSize,
                    this.array[t + 0] = e,
                    this.array[t + 1] = r,
                    this.array[t + 2] = n,
                    this.array[t + 3] = i,
                    this
                },
                onUpload: function(t) {
                    return this.onUploadCallback = t,
                    this
                },
                clone: function() {
                    return new this.constructor(this.array,this.itemSize).copy(this)
                },
                toJSON: function() {
                    return {
                        itemSize: this.itemSize,
                        type: this.array.constructor.name,
                        array: Array.prototype.slice.call(this.array),
                        normalized: this.normalized
                    }
                }
            }),
            Ye.prototype = Object.create(Xe.prototype),
            Ye.prototype.constructor = Ye,
            $e.prototype = Object.create(Xe.prototype),
            $e.prototype.constructor = $e,
            Ke.prototype = Object.create(Xe.prototype),
            Ke.prototype.constructor = Ke,
            Ze.prototype = Object.create(Xe.prototype),
            Ze.prototype.constructor = Ze,
            Je.prototype = Object.create(Xe.prototype),
            Je.prototype.constructor = Je,
            Qe.prototype = Object.create(Xe.prototype),
            Qe.prototype.constructor = Qe,
            tr.prototype = Object.create(Xe.prototype),
            tr.prototype.constructor = tr,
            er.prototype = Object.create(Xe.prototype),
            er.prototype.constructor = er,
            rr.prototype = Object.create(Xe.prototype),
            rr.prototype.constructor = rr;
            var nr = function() {
                function t() {
                    this.vertices = [],
                    this.normals = [],
                    this.colors = [],
                    this.uvs = [],
                    this.uvs2 = [],
                    this.groups = [],
                    this.morphTargets = {},
                    this.skinWeights = [],
                    this.skinIndices = [],
                    this.boundingBox = null,
                    this.boundingSphere = null,
                    this.verticesNeedUpdate = !1,
                    this.normalsNeedUpdate = !1,
                    this.colorsNeedUpdate = !1,
                    this.uvsNeedUpdate = !1,
                    this.groupsNeedUpdate = !1
                }
                var e = t.prototype;
                return e.computeGroups = function(t) {
                    var e, r, n = [], i = void 0, a = t.faces;
                    for (r = 0; r < a.length; r++) {
                        var o = a[r];
                        o.materialIndex !== i && (i = o.materialIndex,
                        void 0 !== e && (e.count = 3 * r - e.start,
                        n.push(e)),
                        e = {
                            start: 3 * r,
                            materialIndex: i
                        })
                    }
                    void 0 !== e && (e.count = 3 * r - e.start,
                    n.push(e)),
                    this.groups = n
                }
                ,
                e.fromGeometry = function(t) {
                    var e, r = t.faces, n = t.vertices, i = t.faceVertexUvs, a = i[0] && i[0].length > 0, o = i[1] && i[1].length > 0, s = t.morphTargets, l = s.length;
                    if (l > 0) {
                        e = [];
                        for (var c = 0; c < l; c++)
                            e[c] = {
                                name: s[c].name,
                                data: []
                            };
                        this.morphTargets.position = e
                    }
                    var h, u = t.morphNormals, p = u.length;
                    if (p > 0) {
                        h = [];
                        for (var d = 0; d < p; d++)
                            h[d] = {
                                name: u[d].name,
                                data: []
                            };
                        this.morphTargets.normal = h
                    }
                    var f = t.skinIndices
                      , m = t.skinWeights
                      , v = f.length === n.length
                      , g = m.length === n.length;
                    n.length > 0 && 0 === r.length && console.error("THREE.DirectGeometry: Faceless geometries are not supported.");
                    for (var y = 0; y < r.length; y++) {
                        var _ = r[y];
                        this.vertices.push(n[_.a], n[_.b], n[_.c]);
                        var x = _.vertexNormals;
                        if (3 === x.length)
                            this.normals.push(x[0], x[1], x[2]);
                        else {
                            var b = _.normal;
                            this.normals.push(b, b, b)
                        }
                        var w = _.vertexColors;
                        if (3 === w.length)
                            this.colors.push(w[0], w[1], w[2]);
                        else {
                            var S = _.color;
                            this.colors.push(S, S, S)
                        }
                        if (!0 === a) {
                            var T = i[0][y];
                            void 0 !== T ? this.uvs.push(T[0], T[1], T[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", y),
                            this.uvs.push(new ht, new ht, new ht))
                        }
                        if (!0 === o) {
                            var M = i[1][y];
                            void 0 !== M ? this.uvs2.push(M[0], M[1], M[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", y),
                            this.uvs2.push(new ht, new ht, new ht))
                        }
                        for (var E = 0; E < l; E++) {
                            var A = s[E].vertices;
                            e[E].data.push(A[_.a], A[_.b], A[_.c])
                        }
                        for (var P = 0; P < p; P++) {
                            var C = u[P].vertexNormals[y];
                            h[P].data.push(C.a, C.b, C.c)
                        }
                        v && this.skinIndices.push(f[_.a], f[_.b], f[_.c]),
                        g && this.skinWeights.push(m[_.a], m[_.b], m[_.c])
                    }
                    return this.computeGroups(t),
                    this.verticesNeedUpdate = t.verticesNeedUpdate,
                    this.normalsNeedUpdate = t.normalsNeedUpdate,
                    this.colorsNeedUpdate = t.colorsNeedUpdate,
                    this.uvsNeedUpdate = t.uvsNeedUpdate,
                    this.groupsNeedUpdate = t.groupsNeedUpdate,
                    null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()),
                    null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()),
                    this
                }
                ,
                t
            }();
            function ir(t) {
                if (0 === t.length)
                    return -1 / 0;
                for (var e = t[0], r = 1, n = t.length; r < n; ++r)
                    t[r] > e && (e = t[r]);
                return e
            }
            var ar = 1
              , or = new Xt
              , sr = new ye
              , lr = new _t
              , cr = new wt
              , hr = new wt
              , ur = new _t;
            function pr() {
                Object.defineProperty(this, "id", {
                    value: ar += 2
                }),
                this.uuid = it.generateUUID(),
                this.name = "",
                this.type = "BufferGeometry",
                this.index = null,
                this.attributes = {},
                this.morphAttributes = {},
                this.morphTargetsRelative = !1,
                this.groups = [],
                this.boundingBox = null,
                this.boundingSphere = null,
                this.drawRange = {
                    start: 0,
                    count: 1 / 0
                },
                this.userData = {}
            }
            pr.prototype = Object.assign(Object.create(tt.prototype), {
                constructor: pr,
                isBufferGeometry: !0,
                getIndex: function() {
                    return this.index
                },
                setIndex: function(t) {
                    return Array.isArray(t) ? this.index = new (ir(t) > 65535 ? tr : Je)(t,1) : this.index = t,
                    this
                },
                getAttribute: function(t) {
                    return this.attributes[t]
                },
                setAttribute: function(t, e) {
                    return this.attributes[t] = e,
                    this
                },
                deleteAttribute: function(t) {
                    return delete this.attributes[t],
                    this
                },
                addGroup: function(t, e, r) {
                    this.groups.push({
                        start: t,
                        count: e,
                        materialIndex: void 0 !== r ? r : 0
                    })
                },
                clearGroups: function() {
                    this.groups = []
                },
                setDrawRange: function(t, e) {
                    this.drawRange.start = t,
                    this.drawRange.count = e
                },
                applyMatrix4: function(t) {
                    var e = this.attributes.position;
                    void 0 !== e && (e.applyMatrix4(t),
                    e.needsUpdate = !0);
                    var r = this.attributes.normal;
                    if (void 0 !== r) {
                        var n = (new ut).getNormalMatrix(t);
                        r.applyNormalMatrix(n),
                        r.needsUpdate = !0
                    }
                    var i = this.attributes.tangent;
                    return void 0 !== i && (i.transformDirection(t),
                    i.needsUpdate = !0),
                    null !== this.boundingBox && this.computeBoundingBox(),
                    null !== this.boundingSphere && this.computeBoundingSphere(),
                    this
                },
                rotateX: function(t) {
                    return or.makeRotationX(t),
                    this.applyMatrix4(or),
                    this
                },
                rotateY: function(t) {
                    return or.makeRotationY(t),
                    this.applyMatrix4(or),
                    this
                },
                rotateZ: function(t) {
                    return or.makeRotationZ(t),
                    this.applyMatrix4(or),
                    this
                },
                translate: function(t, e, r) {
                    return or.makeTranslation(t, e, r),
                    this.applyMatrix4(or),
                    this
                },
                scale: function(t, e, r) {
                    return or.makeScale(t, e, r),
                    this.applyMatrix4(or),
                    this
                },
                lookAt: function(t) {
                    return sr.lookAt(t),
                    sr.updateMatrix(),
                    this.applyMatrix4(sr.matrix),
                    this
                },
                center: function() {
                    return this.computeBoundingBox(),
                    this.boundingBox.getCenter(lr).negate(),
                    this.translate(lr.x, lr.y, lr.z),
                    this
                },
                setFromObject: function(t) {
                    var e = t.geometry;
                    if (t.isPoints || t.isLine) {
                        var r = new er(3 * e.vertices.length,3)
                          , n = new er(3 * e.colors.length,3);
                        if (this.setAttribute("position", r.copyVector3sArray(e.vertices)),
                        this.setAttribute("color", n.copyColorsArray(e.colors)),
                        e.lineDistances && e.lineDistances.length === e.vertices.length) {
                            var i = new er(e.lineDistances.length,1);
                            this.setAttribute("lineDistance", i.copyArray(e.lineDistances))
                        }
                        null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()),
                        null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone())
                    } else
                        t.isMesh && e && e.isGeometry && this.fromGeometry(e);
                    return this
                },
                setFromPoints: function(t) {
                    for (var e = [], r = 0, n = t.length; r < n; r++) {
                        var i = t[r];
                        e.push(i.x, i.y, i.z || 0)
                    }
                    return this.setAttribute("position", new er(e,3)),
                    this
                },
                updateFromObject: function(t) {
                    var e = t.geometry;
                    if (t.isMesh) {
                        var r = e.__directGeometry;
                        if (!0 === e.elementsNeedUpdate && (r = void 0,
                        e.elementsNeedUpdate = !1),
                        void 0 === r)
                            return this.fromGeometry(e);
                        r.verticesNeedUpdate = e.verticesNeedUpdate,
                        r.normalsNeedUpdate = e.normalsNeedUpdate,
                        r.colorsNeedUpdate = e.colorsNeedUpdate,
                        r.uvsNeedUpdate = e.uvsNeedUpdate,
                        r.groupsNeedUpdate = e.groupsNeedUpdate,
                        e.verticesNeedUpdate = !1,
                        e.normalsNeedUpdate = !1,
                        e.colorsNeedUpdate = !1,
                        e.uvsNeedUpdate = !1,
                        e.groupsNeedUpdate = !1,
                        e = r
                    }
                    if (!0 === e.verticesNeedUpdate) {
                        var n = this.attributes.position;
                        void 0 !== n && (n.copyVector3sArray(e.vertices),
                        n.needsUpdate = !0),
                        e.verticesNeedUpdate = !1
                    }
                    if (!0 === e.normalsNeedUpdate) {
                        var i = this.attributes.normal;
                        void 0 !== i && (i.copyVector3sArray(e.normals),
                        i.needsUpdate = !0),
                        e.normalsNeedUpdate = !1
                    }
                    if (!0 === e.colorsNeedUpdate) {
                        var a = this.attributes.color;
                        void 0 !== a && (a.copyColorsArray(e.colors),
                        a.needsUpdate = !0),
                        e.colorsNeedUpdate = !1
                    }
                    if (e.uvsNeedUpdate) {
                        var o = this.attributes.uv;
                        void 0 !== o && (o.copyVector2sArray(e.uvs),
                        o.needsUpdate = !0),
                        e.uvsNeedUpdate = !1
                    }
                    if (e.lineDistancesNeedUpdate) {
                        var s = this.attributes.lineDistance;
                        void 0 !== s && (s.copyArray(e.lineDistances),
                        s.needsUpdate = !0),
                        e.lineDistancesNeedUpdate = !1
                    }
                    return e.groupsNeedUpdate && (e.computeGroups(t.geometry),
                    this.groups = e.groups,
                    e.groupsNeedUpdate = !1),
                    this
                },
                fromGeometry: function(t) {
                    return t.__directGeometry = (new nr).fromGeometry(t),
                    this.fromDirectGeometry(t.__directGeometry)
                },
                fromDirectGeometry: function(t) {
                    var e = new Float32Array(3 * t.vertices.length);
                    if (this.setAttribute("position", new Xe(e,3).copyVector3sArray(t.vertices)),
                    t.normals.length > 0) {
                        var r = new Float32Array(3 * t.normals.length);
                        this.setAttribute("normal", new Xe(r,3).copyVector3sArray(t.normals))
                    }
                    if (t.colors.length > 0) {
                        var n = new Float32Array(3 * t.colors.length);
                        this.setAttribute("color", new Xe(n,3).copyColorsArray(t.colors))
                    }
                    if (t.uvs.length > 0) {
                        var i = new Float32Array(2 * t.uvs.length);
                        this.setAttribute("uv", new Xe(i,2).copyVector2sArray(t.uvs))
                    }
                    if (t.uvs2.length > 0) {
                        var a = new Float32Array(2 * t.uvs2.length);
                        this.setAttribute("uv2", new Xe(a,2).copyVector2sArray(t.uvs2))
                    }
                    for (var o in this.groups = t.groups,
                    t.morphTargets) {
                        for (var s = [], l = t.morphTargets[o], c = 0, h = l.length; c < h; c++) {
                            var u = l[c]
                              , p = new er(3 * u.data.length,3);
                            p.name = u.name,
                            s.push(p.copyVector3sArray(u.data))
                        }
                        this.morphAttributes[o] = s
                    }
                    if (t.skinIndices.length > 0) {
                        var d = new er(4 * t.skinIndices.length,4);
                        this.setAttribute("skinIndex", d.copyVector4sArray(t.skinIndices))
                    }
                    if (t.skinWeights.length > 0) {
                        var f = new er(4 * t.skinWeights.length,4);
                        this.setAttribute("skinWeight", f.copyVector4sArray(t.skinWeights))
                    }
                    return null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()),
                    null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()),
                    this
                },
                computeBoundingBox: function() {
                    null === this.boundingBox && (this.boundingBox = new wt);
                    var t = this.attributes.position
                      , e = this.morphAttributes.position;
                    if (t && t.isGLBufferAttribute)
                        return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".', this),
                        void this.boundingBox.set(new _t(-1 / 0,-1 / 0,-1 / 0), new _t(1 / 0,1 / 0,1 / 0));
                    if (void 0 !== t) {
                        if (this.boundingBox.setFromBufferAttribute(t),
                        e)
                            for (var r = 0, n = e.length; r < n; r++) {
                                var i = e[r];
                                cr.setFromBufferAttribute(i),
                                this.morphTargetsRelative ? (ur.addVectors(this.boundingBox.min, cr.min),
                                this.boundingBox.expandByPoint(ur),
                                ur.addVectors(this.boundingBox.max, cr.max),
                                this.boundingBox.expandByPoint(ur)) : (this.boundingBox.expandByPoint(cr.min),
                                this.boundingBox.expandByPoint(cr.max))
                            }
                    } else
                        this.boundingBox.makeEmpty();
                    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this)
                },
                computeBoundingSphere: function() {
                    null === this.boundingSphere && (this.boundingSphere = new Bt);
                    var t = this.attributes.position
                      , e = this.morphAttributes.position;
                    if (t && t.isGLBufferAttribute)
                        return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".', this),
                        void this.boundingSphere.set(new _t, 1 / 0);
                    if (t) {
                        var r = this.boundingSphere.center;
                        if (cr.setFromBufferAttribute(t),
                        e)
                            for (var n = 0, i = e.length; n < i; n++) {
                                var a = e[n];
                                hr.setFromBufferAttribute(a),
                                this.morphTargetsRelative ? (ur.addVectors(cr.min, hr.min),
                                cr.expandByPoint(ur),
                                ur.addVectors(cr.max, hr.max),
                                cr.expandByPoint(ur)) : (cr.expandByPoint(hr.min),
                                cr.expandByPoint(hr.max))
                            }
                        cr.getCenter(r);
                        for (var o = 0, s = 0, l = t.count; s < l; s++)
                            ur.fromBufferAttribute(t, s),
                            o = Math.max(o, r.distanceToSquared(ur));
                        if (e)
                            for (var c = 0, h = e.length; c < h; c++)
                                for (var u = e[c], p = this.morphTargetsRelative, d = 0, f = u.count; d < f; d++)
                                    ur.fromBufferAttribute(u, d),
                                    p && (lr.fromBufferAttribute(t, d),
                                    ur.add(lr)),
                                    o = Math.max(o, r.distanceToSquared(ur));
                        this.boundingSphere.radius = Math.sqrt(o),
                        isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this)
                    }
                },
                computeFaceNormals: function() {},
                computeVertexNormals: function() {
                    var t = this.index
                      , e = this.getAttribute("position");
                    if (void 0 !== e) {
                        var r = this.getAttribute("normal");
                        if (void 0 === r)
                            r = new Xe(new Float32Array(3 * e.count),3),
                            this.setAttribute("normal", r);
                        else
                            for (var n = 0, i = r.count; n < i; n++)
                                r.setXYZ(n, 0, 0, 0);
                        var a = new _t
                          , o = new _t
                          , s = new _t
                          , l = new _t
                          , c = new _t
                          , h = new _t
                          , u = new _t
                          , p = new _t;
                        if (t)
                            for (var d = 0, f = t.count; d < f; d += 3) {
                                var m = t.getX(d + 0)
                                  , v = t.getX(d + 1)
                                  , g = t.getX(d + 2);
                                a.fromBufferAttribute(e, m),
                                o.fromBufferAttribute(e, v),
                                s.fromBufferAttribute(e, g),
                                u.subVectors(s, o),
                                p.subVectors(a, o),
                                u.cross(p),
                                l.fromBufferAttribute(r, m),
                                c.fromBufferAttribute(r, v),
                                h.fromBufferAttribute(r, g),
                                l.add(u),
                                c.add(u),
                                h.add(u),
                                r.setXYZ(m, l.x, l.y, l.z),
                                r.setXYZ(v, c.x, c.y, c.z),
                                r.setXYZ(g, h.x, h.y, h.z)
                            }
                        else
                            for (var y = 0, _ = e.count; y < _; y += 3)
                                a.fromBufferAttribute(e, y + 0),
                                o.fromBufferAttribute(e, y + 1),
                                s.fromBufferAttribute(e, y + 2),
                                u.subVectors(s, o),
                                p.subVectors(a, o),
                                u.cross(p),
                                r.setXYZ(y + 0, u.x, u.y, u.z),
                                r.setXYZ(y + 1, u.x, u.y, u.z),
                                r.setXYZ(y + 2, u.x, u.y, u.z);
                        this.normalizeNormals(),
                        r.needsUpdate = !0
                    }
                },
                merge: function(t, e) {
                    if (t && t.isBufferGeometry) {
                        void 0 === e && (e = 0,
                        console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));
                        var r = this.attributes;
                        for (var n in r)
                            if (void 0 !== t.attributes[n])
                                for (var i = r[n].array, a = t.attributes[n], o = a.array, s = a.itemSize * e, l = Math.min(o.length, i.length - s), c = 0, h = s; c < l; c++,
                                h++)
                                    i[h] = o[c];
                        return this
                    }
                    console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", t)
                },
                normalizeNormals: function() {
                    for (var t = this.attributes.normal, e = 0, r = t.count; e < r; e++)
                        ur.fromBufferAttribute(t, e),
                        ur.normalize(),
                        t.setXYZ(e, ur.x, ur.y, ur.z)
                },
                toNonIndexed: function() {
                    function t(t, e) {
                        for (var r = t.array, n = t.itemSize, i = t.normalized, a = new r.constructor(e.length * n), o = 0, s = 0, l = 0, c = e.length; l < c; l++) {
                            o = e[l] * n;
                            for (var h = 0; h < n; h++)
                                a[s++] = r[o++]
                        }
                        return new Xe(a,n,i)
                    }
                    if (null === this.index)
                        return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
                        this;
                    var e = new pr
                      , r = this.index.array
                      , n = this.attributes;
                    for (var i in n) {
                        var a = t(n[i], r);
                        e.setAttribute(i, a)
                    }
                    var o = this.morphAttributes;
                    for (var s in o) {
                        for (var l = [], c = o[s], h = 0, u = c.length; h < u; h++) {
                            var p = t(c[h], r);
                            l.push(p)
                        }
                        e.morphAttributes[s] = l
                    }
                    e.morphTargetsRelative = this.morphTargetsRelative;
                    for (var d = this.groups, f = 0, m = d.length; f < m; f++) {
                        var v = d[f];
                        e.addGroup(v.start, v.count, v.materialIndex)
                    }
                    return e
                },
                toJSON: function() {
                    var t = {
                        metadata: {
                            version: 4.5,
                            type: "BufferGeometry",
                            generator: "BufferGeometry.toJSON"
                        }
                    };
                    if (t.uuid = this.uuid,
                    t.type = this.type,
                    "" !== this.name && (t.name = this.name),
                    Object.keys(this.userData).length > 0 && (t.userData = this.userData),
                    void 0 !== this.parameters) {
                        var e = this.parameters;
                        for (var r in e)
                            void 0 !== e[r] && (t[r] = e[r]);
                        return t
                    }
                    t.data = {
                        attributes: {}
                    };
                    var n = this.index;
                    null !== n && (t.data.index = {
                        type: n.array.constructor.name,
                        array: Array.prototype.slice.call(n.array)
                    });
                    var i = this.attributes;
                    for (var a in i) {
                        var o = i[a]
                          , s = o.toJSON(t.data);
                        "" !== o.name && (s.name = o.name),
                        t.data.attributes[a] = s
                    }
                    var l = {}
                      , c = !1;
                    for (var h in this.morphAttributes) {
                        for (var u = this.morphAttributes[h], p = [], d = 0, f = u.length; d < f; d++) {
                            var m = u[d]
                              , v = m.toJSON(t.data);
                            "" !== m.name && (v.name = m.name),
                            p.push(v)
                        }
                        p.length > 0 && (l[h] = p,
                        c = !0)
                    }
                    c && (t.data.morphAttributes = l,
                    t.data.morphTargetsRelative = this.morphTargetsRelative);
                    var g = this.groups;
                    g.length > 0 && (t.data.groups = JSON.parse(JSON.stringify(g)));
                    var y = this.boundingSphere;
                    return null !== y && (t.data.boundingSphere = {
                        center: y.center.toArray(),
                        radius: y.radius
                    }),
                    t
                },
                clone: function() {
                    return (new pr).copy(this)
                },
                copy: function(t) {
                    this.index = null,
                    this.attributes = {},
                    this.morphAttributes = {},
                    this.groups = [],
                    this.boundingBox = null,
                    this.boundingSphere = null;
                    var e = {};
                    this.name = t.name;
                    var r = t.index;
                    null !== r && this.setIndex(r.clone(e));
                    var n = t.attributes;
                    for (var i in n) {
                        var a = n[i];
                        this.setAttribute(i, a.clone(e))
                    }
                    var o = t.morphAttributes;
                    for (var s in o) {
                        for (var l = [], c = o[s], h = 0, u = c.length; h < u; h++)
                            l.push(c[h].clone(e));
                        this.morphAttributes[s] = l
                    }
                    this.morphTargetsRelative = t.morphTargetsRelative;
                    for (var p = t.groups, d = 0, f = p.length; d < f; d++) {
                        var m = p[d];
                        this.addGroup(m.start, m.count, m.materialIndex)
                    }
                    var v = t.boundingBox;
                    null !== v && (this.boundingBox = v.clone());
                    var g = t.boundingSphere;
                    return null !== g && (this.boundingSphere = g.clone()),
                    this.drawRange.start = t.drawRange.start,
                    this.drawRange.count = t.drawRange.count,
                    this.userData = t.userData,
                    this
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            });
            var dr = new Xt
              , fr = new qt
              , mr = new Bt
              , vr = new _t
              , gr = new _t
              , yr = new _t
              , _r = new _t
              , xr = new _t
              , br = new _t
              , wr = new _t
              , Sr = new _t
              , Tr = new _t
              , Mr = new ht
              , Er = new ht
              , Ar = new ht
              , Pr = new _t
              , Cr = new _t;
            function Lr(t, e) {
                ye.call(this),
                this.type = "Mesh",
                this.geometry = void 0 !== t ? t : new pr,
                this.material = void 0 !== e ? e : new je,
                this.updateMorphTargets()
            }
            function Dr(t, e, r, n, i, a, o, s) {
                if (null === (1 === e.side ? n.intersectTriangle(o, a, i, !0, s) : n.intersectTriangle(i, a, o, 2 !== e.side, s)))
                    return null;
                Cr.copy(s),
                Cr.applyMatrix4(t.matrixWorld);
                var l = r.ray.origin.distanceTo(Cr);
                return l < r.near || l > r.far ? null : {
                    distance: l,
                    point: Cr.clone(),
                    object: t
                }
            }
            function Rr(t, e, r, n, i, a, o, s, l, c, h, u) {
                vr.fromBufferAttribute(i, c),
                gr.fromBufferAttribute(i, h),
                yr.fromBufferAttribute(i, u);
                var p = t.morphTargetInfluences;
                if (e.morphTargets && a && p) {
                    wr.set(0, 0, 0),
                    Sr.set(0, 0, 0),
                    Tr.set(0, 0, 0);
                    for (var d = 0, f = a.length; d < f; d++) {
                        var m = p[d]
                          , v = a[d];
                        0 !== m && (_r.fromBufferAttribute(v, c),
                        xr.fromBufferAttribute(v, h),
                        br.fromBufferAttribute(v, u),
                        o ? (wr.addScaledVector(_r, m),
                        Sr.addScaledVector(xr, m),
                        Tr.addScaledVector(br, m)) : (wr.addScaledVector(_r.sub(vr), m),
                        Sr.addScaledVector(xr.sub(gr), m),
                        Tr.addScaledVector(br.sub(yr), m)))
                    }
                    vr.add(wr),
                    gr.add(Sr),
                    yr.add(Tr)
                }
                t.isSkinnedMesh && (t.boneTransform(c, vr),
                t.boneTransform(h, gr),
                t.boneTransform(u, yr));
                var g = Dr(t, e, r, n, vr, gr, yr, Pr);
                if (g) {
                    s && (Mr.fromBufferAttribute(s, c),
                    Er.fromBufferAttribute(s, h),
                    Ar.fromBufferAttribute(s, u),
                    g.uv = Ie.getUV(Pr, vr, gr, yr, Mr, Er, Ar, new ht)),
                    l && (Mr.fromBufferAttribute(l, c),
                    Er.fromBufferAttribute(l, h),
                    Ar.fromBufferAttribute(l, u),
                    g.uv2 = Ie.getUV(Pr, vr, gr, yr, Mr, Er, Ar, new ht));
                    var y = new He(c,h,u);
                    Ie.getNormal(vr, gr, yr, y.normal),
                    g.face = y
                }
                return g
            }
            Lr.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: Lr,
                isMesh: !0,
                copy: function(t) {
                    return ye.prototype.copy.call(this, t),
                    void 0 !== t.morphTargetInfluences && (this.morphTargetInfluences = t.morphTargetInfluences.slice()),
                    void 0 !== t.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, t.morphTargetDictionary)),
                    this.material = t.material,
                    this.geometry = t.geometry,
                    this
                },
                updateMorphTargets: function() {
                    var t = this.geometry;
                    if (t.isBufferGeometry) {
                        var e = t.morphAttributes
                          , r = Object.keys(e);
                        if (r.length > 0) {
                            var n = e[r[0]];
                            if (void 0 !== n) {
                                this.morphTargetInfluences = [],
                                this.morphTargetDictionary = {};
                                for (var i = 0, a = n.length; i < a; i++) {
                                    var o = n[i].name || String(i);
                                    this.morphTargetInfluences.push(0),
                                    this.morphTargetDictionary[o] = i
                                }
                            }
                        }
                    } else {
                        var s = t.morphTargets;
                        void 0 !== s && s.length > 0 && console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")
                    }
                },
                raycast: function(t, e) {
                    var r, n = this.geometry, i = this.material, a = this.matrixWorld;
                    if (void 0 !== i && (null === n.boundingSphere && n.computeBoundingSphere(),
                    mr.copy(n.boundingSphere),
                    mr.applyMatrix4(a),
                    !1 !== t.ray.intersectsSphere(mr) && (dr.getInverse(a),
                    fr.copy(t.ray).applyMatrix4(dr),
                    null === n.boundingBox || !1 !== fr.intersectsBox(n.boundingBox))))
                        if (n.isBufferGeometry) {
                            var o = n.index
                              , s = n.attributes.position
                              , l = n.morphAttributes.position
                              , c = n.morphTargetsRelative
                              , h = n.attributes.uv
                              , u = n.attributes.uv2
                              , p = n.groups
                              , d = n.drawRange;
                            if (null !== o)
                                if (Array.isArray(i))
                                    for (var f = 0, m = p.length; f < m; f++)
                                        for (var v = p[f], g = i[v.materialIndex], y = Math.max(v.start, d.start), _ = Math.min(v.start + v.count, d.start + d.count); y < _; y += 3) {
                                            var x = o.getX(y)
                                              , b = o.getX(y + 1)
                                              , w = o.getX(y + 2);
                                            (r = Rr(this, g, t, fr, s, l, c, h, u, x, b, w)) && (r.faceIndex = Math.floor(y / 3),
                                            r.face.materialIndex = v.materialIndex,
                                            e.push(r))
                                        }
                                else
                                    for (var S = Math.max(0, d.start), T = Math.min(o.count, d.start + d.count); S < T; S += 3) {
                                        var M = o.getX(S)
                                          , E = o.getX(S + 1)
                                          , A = o.getX(S + 2);
                                        (r = Rr(this, i, t, fr, s, l, c, h, u, M, E, A)) && (r.faceIndex = Math.floor(S / 3),
                                        e.push(r))
                                    }
                            else if (void 0 !== s)
                                if (Array.isArray(i))
                                    for (var P = 0, C = p.length; P < C; P++)
                                        for (var L = p[P], D = i[L.materialIndex], R = Math.max(L.start, d.start), I = Math.min(L.start + L.count, d.start + d.count); R < I; R += 3)
                                            (r = Rr(this, D, t, fr, s, l, c, h, u, R, R + 1, R + 2)) && (r.faceIndex = Math.floor(R / 3),
                                            r.face.materialIndex = L.materialIndex,
                                            e.push(r));
                                else
                                    for (var k = Math.max(0, d.start), O = Math.min(s.count, d.start + d.count); k < O; k += 3)
                                        (r = Rr(this, i, t, fr, s, l, c, h, u, k, k + 1, k + 2)) && (r.faceIndex = Math.floor(k / 3),
                                        e.push(r))
                        } else if (n.isGeometry) {
                            var F, N = Array.isArray(i), B = n.vertices, z = n.faces, G = n.faceVertexUvs[0];
                            G.length > 0 && (F = G);
                            for (var H = 0, U = z.length; H < U; H++) {
                                var V = z[H]
                                  , j = N ? i[V.materialIndex] : i;
                                if (void 0 !== j) {
                                    var W = B[V.a]
                                      , q = B[V.b]
                                      , X = B[V.c];
                                    if (r = Dr(this, j, t, fr, W, q, X, Pr)) {
                                        if (F && F[H]) {
                                            var Y = F[H];
                                            Mr.copy(Y[0]),
                                            Er.copy(Y[1]),
                                            Ar.copy(Y[2]),
                                            r.uv = Ie.getUV(Pr, W, q, X, Mr, Er, Ar, new ht)
                                        }
                                        r.face = V,
                                        r.faceIndex = H,
                                        e.push(r)
                                    }
                                }
                            }
                        }
                }
            });
            var Ir = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    void 0 === e && (e = 1),
                    void 0 === r && (r = 1),
                    void 0 === n && (n = 1),
                    void 0 === i && (i = 1),
                    void 0 === a && (a = 1),
                    void 0 === o && (o = 1),
                    (s = t.call(this) || this).type = "BoxBufferGeometry",
                    s.parameters = {
                        width: e,
                        height: r,
                        depth: n,
                        widthSegments: i,
                        heightSegments: a,
                        depthSegments: o
                    };
                    var l = lt(s);
                    i = Math.floor(i),
                    a = Math.floor(a),
                    o = Math.floor(o);
                    var c = []
                      , h = []
                      , u = []
                      , p = []
                      , d = 0
                      , f = 0;
                    function m(t, e, r, n, i, a, o, s, m, v, g) {
                        for (var y = a / m, _ = o / v, x = a / 2, b = o / 2, w = s / 2, S = m + 1, T = v + 1, M = 0, E = 0, A = new _t, P = 0; P < T; P++)
                            for (var C = P * _ - b, L = 0; L < S; L++) {
                                var D = L * y - x;
                                A[t] = D * n,
                                A[e] = C * i,
                                A[r] = w,
                                h.push(A.x, A.y, A.z),
                                A[t] = 0,
                                A[e] = 0,
                                A[r] = s > 0 ? 1 : -1,
                                u.push(A.x, A.y, A.z),
                                p.push(L / m),
                                p.push(1 - P / v),
                                M += 1
                            }
                        for (var R = 0; R < v; R++)
                            for (var I = 0; I < m; I++) {
                                var k = d + I + S * R
                                  , O = d + I + S * (R + 1)
                                  , F = d + (I + 1) + S * (R + 1)
                                  , N = d + (I + 1) + S * R;
                                c.push(k, O, N),
                                c.push(O, F, N),
                                E += 6
                            }
                        l.addGroup(f, E, g),
                        f += E,
                        d += M
                    }
                    return m("z", "y", "x", -1, -1, n, r, e, o, a, 0),
                    m("z", "y", "x", 1, -1, n, r, -e, o, a, 1),
                    m("x", "z", "y", 1, 1, e, n, r, i, o, 2),
                    m("x", "z", "y", 1, -1, e, n, -r, i, o, 3),
                    m("x", "y", "z", 1, -1, e, r, n, i, a, 4),
                    m("x", "y", "z", -1, -1, e, r, -n, i, a, 5),
                    s.setIndex(c),
                    s.setAttribute("position", new er(h,3)),
                    s.setAttribute("normal", new er(u,3)),
                    s.setAttribute("uv", new er(p,2)),
                    s
                }
                return st(e, t),
                e
            }(pr);
            function kr(t) {
                var e = {};
                for (var r in t)
                    for (var n in e[r] = {},
                    t[r]) {
                        var i = t[r][n];
                        i && (i.isColor || i.isMatrix3 || i.isMatrix4 || i.isVector2 || i.isVector3 || i.isVector4 || i.isTexture) ? e[r][n] = i.clone() : Array.isArray(i) ? e[r][n] = i.slice() : e[r][n] = i
                    }
                return e
            }
            function Or(t) {
                for (var e = {}, r = 0; r < t.length; r++) {
                    var n = kr(t[r]);
                    for (var i in n)
                        e[i] = n[i]
                }
                return e
            }
            var Fr = {
                clone: kr,
                merge: Or
            };
            function Nr(t) {
                Ve.call(this),
                this.type = "ShaderMaterial",
                this.defines = {},
                this.uniforms = {},
                this.vertexShader = "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
                this.fragmentShader = "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",
                this.linewidth = 1,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.fog = !1,
                this.lights = !1,
                this.clipping = !1,
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.extensions = {
                    derivatives: !1,
                    fragDepth: !1,
                    drawBuffers: !1,
                    shaderTextureLOD: !1
                },
                this.defaultAttributeValues = {
                    color: [1, 1, 1],
                    uv: [0, 0],
                    uv2: [0, 0]
                },
                this.index0AttributeName = void 0,
                this.uniformsNeedUpdate = !1,
                this.glslVersion = null,
                void 0 !== t && (void 0 !== t.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),
                this.setValues(t))
            }
            function Br() {
                ye.call(this),
                this.type = "Camera",
                this.matrixWorldInverse = new Xt,
                this.projectionMatrix = new Xt,
                this.projectionMatrixInverse = new Xt
            }
            function zr(t, e, r, n) {
                Br.call(this),
                this.type = "PerspectiveCamera",
                this.fov = void 0 !== t ? t : 50,
                this.zoom = 1,
                this.near = void 0 !== r ? r : .1,
                this.far = void 0 !== n ? n : 2e3,
                this.focus = 10,
                this.aspect = void 0 !== e ? e : 1,
                this.view = null,
                this.filmGauge = 35,
                this.filmOffset = 0,
                this.updateProjectionMatrix()
            }
            Nr.prototype = Object.create(Ve.prototype),
            Nr.prototype.constructor = Nr,
            Nr.prototype.isShaderMaterial = !0,
            Nr.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.fragmentShader = t.fragmentShader,
                this.vertexShader = t.vertexShader,
                this.uniforms = kr(t.uniforms),
                this.defines = Object.assign({}, t.defines),
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this.lights = t.lights,
                this.clipping = t.clipping,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.morphNormals = t.morphNormals,
                this.extensions = Object.assign({}, t.extensions),
                this.glslVersion = t.glslVersion,
                this
            }
            ,
            Nr.prototype.toJSON = function(t) {
                var e = Ve.prototype.toJSON.call(this, t);
                for (var r in e.glslVersion = this.glslVersion,
                e.uniforms = {},
                this.uniforms) {
                    var n = this.uniforms[r].value;
                    n && n.isTexture ? e.uniforms[r] = {
                        type: "t",
                        value: n.toJSON(t).uuid
                    } : n && n.isColor ? e.uniforms[r] = {
                        type: "c",
                        value: n.getHex()
                    } : n && n.isVector2 ? e.uniforms[r] = {
                        type: "v2",
                        value: n.toArray()
                    } : n && n.isVector3 ? e.uniforms[r] = {
                        type: "v3",
                        value: n.toArray()
                    } : n && n.isVector4 ? e.uniforms[r] = {
                        type: "v4",
                        value: n.toArray()
                    } : n && n.isMatrix3 ? e.uniforms[r] = {
                        type: "m3",
                        value: n.toArray()
                    } : n && n.isMatrix4 ? e.uniforms[r] = {
                        type: "m4",
                        value: n.toArray()
                    } : e.uniforms[r] = {
                        value: n
                    }
                }
                Object.keys(this.defines).length > 0 && (e.defines = this.defines),
                e.vertexShader = this.vertexShader,
                e.fragmentShader = this.fragmentShader;
                var i = {};
                for (var a in this.extensions)
                    !0 === this.extensions[a] && (i[a] = !0);
                return Object.keys(i).length > 0 && (e.extensions = i),
                e
            }
            ,
            Br.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: Br,
                isCamera: !0,
                copy: function(t, e) {
                    return ye.prototype.copy.call(this, t, e),
                    this.matrixWorldInverse.copy(t.matrixWorldInverse),
                    this.projectionMatrix.copy(t.projectionMatrix),
                    this.projectionMatrixInverse.copy(t.projectionMatrixInverse),
                    this
                },
                getWorldDirection: function(t) {
                    void 0 === t && (console.warn("THREE.Camera: .getWorldDirection() target is now required"),
                    t = new _t),
                    this.updateWorldMatrix(!0, !1);
                    var e = this.matrixWorld.elements;
                    return t.set(-e[8], -e[9], -e[10]).normalize()
                },
                updateMatrixWorld: function(t) {
                    ye.prototype.updateMatrixWorld.call(this, t),
                    this.matrixWorldInverse.getInverse(this.matrixWorld)
                },
                updateWorldMatrix: function(t, e) {
                    ye.prototype.updateWorldMatrix.call(this, t, e),
                    this.matrixWorldInverse.getInverse(this.matrixWorld)
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                }
            }),
            zr.prototype = Object.assign(Object.create(Br.prototype), {
                constructor: zr,
                isPerspectiveCamera: !0,
                copy: function(t, e) {
                    return Br.prototype.copy.call(this, t, e),
                    this.fov = t.fov,
                    this.zoom = t.zoom,
                    this.near = t.near,
                    this.far = t.far,
                    this.focus = t.focus,
                    this.aspect = t.aspect,
                    this.view = null === t.view ? null : Object.assign({}, t.view),
                    this.filmGauge = t.filmGauge,
                    this.filmOffset = t.filmOffset,
                    this
                },
                setFocalLength: function(t) {
                    var e = .5 * this.getFilmHeight() / t;
                    this.fov = 2 * it.RAD2DEG * Math.atan(e),
                    this.updateProjectionMatrix()
                },
                getFocalLength: function() {
                    var t = Math.tan(.5 * it.DEG2RAD * this.fov);
                    return .5 * this.getFilmHeight() / t
                },
                getEffectiveFOV: function() {
                    return 2 * it.RAD2DEG * Math.atan(Math.tan(.5 * it.DEG2RAD * this.fov) / this.zoom)
                },
                getFilmWidth: function() {
                    return this.filmGauge * Math.min(this.aspect, 1)
                },
                getFilmHeight: function() {
                    return this.filmGauge / Math.max(this.aspect, 1)
                },
                setViewOffset: function(t, e, r, n, i, a) {
                    this.aspect = t / e,
                    null === this.view && (this.view = {
                        enabled: !0,
                        fullWidth: 1,
                        fullHeight: 1,
                        offsetX: 0,
                        offsetY: 0,
                        width: 1,
                        height: 1
                    }),
                    this.view.enabled = !0,
                    this.view.fullWidth = t,
                    this.view.fullHeight = e,
                    this.view.offsetX = r,
                    this.view.offsetY = n,
                    this.view.width = i,
                    this.view.height = a,
                    this.updateProjectionMatrix()
                },
                clearViewOffset: function() {
                    null !== this.view && (this.view.enabled = !1),
                    this.updateProjectionMatrix()
                },
                updateProjectionMatrix: function() {
                    var t = this.near
                      , e = t * Math.tan(.5 * it.DEG2RAD * this.fov) / this.zoom
                      , r = 2 * e
                      , n = this.aspect * r
                      , i = -.5 * n
                      , a = this.view;
                    if (null !== this.view && this.view.enabled) {
                        var o = a.fullWidth
                          , s = a.fullHeight;
                        i += a.offsetX * n / o,
                        e -= a.offsetY * r / s,
                        n *= a.width / o,
                        r *= a.height / s
                    }
                    var l = this.filmOffset;
                    0 !== l && (i += t * l / this.getFilmWidth()),
                    this.projectionMatrix.makePerspective(i, i + n, e, e - r, t, this.far),
                    this.projectionMatrixInverse.getInverse(this.projectionMatrix)
                },
                toJSON: function(t) {
                    var e = ye.prototype.toJSON.call(this, t);
                    return e.object.fov = this.fov,
                    e.object.zoom = this.zoom,
                    e.object.near = this.near,
                    e.object.far = this.far,
                    e.object.focus = this.focus,
                    e.object.aspect = this.aspect,
                    null !== this.view && (e.object.view = Object.assign({}, this.view)),
                    e.object.filmGauge = this.filmGauge,
                    e.object.filmOffset = this.filmOffset,
                    e
                }
            });
            var Gr = 90;
            function Hr(t, e, r) {
                if (ye.call(this),
                this.type = "CubeCamera",
                !0 === r.isWebGLCubeRenderTarget) {
                    this.renderTarget = r;
                    var n = new zr(Gr,1,t,e);
                    n.layers = this.layers,
                    n.up.set(0, -1, 0),
                    n.lookAt(new _t(1,0,0)),
                    this.add(n);
                    var i = new zr(Gr,1,t,e);
                    i.layers = this.layers,
                    i.up.set(0, -1, 0),
                    i.lookAt(new _t(-1,0,0)),
                    this.add(i);
                    var a = new zr(Gr,1,t,e);
                    a.layers = this.layers,
                    a.up.set(0, 0, 1),
                    a.lookAt(new _t(0,1,0)),
                    this.add(a);
                    var o = new zr(Gr,1,t,e);
                    o.layers = this.layers,
                    o.up.set(0, 0, -1),
                    o.lookAt(new _t(0,-1,0)),
                    this.add(o);
                    var s = new zr(Gr,1,t,e);
                    s.layers = this.layers,
                    s.up.set(0, -1, 0),
                    s.lookAt(new _t(0,0,1)),
                    this.add(s);
                    var l = new zr(Gr,1,t,e);
                    l.layers = this.layers,
                    l.up.set(0, -1, 0),
                    l.lookAt(new _t(0,0,-1)),
                    this.add(l),
                    this.update = function(t, e) {
                        null === this.parent && this.updateMatrixWorld();
                        var c = t.xr.enabled
                          , h = t.getRenderTarget();
                        t.xr.enabled = !1;
                        var u = r.texture.generateMipmaps;
                        r.texture.generateMipmaps = !1,
                        t.setRenderTarget(r, 0),
                        t.render(e, n),
                        t.setRenderTarget(r, 1),
                        t.render(e, i),
                        t.setRenderTarget(r, 2),
                        t.render(e, a),
                        t.setRenderTarget(r, 3),
                        t.render(e, o),
                        t.setRenderTarget(r, 4),
                        t.render(e, s),
                        r.texture.generateMipmaps = u,
                        t.setRenderTarget(r, 5),
                        t.render(e, l),
                        t.setRenderTarget(h),
                        t.xr.enabled = c
                    }
                } else
                    console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")
            }
            function Ur(t, e, r, n, a, o, s, l, c, h) {
                t = void 0 !== t ? t : [],
                e = void 0 !== e ? e : i,
                s = void 0 !== s ? s : T,
                ft.call(this, t, e, r, n, a, o, s, l, c, h),
                this.flipY = !1,
                this._needsFlipEnvMap = !0
            }
            function Vr(t, e, r) {
                Number.isInteger(e) && (console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),
                e = r),
                vt.call(this, t, t, e),
                e = e || {},
                this.texture = new Ur(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),
                this.texture._needsFlipEnvMap = !1
            }
            function jr(t, e, r, n, i, a, o, s, l, c, h, u) {
                ft.call(this, null, a, o, s, l, c, n, i, h, u),
                this.image = {
                    data: t || null,
                    width: e || 1,
                    height: r || 1
                },
                this.magFilter = void 0 !== l ? l : d,
                this.minFilter = void 0 !== c ? c : d,
                this.generateMipmaps = !1,
                this.flipY = !1,
                this.unpackAlignment = 1,
                this.needsUpdate = !0
            }
            Hr.prototype = Object.create(ye.prototype),
            Hr.prototype.constructor = Hr,
            Ur.prototype = Object.create(ft.prototype),
            Ur.prototype.constructor = Ur,
            Ur.prototype.isCubeTexture = !0,
            Object.defineProperty(Ur.prototype, "images", {
                get: function() {
                    return this.image
                },
                set: function(t) {
                    this.image = t
                }
            }),
            Vr.prototype = Object.create(vt.prototype),
            Vr.prototype.constructor = Vr,
            Vr.prototype.isWebGLCubeRenderTarget = !0,
            Vr.prototype.fromEquirectangularTexture = function(t, e) {
                this.texture.type = e.type,
                this.texture.format = M,
                this.texture.encoding = e.encoding,
                this.texture.generateMipmaps = e.generateMipmaps,
                this.texture.minFilter = e.minFilter,
                this.texture.magFilter = e.magFilter;
                var r = new Ir(5,5,5)
                  , n = new Nr({
                    name: "CubemapFromEquirect",
                    uniforms: kr({
                        tEquirect: {
                            value: null
                        }
                    }),
                    vertexShader: "\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",
                    fragmentShader: "\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",
                    side: 1,
                    blending: 0
                });
                n.uniforms.tEquirect.value = e;
                var i = new Lr(r,n)
                  , a = e.minFilter;
                return e.minFilter === g && (e.minFilter = v),
                new Hr(1,10,this).update(t, i),
                e.minFilter = a,
                i.geometry.dispose(),
                i.material.dispose(),
                this
            }
            ,
            Vr.prototype.clear = function(t, e, r, n) {
                for (var i = t.getRenderTarget(), a = 0; a < 6; a++)
                    t.setRenderTarget(this, a),
                    t.clear(e, r, n);
                t.setRenderTarget(i)
            }
            ,
            jr.prototype = Object.create(ft.prototype),
            jr.prototype.constructor = jr,
            jr.prototype.isDataTexture = !0;
            var Wr = new Bt
              , qr = new _t
              , Xr = function() {
                function t(t, e, r, n, i, a) {
                    this.planes = [void 0 !== t ? t : new we, void 0 !== e ? e : new we, void 0 !== r ? r : new we, void 0 !== n ? n : new we, void 0 !== i ? i : new we, void 0 !== a ? a : new we]
                }
                var e = t.prototype;
                return e.set = function(t, e, r, n, i, a) {
                    var o = this.planes;
                    return o[0].copy(t),
                    o[1].copy(e),
                    o[2].copy(r),
                    o[3].copy(n),
                    o[4].copy(i),
                    o[5].copy(a),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    for (var e = this.planes, r = 0; r < 6; r++)
                        e[r].copy(t.planes[r]);
                    return this
                }
                ,
                e.setFromProjectionMatrix = function(t) {
                    var e = this.planes
                      , r = t.elements
                      , n = r[0]
                      , i = r[1]
                      , a = r[2]
                      , o = r[3]
                      , s = r[4]
                      , l = r[5]
                      , c = r[6]
                      , h = r[7]
                      , u = r[8]
                      , p = r[9]
                      , d = r[10]
                      , f = r[11]
                      , m = r[12]
                      , v = r[13]
                      , g = r[14]
                      , y = r[15];
                    return e[0].setComponents(o - n, h - s, f - u, y - m).normalize(),
                    e[1].setComponents(o + n, h + s, f + u, y + m).normalize(),
                    e[2].setComponents(o + i, h + l, f + p, y + v).normalize(),
                    e[3].setComponents(o - i, h - l, f - p, y - v).normalize(),
                    e[4].setComponents(o - a, h - c, f - d, y - g).normalize(),
                    e[5].setComponents(o + a, h + c, f + d, y + g).normalize(),
                    this
                }
                ,
                e.intersectsObject = function(t) {
                    var e = t.geometry;
                    return null === e.boundingSphere && e.computeBoundingSphere(),
                    Wr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),
                    this.intersectsSphere(Wr)
                }
                ,
                e.intersectsSprite = function(t) {
                    return Wr.center.set(0, 0, 0),
                    Wr.radius = .7071067811865476,
                    Wr.applyMatrix4(t.matrixWorld),
                    this.intersectsSphere(Wr)
                }
                ,
                e.intersectsSphere = function(t) {
                    for (var e = this.planes, r = t.center, n = -t.radius, i = 0; i < 6; i++)
                        if (e[i].distanceToPoint(r) < n)
                            return !1;
                    return !0
                }
                ,
                e.intersectsBox = function(t) {
                    for (var e = this.planes, r = 0; r < 6; r++) {
                        var n = e[r];
                        if (qr.x = n.normal.x > 0 ? t.max.x : t.min.x,
                        qr.y = n.normal.y > 0 ? t.max.y : t.min.y,
                        qr.z = n.normal.z > 0 ? t.max.z : t.min.z,
                        n.distanceToPoint(qr) < 0)
                            return !1
                    }
                    return !0
                }
                ,
                e.containsPoint = function(t) {
                    for (var e = this.planes, r = 0; r < 6; r++)
                        if (e[r].distanceToPoint(t) < 0)
                            return !1;
                    return !0
                }
                ,
                t
            }();
            function Yr() {
                var t = null
                  , e = !1
                  , r = null
                  , n = null;
                function i(e, a) {
                    r(e, a),
                    n = t.requestAnimationFrame(i)
                }
                return {
                    start: function() {
                        !0 !== e && null !== r && (n = t.requestAnimationFrame(i),
                        e = !0)
                    },
                    stop: function() {
                        t.cancelAnimationFrame(n),
                        e = !1
                    },
                    setAnimationLoop: function(t) {
                        r = t
                    },
                    setContext: function(e) {
                        t = e
                    }
                }
            }
            function $r(t, e) {
                var r = e.isWebGL2
                  , n = new WeakMap;
                return {
                    get: function(t) {
                        return t.isInterleavedBufferAttribute && (t = t.data),
                        n.get(t)
                    },
                    remove: function(e) {
                        e.isInterleavedBufferAttribute && (e = e.data);
                        var r = n.get(e);
                        r && (t.deleteBuffer(r.buffer),
                        n.delete(e))
                    },
                    update: function(e, i) {
                        if (e.isGLBufferAttribute) {
                            var a = n.get(e);
                            (!a || a.version < e.version) && n.set(e, {
                                buffer: e.buffer,
                                type: e.type,
                                bytesPerElement: e.elementSize,
                                version: e.version
                            })
                        } else {
                            e.isInterleavedBufferAttribute && (e = e.data);
                            var o = n.get(e);
                            void 0 === o ? n.set(e, function(e, r) {
                                var n = e.array
                                  , i = e.usage
                                  , a = t.createBuffer();
                                t.bindBuffer(r, a),
                                t.bufferData(r, n, i),
                                e.onUploadCallback();
                                var o = 5126;
                                return n instanceof Float32Array ? o = 5126 : n instanceof Float64Array ? console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.") : n instanceof Uint16Array ? o = 5123 : n instanceof Int16Array ? o = 5122 : n instanceof Uint32Array ? o = 5125 : n instanceof Int32Array ? o = 5124 : n instanceof Int8Array ? o = 5120 : n instanceof Uint8Array && (o = 5121),
                                {
                                    buffer: a,
                                    type: o,
                                    bytesPerElement: n.BYTES_PER_ELEMENT,
                                    version: e.version
                                }
                            }(e, i)) : o.version < e.version && (function(e, n, i) {
                                var a = n.array
                                  , o = n.updateRange;
                                t.bindBuffer(i, e),
                                -1 === o.count ? t.bufferSubData(i, 0, a) : (r ? t.bufferSubData(i, o.offset * a.BYTES_PER_ELEMENT, a, o.offset, o.count) : t.bufferSubData(i, o.offset * a.BYTES_PER_ELEMENT, a.subarray(o.offset, o.offset + o.count)),
                                o.count = -1)
                            }(o.buffer, e, i),
                            o.version = e.version)
                        }
                    }
                }
            }
            var Kr = function(t) {
                function e(e, r, n, i) {
                    var a;
                    (a = t.call(this) || this).type = "PlaneBufferGeometry",
                    a.parameters = {
                        width: e,
                        height: r,
                        widthSegments: n,
                        heightSegments: i
                    };
                    for (var o = (e = e || 1) / 2, s = (r = r || 1) / 2, l = Math.floor(n) || 1, c = Math.floor(i) || 1, h = l + 1, u = c + 1, p = e / l, d = r / c, f = [], m = [], v = [], g = [], y = 0; y < u; y++)
                        for (var _ = y * d - s, x = 0; x < h; x++) {
                            var b = x * p - o;
                            m.push(b, -_, 0),
                            v.push(0, 0, 1),
                            g.push(x / l),
                            g.push(1 - y / c)
                        }
                    for (var w = 0; w < c; w++)
                        for (var S = 0; S < l; S++) {
                            var T = S + h * w
                              , M = S + h * (w + 1)
                              , E = S + 1 + h * (w + 1)
                              , A = S + 1 + h * w;
                            f.push(T, M, A),
                            f.push(M, E, A)
                        }
                    return a.setIndex(f),
                    a.setAttribute("position", new er(m,3)),
                    a.setAttribute("normal", new er(v,3)),
                    a.setAttribute("uv", new er(g,2)),
                    a
                }
                return st(e, t),
                e
            }(pr)
              , Zr = {
                alphamap_fragment: "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",
                alphamap_pars_fragment: "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
                alphatest_fragment: "#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",
                aomap_fragment: "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
                aomap_pars_fragment: "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
                begin_vertex: "vec3 transformed = vec3( position );",
                beginnormal_vertex: "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",
                bsdfs: "vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
                bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
                clipping_planes_fragment: "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
                clipping_planes_pars_fragment: "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",
                clipping_planes_pars_vertex: "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",
                clipping_planes_vertex: "#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",
                color_fragment: "#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",
                color_pars_fragment: "#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",
                color_pars_vertex: "#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
                color_vertex: "#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",
                common: "#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
                cube_uv_reflection_fragment: "#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
                defaultnormal_vertex: "vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
                displacementmap_pars_vertex: "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",
                displacementmap_vertex: "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",
                emissivemap_fragment: "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
                emissivemap_pars_fragment: "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",
                encodings_fragment: "gl_FragColor = linearToOutputTexel( gl_FragColor );",
                encodings_pars_fragment: "\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
                envmap_fragment: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
                envmap_common_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",
                envmap_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
                envmap_pars_vertex: "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",
                envmap_physical_pars_fragment: "#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
                envmap_vertex: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
                fog_vertex: "#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",
                fog_pars_vertex: "#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",
                fog_fragment: "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",
                fog_pars_fragment: "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
                gradientmap_pars_fragment: "#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",
                lightmap_fragment: "#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
                lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",
                lights_lambert_vertex: "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
                lights_pars_begin: "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
                lights_toon_fragment: "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",
                lights_toon_pars_fragment: "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
                lights_phong_fragment: "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",
                lights_phong_pars_fragment: "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
                lights_physical_fragment: "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
                lights_physical_pars_fragment: "struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
                lights_fragment_begin: "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
                lights_fragment_maps: "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
                lights_fragment_end: "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",
                logdepthbuf_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
                logdepthbuf_pars_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
                logdepthbuf_pars_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",
                logdepthbuf_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
                map_fragment: "#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",
                map_pars_fragment: "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
                map_particle_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
                map_particle_pars_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
                metalnessmap_fragment: "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",
                metalnessmap_pars_fragment: "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
                morphnormal_vertex: "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",
                morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
                morphtarget_vertex: "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
                normal_fragment_begin: "#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
                normal_fragment_maps: "#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
                normalmap_pars_fragment: "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",
                clearcoat_normal_fragment_begin: "#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",
                clearcoat_normal_fragment_maps: "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",
                clearcoat_pars_fragment: "#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
                packing: "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
                premultiplied_alpha_fragment: "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",
                project_vertex: "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",
                dithering_fragment: "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",
                dithering_pars_fragment: "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
                roughnessmap_fragment: "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",
                roughnessmap_pars_fragment: "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",
                shadowmap_pars_fragment: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
                shadowmap_pars_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
                shadowmap_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
                shadowmask_pars_fragment: "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
                skinbase_vertex: "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
                skinning_pars_vertex: "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
                skinning_vertex: "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",
                skinnormal_vertex: "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
                specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",
                specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",
                tonemapping_fragment: "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",
                tonemapping_pars_fragment: "#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
                transmissionmap_fragment: "#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",
                transmissionmap_pars_fragment: "#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",
                uv_pars_fragment: "#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",
                uv_pars_vertex: "#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",
                uv_vertex: "#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
                uv2_pars_fragment: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",
                uv2_pars_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",
                uv2_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",
                worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
                background_frag: "uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
                background_vert: "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",
                cube_frag: "#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
                cube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
                depth_frag: "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
                depth_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
                distanceRGBA_frag: "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
                distanceRGBA_vert: "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
                equirect_frag: "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
                equirect_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
                linedashed_frag: "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
                linedashed_vert: "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
                meshbasic_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshbasic_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
                meshlambert_frag: "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshlambert_vert: "#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                meshmatcap_frag: "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshmatcap_vert: "#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
                meshtoon_frag: "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshtoon_vert: "#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                meshphong_frag: "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshphong_vert: "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                meshphysical_frag: "#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
                meshphysical_vert: "#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                normal_frag: "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
                normal_vert: "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
                points_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
                points_vert: "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
                shadow_frag: "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
                shadow_vert: "#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
                sprite_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
                sprite_vert: "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"
            }
              , Jr = {
                common: {
                    diffuse: {
                        value: new Ge(15658734)
                    },
                    opacity: {
                        value: 1
                    },
                    map: {
                        value: null
                    },
                    uvTransform: {
                        value: new ut
                    },
                    uv2Transform: {
                        value: new ut
                    },
                    alphaMap: {
                        value: null
                    }
                },
                specularmap: {
                    specularMap: {
                        value: null
                    }
                },
                envmap: {
                    envMap: {
                        value: null
                    },
                    flipEnvMap: {
                        value: -1
                    },
                    reflectivity: {
                        value: 1
                    },
                    refractionRatio: {
                        value: .98
                    },
                    maxMipLevel: {
                        value: 0
                    }
                },
                aomap: {
                    aoMap: {
                        value: null
                    },
                    aoMapIntensity: {
                        value: 1
                    }
                },
                lightmap: {
                    lightMap: {
                        value: null
                    },
                    lightMapIntensity: {
                        value: 1
                    }
                },
                emissivemap: {
                    emissiveMap: {
                        value: null
                    }
                },
                bumpmap: {
                    bumpMap: {
                        value: null
                    },
                    bumpScale: {
                        value: 1
                    }
                },
                normalmap: {
                    normalMap: {
                        value: null
                    },
                    normalScale: {
                        value: new ht(1,1)
                    }
                },
                displacementmap: {
                    displacementMap: {
                        value: null
                    },
                    displacementScale: {
                        value: 1
                    },
                    displacementBias: {
                        value: 0
                    }
                },
                roughnessmap: {
                    roughnessMap: {
                        value: null
                    }
                },
                metalnessmap: {
                    metalnessMap: {
                        value: null
                    }
                },
                gradientmap: {
                    gradientMap: {
                        value: null
                    }
                },
                fog: {
                    fogDensity: {
                        value: 25e-5
                    },
                    fogNear: {
                        value: 1
                    },
                    fogFar: {
                        value: 2e3
                    },
                    fogColor: {
                        value: new Ge(16777215)
                    }
                },
                lights: {
                    ambientLightColor: {
                        value: []
                    },
                    lightProbe: {
                        value: []
                    },
                    directionalLights: {
                        value: [],
                        properties: {
                            direction: {},
                            color: {}
                        }
                    },
                    directionalLightShadows: {
                        value: [],
                        properties: {
                            shadowBias: {},
                            shadowNormalBias: {},
                            shadowRadius: {},
                            shadowMapSize: {}
                        }
                    },
                    directionalShadowMap: {
                        value: []
                    },
                    directionalShadowMatrix: {
                        value: []
                    },
                    spotLights: {
                        value: [],
                        properties: {
                            color: {},
                            position: {},
                            direction: {},
                            distance: {},
                            coneCos: {},
                            penumbraCos: {},
                            decay: {}
                        }
                    },
                    spotLightShadows: {
                        value: [],
                        properties: {
                            shadowBias: {},
                            shadowNormalBias: {},
                            shadowRadius: {},
                            shadowMapSize: {}
                        }
                    },
                    spotShadowMap: {
                        value: []
                    },
                    spotShadowMatrix: {
                        value: []
                    },
                    pointLights: {
                        value: [],
                        properties: {
                            color: {},
                            position: {},
                            decay: {},
                            distance: {}
                        }
                    },
                    pointLightShadows: {
                        value: [],
                        properties: {
                            shadowBias: {},
                            shadowNormalBias: {},
                            shadowRadius: {},
                            shadowMapSize: {},
                            shadowCameraNear: {},
                            shadowCameraFar: {}
                        }
                    },
                    pointShadowMap: {
                        value: []
                    },
                    pointShadowMatrix: {
                        value: []
                    },
                    hemisphereLights: {
                        value: [],
                        properties: {
                            direction: {},
                            skyColor: {},
                            groundColor: {}
                        }
                    },
                    rectAreaLights: {
                        value: [],
                        properties: {
                            color: {},
                            position: {},
                            width: {},
                            height: {}
                        }
                    },
                    ltc_1: {
                        value: null
                    },
                    ltc_2: {
                        value: null
                    }
                },
                points: {
                    diffuse: {
                        value: new Ge(15658734)
                    },
                    opacity: {
                        value: 1
                    },
                    size: {
                        value: 1
                    },
                    scale: {
                        value: 1
                    },
                    map: {
                        value: null
                    },
                    alphaMap: {
                        value: null
                    },
                    uvTransform: {
                        value: new ut
                    }
                },
                sprite: {
                    diffuse: {
                        value: new Ge(15658734)
                    },
                    opacity: {
                        value: 1
                    },
                    center: {
                        value: new ht(.5,.5)
                    },
                    rotation: {
                        value: 0
                    },
                    map: {
                        value: null
                    },
                    alphaMap: {
                        value: null
                    },
                    uvTransform: {
                        value: new ut
                    }
                }
            }
              , Qr = {
                basic: {
                    uniforms: Or([Jr.common, Jr.specularmap, Jr.envmap, Jr.aomap, Jr.lightmap, Jr.fog]),
                    vertexShader: Zr.meshbasic_vert,
                    fragmentShader: Zr.meshbasic_frag
                },
                lambert: {
                    uniforms: Or([Jr.common, Jr.specularmap, Jr.envmap, Jr.aomap, Jr.lightmap, Jr.emissivemap, Jr.fog, Jr.lights, {
                        emissive: {
                            value: new Ge(0)
                        }
                    }]),
                    vertexShader: Zr.meshlambert_vert,
                    fragmentShader: Zr.meshlambert_frag
                },
                phong: {
                    uniforms: Or([Jr.common, Jr.specularmap, Jr.envmap, Jr.aomap, Jr.lightmap, Jr.emissivemap, Jr.bumpmap, Jr.normalmap, Jr.displacementmap, Jr.fog, Jr.lights, {
                        emissive: {
                            value: new Ge(0)
                        },
                        specular: {
                            value: new Ge(1118481)
                        },
                        shininess: {
                            value: 30
                        }
                    }]),
                    vertexShader: Zr.meshphong_vert,
                    fragmentShader: Zr.meshphong_frag
                },
                standard: {
                    uniforms: Or([Jr.common, Jr.envmap, Jr.aomap, Jr.lightmap, Jr.emissivemap, Jr.bumpmap, Jr.normalmap, Jr.displacementmap, Jr.roughnessmap, Jr.metalnessmap, Jr.fog, Jr.lights, {
                        emissive: {
                            value: new Ge(0)
                        },
                        roughness: {
                            value: 1
                        },
                        metalness: {
                            value: 0
                        },
                        envMapIntensity: {
                            value: 1
                        }
                    }]),
                    vertexShader: Zr.meshphysical_vert,
                    fragmentShader: Zr.meshphysical_frag
                },
                toon: {
                    uniforms: Or([Jr.common, Jr.aomap, Jr.lightmap, Jr.emissivemap, Jr.bumpmap, Jr.normalmap, Jr.displacementmap, Jr.gradientmap, Jr.fog, Jr.lights, {
                        emissive: {
                            value: new Ge(0)
                        }
                    }]),
                    vertexShader: Zr.meshtoon_vert,
                    fragmentShader: Zr.meshtoon_frag
                },
                matcap: {
                    uniforms: Or([Jr.common, Jr.bumpmap, Jr.normalmap, Jr.displacementmap, Jr.fog, {
                        matcap: {
                            value: null
                        }
                    }]),
                    vertexShader: Zr.meshmatcap_vert,
                    fragmentShader: Zr.meshmatcap_frag
                },
                points: {
                    uniforms: Or([Jr.points, Jr.fog]),
                    vertexShader: Zr.points_vert,
                    fragmentShader: Zr.points_frag
                },
                dashed: {
                    uniforms: Or([Jr.common, Jr.fog, {
                        scale: {
                            value: 1
                        },
                        dashSize: {
                            value: 1
                        },
                        totalSize: {
                            value: 2
                        }
                    }]),
                    vertexShader: Zr.linedashed_vert,
                    fragmentShader: Zr.linedashed_frag
                },
                depth: {
                    uniforms: Or([Jr.common, Jr.displacementmap]),
                    vertexShader: Zr.depth_vert,
                    fragmentShader: Zr.depth_frag
                },
                normal: {
                    uniforms: Or([Jr.common, Jr.bumpmap, Jr.normalmap, Jr.displacementmap, {
                        opacity: {
                            value: 1
                        }
                    }]),
                    vertexShader: Zr.normal_vert,
                    fragmentShader: Zr.normal_frag
                },
                sprite: {
                    uniforms: Or([Jr.sprite, Jr.fog]),
                    vertexShader: Zr.sprite_vert,
                    fragmentShader: Zr.sprite_frag
                },
                background: {
                    uniforms: {
                        uvTransform: {
                            value: new ut
                        },
                        t2D: {
                            value: null
                        }
                    },
                    vertexShader: Zr.background_vert,
                    fragmentShader: Zr.background_frag
                },
                cube: {
                    uniforms: Or([Jr.envmap, {
                        opacity: {
                            value: 1
                        }
                    }]),
                    vertexShader: Zr.cube_vert,
                    fragmentShader: Zr.cube_frag
                },
                equirect: {
                    uniforms: {
                        tEquirect: {
                            value: null
                        }
                    },
                    vertexShader: Zr.equirect_vert,
                    fragmentShader: Zr.equirect_frag
                },
                distanceRGBA: {
                    uniforms: Or([Jr.common, Jr.displacementmap, {
                        referencePosition: {
                            value: new _t
                        },
                        nearDistance: {
                            value: 1
                        },
                        farDistance: {
                            value: 1e3
                        }
                    }]),
                    vertexShader: Zr.distanceRGBA_vert,
                    fragmentShader: Zr.distanceRGBA_frag
                },
                shadow: {
                    uniforms: Or([Jr.lights, Jr.fog, {
                        color: {
                            value: new Ge(0)
                        },
                        opacity: {
                            value: 1
                        }
                    }]),
                    vertexShader: Zr.shadow_vert,
                    fragmentShader: Zr.shadow_frag
                }
            };
            function tn(t, e, r, n, i) {
                var a, o, s = new Ge(0), c = 0, h = null, u = 0, p = null;
                function d(t, e) {
                    r.buffers.color.setClear(t.r, t.g, t.b, e, i)
                }
                return {
                    getClearColor: function() {
                        return s
                    },
                    setClearColor: function(t, e) {
                        s.set(t),
                        d(s, c = void 0 !== e ? e : 1)
                    },
                    getClearAlpha: function() {
                        return c
                    },
                    setClearAlpha: function(t) {
                        d(s, c = t)
                    },
                    render: function(r, i, f, m) {
                        var v = !0 === i.isScene ? i.background : null;
                        v && v.isTexture && (v = e.get(v));
                        var g = t.xr
                          , y = g.getSession && g.getSession();
                        y && "additive" === y.environmentBlendMode && (v = null),
                        null === v ? d(s, c) : v && v.isColor && (d(v, 1),
                        m = !0),
                        (t.autoClear || m) && t.clear(t.autoClearColor, t.autoClearDepth, t.autoClearStencil),
                        v && (v.isCubeTexture || v.isWebGLCubeRenderTarget || v.mapping === l) ? (void 0 === o && ((o = new Lr(new Ir(1,1,1),new Nr({
                            name: "BackgroundCubeMaterial",
                            uniforms: kr(Qr.cube.uniforms),
                            vertexShader: Qr.cube.vertexShader,
                            fragmentShader: Qr.cube.fragmentShader,
                            side: 1,
                            depthTest: !1,
                            depthWrite: !1,
                            fog: !1
                        }))).geometry.deleteAttribute("normal"),
                        o.geometry.deleteAttribute("uv"),
                        o.onBeforeRender = function(t, e, r) {
                            this.matrixWorld.copyPosition(r.matrixWorld)
                        }
                        ,
                        Object.defineProperty(o.material, "envMap", {
                            get: function() {
                                return this.uniforms.envMap.value
                            }
                        }),
                        n.update(o)),
                        v.isWebGLCubeRenderTarget && (v = v.texture),
                        o.material.uniforms.envMap.value = v,
                        o.material.uniforms.flipEnvMap.value = v.isCubeTexture && v._needsFlipEnvMap ? -1 : 1,
                        h === v && u === v.version && p === t.toneMapping || (o.material.needsUpdate = !0,
                        h = v,
                        u = v.version,
                        p = t.toneMapping),
                        r.unshift(o, o.geometry, o.material, 0, 0, null)) : v && v.isTexture && (void 0 === a && ((a = new Lr(new Kr(2,2),new Nr({
                            name: "BackgroundMaterial",
                            uniforms: kr(Qr.background.uniforms),
                            vertexShader: Qr.background.vertexShader,
                            fragmentShader: Qr.background.fragmentShader,
                            side: 0,
                            depthTest: !1,
                            depthWrite: !1,
                            fog: !1
                        }))).geometry.deleteAttribute("normal"),
                        Object.defineProperty(a.material, "map", {
                            get: function() {
                                return this.uniforms.t2D.value
                            }
                        }),
                        n.update(a)),
                        a.material.uniforms.t2D.value = v,
                        !0 === v.matrixAutoUpdate && v.updateMatrix(),
                        a.material.uniforms.uvTransform.value.copy(v.matrix),
                        h === v && u === v.version && p === t.toneMapping || (a.material.needsUpdate = !0,
                        h = v,
                        u = v.version,
                        p = t.toneMapping),
                        r.unshift(a, a.geometry, a.material, 0, 0, null))
                    }
                }
            }
            function en(t, e, r, n) {
                var i = t.getParameter(34921)
                  , a = n.isWebGL2 ? null : e.get("OES_vertex_array_object")
                  , o = n.isWebGL2 || null !== a
                  , s = {}
                  , l = p(null)
                  , c = l;
                function h(e) {
                    return n.isWebGL2 ? t.bindVertexArray(e) : a.bindVertexArrayOES(e)
                }
                function u(e) {
                    return n.isWebGL2 ? t.deleteVertexArray(e) : a.deleteVertexArrayOES(e)
                }
                function p(t) {
                    for (var e = [], r = [], n = [], a = 0; a < i; a++)
                        e[a] = 0,
                        r[a] = 0,
                        n[a] = 0;
                    return {
                        geometry: null,
                        program: null,
                        wireframe: !1,
                        newAttributes: e,
                        enabledAttributes: r,
                        attributeDivisors: n,
                        object: t,
                        attributes: {},
                        index: null
                    }
                }
                function d() {
                    for (var t = c.newAttributes, e = 0, r = t.length; e < r; e++)
                        t[e] = 0
                }
                function f(t) {
                    m(t, 0)
                }
                function m(r, i) {
                    var a = c.newAttributes
                      , o = c.enabledAttributes
                      , s = c.attributeDivisors;
                    a[r] = 1,
                    0 === o[r] && (t.enableVertexAttribArray(r),
                    o[r] = 1),
                    s[r] !== i && ((n.isWebGL2 ? t : e.get("ANGLE_instanced_arrays"))[n.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](r, i),
                    s[r] = i)
                }
                function v() {
                    for (var e = c.newAttributes, r = c.enabledAttributes, n = 0, i = r.length; n < i; n++)
                        r[n] !== e[n] && (t.disableVertexAttribArray(n),
                        r[n] = 0)
                }
                function g(e, r, i, a, o, s) {
                    !0 !== n.isWebGL2 || 5124 !== i && 5125 !== i ? t.vertexAttribPointer(e, r, i, a, o, s) : t.vertexAttribIPointer(e, r, i, o, s)
                }
                function y() {
                    _(),
                    c !== l && h((c = l).object)
                }
                function _() {
                    l.geometry = null,
                    l.program = null,
                    l.wireframe = !1
                }
                return {
                    setup: function(i, l, u, y, _) {
                        var x = !1;
                        if (o) {
                            var b = function(e, r, i) {
                                var o = !0 === i.wireframe
                                  , l = s[e.id];
                                void 0 === l && (l = {},
                                s[e.id] = l);
                                var c = l[r.id];
                                void 0 === c && (c = {},
                                l[r.id] = c);
                                var h = c[o];
                                return void 0 === h && (h = p(n.isWebGL2 ? t.createVertexArray() : a.createVertexArrayOES()),
                                c[o] = h),
                                h
                            }(y, u, l);
                            c !== b && h((c = b).object),
                            x = function(t, e) {
                                var r = c.attributes
                                  , n = t.attributes;
                                if (Object.keys(r).length !== Object.keys(n).length)
                                    return !0;
                                for (var i in n) {
                                    var a = r[i]
                                      , o = n[i];
                                    if (void 0 === a)
                                        return !0;
                                    if (a.attribute !== o)
                                        return !0;
                                    if (a.data !== o.data)
                                        return !0
                                }
                                return c.index !== e
                            }(y, _),
                            x && function(t, e) {
                                var r = {}
                                  , n = t.attributes;
                                for (var i in n) {
                                    var a = n[i]
                                      , o = {};
                                    o.attribute = a,
                                    a.data && (o.data = a.data),
                                    r[i] = o
                                }
                                c.attributes = r,
                                c.index = e
                            }(y, _)
                        } else {
                            var w = !0 === l.wireframe;
                            c.geometry === y.id && c.program === u.id && c.wireframe === w || (c.geometry = y.id,
                            c.program = u.id,
                            c.wireframe = w,
                            x = !0)
                        }
                        !0 === i.isInstancedMesh && (x = !0),
                        null !== _ && r.update(_, 34963),
                        x && (function(i, a, o, s) {
                            if (!1 !== n.isWebGL2 || !i.isInstancedMesh && !s.isInstancedBufferGeometry || null !== e.get("ANGLE_instanced_arrays")) {
                                d();
                                var l = s.attributes
                                  , c = o.getAttributes()
                                  , h = a.defaultAttributeValues;
                                for (var u in c) {
                                    var p = c[u];
                                    if (p >= 0) {
                                        var y = l[u];
                                        if (void 0 !== y) {
                                            var _ = y.normalized
                                              , x = y.itemSize
                                              , b = r.get(y);
                                            if (void 0 === b)
                                                continue;
                                            var w = b.buffer
                                              , S = b.type
                                              , T = b.bytesPerElement;
                                            if (y.isInterleavedBufferAttribute) {
                                                var M = y.data
                                                  , E = M.stride
                                                  , A = y.offset;
                                                M && M.isInstancedInterleavedBuffer ? (m(p, M.meshPerAttribute),
                                                void 0 === s._maxInstanceCount && (s._maxInstanceCount = M.meshPerAttribute * M.count)) : f(p),
                                                t.bindBuffer(34962, w),
                                                g(p, x, S, _, E * T, A * T)
                                            } else
                                                y.isInstancedBufferAttribute ? (m(p, y.meshPerAttribute),
                                                void 0 === s._maxInstanceCount && (s._maxInstanceCount = y.meshPerAttribute * y.count)) : f(p),
                                                t.bindBuffer(34962, w),
                                                g(p, x, S, _, 0, 0)
                                        } else if ("instanceMatrix" === u) {
                                            var P = r.get(i.instanceMatrix);
                                            if (void 0 === P)
                                                continue;
                                            var C = P.buffer
                                              , L = P.type;
                                            m(p + 0, 1),
                                            m(p + 1, 1),
                                            m(p + 2, 1),
                                            m(p + 3, 1),
                                            t.bindBuffer(34962, C),
                                            t.vertexAttribPointer(p + 0, 4, L, !1, 64, 0),
                                            t.vertexAttribPointer(p + 1, 4, L, !1, 64, 16),
                                            t.vertexAttribPointer(p + 2, 4, L, !1, 64, 32),
                                            t.vertexAttribPointer(p + 3, 4, L, !1, 64, 48)
                                        } else if ("instanceColor" === u) {
                                            var D = r.get(i.instanceColor);
                                            if (void 0 === D)
                                                continue;
                                            var R = D.buffer
                                              , I = D.type;
                                            m(p, 1),
                                            t.bindBuffer(34962, R),
                                            t.vertexAttribPointer(p, 3, I, !1, 12, 0)
                                        } else if (void 0 !== h) {
                                            var k = h[u];
                                            if (void 0 !== k)
                                                switch (k.length) {
                                                case 2:
                                                    t.vertexAttrib2fv(p, k);
                                                    break;
                                                case 3:
                                                    t.vertexAttrib3fv(p, k);
                                                    break;
                                                case 4:
                                                    t.vertexAttrib4fv(p, k);
                                                    break;
                                                default:
                                                    t.vertexAttrib1fv(p, k)
                                                }
                                        }
                                    }
                                }
                                v()
                            }
                        }(i, l, u, y),
                        null !== _ && t.bindBuffer(34963, r.get(_).buffer))
                    },
                    reset: y,
                    resetDefaultState: _,
                    dispose: function() {
                        for (var t in y(),
                        s) {
                            var e = s[t];
                            for (var r in e) {
                                var n = e[r];
                                for (var i in n)
                                    u(n[i].object),
                                    delete n[i];
                                delete e[r]
                            }
                            delete s[t]
                        }
                    },
                    releaseStatesOfGeometry: function(t) {
                        if (void 0 !== s[t.id]) {
                            var e = s[t.id];
                            for (var r in e) {
                                var n = e[r];
                                for (var i in n)
                                    u(n[i].object),
                                    delete n[i];
                                delete e[r]
                            }
                            delete s[t.id]
                        }
                    },
                    releaseStatesOfProgram: function(t) {
                        for (var e in s) {
                            var r = s[e];
                            if (void 0 !== r[t.id]) {
                                var n = r[t.id];
                                for (var i in n)
                                    u(n[i].object),
                                    delete n[i];
                                delete r[t.id]
                            }
                        }
                    },
                    initAttributes: d,
                    enableAttribute: f,
                    disableUnusedAttributes: v
                }
            }
            function rn(t, e, r, n) {
                var i, a = n.isWebGL2;
                this.setMode = function(t) {
                    i = t
                }
                ,
                this.render = function(e, n) {
                    t.drawArrays(i, e, n),
                    r.update(n, i, 1)
                }
                ,
                this.renderInstances = function(n, o, s) {
                    if (0 !== s) {
                        var l, c;
                        if (a)
                            l = t,
                            c = "drawArraysInstanced";
                        else if (c = "drawArraysInstancedANGLE",
                        null === (l = e.get("ANGLE_instanced_arrays")))
                            return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                        l[c](i, n, o, s),
                        r.update(o, i, s)
                    }
                }
            }
            function nn(t, e, r) {
                var n;
                function i(e) {
                    if ("highp" === e) {
                        if (t.getShaderPrecisionFormat(35633, 36338).precision > 0 && t.getShaderPrecisionFormat(35632, 36338).precision > 0)
                            return "highp";
                        e = "mediump"
                    }
                    return "mediump" === e && t.getShaderPrecisionFormat(35633, 36337).precision > 0 && t.getShaderPrecisionFormat(35632, 36337).precision > 0 ? "mediump" : "lowp"
                }
                var a = "undefined" != typeof WebGL2RenderingContext && t instanceof WebGL2RenderingContext || "undefined" != typeof WebGL2ComputeRenderingContext && t instanceof WebGL2ComputeRenderingContext
                  , o = void 0 !== r.precision ? r.precision : "highp"
                  , s = i(o);
                s !== o && (console.warn("THREE.WebGLRenderer:", o, "not supported, using", s, "instead."),
                o = s);
                var l = !0 === r.logarithmicDepthBuffer
                  , c = t.getParameter(34930)
                  , h = t.getParameter(35660)
                  , u = t.getParameter(3379)
                  , p = t.getParameter(34076)
                  , d = t.getParameter(34921)
                  , f = t.getParameter(36347)
                  , m = t.getParameter(36348)
                  , v = t.getParameter(36349)
                  , g = h > 0
                  , y = a || !!e.get("OES_texture_float");
                return {
                    isWebGL2: a,
                    getMaxAnisotropy: function() {
                        if (void 0 !== n)
                            return n;
                        var r = e.get("EXT_texture_filter_anisotropic");
                        return n = null !== r ? t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
                    },
                    getMaxPrecision: i,
                    precision: o,
                    logarithmicDepthBuffer: l,
                    maxTextures: c,
                    maxVertexTextures: h,
                    maxTextureSize: u,
                    maxCubemapSize: p,
                    maxAttributes: d,
                    maxVertexUniforms: f,
                    maxVaryings: m,
                    maxFragmentUniforms: v,
                    vertexTextures: g,
                    floatFragmentTextures: y,
                    floatVertexTextures: g && y,
                    maxSamples: a ? t.getParameter(36183) : 0
                }
            }
            function an(t) {
                var e = this
                  , r = null
                  , n = 0
                  , i = !1
                  , a = !1
                  , o = new we
                  , s = new ut
                  , l = {
                    value: null,
                    needsUpdate: !1
                };
                function c() {
                    l.value !== r && (l.value = r,
                    l.needsUpdate = n > 0),
                    e.numPlanes = n,
                    e.numIntersection = 0
                }
                function h(t, r, n, i) {
                    var a = null !== t ? t.length : 0
                      , c = null;
                    if (0 !== a) {
                        if (c = l.value,
                        !0 !== i || null === c) {
                            var h = n + 4 * a
                              , u = r.matrixWorldInverse;
                            s.getNormalMatrix(u),
                            (null === c || c.length < h) && (c = new Float32Array(h));
                            for (var p = 0, d = n; p !== a; ++p,
                            d += 4)
                                o.copy(t[p]).applyMatrix4(u, s),
                                o.normal.toArray(c, d),
                                c[d + 3] = o.constant
                        }
                        l.value = c,
                        l.needsUpdate = !0
                    }
                    return e.numPlanes = a,
                    e.numIntersection = 0,
                    c
                }
                this.uniform = l,
                this.numPlanes = 0,
                this.numIntersection = 0,
                this.init = function(t, e, a) {
                    var o = 0 !== t.length || e || 0 !== n || i;
                    return i = e,
                    r = h(t, a, 0),
                    n = t.length,
                    o
                }
                ,
                this.beginShadows = function() {
                    a = !0,
                    h(null)
                }
                ,
                this.endShadows = function() {
                    a = !1,
                    c()
                }
                ,
                this.setState = function(e, o, s) {
                    var u = e.clippingPlanes
                      , p = e.clipIntersection
                      , d = e.clipShadows
                      , f = t.get(e);
                    if (!i || null === u || 0 === u.length || a && !d)
                        a ? h(null) : c();
                    else {
                        var m = a ? 0 : n
                          , v = 4 * m
                          , g = f.clippingState || null;
                        l.value = g,
                        g = h(u, o, v, s);
                        for (var y = 0; y !== v; ++y)
                            g[y] = r[y];
                        f.clippingState = g,
                        this.numIntersection = p ? this.numPlanes : 0,
                        this.numPlanes += m
                    }
                }
            }
            function on(t) {
                var e = new WeakMap;
                function r(t, e) {
                    return e === o ? t.mapping = i : e === s && (t.mapping = a),
                    t
                }
                function n(t) {
                    var r = t.target;
                    r.removeEventListener("dispose", n);
                    var i = e.get(r);
                    void 0 !== i && (e.delete(r),
                    i.dispose())
                }
                return {
                    get: function(i) {
                        if (i && i.isTexture) {
                            var a = i.mapping;
                            if (a === o || a === s) {
                                if (e.has(i))
                                    return r(e.get(i).texture, i.mapping);
                                var l = i.image;
                                if (l && l.height > 0) {
                                    var c = t.getRenderList()
                                      , h = t.getRenderTarget()
                                      , u = t.getRenderState()
                                      , p = new Vr(l.height / 2);
                                    return p.fromEquirectangularTexture(t, i),
                                    e.set(i, p),
                                    t.setRenderTarget(h),
                                    t.setRenderList(c),
                                    t.setRenderState(u),
                                    i.addEventListener("dispose", n),
                                    r(p.texture, i.mapping)
                                }
                                return null
                            }
                        }
                        return i
                    },
                    dispose: function() {
                        e = new WeakMap
                    }
                }
            }
            function sn(t) {
                var e = {};
                return {
                    has: function(r) {
                        if (void 0 !== e[r])
                            return null !== e[r];
                        var n;
                        switch (r) {
                        case "WEBGL_depth_texture":
                            n = t.getExtension("WEBGL_depth_texture") || t.getExtension("MOZ_WEBGL_depth_texture") || t.getExtension("WEBKIT_WEBGL_depth_texture");
                            break;
                        case "EXT_texture_filter_anisotropic":
                            n = t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                            break;
                        case "WEBGL_compressed_texture_s3tc":
                            n = t.getExtension("WEBGL_compressed_texture_s3tc") || t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                            break;
                        case "WEBGL_compressed_texture_pvrtc":
                            n = t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                            break;
                        default:
                            n = t.getExtension(r)
                        }
                        return e[r] = n,
                        null !== n
                    },
                    get: function(t) {
                        return this.has(t) || console.warn("THREE.WebGLRenderer: " + t + " extension not supported."),
                        e[t]
                    }
                }
            }
            function ln(t, e, r, n) {
                var i = new WeakMap
                  , a = new WeakMap;
                function o(t) {
                    var s = t.target
                      , l = i.get(s);
                    for (var c in null !== l.index && e.remove(l.index),
                    l.attributes)
                        e.remove(l.attributes[c]);
                    s.removeEventListener("dispose", o),
                    i.delete(s);
                    var h = a.get(l);
                    h && (e.remove(h),
                    a.delete(l)),
                    n.releaseStatesOfGeometry(l),
                    !0 === s.isInstancedBufferGeometry && delete s._maxInstanceCount,
                    r.memory.geometries--
                }
                function s(t) {
                    var r = []
                      , n = t.index
                      , i = t.attributes.position
                      , o = 0;
                    if (null !== n) {
                        var s = n.array;
                        o = n.version;
                        for (var l = 0, c = s.length; l < c; l += 3) {
                            var h = s[l + 0]
                              , u = s[l + 1]
                              , p = s[l + 2];
                            r.push(h, u, u, p, p, h)
                        }
                    } else {
                        var d = i.array;
                        o = i.version;
                        for (var f = 0, m = d.length / 3 - 1; f < m; f += 3) {
                            var v = f + 0
                              , g = f + 1
                              , y = f + 2;
                            r.push(v, g, g, y, y, v)
                        }
                    }
                    var _ = new (ir(r) > 65535 ? tr : Je)(r,1);
                    _.version = o;
                    var x = a.get(t);
                    x && e.remove(x),
                    a.set(t, _)
                }
                return {
                    get: function(t, e) {
                        var n = i.get(e);
                        return n || (e.addEventListener("dispose", o),
                        e.isBufferGeometry ? n = e : e.isGeometry && (void 0 === e._bufferGeometry && (e._bufferGeometry = (new pr).setFromObject(t)),
                        n = e._bufferGeometry),
                        i.set(e, n),
                        r.memory.geometries++,
                        n)
                    },
                    update: function(t) {
                        var r = t.attributes;
                        for (var n in r)
                            e.update(r[n], 34962);
                        var i = t.morphAttributes;
                        for (var a in i)
                            for (var o = i[a], s = 0, l = o.length; s < l; s++)
                                e.update(o[s], 34962)
                    },
                    getWireframeAttribute: function(t) {
                        var e = a.get(t);
                        if (e) {
                            var r = t.index;
                            null !== r && e.version < r.version && s(t)
                        } else
                            s(t);
                        return a.get(t)
                    }
                }
            }
            function cn(t, e, r, n) {
                var i, a, o, s = n.isWebGL2;
                this.setMode = function(t) {
                    i = t
                }
                ,
                this.setIndex = function(t) {
                    a = t.type,
                    o = t.bytesPerElement
                }
                ,
                this.render = function(e, n) {
                    t.drawElements(i, n, a, e * o),
                    r.update(n, i, 1)
                }
                ,
                this.renderInstances = function(n, l, c) {
                    if (0 !== c) {
                        var h, u;
                        if (s)
                            h = t,
                            u = "drawElementsInstanced";
                        else if (u = "drawElementsInstancedANGLE",
                        null === (h = e.get("ANGLE_instanced_arrays")))
                            return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                        h[u](i, l, a, n * o, c),
                        r.update(l, i, c)
                    }
                }
            }
            function hn(t) {
                var e = {
                    frame: 0,
                    calls: 0,
                    triangles: 0,
                    points: 0,
                    lines: 0
                };
                return {
                    memory: {
                        geometries: 0,
                        textures: 0
                    },
                    render: e,
                    programs: null,
                    autoReset: !0,
                    reset: function() {
                        e.frame++,
                        e.calls = 0,
                        e.triangles = 0,
                        e.points = 0,
                        e.lines = 0
                    },
                    update: function(t, r, n) {
                        switch (e.calls++,
                        r) {
                        case 4:
                            e.triangles += n * (t / 3);
                            break;
                        case 1:
                            e.lines += n * (t / 2);
                            break;
                        case 3:
                            e.lines += n * (t - 1);
                            break;
                        case 2:
                            e.lines += n * t;
                            break;
                        case 0:
                            e.points += n * t;
                            break;
                        default:
                            console.error("THREE.WebGLInfo: Unknown draw mode:", r)
                        }
                    }
                }
            }
            function un(t, e) {
                return t[0] - e[0]
            }
            function pn(t, e) {
                return Math.abs(e[1]) - Math.abs(t[1])
            }
            function dn(t) {
                for (var e = {}, r = new Float32Array(8), n = [], i = 0; i < 8; i++)
                    n[i] = [i, 0];
                return {
                    update: function(i, a, o, s) {
                        var l = i.morphTargetInfluences
                          , c = void 0 === l ? 0 : l.length
                          , h = e[a.id];
                        if (void 0 === h) {
                            h = [];
                            for (var u = 0; u < c; u++)
                                h[u] = [u, 0];
                            e[a.id] = h
                        }
                        for (var p = 0; p < c; p++) {
                            var d = h[p];
                            d[0] = p,
                            d[1] = l[p]
                        }
                        h.sort(pn);
                        for (var f = 0; f < 8; f++)
                            f < c && h[f][1] ? (n[f][0] = h[f][0],
                            n[f][1] = h[f][1]) : (n[f][0] = Number.MAX_SAFE_INTEGER,
                            n[f][1] = 0);
                        n.sort(un);
                        for (var m = o.morphTargets && a.morphAttributes.position, v = o.morphNormals && a.morphAttributes.normal, g = 0, y = 0; y < 8; y++) {
                            var _ = n[y]
                              , x = _[0]
                              , b = _[1];
                            x !== Number.MAX_SAFE_INTEGER && b ? (m && a.getAttribute("morphTarget" + y) !== m[x] && a.setAttribute("morphTarget" + y, m[x]),
                            v && a.getAttribute("morphNormal" + y) !== v[x] && a.setAttribute("morphNormal" + y, v[x]),
                            r[y] = b,
                            g += b) : (m && void 0 !== a.getAttribute("morphTarget" + y) && a.deleteAttribute("morphTarget" + y),
                            v && void 0 !== a.getAttribute("morphNormal" + y) && a.deleteAttribute("morphNormal" + y),
                            r[y] = 0)
                        }
                        var w = a.morphTargetsRelative ? 1 : 1 - g;
                        s.getUniforms().setValue(t, "morphTargetBaseInfluence", w),
                        s.getUniforms().setValue(t, "morphTargetInfluences", r)
                    }
                }
            }
            function fn(t, e, r, n) {
                var i = new WeakMap;
                return {
                    update: function(t) {
                        var a = n.render.frame
                          , o = t.geometry
                          , s = e.get(t, o);
                        return i.get(s) !== a && (o.isGeometry && s.updateFromObject(t),
                        e.update(s),
                        i.set(s, a)),
                        t.isInstancedMesh && (r.update(t.instanceMatrix, 34962),
                        null !== t.instanceColor && r.update(t.instanceColor, 34962)),
                        s
                    },
                    dispose: function() {
                        i = new WeakMap
                    }
                }
            }
            function mn(t, e, r, n) {
                ft.call(this, null),
                this.image = {
                    data: t || null,
                    width: e || 1,
                    height: r || 1,
                    depth: n || 1
                },
                this.magFilter = d,
                this.minFilter = d,
                this.wrapR = u,
                this.generateMipmaps = !1,
                this.flipY = !1,
                this.needsUpdate = !0
            }
            function vn(t, e, r, n) {
                ft.call(this, null),
                this.image = {
                    data: t || null,
                    width: e || 1,
                    height: r || 1,
                    depth: n || 1
                },
                this.magFilter = d,
                this.minFilter = d,
                this.wrapR = u,
                this.generateMipmaps = !1,
                this.flipY = !1,
                this.needsUpdate = !0
            }
            Qr.physical = {
                uniforms: Or([Qr.standard.uniforms, {
                    clearcoat: {
                        value: 0
                    },
                    clearcoatMap: {
                        value: null
                    },
                    clearcoatRoughness: {
                        value: 0
                    },
                    clearcoatRoughnessMap: {
                        value: null
                    },
                    clearcoatNormalScale: {
                        value: new ht(1,1)
                    },
                    clearcoatNormalMap: {
                        value: null
                    },
                    sheen: {
                        value: new Ge(0)
                    },
                    transmission: {
                        value: 0
                    },
                    transmissionMap: {
                        value: null
                    }
                }]),
                vertexShader: Zr.meshphysical_vert,
                fragmentShader: Zr.meshphysical_frag
            },
            mn.prototype = Object.create(ft.prototype),
            mn.prototype.constructor = mn,
            mn.prototype.isDataTexture2DArray = !0,
            vn.prototype = Object.create(ft.prototype),
            vn.prototype.constructor = vn,
            vn.prototype.isDataTexture3D = !0;
            var gn = new ft
              , yn = new mn
              , _n = new vn
              , xn = new Ur
              , bn = []
              , wn = []
              , Sn = new Float32Array(16)
              , Tn = new Float32Array(9)
              , Mn = new Float32Array(4);
            function En(t, e, r) {
                var n = t[0];
                if (n <= 0 || n > 0)
                    return t;
                var i = e * r
                  , a = bn[i];
                if (void 0 === a && (a = new Float32Array(i),
                bn[i] = a),
                0 !== e) {
                    n.toArray(a, 0);
                    for (var o = 1, s = 0; o !== e; ++o)
                        s += r,
                        t[o].toArray(a, s)
                }
                return a
            }
            function An(t, e) {
                if (t.length !== e.length)
                    return !1;
                for (var r = 0, n = t.length; r < n; r++)
                    if (t[r] !== e[r])
                        return !1;
                return !0
            }
            function Pn(t, e) {
                for (var r = 0, n = e.length; r < n; r++)
                    t[r] = e[r]
            }
            function Cn(t, e) {
                var r = wn[e];
                void 0 === r && (r = new Int32Array(e),
                wn[e] = r);
                for (var n = 0; n !== e; ++n)
                    r[n] = t.allocateTextureUnit();
                return r
            }
            function Ln(t, e) {
                var r = this.cache;
                r[0] !== e && (t.uniform1f(this.addr, e),
                r[0] = e)
            }
            function Dn(t, e) {
                var r = this.cache;
                if (void 0 !== e.x)
                    r[0] === e.x && r[1] === e.y || (t.uniform2f(this.addr, e.x, e.y),
                    r[0] = e.x,
                    r[1] = e.y);
                else {
                    if (An(r, e))
                        return;
                    t.uniform2fv(this.addr, e),
                    Pn(r, e)
                }
            }
            function Rn(t, e) {
                var r = this.cache;
                if (void 0 !== e.x)
                    r[0] === e.x && r[1] === e.y && r[2] === e.z || (t.uniform3f(this.addr, e.x, e.y, e.z),
                    r[0] = e.x,
                    r[1] = e.y,
                    r[2] = e.z);
                else if (void 0 !== e.r)
                    r[0] === e.r && r[1] === e.g && r[2] === e.b || (t.uniform3f(this.addr, e.r, e.g, e.b),
                    r[0] = e.r,
                    r[1] = e.g,
                    r[2] = e.b);
                else {
                    if (An(r, e))
                        return;
                    t.uniform3fv(this.addr, e),
                    Pn(r, e)
                }
            }
            function In(t, e) {
                var r = this.cache;
                if (void 0 !== e.x)
                    r[0] === e.x && r[1] === e.y && r[2] === e.z && r[3] === e.w || (t.uniform4f(this.addr, e.x, e.y, e.z, e.w),
                    r[0] = e.x,
                    r[1] = e.y,
                    r[2] = e.z,
                    r[3] = e.w);
                else {
                    if (An(r, e))
                        return;
                    t.uniform4fv(this.addr, e),
                    Pn(r, e)
                }
            }
            function kn(t, e) {
                var r = this.cache
                  , n = e.elements;
                if (void 0 === n) {
                    if (An(r, e))
                        return;
                    t.uniformMatrix2fv(this.addr, !1, e),
                    Pn(r, e)
                } else {
                    if (An(r, n))
                        return;
                    Mn.set(n),
                    t.uniformMatrix2fv(this.addr, !1, Mn),
                    Pn(r, n)
                }
            }
            function On(t, e) {
                var r = this.cache
                  , n = e.elements;
                if (void 0 === n) {
                    if (An(r, e))
                        return;
                    t.uniformMatrix3fv(this.addr, !1, e),
                    Pn(r, e)
                } else {
                    if (An(r, n))
                        return;
                    Tn.set(n),
                    t.uniformMatrix3fv(this.addr, !1, Tn),
                    Pn(r, n)
                }
            }
            function Fn(t, e) {
                var r = this.cache
                  , n = e.elements;
                if (void 0 === n) {
                    if (An(r, e))
                        return;
                    t.uniformMatrix4fv(this.addr, !1, e),
                    Pn(r, e)
                } else {
                    if (An(r, n))
                        return;
                    Sn.set(n),
                    t.uniformMatrix4fv(this.addr, !1, Sn),
                    Pn(r, n)
                }
            }
            function Nn(t, e, r) {
                var n = this.cache
                  , i = r.allocateTextureUnit();
                n[0] !== i && (t.uniform1i(this.addr, i),
                n[0] = i),
                r.safeSetTexture2D(e || gn, i)
            }
            function Bn(t, e, r) {
                var n = this.cache
                  , i = r.allocateTextureUnit();
                n[0] !== i && (t.uniform1i(this.addr, i),
                n[0] = i),
                r.setTexture2DArray(e || yn, i)
            }
            function zn(t, e, r) {
                var n = this.cache
                  , i = r.allocateTextureUnit();
                n[0] !== i && (t.uniform1i(this.addr, i),
                n[0] = i),
                r.setTexture3D(e || _n, i)
            }
            function Gn(t, e, r) {
                var n = this.cache
                  , i = r.allocateTextureUnit();
                n[0] !== i && (t.uniform1i(this.addr, i),
                n[0] = i),
                r.safeSetTextureCube(e || xn, i)
            }
            function Hn(t, e) {
                var r = this.cache;
                r[0] !== e && (t.uniform1i(this.addr, e),
                r[0] = e)
            }
            function Un(t, e) {
                var r = this.cache;
                An(r, e) || (t.uniform2iv(this.addr, e),
                Pn(r, e))
            }
            function Vn(t, e) {
                var r = this.cache;
                An(r, e) || (t.uniform3iv(this.addr, e),
                Pn(r, e))
            }
            function jn(t, e) {
                var r = this.cache;
                An(r, e) || (t.uniform4iv(this.addr, e),
                Pn(r, e))
            }
            function Wn(t, e) {
                var r = this.cache;
                r[0] !== e && (t.uniform1ui(this.addr, e),
                r[0] = e)
            }
            function qn(t, e) {
                t.uniform1fv(this.addr, e)
            }
            function Xn(t, e) {
                t.uniform1iv(this.addr, e)
            }
            function Yn(t, e) {
                t.uniform2iv(this.addr, e)
            }
            function $n(t, e) {
                t.uniform3iv(this.addr, e)
            }
            function Kn(t, e) {
                t.uniform4iv(this.addr, e)
            }
            function Zn(t, e) {
                var r = En(e, this.size, 2);
                t.uniform2fv(this.addr, r)
            }
            function Jn(t, e) {
                var r = En(e, this.size, 3);
                t.uniform3fv(this.addr, r)
            }
            function Qn(t, e) {
                var r = En(e, this.size, 4);
                t.uniform4fv(this.addr, r)
            }
            function ti(t, e) {
                var r = En(e, this.size, 4);
                t.uniformMatrix2fv(this.addr, !1, r)
            }
            function ei(t, e) {
                var r = En(e, this.size, 9);
                t.uniformMatrix3fv(this.addr, !1, r)
            }
            function ri(t, e) {
                var r = En(e, this.size, 16);
                t.uniformMatrix4fv(this.addr, !1, r)
            }
            function ni(t, e, r) {
                var n = e.length
                  , i = Cn(r, n);
                t.uniform1iv(this.addr, i);
                for (var a = 0; a !== n; ++a)
                    r.safeSetTexture2D(e[a] || gn, i[a])
            }
            function ii(t, e, r) {
                var n = e.length
                  , i = Cn(r, n);
                t.uniform1iv(this.addr, i);
                for (var a = 0; a !== n; ++a)
                    r.safeSetTextureCube(e[a] || xn, i[a])
            }
            function ai(t, e, r) {
                this.id = t,
                this.addr = r,
                this.cache = [],
                this.setValue = function(t) {
                    switch (t) {
                    case 5126:
                        return Ln;
                    case 35664:
                        return Dn;
                    case 35665:
                        return Rn;
                    case 35666:
                        return In;
                    case 35674:
                        return kn;
                    case 35675:
                        return On;
                    case 35676:
                        return Fn;
                    case 5124:
                    case 35670:
                        return Hn;
                    case 35667:
                    case 35671:
                        return Un;
                    case 35668:
                    case 35672:
                        return Vn;
                    case 35669:
                    case 35673:
                        return jn;
                    case 5125:
                        return Wn;
                    case 35678:
                    case 36198:
                    case 36298:
                    case 36306:
                    case 35682:
                        return Nn;
                    case 35679:
                    case 36299:
                    case 36307:
                        return zn;
                    case 35680:
                    case 36300:
                    case 36308:
                    case 36293:
                        return Gn;
                    case 36289:
                    case 36303:
                    case 36311:
                    case 36292:
                        return Bn
                    }
                }(e.type)
            }
            function oi(t, e, r) {
                this.id = t,
                this.addr = r,
                this.cache = [],
                this.size = e.size,
                this.setValue = function(t) {
                    switch (t) {
                    case 5126:
                        return qn;
                    case 35664:
                        return Zn;
                    case 35665:
                        return Jn;
                    case 35666:
                        return Qn;
                    case 35674:
                        return ti;
                    case 35675:
                        return ei;
                    case 35676:
                        return ri;
                    case 5124:
                    case 35670:
                        return Xn;
                    case 35667:
                    case 35671:
                        return Yn;
                    case 35668:
                    case 35672:
                        return $n;
                    case 35669:
                    case 35673:
                        return Kn;
                    case 35678:
                    case 36198:
                    case 36298:
                    case 36306:
                    case 35682:
                        return ni;
                    case 35680:
                    case 36300:
                    case 36308:
                    case 36293:
                        return ii
                    }
                }(e.type)
            }
            function si(t) {
                this.id = t,
                this.seq = [],
                this.map = {}
            }
            oi.prototype.updateCache = function(t) {
                var e = this.cache;
                t instanceof Float32Array && e.length !== t.length && (this.cache = new Float32Array(t.length)),
                Pn(e, t)
            }
            ,
            si.prototype.setValue = function(t, e, r) {
                for (var n = this.seq, i = 0, a = n.length; i !== a; ++i) {
                    var o = n[i];
                    o.setValue(t, e[o.id], r)
                }
            }
            ;
            var li = /([\w\d_]+)(\])?(\[|\.)?/g;
            function ci(t, e) {
                t.seq.push(e),
                t.map[e.id] = e
            }
            function hi(t, e, r) {
                var n = t.name
                  , i = n.length;
                for (li.lastIndex = 0; ; ) {
                    var a = li.exec(n)
                      , o = li.lastIndex
                      , s = a[1]
                      , l = "]" === a[2]
                      , c = a[3];
                    if (l && (s |= 0),
                    void 0 === c || "[" === c && o + 2 === i) {
                        ci(r, void 0 === c ? new ai(s,t,e) : new oi(s,t,e));
                        break
                    }
                    var h = r.map[s];
                    void 0 === h && ci(r, h = new si(s)),
                    r = h
                }
            }
            function ui(t, e) {
                this.seq = [],
                this.map = {};
                for (var r = t.getProgramParameter(e, 35718), n = 0; n < r; ++n) {
                    var i = t.getActiveUniform(e, n);
                    hi(i, t.getUniformLocation(e, i.name), this)
                }
            }
            function pi(t, e, r) {
                var n = t.createShader(e);
                return t.shaderSource(n, r),
                t.compileShader(n),
                n
            }
            ui.prototype.setValue = function(t, e, r, n) {
                var i = this.map[e];
                void 0 !== i && i.setValue(t, r, n)
            }
            ,
            ui.prototype.setOptional = function(t, e, r) {
                var n = e[r];
                void 0 !== n && this.setValue(t, r, n)
            }
            ,
            ui.upload = function(t, e, r, n) {
                for (var i = 0, a = e.length; i !== a; ++i) {
                    var o = e[i]
                      , s = r[o.id];
                    !1 !== s.needsUpdate && o.setValue(t, s.value, n)
                }
            }
            ,
            ui.seqWithValue = function(t, e) {
                for (var r = [], n = 0, i = t.length; n !== i; ++n) {
                    var a = t[n];
                    a.id in e && r.push(a)
                }
                return r
            }
            ;
            var di = 0;
            function fi(t) {
                switch (t) {
                case q:
                    return ["Linear", "( value )"];
                case X:
                    return ["sRGB", "( value )"];
                case $:
                    return ["RGBE", "( value )"];
                case 3004:
                    return ["RGBM", "( value, 7.0 )"];
                case 3005:
                    return ["RGBM", "( value, 16.0 )"];
                case 3006:
                    return ["RGBD", "( value, 256.0 )"];
                case Y:
                    return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
                case 3003:
                    return ["LogLuv", "( value )"];
                default:
                    return console.warn("THREE.WebGLProgram: Unsupported encoding:", t),
                    ["Linear", "( value )"]
                }
            }
            function mi(t, e, r) {
                var n = t.getShaderParameter(e, 35713)
                  , i = t.getShaderInfoLog(e).trim();
                return n && "" === i ? "" : "THREE.WebGLShader: gl.getShaderInfoLog() " + r + "\n" + i + function(t) {
                    for (var e = t.split("\n"), r = 0; r < e.length; r++)
                        e[r] = r + 1 + ": " + e[r];
                    return e.join("\n")
                }(t.getShaderSource(e))
            }
            function vi(t, e) {
                var r = fi(e);
                return "vec4 " + t + "( vec4 value ) { return " + r[0] + "ToLinear" + r[1] + "; }"
            }
            function gi(t, e) {
                var r;
                switch (e) {
                case 1:
                    r = "Linear";
                    break;
                case 2:
                    r = "Reinhard";
                    break;
                case 3:
                    r = "OptimizedCineon";
                    break;
                case 4:
                    r = "ACESFilmic";
                    break;
                case 5:
                    r = "Custom";
                    break;
                default:
                    console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e),
                    r = "Linear"
                }
                return "vec3 " + t + "( vec3 color ) { return " + r + "ToneMapping( color ); }"
            }
            function yi(t) {
                return "" !== t
            }
            function _i(t, e) {
                return t.replace(/NUM_DIR_LIGHTS/g, e.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g, e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, e.numPointLightShadows)
            }
            function xi(t, e) {
                return t.replace(/NUM_CLIPPING_PLANES/g, e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e.numClippingPlanes - e.numClipIntersection)
            }
            var bi = /^[ \t]*#include +<([\w\d./]+)>/gm;
            function wi(t) {
                return t.replace(bi, Si)
            }
            function Si(t, e) {
                var r = Zr[e];
                if (void 0 === r)
                    throw new Error("Can not resolve #include <" + e + ">");
                return wi(r)
            }
            var Ti = /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g
              , Mi = /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
            function Ei(t) {
                return t.replace(Mi, Pi).replace(Ti, Ai)
            }
            function Ai(t, e, r, n) {
                return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),
                Pi(0, e, r, n)
            }
            function Pi(t, e, r, n) {
                for (var i = "", a = parseInt(e); a < parseInt(r); a++)
                    i += n.replace(/\[\s*i\s*\]/g, "[ " + a + " ]").replace(/UNROLLED_LOOP_INDEX/g, a);
                return i
            }
            function Ci(t) {
                var e = "precision " + t.precision + " float;\nprecision " + t.precision + " int;";
                return "highp" === t.precision ? e += "\n#define HIGH_PRECISION" : "mediump" === t.precision ? e += "\n#define MEDIUM_PRECISION" : "lowp" === t.precision && (e += "\n#define LOW_PRECISION"),
                e
            }
            function Li(t, e, r, n) {
                var o, s, h, u, p = t.getContext(), d = r.defines, f = r.vertexShader, m = r.fragmentShader, v = function(t) {
                    var e = "SHADOWMAP_TYPE_BASIC";
                    return 1 === t.shadowMapType ? e = "SHADOWMAP_TYPE_PCF" : 2 === t.shadowMapType ? e = "SHADOWMAP_TYPE_PCF_SOFT" : 3 === t.shadowMapType && (e = "SHADOWMAP_TYPE_VSM"),
                    e
                }(r), g = function(t) {
                    var e = "ENVMAP_TYPE_CUBE";
                    if (t.envMap)
                        switch (t.envMapMode) {
                        case i:
                        case a:
                            e = "ENVMAP_TYPE_CUBE";
                            break;
                        case l:
                        case c:
                            e = "ENVMAP_TYPE_CUBE_UV"
                        }
                    return e
                }(r), y = function(t) {
                    var e = "ENVMAP_MODE_REFLECTION";
                    if (t.envMap)
                        switch (t.envMapMode) {
                        case a:
                        case c:
                            e = "ENVMAP_MODE_REFRACTION"
                        }
                    return e
                }(r), _ = function(t) {
                    var e = "ENVMAP_BLENDING_NONE";
                    if (t.envMap)
                        switch (t.combine) {
                        case 0:
                            e = "ENVMAP_BLENDING_MULTIPLY";
                            break;
                        case 1:
                            e = "ENVMAP_BLENDING_MIX";
                            break;
                        case 2:
                            e = "ENVMAP_BLENDING_ADD"
                        }
                    return e
                }(r), x = t.gammaFactor > 0 ? t.gammaFactor : 1, b = r.isWebGL2 ? "" : function(t) {
                    return [t.extensionDerivatives || t.envMapCubeUV || t.bumpMap || t.tangentSpaceNormalMap || t.clearcoatNormalMap || t.flatShading || "physical" === t.shaderID ? "#extension GL_OES_standard_derivatives : enable" : "", (t.extensionFragDepth || t.logarithmicDepthBuffer) && t.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "", t.extensionDrawBuffers && t.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "", (t.extensionShaderTextureLOD || t.envMap) && t.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : ""].filter(yi).join("\n")
                }(r), w = function(t) {
                    var e = [];
                    for (var r in t) {
                        var n = t[r];
                        !1 !== n && e.push("#define " + r + " " + n)
                    }
                    return e.join("\n")
                }(d), S = p.createProgram(), T = r.glslVersion ? "#version " + r.glslVersion + "\n" : "";
                r.isRawShaderMaterial ? ((o = [w].filter(yi).join("\n")).length > 0 && (o += "\n"),
                (s = [b, w].filter(yi).join("\n")).length > 0 && (s += "\n")) : (o = [Ci(r), "#define SHADER_NAME " + r.shaderName, w, r.instancing ? "#define USE_INSTANCING" : "", r.instancingColor ? "#define USE_INSTANCING_COLOR" : "", r.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + x, "#define MAX_BONES " + r.maxBones, r.useFog && r.fog ? "#define USE_FOG" : "", r.useFog && r.fogExp2 ? "#define FOG_EXP2" : "", r.map ? "#define USE_MAP" : "", r.envMap ? "#define USE_ENVMAP" : "", r.envMap ? "#define " + y : "", r.lightMap ? "#define USE_LIGHTMAP" : "", r.aoMap ? "#define USE_AOMAP" : "", r.emissiveMap ? "#define USE_EMISSIVEMAP" : "", r.bumpMap ? "#define USE_BUMPMAP" : "", r.normalMap ? "#define USE_NORMALMAP" : "", r.normalMap && r.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", r.normalMap && r.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", r.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", r.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", r.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", r.displacementMap && r.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", r.specularMap ? "#define USE_SPECULARMAP" : "", r.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", r.metalnessMap ? "#define USE_METALNESSMAP" : "", r.alphaMap ? "#define USE_ALPHAMAP" : "", r.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "", r.vertexTangents ? "#define USE_TANGENT" : "", r.vertexColors ? "#define USE_COLOR" : "", r.vertexUvs ? "#define USE_UV" : "", r.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", r.flatShading ? "#define FLAT_SHADED" : "", r.skinning ? "#define USE_SKINNING" : "", r.useVertexTexture ? "#define BONE_TEXTURE" : "", r.morphTargets ? "#define USE_MORPHTARGETS" : "", r.morphNormals && !1 === r.flatShading ? "#define USE_MORPHNORMALS" : "", r.doubleSided ? "#define DOUBLE_SIDED" : "", r.flipSided ? "#define FLIP_SIDED" : "", r.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", r.shadowMapEnabled ? "#define " + v : "", r.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", r.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", r.logarithmicDepthBuffer && r.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", "#ifdef USE_INSTANCING", "\tattribute mat4 instanceMatrix;", "#endif", "#ifdef USE_INSTANCING_COLOR", "\tattribute vec3 instanceColor;", "#endif", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_TANGENT", "\tattribute vec4 tangent;", "#endif", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n"].filter(yi).join("\n"),
                s = [b, Ci(r), "#define SHADER_NAME " + r.shaderName, w, r.alphaTest ? "#define ALPHATEST " + r.alphaTest + (r.alphaTest % 1 ? "" : ".0") : "", "#define GAMMA_FACTOR " + x, r.useFog && r.fog ? "#define USE_FOG" : "", r.useFog && r.fogExp2 ? "#define FOG_EXP2" : "", r.map ? "#define USE_MAP" : "", r.matcap ? "#define USE_MATCAP" : "", r.envMap ? "#define USE_ENVMAP" : "", r.envMap ? "#define " + g : "", r.envMap ? "#define " + y : "", r.envMap ? "#define " + _ : "", r.lightMap ? "#define USE_LIGHTMAP" : "", r.aoMap ? "#define USE_AOMAP" : "", r.emissiveMap ? "#define USE_EMISSIVEMAP" : "", r.bumpMap ? "#define USE_BUMPMAP" : "", r.normalMap ? "#define USE_NORMALMAP" : "", r.normalMap && r.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", r.normalMap && r.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", r.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", r.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", r.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", r.specularMap ? "#define USE_SPECULARMAP" : "", r.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", r.metalnessMap ? "#define USE_METALNESSMAP" : "", r.alphaMap ? "#define USE_ALPHAMAP" : "", r.sheen ? "#define USE_SHEEN" : "", r.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "", r.vertexTangents ? "#define USE_TANGENT" : "", r.vertexColors || r.instancingColor ? "#define USE_COLOR" : "", r.vertexUvs ? "#define USE_UV" : "", r.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", r.gradientMap ? "#define USE_GRADIENTMAP" : "", r.flatShading ? "#define FLAT_SHADED" : "", r.doubleSided ? "#define DOUBLE_SIDED" : "", r.flipSided ? "#define FLIP_SIDED" : "", r.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", r.shadowMapEnabled ? "#define " + v : "", r.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", r.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", r.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", r.logarithmicDepthBuffer && r.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", (r.extensionShaderTextureLOD || r.envMap) && r.rendererExtensionShaderTextureLod ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", 0 !== r.toneMapping ? "#define TONE_MAPPING" : "", 0 !== r.toneMapping ? Zr.tonemapping_pars_fragment : "", 0 !== r.toneMapping ? gi("toneMapping", r.toneMapping) : "", r.dithering ? "#define DITHERING" : "", Zr.encodings_pars_fragment, r.map ? vi("mapTexelToLinear", r.mapEncoding) : "", r.matcap ? vi("matcapTexelToLinear", r.matcapEncoding) : "", r.envMap ? vi("envMapTexelToLinear", r.envMapEncoding) : "", r.emissiveMap ? vi("emissiveMapTexelToLinear", r.emissiveMapEncoding) : "", r.lightMap ? vi("lightMapTexelToLinear", r.lightMapEncoding) : "", ("linearToOutputTexel",
                h = r.outputEncoding,
                u = fi(h),
                "vec4 linearToOutputTexel( vec4 value ) { return LinearTo" + u[0] + u[1] + "; }"), r.depthPacking ? "#define DEPTH_PACKING " + r.depthPacking : "", "\n"].filter(yi).join("\n")),
                f = xi(f = _i(f = wi(f), r), r),
                m = xi(m = _i(m = wi(m), r), r),
                f = Ei(f),
                m = Ei(m),
                r.isWebGL2 && !0 !== r.isRawShaderMaterial && (T = "#version 300 es\n",
                o = ["#define attribute in", "#define varying out", "#define texture2D texture"].join("\n") + "\n" + o,
                s = ["#define varying in", r.glslVersion === Q ? "" : "out highp vec4 pc_fragColor;", r.glslVersion === Q ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad"].join("\n") + "\n" + s);
                var M, E, A = T + s + m, P = pi(p, 35633, T + o + f), C = pi(p, 35632, A);
                if (p.attachShader(S, P),
                p.attachShader(S, C),
                void 0 !== r.index0AttributeName ? p.bindAttribLocation(S, 0, r.index0AttributeName) : !0 === r.morphTargets && p.bindAttribLocation(S, 0, "position"),
                p.linkProgram(S),
                t.debug.checkShaderErrors) {
                    var L = p.getProgramInfoLog(S).trim()
                      , D = p.getShaderInfoLog(P).trim()
                      , R = p.getShaderInfoLog(C).trim()
                      , I = !0
                      , k = !0;
                    if (!1 === p.getProgramParameter(S, 35714)) {
                        I = !1;
                        var O = mi(p, P, "vertex")
                          , F = mi(p, C, "fragment");
                        console.error("THREE.WebGLProgram: shader error: ", p.getError(), "35715", p.getProgramParameter(S, 35715), "gl.getProgramInfoLog", L, O, F)
                    } else
                        "" !== L ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", L) : "" !== D && "" !== R || (k = !1);
                    k && (this.diagnostics = {
                        runnable: I,
                        programLog: L,
                        vertexShader: {
                            log: D,
                            prefix: o
                        },
                        fragmentShader: {
                            log: R,
                            prefix: s
                        }
                    })
                }
                return p.deleteShader(P),
                p.deleteShader(C),
                this.getUniforms = function() {
                    return void 0 === M && (M = new ui(p,S)),
                    M
                }
                ,
                this.getAttributes = function() {
                    return void 0 === E && (E = function(t, e) {
                        for (var r = {}, n = t.getProgramParameter(e, 35721), i = 0; i < n; i++) {
                            var a = t.getActiveAttrib(e, i).name;
                            r[a] = t.getAttribLocation(e, a)
                        }
                        return r
                    }(p, S)),
                    E
                }
                ,
                this.destroy = function() {
                    n.releaseStatesOfProgram(this),
                    p.deleteProgram(S),
                    this.program = void 0
                }
                ,
                this.name = r.shaderName,
                this.id = di++,
                this.cacheKey = e,
                this.usedTimes = 1,
                this.program = S,
                this.vertexShader = P,
                this.fragmentShader = C,
                this
            }
            function Di(t, e, r, n, i, a) {
                var o = []
                  , s = n.isWebGL2
                  , h = n.logarithmicDepthBuffer
                  , u = n.floatVertexTextures
                  , p = n.maxVertexUniforms
                  , d = n.vertexTextures
                  , f = n.precision
                  , m = {
                    MeshDepthMaterial: "depth",
                    MeshDistanceMaterial: "distanceRGBA",
                    MeshNormalMaterial: "normal",
                    MeshBasicMaterial: "basic",
                    MeshLambertMaterial: "lambert",
                    MeshPhongMaterial: "phong",
                    MeshToonMaterial: "toon",
                    MeshStandardMaterial: "physical",
                    MeshPhysicalMaterial: "physical",
                    MeshMatcapMaterial: "matcap",
                    LineBasicMaterial: "basic",
                    LineDashedMaterial: "dashed",
                    PointsMaterial: "points",
                    ShadowMaterial: "shadow",
                    SpriteMaterial: "sprite"
                }
                  , v = ["precision", "isWebGL2", "supportsVertexTextures", "outputEncoding", "instancing", "instancingColor", "map", "mapEncoding", "matcap", "matcapEncoding", "envMap", "envMapMode", "envMapEncoding", "envMapCubeUV", "lightMap", "lightMapEncoding", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "objectSpaceNormalMap", "tangentSpaceNormalMap", "clearcoatMap", "clearcoatRoughnessMap", "clearcoatNormalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "gradientMap", "alphaMap", "combine", "vertexColors", "vertexTangents", "vertexUvs", "uvsVertexOnly", "fog", "useFog", "fogExp2", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "numRectAreaLights", "numDirLightShadows", "numPointLightShadows", "numSpotLightShadows", "shadowMapEnabled", "shadowMapType", "toneMapping", "physicallyCorrectLights", "alphaTest", "doubleSided", "flipSided", "numClippingPlanes", "numClipIntersection", "depthPacking", "dithering", "sheen", "transmissionMap"];
                function g(t) {
                    var e;
                    return t ? t.isTexture ? e = t.encoding : t.isWebGLRenderTarget && (console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),
                    e = t.texture.encoding) : e = q,
                    e
                }
                return {
                    getParameters: function(i, o, v, y, _) {
                        var x, b, w = y.fog, S = i.isMeshStandardMaterial ? y.environment : null, T = e.get(i.envMap || S), M = m[i.type], E = _.isSkinnedMesh ? function(t) {
                            var e = t.skeleton.bones;
                            if (u)
                                return 1024;
                            var r = p
                              , n = Math.floor((r - 20) / 4)
                              , i = Math.min(n, e.length);
                            return i < e.length ? (console.warn("THREE.WebGLRenderer: Skeleton has " + e.length + " bones. This GPU supports " + i + "."),
                            0) : i
                        }(_) : 0;
                        if (null !== i.precision && (f = n.getMaxPrecision(i.precision)) !== i.precision && console.warn("THREE.WebGLProgram.getParameters:", i.precision, "not supported, using", f, "instead."),
                        M) {
                            var A = Qr[M];
                            x = A.vertexShader,
                            b = A.fragmentShader
                        } else
                            x = i.vertexShader,
                            b = i.fragmentShader;
                        var P = t.getRenderTarget();
                        return {
                            isWebGL2: s,
                            shaderID: M,
                            shaderName: i.type,
                            vertexShader: x,
                            fragmentShader: b,
                            defines: i.defines,
                            isRawShaderMaterial: !0 === i.isRawShaderMaterial,
                            glslVersion: i.glslVersion,
                            precision: f,
                            instancing: !0 === _.isInstancedMesh,
                            instancingColor: !0 === _.isInstancedMesh && null !== _.instanceColor,
                            supportsVertexTextures: d,
                            outputEncoding: null !== P ? g(P.texture) : t.outputEncoding,
                            map: !!i.map,
                            mapEncoding: g(i.map),
                            matcap: !!i.matcap,
                            matcapEncoding: g(i.matcap),
                            envMap: !!T,
                            envMapMode: T && T.mapping,
                            envMapEncoding: g(T),
                            envMapCubeUV: !!T && (T.mapping === l || T.mapping === c),
                            lightMap: !!i.lightMap,
                            lightMapEncoding: g(i.lightMap),
                            aoMap: !!i.aoMap,
                            emissiveMap: !!i.emissiveMap,
                            emissiveMapEncoding: g(i.emissiveMap),
                            bumpMap: !!i.bumpMap,
                            normalMap: !!i.normalMap,
                            objectSpaceNormalMap: 1 === i.normalMapType,
                            tangentSpaceNormalMap: 0 === i.normalMapType,
                            clearcoatMap: !!i.clearcoatMap,
                            clearcoatRoughnessMap: !!i.clearcoatRoughnessMap,
                            clearcoatNormalMap: !!i.clearcoatNormalMap,
                            displacementMap: !!i.displacementMap,
                            roughnessMap: !!i.roughnessMap,
                            metalnessMap: !!i.metalnessMap,
                            specularMap: !!i.specularMap,
                            alphaMap: !!i.alphaMap,
                            gradientMap: !!i.gradientMap,
                            sheen: !!i.sheen,
                            transmissionMap: !!i.transmissionMap,
                            combine: i.combine,
                            vertexTangents: i.normalMap && i.vertexTangents,
                            vertexColors: i.vertexColors,
                            vertexUvs: !!(i.map || i.bumpMap || i.normalMap || i.specularMap || i.alphaMap || i.emissiveMap || i.roughnessMap || i.metalnessMap || i.clearcoatMap || i.clearcoatRoughnessMap || i.clearcoatNormalMap || i.displacementMap || i.transmissionMap),
                            uvsVertexOnly: !(i.map || i.bumpMap || i.normalMap || i.specularMap || i.alphaMap || i.emissiveMap || i.roughnessMap || i.metalnessMap || i.clearcoatNormalMap || i.transmissionMap || !i.displacementMap),
                            fog: !!w,
                            useFog: i.fog,
                            fogExp2: w && w.isFogExp2,
                            flatShading: i.flatShading,
                            sizeAttenuation: i.sizeAttenuation,
                            logarithmicDepthBuffer: h,
                            skinning: i.skinning && E > 0,
                            maxBones: E,
                            useVertexTexture: u,
                            morphTargets: i.morphTargets,
                            morphNormals: i.morphNormals,
                            maxMorphTargets: t.maxMorphTargets,
                            maxMorphNormals: t.maxMorphNormals,
                            numDirLights: o.directional.length,
                            numPointLights: o.point.length,
                            numSpotLights: o.spot.length,
                            numRectAreaLights: o.rectArea.length,
                            numHemiLights: o.hemi.length,
                            numDirLightShadows: o.directionalShadowMap.length,
                            numPointLightShadows: o.pointShadowMap.length,
                            numSpotLightShadows: o.spotShadowMap.length,
                            numClippingPlanes: a.numPlanes,
                            numClipIntersection: a.numIntersection,
                            dithering: i.dithering,
                            shadowMapEnabled: t.shadowMap.enabled && v.length > 0,
                            shadowMapType: t.shadowMap.type,
                            toneMapping: i.toneMapped ? t.toneMapping : 0,
                            physicallyCorrectLights: t.physicallyCorrectLights,
                            premultipliedAlpha: i.premultipliedAlpha,
                            alphaTest: i.alphaTest,
                            doubleSided: 2 === i.side,
                            flipSided: 1 === i.side,
                            depthPacking: void 0 !== i.depthPacking && i.depthPacking,
                            index0AttributeName: i.index0AttributeName,
                            extensionDerivatives: i.extensions && i.extensions.derivatives,
                            extensionFragDepth: i.extensions && i.extensions.fragDepth,
                            extensionDrawBuffers: i.extensions && i.extensions.drawBuffers,
                            extensionShaderTextureLOD: i.extensions && i.extensions.shaderTextureLOD,
                            rendererExtensionFragDepth: s || r.has("EXT_frag_depth"),
                            rendererExtensionDrawBuffers: s || r.has("WEBGL_draw_buffers"),
                            rendererExtensionShaderTextureLod: s || r.has("EXT_shader_texture_lod"),
                            customProgramCacheKey: i.customProgramCacheKey()
                        }
                    },
                    getProgramCacheKey: function(e) {
                        var r = [];
                        if (e.shaderID ? r.push(e.shaderID) : (r.push(e.fragmentShader),
                        r.push(e.vertexShader)),
                        void 0 !== e.defines)
                            for (var n in e.defines)
                                r.push(n),
                                r.push(e.defines[n]);
                        if (!1 === e.isRawShaderMaterial) {
                            for (var i = 0; i < v.length; i++)
                                r.push(e[v[i]]);
                            r.push(t.outputEncoding),
                            r.push(t.gammaFactor)
                        }
                        return r.push(e.customProgramCacheKey),
                        r.join()
                    },
                    getUniforms: function(t) {
                        var e, r = m[t.type];
                        if (r) {
                            var n = Qr[r];
                            e = Fr.clone(n.uniforms)
                        } else
                            e = t.uniforms;
                        return e
                    },
                    acquireProgram: function(e, r) {
                        for (var n, a = 0, s = o.length; a < s; a++) {
                            var l = o[a];
                            if (l.cacheKey === r) {
                                ++(n = l).usedTimes;
                                break
                            }
                        }
                        return void 0 === n && (n = new Li(t,r,e,i),
                        o.push(n)),
                        n
                    },
                    releaseProgram: function(t) {
                        if (0 == --t.usedTimes) {
                            var e = o.indexOf(t);
                            o[e] = o[o.length - 1],
                            o.pop(),
                            t.destroy()
                        }
                    },
                    programs: o
                }
            }
            function Ri() {
                var t = new WeakMap;
                return {
                    get: function(e) {
                        var r = t.get(e);
                        return void 0 === r && (r = {},
                        t.set(e, r)),
                        r
                    },
                    remove: function(e) {
                        t.delete(e)
                    },
                    update: function(e, r, n) {
                        t.get(e)[r] = n
                    },
                    dispose: function() {
                        t = new WeakMap
                    }
                }
            }
            function Ii(t, e) {
                return t.groupOrder !== e.groupOrder ? t.groupOrder - e.groupOrder : t.renderOrder !== e.renderOrder ? t.renderOrder - e.renderOrder : t.program !== e.program ? t.program.id - e.program.id : t.material.id !== e.material.id ? t.material.id - e.material.id : t.z !== e.z ? t.z - e.z : t.id - e.id
            }
            function ki(t, e) {
                return t.groupOrder !== e.groupOrder ? t.groupOrder - e.groupOrder : t.renderOrder !== e.renderOrder ? t.renderOrder - e.renderOrder : t.z !== e.z ? e.z - t.z : t.id - e.id
            }
            function Oi(t) {
                var e = []
                  , r = 0
                  , n = []
                  , i = []
                  , a = {
                    id: -1
                };
                function o(n, i, o, s, l, c) {
                    var h = e[r]
                      , u = t.get(o);
                    return void 0 === h ? (h = {
                        id: n.id,
                        object: n,
                        geometry: i,
                        material: o,
                        program: u.program || a,
                        groupOrder: s,
                        renderOrder: n.renderOrder,
                        z: l,
                        group: c
                    },
                    e[r] = h) : (h.id = n.id,
                    h.object = n,
                    h.geometry = i,
                    h.material = o,
                    h.program = u.program || a,
                    h.groupOrder = s,
                    h.renderOrder = n.renderOrder,
                    h.z = l,
                    h.group = c),
                    r++,
                    h
                }
                return {
                    opaque: n,
                    transparent: i,
                    init: function() {
                        r = 0,
                        n.length = 0,
                        i.length = 0
                    },
                    push: function(t, e, r, a, s, l) {
                        var c = o(t, e, r, a, s, l);
                        (!0 === r.transparent ? i : n).push(c)
                    },
                    unshift: function(t, e, r, a, s, l) {
                        var c = o(t, e, r, a, s, l);
                        (!0 === r.transparent ? i : n).unshift(c)
                    },
                    finish: function() {
                        for (var t = r, n = e.length; t < n; t++) {
                            var i = e[t];
                            if (null === i.id)
                                break;
                            i.id = null,
                            i.object = null,
                            i.geometry = null,
                            i.material = null,
                            i.program = null,
                            i.group = null
                        }
                    },
                    sort: function(t, e) {
                        n.length > 1 && n.sort(t || Ii),
                        i.length > 1 && i.sort(e || ki)
                    }
                }
            }
            function Fi(t) {
                var e = new WeakMap;
                return {
                    get: function(r, n) {
                        var i, a = e.get(r);
                        return void 0 === a ? (i = new Oi(t),
                        e.set(r, new WeakMap),
                        e.get(r).set(n, i)) : void 0 === (i = a.get(n)) && (i = new Oi(t),
                        a.set(n, i)),
                        i
                    },
                    dispose: function() {
                        e = new WeakMap
                    }
                }
            }
            function Ni() {
                var t = {};
                return {
                    get: function(e) {
                        if (void 0 !== t[e.id])
                            return t[e.id];
                        var r;
                        switch (e.type) {
                        case "DirectionalLight":
                            r = {
                                direction: new _t,
                                color: new Ge
                            };
                            break;
                        case "SpotLight":
                            r = {
                                position: new _t,
                                direction: new _t,
                                color: new Ge,
                                distance: 0,
                                coneCos: 0,
                                penumbraCos: 0,
                                decay: 0
                            };
                            break;
                        case "PointLight":
                            r = {
                                position: new _t,
                                color: new Ge,
                                distance: 0,
                                decay: 0
                            };
                            break;
                        case "HemisphereLight":
                            r = {
                                direction: new _t,
                                skyColor: new Ge,
                                groundColor: new Ge
                            };
                            break;
                        case "RectAreaLight":
                            r = {
                                color: new Ge,
                                position: new _t,
                                halfWidth: new _t,
                                halfHeight: new _t
                            }
                        }
                        return t[e.id] = r,
                        r
                    }
                }
            }
            var Bi = 0;
            function zi(t, e) {
                return (e.castShadow ? 1 : 0) - (t.castShadow ? 1 : 0)
            }
            function Gi(t, e) {
                for (var r, n = new Ni, i = (r = {},
                {
                    get: function(t) {
                        if (void 0 !== r[t.id])
                            return r[t.id];
                        var e;
                        switch (t.type) {
                        case "DirectionalLight":
                        case "SpotLight":
                            e = {
                                shadowBias: 0,
                                shadowNormalBias: 0,
                                shadowRadius: 1,
                                shadowMapSize: new ht
                            };
                            break;
                        case "PointLight":
                            e = {
                                shadowBias: 0,
                                shadowNormalBias: 0,
                                shadowRadius: 1,
                                shadowMapSize: new ht,
                                shadowCameraNear: 1,
                                shadowCameraFar: 1e3
                            }
                        }
                        return r[t.id] = e,
                        e
                    }
                }), a = {
                    version: 0,
                    hash: {
                        directionalLength: -1,
                        pointLength: -1,
                        spotLength: -1,
                        rectAreaLength: -1,
                        hemiLength: -1,
                        numDirectionalShadows: -1,
                        numPointShadows: -1,
                        numSpotShadows: -1
                    },
                    ambient: [0, 0, 0],
                    probe: [],
                    directional: [],
                    directionalShadow: [],
                    directionalShadowMap: [],
                    directionalShadowMatrix: [],
                    spot: [],
                    spotShadow: [],
                    spotShadowMap: [],
                    spotShadowMatrix: [],
                    rectArea: [],
                    rectAreaLTC1: null,
                    rectAreaLTC2: null,
                    point: [],
                    pointShadow: [],
                    pointShadowMap: [],
                    pointShadowMatrix: [],
                    hemi: []
                }, o = 0; o < 9; o++)
                    a.probe.push(new _t);
                var s = new _t
                  , l = new Xt
                  , c = new Xt;
                return {
                    setup: function(r, o, h) {
                        for (var u = 0, p = 0, d = 0, f = 0; f < 9; f++)
                            a.probe[f].set(0, 0, 0);
                        var m = 0
                          , v = 0
                          , g = 0
                          , y = 0
                          , _ = 0
                          , x = 0
                          , b = 0
                          , w = 0
                          , S = h.matrixWorldInverse;
                        r.sort(zi);
                        for (var T = 0, M = r.length; T < M; T++) {
                            var E = r[T]
                              , A = E.color
                              , P = E.intensity
                              , C = E.distance
                              , L = E.shadow && E.shadow.map ? E.shadow.map.texture : null;
                            if (E.isAmbientLight)
                                u += A.r * P,
                                p += A.g * P,
                                d += A.b * P;
                            else if (E.isLightProbe)
                                for (var D = 0; D < 9; D++)
                                    a.probe[D].addScaledVector(E.sh.coefficients[D], P);
                            else if (E.isDirectionalLight) {
                                var R = n.get(E);
                                if (R.color.copy(E.color).multiplyScalar(E.intensity),
                                R.direction.setFromMatrixPosition(E.matrixWorld),
                                s.setFromMatrixPosition(E.target.matrixWorld),
                                R.direction.sub(s),
                                R.direction.transformDirection(S),
                                E.castShadow) {
                                    var I = E.shadow
                                      , k = i.get(E);
                                    k.shadowBias = I.bias,
                                    k.shadowNormalBias = I.normalBias,
                                    k.shadowRadius = I.radius,
                                    k.shadowMapSize = I.mapSize,
                                    a.directionalShadow[m] = k,
                                    a.directionalShadowMap[m] = L,
                                    a.directionalShadowMatrix[m] = E.shadow.matrix,
                                    x++
                                }
                                a.directional[m] = R,
                                m++
                            } else if (E.isSpotLight) {
                                var O = n.get(E);
                                if (O.position.setFromMatrixPosition(E.matrixWorld),
                                O.position.applyMatrix4(S),
                                O.color.copy(A).multiplyScalar(P),
                                O.distance = C,
                                O.direction.setFromMatrixPosition(E.matrixWorld),
                                s.setFromMatrixPosition(E.target.matrixWorld),
                                O.direction.sub(s),
                                O.direction.transformDirection(S),
                                O.coneCos = Math.cos(E.angle),
                                O.penumbraCos = Math.cos(E.angle * (1 - E.penumbra)),
                                O.decay = E.decay,
                                E.castShadow) {
                                    var F = E.shadow
                                      , N = i.get(E);
                                    N.shadowBias = F.bias,
                                    N.shadowNormalBias = F.normalBias,
                                    N.shadowRadius = F.radius,
                                    N.shadowMapSize = F.mapSize,
                                    a.spotShadow[g] = N,
                                    a.spotShadowMap[g] = L,
                                    a.spotShadowMatrix[g] = E.shadow.matrix,
                                    w++
                                }
                                a.spot[g] = O,
                                g++
                            } else if (E.isRectAreaLight) {
                                var B = n.get(E);
                                B.color.copy(A).multiplyScalar(P),
                                B.position.setFromMatrixPosition(E.matrixWorld),
                                B.position.applyMatrix4(S),
                                c.identity(),
                                l.copy(E.matrixWorld),
                                l.premultiply(S),
                                c.extractRotation(l),
                                B.halfWidth.set(.5 * E.width, 0, 0),
                                B.halfHeight.set(0, .5 * E.height, 0),
                                B.halfWidth.applyMatrix4(c),
                                B.halfHeight.applyMatrix4(c),
                                a.rectArea[y] = B,
                                y++
                            } else if (E.isPointLight) {
                                var z = n.get(E);
                                if (z.position.setFromMatrixPosition(E.matrixWorld),
                                z.position.applyMatrix4(S),
                                z.color.copy(E.color).multiplyScalar(E.intensity),
                                z.distance = E.distance,
                                z.decay = E.decay,
                                E.castShadow) {
                                    var G = E.shadow
                                      , H = i.get(E);
                                    H.shadowBias = G.bias,
                                    H.shadowNormalBias = G.normalBias,
                                    H.shadowRadius = G.radius,
                                    H.shadowMapSize = G.mapSize,
                                    H.shadowCameraNear = G.camera.near,
                                    H.shadowCameraFar = G.camera.far,
                                    a.pointShadow[v] = H,
                                    a.pointShadowMap[v] = L,
                                    a.pointShadowMatrix[v] = E.shadow.matrix,
                                    b++
                                }
                                a.point[v] = z,
                                v++
                            } else if (E.isHemisphereLight) {
                                var U = n.get(E);
                                U.direction.setFromMatrixPosition(E.matrixWorld),
                                U.direction.transformDirection(S),
                                U.direction.normalize(),
                                U.skyColor.copy(E.color).multiplyScalar(P),
                                U.groundColor.copy(E.groundColor).multiplyScalar(P),
                                a.hemi[_] = U,
                                _++
                            }
                        }
                        y > 0 && (e.isWebGL2 || !0 === t.has("OES_texture_float_linear") ? (a.rectAreaLTC1 = Jr.LTC_FLOAT_1,
                        a.rectAreaLTC2 = Jr.LTC_FLOAT_2) : !0 === t.has("OES_texture_half_float_linear") ? (a.rectAreaLTC1 = Jr.LTC_HALF_1,
                        a.rectAreaLTC2 = Jr.LTC_HALF_2) : console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),
                        a.ambient[0] = u,
                        a.ambient[1] = p,
                        a.ambient[2] = d;
                        var V = a.hash;
                        V.directionalLength === m && V.pointLength === v && V.spotLength === g && V.rectAreaLength === y && V.hemiLength === _ && V.numDirectionalShadows === x && V.numPointShadows === b && V.numSpotShadows === w || (a.directional.length = m,
                        a.spot.length = g,
                        a.rectArea.length = y,
                        a.point.length = v,
                        a.hemi.length = _,
                        a.directionalShadow.length = x,
                        a.directionalShadowMap.length = x,
                        a.pointShadow.length = b,
                        a.pointShadowMap.length = b,
                        a.spotShadow.length = w,
                        a.spotShadowMap.length = w,
                        a.directionalShadowMatrix.length = x,
                        a.pointShadowMatrix.length = b,
                        a.spotShadowMatrix.length = w,
                        V.directionalLength = m,
                        V.pointLength = v,
                        V.spotLength = g,
                        V.rectAreaLength = y,
                        V.hemiLength = _,
                        V.numDirectionalShadows = x,
                        V.numPointShadows = b,
                        V.numSpotShadows = w,
                        a.version = Bi++)
                    },
                    state: a
                }
            }
            function Hi(t, e) {
                var r = new Gi(t,e)
                  , n = []
                  , i = [];
                return {
                    init: function() {
                        n.length = 0,
                        i.length = 0
                    },
                    state: {
                        lightsArray: n,
                        shadowsArray: i,
                        lights: r
                    },
                    setupLights: function(t) {
                        r.setup(n, i, t)
                    },
                    pushLight: function(t) {
                        n.push(t)
                    },
                    pushShadow: function(t) {
                        i.push(t)
                    }
                }
            }
            function Ui(t, e) {
                var r = new WeakMap;
                return {
                    get: function(n, i) {
                        var a;
                        return !1 === r.has(n) ? (a = new Hi(t,e),
                        r.set(n, new WeakMap),
                        r.get(n).set(i, a)) : !1 === r.get(n).has(i) ? (a = new Hi(t,e),
                        r.get(n).set(i, a)) : a = r.get(n).get(i),
                        a
                    },
                    dispose: function() {
                        r = new WeakMap
                    }
                }
            }
            function Vi(t) {
                Ve.call(this),
                this.type = "MeshDepthMaterial",
                this.depthPacking = 3200,
                this.skinning = !1,
                this.morphTargets = !1,
                this.map = null,
                this.alphaMap = null,
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.fog = !1,
                this.setValues(t)
            }
            function ji(t) {
                Ve.call(this),
                this.type = "MeshDistanceMaterial",
                this.referencePosition = new _t,
                this.nearDistance = 1,
                this.farDistance = 1e3,
                this.skinning = !1,
                this.morphTargets = !1,
                this.map = null,
                this.alphaMap = null,
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.fog = !1,
                this.setValues(t)
            }
            function Wi(t, e, r) {
                var n = new Xr
                  , i = new ht
                  , a = new ht
                  , o = new mt
                  , s = []
                  , l = []
                  , c = {}
                  , h = {
                    0: 1,
                    1: 0,
                    2: 2
                }
                  , u = new Nr({
                    defines: {
                        SAMPLE_RATE: 2 / 8,
                        HALF_SAMPLE_RATE: 1 / 8
                    },
                    uniforms: {
                        shadow_pass: {
                            value: null
                        },
                        resolution: {
                            value: new ht
                        },
                        radius: {
                            value: 4
                        }
                    },
                    vertexShader: "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",
                    fragmentShader: "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"
                })
                  , p = u.clone();
                p.defines.HORIZONAL_PASS = 1;
                var f = new pr;
                f.setAttribute("position", new Xe(new Float32Array([-1, -1, .5, 3, -1, .5, -1, 3, .5]),3));
                var m = new Lr(f,u)
                  , g = this;
                function y(r, n) {
                    var i = e.update(m);
                    u.uniforms.shadow_pass.value = r.map.texture,
                    u.uniforms.resolution.value = r.mapSize,
                    u.uniforms.radius.value = r.radius,
                    t.setRenderTarget(r.mapPass),
                    t.clear(),
                    t.renderBufferDirect(n, null, i, u, m, null),
                    p.uniforms.shadow_pass.value = r.mapPass.texture,
                    p.uniforms.resolution.value = r.mapSize,
                    p.uniforms.radius.value = r.radius,
                    t.setRenderTarget(r.map),
                    t.clear(),
                    t.renderBufferDirect(n, null, i, p, m, null)
                }
                function _(t, e, r) {
                    var n = t << 0 | e << 1 | r << 2
                      , i = s[n];
                    return void 0 === i && (i = new Vi({
                        depthPacking: 3201,
                        morphTargets: t,
                        skinning: e
                    }),
                    s[n] = i),
                    i
                }
                function x(t, e, r) {
                    var n = t << 0 | e << 1 | r << 2
                      , i = l[n];
                    return void 0 === i && (i = new ji({
                        morphTargets: t,
                        skinning: e
                    }),
                    l[n] = i),
                    i
                }
                function b(e, r, n, i, a, o, s) {
                    var l = null
                      , u = _
                      , p = e.customDepthMaterial;
                    if (!0 === i.isPointLight && (u = x,
                    p = e.customDistanceMaterial),
                    void 0 === p) {
                        var d = !1;
                        !0 === n.morphTargets && (d = r.morphAttributes && r.morphAttributes.position && r.morphAttributes.position.length > 0);
                        var f = !1;
                        !0 === e.isSkinnedMesh && (!0 === n.skinning ? f = !0 : console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:", e)),
                        l = u(d, f, !0 === e.isInstancedMesh)
                    } else
                        l = p;
                    if (t.localClippingEnabled && !0 === n.clipShadows && 0 !== n.clippingPlanes.length) {
                        var m = l.uuid
                          , v = n.uuid
                          , g = c[m];
                        void 0 === g && (g = {},
                        c[m] = g);
                        var y = g[v];
                        void 0 === y && (y = l.clone(),
                        g[v] = y),
                        l = y
                    }
                    return l.visible = n.visible,
                    l.wireframe = n.wireframe,
                    l.side = 3 === s ? null !== n.shadowSide ? n.shadowSide : n.side : null !== n.shadowSide ? n.shadowSide : h[n.side],
                    l.clipShadows = n.clipShadows,
                    l.clippingPlanes = n.clippingPlanes,
                    l.clipIntersection = n.clipIntersection,
                    l.wireframeLinewidth = n.wireframeLinewidth,
                    l.linewidth = n.linewidth,
                    !0 === i.isPointLight && !0 === l.isMeshDistanceMaterial && (l.referencePosition.setFromMatrixPosition(i.matrixWorld),
                    l.nearDistance = a,
                    l.farDistance = o),
                    l
                }
                function w(r, i, a, o, s) {
                    if (!1 !== r.visible) {
                        if (r.layers.test(i.layers) && (r.isMesh || r.isLine || r.isPoints) && (r.castShadow || r.receiveShadow && 3 === s) && (!r.frustumCulled || n.intersectsObject(r))) {
                            r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse, r.matrixWorld);
                            var l = e.update(r)
                              , c = r.material;
                            if (Array.isArray(c))
                                for (var h = l.groups, u = 0, p = h.length; u < p; u++) {
                                    var d = h[u]
                                      , f = c[d.materialIndex];
                                    if (f && f.visible) {
                                        var m = b(r, l, f, o, a.near, a.far, s);
                                        t.renderBufferDirect(a, null, l, m, r, d)
                                    }
                                }
                            else if (c.visible) {
                                var v = b(r, l, c, o, a.near, a.far, s);
                                t.renderBufferDirect(a, null, l, v, r, null)
                            }
                        }
                        for (var g = r.children, y = 0, _ = g.length; y < _; y++)
                            w(g[y], i, a, o, s)
                    }
                }
                this.enabled = !1,
                this.autoUpdate = !0,
                this.needsUpdate = !1,
                this.type = 1,
                this.render = function(e, s, l) {
                    if (!1 !== g.enabled && (!1 !== g.autoUpdate || !1 !== g.needsUpdate) && 0 !== e.length) {
                        var c = t.getRenderTarget()
                          , h = t.getActiveCubeFace()
                          , u = t.getActiveMipmapLevel()
                          , p = t.state;
                        p.setBlending(0),
                        p.buffers.color.setClear(1, 1, 1, 1),
                        p.buffers.depth.setTest(!0),
                        p.setScissorTest(!1);
                        for (var f = 0, m = e.length; f < m; f++) {
                            var _ = e[f]
                              , x = _.shadow;
                            if (void 0 !== x) {
                                if (!1 !== x.autoUpdate || !1 !== x.needsUpdate) {
                                    i.copy(x.mapSize);
                                    var b = x.getFrameExtents();
                                    if (i.multiply(b),
                                    a.copy(x.mapSize),
                                    (i.x > r || i.y > r) && (i.x > r && (a.x = Math.floor(r / b.x),
                                    i.x = a.x * b.x,
                                    x.mapSize.x = a.x),
                                    i.y > r && (a.y = Math.floor(r / b.y),
                                    i.y = a.y * b.y,
                                    x.mapSize.y = a.y)),
                                    null === x.map && !x.isPointLightShadow && 3 === this.type) {
                                        var S = {
                                            minFilter: v,
                                            magFilter: v,
                                            format: M
                                        };
                                        x.map = new vt(i.x,i.y,S),
                                        x.map.texture.name = _.name + ".shadowMap",
                                        x.mapPass = new vt(i.x,i.y,S),
                                        x.camera.updateProjectionMatrix()
                                    }
                                    if (null === x.map) {
                                        var T = {
                                            minFilter: d,
                                            magFilter: d,
                                            format: M
                                        };
                                        x.map = new vt(i.x,i.y,T),
                                        x.map.texture.name = _.name + ".shadowMap",
                                        x.camera.updateProjectionMatrix()
                                    }
                                    t.setRenderTarget(x.map),
                                    t.clear();
                                    for (var E = x.getViewportCount(), A = 0; A < E; A++) {
                                        var P = x.getViewport(A);
                                        o.set(a.x * P.x, a.y * P.y, a.x * P.z, a.y * P.w),
                                        p.viewport(o),
                                        x.updateMatrices(_, A),
                                        n = x.getFrustum(),
                                        w(s, l, x.camera, _, this.type)
                                    }
                                    x.isPointLightShadow || 3 !== this.type || y(x, l),
                                    x.needsUpdate = !1
                                }
                            } else
                                console.warn("THREE.WebGLShadowMap:", _, "has no shadow.")
                        }
                        g.needsUpdate = !1,
                        t.setRenderTarget(c, h, u)
                    }
                }
            }
            function qi(t, r, n) {
                var i, a, o = n.isWebGL2, s = new function() {
                    var e = !1
                      , r = new mt
                      , n = null
                      , i = new mt(0,0,0,0);
                    return {
                        setMask: function(r) {
                            n === r || e || (t.colorMask(r, r, r, r),
                            n = r)
                        },
                        setLocked: function(t) {
                            e = t
                        },
                        setClear: function(e, n, a, o, s) {
                            !0 === s && (e *= o,
                            n *= o,
                            a *= o),
                            r.set(e, n, a, o),
                            !1 === i.equals(r) && (t.clearColor(e, n, a, o),
                            i.copy(r))
                        },
                        reset: function() {
                            e = !1,
                            n = null,
                            i.set(-1, 0, 0, 0)
                        }
                    }
                }
                , l = new function() {
                    var e = !1
                      , r = null
                      , n = null
                      , i = null;
                    return {
                        setTest: function(t) {
                            t ? F(2929) : N(2929)
                        },
                        setMask: function(n) {
                            r === n || e || (t.depthMask(n),
                            r = n)
                        },
                        setFunc: function(e) {
                            if (n !== e) {
                                if (e)
                                    switch (e) {
                                    case 0:
                                        t.depthFunc(512);
                                        break;
                                    case 1:
                                        t.depthFunc(519);
                                        break;
                                    case 2:
                                        t.depthFunc(513);
                                        break;
                                    case 3:
                                    default:
                                        t.depthFunc(515);
                                        break;
                                    case 4:
                                        t.depthFunc(514);
                                        break;
                                    case 5:
                                        t.depthFunc(518);
                                        break;
                                    case 6:
                                        t.depthFunc(516);
                                        break;
                                    case 7:
                                        t.depthFunc(517)
                                    }
                                else
                                    t.depthFunc(515);
                                n = e
                            }
                        },
                        setLocked: function(t) {
                            e = t
                        },
                        setClear: function(e) {
                            i !== e && (t.clearDepth(e),
                            i = e)
                        },
                        reset: function() {
                            e = !1,
                            r = null,
                            n = null,
                            i = null
                        }
                    }
                }
                , c = new function() {
                    var e = !1
                      , r = null
                      , n = null
                      , i = null
                      , a = null
                      , o = null
                      , s = null
                      , l = null
                      , c = null;
                    return {
                        setTest: function(t) {
                            e || (t ? F(2960) : N(2960))
                        },
                        setMask: function(n) {
                            r === n || e || (t.stencilMask(n),
                            r = n)
                        },
                        setFunc: function(e, r, o) {
                            n === e && i === r && a === o || (t.stencilFunc(e, r, o),
                            n = e,
                            i = r,
                            a = o)
                        },
                        setOp: function(e, r, n) {
                            o === e && s === r && l === n || (t.stencilOp(e, r, n),
                            o = e,
                            s = r,
                            l = n)
                        },
                        setLocked: function(t) {
                            e = t
                        },
                        setClear: function(e) {
                            c !== e && (t.clearStencil(e),
                            c = e)
                        },
                        reset: function() {
                            e = !1,
                            r = null,
                            n = null,
                            i = null,
                            a = null,
                            o = null,
                            s = null,
                            l = null,
                            c = null
                        }
                    }
                }
                , h = {}, u = null, p = null, d = null, f = null, m = null, v = null, g = null, y = null, _ = null, x = !1, b = null, w = null, S = null, T = null, M = null, E = t.getParameter(35661), A = !1, P = 0, C = t.getParameter(7938);
                -1 !== C.indexOf("WebGL") ? (P = parseFloat(/^WebGL\ ([0-9])/.exec(C)[1]),
                A = P >= 1) : -1 !== C.indexOf("OpenGL ES") && (P = parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(C)[1]),
                A = P >= 2);
                var L = null
                  , D = {}
                  , R = new mt
                  , I = new mt;
                function k(e, r, n) {
                    var i = new Uint8Array(4)
                      , a = t.createTexture();
                    t.bindTexture(e, a),
                    t.texParameteri(e, 10241, 9728),
                    t.texParameteri(e, 10240, 9728);
                    for (var o = 0; o < n; o++)
                        t.texImage2D(r + o, 0, 6408, 1, 1, 0, 6408, 5121, i);
                    return a
                }
                var O = {};
                function F(e) {
                    !0 !== h[e] && (t.enable(e),
                    h[e] = !0)
                }
                function N(e) {
                    !1 !== h[e] && (t.disable(e),
                    h[e] = !1)
                }
                O[3553] = k(3553, 3553, 1),
                O[34067] = k(34067, 34069, 6),
                s.setClear(0, 0, 0, 1),
                l.setClear(1),
                c.setClear(0),
                F(2929),
                l.setFunc(3),
                U(!1),
                V(1),
                F(2884),
                H(0);
                var B = ((i = {})[100] = 32774,
                i[101] = 32778,
                i[102] = 32779,
                i);
                if (o)
                    B[103] = 32775,
                    B[104] = 32776;
                else {
                    var z = r.get("EXT_blend_minmax");
                    null !== z && (B[103] = z.MIN_EXT,
                    B[104] = z.MAX_EXT)
                }
                var G = ((a = {})[200] = 0,
                a[201] = 1,
                a[202] = 768,
                a[204] = 770,
                a[210] = 776,
                a[208] = 774,
                a[206] = 772,
                a[203] = 769,
                a[205] = 771,
                a[209] = 775,
                a[207] = 773,
                a);
                function H(r, n, i, a, o, s, l, c) {
                    if (0 !== r) {
                        if (p || (F(3042),
                        p = !0),
                        5 === r)
                            o = o || n,
                            s = s || i,
                            l = l || a,
                            n === f && o === g || (t.blendEquationSeparate(B[n], B[o]),
                            f = n,
                            g = o),
                            i === m && a === v && s === y && l === _ || (t.blendFuncSeparate(G[i], G[a], G[s], G[l]),
                            m = i,
                            v = a,
                            y = s,
                            _ = l),
                            d = r,
                            x = null;
                        else if (r !== d || c !== x) {
                            if (f === e && g === e || (t.blendEquation(32774),
                            f = e,
                            g = e),
                            c)
                                switch (r) {
                                case 1:
                                    t.blendFuncSeparate(1, 771, 1, 771);
                                    break;
                                case 2:
                                    t.blendFunc(1, 1);
                                    break;
                                case 3:
                                    t.blendFuncSeparate(0, 0, 769, 771);
                                    break;
                                case 4:
                                    t.blendFuncSeparate(0, 768, 0, 770);
                                    break;
                                default:
                                    console.error("THREE.WebGLState: Invalid blending: ", r)
                                }
                            else
                                switch (r) {
                                case 1:
                                    t.blendFuncSeparate(770, 771, 1, 771);
                                    break;
                                case 2:
                                    t.blendFunc(770, 1);
                                    break;
                                case 3:
                                    t.blendFunc(0, 769);
                                    break;
                                case 4:
                                    t.blendFunc(0, 768);
                                    break;
                                default:
                                    console.error("THREE.WebGLState: Invalid blending: ", r)
                                }
                            m = null,
                            v = null,
                            y = null,
                            _ = null,
                            d = r,
                            x = c
                        }
                    } else
                        p && (N(3042),
                        p = !1)
                }
                function U(e) {
                    b !== e && (e ? t.frontFace(2304) : t.frontFace(2305),
                    b = e)
                }
                function V(e) {
                    0 !== e ? (F(2884),
                    e !== w && (1 === e ? t.cullFace(1029) : 2 === e ? t.cullFace(1028) : t.cullFace(1032))) : N(2884),
                    w = e
                }
                function j(e, r, n) {
                    e ? (F(32823),
                    T === r && M === n || (t.polygonOffset(r, n),
                    T = r,
                    M = n)) : N(32823)
                }
                function W(e) {
                    void 0 === e && (e = 33984 + E - 1),
                    L !== e && (t.activeTexture(e),
                    L = e)
                }
                return {
                    buffers: {
                        color: s,
                        depth: l,
                        stencil: c
                    },
                    enable: F,
                    disable: N,
                    useProgram: function(e) {
                        return u !== e && (t.useProgram(e),
                        u = e,
                        !0)
                    },
                    setBlending: H,
                    setMaterial: function(t, e) {
                        2 === t.side ? N(2884) : F(2884);
                        var r = 1 === t.side;
                        e && (r = !r),
                        U(r),
                        1 === t.blending && !1 === t.transparent ? H(0) : H(t.blending, t.blendEquation, t.blendSrc, t.blendDst, t.blendEquationAlpha, t.blendSrcAlpha, t.blendDstAlpha, t.premultipliedAlpha),
                        l.setFunc(t.depthFunc),
                        l.setTest(t.depthTest),
                        l.setMask(t.depthWrite),
                        s.setMask(t.colorWrite);
                        var n = t.stencilWrite;
                        c.setTest(n),
                        n && (c.setMask(t.stencilWriteMask),
                        c.setFunc(t.stencilFunc, t.stencilRef, t.stencilFuncMask),
                        c.setOp(t.stencilFail, t.stencilZFail, t.stencilZPass)),
                        j(t.polygonOffset, t.polygonOffsetFactor, t.polygonOffsetUnits)
                    },
                    setFlipSided: U,
                    setCullFace: V,
                    setLineWidth: function(e) {
                        e !== S && (A && t.lineWidth(e),
                        S = e)
                    },
                    setPolygonOffset: j,
                    setScissorTest: function(t) {
                        t ? F(3089) : N(3089)
                    },
                    activeTexture: W,
                    bindTexture: function(e, r) {
                        null === L && W();
                        var n = D[L];
                        void 0 === n && (n = {
                            type: void 0,
                            texture: void 0
                        },
                        D[L] = n),
                        n.type === e && n.texture === r || (t.bindTexture(e, r || O[e]),
                        n.type = e,
                        n.texture = r)
                    },
                    unbindTexture: function() {
                        var e = D[L];
                        void 0 !== e && void 0 !== e.type && (t.bindTexture(e.type, null),
                        e.type = void 0,
                        e.texture = void 0)
                    },
                    compressedTexImage2D: function() {
                        try {
                            t.compressedTexImage2D.apply(t, arguments)
                        } catch (t) {
                            console.error("THREE.WebGLState:", t)
                        }
                    },
                    texImage2D: function() {
                        try {
                            t.texImage2D.apply(t, arguments)
                        } catch (t) {
                            console.error("THREE.WebGLState:", t)
                        }
                    },
                    texImage3D: function() {
                        try {
                            t.texImage3D.apply(t, arguments)
                        } catch (t) {
                            console.error("THREE.WebGLState:", t)
                        }
                    },
                    scissor: function(e) {
                        !1 === R.equals(e) && (t.scissor(e.x, e.y, e.z, e.w),
                        R.copy(e))
                    },
                    viewport: function(e) {
                        !1 === I.equals(e) && (t.viewport(e.x, e.y, e.z, e.w),
                        I.copy(e))
                    },
                    reset: function() {
                        h = {},
                        L = null,
                        D = {},
                        u = null,
                        d = null,
                        b = null,
                        w = null,
                        s.reset(),
                        l.reset(),
                        c.reset()
                    }
                }
            }
            function Xi(t, e, r, n, i, a, o) {
                var s, l, c, h = i.isWebGL2, p = i.maxTextures, g = i.maxCubemapSize, y = i.maxTextureSize, P = i.maxSamples, C = new WeakMap, L = !1;
                try {
                    L = "undefined" != typeof OffscreenCanvas && null !== new OffscreenCanvas(1,1).getContext("2d")
                } catch (t) {}
                function D(t, e) {
                    return L ? new OffscreenCanvas(t,e) : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")
                }
                function R(t, e, r, n) {
                    var i = 1;
                    if ((t.width > n || t.height > n) && (i = n / Math.max(t.width, t.height)),
                    i < 1 || !0 === e) {
                        if ("undefined" != typeof HTMLImageElement && t instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && t instanceof ImageBitmap) {
                            var a = e ? it.floorPowerOfTwo : Math.floor
                              , o = a(i * t.width)
                              , s = a(i * t.height);
                            void 0 === c && (c = D(o, s));
                            var l = r ? D(o, s) : c;
                            return l.width = o,
                            l.height = s,
                            l.getContext("2d").drawImage(t, 0, 0, o, s),
                            console.warn("THREE.WebGLRenderer: Texture has been resized from (" + t.width + "x" + t.height + ") to (" + o + "x" + s + ")."),
                            l
                        }
                        return "data"in t && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + t.width + "x" + t.height + ")."),
                        t
                    }
                    return t
                }
                function I(t) {
                    return it.isPowerOfTwo(t.width) && it.isPowerOfTwo(t.height)
                }
                function k(t, e) {
                    return t.generateMipmaps && e && t.minFilter !== d && t.minFilter !== v
                }
                function O(e, r, i, a) {
                    t.generateMipmap(e),
                    n.get(r).__maxMipLevel = Math.log(Math.max(i, a)) * Math.LOG2E
                }
                function F(r, n, i) {
                    if (!1 === h)
                        return n;
                    if (null !== r) {
                        if (void 0 !== t[r])
                            return t[r];
                        console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + r + "'")
                    }
                    var a = n;
                    return 6403 === n && (5126 === i && (a = 33326),
                    5131 === i && (a = 33325),
                    5121 === i && (a = 33321)),
                    6407 === n && (5126 === i && (a = 34837),
                    5131 === i && (a = 34843),
                    5121 === i && (a = 32849)),
                    6408 === n && (5126 === i && (a = 34836),
                    5131 === i && (a = 34842),
                    5121 === i && (a = 32856)),
                    33325 !== a && 33326 !== a && 34842 !== a && 34836 !== a || e.get("EXT_color_buffer_float"),
                    a
                }
                function N(t) {
                    return t === d || t === f || t === m ? 9728 : 9729
                }
                function B(e) {
                    var r = e.target;
                    r.removeEventListener("dispose", B),
                    function(e) {
                        var r = n.get(e);
                        void 0 !== r.__webglInit && (t.deleteTexture(r.__webglTexture),
                        n.remove(e))
                    }(r),
                    r.isVideoTexture && C.delete(r),
                    o.memory.textures--
                }
                function z(e) {
                    var r = e.target;
                    r.removeEventListener("dispose", z),
                    function(e) {
                        var r = n.get(e)
                          , i = n.get(e.texture);
                        if (e) {
                            if (void 0 !== i.__webglTexture && t.deleteTexture(i.__webglTexture),
                            e.depthTexture && e.depthTexture.dispose(),
                            e.isWebGLCubeRenderTarget)
                                for (var a = 0; a < 6; a++)
                                    t.deleteFramebuffer(r.__webglFramebuffer[a]),
                                    r.__webglDepthbuffer && t.deleteRenderbuffer(r.__webglDepthbuffer[a]);
                            else
                                t.deleteFramebuffer(r.__webglFramebuffer),
                                r.__webglDepthbuffer && t.deleteRenderbuffer(r.__webglDepthbuffer),
                                r.__webglMultisampledFramebuffer && t.deleteFramebuffer(r.__webglMultisampledFramebuffer),
                                r.__webglColorRenderbuffer && t.deleteRenderbuffer(r.__webglColorRenderbuffer),
                                r.__webglDepthRenderbuffer && t.deleteRenderbuffer(r.__webglDepthRenderbuffer);
                            n.remove(e.texture),
                            n.remove(e)
                        }
                    }(r),
                    o.memory.textures--
                }
                var G = 0;
                function H(t, e) {
                    var i = n.get(t);
                    if (t.isVideoTexture && function(t) {
                        var e = o.render.frame;
                        C.get(t) !== e && (C.set(t, e),
                        t.update())
                    }(t),
                    t.version > 0 && i.__version !== t.version) {
                        var a = t.image;
                        if (void 0 === a)
                            console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
                        else {
                            if (!1 !== a.complete)
                                return void X(i, t, e);
                            console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")
                        }
                    }
                    r.activeTexture(33984 + e),
                    r.bindTexture(3553, i.__webglTexture)
                }
                function U(e, i) {
                    var o = n.get(e);
                    e.version > 0 && o.__version !== e.version ? function(e, n, i) {
                        if (6 === n.image.length) {
                            q(e, n),
                            r.activeTexture(33984 + i),
                            r.bindTexture(34067, e.__webglTexture),
                            t.pixelStorei(37440, n.flipY);
                            for (var o = n && (n.isCompressedTexture || n.image[0].isCompressedTexture), s = n.image[0] && n.image[0].isDataTexture, l = [], c = 0; c < 6; c++)
                                l[c] = o || s ? s ? n.image[c].image : n.image[c] : R(n.image[c], !1, !0, g);
                            var u, p = l[0], d = I(p) || h, f = a.convert(n.format), m = a.convert(n.type), v = F(n.internalFormat, f, m);
                            if (W(34067, n, d),
                            o) {
                                for (var y = 0; y < 6; y++) {
                                    u = l[y].mipmaps;
                                    for (var _ = 0; _ < u.length; _++) {
                                        var x = u[_];
                                        n.format !== M && n.format !== T ? null !== f ? r.compressedTexImage2D(34069 + y, _, v, x.width, x.height, 0, x.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : r.texImage2D(34069 + y, _, v, x.width, x.height, 0, f, m, x.data)
                                    }
                                }
                                e.__maxMipLevel = u.length - 1
                            } else {
                                u = n.mipmaps;
                                for (var b = 0; b < 6; b++)
                                    if (s) {
                                        r.texImage2D(34069 + b, 0, v, l[b].width, l[b].height, 0, f, m, l[b].data);
                                        for (var w = 0; w < u.length; w++) {
                                            var S = u[w].image[b].image;
                                            r.texImage2D(34069 + b, w + 1, v, S.width, S.height, 0, f, m, S.data)
                                        }
                                    } else {
                                        r.texImage2D(34069 + b, 0, v, f, m, l[b]);
                                        for (var E = 0; E < u.length; E++) {
                                            var A = u[E];
                                            r.texImage2D(34069 + b, E + 1, v, f, m, A.image[b])
                                        }
                                    }
                                e.__maxMipLevel = u.length
                            }
                            k(n, d) && O(34067, n, p.width, p.height),
                            e.__version = n.version,
                            n.onUpdate && n.onUpdate(n)
                        }
                    }(o, e, i) : (r.activeTexture(33984 + i),
                    r.bindTexture(34067, o.__webglTexture))
                }
                var V = ((s = {})[1e3] = 10497,
                s[1001] = 33071,
                s[1002] = 33648,
                s)
                  , j = ((l = {})[1003] = 9728,
                l[1004] = 9984,
                l[1005] = 9986,
                l[1006] = 9729,
                l[1007] = 9985,
                l[1008] = 9987,
                l);
                function W(r, a, o) {
                    o ? (t.texParameteri(r, 10242, V[a.wrapS]),
                    t.texParameteri(r, 10243, V[a.wrapT]),
                    32879 !== r && 35866 !== r || t.texParameteri(r, 32882, V[a.wrapR]),
                    t.texParameteri(r, 10240, j[a.magFilter]),
                    t.texParameteri(r, 10241, j[a.minFilter])) : (t.texParameteri(r, 10242, 33071),
                    t.texParameteri(r, 10243, 33071),
                    32879 !== r && 35866 !== r || t.texParameteri(r, 32882, 33071),
                    a.wrapS === u && a.wrapT === u || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),
                    t.texParameteri(r, 10240, N(a.magFilter)),
                    t.texParameteri(r, 10241, N(a.minFilter)),
                    a.minFilter !== d && a.minFilter !== v && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));
                    var s = e.get("EXT_texture_filter_anisotropic");
                    if (s) {
                        if (a.type === b && null === e.get("OES_texture_float_linear"))
                            return;
                        if (a.type === w && null === (h || e.get("OES_texture_half_float_linear")))
                            return;
                        (a.anisotropy > 1 || n.get(a).__currentAnisotropy) && (t.texParameterf(r, s.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(a.anisotropy, i.getMaxAnisotropy())),
                        n.get(a).__currentAnisotropy = a.anisotropy)
                    }
                }
                function q(e, r) {
                    void 0 === e.__webglInit && (e.__webglInit = !0,
                    r.addEventListener("dispose", B),
                    e.__webglTexture = t.createTexture(),
                    o.memory.textures++)
                }
                function X(e, n, i) {
                    var o = 3553;
                    n.isDataTexture2DArray && (o = 35866),
                    n.isDataTexture3D && (o = 32879),
                    q(e, n),
                    r.activeTexture(33984 + i),
                    r.bindTexture(o, e.__webglTexture),
                    t.pixelStorei(37440, n.flipY),
                    t.pixelStorei(37441, n.premultiplyAlpha),
                    t.pixelStorei(3317, n.unpackAlignment);
                    var s, l = function(t) {
                        return !h && (t.wrapS !== u || t.wrapT !== u || t.minFilter !== d && t.minFilter !== v)
                    }(n) && !1 === I(n.image), c = R(n.image, l, !1, y), p = I(c) || h, f = a.convert(n.format), m = a.convert(n.type), g = F(n.internalFormat, f, m);
                    W(o, n, p);
                    var w = n.mipmaps;
                    if (n.isDepthTexture)
                        g = 6402,
                        h ? g = n.type === b ? 36012 : n.type === x ? 33190 : n.type === S ? 35056 : 33189 : n.type === b && console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),
                        n.format === E && 6402 === g && n.type !== _ && n.type !== x && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),
                        n.type = _,
                        m = a.convert(n.type)),
                        n.format === A && 6402 === g && (g = 34041,
                        n.type !== S && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
                        n.type = S,
                        m = a.convert(n.type))),
                        r.texImage2D(3553, 0, g, c.width, c.height, 0, f, m, null);
                    else if (n.isDataTexture)
                        if (w.length > 0 && p) {
                            for (var P = 0, C = w.length; P < C; P++)
                                s = w[P],
                                r.texImage2D(3553, P, g, s.width, s.height, 0, f, m, s.data);
                            n.generateMipmaps = !1,
                            e.__maxMipLevel = w.length - 1
                        } else
                            r.texImage2D(3553, 0, g, c.width, c.height, 0, f, m, c.data),
                            e.__maxMipLevel = 0;
                    else if (n.isCompressedTexture) {
                        for (var L = 0, D = w.length; L < D; L++)
                            s = w[L],
                            n.format !== M && n.format !== T ? null !== f ? r.compressedTexImage2D(3553, L, g, s.width, s.height, 0, s.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : r.texImage2D(3553, L, g, s.width, s.height, 0, f, m, s.data);
                        e.__maxMipLevel = w.length - 1
                    } else if (n.isDataTexture2DArray)
                        r.texImage3D(35866, 0, g, c.width, c.height, c.depth, 0, f, m, c.data),
                        e.__maxMipLevel = 0;
                    else if (n.isDataTexture3D)
                        r.texImage3D(32879, 0, g, c.width, c.height, c.depth, 0, f, m, c.data),
                        e.__maxMipLevel = 0;
                    else if (w.length > 0 && p) {
                        for (var N = 0, B = w.length; N < B; N++)
                            s = w[N],
                            r.texImage2D(3553, N, g, f, m, s);
                        n.generateMipmaps = !1,
                        e.__maxMipLevel = w.length - 1
                    } else
                        r.texImage2D(3553, 0, g, f, m, c),
                        e.__maxMipLevel = 0;
                    k(n, p) && O(o, n, c.width, c.height),
                    e.__version = n.version,
                    n.onUpdate && n.onUpdate(n)
                }
                function Y(e, i, o, s) {
                    var l = a.convert(i.texture.format)
                      , c = a.convert(i.texture.type)
                      , h = F(i.texture.internalFormat, l, c);
                    r.texImage2D(s, 0, h, i.width, i.height, 0, l, c, null),
                    t.bindFramebuffer(36160, e),
                    t.framebufferTexture2D(36160, o, s, n.get(i.texture).__webglTexture, 0),
                    t.bindFramebuffer(36160, null)
                }
                function $(e, r, n) {
                    if (t.bindRenderbuffer(36161, e),
                    r.depthBuffer && !r.stencilBuffer) {
                        var i = 33189;
                        if (n) {
                            var o = r.depthTexture;
                            o && o.isDepthTexture && (o.type === b ? i = 36012 : o.type === x && (i = 33190));
                            var s = K(r);
                            t.renderbufferStorageMultisample(36161, s, i, r.width, r.height)
                        } else
                            t.renderbufferStorage(36161, i, r.width, r.height);
                        t.framebufferRenderbuffer(36160, 36096, 36161, e)
                    } else if (r.depthBuffer && r.stencilBuffer) {
                        if (n) {
                            var l = K(r);
                            t.renderbufferStorageMultisample(36161, l, 35056, r.width, r.height)
                        } else
                            t.renderbufferStorage(36161, 34041, r.width, r.height);
                        t.framebufferRenderbuffer(36160, 33306, 36161, e)
                    } else {
                        var c = a.convert(r.texture.format)
                          , h = a.convert(r.texture.type)
                          , u = F(r.texture.internalFormat, c, h);
                        if (n) {
                            var p = K(r);
                            t.renderbufferStorageMultisample(36161, p, u, r.width, r.height)
                        } else
                            t.renderbufferStorage(36161, u, r.width, r.height)
                    }
                    t.bindRenderbuffer(36161, null)
                }
                function K(t) {
                    return h && t.isWebGLMultisampleRenderTarget ? Math.min(P, t.samples) : 0
                }
                var Z = !1
                  , J = !1;
                this.allocateTextureUnit = function() {
                    var t = G;
                    return t >= p && console.warn("THREE.WebGLTextures: Trying to use " + t + " texture units while this GPU supports only " + p),
                    G += 1,
                    t
                }
                ,
                this.resetTextureUnits = function() {
                    G = 0
                }
                ,
                this.setTexture2D = H,
                this.setTexture2DArray = function(t, e) {
                    var i = n.get(t);
                    t.version > 0 && i.__version !== t.version ? X(i, t, e) : (r.activeTexture(33984 + e),
                    r.bindTexture(35866, i.__webglTexture))
                }
                ,
                this.setTexture3D = function(t, e) {
                    var i = n.get(t);
                    t.version > 0 && i.__version !== t.version ? X(i, t, e) : (r.activeTexture(33984 + e),
                    r.bindTexture(32879, i.__webglTexture))
                }
                ,
                this.setTextureCube = U,
                this.setupRenderTarget = function(e) {
                    var i = n.get(e)
                      , s = n.get(e.texture);
                    e.addEventListener("dispose", z),
                    s.__webglTexture = t.createTexture(),
                    o.memory.textures++;
                    var l = !0 === e.isWebGLCubeRenderTarget
                      , c = !0 === e.isWebGLMultisampleRenderTarget
                      , u = I(e) || h;
                    if (!h || e.texture.format !== T || e.texture.type !== b && e.texture.type !== w || (e.texture.format = M,
                    console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),
                    l) {
                        i.__webglFramebuffer = [];
                        for (var p = 0; p < 6; p++)
                            i.__webglFramebuffer[p] = t.createFramebuffer()
                    } else if (i.__webglFramebuffer = t.createFramebuffer(),
                    c)
                        if (h) {
                            i.__webglMultisampledFramebuffer = t.createFramebuffer(),
                            i.__webglColorRenderbuffer = t.createRenderbuffer(),
                            t.bindRenderbuffer(36161, i.__webglColorRenderbuffer);
                            var d = a.convert(e.texture.format)
                              , f = a.convert(e.texture.type)
                              , m = F(e.texture.internalFormat, d, f)
                              , v = K(e);
                            t.renderbufferStorageMultisample(36161, v, m, e.width, e.height),
                            t.bindFramebuffer(36160, i.__webglMultisampledFramebuffer),
                            t.framebufferRenderbuffer(36160, 36064, 36161, i.__webglColorRenderbuffer),
                            t.bindRenderbuffer(36161, null),
                            e.depthBuffer && (i.__webglDepthRenderbuffer = t.createRenderbuffer(),
                            $(i.__webglDepthRenderbuffer, e, !0)),
                            t.bindFramebuffer(36160, null)
                        } else
                            console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");
                    if (l) {
                        r.bindTexture(34067, s.__webglTexture),
                        W(34067, e.texture, u);
                        for (var g = 0; g < 6; g++)
                            Y(i.__webglFramebuffer[g], e, 36064, 34069 + g);
                        k(e.texture, u) && O(34067, e.texture, e.width, e.height),
                        r.bindTexture(34067, null)
                    } else
                        r.bindTexture(3553, s.__webglTexture),
                        W(3553, e.texture, u),
                        Y(i.__webglFramebuffer, e, 36064, 3553),
                        k(e.texture, u) && O(3553, e.texture, e.width, e.height),
                        r.bindTexture(3553, null);
                    e.depthBuffer && function(e) {
                        var r = n.get(e)
                          , i = !0 === e.isWebGLCubeRenderTarget;
                        if (e.depthTexture) {
                            if (i)
                                throw new Error("target.depthTexture not supported in Cube render targets");
                            !function(e, r) {
                                if (r && r.isWebGLCubeRenderTarget)
                                    throw new Error("Depth Texture with cube render targets is not supported");
                                if (t.bindFramebuffer(36160, e),
                                !r.depthTexture || !r.depthTexture.isDepthTexture)
                                    throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
                                n.get(r.depthTexture).__webglTexture && r.depthTexture.image.width === r.width && r.depthTexture.image.height === r.height || (r.depthTexture.image.width = r.width,
                                r.depthTexture.image.height = r.height,
                                r.depthTexture.needsUpdate = !0),
                                H(r.depthTexture, 0);
                                var i = n.get(r.depthTexture).__webglTexture;
                                if (r.depthTexture.format === E)
                                    t.framebufferTexture2D(36160, 36096, 3553, i, 0);
                                else {
                                    if (r.depthTexture.format !== A)
                                        throw new Error("Unknown depthTexture format");
                                    t.framebufferTexture2D(36160, 33306, 3553, i, 0)
                                }
                            }(r.__webglFramebuffer, e)
                        } else if (i) {
                            r.__webglDepthbuffer = [];
                            for (var a = 0; a < 6; a++)
                                t.bindFramebuffer(36160, r.__webglFramebuffer[a]),
                                r.__webglDepthbuffer[a] = t.createRenderbuffer(),
                                $(r.__webglDepthbuffer[a], e, !1)
                        } else
                            t.bindFramebuffer(36160, r.__webglFramebuffer),
                            r.__webglDepthbuffer = t.createRenderbuffer(),
                            $(r.__webglDepthbuffer, e, !1);
                        t.bindFramebuffer(36160, null)
                    }(e)
                }
                ,
                this.updateRenderTargetMipmap = function(t) {
                    var e = t.texture;
                    if (k(e, I(t) || h)) {
                        var i = t.isWebGLCubeRenderTarget ? 34067 : 3553
                          , a = n.get(e).__webglTexture;
                        r.bindTexture(i, a),
                        O(i, e, t.width, t.height),
                        r.bindTexture(i, null)
                    }
                }
                ,
                this.updateMultisampleRenderTarget = function(e) {
                    if (e.isWebGLMultisampleRenderTarget)
                        if (h) {
                            var r = n.get(e);
                            t.bindFramebuffer(36008, r.__webglMultisampledFramebuffer),
                            t.bindFramebuffer(36009, r.__webglFramebuffer);
                            var i = e.width
                              , a = e.height
                              , o = 16384;
                            e.depthBuffer && (o |= 256),
                            e.stencilBuffer && (o |= 1024),
                            t.blitFramebuffer(0, 0, i, a, 0, 0, i, a, o, 9728),
                            t.bindFramebuffer(36160, r.__webglMultisampledFramebuffer)
                        } else
                            console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")
                }
                ,
                this.safeSetTexture2D = function(t, e) {
                    t && t.isWebGLRenderTarget && (!1 === Z && (console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),
                    Z = !0),
                    t = t.texture),
                    H(t, e)
                }
                ,
                this.safeSetTextureCube = function(t, e) {
                    t && t.isWebGLCubeRenderTarget && (!1 === J && (console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),
                    J = !0),
                    t = t.texture),
                    U(t, e)
                }
            }
            function Yi(t, e, r) {
                var n = r.isWebGL2;
                return {
                    convert: function(t) {
                        var r;
                        if (t === y)
                            return 5121;
                        if (1017 === t)
                            return 32819;
                        if (1018 === t)
                            return 32820;
                        if (1019 === t)
                            return 33635;
                        if (1010 === t)
                            return 5120;
                        if (1011 === t)
                            return 5122;
                        if (t === _)
                            return 5123;
                        if (1013 === t)
                            return 5124;
                        if (t === x)
                            return 5125;
                        if (t === b)
                            return 5126;
                        if (t === w)
                            return n ? 5131 : null !== (r = e.get("OES_texture_half_float")) ? r.HALF_FLOAT_OES : null;
                        if (1021 === t)
                            return 6406;
                        if (t === T)
                            return 6407;
                        if (t === M)
                            return 6408;
                        if (1024 === t)
                            return 6409;
                        if (1025 === t)
                            return 6410;
                        if (t === E)
                            return 6402;
                        if (t === A)
                            return 34041;
                        if (1028 === t)
                            return 6403;
                        if (1029 === t)
                            return 36244;
                        if (1030 === t)
                            return 33319;
                        if (1031 === t)
                            return 33320;
                        if (1032 === t)
                            return 36248;
                        if (1033 === t)
                            return 36249;
                        if (t === P || t === C || t === L || t === D) {
                            if (null === (r = e.get("WEBGL_compressed_texture_s3tc")))
                                return null;
                            if (t === P)
                                return r.COMPRESSED_RGB_S3TC_DXT1_EXT;
                            if (t === C)
                                return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                            if (t === L)
                                return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                            if (t === D)
                                return r.COMPRESSED_RGBA_S3TC_DXT5_EXT
                        }
                        if (t === R || t === I || t === k || t === O) {
                            if (null === (r = e.get("WEBGL_compressed_texture_pvrtc")))
                                return null;
                            if (t === R)
                                return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                            if (t === I)
                                return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                            if (t === k)
                                return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                            if (t === O)
                                return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                        }
                        if (36196 === t)
                            return null !== (r = e.get("WEBGL_compressed_texture_etc1")) ? r.COMPRESSED_RGB_ETC1_WEBGL : null;
                        if ((t === F || t === N) && null !== (r = e.get("WEBGL_compressed_texture_etc"))) {
                            if (t === F)
                                return r.COMPRESSED_RGB8_ETC2;
                            if (t === N)
                                return r.COMPRESSED_RGBA8_ETC2_EAC
                        }
                        return 37808 === t || 37809 === t || 37810 === t || 37811 === t || 37812 === t || 37813 === t || 37814 === t || 37815 === t || 37816 === t || 37817 === t || 37818 === t || 37819 === t || 37820 === t || 37821 === t || 37840 === t || 37841 === t || 37842 === t || 37843 === t || 37844 === t || 37845 === t || 37846 === t || 37847 === t || 37848 === t || 37849 === t || 37850 === t || 37851 === t || 37852 === t || 37853 === t ? null !== (r = e.get("WEBGL_compressed_texture_astc")) ? t : null : 36492 === t ? null !== (r = e.get("EXT_texture_compression_bptc")) ? t : null : t === S ? n ? 34042 : null !== (r = e.get("WEBGL_depth_texture")) ? r.UNSIGNED_INT_24_8_WEBGL : null : void 0
                    }
                }
            }
            function $i(t) {
                zr.call(this),
                this.cameras = t || []
            }
            function Ki() {
                ye.call(this),
                this.type = "Group"
            }
            function Zi() {
                this._targetRay = null,
                this._grip = null,
                this._hand = null
            }
            function Ji(t, e) {
                var r = this
                  , n = null
                  , i = 1
                  , a = null
                  , o = "local-floor"
                  , s = null
                  , l = []
                  , c = new Map
                  , h = new zr;
                h.layers.enable(1),
                h.viewport = new mt;
                var u = new zr;
                u.layers.enable(2),
                u.viewport = new mt;
                var p = [h, u]
                  , d = new $i;
                d.layers.enable(1),
                d.layers.enable(2);
                var f = null
                  , m = null;
                function v(t) {
                    var e = c.get(t.inputSource);
                    e && e.dispatchEvent({
                        type: t.type,
                        data: t.inputSource
                    })
                }
                function g() {
                    c.forEach((function(t, e) {
                        t.disconnect(e)
                    }
                    )),
                    c.clear(),
                    t.setFramebuffer(null),
                    t.setRenderTarget(t.getRenderTarget()),
                    T.stop(),
                    r.isPresenting = !1,
                    r.dispatchEvent({
                        type: "sessionend"
                    })
                }
                function y(t) {
                    a = t,
                    T.setContext(n),
                    T.start(),
                    r.isPresenting = !0,
                    r.dispatchEvent({
                        type: "sessionstart"
                    })
                }
                function _(t) {
                    for (var e = n.inputSources, r = 0; r < l.length; r++)
                        c.set(e[r], l[r]);
                    for (var i = 0; i < t.removed.length; i++) {
                        var a = t.removed[i]
                          , o = c.get(a);
                        o && (o.dispatchEvent({
                            type: "disconnected",
                            data: a
                        }),
                        c.delete(a))
                    }
                    for (var s = 0; s < t.added.length; s++) {
                        var h = t.added[s]
                          , u = c.get(h);
                        u && u.dispatchEvent({
                            type: "connected",
                            data: h
                        })
                    }
                }
                this.enabled = !1,
                this.isPresenting = !1,
                this.getController = function(t) {
                    var e = l[t];
                    return void 0 === e && (e = new Zi,
                    l[t] = e),
                    e.getTargetRaySpace()
                }
                ,
                this.getControllerGrip = function(t) {
                    var e = l[t];
                    return void 0 === e && (e = new Zi,
                    l[t] = e),
                    e.getGripSpace()
                }
                ,
                this.getHand = function(t) {
                    var e = l[t];
                    return void 0 === e && (e = new Zi,
                    l[t] = e),
                    e.getHandSpace()
                }
                ,
                this.setFramebufferScaleFactor = function(t) {
                    i = t,
                    !0 === r.isPresenting && console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")
                }
                ,
                this.setReferenceSpaceType = function(t) {
                    o = t,
                    !0 === r.isPresenting && console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")
                }
                ,
                this.getReferenceSpace = function() {
                    return a
                }
                ,
                this.getSession = function() {
                    return n
                }
                ,
                this.setSession = function(t) {
                    if (null !== (n = t)) {
                        n.addEventListener("select", v),
                        n.addEventListener("selectstart", v),
                        n.addEventListener("selectend", v),
                        n.addEventListener("squeeze", v),
                        n.addEventListener("squeezestart", v),
                        n.addEventListener("squeezeend", v),
                        n.addEventListener("end", g);
                        var r = e.getContextAttributes();
                        !0 !== r.xrCompatible && e.makeXRCompatible();
                        var a = {
                            antialias: r.antialias,
                            alpha: r.alpha,
                            depth: r.depth,
                            stencil: r.stencil,
                            framebufferScaleFactor: i
                        }
                          , s = new XRWebGLLayer(n,e,a);
                        n.updateRenderState({
                            baseLayer: s
                        }),
                        n.requestReferenceSpace(o).then(y),
                        n.addEventListener("inputsourceschange", _)
                    }
                }
                ;
                var x = new _t
                  , b = new _t;
                function w(t, e) {
                    null === e ? t.matrixWorld.copy(t.matrix) : t.matrixWorld.multiplyMatrices(e.matrixWorld, t.matrix),
                    t.matrixWorldInverse.getInverse(t.matrixWorld)
                }
                this.getCamera = function(t) {
                    d.near = u.near = h.near = t.near,
                    d.far = u.far = h.far = t.far,
                    f === d.near && m === d.far || (n.updateRenderState({
                        depthNear: d.near,
                        depthFar: d.far
                    }),
                    f = d.near,
                    m = d.far);
                    var e = t.parent
                      , r = d.cameras;
                    w(d, e);
                    for (var i = 0; i < r.length; i++)
                        w(r[i], e);
                    t.matrixWorld.copy(d.matrixWorld);
                    for (var a = t.children, o = 0, s = a.length; o < s; o++)
                        a[o].updateMatrixWorld(!0);
                    return 2 === r.length ? function(t, e, r) {
                        x.setFromMatrixPosition(e.matrixWorld),
                        b.setFromMatrixPosition(r.matrixWorld);
                        var n = x.distanceTo(b)
                          , i = e.projectionMatrix.elements
                          , a = r.projectionMatrix.elements
                          , o = i[14] / (i[10] - 1)
                          , s = i[14] / (i[10] + 1)
                          , l = (i[9] + 1) / i[5]
                          , c = (i[9] - 1) / i[5]
                          , h = (i[8] - 1) / i[0]
                          , u = (a[8] + 1) / a[0]
                          , p = o * h
                          , d = o * u
                          , f = n / (-h + u)
                          , m = f * -h;
                        e.matrixWorld.decompose(t.position, t.quaternion, t.scale),
                        t.translateX(m),
                        t.translateZ(f),
                        t.matrixWorld.compose(t.position, t.quaternion, t.scale),
                        t.matrixWorldInverse.getInverse(t.matrixWorld);
                        var v = o + f
                          , g = s + f
                          , y = p - m
                          , _ = d + (n - m)
                          , w = l * s / g * v
                          , S = c * s / g * v;
                        t.projectionMatrix.makePerspective(y, _, w, S, v, g)
                    }(d, h, u) : d.projectionMatrix.copy(h.projectionMatrix),
                    d
                }
                ;
                var S = null
                  , T = new Yr;
                T.setAnimationLoop((function(e, r) {
                    if (null !== (s = r.getViewerPose(a))) {
                        var i = s.views
                          , o = n.renderState.baseLayer;
                        t.setFramebuffer(o.framebuffer);
                        var c = !1;
                        i.length !== d.cameras.length && (d.cameras.length = 0,
                        c = !0);
                        for (var h = 0; h < i.length; h++) {
                            var u = i[h]
                              , f = o.getViewport(u)
                              , m = p[h];
                            m.matrix.fromArray(u.transform.matrix),
                            m.projectionMatrix.fromArray(u.projectionMatrix),
                            m.viewport.set(f.x, f.y, f.width, f.height),
                            0 === h && d.matrix.copy(m.matrix),
                            !0 === c && d.cameras.push(m)
                        }
                    }
                    for (var v = n.inputSources, g = 0; g < l.length; g++) {
                        var y = l[g]
                          , _ = v[g];
                        y.update(_, r, a)
                    }
                    S && S(e, r)
                }
                )),
                this.setAnimationLoop = function(t) {
                    S = t
                }
                ,
                this.dispose = function() {}
            }
            function Qi(t) {
                function e(e, r) {
                    e.opacity.value = r.opacity,
                    r.color && e.diffuse.value.copy(r.color),
                    r.emissive && e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),
                    r.map && (e.map.value = r.map),
                    r.alphaMap && (e.alphaMap.value = r.alphaMap),
                    r.specularMap && (e.specularMap.value = r.specularMap);
                    var n, i, a = t.get(r).envMap;
                    if (a) {
                        e.envMap.value = a,
                        e.flipEnvMap.value = a.isCubeTexture && a._needsFlipEnvMap ? -1 : 1,
                        e.reflectivity.value = r.reflectivity,
                        e.refractionRatio.value = r.refractionRatio;
                        var o = t.get(a).__maxMipLevel;
                        void 0 !== o && (e.maxMipLevel.value = o)
                    }
                    r.lightMap && (e.lightMap.value = r.lightMap,
                    e.lightMapIntensity.value = r.lightMapIntensity),
                    r.aoMap && (e.aoMap.value = r.aoMap,
                    e.aoMapIntensity.value = r.aoMapIntensity),
                    r.map ? n = r.map : r.specularMap ? n = r.specularMap : r.displacementMap ? n = r.displacementMap : r.normalMap ? n = r.normalMap : r.bumpMap ? n = r.bumpMap : r.roughnessMap ? n = r.roughnessMap : r.metalnessMap ? n = r.metalnessMap : r.alphaMap ? n = r.alphaMap : r.emissiveMap ? n = r.emissiveMap : r.clearcoatMap ? n = r.clearcoatMap : r.clearcoatNormalMap ? n = r.clearcoatNormalMap : r.clearcoatRoughnessMap && (n = r.clearcoatRoughnessMap),
                    void 0 !== n && (n.isWebGLRenderTarget && (n = n.texture),
                    !0 === n.matrixAutoUpdate && n.updateMatrix(),
                    e.uvTransform.value.copy(n.matrix)),
                    r.aoMap ? i = r.aoMap : r.lightMap && (i = r.lightMap),
                    void 0 !== i && (i.isWebGLRenderTarget && (i = i.texture),
                    !0 === i.matrixAutoUpdate && i.updateMatrix(),
                    e.uv2Transform.value.copy(i.matrix))
                }
                function r(e, r) {
                    e.roughness.value = r.roughness,
                    e.metalness.value = r.metalness,
                    r.roughnessMap && (e.roughnessMap.value = r.roughnessMap),
                    r.metalnessMap && (e.metalnessMap.value = r.metalnessMap),
                    r.emissiveMap && (e.emissiveMap.value = r.emissiveMap),
                    r.bumpMap && (e.bumpMap.value = r.bumpMap,
                    e.bumpScale.value = r.bumpScale,
                    1 === r.side && (e.bumpScale.value *= -1)),
                    r.normalMap && (e.normalMap.value = r.normalMap,
                    e.normalScale.value.copy(r.normalScale),
                    1 === r.side && e.normalScale.value.negate()),
                    r.displacementMap && (e.displacementMap.value = r.displacementMap,
                    e.displacementScale.value = r.displacementScale,
                    e.displacementBias.value = r.displacementBias),
                    t.get(r).envMap && (e.envMapIntensity.value = r.envMapIntensity)
                }
                return {
                    refreshFogUniforms: function(t, e) {
                        t.fogColor.value.copy(e.color),
                        e.isFog ? (t.fogNear.value = e.near,
                        t.fogFar.value = e.far) : e.isFogExp2 && (t.fogDensity.value = e.density)
                    },
                    refreshMaterialUniforms: function(t, n, i, a) {
                        n.isMeshBasicMaterial ? e(t, n) : n.isMeshLambertMaterial ? (e(t, n),
                        function(t, e) {
                            e.emissiveMap && (t.emissiveMap.value = e.emissiveMap)
                        }(t, n)) : n.isMeshToonMaterial ? (e(t, n),
                        function(t, e) {
                            e.gradientMap && (t.gradientMap.value = e.gradientMap),
                            e.emissiveMap && (t.emissiveMap.value = e.emissiveMap),
                            e.bumpMap && (t.bumpMap.value = e.bumpMap,
                            t.bumpScale.value = e.bumpScale,
                            1 === e.side && (t.bumpScale.value *= -1)),
                            e.normalMap && (t.normalMap.value = e.normalMap,
                            t.normalScale.value.copy(e.normalScale),
                            1 === e.side && t.normalScale.value.negate()),
                            e.displacementMap && (t.displacementMap.value = e.displacementMap,
                            t.displacementScale.value = e.displacementScale,
                            t.displacementBias.value = e.displacementBias)
                        }(t, n)) : n.isMeshPhongMaterial ? (e(t, n),
                        function(t, e) {
                            t.specular.value.copy(e.specular),
                            t.shininess.value = Math.max(e.shininess, 1e-4),
                            e.emissiveMap && (t.emissiveMap.value = e.emissiveMap),
                            e.bumpMap && (t.bumpMap.value = e.bumpMap,
                            t.bumpScale.value = e.bumpScale,
                            1 === e.side && (t.bumpScale.value *= -1)),
                            e.normalMap && (t.normalMap.value = e.normalMap,
                            t.normalScale.value.copy(e.normalScale),
                            1 === e.side && t.normalScale.value.negate()),
                            e.displacementMap && (t.displacementMap.value = e.displacementMap,
                            t.displacementScale.value = e.displacementScale,
                            t.displacementBias.value = e.displacementBias)
                        }(t, n)) : n.isMeshStandardMaterial ? (e(t, n),
                        n.isMeshPhysicalMaterial ? function(t, e) {
                            r(t, e),
                            t.reflectivity.value = e.reflectivity,
                            t.clearcoat.value = e.clearcoat,
                            t.clearcoatRoughness.value = e.clearcoatRoughness,
                            e.sheen && t.sheen.value.copy(e.sheen),
                            e.clearcoatMap && (t.clearcoatMap.value = e.clearcoatMap),
                            e.clearcoatRoughnessMap && (t.clearcoatRoughnessMap.value = e.clearcoatRoughnessMap),
                            e.clearcoatNormalMap && (t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),
                            t.clearcoatNormalMap.value = e.clearcoatNormalMap,
                            1 === e.side && t.clearcoatNormalScale.value.negate()),
                            t.transmission.value = e.transmission,
                            e.transmissionMap && (t.transmissionMap.value = e.transmissionMap)
                        }(t, n) : r(t, n)) : n.isMeshMatcapMaterial ? (e(t, n),
                        function(t, e) {
                            e.matcap && (t.matcap.value = e.matcap),
                            e.bumpMap && (t.bumpMap.value = e.bumpMap,
                            t.bumpScale.value = e.bumpScale,
                            1 === e.side && (t.bumpScale.value *= -1)),
                            e.normalMap && (t.normalMap.value = e.normalMap,
                            t.normalScale.value.copy(e.normalScale),
                            1 === e.side && t.normalScale.value.negate()),
                            e.displacementMap && (t.displacementMap.value = e.displacementMap,
                            t.displacementScale.value = e.displacementScale,
                            t.displacementBias.value = e.displacementBias)
                        }(t, n)) : n.isMeshDepthMaterial ? (e(t, n),
                        function(t, e) {
                            e.displacementMap && (t.displacementMap.value = e.displacementMap,
                            t.displacementScale.value = e.displacementScale,
                            t.displacementBias.value = e.displacementBias)
                        }(t, n)) : n.isMeshDistanceMaterial ? (e(t, n),
                        function(t, e) {
                            e.displacementMap && (t.displacementMap.value = e.displacementMap,
                            t.displacementScale.value = e.displacementScale,
                            t.displacementBias.value = e.displacementBias),
                            t.referencePosition.value.copy(e.referencePosition),
                            t.nearDistance.value = e.nearDistance,
                            t.farDistance.value = e.farDistance
                        }(t, n)) : n.isMeshNormalMaterial ? (e(t, n),
                        function(t, e) {
                            e.bumpMap && (t.bumpMap.value = e.bumpMap,
                            t.bumpScale.value = e.bumpScale,
                            1 === e.side && (t.bumpScale.value *= -1)),
                            e.normalMap && (t.normalMap.value = e.normalMap,
                            t.normalScale.value.copy(e.normalScale),
                            1 === e.side && t.normalScale.value.negate()),
                            e.displacementMap && (t.displacementMap.value = e.displacementMap,
                            t.displacementScale.value = e.displacementScale,
                            t.displacementBias.value = e.displacementBias)
                        }(t, n)) : n.isLineBasicMaterial ? (function(t, e) {
                            t.diffuse.value.copy(e.color),
                            t.opacity.value = e.opacity
                        }(t, n),
                        n.isLineDashedMaterial && function(t, e) {
                            t.dashSize.value = e.dashSize,
                            t.totalSize.value = e.dashSize + e.gapSize,
                            t.scale.value = e.scale
                        }(t, n)) : n.isPointsMaterial ? function(t, e, r, n) {
                            var i;
                            t.diffuse.value.copy(e.color),
                            t.opacity.value = e.opacity,
                            t.size.value = e.size * r,
                            t.scale.value = .5 * n,
                            e.map && (t.map.value = e.map),
                            e.alphaMap && (t.alphaMap.value = e.alphaMap),
                            e.map ? i = e.map : e.alphaMap && (i = e.alphaMap),
                            void 0 !== i && (!0 === i.matrixAutoUpdate && i.updateMatrix(),
                            t.uvTransform.value.copy(i.matrix))
                        }(t, n, i, a) : n.isSpriteMaterial ? function(t, e) {
                            var r;
                            t.diffuse.value.copy(e.color),
                            t.opacity.value = e.opacity,
                            t.rotation.value = e.rotation,
                            e.map && (t.map.value = e.map),
                            e.alphaMap && (t.alphaMap.value = e.alphaMap),
                            e.map ? r = e.map : e.alphaMap && (r = e.alphaMap),
                            void 0 !== r && (!0 === r.matrixAutoUpdate && r.updateMatrix(),
                            t.uvTransform.value.copy(r.matrix))
                        }(t, n) : n.isShadowMaterial ? (t.color.value.copy(n.color),
                        t.opacity.value = n.opacity) : n.isShaderMaterial && (n.uniformsNeedUpdate = !1)
                    }
                }
            }
            function ta(t) {
                var e = void 0 !== (t = t || {}).canvas ? t.canvas : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")
                  , r = void 0 !== t.context ? t.context : null
                  , n = void 0 !== t.alpha && t.alpha
                  , i = void 0 === t.depth || t.depth
                  , a = void 0 === t.stencil || t.stencil
                  , o = void 0 !== t.antialias && t.antialias
                  , s = void 0 === t.premultipliedAlpha || t.premultipliedAlpha
                  , l = void 0 !== t.preserveDrawingBuffer && t.preserveDrawingBuffer
                  , c = void 0 !== t.powerPreference ? t.powerPreference : "default"
                  , h = void 0 !== t.failIfMajorPerformanceCaveat && t.failIfMajorPerformanceCaveat
                  , u = null
                  , p = null;
                this.domElement = e,
                this.debug = {
                    checkShaderErrors: !0
                },
                this.autoClear = !0,
                this.autoClearColor = !0,
                this.autoClearDepth = !0,
                this.autoClearStencil = !0,
                this.sortObjects = !0,
                this.clippingPlanes = [],
                this.localClippingEnabled = !1,
                this.gammaFactor = 2,
                this.outputEncoding = q,
                this.physicallyCorrectLights = !1,
                this.toneMapping = 0,
                this.toneMappingExposure = 1,
                this.maxMorphTargets = 8,
                this.maxMorphNormals = 4;
                var d = this
                  , f = !1
                  , m = null
                  , v = 0
                  , g = 0
                  , _ = null
                  , x = null
                  , S = -1
                  , T = null
                  , E = null
                  , A = new mt
                  , P = new mt
                  , C = null
                  , L = e.width
                  , D = e.height
                  , R = 1
                  , I = null
                  , k = null
                  , O = new mt(0,0,L,D)
                  , F = new mt(0,0,L,D)
                  , N = !1
                  , B = new Xr
                  , z = !1
                  , G = !1
                  , H = new Xt
                  , U = new _t
                  , V = {
                    background: null,
                    fog: null,
                    environment: null,
                    overrideMaterial: null,
                    isScene: !0
                };
                function j() {
                    return null === _ ? R : 1
                }
                var W, X, Y, $, K, Z, J, Q, tt, et, rt, nt, at, ot, st, lt, ct, ut, pt, dt, ft, vt = r;
                function gt(t, r) {
                    for (var n = 0; n < t.length; n++) {
                        var i = t[n]
                          , a = e.getContext(i, r);
                        if (null !== a)
                            return a
                    }
                    return null
                }
                try {
                    var yt = {
                        alpha: n,
                        depth: i,
                        stencil: a,
                        antialias: o,
                        premultipliedAlpha: s,
                        preserveDrawingBuffer: l,
                        powerPreference: c,
                        failIfMajorPerformanceCaveat: h
                    };
                    if (e.addEventListener("webglcontextlost", Tt, !1),
                    e.addEventListener("webglcontextrestored", Mt, !1),
                    null === vt) {
                        var xt = ["webgl2", "webgl", "experimental-webgl"];
                        if (!0 === d.isWebGL1Renderer && xt.shift(),
                        null === (vt = gt(xt, yt)))
                            throw gt(xt) ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.")
                    }
                    void 0 === vt.getShaderPrecisionFormat && (vt.getShaderPrecisionFormat = function() {
                        return {
                            rangeMin: 1,
                            rangeMax: 1,
                            precision: 1
                        }
                    }
                    )
                } catch (t) {
                    throw console.error("THREE.WebGLRenderer: " + t.message),
                    t
                }
                function bt() {
                    W = new sn(vt),
                    !1 === (X = new nn(vt,W,t)).isWebGL2 && (W.get("WEBGL_depth_texture"),
                    W.get("OES_texture_float"),
                    W.get("OES_texture_half_float"),
                    W.get("OES_texture_half_float_linear"),
                    W.get("OES_standard_derivatives"),
                    W.get("OES_element_index_uint"),
                    W.get("OES_vertex_array_object"),
                    W.get("ANGLE_instanced_arrays")),
                    W.get("OES_texture_float_linear"),
                    dt = new Yi(vt,W,X),
                    (Y = new qi(vt,W,X)).scissor(P.copy(F).multiplyScalar(R).floor()),
                    Y.viewport(A.copy(O).multiplyScalar(R).floor()),
                    $ = new hn(vt),
                    K = new Ri,
                    Z = new Xi(vt,W,Y,K,X,dt,$),
                    J = new on(d),
                    Q = new $r(vt,X),
                    ft = new en(vt,W,Q,X),
                    tt = new ln(vt,Q,$,ft),
                    et = new fn(vt,tt,Q,$),
                    ct = new dn(vt),
                    st = new an(K),
                    rt = new Di(d,J,W,X,ft,st),
                    nt = new Qi(K),
                    at = new Fi(K),
                    ot = new Ui(W,X),
                    lt = new tn(d,J,Y,et,s),
                    ut = new rn(vt,W,$,X),
                    pt = new cn(vt,W,$,X),
                    $.programs = rt.programs,
                    d.capabilities = X,
                    d.extensions = W,
                    d.properties = K,
                    d.renderLists = at,
                    d.state = Y,
                    d.info = $
                }
                bt();
                var wt = new Ji(d,vt);
                this.xr = wt;
                var St = new Wi(d,et,X.maxTextureSize);
                function Tt(t) {
                    t.preventDefault(),
                    console.log("THREE.WebGLRenderer: Context Lost."),
                    f = !0
                }
                function Mt() {
                    console.log("THREE.WebGLRenderer: Context Restored."),
                    f = !1,
                    bt()
                }
                function Et(t) {
                    var e = t.target;
                    e.removeEventListener("dispose", Et),
                    function(t) {
                        At(t),
                        K.remove(t)
                    }(e)
                }
                function At(t) {
                    var e = K.get(t).program;
                    void 0 !== e && rt.releaseProgram(e)
                }
                this.shadowMap = St,
                this.getContext = function() {
                    return vt
                }
                ,
                this.getContextAttributes = function() {
                    return vt.getContextAttributes()
                }
                ,
                this.forceContextLoss = function() {
                    var t = W.get("WEBGL_lose_context");
                    t && t.loseContext()
                }
                ,
                this.forceContextRestore = function() {
                    var t = W.get("WEBGL_lose_context");
                    t && t.restoreContext()
                }
                ,
                this.getPixelRatio = function() {
                    return R
                }
                ,
                this.setPixelRatio = function(t) {
                    void 0 !== t && (R = t,
                    this.setSize(L, D, !1))
                }
                ,
                this.getSize = function(t) {
                    return void 0 === t && (console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),
                    t = new ht),
                    t.set(L, D)
                }
                ,
                this.setSize = function(t, r, n) {
                    wt.isPresenting ? console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (L = t,
                    D = r,
                    e.width = Math.floor(t * R),
                    e.height = Math.floor(r * R),
                    !1 !== n && (e.style.width = t + "px",
                    e.style.height = r + "px"),
                    this.setViewport(0, 0, t, r))
                }
                ,
                this.getDrawingBufferSize = function(t) {
                    return void 0 === t && (console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),
                    t = new ht),
                    t.set(L * R, D * R).floor()
                }
                ,
                this.setDrawingBufferSize = function(t, r, n) {
                    L = t,
                    D = r,
                    R = n,
                    e.width = Math.floor(t * n),
                    e.height = Math.floor(r * n),
                    this.setViewport(0, 0, t, r)
                }
                ,
                this.getCurrentViewport = function(t) {
                    return void 0 === t && (console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),
                    t = new mt),
                    t.copy(A)
                }
                ,
                this.getViewport = function(t) {
                    return t.copy(O)
                }
                ,
                this.setViewport = function(t, e, r, n) {
                    t.isVector4 ? O.set(t.x, t.y, t.z, t.w) : O.set(t, e, r, n),
                    Y.viewport(A.copy(O).multiplyScalar(R).floor())
                }
                ,
                this.getScissor = function(t) {
                    return t.copy(F)
                }
                ,
                this.setScissor = function(t, e, r, n) {
                    t.isVector4 ? F.set(t.x, t.y, t.z, t.w) : F.set(t, e, r, n),
                    Y.scissor(P.copy(F).multiplyScalar(R).floor())
                }
                ,
                this.getScissorTest = function() {
                    return N
                }
                ,
                this.setScissorTest = function(t) {
                    Y.setScissorTest(N = t)
                }
                ,
                this.setOpaqueSort = function(t) {
                    I = t
                }
                ,
                this.setTransparentSort = function(t) {
                    k = t
                }
                ,
                this.getClearColor = function() {
                    return lt.getClearColor()
                }
                ,
                this.setClearColor = function() {
                    lt.setClearColor.apply(lt, arguments)
                }
                ,
                this.getClearAlpha = function() {
                    return lt.getClearAlpha()
                }
                ,
                this.setClearAlpha = function() {
                    lt.setClearAlpha.apply(lt, arguments)
                }
                ,
                this.clear = function(t, e, r) {
                    var n = 0;
                    (void 0 === t || t) && (n |= 16384),
                    (void 0 === e || e) && (n |= 256),
                    (void 0 === r || r) && (n |= 1024),
                    vt.clear(n)
                }
                ,
                this.clearColor = function() {
                    this.clear(!0, !1, !1)
                }
                ,
                this.clearDepth = function() {
                    this.clear(!1, !0, !1)
                }
                ,
                this.clearStencil = function() {
                    this.clear(!1, !1, !0)
                }
                ,
                this.dispose = function() {
                    e.removeEventListener("webglcontextlost", Tt, !1),
                    e.removeEventListener("webglcontextrestored", Mt, !1),
                    at.dispose(),
                    ot.dispose(),
                    K.dispose(),
                    J.dispose(),
                    et.dispose(),
                    ft.dispose(),
                    wt.dispose(),
                    Ct.stop()
                }
                ,
                this.renderBufferImmediate = function(t, e) {
                    ft.initAttributes();
                    var r = K.get(t);
                    t.hasPositions && !r.position && (r.position = vt.createBuffer()),
                    t.hasNormals && !r.normal && (r.normal = vt.createBuffer()),
                    t.hasUvs && !r.uv && (r.uv = vt.createBuffer()),
                    t.hasColors && !r.color && (r.color = vt.createBuffer());
                    var n = e.getAttributes();
                    t.hasPositions && (vt.bindBuffer(34962, r.position),
                    vt.bufferData(34962, t.positionArray, 35048),
                    ft.enableAttribute(n.position),
                    vt.vertexAttribPointer(n.position, 3, 5126, !1, 0, 0)),
                    t.hasNormals && (vt.bindBuffer(34962, r.normal),
                    vt.bufferData(34962, t.normalArray, 35048),
                    ft.enableAttribute(n.normal),
                    vt.vertexAttribPointer(n.normal, 3, 5126, !1, 0, 0)),
                    t.hasUvs && (vt.bindBuffer(34962, r.uv),
                    vt.bufferData(34962, t.uvArray, 35048),
                    ft.enableAttribute(n.uv),
                    vt.vertexAttribPointer(n.uv, 2, 5126, !1, 0, 0)),
                    t.hasColors && (vt.bindBuffer(34962, r.color),
                    vt.bufferData(34962, t.colorArray, 35048),
                    ft.enableAttribute(n.color),
                    vt.vertexAttribPointer(n.color, 3, 5126, !1, 0, 0)),
                    ft.disableUnusedAttributes(),
                    vt.drawArrays(4, 0, t.count),
                    t.count = 0
                }
                ,
                this.renderBufferDirect = function(t, e, r, n, i, a) {
                    null === e && (e = V);
                    var o = i.isMesh && i.matrixWorld.determinant() < 0
                      , s = kt(t, e, n, i);
                    Y.setMaterial(n, o);
                    var l = r.index
                      , c = r.attributes.position;
                    if (null === l) {
                        if (void 0 === c || 0 === c.count)
                            return
                    } else if (0 === l.count)
                        return;
                    var h, u = 1;
                    !0 === n.wireframe && (l = tt.getWireframeAttribute(r),
                    u = 2),
                    (n.morphTargets || n.morphNormals) && ct.update(i, r, n, s),
                    ft.setup(i, n, s, r, l);
                    var p = ut;
                    null !== l && (h = Q.get(l),
                    (p = pt).setIndex(h));
                    var d = null !== l ? l.count : c.count
                      , f = r.drawRange.start * u
                      , m = r.drawRange.count * u
                      , v = null !== a ? a.start * u : 0
                      , g = null !== a ? a.count * u : 1 / 0
                      , y = Math.max(f, v)
                      , _ = Math.min(d, f + m, v + g) - 1
                      , x = Math.max(0, _ - y + 1);
                    if (0 !== x) {
                        if (i.isMesh)
                            !0 === n.wireframe ? (Y.setLineWidth(n.wireframeLinewidth * j()),
                            p.setMode(1)) : p.setMode(4);
                        else if (i.isLine) {
                            var b = n.linewidth;
                            void 0 === b && (b = 1),
                            Y.setLineWidth(b * j()),
                            i.isLineSegments ? p.setMode(1) : i.isLineLoop ? p.setMode(2) : p.setMode(3)
                        } else
                            i.isPoints ? p.setMode(0) : i.isSprite && p.setMode(4);
                        if (i.isInstancedMesh)
                            p.renderInstances(y, x, i.count);
                        else if (r.isInstancedBufferGeometry) {
                            var w = Math.min(r.instanceCount, r._maxInstanceCount);
                            p.renderInstances(y, x, w)
                        } else
                            p.render(y, x)
                    }
                }
                ,
                this.compile = function(t, e) {
                    (p = ot.get(t, e)).init(),
                    t.traverseVisible((function(t) {
                        t.isLight && t.layers.test(e.layers) && (p.pushLight(t),
                        t.castShadow && p.pushShadow(t))
                    }
                    )),
                    p.setupLights(e);
                    var r = new WeakMap;
                    t.traverse((function(e) {
                        var n = e.material;
                        if (n)
                            if (Array.isArray(n))
                                for (var i = 0; i < n.length; i++) {
                                    var a = n[i];
                                    !1 === r.has(a) && (It(a, t, e),
                                    r.set(a))
                                }
                            else
                                !1 === r.has(n) && (It(n, t, e),
                                r.set(n))
                    }
                    ))
                }
                ;
                var Pt = null
                  , Ct = new Yr;
                function Lt(t, e, r, n) {
                    if (!1 !== t.visible) {
                        if (t.layers.test(e.layers))
                            if (t.isGroup)
                                r = t.renderOrder;
                            else if (t.isLOD)
                                !0 === t.autoUpdate && t.update(e);
                            else if (t.isLight)
                                p.pushLight(t),
                                t.castShadow && p.pushShadow(t);
                            else if (t.isSprite) {
                                if (!t.frustumCulled || B.intersectsSprite(t)) {
                                    n && U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(H);
                                    var i = et.update(t)
                                      , a = t.material;
                                    a.visible && u.push(t, i, a, r, U.z, null)
                                }
                            } else if (t.isImmediateRenderObject)
                                n && U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(H),
                                u.push(t, null, t.material, r, U.z, null);
                            else if ((t.isMesh || t.isLine || t.isPoints) && (t.isSkinnedMesh && t.skeleton.frame !== $.render.frame && (t.skeleton.update(),
                            t.skeleton.frame = $.render.frame),
                            !t.frustumCulled || B.intersectsObject(t))) {
                                n && U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(H);
                                var o = et.update(t)
                                  , s = t.material;
                                if (Array.isArray(s))
                                    for (var l = o.groups, c = 0, h = l.length; c < h; c++) {
                                        var d = l[c]
                                          , f = s[d.materialIndex];
                                        f && f.visible && u.push(t, o, f, r, U.z, d)
                                    }
                                else
                                    s.visible && u.push(t, o, s, r, U.z, null)
                            }
                        for (var m = t.children, v = 0, g = m.length; v < g; v++)
                            Lt(m[v], e, r, n)
                    }
                }
                function Dt(t, e, r) {
                    for (var n = !0 === e.isScene ? e.overrideMaterial : null, i = 0, a = t.length; i < a; i++) {
                        var o = t[i]
                          , s = o.object
                          , l = o.geometry
                          , c = null === n ? o.material : n
                          , h = o.group;
                        if (r.isArrayCamera) {
                            E = r;
                            for (var u = r.cameras, d = 0, f = u.length; d < f; d++) {
                                var m = u[d];
                                s.layers.test(m.layers) && (Y.viewport(A.copy(m.viewport)),
                                p.setupLights(m),
                                Rt(s, e, m, l, c, h))
                            }
                        } else
                            E = null,
                            Rt(s, e, r, l, c, h)
                    }
                }
                function Rt(t, e, r, n, i, a) {
                    if (t.onBeforeRender(d, e, r, n, i, a),
                    p = ot.get(e, E || r),
                    t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse, t.matrixWorld),
                    t.normalMatrix.getNormalMatrix(t.modelViewMatrix),
                    t.isImmediateRenderObject) {
                        var o = kt(r, e, i, t);
                        Y.setMaterial(i),
                        ft.reset(),
                        function(t, e) {
                            t.render((function(t) {
                                d.renderBufferImmediate(t, e)
                            }
                            ))
                        }(t, o)
                    } else
                        d.renderBufferDirect(r, e, n, i, t, a);
                    t.onAfterRender(d, e, r, n, i, a),
                    p = ot.get(e, E || r)
                }
                function It(t, e, r) {
                    !0 !== e.isScene && (e = V);
                    var n = K.get(t)
                      , i = p.state.lights
                      , a = p.state.shadowsArray
                      , o = i.state.version
                      , s = rt.getParameters(t, i.state, a, e, r)
                      , l = rt.getProgramCacheKey(s)
                      , c = n.program
                      , h = !0;
                    if (void 0 === c)
                        t.addEventListener("dispose", Et);
                    else if (c.cacheKey !== l)
                        At(t);
                    else if (n.lightsStateVersion !== o)
                        h = !1;
                    else {
                        if (void 0 !== s.shaderID) {
                            var u = t.isMeshStandardMaterial ? e.environment : null;
                            return void (n.envMap = J.get(t.envMap || u))
                        }
                        h = !1
                    }
                    h && (s.uniforms = rt.getUniforms(t),
                    t.onBeforeCompile(s, d),
                    c = rt.acquireProgram(s, l),
                    n.program = c,
                    n.uniforms = s.uniforms,
                    n.outputEncoding = s.outputEncoding);
                    var f = n.uniforms;
                    (t.isShaderMaterial || t.isRawShaderMaterial) && !0 !== t.clipping || (n.numClippingPlanes = st.numPlanes,
                    n.numIntersection = st.numIntersection,
                    f.clippingPlanes = st.uniform),
                    n.environment = t.isMeshStandardMaterial ? e.environment : null,
                    n.fog = e.fog,
                    n.envMap = J.get(t.envMap || n.environment),
                    n.needsLights = function(t) {
                        return t.isMeshLambertMaterial || t.isMeshToonMaterial || t.isMeshPhongMaterial || t.isMeshStandardMaterial || t.isShadowMaterial || t.isShaderMaterial && !0 === t.lights
                    }(t),
                    n.lightsStateVersion = o,
                    n.needsLights && (f.ambientLightColor.value = i.state.ambient,
                    f.lightProbe.value = i.state.probe,
                    f.directionalLights.value = i.state.directional,
                    f.directionalLightShadows.value = i.state.directionalShadow,
                    f.spotLights.value = i.state.spot,
                    f.spotLightShadows.value = i.state.spotShadow,
                    f.rectAreaLights.value = i.state.rectArea,
                    f.ltc_1.value = i.state.rectAreaLTC1,
                    f.ltc_2.value = i.state.rectAreaLTC2,
                    f.pointLights.value = i.state.point,
                    f.pointLightShadows.value = i.state.pointShadow,
                    f.hemisphereLights.value = i.state.hemi,
                    f.directionalShadowMap.value = i.state.directionalShadowMap,
                    f.directionalShadowMatrix.value = i.state.directionalShadowMatrix,
                    f.spotShadowMap.value = i.state.spotShadowMap,
                    f.spotShadowMatrix.value = i.state.spotShadowMatrix,
                    f.pointShadowMap.value = i.state.pointShadowMap,
                    f.pointShadowMatrix.value = i.state.pointShadowMatrix);
                    var m = n.program.getUniforms()
                      , v = ui.seqWithValue(m.seq, f);
                    n.uniformsList = v
                }
                function kt(t, e, r, n) {
                    !0 !== e.isScene && (e = V),
                    Z.resetTextureUnits();
                    var i = e.fog
                      , a = r.isMeshStandardMaterial ? e.environment : null
                      , o = null === _ ? d.outputEncoding : _.texture.encoding
                      , s = J.get(r.envMap || a)
                      , l = K.get(r)
                      , c = p.state.lights;
                    if (!0 === z && (!0 === G || t !== T)) {
                        var h = t === T && r.id === S;
                        st.setState(r, t, h)
                    }
                    r.version === l.__version ? r.fog && l.fog !== i || l.environment !== a || l.needsLights && l.lightsStateVersion !== c.state.version ? It(r, e, n) : void 0 === l.numClippingPlanes || l.numClippingPlanes === st.numPlanes && l.numIntersection === st.numIntersection ? (l.outputEncoding !== o || l.envMap !== s) && It(r, e, n) : It(r, e, n) : (It(r, e, n),
                    l.__version = r.version);
                    var u, f, m = !1, v = !1, g = !1, y = l.program, x = y.getUniforms(), w = l.uniforms;
                    if (Y.useProgram(y.program) && (m = !0,
                    v = !0,
                    g = !0),
                    r.id !== S && (S = r.id,
                    v = !0),
                    m || T !== t) {
                        if (x.setValue(vt, "projectionMatrix", t.projectionMatrix),
                        X.logarithmicDepthBuffer && x.setValue(vt, "logDepthBufFC", 2 / (Math.log(t.far + 1) / Math.LN2)),
                        T !== t && (T = t,
                        v = !0,
                        g = !0),
                        r.isShaderMaterial || r.isMeshPhongMaterial || r.isMeshToonMaterial || r.isMeshStandardMaterial || r.envMap) {
                            var E = x.map.cameraPosition;
                            void 0 !== E && E.setValue(vt, U.setFromMatrixPosition(t.matrixWorld))
                        }
                        (r.isMeshPhongMaterial || r.isMeshToonMaterial || r.isMeshLambertMaterial || r.isMeshBasicMaterial || r.isMeshStandardMaterial || r.isShaderMaterial) && x.setValue(vt, "isOrthographic", !0 === t.isOrthographicCamera),
                        (r.isMeshPhongMaterial || r.isMeshToonMaterial || r.isMeshLambertMaterial || r.isMeshBasicMaterial || r.isMeshStandardMaterial || r.isShaderMaterial || r.isShadowMaterial || r.skinning) && x.setValue(vt, "viewMatrix", t.matrixWorldInverse)
                    }
                    if (r.skinning) {
                        x.setOptional(vt, n, "bindMatrix"),
                        x.setOptional(vt, n, "bindMatrixInverse");
                        var A = n.skeleton;
                        if (A) {
                            var P = A.bones;
                            if (X.floatVertexTextures) {
                                if (void 0 === A.boneTexture) {
                                    var C = Math.sqrt(4 * P.length);
                                    C = it.ceilPowerOfTwo(C),
                                    C = Math.max(C, 4);
                                    var L = new Float32Array(C * C * 4);
                                    L.set(A.boneMatrices);
                                    var I = new jr(L,C,C,M,b);
                                    A.boneMatrices = L,
                                    A.boneTexture = I,
                                    A.boneTextureSize = C
                                }
                                x.setValue(vt, "boneTexture", A.boneTexture, Z),
                                x.setValue(vt, "boneTextureSize", A.boneTextureSize)
                            } else
                                x.setOptional(vt, A, "boneMatrices")
                        }
                    }
                    return (v || l.receiveShadow !== n.receiveShadow) && (l.receiveShadow = n.receiveShadow,
                    x.setValue(vt, "receiveShadow", n.receiveShadow)),
                    v && (x.setValue(vt, "toneMappingExposure", d.toneMappingExposure),
                    l.needsLights && (f = g,
                    (u = w).ambientLightColor.needsUpdate = f,
                    u.lightProbe.needsUpdate = f,
                    u.directionalLights.needsUpdate = f,
                    u.directionalLightShadows.needsUpdate = f,
                    u.pointLights.needsUpdate = f,
                    u.pointLightShadows.needsUpdate = f,
                    u.spotLights.needsUpdate = f,
                    u.spotLightShadows.needsUpdate = f,
                    u.rectAreaLights.needsUpdate = f,
                    u.hemisphereLights.needsUpdate = f),
                    i && r.fog && nt.refreshFogUniforms(w, i),
                    nt.refreshMaterialUniforms(w, r, R, D),
                    ui.upload(vt, l.uniformsList, w, Z)),
                    r.isShaderMaterial && !0 === r.uniformsNeedUpdate && (ui.upload(vt, l.uniformsList, w, Z),
                    r.uniformsNeedUpdate = !1),
                    r.isSpriteMaterial && x.setValue(vt, "center", n.center),
                    x.setValue(vt, "modelViewMatrix", n.modelViewMatrix),
                    x.setValue(vt, "normalMatrix", n.normalMatrix),
                    x.setValue(vt, "modelMatrix", n.matrixWorld),
                    y
                }
                Ct.setAnimationLoop((function(t) {
                    wt.isPresenting || Pt && Pt(t)
                }
                )),
                "undefined" != typeof window && Ct.setContext(window),
                this.setAnimationLoop = function(t) {
                    Pt = t,
                    wt.setAnimationLoop(t),
                    null === t ? Ct.stop() : Ct.start()
                }
                ,
                this.render = function(t, e) {
                    var r, n;
                    if (void 0 !== arguments[2] && (console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),
                    r = arguments[2]),
                    void 0 !== arguments[3] && (console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),
                    n = arguments[3]),
                    void 0 === e || !0 === e.isCamera) {
                        if (!0 !== f) {
                            ft.resetDefaultState(),
                            S = -1,
                            T = null,
                            !0 === t.autoUpdate && t.updateMatrixWorld(),
                            null === e.parent && e.updateMatrixWorld(),
                            !0 === wt.enabled && !0 === wt.isPresenting && (e = wt.getCamera(e)),
                            !0 === t.isScene && t.onBeforeRender(d, t, e, r || _),
                            (p = ot.get(t, e)).init(),
                            H.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
                            B.setFromProjectionMatrix(H),
                            G = this.localClippingEnabled,
                            z = st.init(this.clippingPlanes, G, e),
                            (u = at.get(t, e)).init(),
                            Lt(t, e, 0, d.sortObjects),
                            u.finish(),
                            !0 === d.sortObjects && u.sort(I, k),
                            !0 === z && st.beginShadows();
                            var i = p.state.shadowsArray;
                            St.render(i, t, e),
                            p.setupLights(e),
                            !0 === z && st.endShadows(),
                            !0 === this.info.autoReset && this.info.reset(),
                            void 0 !== r && this.setRenderTarget(r),
                            lt.render(u, t, e, n);
                            var a = u.opaque
                              , o = u.transparent;
                            a.length > 0 && Dt(a, t, e),
                            o.length > 0 && Dt(o, t, e),
                            !0 === t.isScene && t.onAfterRender(d, t, e),
                            null !== _ && (Z.updateRenderTargetMipmap(_),
                            Z.updateMultisampleRenderTarget(_)),
                            Y.buffers.depth.setTest(!0),
                            Y.buffers.depth.setMask(!0),
                            Y.buffers.color.setMask(!0),
                            Y.setPolygonOffset(!1),
                            u = null,
                            p = null
                        }
                    } else
                        console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")
                }
                ,
                this.setFramebuffer = function(t) {
                    m !== t && null === _ && vt.bindFramebuffer(36160, t),
                    m = t
                }
                ,
                this.getActiveCubeFace = function() {
                    return v
                }
                ,
                this.getActiveMipmapLevel = function() {
                    return g
                }
                ,
                this.getRenderList = function() {
                    return u
                }
                ,
                this.setRenderList = function(t) {
                    u = t
                }
                ,
                this.getRenderState = function() {
                    return p
                }
                ,
                this.setRenderState = function(t) {
                    p = t
                }
                ,
                this.getRenderTarget = function() {
                    return _
                }
                ,
                this.setRenderTarget = function(t, e, r) {
                    void 0 === e && (e = 0),
                    void 0 === r && (r = 0),
                    _ = t,
                    v = e,
                    g = r,
                    t && void 0 === K.get(t).__webglFramebuffer && Z.setupRenderTarget(t);
                    var n = m
                      , i = !1;
                    if (t) {
                        var a = K.get(t).__webglFramebuffer;
                        t.isWebGLCubeRenderTarget ? (n = a[e],
                        i = !0) : n = t.isWebGLMultisampleRenderTarget ? K.get(t).__webglMultisampledFramebuffer : a,
                        A.copy(t.viewport),
                        P.copy(t.scissor),
                        C = t.scissorTest
                    } else
                        A.copy(O).multiplyScalar(R).floor(),
                        P.copy(F).multiplyScalar(R).floor(),
                        C = N;
                    if (x !== n && (vt.bindFramebuffer(36160, n),
                    x = n),
                    Y.viewport(A),
                    Y.scissor(P),
                    Y.setScissorTest(C),
                    i) {
                        var o = K.get(t.texture);
                        vt.framebufferTexture2D(36160, 36064, 34069 + e, o.__webglTexture, r)
                    }
                }
                ,
                this.readRenderTargetPixels = function(t, e, r, n, i, a, o) {
                    if (t && t.isWebGLRenderTarget) {
                        var s = K.get(t).__webglFramebuffer;
                        if (t.isWebGLCubeRenderTarget && void 0 !== o && (s = s[o]),
                        s) {
                            var l = !1;
                            s !== x && (vt.bindFramebuffer(36160, s),
                            l = !0);
                            try {
                                var c = t.texture
                                  , h = c.format
                                  , u = c.type;
                                if (h !== M && dt.convert(h) !== vt.getParameter(35739))
                                    return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
                                if (!(u === y || dt.convert(u) === vt.getParameter(35738) || u === b && (X.isWebGL2 || W.get("OES_texture_float") || W.get("WEBGL_color_buffer_float")) || u === w && (X.isWebGL2 ? W.get("EXT_color_buffer_float") : W.get("EXT_color_buffer_half_float"))))
                                    return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                                36053 === vt.checkFramebufferStatus(36160) ? e >= 0 && e <= t.width - n && r >= 0 && r <= t.height - i && vt.readPixels(e, r, n, i, dt.convert(h), dt.convert(u), a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")
                            } finally {
                                l && vt.bindFramebuffer(36160, x)
                            }
                        }
                    } else
                        console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")
                }
                ,
                this.copyFramebufferToTexture = function(t, e, r) {
                    void 0 === r && (r = 0);
                    var n = Math.pow(2, -r)
                      , i = Math.floor(e.image.width * n)
                      , a = Math.floor(e.image.height * n)
                      , o = dt.convert(e.format);
                    Z.setTexture2D(e, 0),
                    vt.copyTexImage2D(3553, r, o, t.x, t.y, i, a, 0),
                    Y.unbindTexture()
                }
                ,
                this.copyTextureToTexture = function(t, e, r, n) {
                    void 0 === n && (n = 0);
                    var i = e.image.width
                      , a = e.image.height
                      , o = dt.convert(r.format)
                      , s = dt.convert(r.type);
                    Z.setTexture2D(r, 0),
                    vt.pixelStorei(37440, r.flipY),
                    vt.pixelStorei(37441, r.premultiplyAlpha),
                    vt.pixelStorei(3317, r.unpackAlignment),
                    e.isDataTexture ? vt.texSubImage2D(3553, n, t.x, t.y, i, a, o, s, e.image.data) : e.isCompressedTexture ? vt.compressedTexSubImage2D(3553, n, t.x, t.y, e.mipmaps[0].width, e.mipmaps[0].height, o, e.mipmaps[0].data) : vt.texSubImage2D(3553, n, t.x, t.y, o, s, e.image),
                    0 === n && r.generateMipmaps && vt.generateMipmap(3553),
                    Y.unbindTexture()
                }
                ,
                this.initTexture = function(t) {
                    Z.setTexture2D(t, 0),
                    Y.unbindTexture()
                }
                ,
                "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{
                    detail: this
                }))
            }
            function ea(t) {
                ta.call(this, t)
            }
            Vi.prototype = Object.create(Ve.prototype),
            Vi.prototype.constructor = Vi,
            Vi.prototype.isMeshDepthMaterial = !0,
            Vi.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.depthPacking = t.depthPacking,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.map = t.map,
                this.alphaMap = t.alphaMap,
                this.displacementMap = t.displacementMap,
                this.displacementScale = t.displacementScale,
                this.displacementBias = t.displacementBias,
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this
            }
            ,
            ji.prototype = Object.create(Ve.prototype),
            ji.prototype.constructor = ji,
            ji.prototype.isMeshDistanceMaterial = !0,
            ji.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.referencePosition.copy(t.referencePosition),
                this.nearDistance = t.nearDistance,
                this.farDistance = t.farDistance,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.map = t.map,
                this.alphaMap = t.alphaMap,
                this.displacementMap = t.displacementMap,
                this.displacementScale = t.displacementScale,
                this.displacementBias = t.displacementBias,
                this
            }
            ,
            $i.prototype = Object.assign(Object.create(zr.prototype), {
                constructor: $i,
                isArrayCamera: !0
            }),
            Ki.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: Ki,
                isGroup: !0
            }),
            Object.assign(Zi.prototype, {
                constructor: Zi,
                getHandSpace: function() {
                    if (null === this._hand && (this._hand = new Ki,
                    this._hand.matrixAutoUpdate = !1,
                    this._hand.visible = !1,
                    this._hand.joints = [],
                    this._hand.inputState = {
                        pinching: !1
                    },
                    window.XRHand))
                        for (var t = 0; t <= window.XRHand.LITTLE_PHALANX_TIP; t++) {
                            var e = new Ki;
                            e.matrixAutoUpdate = !1,
                            e.visible = !1,
                            this._hand.joints.push(e),
                            this._hand.add(e)
                        }
                    return this._hand
                },
                getTargetRaySpace: function() {
                    return null === this._targetRay && (this._targetRay = new Ki,
                    this._targetRay.matrixAutoUpdate = !1,
                    this._targetRay.visible = !1),
                    this._targetRay
                },
                getGripSpace: function() {
                    return null === this._grip && (this._grip = new Ki,
                    this._grip.matrixAutoUpdate = !1,
                    this._grip.visible = !1),
                    this._grip
                },
                dispatchEvent: function(t) {
                    return null !== this._targetRay && this._targetRay.dispatchEvent(t),
                    null !== this._grip && this._grip.dispatchEvent(t),
                    null !== this._hand && this._hand.dispatchEvent(t),
                    this
                },
                disconnect: function(t) {
                    return this.dispatchEvent({
                        type: "disconnected",
                        data: t
                    }),
                    null !== this._targetRay && (this._targetRay.visible = !1),
                    null !== this._grip && (this._grip.visible = !1),
                    null !== this._hand && (this._hand.visible = !1),
                    this
                },
                update: function(t, e, r) {
                    var n = null
                      , i = null
                      , a = null
                      , o = this._targetRay
                      , s = this._grip
                      , l = this._hand;
                    if (t)
                        if (l && t.hand) {
                            a = !0;
                            for (var c = 0; c <= window.XRHand.LITTLE_PHALANX_TIP; c++)
                                if (t.hand[c]) {
                                    var h = e.getJointPose(t.hand[c], r)
                                      , u = l.joints[c];
                                    null !== h && (u.matrix.fromArray(h.transform.matrix),
                                    u.matrix.decompose(u.position, u.rotation, u.scale),
                                    u.jointRadius = h.radius),
                                    u.visible = null !== h;
                                    var p = l.joints[window.XRHand.INDEX_PHALANX_TIP]
                                      , d = l.joints[window.XRHand.THUMB_PHALANX_TIP]
                                      , f = p.position.distanceTo(d.position);
                                    l.inputState.pinching && f > .025 ? (l.inputState.pinching = !1,
                                    this.dispatchEvent({
                                        type: "pinchend",
                                        handedness: t.handedness,
                                        target: this
                                    })) : !l.inputState.pinching && f <= .015 && (l.inputState.pinching = !0,
                                    this.dispatchEvent({
                                        type: "pinchstart",
                                        handedness: t.handedness,
                                        target: this
                                    }))
                                }
                        } else
                            null !== o && null !== (n = e.getPose(t.targetRaySpace, r)) && (o.matrix.fromArray(n.transform.matrix),
                            o.matrix.decompose(o.position, o.rotation, o.scale)),
                            null !== s && t.gripSpace && null !== (i = e.getPose(t.gripSpace, r)) && (s.matrix.fromArray(i.transform.matrix),
                            s.matrix.decompose(s.position, s.rotation, s.scale));
                    return null !== o && (o.visible = null !== n),
                    null !== s && (s.visible = null !== i),
                    null !== l && (l.visible = null !== a),
                    this
                }
            }),
            Object.assign(Ji.prototype, tt.prototype),
            ea.prototype = Object.assign(Object.create(ta.prototype), {
                constructor: ea,
                isWebGL1Renderer: !0
            });
            var ra = function() {
                function t(t, e) {
                    Object.defineProperty(this, "isFogExp2", {
                        value: !0
                    }),
                    this.name = "",
                    this.color = new Ge(t),
                    this.density = void 0 !== e ? e : 25e-5
                }
                var e = t.prototype;
                return e.clone = function() {
                    return new t(this.color,this.density)
                }
                ,
                e.toJSON = function() {
                    return {
                        type: "FogExp2",
                        color: this.color.getHex(),
                        density: this.density
                    }
                }
                ,
                t
            }()
              , na = function() {
                function t(t, e, r) {
                    Object.defineProperty(this, "isFog", {
                        value: !0
                    }),
                    this.name = "",
                    this.color = new Ge(t),
                    this.near = void 0 !== e ? e : 1,
                    this.far = void 0 !== r ? r : 1e3
                }
                var e = t.prototype;
                return e.clone = function() {
                    return new t(this.color,this.near,this.far)
                }
                ,
                e.toJSON = function() {
                    return {
                        type: "Fog",
                        color: this.color.getHex(),
                        near: this.near,
                        far: this.far
                    }
                }
                ,
                t
            }()
              , ia = function(t) {
                function e() {
                    var e;
                    return e = t.call(this) || this,
                    Object.defineProperty(lt(e), "isScene", {
                        value: !0
                    }),
                    e.type = "Scene",
                    e.background = null,
                    e.environment = null,
                    e.fog = null,
                    e.overrideMaterial = null,
                    e.autoUpdate = !0,
                    "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{
                        detail: lt(e)
                    })),
                    e
                }
                st(e, t);
                var r = e.prototype;
                return r.copy = function(e, r) {
                    return t.prototype.copy.call(this, e, r),
                    null !== e.background && (this.background = e.background.clone()),
                    null !== e.environment && (this.environment = e.environment.clone()),
                    null !== e.fog && (this.fog = e.fog.clone()),
                    null !== e.overrideMaterial && (this.overrideMaterial = e.overrideMaterial.clone()),
                    this.autoUpdate = e.autoUpdate,
                    this.matrixAutoUpdate = e.matrixAutoUpdate,
                    this
                }
                ,
                r.toJSON = function(e) {
                    var r = t.prototype.toJSON.call(this, e);
                    return null !== this.background && (r.object.background = this.background.toJSON(e)),
                    null !== this.environment && (r.object.environment = this.environment.toJSON(e)),
                    null !== this.fog && (r.object.fog = this.fog.toJSON()),
                    r
                }
                ,
                e
            }(ye);
            function aa(t, e) {
                this.array = t,
                this.stride = e,
                this.count = void 0 !== t ? t.length / e : 0,
                this.usage = Z,
                this.updateRange = {
                    offset: 0,
                    count: -1
                },
                this.version = 0,
                this.uuid = it.generateUUID()
            }
            Object.defineProperty(aa.prototype, "needsUpdate", {
                set: function(t) {
                    !0 === t && this.version++
                }
            }),
            Object.assign(aa.prototype, {
                isInterleavedBuffer: !0,
                onUploadCallback: function() {},
                setUsage: function(t) {
                    return this.usage = t,
                    this
                },
                copy: function(t) {
                    return this.array = new t.array.constructor(t.array),
                    this.count = t.count,
                    this.stride = t.stride,
                    this.usage = t.usage,
                    this
                },
                copyAt: function(t, e, r) {
                    t *= this.stride,
                    r *= e.stride;
                    for (var n = 0, i = this.stride; n < i; n++)
                        this.array[t + n] = e.array[r + n];
                    return this
                },
                set: function(t, e) {
                    return void 0 === e && (e = 0),
                    this.array.set(t, e),
                    this
                },
                clone: function(t) {
                    void 0 === t.arrayBuffers && (t.arrayBuffers = {}),
                    void 0 === this.array.buffer._uuid && (this.array.buffer._uuid = it.generateUUID()),
                    void 0 === t.arrayBuffers[this.array.buffer._uuid] && (t.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer);
                    var e = new aa(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);
                    return e.setUsage(this.usage),
                    e
                },
                onUpload: function(t) {
                    return this.onUploadCallback = t,
                    this
                },
                toJSON: function(t) {
                    return void 0 === t.arrayBuffers && (t.arrayBuffers = {}),
                    void 0 === this.array.buffer._uuid && (this.array.buffer._uuid = it.generateUUID()),
                    void 0 === t.arrayBuffers[this.array.buffer._uuid] && (t.arrayBuffers[this.array.buffer._uuid] = Array.prototype.slice.call(new Uint32Array(this.array.buffer))),
                    {
                        uuid: this.uuid,
                        buffer: this.array.buffer._uuid,
                        type: this.array.constructor.name,
                        stride: this.stride
                    }
                }
            });
            var oa, sa = new _t;
            function la(t, e, r, n) {
                this.name = "",
                this.data = t,
                this.itemSize = e,
                this.offset = r,
                this.normalized = !0 === n
            }
            function ca(t) {
                Ve.call(this),
                this.type = "SpriteMaterial",
                this.color = new Ge(16777215),
                this.map = null,
                this.alphaMap = null,
                this.rotation = 0,
                this.sizeAttenuation = !0,
                this.transparent = !0,
                this.setValues(t)
            }
            Object.defineProperties(la.prototype, {
                count: {
                    get: function() {
                        return this.data.count
                    }
                },
                array: {
                    get: function() {
                        return this.data.array
                    }
                },
                needsUpdate: {
                    set: function(t) {
                        this.data.needsUpdate = t
                    }
                }
            }),
            Object.assign(la.prototype, {
                isInterleavedBufferAttribute: !0,
                applyMatrix4: function(t) {
                    for (var e = 0, r = this.data.count; e < r; e++)
                        sa.x = this.getX(e),
                        sa.y = this.getY(e),
                        sa.z = this.getZ(e),
                        sa.applyMatrix4(t),
                        this.setXYZ(e, sa.x, sa.y, sa.z);
                    return this
                },
                setX: function(t, e) {
                    return this.data.array[t * this.data.stride + this.offset] = e,
                    this
                },
                setY: function(t, e) {
                    return this.data.array[t * this.data.stride + this.offset + 1] = e,
                    this
                },
                setZ: function(t, e) {
                    return this.data.array[t * this.data.stride + this.offset + 2] = e,
                    this
                },
                setW: function(t, e) {
                    return this.data.array[t * this.data.stride + this.offset + 3] = e,
                    this
                },
                getX: function(t) {
                    return this.data.array[t * this.data.stride + this.offset]
                },
                getY: function(t) {
                    return this.data.array[t * this.data.stride + this.offset + 1]
                },
                getZ: function(t) {
                    return this.data.array[t * this.data.stride + this.offset + 2]
                },
                getW: function(t) {
                    return this.data.array[t * this.data.stride + this.offset + 3]
                },
                setXY: function(t, e, r) {
                    return t = t * this.data.stride + this.offset,
                    this.data.array[t + 0] = e,
                    this.data.array[t + 1] = r,
                    this
                },
                setXYZ: function(t, e, r, n) {
                    return t = t * this.data.stride + this.offset,
                    this.data.array[t + 0] = e,
                    this.data.array[t + 1] = r,
                    this.data.array[t + 2] = n,
                    this
                },
                setXYZW: function(t, e, r, n, i) {
                    return t = t * this.data.stride + this.offset,
                    this.data.array[t + 0] = e,
                    this.data.array[t + 1] = r,
                    this.data.array[t + 2] = n,
                    this.data.array[t + 3] = i,
                    this
                },
                clone: function(t) {
                    if (void 0 === t) {
                        console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");
                        for (var e = [], r = 0; r < this.count; r++)
                            for (var n = r * this.data.stride + this.offset, i = 0; i < this.itemSize; i++)
                                e.push(this.data.array[n + i]);
                        return new Xe(new this.array.constructor(e),this.itemSize,this.normalized)
                    }
                    return void 0 === t.interleavedBuffers && (t.interleavedBuffers = {}),
                    void 0 === t.interleavedBuffers[this.data.uuid] && (t.interleavedBuffers[this.data.uuid] = this.data.clone(t)),
                    new la(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)
                },
                toJSON: function(t) {
                    if (void 0 === t) {
                        console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");
                        for (var e = [], r = 0; r < this.count; r++)
                            for (var n = r * this.data.stride + this.offset, i = 0; i < this.itemSize; i++)
                                e.push(this.data.array[n + i]);
                        return {
                            itemSize: this.itemSize,
                            type: this.array.constructor.name,
                            array: e,
                            normalized: this.normalized
                        }
                    }
                    return void 0 === t.interleavedBuffers && (t.interleavedBuffers = {}),
                    void 0 === t.interleavedBuffers[this.data.uuid] && (t.interleavedBuffers[this.data.uuid] = this.data.toJSON(t)),
                    {
                        isInterleavedBufferAttribute: !0,
                        itemSize: this.itemSize,
                        data: this.data.uuid,
                        offset: this.offset,
                        normalized: this.normalized
                    }
                }
            }),
            ca.prototype = Object.create(Ve.prototype),
            ca.prototype.constructor = ca,
            ca.prototype.isSpriteMaterial = !0,
            ca.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this.map = t.map,
                this.alphaMap = t.alphaMap,
                this.rotation = t.rotation,
                this.sizeAttenuation = t.sizeAttenuation,
                this
            }
            ;
            var ha = new _t
              , ua = new _t
              , pa = new _t
              , da = new ht
              , fa = new ht
              , ma = new Xt
              , va = new _t
              , ga = new _t
              , ya = new _t
              , _a = new ht
              , xa = new ht
              , ba = new ht;
            function wa(t) {
                if (ye.call(this),
                this.type = "Sprite",
                void 0 === oa) {
                    oa = new pr;
                    var e = new aa(new Float32Array([-.5, -.5, 0, 0, 0, .5, -.5, 0, 1, 0, .5, .5, 0, 1, 1, -.5, .5, 0, 0, 1]),5);
                    oa.setIndex([0, 1, 2, 0, 2, 3]),
                    oa.setAttribute("position", new la(e,3,0,!1)),
                    oa.setAttribute("uv", new la(e,2,3,!1))
                }
                this.geometry = oa,
                this.material = void 0 !== t ? t : new ca,
                this.center = new ht(.5,.5)
            }
            function Sa(t, e, r, n, i, a) {
                da.subVectors(t, r).addScalar(.5).multiply(n),
                void 0 !== i ? (fa.x = a * da.x - i * da.y,
                fa.y = i * da.x + a * da.y) : fa.copy(da),
                t.copy(e),
                t.x += fa.x,
                t.y += fa.y,
                t.applyMatrix4(ma)
            }
            wa.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: wa,
                isSprite: !0,
                raycast: function(t, e) {
                    null === t.camera && console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),
                    ua.setFromMatrixScale(this.matrixWorld),
                    ma.copy(t.camera.matrixWorld),
                    this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse, this.matrixWorld),
                    pa.setFromMatrixPosition(this.modelViewMatrix),
                    t.camera.isPerspectiveCamera && !1 === this.material.sizeAttenuation && ua.multiplyScalar(-pa.z);
                    var r, n, i = this.material.rotation;
                    0 !== i && (n = Math.cos(i),
                    r = Math.sin(i));
                    var a = this.center;
                    Sa(va.set(-.5, -.5, 0), pa, a, ua, r, n),
                    Sa(ga.set(.5, -.5, 0), pa, a, ua, r, n),
                    Sa(ya.set(.5, .5, 0), pa, a, ua, r, n),
                    _a.set(0, 0),
                    xa.set(1, 0),
                    ba.set(1, 1);
                    var o = t.ray.intersectTriangle(va, ga, ya, !1, ha);
                    if (null !== o || (Sa(ga.set(-.5, .5, 0), pa, a, ua, r, n),
                    xa.set(0, 1),
                    null !== (o = t.ray.intersectTriangle(va, ya, ga, !1, ha)))) {
                        var s = t.ray.origin.distanceTo(ha);
                        s < t.near || s > t.far || e.push({
                            distance: s,
                            point: ha.clone(),
                            uv: Ie.getUV(ha, va, ga, ya, _a, xa, ba, new ht),
                            face: null,
                            object: this
                        })
                    }
                },
                copy: function(t) {
                    return ye.prototype.copy.call(this, t),
                    void 0 !== t.center && this.center.copy(t.center),
                    this.material = t.material,
                    this
                }
            });
            var Ta, Ma, Ea, Aa, Pa, Ca = new _t, La = new _t;
            function Da() {
                ye.call(this),
                this._currentLevel = 0,
                this.type = "LOD",
                Object.defineProperties(this, {
                    levels: {
                        enumerable: !0,
                        value: []
                    }
                }),
                this.autoUpdate = !0
            }
            function Ra(t, e) {
                t && t.isGeometry && console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),
                Lr.call(this, t, e),
                this.type = "SkinnedMesh",
                this.bindMode = "attached",
                this.bindMatrix = new Xt,
                this.bindMatrixInverse = new Xt
            }
            Da.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: Da,
                isLOD: !0,
                copy: function(t) {
                    ye.prototype.copy.call(this, t, !1);
                    for (var e = t.levels, r = 0, n = e.length; r < n; r++) {
                        var i = e[r];
                        this.addLevel(i.object.clone(), i.distance)
                    }
                    return this.autoUpdate = t.autoUpdate,
                    this
                },
                addLevel: function(t, e) {
                    void 0 === e && (e = 0),
                    e = Math.abs(e);
                    var r, n = this.levels;
                    for (r = 0; r < n.length && !(e < n[r].distance); r++)
                        ;
                    return n.splice(r, 0, {
                        distance: e,
                        object: t
                    }),
                    this.add(t),
                    this
                },
                getCurrentLevel: function() {
                    return this._currentLevel
                },
                getObjectForDistance: function(t) {
                    var e = this.levels;
                    if (e.length > 0) {
                        var r, n;
                        for (r = 1,
                        n = e.length; r < n && !(t < e[r].distance); r++)
                            ;
                        return e[r - 1].object
                    }
                    return null
                },
                raycast: function(t, e) {
                    if (this.levels.length > 0) {
                        Ca.setFromMatrixPosition(this.matrixWorld);
                        var r = t.ray.origin.distanceTo(Ca);
                        this.getObjectForDistance(r).raycast(t, e)
                    }
                },
                update: function(t) {
                    var e = this.levels;
                    if (e.length > 1) {
                        Ca.setFromMatrixPosition(t.matrixWorld),
                        La.setFromMatrixPosition(this.matrixWorld);
                        var r, n, i = Ca.distanceTo(La) / t.zoom;
                        for (e[0].object.visible = !0,
                        r = 1,
                        n = e.length; r < n && i >= e[r].distance; r++)
                            e[r - 1].object.visible = !1,
                            e[r].object.visible = !0;
                        for (this._currentLevel = r - 1; r < n; r++)
                            e[r].object.visible = !1
                    }
                },
                toJSON: function(t) {
                    var e = ye.prototype.toJSON.call(this, t);
                    !1 === this.autoUpdate && (e.object.autoUpdate = !1),
                    e.object.levels = [];
                    for (var r = this.levels, n = 0, i = r.length; n < i; n++) {
                        var a = r[n];
                        e.object.levels.push({
                            object: a.object.uuid,
                            distance: a.distance
                        })
                    }
                    return e
                }
            }),
            Ra.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Ra,
                isSkinnedMesh: !0,
                copy: function(t) {
                    return Lr.prototype.copy.call(this, t),
                    this.bindMode = t.bindMode,
                    this.bindMatrix.copy(t.bindMatrix),
                    this.bindMatrixInverse.copy(t.bindMatrixInverse),
                    this.skeleton = t.skeleton,
                    this
                },
                bind: function(t, e) {
                    this.skeleton = t,
                    void 0 === e && (this.updateMatrixWorld(!0),
                    this.skeleton.calculateInverses(),
                    e = this.matrixWorld),
                    this.bindMatrix.copy(e),
                    this.bindMatrixInverse.getInverse(e)
                },
                pose: function() {
                    this.skeleton.pose()
                },
                normalizeSkinWeights: function() {
                    for (var t = new mt, e = this.geometry.attributes.skinWeight, r = 0, n = e.count; r < n; r++) {
                        t.x = e.getX(r),
                        t.y = e.getY(r),
                        t.z = e.getZ(r),
                        t.w = e.getW(r);
                        var i = 1 / t.manhattanLength();
                        i !== 1 / 0 ? t.multiplyScalar(i) : t.set(1, 0, 0, 0),
                        e.setXYZW(r, t.x, t.y, t.z, t.w)
                    }
                },
                updateMatrixWorld: function(t) {
                    Lr.prototype.updateMatrixWorld.call(this, t),
                    "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode)
                },
                boneTransform: (Ta = new _t,
                Ma = new mt,
                Ea = new mt,
                Aa = new _t,
                Pa = new Xt,
                function(t, e) {
                    var r = this.skeleton
                      , n = this.geometry;
                    Ma.fromBufferAttribute(n.attributes.skinIndex, t),
                    Ea.fromBufferAttribute(n.attributes.skinWeight, t),
                    Ta.fromBufferAttribute(n.attributes.position, t).applyMatrix4(this.bindMatrix),
                    e.set(0, 0, 0);
                    for (var i = 0; i < 4; i++) {
                        var a = Ea.getComponent(i);
                        if (0 !== a) {
                            var o = Ma.getComponent(i);
                            Pa.multiplyMatrices(r.bones[o].matrixWorld, r.boneInverses[o]),
                            e.addScaledVector(Aa.copy(Ta).applyMatrix4(Pa), a)
                        }
                    }
                    return e.applyMatrix4(this.bindMatrixInverse)
                }
                )
            });
            var Ia = new Xt
              , ka = new Xt;
            function Oa(t, e) {
                if (t = t || [],
                this.bones = t.slice(0),
                this.boneMatrices = new Float32Array(16 * this.bones.length),
                this.frame = -1,
                void 0 === e)
                    this.calculateInverses();
                else if (this.bones.length === e.length)
                    this.boneInverses = e.slice(0);
                else {
                    console.warn("THREE.Skeleton boneInverses is the wrong length."),
                    this.boneInverses = [];
                    for (var r = 0, n = this.bones.length; r < n; r++)
                        this.boneInverses.push(new Xt)
                }
            }
            function Fa() {
                ye.call(this),
                this.type = "Bone"
            }
            Object.assign(Oa.prototype, {
                calculateInverses: function() {
                    this.boneInverses = [];
                    for (var t = 0, e = this.bones.length; t < e; t++) {
                        var r = new Xt;
                        this.bones[t] && r.getInverse(this.bones[t].matrixWorld),
                        this.boneInverses.push(r)
                    }
                },
                pose: function() {
                    for (var t = 0, e = this.bones.length; t < e; t++) {
                        var r = this.bones[t];
                        r && r.matrixWorld.getInverse(this.boneInverses[t])
                    }
                    for (var n = 0, i = this.bones.length; n < i; n++) {
                        var a = this.bones[n];
                        a && (a.parent && a.parent.isBone ? (a.matrix.getInverse(a.parent.matrixWorld),
                        a.matrix.multiply(a.matrixWorld)) : a.matrix.copy(a.matrixWorld),
                        a.matrix.decompose(a.position, a.quaternion, a.scale))
                    }
                },
                update: function() {
                    for (var t = this.bones, e = this.boneInverses, r = this.boneMatrices, n = this.boneTexture, i = 0, a = t.length; i < a; i++) {
                        var o = t[i] ? t[i].matrixWorld : ka;
                        Ia.multiplyMatrices(o, e[i]),
                        Ia.toArray(r, 16 * i)
                    }
                    void 0 !== n && (n.needsUpdate = !0)
                },
                clone: function() {
                    return new Oa(this.bones,this.boneInverses)
                },
                getBoneByName: function(t) {
                    for (var e = 0, r = this.bones.length; e < r; e++) {
                        var n = this.bones[e];
                        if (n.name === t)
                            return n
                    }
                },
                dispose: function() {
                    this.boneTexture && (this.boneTexture.dispose(),
                    this.boneTexture = void 0)
                }
            }),
            Fa.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: Fa,
                isBone: !0
            });
            var Na = new Xt
              , Ba = new Xt
              , za = []
              , Ga = new Lr;
            function Ha(t, e, r) {
                Lr.call(this, t, e),
                this.instanceMatrix = new Xe(new Float32Array(16 * r),16),
                this.instanceColor = null,
                this.count = r,
                this.frustumCulled = !1
            }
            function Ua(t) {
                Ve.call(this),
                this.type = "LineBasicMaterial",
                this.color = new Ge(16777215),
                this.linewidth = 1,
                this.linecap = "round",
                this.linejoin = "round",
                this.morphTargets = !1,
                this.setValues(t)
            }
            Ha.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Ha,
                isInstancedMesh: !0,
                copy: function(t) {
                    return Lr.prototype.copy.call(this, t),
                    this.instanceMatrix.copy(t.instanceMatrix),
                    this.count = t.count,
                    this
                },
                setColorAt: function(t, e) {
                    null === this.instanceColor && (this.instanceColor = new Xe(new Float32Array(3 * this.count),3)),
                    e.toArray(this.instanceColor.array, 3 * t)
                },
                getMatrixAt: function(t, e) {
                    e.fromArray(this.instanceMatrix.array, 16 * t)
                },
                raycast: function(t, e) {
                    var r = this.matrixWorld
                      , n = this.count;
                    if (Ga.geometry = this.geometry,
                    Ga.material = this.material,
                    void 0 !== Ga.material)
                        for (var i = 0; i < n; i++) {
                            this.getMatrixAt(i, Na),
                            Ba.multiplyMatrices(r, Na),
                            Ga.matrixWorld = Ba,
                            Ga.raycast(t, za);
                            for (var a = 0, o = za.length; a < o; a++) {
                                var s = za[a];
                                s.instanceId = i,
                                s.object = this,
                                e.push(s)
                            }
                            za.length = 0
                        }
                },
                setMatrixAt: function(t, e) {
                    e.toArray(this.instanceMatrix.array, 16 * t)
                },
                updateMorphTargets: function() {}
            }),
            Ua.prototype = Object.create(Ve.prototype),
            Ua.prototype.constructor = Ua,
            Ua.prototype.isLineBasicMaterial = !0,
            Ua.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this.linewidth = t.linewidth,
                this.linecap = t.linecap,
                this.linejoin = t.linejoin,
                this.morphTargets = t.morphTargets,
                this
            }
            ;
            var Va = new _t
              , ja = new _t
              , Wa = new Xt
              , qa = new qt
              , Xa = new Bt;
            function Ya(t, e, r) {
                1 === r && console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),
                ye.call(this),
                this.type = "Line",
                this.geometry = void 0 !== t ? t : new pr,
                this.material = void 0 !== e ? e : new Ua,
                this.updateMorphTargets()
            }
            Ya.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: Ya,
                isLine: !0,
                copy: function(t) {
                    return ye.prototype.copy.call(this, t),
                    this.material = t.material,
                    this.geometry = t.geometry,
                    this
                },
                computeLineDistances: function() {
                    var t = this.geometry;
                    if (t.isBufferGeometry)
                        if (null === t.index) {
                            for (var e = t.attributes.position, r = [0], n = 1, i = e.count; n < i; n++)
                                Va.fromBufferAttribute(e, n - 1),
                                ja.fromBufferAttribute(e, n),
                                r[n] = r[n - 1],
                                r[n] += Va.distanceTo(ja);
                            t.setAttribute("lineDistance", new er(r,1))
                        } else
                            console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
                    else if (t.isGeometry) {
                        var a = t.vertices
                          , o = t.lineDistances;
                        o[0] = 0;
                        for (var s = 1, l = a.length; s < l; s++)
                            o[s] = o[s - 1],
                            o[s] += a[s - 1].distanceTo(a[s])
                    }
                    return this
                },
                raycast: function(t, e) {
                    var r = this.geometry
                      , n = this.matrixWorld
                      , i = t.params.Line.threshold;
                    if (null === r.boundingSphere && r.computeBoundingSphere(),
                    Xa.copy(r.boundingSphere),
                    Xa.applyMatrix4(n),
                    Xa.radius += i,
                    !1 !== t.ray.intersectsSphere(Xa)) {
                        Wa.getInverse(n),
                        qa.copy(t.ray).applyMatrix4(Wa);
                        var a = i / ((this.scale.x + this.scale.y + this.scale.z) / 3)
                          , o = a * a
                          , s = new _t
                          , l = new _t
                          , c = new _t
                          , h = new _t
                          , u = this.isLineSegments ? 2 : 1;
                        if (r.isBufferGeometry) {
                            var p = r.index
                              , d = r.attributes.position;
                            if (null !== p)
                                for (var f = p.array, m = 0, v = f.length - 1; m < v; m += u) {
                                    var g = f[m]
                                      , y = f[m + 1];
                                    if (s.fromBufferAttribute(d, g),
                                    l.fromBufferAttribute(d, y),
                                    !(qa.distanceSqToSegment(s, l, h, c) > o)) {
                                        h.applyMatrix4(this.matrixWorld);
                                        var _ = t.ray.origin.distanceTo(h);
                                        _ < t.near || _ > t.far || e.push({
                                            distance: _,
                                            point: c.clone().applyMatrix4(this.matrixWorld),
                                            index: m,
                                            face: null,
                                            faceIndex: null,
                                            object: this
                                        })
                                    }
                                }
                            else
                                for (var x = 0, b = d.count - 1; x < b; x += u)
                                    if (s.fromBufferAttribute(d, x),
                                    l.fromBufferAttribute(d, x + 1),
                                    !(qa.distanceSqToSegment(s, l, h, c) > o)) {
                                        h.applyMatrix4(this.matrixWorld);
                                        var w = t.ray.origin.distanceTo(h);
                                        w < t.near || w > t.far || e.push({
                                            distance: w,
                                            point: c.clone().applyMatrix4(this.matrixWorld),
                                            index: x,
                                            face: null,
                                            faceIndex: null,
                                            object: this
                                        })
                                    }
                        } else if (r.isGeometry)
                            for (var S = r.vertices, T = S.length, M = 0; M < T - 1; M += u)
                                if (!(qa.distanceSqToSegment(S[M], S[M + 1], h, c) > o)) {
                                    h.applyMatrix4(this.matrixWorld);
                                    var E = t.ray.origin.distanceTo(h);
                                    E < t.near || E > t.far || e.push({
                                        distance: E,
                                        point: c.clone().applyMatrix4(this.matrixWorld),
                                        index: M,
                                        face: null,
                                        faceIndex: null,
                                        object: this
                                    })
                                }
                    }
                },
                updateMorphTargets: function() {
                    var t = this.geometry;
                    if (t.isBufferGeometry) {
                        var e = t.morphAttributes
                          , r = Object.keys(e);
                        if (r.length > 0) {
                            var n = e[r[0]];
                            if (void 0 !== n) {
                                this.morphTargetInfluences = [],
                                this.morphTargetDictionary = {};
                                for (var i = 0, a = n.length; i < a; i++) {
                                    var o = n[i].name || String(i);
                                    this.morphTargetInfluences.push(0),
                                    this.morphTargetDictionary[o] = i
                                }
                            }
                        }
                    } else {
                        var s = t.morphTargets;
                        void 0 !== s && s.length > 0 && console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")
                    }
                }
            });
            var $a = new _t
              , Ka = new _t;
            function Za(t, e) {
                Ya.call(this, t, e),
                this.type = "LineSegments"
            }
            function Ja(t, e) {
                Ya.call(this, t, e),
                this.type = "LineLoop"
            }
            function Qa(t) {
                Ve.call(this),
                this.type = "PointsMaterial",
                this.color = new Ge(16777215),
                this.map = null,
                this.alphaMap = null,
                this.size = 1,
                this.sizeAttenuation = !0,
                this.morphTargets = !1,
                this.setValues(t)
            }
            Za.prototype = Object.assign(Object.create(Ya.prototype), {
                constructor: Za,
                isLineSegments: !0,
                computeLineDistances: function() {
                    var t = this.geometry;
                    if (t.isBufferGeometry)
                        if (null === t.index) {
                            for (var e = t.attributes.position, r = [], n = 0, i = e.count; n < i; n += 2)
                                $a.fromBufferAttribute(e, n),
                                Ka.fromBufferAttribute(e, n + 1),
                                r[n] = 0 === n ? 0 : r[n - 1],
                                r[n + 1] = r[n] + $a.distanceTo(Ka);
                            t.setAttribute("lineDistance", new er(r,1))
                        } else
                            console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
                    else if (t.isGeometry)
                        for (var a = t.vertices, o = t.lineDistances, s = 0, l = a.length; s < l; s += 2)
                            $a.copy(a[s]),
                            Ka.copy(a[s + 1]),
                            o[s] = 0 === s ? 0 : o[s - 1],
                            o[s + 1] = o[s] + $a.distanceTo(Ka);
                    return this
                }
            }),
            Ja.prototype = Object.assign(Object.create(Ya.prototype), {
                constructor: Ja,
                isLineLoop: !0
            }),
            Qa.prototype = Object.create(Ve.prototype),
            Qa.prototype.constructor = Qa,
            Qa.prototype.isPointsMaterial = !0,
            Qa.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this.map = t.map,
                this.alphaMap = t.alphaMap,
                this.size = t.size,
                this.sizeAttenuation = t.sizeAttenuation,
                this.morphTargets = t.morphTargets,
                this
            }
            ;
            var to = new Xt
              , eo = new qt
              , ro = new Bt
              , no = new _t;
            function io(t, e) {
                ye.call(this),
                this.type = "Points",
                this.geometry = void 0 !== t ? t : new pr,
                this.material = void 0 !== e ? e : new Qa,
                this.updateMorphTargets()
            }
            function ao(t, e, r, n, i, a, o) {
                var s = eo.distanceSqToPoint(t);
                if (s < r) {
                    var l = new _t;
                    eo.closestPointToPoint(t, l),
                    l.applyMatrix4(n);
                    var c = i.ray.origin.distanceTo(l);
                    if (c < i.near || c > i.far)
                        return;
                    a.push({
                        distance: c,
                        distanceToRay: Math.sqrt(s),
                        point: l,
                        index: e,
                        face: null,
                        object: o
                    })
                }
            }
            function oo(t, e, r, n, i, a, o, s, l) {
                ft.call(this, t, e, r, n, i, a, o, s, l),
                this.format = void 0 !== o ? o : T,
                this.minFilter = void 0 !== a ? a : v,
                this.magFilter = void 0 !== i ? i : v,
                this.generateMipmaps = !1;
                var c = this;
                "requestVideoFrameCallback"in t && t.requestVideoFrameCallback((function e() {
                    c.needsUpdate = !0,
                    t.requestVideoFrameCallback(e)
                }
                ))
            }
            function so(t, e, r, n, i, a, o, s, l, c, h, u) {
                ft.call(this, null, a, o, s, l, c, n, i, h, u),
                this.image = {
                    width: e,
                    height: r
                },
                this.mipmaps = t,
                this.flipY = !1,
                this.generateMipmaps = !1
            }
            function lo(t, e, r, n, i, a, o, s, l) {
                ft.call(this, t, e, r, n, i, a, o, s, l),
                this.needsUpdate = !0
            }
            function co(t, e, r, n, i, a, o, s, l, c) {
                if ((c = void 0 !== c ? c : E) !== E && c !== A)
                    throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
                void 0 === r && c === E && (r = _),
                void 0 === r && c === A && (r = S),
                ft.call(this, null, n, i, a, o, s, c, r, l),
                this.image = {
                    width: t,
                    height: e
                },
                this.magFilter = void 0 !== o ? o : d,
                this.minFilter = void 0 !== s ? s : d,
                this.flipY = !1,
                this.generateMipmaps = !1
            }
            io.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: io,
                isPoints: !0,
                copy: function(t) {
                    return ye.prototype.copy.call(this, t),
                    this.material = t.material,
                    this.geometry = t.geometry,
                    this
                },
                raycast: function(t, e) {
                    var r = this.geometry
                      , n = this.matrixWorld
                      , i = t.params.Points.threshold;
                    if (null === r.boundingSphere && r.computeBoundingSphere(),
                    ro.copy(r.boundingSphere),
                    ro.applyMatrix4(n),
                    ro.radius += i,
                    !1 !== t.ray.intersectsSphere(ro)) {
                        to.getInverse(n),
                        eo.copy(t.ray).applyMatrix4(to);
                        var a = i / ((this.scale.x + this.scale.y + this.scale.z) / 3)
                          , o = a * a;
                        if (r.isBufferGeometry) {
                            var s = r.index
                              , l = r.attributes.position;
                            if (null !== s)
                                for (var c = s.array, h = 0, u = c.length; h < u; h++) {
                                    var p = c[h];
                                    no.fromBufferAttribute(l, p),
                                    ao(no, p, o, n, t, e, this)
                                }
                            else
                                for (var d = 0, f = l.count; d < f; d++)
                                    no.fromBufferAttribute(l, d),
                                    ao(no, d, o, n, t, e, this)
                        } else
                            for (var m = r.vertices, v = 0, g = m.length; v < g; v++)
                                ao(m[v], v, o, n, t, e, this)
                    }
                },
                updateMorphTargets: function() {
                    var t = this.geometry;
                    if (t.isBufferGeometry) {
                        var e = t.morphAttributes
                          , r = Object.keys(e);
                        if (r.length > 0) {
                            var n = e[r[0]];
                            if (void 0 !== n) {
                                this.morphTargetInfluences = [],
                                this.morphTargetDictionary = {};
                                for (var i = 0, a = n.length; i < a; i++) {
                                    var o = n[i].name || String(i);
                                    this.morphTargetInfluences.push(0),
                                    this.morphTargetDictionary[o] = i
                                }
                            }
                        }
                    } else {
                        var s = t.morphTargets;
                        void 0 !== s && s.length > 0 && console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")
                    }
                }
            }),
            oo.prototype = Object.assign(Object.create(ft.prototype), {
                constructor: oo,
                clone: function() {
                    return new this.constructor(this.image).copy(this)
                },
                isVideoTexture: !0,
                update: function() {
                    var t = this.image;
                    !1 == "requestVideoFrameCallback"in t && t.readyState >= t.HAVE_CURRENT_DATA && (this.needsUpdate = !0)
                }
            }),
            so.prototype = Object.create(ft.prototype),
            so.prototype.constructor = so,
            so.prototype.isCompressedTexture = !0,
            lo.prototype = Object.create(ft.prototype),
            lo.prototype.constructor = lo,
            lo.prototype.isCanvasTexture = !0,
            co.prototype = Object.create(ft.prototype),
            co.prototype.constructor = co,
            co.prototype.isDepthTexture = !0;
            var ho = 0
              , uo = new Xt
              , po = new ye
              , fo = new _t;
            function mo() {
                Object.defineProperty(this, "id", {
                    value: ho += 2
                }),
                this.uuid = it.generateUUID(),
                this.name = "",
                this.type = "Geometry",
                this.vertices = [],
                this.colors = [],
                this.faces = [],
                this.faceVertexUvs = [[]],
                this.morphTargets = [],
                this.morphNormals = [],
                this.skinWeights = [],
                this.skinIndices = [],
                this.lineDistances = [],
                this.boundingBox = null,
                this.boundingSphere = null,
                this.elementsNeedUpdate = !1,
                this.verticesNeedUpdate = !1,
                this.uvsNeedUpdate = !1,
                this.normalsNeedUpdate = !1,
                this.colorsNeedUpdate = !1,
                this.lineDistancesNeedUpdate = !1,
                this.groupsNeedUpdate = !1
            }
            mo.prototype = Object.assign(Object.create(tt.prototype), {
                constructor: mo,
                isGeometry: !0,
                applyMatrix4: function(t) {
                    for (var e = (new ut).getNormalMatrix(t), r = 0, n = this.vertices.length; r < n; r++)
                        this.vertices[r].applyMatrix4(t);
                    for (var i = 0, a = this.faces.length; i < a; i++) {
                        var o = this.faces[i];
                        o.normal.applyMatrix3(e).normalize();
                        for (var s = 0, l = o.vertexNormals.length; s < l; s++)
                            o.vertexNormals[s].applyMatrix3(e).normalize()
                    }
                    return null !== this.boundingBox && this.computeBoundingBox(),
                    null !== this.boundingSphere && this.computeBoundingSphere(),
                    this.verticesNeedUpdate = !0,
                    this.normalsNeedUpdate = !0,
                    this
                },
                rotateX: function(t) {
                    return uo.makeRotationX(t),
                    this.applyMatrix4(uo),
                    this
                },
                rotateY: function(t) {
                    return uo.makeRotationY(t),
                    this.applyMatrix4(uo),
                    this
                },
                rotateZ: function(t) {
                    return uo.makeRotationZ(t),
                    this.applyMatrix4(uo),
                    this
                },
                translate: function(t, e, r) {
                    return uo.makeTranslation(t, e, r),
                    this.applyMatrix4(uo),
                    this
                },
                scale: function(t, e, r) {
                    return uo.makeScale(t, e, r),
                    this.applyMatrix4(uo),
                    this
                },
                lookAt: function(t) {
                    return po.lookAt(t),
                    po.updateMatrix(),
                    this.applyMatrix4(po.matrix),
                    this
                },
                fromBufferGeometry: function(t) {
                    var e = this
                      , r = null !== t.index ? t.index : void 0
                      , n = t.attributes;
                    if (void 0 === n.position)
                        return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),
                        this;
                    var i = n.position
                      , a = n.normal
                      , o = n.color
                      , s = n.uv
                      , l = n.uv2;
                    void 0 !== l && (this.faceVertexUvs[1] = []);
                    for (var c = 0; c < i.count; c++)
                        e.vertices.push((new _t).fromBufferAttribute(i, c)),
                        void 0 !== o && e.colors.push((new Ge).fromBufferAttribute(o, c));
                    function h(t, r, n, i) {
                        var c = void 0 === o ? [] : [e.colors[t].clone(), e.colors[r].clone(), e.colors[n].clone()]
                          , h = void 0 === a ? [] : [(new _t).fromBufferAttribute(a, t), (new _t).fromBufferAttribute(a, r), (new _t).fromBufferAttribute(a, n)]
                          , u = new He(t,r,n,h,c,i);
                        e.faces.push(u),
                        void 0 !== s && e.faceVertexUvs[0].push([(new ht).fromBufferAttribute(s, t), (new ht).fromBufferAttribute(s, r), (new ht).fromBufferAttribute(s, n)]),
                        void 0 !== l && e.faceVertexUvs[1].push([(new ht).fromBufferAttribute(l, t), (new ht).fromBufferAttribute(l, r), (new ht).fromBufferAttribute(l, n)])
                    }
                    var u = t.groups;
                    if (u.length > 0)
                        for (var p = 0; p < u.length; p++)
                            for (var d = u[p], f = d.start, m = f, v = f + d.count; m < v; m += 3)
                                void 0 !== r ? h(r.getX(m), r.getX(m + 1), r.getX(m + 2), d.materialIndex) : h(m, m + 1, m + 2, d.materialIndex);
                    else if (void 0 !== r)
                        for (var g = 0; g < r.count; g += 3)
                            h(r.getX(g), r.getX(g + 1), r.getX(g + 2));
                    else
                        for (var y = 0; y < i.count; y += 3)
                            h(y, y + 1, y + 2);
                    return this.computeFaceNormals(),
                    null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()),
                    null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()),
                    this
                },
                center: function() {
                    return this.computeBoundingBox(),
                    this.boundingBox.getCenter(fo).negate(),
                    this.translate(fo.x, fo.y, fo.z),
                    this
                },
                normalize: function() {
                    this.computeBoundingSphere();
                    var t = this.boundingSphere.center
                      , e = this.boundingSphere.radius
                      , r = 0 === e ? 1 : 1 / e
                      , n = new Xt;
                    return n.set(r, 0, 0, -r * t.x, 0, r, 0, -r * t.y, 0, 0, r, -r * t.z, 0, 0, 0, 1),
                    this.applyMatrix4(n),
                    this
                },
                computeFaceNormals: function() {
                    for (var t = new _t, e = new _t, r = 0, n = this.faces.length; r < n; r++) {
                        var i = this.faces[r]
                          , a = this.vertices[i.a]
                          , o = this.vertices[i.b]
                          , s = this.vertices[i.c];
                        t.subVectors(s, o),
                        e.subVectors(a, o),
                        t.cross(e),
                        t.normalize(),
                        i.normal.copy(t)
                    }
                },
                computeVertexNormals: function(t) {
                    void 0 === t && (t = !0);
                    for (var e = new Array(this.vertices.length), r = 0, n = this.vertices.length; r < n; r++)
                        e[r] = new _t;
                    if (t)
                        for (var i = new _t, a = new _t, o = 0, s = this.faces.length; o < s; o++) {
                            var l = this.faces[o]
                              , c = this.vertices[l.a]
                              , h = this.vertices[l.b]
                              , u = this.vertices[l.c];
                            i.subVectors(u, h),
                            a.subVectors(c, h),
                            i.cross(a),
                            e[l.a].add(i),
                            e[l.b].add(i),
                            e[l.c].add(i)
                        }
                    else {
                        this.computeFaceNormals();
                        for (var p = 0, d = this.faces.length; p < d; p++) {
                            var f = this.faces[p];
                            e[f.a].add(f.normal),
                            e[f.b].add(f.normal),
                            e[f.c].add(f.normal)
                        }
                    }
                    for (var m = 0, v = this.vertices.length; m < v; m++)
                        e[m].normalize();
                    for (var g = 0, y = this.faces.length; g < y; g++) {
                        var _ = this.faces[g]
                          , x = _.vertexNormals;
                        3 === x.length ? (x[0].copy(e[_.a]),
                        x[1].copy(e[_.b]),
                        x[2].copy(e[_.c])) : (x[0] = e[_.a].clone(),
                        x[1] = e[_.b].clone(),
                        x[2] = e[_.c].clone())
                    }
                    this.faces.length > 0 && (this.normalsNeedUpdate = !0)
                },
                computeFlatVertexNormals: function() {
                    this.computeFaceNormals();
                    for (var t = 0, e = this.faces.length; t < e; t++) {
                        var r = this.faces[t]
                          , n = r.vertexNormals;
                        3 === n.length ? (n[0].copy(r.normal),
                        n[1].copy(r.normal),
                        n[2].copy(r.normal)) : (n[0] = r.normal.clone(),
                        n[1] = r.normal.clone(),
                        n[2] = r.normal.clone())
                    }
                    this.faces.length > 0 && (this.normalsNeedUpdate = !0)
                },
                computeMorphNormals: function() {
                    for (var t = 0, e = this.faces.length; t < e; t++) {
                        var r = this.faces[t];
                        r.__originalFaceNormal ? r.__originalFaceNormal.copy(r.normal) : r.__originalFaceNormal = r.normal.clone(),
                        r.__originalVertexNormals || (r.__originalVertexNormals = []);
                        for (var n = 0, i = r.vertexNormals.length; n < i; n++)
                            r.__originalVertexNormals[n] ? r.__originalVertexNormals[n].copy(r.vertexNormals[n]) : r.__originalVertexNormals[n] = r.vertexNormals[n].clone()
                    }
                    var a = new mo;
                    a.faces = this.faces;
                    for (var o = 0, s = this.morphTargets.length; o < s; o++) {
                        if (!this.morphNormals[o]) {
                            this.morphNormals[o] = {},
                            this.morphNormals[o].faceNormals = [],
                            this.morphNormals[o].vertexNormals = [];
                            for (var l = this.morphNormals[o].faceNormals, c = this.morphNormals[o].vertexNormals, h = 0, u = this.faces.length; h < u; h++) {
                                var p = new _t
                                  , d = {
                                    a: new _t,
                                    b: new _t,
                                    c: new _t
                                };
                                l.push(p),
                                c.push(d)
                            }
                        }
                        var f = this.morphNormals[o];
                        a.vertices = this.morphTargets[o].vertices,
                        a.computeFaceNormals(),
                        a.computeVertexNormals();
                        for (var m = 0, v = this.faces.length; m < v; m++) {
                            var g = this.faces[m]
                              , y = f.faceNormals[m]
                              , _ = f.vertexNormals[m];
                            y.copy(g.normal),
                            _.a.copy(g.vertexNormals[0]),
                            _.b.copy(g.vertexNormals[1]),
                            _.c.copy(g.vertexNormals[2])
                        }
                    }
                    for (var x = 0, b = this.faces.length; x < b; x++) {
                        var w = this.faces[x];
                        w.normal = w.__originalFaceNormal,
                        w.vertexNormals = w.__originalVertexNormals
                    }
                },
                computeBoundingBox: function() {
                    null === this.boundingBox && (this.boundingBox = new wt),
                    this.boundingBox.setFromPoints(this.vertices)
                },
                computeBoundingSphere: function() {
                    null === this.boundingSphere && (this.boundingSphere = new Bt),
                    this.boundingSphere.setFromPoints(this.vertices)
                },
                merge: function(t, e, r) {
                    if (t && t.isGeometry) {
                        var n, i = this.vertices.length, a = this.vertices, o = t.vertices, s = this.faces, l = t.faces, c = this.colors, h = t.colors;
                        void 0 === r && (r = 0),
                        void 0 !== e && (n = (new ut).getNormalMatrix(e));
                        for (var u = 0, p = o.length; u < p; u++) {
                            var d = o[u].clone();
                            void 0 !== e && d.applyMatrix4(e),
                            a.push(d)
                        }
                        for (var f = 0, m = h.length; f < m; f++)
                            c.push(h[f].clone());
                        for (var v = 0, g = l.length; v < g; v++) {
                            var y = l[v]
                              , _ = void 0
                              , x = void 0
                              , b = y.vertexNormals
                              , w = y.vertexColors
                              , S = new He(y.a + i,y.b + i,y.c + i);
                            S.normal.copy(y.normal),
                            void 0 !== n && S.normal.applyMatrix3(n).normalize();
                            for (var T = 0, M = b.length; T < M; T++)
                                _ = b[T].clone(),
                                void 0 !== n && _.applyMatrix3(n).normalize(),
                                S.vertexNormals.push(_);
                            S.color.copy(y.color);
                            for (var E = 0, A = w.length; E < A; E++)
                                x = w[E],
                                S.vertexColors.push(x.clone());
                            S.materialIndex = y.materialIndex + r,
                            s.push(S)
                        }
                        for (var P = 0, C = t.faceVertexUvs.length; P < C; P++) {
                            var L = t.faceVertexUvs[P];
                            void 0 === this.faceVertexUvs[P] && (this.faceVertexUvs[P] = []);
                            for (var D = 0, R = L.length; D < R; D++) {
                                for (var I = L[D], k = [], O = 0, F = I.length; O < F; O++)
                                    k.push(I[O].clone());
                                this.faceVertexUvs[P].push(k)
                            }
                        }
                    } else
                        console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", t)
                },
                mergeMesh: function(t) {
                    t && t.isMesh ? (t.matrixAutoUpdate && t.updateMatrix(),
                    this.merge(t.geometry, t.matrix)) : console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", t)
                },
                mergeVertices: function() {
                    for (var t = {}, e = [], r = [], n = Math.pow(10, 4), i = 0, a = this.vertices.length; i < a; i++) {
                        var o = this.vertices[i]
                          , s = Math.round(o.x * n) + "_" + Math.round(o.y * n) + "_" + Math.round(o.z * n);
                        void 0 === t[s] ? (t[s] = i,
                        e.push(this.vertices[i]),
                        r[i] = e.length - 1) : r[i] = r[t[s]]
                    }
                    for (var l = [], c = 0, h = this.faces.length; c < h; c++) {
                        var u = this.faces[c];
                        u.a = r[u.a],
                        u.b = r[u.b],
                        u.c = r[u.c];
                        for (var p = [u.a, u.b, u.c], d = 0; d < 3; d++)
                            if (p[d] === p[(d + 1) % 3]) {
                                l.push(c);
                                break
                            }
                    }
                    for (var f = l.length - 1; f >= 0; f--) {
                        var m = l[f];
                        this.faces.splice(m, 1);
                        for (var v = 0, g = this.faceVertexUvs.length; v < g; v++)
                            this.faceVertexUvs[v].splice(m, 1)
                    }
                    var y = this.vertices.length - e.length;
                    return this.vertices = e,
                    y
                },
                setFromPoints: function(t) {
                    this.vertices = [];
                    for (var e = 0, r = t.length; e < r; e++) {
                        var n = t[e];
                        this.vertices.push(new _t(n.x,n.y,n.z || 0))
                    }
                    return this
                },
                sortFacesByMaterialIndex: function() {
                    for (var t = this.faces, e = t.length, r = 0; r < e; r++)
                        t[r]._id = r;
                    t.sort((function(t, e) {
                        return t.materialIndex - e.materialIndex
                    }
                    ));
                    var n, i, a = this.faceVertexUvs[0], o = this.faceVertexUvs[1];
                    a && a.length === e && (n = []),
                    o && o.length === e && (i = []);
                    for (var s = 0; s < e; s++) {
                        var l = t[s]._id;
                        n && n.push(a[l]),
                        i && i.push(o[l])
                    }
                    n && (this.faceVertexUvs[0] = n),
                    i && (this.faceVertexUvs[1] = i)
                },
                toJSON: function() {
                    var t = {
                        metadata: {
                            version: 4.5,
                            type: "Geometry",
                            generator: "Geometry.toJSON"
                        }
                    };
                    if (t.uuid = this.uuid,
                    t.type = this.type,
                    "" !== this.name && (t.name = this.name),
                    void 0 !== this.parameters) {
                        var e = this.parameters;
                        for (var r in e)
                            void 0 !== e[r] && (t[r] = e[r]);
                        return t
                    }
                    for (var n = [], i = 0; i < this.vertices.length; i++) {
                        var a = this.vertices[i];
                        n.push(a.x, a.y, a.z)
                    }
                    for (var o = [], s = [], l = {}, c = [], h = {}, u = [], p = {}, d = 0; d < this.faces.length; d++) {
                        var f = this.faces[d]
                          , m = void 0 !== this.faceVertexUvs[0][d]
                          , v = f.normal.length() > 0
                          , g = f.vertexNormals.length > 0
                          , y = 1 !== f.color.r || 1 !== f.color.g || 1 !== f.color.b
                          , _ = f.vertexColors.length > 0
                          , x = 0;
                        if (x = T(x, 0, 0),
                        x = T(x, 1, !0),
                        x = T(x, 2, !1),
                        x = T(x, 3, m),
                        x = T(x, 4, v),
                        x = T(x, 5, g),
                        x = T(x, 6, y),
                        x = T(x, 7, _),
                        o.push(x),
                        o.push(f.a, f.b, f.c),
                        o.push(f.materialIndex),
                        m) {
                            var b = this.faceVertexUvs[0][d];
                            o.push(A(b[0]), A(b[1]), A(b[2]))
                        }
                        if (v && o.push(M(f.normal)),
                        g) {
                            var w = f.vertexNormals;
                            o.push(M(w[0]), M(w[1]), M(w[2]))
                        }
                        if (y && o.push(E(f.color)),
                        _) {
                            var S = f.vertexColors;
                            o.push(E(S[0]), E(S[1]), E(S[2]))
                        }
                    }
                    function T(t, e, r) {
                        return r ? t | 1 << e : t & ~(1 << e)
                    }
                    function M(t) {
                        var e = t.x.toString() + t.y.toString() + t.z.toString();
                        return void 0 !== l[e] || (l[e] = s.length / 3,
                        s.push(t.x, t.y, t.z)),
                        l[e]
                    }
                    function E(t) {
                        var e = t.r.toString() + t.g.toString() + t.b.toString();
                        return void 0 !== h[e] || (h[e] = c.length,
                        c.push(t.getHex())),
                        h[e]
                    }
                    function A(t) {
                        var e = t.x.toString() + t.y.toString();
                        return void 0 !== p[e] || (p[e] = u.length / 2,
                        u.push(t.x, t.y)),
                        p[e]
                    }
                    return t.data = {},
                    t.data.vertices = n,
                    t.data.normals = s,
                    c.length > 0 && (t.data.colors = c),
                    u.length > 0 && (t.data.uvs = [u]),
                    t.data.faces = o,
                    t
                },
                clone: function() {
                    return (new mo).copy(this)
                },
                copy: function(t) {
                    this.vertices = [],
                    this.colors = [],
                    this.faces = [],
                    this.faceVertexUvs = [[]],
                    this.morphTargets = [],
                    this.morphNormals = [],
                    this.skinWeights = [],
                    this.skinIndices = [],
                    this.lineDistances = [],
                    this.boundingBox = null,
                    this.boundingSphere = null,
                    this.name = t.name;
                    for (var e = t.vertices, r = 0, n = e.length; r < n; r++)
                        this.vertices.push(e[r].clone());
                    for (var i = t.colors, a = 0, o = i.length; a < o; a++)
                        this.colors.push(i[a].clone());
                    for (var s = t.faces, l = 0, c = s.length; l < c; l++)
                        this.faces.push(s[l].clone());
                    for (var h = 0, u = t.faceVertexUvs.length; h < u; h++) {
                        var p = t.faceVertexUvs[h];
                        void 0 === this.faceVertexUvs[h] && (this.faceVertexUvs[h] = []);
                        for (var d = 0, f = p.length; d < f; d++) {
                            for (var m = p[d], v = [], g = 0, y = m.length; g < y; g++) {
                                var _ = m[g];
                                v.push(_.clone())
                            }
                            this.faceVertexUvs[h].push(v)
                        }
                    }
                    for (var x = t.morphTargets, b = 0, w = x.length; b < w; b++) {
                        var S = {};
                        if (S.name = x[b].name,
                        void 0 !== x[b].vertices) {
                            S.vertices = [];
                            for (var T = 0, M = x[b].vertices.length; T < M; T++)
                                S.vertices.push(x[b].vertices[T].clone())
                        }
                        if (void 0 !== x[b].normals) {
                            S.normals = [];
                            for (var E = 0, A = x[b].normals.length; E < A; E++)
                                S.normals.push(x[b].normals[E].clone())
                        }
                        this.morphTargets.push(S)
                    }
                    for (var P = t.morphNormals, C = 0, L = P.length; C < L; C++) {
                        var D = {};
                        if (void 0 !== P[C].vertexNormals) {
                            D.vertexNormals = [];
                            for (var R = 0, I = P[C].vertexNormals.length; R < I; R++) {
                                var k = P[C].vertexNormals[R]
                                  , O = {};
                                O.a = k.a.clone(),
                                O.b = k.b.clone(),
                                O.c = k.c.clone(),
                                D.vertexNormals.push(O)
                            }
                        }
                        if (void 0 !== P[C].faceNormals) {
                            D.faceNormals = [];
                            for (var F = 0, N = P[C].faceNormals.length; F < N; F++)
                                D.faceNormals.push(P[C].faceNormals[F].clone())
                        }
                        this.morphNormals.push(D)
                    }
                    for (var B = t.skinWeights, z = 0, G = B.length; z < G; z++)
                        this.skinWeights.push(B[z].clone());
                    for (var H = t.skinIndices, U = 0, V = H.length; U < V; U++)
                        this.skinIndices.push(H[U].clone());
                    for (var j = t.lineDistances, W = 0, q = j.length; W < q; W++)
                        this.lineDistances.push(j[W]);
                    var X = t.boundingBox;
                    null !== X && (this.boundingBox = X.clone());
                    var Y = t.boundingSphere;
                    return null !== Y && (this.boundingSphere = Y.clone()),
                    this.elementsNeedUpdate = t.elementsNeedUpdate,
                    this.verticesNeedUpdate = t.verticesNeedUpdate,
                    this.uvsNeedUpdate = t.uvsNeedUpdate,
                    this.normalsNeedUpdate = t.normalsNeedUpdate,
                    this.colorsNeedUpdate = t.colorsNeedUpdate,
                    this.lineDistancesNeedUpdate = t.lineDistancesNeedUpdate,
                    this.groupsNeedUpdate = t.groupsNeedUpdate,
                    this
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            });
            var vo = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    return (s = t.call(this) || this).type = "BoxGeometry",
                    s.parameters = {
                        width: e,
                        height: r,
                        depth: n,
                        widthSegments: i,
                        heightSegments: a,
                        depthSegments: o
                    },
                    s.fromBufferGeometry(new Ir(e,r,n,i,a,o)),
                    s.mergeVertices(),
                    s
                }
                return st(e, t),
                e
            }(mo)
              , go = function(t) {
                function e(e, r, n, i) {
                    var a;
                    (a = t.call(this) || this).type = "CircleBufferGeometry",
                    a.parameters = {
                        radius: e,
                        segments: r,
                        thetaStart: n,
                        thetaLength: i
                    },
                    e = e || 1,
                    r = void 0 !== r ? Math.max(3, r) : 8,
                    n = void 0 !== n ? n : 0,
                    i = void 0 !== i ? i : 2 * Math.PI;
                    var o = []
                      , s = []
                      , l = []
                      , c = []
                      , h = new _t
                      , u = new ht;
                    s.push(0, 0, 0),
                    l.push(0, 0, 1),
                    c.push(.5, .5);
                    for (var p = 0, d = 3; p <= r; p++,
                    d += 3) {
                        var f = n + p / r * i;
                        h.x = e * Math.cos(f),
                        h.y = e * Math.sin(f),
                        s.push(h.x, h.y, h.z),
                        l.push(0, 0, 1),
                        u.x = (s[d] / e + 1) / 2,
                        u.y = (s[d + 1] / e + 1) / 2,
                        c.push(u.x, u.y)
                    }
                    for (var m = 1; m <= r; m++)
                        o.push(m, m + 1, 0);
                    return a.setIndex(o),
                    a.setAttribute("position", new er(s,3)),
                    a.setAttribute("normal", new er(l,3)),
                    a.setAttribute("uv", new er(c,2)),
                    a
                }
                return st(e, t),
                e
            }(pr)
              , yo = function(t) {
                function e(e, r, n, i) {
                    var a;
                    return (a = t.call(this) || this).type = "CircleGeometry",
                    a.parameters = {
                        radius: e,
                        segments: r,
                        thetaStart: n,
                        thetaLength: i
                    },
                    a.fromBufferGeometry(new go(e,r,n,i)),
                    a.mergeVertices(),
                    a
                }
                return st(e, t),
                e
            }(mo)
              , _o = function(t) {
                function e(e, r, n, i, a, o, s, l) {
                    var c;
                    (c = t.call(this) || this).type = "CylinderBufferGeometry",
                    c.parameters = {
                        radiusTop: e,
                        radiusBottom: r,
                        height: n,
                        radialSegments: i,
                        heightSegments: a,
                        openEnded: o,
                        thetaStart: s,
                        thetaLength: l
                    };
                    var h = lt(c);
                    e = void 0 !== e ? e : 1,
                    r = void 0 !== r ? r : 1,
                    n = n || 1,
                    i = Math.floor(i) || 8,
                    a = Math.floor(a) || 1,
                    o = void 0 !== o && o,
                    s = void 0 !== s ? s : 0,
                    l = void 0 !== l ? l : 2 * Math.PI;
                    var u = []
                      , p = []
                      , d = []
                      , f = []
                      , m = 0
                      , v = []
                      , g = n / 2
                      , y = 0;
                    function _(t) {
                        for (var n = m, a = new ht, o = new _t, c = 0, v = !0 === t ? e : r, _ = !0 === t ? 1 : -1, x = 1; x <= i; x++)
                            p.push(0, g * _, 0),
                            d.push(0, _, 0),
                            f.push(.5, .5),
                            m++;
                        for (var b = m, w = 0; w <= i; w++) {
                            var S = w / i * l + s
                              , T = Math.cos(S)
                              , M = Math.sin(S);
                            o.x = v * M,
                            o.y = g * _,
                            o.z = v * T,
                            p.push(o.x, o.y, o.z),
                            d.push(0, _, 0),
                            a.x = .5 * T + .5,
                            a.y = .5 * M * _ + .5,
                            f.push(a.x, a.y),
                            m++
                        }
                        for (var E = 0; E < i; E++) {
                            var A = n + E
                              , P = b + E;
                            !0 === t ? u.push(P, P + 1, A) : u.push(P + 1, P, A),
                            c += 3
                        }
                        h.addGroup(y, c, !0 === t ? 1 : 2),
                        y += c
                    }
                    return function() {
                        for (var t = new _t, o = new _t, c = 0, _ = (r - e) / n, x = 0; x <= a; x++) {
                            for (var b = [], w = x / a, S = w * (r - e) + e, T = 0; T <= i; T++) {
                                var M = T / i
                                  , E = M * l + s
                                  , A = Math.sin(E)
                                  , P = Math.cos(E);
                                o.x = S * A,
                                o.y = -w * n + g,
                                o.z = S * P,
                                p.push(o.x, o.y, o.z),
                                t.set(A, _, P).normalize(),
                                d.push(t.x, t.y, t.z),
                                f.push(M, 1 - w),
                                b.push(m++)
                            }
                            v.push(b)
                        }
                        for (var C = 0; C < i; C++)
                            for (var L = 0; L < a; L++) {
                                var D = v[L][C]
                                  , R = v[L + 1][C]
                                  , I = v[L + 1][C + 1]
                                  , k = v[L][C + 1];
                                u.push(D, R, k),
                                u.push(R, I, k),
                                c += 6
                            }
                        h.addGroup(y, c, 0),
                        y += c
                    }(),
                    !1 === o && (e > 0 && _(!0),
                    r > 0 && _(!1)),
                    c.setIndex(u),
                    c.setAttribute("position", new er(p,3)),
                    c.setAttribute("normal", new er(d,3)),
                    c.setAttribute("uv", new er(f,2)),
                    c
                }
                return st(e, t),
                e
            }(pr)
              , xo = function(t) {
                function e(e, r, n, i, a, o, s, l) {
                    var c;
                    return (c = t.call(this) || this).type = "CylinderGeometry",
                    c.parameters = {
                        radiusTop: e,
                        radiusBottom: r,
                        height: n,
                        radialSegments: i,
                        heightSegments: a,
                        openEnded: o,
                        thetaStart: s,
                        thetaLength: l
                    },
                    c.fromBufferGeometry(new _o(e,r,n,i,a,o,s,l)),
                    c.mergeVertices(),
                    c
                }
                return st(e, t),
                e
            }(mo)
              , bo = function(t) {
                function e(e, r, n, i, a, o, s) {
                    var l;
                    return (l = t.call(this, 0, e, r, n, i, a, o, s) || this).type = "ConeGeometry",
                    l.parameters = {
                        radius: e,
                        height: r,
                        radialSegments: n,
                        heightSegments: i,
                        openEnded: a,
                        thetaStart: o,
                        thetaLength: s
                    },
                    l
                }
                return st(e, t),
                e
            }(xo)
              , wo = function(t) {
                function e(e, r, n, i, a, o, s) {
                    var l;
                    return (l = t.call(this, 0, e, r, n, i, a, o, s) || this).type = "ConeBufferGeometry",
                    l.parameters = {
                        radius: e,
                        height: r,
                        radialSegments: n,
                        heightSegments: i,
                        openEnded: a,
                        thetaStart: o,
                        thetaLength: s
                    },
                    l
                }
                return st(e, t),
                e
            }(_o)
              , So = function(t) {
                function e(e, r, n, i) {
                    var a;
                    (a = t.call(this) || this).type = "PolyhedronBufferGeometry",
                    a.parameters = {
                        vertices: e,
                        indices: r,
                        radius: n,
                        detail: i
                    },
                    n = n || 1;
                    var o = []
                      , s = [];
                    function l(t, e, r, n) {
                        for (var i = n + 1, a = [], o = 0; o <= i; o++) {
                            a[o] = [];
                            for (var s = t.clone().lerp(r, o / i), l = e.clone().lerp(r, o / i), h = i - o, u = 0; u <= h; u++)
                                a[o][u] = 0 === u && o === i ? s : s.clone().lerp(l, u / h)
                        }
                        for (var p = 0; p < i; p++)
                            for (var d = 0; d < 2 * (i - p) - 1; d++) {
                                var f = Math.floor(d / 2);
                                d % 2 == 0 ? (c(a[p][f + 1]),
                                c(a[p + 1][f]),
                                c(a[p][f])) : (c(a[p][f + 1]),
                                c(a[p + 1][f + 1]),
                                c(a[p + 1][f]))
                            }
                    }
                    function c(t) {
                        o.push(t.x, t.y, t.z)
                    }
                    function h(t, r) {
                        var n = 3 * t;
                        r.x = e[n + 0],
                        r.y = e[n + 1],
                        r.z = e[n + 2]
                    }
                    function u(t, e, r, n) {
                        n < 0 && 1 === t.x && (s[e] = t.x - 1),
                        0 === r.x && 0 === r.z && (s[e] = n / 2 / Math.PI + .5)
                    }
                    function p(t) {
                        return Math.atan2(t.z, -t.x)
                    }
                    function d(t) {
                        return Math.atan2(-t.y, Math.sqrt(t.x * t.x + t.z * t.z))
                    }
                    return function(t) {
                        for (var e = new _t, n = new _t, i = new _t, a = 0; a < r.length; a += 3)
                            h(r[a + 0], e),
                            h(r[a + 1], n),
                            h(r[a + 2], i),
                            l(e, n, i, t)
                    }(i = i || 0),
                    function(t) {
                        for (var e = new _t, r = 0; r < o.length; r += 3)
                            e.x = o[r + 0],
                            e.y = o[r + 1],
                            e.z = o[r + 2],
                            e.normalize().multiplyScalar(t),
                            o[r + 0] = e.x,
                            o[r + 1] = e.y,
                            o[r + 2] = e.z
                    }(n),
                    function() {
                        for (var t = new _t, e = 0; e < o.length; e += 3) {
                            t.x = o[e + 0],
                            t.y = o[e + 1],
                            t.z = o[e + 2];
                            var r = p(t) / 2 / Math.PI + .5
                              , n = d(t) / Math.PI + .5;
                            s.push(r, 1 - n)
                        }
                        (function() {
                            for (var t = new _t, e = new _t, r = new _t, n = new _t, i = new ht, a = new ht, l = new ht, c = 0, h = 0; c < o.length; c += 9,
                            h += 6) {
                                t.set(o[c + 0], o[c + 1], o[c + 2]),
                                e.set(o[c + 3], o[c + 4], o[c + 5]),
                                r.set(o[c + 6], o[c + 7], o[c + 8]),
                                i.set(s[h + 0], s[h + 1]),
                                a.set(s[h + 2], s[h + 3]),
                                l.set(s[h + 4], s[h + 5]),
                                n.copy(t).add(e).add(r).divideScalar(3);
                                var d = p(n);
                                u(i, h + 0, t, d),
                                u(a, h + 2, e, d),
                                u(l, h + 4, r, d)
                            }
                        }
                        )(),
                        function() {
                            for (var t = 0; t < s.length; t += 6) {
                                var e = s[t + 0]
                                  , r = s[t + 2]
                                  , n = s[t + 4]
                                  , i = Math.max(e, r, n)
                                  , a = Math.min(e, r, n);
                                i > .9 && a < .1 && (e < .2 && (s[t + 0] += 1),
                                r < .2 && (s[t + 2] += 1),
                                n < .2 && (s[t + 4] += 1))
                            }
                        }()
                    }(),
                    a.setAttribute("position", new er(o,3)),
                    a.setAttribute("normal", new er(o.slice(),3)),
                    a.setAttribute("uv", new er(s,2)),
                    0 === i ? a.computeVertexNormals() : a.normalizeNormals(),
                    a
                }
                return st(e, t),
                e
            }(pr)
              , To = function(t) {
                function e(e, r) {
                    var n, i = (1 + Math.sqrt(5)) / 2, a = 1 / i, o = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -a, -i, 0, -a, i, 0, a, -i, 0, a, i, -a, -i, 0, -a, i, 0, a, -i, 0, a, i, 0, -i, 0, -a, i, 0, -a, -i, 0, a, i, 0, a];
                    return (n = t.call(this, o, [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], e, r) || this).type = "DodecahedronBufferGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n
                }
                return st(e, t),
                e
            }(So)
              , Mo = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this) || this).type = "DodecahedronGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n.fromBufferGeometry(new To(e,r)),
                    n.mergeVertices(),
                    n
                }
                return st(e, t),
                e
            }(mo)
              , Eo = new _t
              , Ao = new _t
              , Po = new _t
              , Co = new Ie
              , Lo = function(t) {
                function e(e, r) {
                    var n;
                    (n = t.call(this) || this).type = "EdgesGeometry",
                    n.parameters = {
                        thresholdAngle: r
                    },
                    r = void 0 !== r ? r : 1,
                    e.isGeometry && (e = (new pr).fromGeometry(e));
                    for (var i = Math.pow(10, 4), a = Math.cos(it.DEG2RAD * r), o = e.getIndex(), s = e.getAttribute("position"), l = o ? o.count : s.count, c = [0, 0, 0], h = ["a", "b", "c"], u = new Array(3), p = {}, d = [], f = 0; f < l; f += 3) {
                        o ? (c[0] = o.getX(f),
                        c[1] = o.getX(f + 1),
                        c[2] = o.getX(f + 2)) : (c[0] = f,
                        c[1] = f + 1,
                        c[2] = f + 2);
                        var m = Co.a
                          , v = Co.b
                          , g = Co.c;
                        if (m.fromBufferAttribute(s, c[0]),
                        v.fromBufferAttribute(s, c[1]),
                        g.fromBufferAttribute(s, c[2]),
                        Co.getNormal(Po),
                        u[0] = Math.round(m.x * i) + "," + Math.round(m.y * i) + "," + Math.round(m.z * i),
                        u[1] = Math.round(v.x * i) + "," + Math.round(v.y * i) + "," + Math.round(v.z * i),
                        u[2] = Math.round(g.x * i) + "," + Math.round(g.y * i) + "," + Math.round(g.z * i),
                        u[0] !== u[1] && u[1] !== u[2] && u[2] !== u[0])
                            for (var y = 0; y < 3; y++) {
                                var _ = (y + 1) % 3
                                  , x = u[y]
                                  , b = u[_]
                                  , w = Co[h[y]]
                                  , S = Co[h[_]]
                                  , T = x + "_" + b
                                  , M = b + "_" + x;
                                M in p && p[M] ? (Po.dot(p[M].normal) <= a && (d.push(w.x, w.y, w.z),
                                d.push(S.x, S.y, S.z)),
                                p[M] = null) : T in p || (p[T] = {
                                    index0: c[y],
                                    index1: c[_],
                                    normal: Po.clone()
                                })
                            }
                    }
                    for (var E in p)
                        if (p[E]) {
                            var A = p[E]
                              , P = A.index0
                              , C = A.index1;
                            Eo.fromBufferAttribute(s, P),
                            Ao.fromBufferAttribute(s, C),
                            d.push(Eo.x, Eo.y, Eo.z),
                            d.push(Ao.x, Ao.y, Ao.z)
                        }
                    return n.setAttribute("position", new er(d,3)),
                    n
                }
                return st(e, t),
                e
            }(pr);
            function Do(t, e, r, n, i) {
                var a, o;
                if (i === function(t, e, r, n) {
                    for (var i = 0, a = e, o = r - n; a < r; a += n)
                        i += (t[o] - t[a]) * (t[a + 1] + t[o + 1]),
                        o = a;
                    return i
                }(t, e, r, n) > 0)
                    for (a = e; a < r; a += n)
                        o = Jo(a, t[a], t[a + 1], o);
                else
                    for (a = r - n; a >= e; a -= n)
                        o = Jo(a, t[a], t[a + 1], o);
                return o && qo(o, o.next) && (Qo(o),
                o = o.next),
                o
            }
            function Ro(t, e) {
                if (!t)
                    return t;
                e || (e = t);
                var r, n = t;
                do {
                    if (r = !1,
                    n.steiner || !qo(n, n.next) && 0 !== Wo(n.prev, n, n.next))
                        n = n.next;
                    else {
                        if (Qo(n),
                        (n = e = n.prev) === n.next)
                            break;
                        r = !0
                    }
                } while (r || n !== e);
                return e
            }
            function Io(t, e, r, n, i, a, o) {
                if (t) {
                    !o && a && function(t, e, r, n) {
                        var i = t;
                        do {
                            null === i.z && (i.z = Ho(i.x, i.y, e, r, n)),
                            i.prevZ = i.prev,
                            i.nextZ = i.next,
                            i = i.next
                        } while (i !== t);
                        i.prevZ.nextZ = null,
                        i.prevZ = null,
                        function(t) {
                            var e, r, n, i, a, o, s, l, c = 1;
                            do {
                                for (r = t,
                                t = null,
                                a = null,
                                o = 0; r; ) {
                                    for (o++,
                                    n = r,
                                    s = 0,
                                    e = 0; e < c && (s++,
                                    n = n.nextZ); e++)
                                        ;
                                    for (l = c; s > 0 || l > 0 && n; )
                                        0 !== s && (0 === l || !n || r.z <= n.z) ? (i = r,
                                        r = r.nextZ,
                                        s--) : (i = n,
                                        n = n.nextZ,
                                        l--),
                                        a ? a.nextZ = i : t = i,
                                        i.prevZ = a,
                                        a = i;
                                    r = n
                                }
                                a.nextZ = null,
                                c *= 2
                            } while (o > 1)
                        }(i)
                    }(t, n, i, a);
                    for (var s, l, c = t; t.prev !== t.next; )
                        if (s = t.prev,
                        l = t.next,
                        a ? Oo(t, n, i, a) : ko(t))
                            e.push(s.i / r),
                            e.push(t.i / r),
                            e.push(l.i / r),
                            Qo(t),
                            t = l.next,
                            c = l.next;
                        else if ((t = l) === c) {
                            o ? 1 === o ? Io(t = Fo(Ro(t), e, r), e, r, n, i, a, 2) : 2 === o && No(t, e, r, n, i, a) : Io(Ro(t), e, r, n, i, a, 1);
                            break
                        }
                }
            }
            function ko(t) {
                var e = t.prev
                  , r = t
                  , n = t.next;
                if (Wo(e, r, n) >= 0)
                    return !1;
                for (var i = t.next.next; i !== t.prev; ) {
                    if (Vo(e.x, e.y, r.x, r.y, n.x, n.y, i.x, i.y) && Wo(i.prev, i, i.next) >= 0)
                        return !1;
                    i = i.next
                }
                return !0
            }
            function Oo(t, e, r, n) {
                var i = t.prev
                  , a = t
                  , o = t.next;
                if (Wo(i, a, o) >= 0)
                    return !1;
                for (var s = i.x < a.x ? i.x < o.x ? i.x : o.x : a.x < o.x ? a.x : o.x, l = i.y < a.y ? i.y < o.y ? i.y : o.y : a.y < o.y ? a.y : o.y, c = i.x > a.x ? i.x > o.x ? i.x : o.x : a.x > o.x ? a.x : o.x, h = i.y > a.y ? i.y > o.y ? i.y : o.y : a.y > o.y ? a.y : o.y, u = Ho(s, l, e, r, n), p = Ho(c, h, e, r, n), d = t.prevZ, f = t.nextZ; d && d.z >= u && f && f.z <= p; ) {
                    if (d !== t.prev && d !== t.next && Vo(i.x, i.y, a.x, a.y, o.x, o.y, d.x, d.y) && Wo(d.prev, d, d.next) >= 0)
                        return !1;
                    if (d = d.prevZ,
                    f !== t.prev && f !== t.next && Vo(i.x, i.y, a.x, a.y, o.x, o.y, f.x, f.y) && Wo(f.prev, f, f.next) >= 0)
                        return !1;
                    f = f.nextZ
                }
                for (; d && d.z >= u; ) {
                    if (d !== t.prev && d !== t.next && Vo(i.x, i.y, a.x, a.y, o.x, o.y, d.x, d.y) && Wo(d.prev, d, d.next) >= 0)
                        return !1;
                    d = d.prevZ
                }
                for (; f && f.z <= p; ) {
                    if (f !== t.prev && f !== t.next && Vo(i.x, i.y, a.x, a.y, o.x, o.y, f.x, f.y) && Wo(f.prev, f, f.next) >= 0)
                        return !1;
                    f = f.nextZ
                }
                return !0
            }
            function Fo(t, e, r) {
                var n = t;
                do {
                    var i = n.prev
                      , a = n.next.next;
                    !qo(i, a) && Xo(i, n, n.next, a) && Ko(i, a) && Ko(a, i) && (e.push(i.i / r),
                    e.push(n.i / r),
                    e.push(a.i / r),
                    Qo(n),
                    Qo(n.next),
                    n = t = a),
                    n = n.next
                } while (n !== t);
                return Ro(n)
            }
            function No(t, e, r, n, i, a) {
                var o = t;
                do {
                    for (var s = o.next.next; s !== o.prev; ) {
                        if (o.i !== s.i && jo(o, s)) {
                            var l = Zo(o, s);
                            return o = Ro(o, o.next),
                            l = Ro(l, l.next),
                            Io(o, e, r, n, i, a),
                            void Io(l, e, r, n, i, a)
                        }
                        s = s.next
                    }
                    o = o.next
                } while (o !== t)
            }
            function Bo(t, e) {
                return t.x - e.x
            }
            function zo(t, e) {
                if (e = function(t, e) {
                    var r, n = e, i = t.x, a = t.y, o = -1 / 0;
                    do {
                        if (a <= n.y && a >= n.next.y && n.next.y !== n.y) {
                            var s = n.x + (a - n.y) * (n.next.x - n.x) / (n.next.y - n.y);
                            if (s <= i && s > o) {
                                if (o = s,
                                s === i) {
                                    if (a === n.y)
                                        return n;
                                    if (a === n.next.y)
                                        return n.next
                                }
                                r = n.x < n.next.x ? n : n.next
                            }
                        }
                        n = n.next
                    } while (n !== e);
                    if (!r)
                        return null;
                    if (i === o)
                        return r;
                    var l, c = r, h = r.x, u = r.y, p = 1 / 0;
                    n = r;
                    do {
                        i >= n.x && n.x >= h && i !== n.x && Vo(a < u ? i : o, a, h, u, a < u ? o : i, a, n.x, n.y) && (l = Math.abs(a - n.y) / (i - n.x),
                        Ko(n, t) && (l < p || l === p && (n.x > r.x || n.x === r.x && Go(r, n))) && (r = n,
                        p = l)),
                        n = n.next
                    } while (n !== c);
                    return r
                }(t, e),
                e) {
                    var r = Zo(e, t);
                    Ro(e, e.next),
                    Ro(r, r.next)
                }
            }
            function Go(t, e) {
                return Wo(t.prev, t, e.prev) < 0 && Wo(e.next, t, t.next) < 0
            }
            function Ho(t, e, r, n, i) {
                return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - r) * i) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - n) * i) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1
            }
            function Uo(t) {
                var e = t
                  , r = t;
                do {
                    (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e),
                    e = e.next
                } while (e !== t);
                return r
            }
            function Vo(t, e, r, n, i, a, o, s) {
                return (i - o) * (e - s) - (t - o) * (a - s) >= 0 && (t - o) * (n - s) - (r - o) * (e - s) >= 0 && (r - o) * (a - s) - (i - o) * (n - s) >= 0
            }
            function jo(t, e) {
                return t.next.i !== e.i && t.prev.i !== e.i && !function(t, e) {
                    var r = t;
                    do {
                        if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && Xo(r, r.next, t, e))
                            return !0;
                        r = r.next
                    } while (r !== t);
                    return !1
                }(t, e) && (Ko(t, e) && Ko(e, t) && function(t, e) {
                    var r = t
                      , n = !1
                      , i = (t.x + e.x) / 2
                      , a = (t.y + e.y) / 2;
                    do {
                        r.y > a != r.next.y > a && r.next.y !== r.y && i < (r.next.x - r.x) * (a - r.y) / (r.next.y - r.y) + r.x && (n = !n),
                        r = r.next
                    } while (r !== t);
                    return n
                }(t, e) && (Wo(t.prev, t, e.prev) || Wo(t, e.prev, e)) || qo(t, e) && Wo(t.prev, t, t.next) > 0 && Wo(e.prev, e, e.next) > 0)
            }
            function Wo(t, e, r) {
                return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y)
            }
            function qo(t, e) {
                return t.x === e.x && t.y === e.y
            }
            function Xo(t, e, r, n) {
                var i = $o(Wo(t, e, r))
                  , a = $o(Wo(t, e, n))
                  , o = $o(Wo(r, n, t))
                  , s = $o(Wo(r, n, e));
                return i !== a && o !== s || !(0 !== i || !Yo(t, r, e)) || !(0 !== a || !Yo(t, n, e)) || !(0 !== o || !Yo(r, t, n)) || !(0 !== s || !Yo(r, e, n))
            }
            function Yo(t, e, r) {
                return e.x <= Math.max(t.x, r.x) && e.x >= Math.min(t.x, r.x) && e.y <= Math.max(t.y, r.y) && e.y >= Math.min(t.y, r.y)
            }
            function $o(t) {
                return t > 0 ? 1 : t < 0 ? -1 : 0
            }
            function Ko(t, e) {
                return Wo(t.prev, t, t.next) < 0 ? Wo(t, e, t.next) >= 0 && Wo(t, t.prev, e) >= 0 : Wo(t, e, t.prev) < 0 || Wo(t, t.next, e) < 0
            }
            function Zo(t, e) {
                var r = new ts(t.i,t.x,t.y)
                  , n = new ts(e.i,e.x,e.y)
                  , i = t.next
                  , a = e.prev;
                return t.next = e,
                e.prev = t,
                r.next = i,
                i.prev = r,
                n.next = r,
                r.prev = n,
                a.next = n,
                n.prev = a,
                n
            }
            function Jo(t, e, r, n) {
                var i = new ts(t,e,r);
                return n ? (i.next = n.next,
                i.prev = n,
                n.next.prev = i,
                n.next = i) : (i.prev = i,
                i.next = i),
                i
            }
            function Qo(t) {
                t.next.prev = t.prev,
                t.prev.next = t.next,
                t.prevZ && (t.prevZ.nextZ = t.nextZ),
                t.nextZ && (t.nextZ.prevZ = t.prevZ)
            }
            function ts(t, e, r) {
                this.i = t,
                this.x = e,
                this.y = r,
                this.prev = null,
                this.next = null,
                this.z = null,
                this.prevZ = null,
                this.nextZ = null,
                this.steiner = !1
            }
            var es = {
                area: function(t) {
                    for (var e = t.length, r = 0, n = e - 1, i = 0; i < e; n = i++)
                        r += t[n].x * t[i].y - t[i].x * t[n].y;
                    return .5 * r
                },
                isClockWise: function(t) {
                    return es.area(t) < 0
                },
                triangulateShape: function(t, e) {
                    var r = []
                      , n = []
                      , i = [];
                    rs(t),
                    ns(r, t);
                    var a = t.length;
                    e.forEach(rs);
                    for (var o = 0; o < e.length; o++)
                        n.push(a),
                        a += e[o].length,
                        ns(r, e[o]);
                    for (var s = function(t, e, r) {
                        r = r || 2;
                        var n, i, a, o, s, l, c, h = e && e.length, u = h ? e[0] * r : t.length, p = Do(t, 0, u, r, !0), d = [];
                        if (!p || p.next === p.prev)
                            return d;
                        if (h && (p = function(t, e, r, n) {
                            var i, a, o, s = [];
                            for (i = 0,
                            a = e.length; i < a; i++)
                                (o = Do(t, e[i] * n, i < a - 1 ? e[i + 1] * n : t.length, n, !1)) === o.next && (o.steiner = !0),
                                s.push(Uo(o));
                            for (s.sort(Bo),
                            i = 0; i < s.length; i++)
                                zo(s[i], r),
                                r = Ro(r, r.next);
                            return r
                        }(t, e, p, r)),
                        t.length > 80 * r) {
                            n = a = t[0],
                            i = o = t[1];
                            for (var f = r; f < u; f += r)
                                (s = t[f]) < n && (n = s),
                                (l = t[f + 1]) < i && (i = l),
                                s > a && (a = s),
                                l > o && (o = l);
                            c = 0 !== (c = Math.max(a - n, o - i)) ? 1 / c : 0
                        }
                        return Io(p, d, r, n, i, c),
                        d
                    }(r, n), l = 0; l < s.length; l += 3)
                        i.push(s.slice(l, l + 3));
                    return i
                }
            };
            function rs(t) {
                var e = t.length;
                e > 2 && t[e - 1].equals(t[0]) && t.pop()
            }
            function ns(t, e) {
                for (var r = 0; r < e.length; r++)
                    t.push(e[r].x),
                    t.push(e[r].y)
            }
            var is = function(t) {
                function e(e, r) {
                    var n;
                    (n = t.call(this) || this).type = "ExtrudeBufferGeometry",
                    n.parameters = {
                        shapes: e,
                        options: r
                    },
                    e = Array.isArray(e) ? e : [e];
                    for (var i = lt(n), a = [], o = [], s = 0, l = e.length; s < l; s++)
                        c(e[s]);
                    function c(t) {
                        var e = []
                          , n = void 0 !== r.curveSegments ? r.curveSegments : 12
                          , s = void 0 !== r.steps ? r.steps : 1
                          , l = void 0 !== r.depth ? r.depth : 100
                          , c = void 0 === r.bevelEnabled || r.bevelEnabled
                          , h = void 0 !== r.bevelThickness ? r.bevelThickness : 6
                          , u = void 0 !== r.bevelSize ? r.bevelSize : h - 2
                          , p = void 0 !== r.bevelOffset ? r.bevelOffset : 0
                          , d = void 0 !== r.bevelSegments ? r.bevelSegments : 3
                          , f = r.extrudePath
                          , m = void 0 !== r.UVGenerator ? r.UVGenerator : as;
                        void 0 !== r.amount && (console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),
                        l = r.amount);
                        var v, g, y, _, x, b = !1;
                        f && (v = f.getSpacedPoints(s),
                        b = !0,
                        c = !1,
                        g = f.computeFrenetFrames(s, !1),
                        y = new _t,
                        _ = new _t,
                        x = new _t),
                        c || (d = 0,
                        h = 0,
                        u = 0,
                        p = 0);
                        var w = t.extractPoints(n)
                          , S = w.shape
                          , T = w.holes;
                        if (!es.isClockWise(S)) {
                            S = S.reverse();
                            for (var M = 0, E = T.length; M < E; M++) {
                                var A = T[M];
                                es.isClockWise(A) && (T[M] = A.reverse())
                            }
                        }
                        for (var P = es.triangulateShape(S, T), C = S, L = 0, D = T.length; L < D; L++) {
                            var R = T[L];
                            S = S.concat(R)
                        }
                        function I(t, e, r) {
                            return e || console.error("THREE.ExtrudeGeometry: vec does not exist"),
                            e.clone().multiplyScalar(r).add(t)
                        }
                        var k = S.length
                          , O = P.length;
                        function F(t, e, r) {
                            var n, i, a, o = t.x - e.x, s = t.y - e.y, l = r.x - t.x, c = r.y - t.y, h = o * o + s * s, u = o * c - s * l;
                            if (Math.abs(u) > Number.EPSILON) {
                                var p = Math.sqrt(h)
                                  , d = Math.sqrt(l * l + c * c)
                                  , f = e.x - s / p
                                  , m = e.y + o / p
                                  , v = ((r.x - c / d - f) * c - (r.y + l / d - m) * l) / (o * c - s * l)
                                  , g = (n = f + o * v - t.x) * n + (i = m + s * v - t.y) * i;
                                if (g <= 2)
                                    return new ht(n,i);
                                a = Math.sqrt(g / 2)
                            } else {
                                var y = !1;
                                o > Number.EPSILON ? l > Number.EPSILON && (y = !0) : o < -Number.EPSILON ? l < -Number.EPSILON && (y = !0) : Math.sign(s) === Math.sign(c) && (y = !0),
                                y ? (n = -s,
                                i = o,
                                a = Math.sqrt(h)) : (n = o,
                                i = s,
                                a = Math.sqrt(h / 2))
                            }
                            return new ht(n / a,i / a)
                        }
                        for (var N = [], B = 0, z = C.length, G = z - 1, H = B + 1; B < z; B++,
                        G++,
                        H++)
                            G === z && (G = 0),
                            H === z && (H = 0),
                            N[B] = F(C[B], C[G], C[H]);
                        for (var U, V = [], j = N.concat(), W = 0, q = T.length; W < q; W++) {
                            var X = T[W];
                            U = [];
                            for (var Y = 0, $ = X.length, K = $ - 1, Z = Y + 1; Y < $; Y++,
                            K++,
                            Z++)
                                K === $ && (K = 0),
                                Z === $ && (Z = 0),
                                U[Y] = F(X[Y], X[K], X[Z]);
                            V.push(U),
                            j = j.concat(U)
                        }
                        for (var J = 0; J < d; J++) {
                            for (var Q = J / d, tt = h * Math.cos(Q * Math.PI / 2), et = u * Math.sin(Q * Math.PI / 2) + p, rt = 0, nt = C.length; rt < nt; rt++) {
                                var it = I(C[rt], N[rt], et);
                                It(it.x, it.y, -tt)
                            }
                            for (var at = 0, ot = T.length; at < ot; at++) {
                                var st = T[at];
                                U = V[at];
                                for (var lt = 0, ct = st.length; lt < ct; lt++) {
                                    var ut = I(st[lt], U[lt], et);
                                    It(ut.x, ut.y, -tt)
                                }
                            }
                        }
                        for (var pt = u + p, dt = 0; dt < k; dt++) {
                            var ft = c ? I(S[dt], j[dt], pt) : S[dt];
                            b ? (_.copy(g.normals[0]).multiplyScalar(ft.x),
                            y.copy(g.binormals[0]).multiplyScalar(ft.y),
                            x.copy(v[0]).add(_).add(y),
                            It(x.x, x.y, x.z)) : It(ft.x, ft.y, 0)
                        }
                        for (var mt = 1; mt <= s; mt++)
                            for (var vt = 0; vt < k; vt++) {
                                var gt = c ? I(S[vt], j[vt], pt) : S[vt];
                                b ? (_.copy(g.normals[mt]).multiplyScalar(gt.x),
                                y.copy(g.binormals[mt]).multiplyScalar(gt.y),
                                x.copy(v[mt]).add(_).add(y),
                                It(x.x, x.y, x.z)) : It(gt.x, gt.y, l / s * mt)
                            }
                        for (var yt = d - 1; yt >= 0; yt--) {
                            for (var xt = yt / d, bt = h * Math.cos(xt * Math.PI / 2), wt = u * Math.sin(xt * Math.PI / 2) + p, St = 0, Tt = C.length; St < Tt; St++) {
                                var Mt = I(C[St], N[St], wt);
                                It(Mt.x, Mt.y, l + bt)
                            }
                            for (var Et = 0, At = T.length; Et < At; Et++) {
                                var Pt = T[Et];
                                U = V[Et];
                                for (var Ct = 0, Lt = Pt.length; Ct < Lt; Ct++) {
                                    var Dt = I(Pt[Ct], U[Ct], wt);
                                    b ? It(Dt.x, Dt.y + v[s - 1].y, v[s - 1].x + bt) : It(Dt.x, Dt.y, l + bt)
                                }
                            }
                        }
                        function Rt(t, e) {
                            for (var r = t.length; --r >= 0; ) {
                                var n = r
                                  , i = r - 1;
                                i < 0 && (i = t.length - 1);
                                for (var a = 0, o = s + 2 * d; a < o; a++) {
                                    var l = k * a
                                      , c = k * (a + 1);
                                    Ot(e + n + l, e + i + l, e + i + c, e + n + c)
                                }
                            }
                        }
                        function It(t, r, n) {
                            e.push(t),
                            e.push(r),
                            e.push(n)
                        }
                        function kt(t, e, r) {
                            Ft(t),
                            Ft(e),
                            Ft(r);
                            var n = a.length / 3
                              , o = m.generateTopUV(i, a, n - 3, n - 2, n - 1);
                            Nt(o[0]),
                            Nt(o[1]),
                            Nt(o[2])
                        }
                        function Ot(t, e, r, n) {
                            Ft(t),
                            Ft(e),
                            Ft(n),
                            Ft(e),
                            Ft(r),
                            Ft(n);
                            var o = a.length / 3
                              , s = m.generateSideWallUV(i, a, o - 6, o - 3, o - 2, o - 1);
                            Nt(s[0]),
                            Nt(s[1]),
                            Nt(s[3]),
                            Nt(s[1]),
                            Nt(s[2]),
                            Nt(s[3])
                        }
                        function Ft(t) {
                            a.push(e[3 * t + 0]),
                            a.push(e[3 * t + 1]),
                            a.push(e[3 * t + 2])
                        }
                        function Nt(t) {
                            o.push(t.x),
                            o.push(t.y)
                        }
                        !function() {
                            var t = a.length / 3;
                            if (c) {
                                for (var e = 0, r = k * e, n = 0; n < O; n++) {
                                    var o = P[n];
                                    kt(o[2] + r, o[1] + r, o[0] + r)
                                }
                                r = k * (e = s + 2 * d);
                                for (var l = 0; l < O; l++) {
                                    var h = P[l];
                                    kt(h[0] + r, h[1] + r, h[2] + r)
                                }
                            } else {
                                for (var u = 0; u < O; u++) {
                                    var p = P[u];
                                    kt(p[2], p[1], p[0])
                                }
                                for (var f = 0; f < O; f++) {
                                    var m = P[f];
                                    kt(m[0] + k * s, m[1] + k * s, m[2] + k * s)
                                }
                            }
                            i.addGroup(t, a.length / 3 - t, 0)
                        }(),
                        function() {
                            var t = a.length / 3
                              , e = 0;
                            Rt(C, e),
                            e += C.length;
                            for (var r = 0, n = T.length; r < n; r++) {
                                var o = T[r];
                                Rt(o, e),
                                e += o.length
                            }
                            i.addGroup(t, a.length / 3 - t, 1)
                        }()
                    }
                    return n.setAttribute("position", new er(a,3)),
                    n.setAttribute("uv", new er(o,2)),
                    n.computeVertexNormals(),
                    n
                }
                return st(e, t),
                e.prototype.toJSON = function() {
                    var t = pr.prototype.toJSON.call(this);
                    return function(t, e, r) {
                        if (r.shapes = [],
                        Array.isArray(t))
                            for (var n = 0, i = t.length; n < i; n++) {
                                var a = t[n];
                                r.shapes.push(a.uuid)
                            }
                        else
                            r.shapes.push(t.uuid);
                        return void 0 !== e.extrudePath && (r.options.extrudePath = e.extrudePath.toJSON()),
                        r
                    }(this.parameters.shapes, this.parameters.options, t)
                }
                ,
                e
            }(pr)
              , as = {
                generateTopUV: function(t, e, r, n, i) {
                    var a = e[3 * r]
                      , o = e[3 * r + 1]
                      , s = e[3 * n]
                      , l = e[3 * n + 1]
                      , c = e[3 * i]
                      , h = e[3 * i + 1];
                    return [new ht(a,o), new ht(s,l), new ht(c,h)]
                },
                generateSideWallUV: function(t, e, r, n, i, a) {
                    var o = e[3 * r]
                      , s = e[3 * r + 1]
                      , l = e[3 * r + 2]
                      , c = e[3 * n]
                      , h = e[3 * n + 1]
                      , u = e[3 * n + 2]
                      , p = e[3 * i]
                      , d = e[3 * i + 1]
                      , f = e[3 * i + 2]
                      , m = e[3 * a]
                      , v = e[3 * a + 1]
                      , g = e[3 * a + 2];
                    return Math.abs(s - h) < .01 ? [new ht(o,1 - l), new ht(c,1 - u), new ht(p,1 - f), new ht(m,1 - g)] : [new ht(s,1 - l), new ht(h,1 - u), new ht(d,1 - f), new ht(v,1 - g)]
                }
            }
              , os = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this) || this).type = "ExtrudeGeometry",
                    n.parameters = {
                        shapes: e,
                        options: r
                    },
                    n.fromBufferGeometry(new is(e,r)),
                    n.mergeVertices(),
                    n
                }
                return st(e, t),
                e.prototype.toJSON = function() {
                    var e = t.prototype.toJSON.call(this);
                    return function(t, e, r) {
                        if (r.shapes = [],
                        Array.isArray(t))
                            for (var n = 0, i = t.length; n < i; n++) {
                                var a = t[n];
                                r.shapes.push(a.uuid)
                            }
                        else
                            r.shapes.push(t.uuid);
                        return void 0 !== e.extrudePath && (r.options.extrudePath = e.extrudePath.toJSON()),
                        r
                    }(this.parameters.shapes, this.parameters.options, e)
                }
                ,
                e
            }(mo)
              , ss = function(t) {
                function e(e, r) {
                    var n, i = (1 + Math.sqrt(5)) / 2, a = [-1, i, 0, 1, i, 0, -1, -i, 0, 1, -i, 0, 0, -1, i, 0, 1, i, 0, -1, -i, 0, 1, -i, i, 0, -1, i, 0, 1, -i, 0, -1, -i, 0, 1];
                    return (n = t.call(this, a, [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], e, r) || this).type = "IcosahedronBufferGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n
                }
                return st(e, t),
                e
            }(So)
              , ls = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this) || this).type = "IcosahedronGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n.fromBufferGeometry(new ss(e,r)),
                    n.mergeVertices(),
                    n
                }
                return st(e, t),
                e
            }(mo)
              , cs = function(t) {
                function e(e, r, n, i) {
                    var a;
                    (a = t.call(this) || this).type = "LatheBufferGeometry",
                    a.parameters = {
                        points: e,
                        segments: r,
                        phiStart: n,
                        phiLength: i
                    },
                    r = Math.floor(r) || 12,
                    n = n || 0,
                    i = i || 2 * Math.PI,
                    i = it.clamp(i, 0, 2 * Math.PI);
                    for (var o = [], s = [], l = [], c = 1 / r, h = new _t, u = new ht, p = 0; p <= r; p++)
                        for (var d = n + p * c * i, f = Math.sin(d), m = Math.cos(d), v = 0; v <= e.length - 1; v++)
                            h.x = e[v].x * f,
                            h.y = e[v].y,
                            h.z = e[v].x * m,
                            s.push(h.x, h.y, h.z),
                            u.x = p / r,
                            u.y = v / (e.length - 1),
                            l.push(u.x, u.y);
                    for (var g = 0; g < r; g++)
                        for (var y = 0; y < e.length - 1; y++) {
                            var _ = y + g * e.length
                              , x = _
                              , b = _ + e.length
                              , w = _ + e.length + 1
                              , S = _ + 1;
                            o.push(x, b, S),
                            o.push(b, w, S)
                        }
                    if (a.setIndex(o),
                    a.setAttribute("position", new er(s,3)),
                    a.setAttribute("uv", new er(l,2)),
                    a.computeVertexNormals(),
                    i === 2 * Math.PI)
                        for (var T = a.attributes.normal.array, M = new _t, E = new _t, A = new _t, P = r * e.length * 3, C = 0, L = 0; C < e.length; C++,
                        L += 3)
                            M.x = T[L + 0],
                            M.y = T[L + 1],
                            M.z = T[L + 2],
                            E.x = T[P + L + 0],
                            E.y = T[P + L + 1],
                            E.z = T[P + L + 2],
                            A.addVectors(M, E).normalize(),
                            T[L + 0] = T[P + L + 0] = A.x,
                            T[L + 1] = T[P + L + 1] = A.y,
                            T[L + 2] = T[P + L + 2] = A.z;
                    return a
                }
                return st(e, t),
                e
            }(pr)
              , hs = function(t) {
                function e(e, r, n, i) {
                    var a;
                    return (a = t.call(this) || this).type = "LatheGeometry",
                    a.parameters = {
                        points: e,
                        segments: r,
                        phiStart: n,
                        phiLength: i
                    },
                    a.fromBufferGeometry(new cs(e,r,n,i)),
                    a.mergeVertices(),
                    a
                }
                return st(e, t),
                e
            }(mo)
              , us = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], e, r) || this).type = "OctahedronBufferGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n
                }
                return st(e, t),
                e
            }(So)
              , ps = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this) || this).type = "OctahedronGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n.fromBufferGeometry(new us(e,r)),
                    n.mergeVertices(),
                    n
                }
                return st(e, t),
                e
            }(mo);
            function ds(t, e, r) {
                pr.call(this),
                this.type = "ParametricBufferGeometry",
                this.parameters = {
                    func: t,
                    slices: e,
                    stacks: r
                };
                var n = []
                  , i = []
                  , a = []
                  , o = []
                  , s = 1e-5
                  , l = new _t
                  , c = new _t
                  , h = new _t
                  , u = new _t
                  , p = new _t;
                t.length < 3 && console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");
                for (var d = e + 1, f = 0; f <= r; f++)
                    for (var m = f / r, v = 0; v <= e; v++) {
                        var g = v / e;
                        t(g, m, c),
                        i.push(c.x, c.y, c.z),
                        g - s >= 0 ? (t(g - s, m, h),
                        u.subVectors(c, h)) : (t(g + s, m, h),
                        u.subVectors(h, c)),
                        m - s >= 0 ? (t(g, m - s, h),
                        p.subVectors(c, h)) : (t(g, m + s, h),
                        p.subVectors(h, c)),
                        l.crossVectors(u, p).normalize(),
                        a.push(l.x, l.y, l.z),
                        o.push(g, m)
                    }
                for (var y = 0; y < r; y++)
                    for (var _ = 0; _ < e; _++) {
                        var x = y * d + _
                          , b = y * d + _ + 1
                          , w = (y + 1) * d + _ + 1
                          , S = (y + 1) * d + _;
                        n.push(x, b, S),
                        n.push(b, w, S)
                    }
                this.setIndex(n),
                this.setAttribute("position", new er(i,3)),
                this.setAttribute("normal", new er(a,3)),
                this.setAttribute("uv", new er(o,2))
            }
            function fs(t, e, r) {
                mo.call(this),
                this.type = "ParametricGeometry",
                this.parameters = {
                    func: t,
                    slices: e,
                    stacks: r
                },
                this.fromBufferGeometry(new ds(t,e,r)),
                this.mergeVertices()
            }
            ds.prototype = Object.create(pr.prototype),
            ds.prototype.constructor = ds,
            fs.prototype = Object.create(mo.prototype),
            fs.prototype.constructor = fs;
            var ms = function(t) {
                function e(e, r, n, i) {
                    var a;
                    return (a = t.call(this) || this).type = "PlaneGeometry",
                    a.parameters = {
                        width: e,
                        height: r,
                        widthSegments: n,
                        heightSegments: i
                    },
                    a.fromBufferGeometry(new Kr(e,r,n,i)),
                    a.mergeVertices(),
                    a
                }
                return st(e, t),
                e
            }(mo)
              , vs = function(t) {
                function e(e, r, n, i) {
                    var a;
                    return (a = t.call(this) || this).type = "PolyhedronGeometry",
                    a.parameters = {
                        vertices: e,
                        indices: r,
                        radius: n,
                        detail: i
                    },
                    a.fromBufferGeometry(new So(e,r,n,i)),
                    a.mergeVertices(),
                    a
                }
                return st(e, t),
                e
            }(mo)
              , gs = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    (s = t.call(this) || this).type = "RingBufferGeometry",
                    s.parameters = {
                        innerRadius: e,
                        outerRadius: r,
                        thetaSegments: n,
                        phiSegments: i,
                        thetaStart: a,
                        thetaLength: o
                    },
                    e = e || .5,
                    r = r || 1,
                    a = void 0 !== a ? a : 0,
                    o = void 0 !== o ? o : 2 * Math.PI,
                    n = void 0 !== n ? Math.max(3, n) : 8;
                    for (var l = [], c = [], h = [], u = [], p = e, d = (r - e) / (i = void 0 !== i ? Math.max(1, i) : 1), f = new _t, m = new ht, v = 0; v <= i; v++) {
                        for (var g = 0; g <= n; g++) {
                            var y = a + g / n * o;
                            f.x = p * Math.cos(y),
                            f.y = p * Math.sin(y),
                            c.push(f.x, f.y, f.z),
                            h.push(0, 0, 1),
                            m.x = (f.x / r + 1) / 2,
                            m.y = (f.y / r + 1) / 2,
                            u.push(m.x, m.y)
                        }
                        p += d
                    }
                    for (var _ = 0; _ < i; _++)
                        for (var x = _ * (n + 1), b = 0; b < n; b++) {
                            var w = b + x
                              , S = w
                              , T = w + n + 1
                              , M = w + n + 2
                              , E = w + 1;
                            l.push(S, T, E),
                            l.push(T, M, E)
                        }
                    return s.setIndex(l),
                    s.setAttribute("position", new er(c,3)),
                    s.setAttribute("normal", new er(h,3)),
                    s.setAttribute("uv", new er(u,2)),
                    s
                }
                return st(e, t),
                e
            }(pr)
              , ys = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    return (s = t.call(this) || this).type = "RingGeometry",
                    s.parameters = {
                        innerRadius: e,
                        outerRadius: r,
                        thetaSegments: n,
                        phiSegments: i,
                        thetaStart: a,
                        thetaLength: o
                    },
                    s.fromBufferGeometry(new gs(e,r,n,i,a,o)),
                    s.mergeVertices(),
                    s
                }
                return st(e, t),
                e
            }(mo)
              , _s = function(t) {
                function e(e, r) {
                    var n;
                    (n = t.call(this) || this).type = "ShapeBufferGeometry",
                    n.parameters = {
                        shapes: e,
                        curveSegments: r
                    },
                    r = r || 12;
                    var i = []
                      , a = []
                      , o = []
                      , s = []
                      , l = 0
                      , c = 0;
                    if (!1 === Array.isArray(e))
                        u(e);
                    else
                        for (var h = 0; h < e.length; h++)
                            u(e[h]),
                            n.addGroup(l, c, h),
                            l += c,
                            c = 0;
                    function u(t) {
                        var e = a.length / 3
                          , n = t.extractPoints(r)
                          , l = n.shape
                          , h = n.holes;
                        !1 === es.isClockWise(l) && (l = l.reverse());
                        for (var u = 0, p = h.length; u < p; u++) {
                            var d = h[u];
                            !0 === es.isClockWise(d) && (h[u] = d.reverse())
                        }
                        for (var f = es.triangulateShape(l, h), m = 0, v = h.length; m < v; m++) {
                            var g = h[m];
                            l = l.concat(g)
                        }
                        for (var y = 0, _ = l.length; y < _; y++) {
                            var x = l[y];
                            a.push(x.x, x.y, 0),
                            o.push(0, 0, 1),
                            s.push(x.x, x.y)
                        }
                        for (var b = 0, w = f.length; b < w; b++) {
                            var S = f[b]
                              , T = S[0] + e
                              , M = S[1] + e
                              , E = S[2] + e;
                            i.push(T, M, E),
                            c += 3
                        }
                    }
                    return n.setIndex(i),
                    n.setAttribute("position", new er(a,3)),
                    n.setAttribute("normal", new er(o,3)),
                    n.setAttribute("uv", new er(s,2)),
                    n
                }
                return st(e, t),
                e.prototype.toJSON = function() {
                    var t = pr.prototype.toJSON.call(this);
                    return function(t, e) {
                        if (e.shapes = [],
                        Array.isArray(t))
                            for (var r = 0, n = t.length; r < n; r++) {
                                var i = t[r];
                                e.shapes.push(i.uuid)
                            }
                        else
                            e.shapes.push(t.uuid);
                        return e
                    }(this.parameters.shapes, t)
                }
                ,
                e
            }(pr)
              , xs = function(t) {
                function e(e, r) {
                    var i;
                    return (i = t.call(this) || this).type = "ShapeGeometry",
                    "object" === n(r) && (console.warn("THREE.ShapeGeometry: Options parameter has been removed."),
                    r = r.curveSegments),
                    i.parameters = {
                        shapes: e,
                        curveSegments: r
                    },
                    i.fromBufferGeometry(new _s(e,r)),
                    i.mergeVertices(),
                    i
                }
                return st(e, t),
                e.prototype.toJSON = function() {
                    var t = mo.prototype.toJSON.call(this);
                    return function(t, e) {
                        if (e.shapes = [],
                        Array.isArray(t))
                            for (var r = 0, n = t.length; r < n; r++) {
                                var i = t[r];
                                e.shapes.push(i.uuid)
                            }
                        else
                            e.shapes.push(t.uuid);
                        return e
                    }(this.parameters.shapes, t)
                }
                ,
                e
            }(mo)
              , bs = function(t) {
                function e(e, r, n, i, a, o, s) {
                    var l;
                    (l = t.call(this) || this).type = "SphereBufferGeometry",
                    l.parameters = {
                        radius: e,
                        widthSegments: r,
                        heightSegments: n,
                        phiStart: i,
                        phiLength: a,
                        thetaStart: o,
                        thetaLength: s
                    },
                    e = e || 1,
                    r = Math.max(3, Math.floor(r) || 8),
                    n = Math.max(2, Math.floor(n) || 6),
                    i = void 0 !== i ? i : 0,
                    a = void 0 !== a ? a : 2 * Math.PI,
                    o = void 0 !== o ? o : 0,
                    s = void 0 !== s ? s : Math.PI;
                    for (var c = Math.min(o + s, Math.PI), h = 0, u = [], p = new _t, d = new _t, f = [], m = [], v = [], g = [], y = 0; y <= n; y++) {
                        var _ = []
                          , x = y / n
                          , b = 0;
                        0 == y && 0 == o ? b = .5 / r : y == n && c == Math.PI && (b = -.5 / r);
                        for (var w = 0; w <= r; w++) {
                            var S = w / r;
                            p.x = -e * Math.cos(i + S * a) * Math.sin(o + x * s),
                            p.y = e * Math.cos(o + x * s),
                            p.z = e * Math.sin(i + S * a) * Math.sin(o + x * s),
                            m.push(p.x, p.y, p.z),
                            d.copy(p).normalize(),
                            v.push(d.x, d.y, d.z),
                            g.push(S + b, 1 - x),
                            _.push(h++)
                        }
                        u.push(_)
                    }
                    for (var T = 0; T < n; T++)
                        for (var M = 0; M < r; M++) {
                            var E = u[T][M + 1]
                              , A = u[T][M]
                              , P = u[T + 1][M]
                              , C = u[T + 1][M + 1];
                            (0 !== T || o > 0) && f.push(E, A, C),
                            (T !== n - 1 || c < Math.PI) && f.push(A, P, C)
                        }
                    return l.setIndex(f),
                    l.setAttribute("position", new er(m,3)),
                    l.setAttribute("normal", new er(v,3)),
                    l.setAttribute("uv", new er(g,2)),
                    l
                }
                return st(e, t),
                e
            }(pr)
              , ws = function(t) {
                function e(e, r, n, i, a, o, s) {
                    var l;
                    return (l = t.call(this) || this).type = "SphereGeometry",
                    l.parameters = {
                        radius: e,
                        widthSegments: r,
                        heightSegments: n,
                        phiStart: i,
                        phiLength: a,
                        thetaStart: o,
                        thetaLength: s
                    },
                    l.fromBufferGeometry(new bs(e,r,n,i,a,o,s)),
                    l.mergeVertices(),
                    l
                }
                return st(e, t),
                e
            }(mo)
              , Ss = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], e, r) || this).type = "TetrahedronBufferGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n
                }
                return st(e, t),
                e
            }(So)
              , Ts = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this) || this).type = "TetrahedronGeometry",
                    n.parameters = {
                        radius: e,
                        detail: r
                    },
                    n.fromBufferGeometry(new Ss(e,r)),
                    n.mergeVertices(),
                    n
                }
                return st(e, t),
                e
            }(mo)
              , Ms = function(t) {
                function e(e, r) {
                    var n, i = (r = r || {}).font;
                    if (!i || !i.isFont)
                        return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),
                        new pr || lt(n);
                    var a = i.generateShapes(e, r.size);
                    return r.depth = void 0 !== r.height ? r.height : 50,
                    void 0 === r.bevelThickness && (r.bevelThickness = 10),
                    void 0 === r.bevelSize && (r.bevelSize = 8),
                    void 0 === r.bevelEnabled && (r.bevelEnabled = !1),
                    (n = t.call(this, a, r) || this).type = "TextBufferGeometry",
                    n
                }
                return st(e, t),
                e
            }(is)
              , Es = function(t) {
                function e(e, r) {
                    var n;
                    return (n = t.call(this) || this).type = "TextGeometry",
                    n.parameters = {
                        text: e,
                        parameters: r
                    },
                    n.fromBufferGeometry(new Ms(e,r)),
                    n.mergeVertices(),
                    n
                }
                return st(e, t),
                e
            }(mo)
              , As = function(t) {
                function e(e, r, n, i, a) {
                    var o;
                    (o = t.call(this) || this).type = "TorusBufferGeometry",
                    o.parameters = {
                        radius: e,
                        tube: r,
                        radialSegments: n,
                        tubularSegments: i,
                        arc: a
                    },
                    e = e || 1,
                    r = r || .4,
                    n = Math.floor(n) || 8,
                    i = Math.floor(i) || 6,
                    a = a || 2 * Math.PI;
                    for (var s = [], l = [], c = [], h = [], u = new _t, p = new _t, d = new _t, f = 0; f <= n; f++)
                        for (var m = 0; m <= i; m++) {
                            var v = m / i * a
                              , g = f / n * Math.PI * 2;
                            p.x = (e + r * Math.cos(g)) * Math.cos(v),
                            p.y = (e + r * Math.cos(g)) * Math.sin(v),
                            p.z = r * Math.sin(g),
                            l.push(p.x, p.y, p.z),
                            u.x = e * Math.cos(v),
                            u.y = e * Math.sin(v),
                            d.subVectors(p, u).normalize(),
                            c.push(d.x, d.y, d.z),
                            h.push(m / i),
                            h.push(f / n)
                        }
                    for (var y = 1; y <= n; y++)
                        for (var _ = 1; _ <= i; _++) {
                            var x = (i + 1) * y + _ - 1
                              , b = (i + 1) * (y - 1) + _ - 1
                              , w = (i + 1) * (y - 1) + _
                              , S = (i + 1) * y + _;
                            s.push(x, b, S),
                            s.push(b, w, S)
                        }
                    return o.setIndex(s),
                    o.setAttribute("position", new er(l,3)),
                    o.setAttribute("normal", new er(c,3)),
                    o.setAttribute("uv", new er(h,2)),
                    o
                }
                return st(e, t),
                e
            }(pr)
              , Ps = function(t) {
                function e(e, r, n, i, a) {
                    var o;
                    return (o = t.call(this) || this).type = "TorusGeometry",
                    o.parameters = {
                        radius: e,
                        tube: r,
                        radialSegments: n,
                        tubularSegments: i,
                        arc: a
                    },
                    o.fromBufferGeometry(new As(e,r,n,i,a)),
                    o.mergeVertices(),
                    o
                }
                return st(e, t),
                e
            }(mo)
              , Cs = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    (s = t.call(this) || this).type = "TorusKnotBufferGeometry",
                    s.parameters = {
                        radius: e,
                        tube: r,
                        tubularSegments: n,
                        radialSegments: i,
                        p: a,
                        q: o
                    },
                    e = e || 1,
                    r = r || .4,
                    n = Math.floor(n) || 64,
                    i = Math.floor(i) || 8,
                    a = a || 2,
                    o = o || 3;
                    for (var l = [], c = [], h = [], u = [], p = new _t, d = new _t, f = new _t, m = new _t, v = new _t, g = new _t, y = new _t, _ = 0; _ <= n; ++_) {
                        var x = _ / n * a * Math.PI * 2;
                        D(x, a, o, e, f),
                        D(x + .01, a, o, e, m),
                        g.subVectors(m, f),
                        y.addVectors(m, f),
                        v.crossVectors(g, y),
                        y.crossVectors(v, g),
                        v.normalize(),
                        y.normalize();
                        for (var b = 0; b <= i; ++b) {
                            var w = b / i * Math.PI * 2
                              , S = -r * Math.cos(w)
                              , T = r * Math.sin(w);
                            p.x = f.x + (S * y.x + T * v.x),
                            p.y = f.y + (S * y.y + T * v.y),
                            p.z = f.z + (S * y.z + T * v.z),
                            c.push(p.x, p.y, p.z),
                            d.subVectors(p, f).normalize(),
                            h.push(d.x, d.y, d.z),
                            u.push(_ / n),
                            u.push(b / i)
                        }
                    }
                    for (var M = 1; M <= n; M++)
                        for (var E = 1; E <= i; E++) {
                            var A = (i + 1) * (M - 1) + (E - 1)
                              , P = (i + 1) * M + (E - 1)
                              , C = (i + 1) * M + E
                              , L = (i + 1) * (M - 1) + E;
                            l.push(A, P, L),
                            l.push(P, C, L)
                        }
                    function D(t, e, r, n, i) {
                        var a = Math.cos(t)
                          , o = Math.sin(t)
                          , s = r / e * t
                          , l = Math.cos(s);
                        i.x = n * (2 + l) * .5 * a,
                        i.y = n * (2 + l) * o * .5,
                        i.z = n * Math.sin(s) * .5
                    }
                    return s.setIndex(l),
                    s.setAttribute("position", new er(c,3)),
                    s.setAttribute("normal", new er(h,3)),
                    s.setAttribute("uv", new er(u,2)),
                    s
                }
                return st(e, t),
                e
            }(pr)
              , Ls = function(t) {
                function e(e, r, n, i, a, o, s) {
                    var l;
                    return (l = t.call(this) || this).type = "TorusKnotGeometry",
                    l.parameters = {
                        radius: e,
                        tube: r,
                        tubularSegments: n,
                        radialSegments: i,
                        p: a,
                        q: o
                    },
                    void 0 !== s && console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),
                    l.fromBufferGeometry(new Cs(e,r,n,i,a,o)),
                    l.mergeVertices(),
                    l
                }
                return st(e, t),
                e
            }(mo)
              , Ds = function(t) {
                function e(e, r, n, i, a) {
                    var o;
                    (o = t.call(this) || this).type = "TubeBufferGeometry",
                    o.parameters = {
                        path: e,
                        tubularSegments: r,
                        radius: n,
                        radialSegments: i,
                        closed: a
                    },
                    r = r || 64,
                    n = n || 1,
                    i = i || 8,
                    a = a || !1;
                    var s = e.computeFrenetFrames(r, a);
                    o.tangents = s.tangents,
                    o.normals = s.normals,
                    o.binormals = s.binormals;
                    var l = new _t
                      , c = new _t
                      , h = new ht
                      , u = new _t
                      , p = []
                      , d = []
                      , f = []
                      , m = [];
                    function v(t) {
                        u = e.getPointAt(t / r, u);
                        for (var a = s.normals[t], o = s.binormals[t], h = 0; h <= i; h++) {
                            var f = h / i * Math.PI * 2
                              , m = Math.sin(f)
                              , v = -Math.cos(f);
                            c.x = v * a.x + m * o.x,
                            c.y = v * a.y + m * o.y,
                            c.z = v * a.z + m * o.z,
                            c.normalize(),
                            d.push(c.x, c.y, c.z),
                            l.x = u.x + n * c.x,
                            l.y = u.y + n * c.y,
                            l.z = u.z + n * c.z,
                            p.push(l.x, l.y, l.z)
                        }
                    }
                    return function() {
                        for (var t = 0; t < r; t++)
                            v(t);
                        v(!1 === a ? r : 0),
                        function() {
                            for (var t = 0; t <= r; t++)
                                for (var e = 0; e <= i; e++)
                                    h.x = t / r,
                                    h.y = e / i,
                                    f.push(h.x, h.y)
                        }(),
                        function() {
                            for (var t = 1; t <= r; t++)
                                for (var e = 1; e <= i; e++) {
                                    var n = (i + 1) * (t - 1) + (e - 1)
                                      , a = (i + 1) * t + (e - 1)
                                      , o = (i + 1) * t + e
                                      , s = (i + 1) * (t - 1) + e;
                                    m.push(n, a, s),
                                    m.push(a, o, s)
                                }
                        }()
                    }(),
                    o.setIndex(m),
                    o.setAttribute("position", new er(p,3)),
                    o.setAttribute("normal", new er(d,3)),
                    o.setAttribute("uv", new er(f,2)),
                    o
                }
                return st(e, t),
                e.prototype.toJSON = function() {
                    var t = pr.prototype.toJSON.call(this);
                    return t.path = this.parameters.path.toJSON(),
                    t
                }
                ,
                e
            }(pr)
              , Rs = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    (s = t.call(this) || this).type = "TubeGeometry",
                    s.parameters = {
                        path: e,
                        tubularSegments: r,
                        radius: n,
                        radialSegments: i,
                        closed: a
                    },
                    void 0 !== o && console.warn("THREE.TubeGeometry: taper has been removed.");
                    var l = new Ds(e,r,n,i,a);
                    return s.tangents = l.tangents,
                    s.normals = l.normals,
                    s.binormals = l.binormals,
                    s.fromBufferGeometry(l),
                    s.mergeVertices(),
                    s
                }
                return st(e, t),
                e
            }(mo)
              , Is = function(t) {
                function e(e) {
                    var r;
                    (r = t.call(this) || this).type = "WireframeGeometry";
                    var n = []
                      , i = [0, 0]
                      , a = {}
                      , o = ["a", "b", "c"];
                    if (e && e.isGeometry) {
                        for (var s = e.faces, l = 0, c = s.length; l < c; l++)
                            for (var h = s[l], u = 0; u < 3; u++) {
                                var p = h[o[u]]
                                  , d = h[o[(u + 1) % 3]];
                                i[0] = Math.min(p, d),
                                i[1] = Math.max(p, d);
                                var f = i[0] + "," + i[1];
                                void 0 === a[f] && (a[f] = {
                                    index1: i[0],
                                    index2: i[1]
                                })
                            }
                        for (var m in a) {
                            var v = a[m]
                              , g = e.vertices[v.index1];
                            n.push(g.x, g.y, g.z),
                            g = e.vertices[v.index2],
                            n.push(g.x, g.y, g.z)
                        }
                    } else if (e && e.isBufferGeometry) {
                        var y = new _t;
                        if (null !== e.index) {
                            var _ = e.attributes.position
                              , x = e.index
                              , b = e.groups;
                            0 === b.length && (b = [{
                                start: 0,
                                count: x.count,
                                materialIndex: 0
                            }]);
                            for (var w = 0, S = b.length; w < S; ++w)
                                for (var T = b[w], M = T.start, E = M, A = M + T.count; E < A; E += 3)
                                    for (var P = 0; P < 3; P++) {
                                        var C = x.getX(E + P)
                                          , L = x.getX(E + (P + 1) % 3);
                                        i[0] = Math.min(C, L),
                                        i[1] = Math.max(C, L);
                                        var D = i[0] + "," + i[1];
                                        void 0 === a[D] && (a[D] = {
                                            index1: i[0],
                                            index2: i[1]
                                        })
                                    }
                            for (var R in a) {
                                var I = a[R];
                                y.fromBufferAttribute(_, I.index1),
                                n.push(y.x, y.y, y.z),
                                y.fromBufferAttribute(_, I.index2),
                                n.push(y.x, y.y, y.z)
                            }
                        } else
                            for (var k = e.attributes.position, O = 0, F = k.count / 3; O < F; O++)
                                for (var N = 0; N < 3; N++) {
                                    var B = 3 * O + N;
                                    y.fromBufferAttribute(k, B),
                                    n.push(y.x, y.y, y.z);
                                    var z = 3 * O + (N + 1) % 3;
                                    y.fromBufferAttribute(k, z),
                                    n.push(y.x, y.y, y.z)
                                }
                    }
                    return r.setAttribute("position", new er(n,3)),
                    r
                }
                return st(e, t),
                e
            }(pr)
              , ks = Object.freeze({
                __proto__: null,
                BoxGeometry: vo,
                BoxBufferGeometry: Ir,
                CircleGeometry: yo,
                CircleBufferGeometry: go,
                ConeGeometry: bo,
                ConeBufferGeometry: wo,
                CylinderGeometry: xo,
                CylinderBufferGeometry: _o,
                DodecahedronGeometry: Mo,
                DodecahedronBufferGeometry: To,
                EdgesGeometry: Lo,
                ExtrudeGeometry: os,
                ExtrudeBufferGeometry: is,
                IcosahedronGeometry: ls,
                IcosahedronBufferGeometry: ss,
                LatheGeometry: hs,
                LatheBufferGeometry: cs,
                OctahedronGeometry: ps,
                OctahedronBufferGeometry: us,
                ParametricGeometry: fs,
                ParametricBufferGeometry: ds,
                PlaneGeometry: ms,
                PlaneBufferGeometry: Kr,
                PolyhedronGeometry: vs,
                PolyhedronBufferGeometry: So,
                RingGeometry: ys,
                RingBufferGeometry: gs,
                ShapeGeometry: xs,
                ShapeBufferGeometry: _s,
                SphereGeometry: ws,
                SphereBufferGeometry: bs,
                TetrahedronGeometry: Ts,
                TetrahedronBufferGeometry: Ss,
                TextGeometry: Es,
                TextBufferGeometry: Ms,
                TorusGeometry: Ps,
                TorusBufferGeometry: As,
                TorusKnotGeometry: Ls,
                TorusKnotBufferGeometry: Cs,
                TubeGeometry: Rs,
                TubeBufferGeometry: Ds,
                WireframeGeometry: Is
            });
            function Os(t) {
                Ve.call(this),
                this.type = "ShadowMaterial",
                this.color = new Ge(0),
                this.transparent = !0,
                this.setValues(t)
            }
            function Fs(t) {
                Nr.call(this, t),
                this.type = "RawShaderMaterial"
            }
            function Ns(t) {
                Ve.call(this),
                this.defines = {
                    STANDARD: ""
                },
                this.type = "MeshStandardMaterial",
                this.color = new Ge(16777215),
                this.roughness = 1,
                this.metalness = 0,
                this.map = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.emissive = new Ge(0),
                this.emissiveIntensity = 1,
                this.emissiveMap = null,
                this.bumpMap = null,
                this.bumpScale = 1,
                this.normalMap = null,
                this.normalMapType = 0,
                this.normalScale = new ht(1,1),
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.roughnessMap = null,
                this.metalnessMap = null,
                this.alphaMap = null,
                this.envMap = null,
                this.envMapIntensity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.vertexTangents = !1,
                this.setValues(t)
            }
            function Bs(t) {
                Ns.call(this),
                this.defines = {
                    STANDARD: "",
                    PHYSICAL: ""
                },
                this.type = "MeshPhysicalMaterial",
                this.clearcoat = 0,
                this.clearcoatMap = null,
                this.clearcoatRoughness = 0,
                this.clearcoatRoughnessMap = null,
                this.clearcoatNormalScale = new ht(1,1),
                this.clearcoatNormalMap = null,
                this.reflectivity = .5,
                Object.defineProperty(this, "ior", {
                    get: function() {
                        return (1 + .4 * this.reflectivity) / (1 - .4 * this.reflectivity)
                    },
                    set: function(t) {
                        this.reflectivity = it.clamp(2.5 * (t - 1) / (t + 1), 0, 1)
                    }
                }),
                this.sheen = null,
                this.transmission = 0,
                this.transmissionMap = null,
                this.setValues(t)
            }
            function zs(t) {
                Ve.call(this),
                this.type = "MeshPhongMaterial",
                this.color = new Ge(16777215),
                this.specular = new Ge(1118481),
                this.shininess = 30,
                this.map = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.emissive = new Ge(0),
                this.emissiveIntensity = 1,
                this.emissiveMap = null,
                this.bumpMap = null,
                this.bumpScale = 1,
                this.normalMap = null,
                this.normalMapType = 0,
                this.normalScale = new ht(1,1),
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.specularMap = null,
                this.alphaMap = null,
                this.envMap = null,
                this.combine = 0,
                this.reflectivity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(t)
            }
            function Gs(t) {
                Ve.call(this),
                this.defines = {
                    TOON: ""
                },
                this.type = "MeshToonMaterial",
                this.color = new Ge(16777215),
                this.map = null,
                this.gradientMap = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.emissive = new Ge(0),
                this.emissiveIntensity = 1,
                this.emissiveMap = null,
                this.bumpMap = null,
                this.bumpScale = 1,
                this.normalMap = null,
                this.normalMapType = 0,
                this.normalScale = new ht(1,1),
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.alphaMap = null,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(t)
            }
            function Hs(t) {
                Ve.call(this),
                this.type = "MeshNormalMaterial",
                this.bumpMap = null,
                this.bumpScale = 1,
                this.normalMap = null,
                this.normalMapType = 0,
                this.normalScale = new ht(1,1),
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.fog = !1,
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(t)
            }
            function Us(t) {
                Ve.call(this),
                this.type = "MeshLambertMaterial",
                this.color = new Ge(16777215),
                this.map = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.emissive = new Ge(0),
                this.emissiveIntensity = 1,
                this.emissiveMap = null,
                this.specularMap = null,
                this.alphaMap = null,
                this.envMap = null,
                this.combine = 0,
                this.reflectivity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(t)
            }
            function Vs(t) {
                Ve.call(this),
                this.defines = {
                    MATCAP: ""
                },
                this.type = "MeshMatcapMaterial",
                this.color = new Ge(16777215),
                this.matcap = null,
                this.map = null,
                this.bumpMap = null,
                this.bumpScale = 1,
                this.normalMap = null,
                this.normalMapType = 0,
                this.normalScale = new ht(1,1),
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.alphaMap = null,
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(t)
            }
            function js(t) {
                Ua.call(this),
                this.type = "LineDashedMaterial",
                this.scale = 1,
                this.dashSize = 3,
                this.gapSize = 1,
                this.setValues(t)
            }
            Os.prototype = Object.create(Ve.prototype),
            Os.prototype.constructor = Os,
            Os.prototype.isShadowMaterial = !0,
            Os.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this
            }
            ,
            Fs.prototype = Object.create(Nr.prototype),
            Fs.prototype.constructor = Fs,
            Fs.prototype.isRawShaderMaterial = !0,
            Ns.prototype = Object.create(Ve.prototype),
            Ns.prototype.constructor = Ns,
            Ns.prototype.isMeshStandardMaterial = !0,
            Ns.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.defines = {
                    STANDARD: ""
                },
                this.color.copy(t.color),
                this.roughness = t.roughness,
                this.metalness = t.metalness,
                this.map = t.map,
                this.lightMap = t.lightMap,
                this.lightMapIntensity = t.lightMapIntensity,
                this.aoMap = t.aoMap,
                this.aoMapIntensity = t.aoMapIntensity,
                this.emissive.copy(t.emissive),
                this.emissiveMap = t.emissiveMap,
                this.emissiveIntensity = t.emissiveIntensity,
                this.bumpMap = t.bumpMap,
                this.bumpScale = t.bumpScale,
                this.normalMap = t.normalMap,
                this.normalMapType = t.normalMapType,
                this.normalScale.copy(t.normalScale),
                this.displacementMap = t.displacementMap,
                this.displacementScale = t.displacementScale,
                this.displacementBias = t.displacementBias,
                this.roughnessMap = t.roughnessMap,
                this.metalnessMap = t.metalnessMap,
                this.alphaMap = t.alphaMap,
                this.envMap = t.envMap,
                this.envMapIntensity = t.envMapIntensity,
                this.refractionRatio = t.refractionRatio,
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this.wireframeLinecap = t.wireframeLinecap,
                this.wireframeLinejoin = t.wireframeLinejoin,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.morphNormals = t.morphNormals,
                this.vertexTangents = t.vertexTangents,
                this
            }
            ,
            Bs.prototype = Object.create(Ns.prototype),
            Bs.prototype.constructor = Bs,
            Bs.prototype.isMeshPhysicalMaterial = !0,
            Bs.prototype.copy = function(t) {
                return Ns.prototype.copy.call(this, t),
                this.defines = {
                    STANDARD: "",
                    PHYSICAL: ""
                },
                this.clearcoat = t.clearcoat,
                this.clearcoatMap = t.clearcoatMap,
                this.clearcoatRoughness = t.clearcoatRoughness,
                this.clearcoatRoughnessMap = t.clearcoatRoughnessMap,
                this.clearcoatNormalMap = t.clearcoatNormalMap,
                this.clearcoatNormalScale.copy(t.clearcoatNormalScale),
                this.reflectivity = t.reflectivity,
                t.sheen ? this.sheen = (this.sheen || new Ge).copy(t.sheen) : this.sheen = null,
                this.transmission = t.transmission,
                this.transmissionMap = t.transmissionMap,
                this
            }
            ,
            zs.prototype = Object.create(Ve.prototype),
            zs.prototype.constructor = zs,
            zs.prototype.isMeshPhongMaterial = !0,
            zs.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this.specular.copy(t.specular),
                this.shininess = t.shininess,
                this.map = t.map,
                this.lightMap = t.lightMap,
                this.lightMapIntensity = t.lightMapIntensity,
                this.aoMap = t.aoMap,
                this.aoMapIntensity = t.aoMapIntensity,
                this.emissive.copy(t.emissive),
                this.emissiveMap = t.emissiveMap,
                this.emissiveIntensity = t.emissiveIntensity,
                this.bumpMap = t.bumpMap,
                this.bumpScale = t.bumpScale,
                this.normalMap = t.normalMap,
                this.normalMapType = t.normalMapType,
                this.normalScale.copy(t.normalScale),
                this.displacementMap = t.displacementMap,
                this.displacementScale = t.displacementScale,
                this.displacementBias = t.displacementBias,
                this.specularMap = t.specularMap,
                this.alphaMap = t.alphaMap,
                this.envMap = t.envMap,
                this.combine = t.combine,
                this.reflectivity = t.reflectivity,
                this.refractionRatio = t.refractionRatio,
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this.wireframeLinecap = t.wireframeLinecap,
                this.wireframeLinejoin = t.wireframeLinejoin,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.morphNormals = t.morphNormals,
                this
            }
            ,
            Gs.prototype = Object.create(Ve.prototype),
            Gs.prototype.constructor = Gs,
            Gs.prototype.isMeshToonMaterial = !0,
            Gs.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this.map = t.map,
                this.gradientMap = t.gradientMap,
                this.lightMap = t.lightMap,
                this.lightMapIntensity = t.lightMapIntensity,
                this.aoMap = t.aoMap,
                this.aoMapIntensity = t.aoMapIntensity,
                this.emissive.copy(t.emissive),
                this.emissiveMap = t.emissiveMap,
                this.emissiveIntensity = t.emissiveIntensity,
                this.bumpMap = t.bumpMap,
                this.bumpScale = t.bumpScale,
                this.normalMap = t.normalMap,
                this.normalMapType = t.normalMapType,
                this.normalScale.copy(t.normalScale),
                this.displacementMap = t.displacementMap,
                this.displacementScale = t.displacementScale,
                this.displacementBias = t.displacementBias,
                this.alphaMap = t.alphaMap,
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this.wireframeLinecap = t.wireframeLinecap,
                this.wireframeLinejoin = t.wireframeLinejoin,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.morphNormals = t.morphNormals,
                this
            }
            ,
            Hs.prototype = Object.create(Ve.prototype),
            Hs.prototype.constructor = Hs,
            Hs.prototype.isMeshNormalMaterial = !0,
            Hs.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.bumpMap = t.bumpMap,
                this.bumpScale = t.bumpScale,
                this.normalMap = t.normalMap,
                this.normalMapType = t.normalMapType,
                this.normalScale.copy(t.normalScale),
                this.displacementMap = t.displacementMap,
                this.displacementScale = t.displacementScale,
                this.displacementBias = t.displacementBias,
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.morphNormals = t.morphNormals,
                this
            }
            ,
            Us.prototype = Object.create(Ve.prototype),
            Us.prototype.constructor = Us,
            Us.prototype.isMeshLambertMaterial = !0,
            Us.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.color.copy(t.color),
                this.map = t.map,
                this.lightMap = t.lightMap,
                this.lightMapIntensity = t.lightMapIntensity,
                this.aoMap = t.aoMap,
                this.aoMapIntensity = t.aoMapIntensity,
                this.emissive.copy(t.emissive),
                this.emissiveMap = t.emissiveMap,
                this.emissiveIntensity = t.emissiveIntensity,
                this.specularMap = t.specularMap,
                this.alphaMap = t.alphaMap,
                this.envMap = t.envMap,
                this.combine = t.combine,
                this.reflectivity = t.reflectivity,
                this.refractionRatio = t.refractionRatio,
                this.wireframe = t.wireframe,
                this.wireframeLinewidth = t.wireframeLinewidth,
                this.wireframeLinecap = t.wireframeLinecap,
                this.wireframeLinejoin = t.wireframeLinejoin,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.morphNormals = t.morphNormals,
                this
            }
            ,
            Vs.prototype = Object.create(Ve.prototype),
            Vs.prototype.constructor = Vs,
            Vs.prototype.isMeshMatcapMaterial = !0,
            Vs.prototype.copy = function(t) {
                return Ve.prototype.copy.call(this, t),
                this.defines = {
                    MATCAP: ""
                },
                this.color.copy(t.color),
                this.matcap = t.matcap,
                this.map = t.map,
                this.bumpMap = t.bumpMap,
                this.bumpScale = t.bumpScale,
                this.normalMap = t.normalMap,
                this.normalMapType = t.normalMapType,
                this.normalScale.copy(t.normalScale),
                this.displacementMap = t.displacementMap,
                this.displacementScale = t.displacementScale,
                this.displacementBias = t.displacementBias,
                this.alphaMap = t.alphaMap,
                this.skinning = t.skinning,
                this.morphTargets = t.morphTargets,
                this.morphNormals = t.morphNormals,
                this
            }
            ,
            js.prototype = Object.create(Ua.prototype),
            js.prototype.constructor = js,
            js.prototype.isLineDashedMaterial = !0,
            js.prototype.copy = function(t) {
                return Ua.prototype.copy.call(this, t),
                this.scale = t.scale,
                this.dashSize = t.dashSize,
                this.gapSize = t.gapSize,
                this
            }
            ;
            var Ws = Object.freeze({
                __proto__: null,
                ShadowMaterial: Os,
                SpriteMaterial: ca,
                RawShaderMaterial: Fs,
                ShaderMaterial: Nr,
                PointsMaterial: Qa,
                MeshPhysicalMaterial: Bs,
                MeshStandardMaterial: Ns,
                MeshPhongMaterial: zs,
                MeshToonMaterial: Gs,
                MeshNormalMaterial: Hs,
                MeshLambertMaterial: Us,
                MeshDepthMaterial: Vi,
                MeshDistanceMaterial: ji,
                MeshBasicMaterial: je,
                MeshMatcapMaterial: Vs,
                LineDashedMaterial: js,
                LineBasicMaterial: Ua,
                Material: Ve
            })
              , qs = {
                arraySlice: function(t, e, r) {
                    return qs.isTypedArray(t) ? new t.constructor(t.subarray(e, void 0 !== r ? r : t.length)) : t.slice(e, r)
                },
                convertArray: function(t, e, r) {
                    return !t || !r && t.constructor === e ? t : "number" == typeof e.BYTES_PER_ELEMENT ? new e(t) : Array.prototype.slice.call(t)
                },
                isTypedArray: function(t) {
                    return ArrayBuffer.isView(t) && !(t instanceof DataView)
                },
                getKeyframeOrder: function(t) {
                    for (var e = t.length, r = new Array(e), n = 0; n !== e; ++n)
                        r[n] = n;
                    return r.sort((function(e, r) {
                        return t[e] - t[r]
                    }
                    )),
                    r
                },
                sortedArray: function(t, e, r) {
                    for (var n = t.length, i = new t.constructor(n), a = 0, o = 0; o !== n; ++a)
                        for (var s = r[a] * e, l = 0; l !== e; ++l)
                            i[o++] = t[s + l];
                    return i
                },
                flattenJSON: function(t, e, r, n) {
                    for (var i = 1, a = t[0]; void 0 !== a && void 0 === a[n]; )
                        a = t[i++];
                    if (void 0 !== a) {
                        var o = a[n];
                        if (void 0 !== o)
                            if (Array.isArray(o))
                                do {
                                    void 0 !== (o = a[n]) && (e.push(a.time),
                                    r.push.apply(r, o)),
                                    a = t[i++]
                                } while (void 0 !== a);
                            else if (void 0 !== o.toArray)
                                do {
                                    void 0 !== (o = a[n]) && (e.push(a.time),
                                    o.toArray(r, r.length)),
                                    a = t[i++]
                                } while (void 0 !== a);
                            else
                                do {
                                    void 0 !== (o = a[n]) && (e.push(a.time),
                                    r.push(o)),
                                    a = t[i++]
                                } while (void 0 !== a)
                    }
                },
                subclip: function(t, e, r, n, i) {
                    i = i || 30;
                    var a = t.clone();
                    a.name = e;
                    for (var o = [], s = 0; s < a.tracks.length; ++s) {
                        for (var l = a.tracks[s], c = l.getValueSize(), h = [], u = [], p = 0; p < l.times.length; ++p) {
                            var d = l.times[p] * i;
                            if (!(d < r || d >= n)) {
                                h.push(l.times[p]);
                                for (var f = 0; f < c; ++f)
                                    u.push(l.values[p * c + f])
                            }
                        }
                        0 !== h.length && (l.times = qs.convertArray(h, l.times.constructor),
                        l.values = qs.convertArray(u, l.values.constructor),
                        o.push(l))
                    }
                    a.tracks = o;
                    for (var m = 1 / 0, v = 0; v < a.tracks.length; ++v)
                        m > a.tracks[v].times[0] && (m = a.tracks[v].times[0]);
                    for (var g = 0; g < a.tracks.length; ++g)
                        a.tracks[g].shift(-1 * m);
                    return a.resetDuration(),
                    a
                },
                makeClipAdditive: function(t, e, r, n) {
                    void 0 === e && (e = 0),
                    void 0 === r && (r = t),
                    (void 0 === n || n <= 0) && (n = 30);
                    for (var i = r.tracks.length, a = e / n, o = function(e) {
                        var n = r.tracks[e]
                          , i = n.ValueTypeName;
                        if ("bool" === i || "string" === i)
                            return "continue";
                        var o = t.tracks.find((function(t) {
                            return t.name === n.name && t.ValueTypeName === i
                        }
                        ));
                        if (void 0 === o)
                            return "continue";
                        var s = 0
                          , l = n.getValueSize();
                        n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline && (s = l / 3);
                        var c = 0
                          , h = o.getValueSize();
                        o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline && (c = h / 3);
                        var u = n.times.length - 1
                          , p = void 0;
                        if (a <= n.times[0]) {
                            var d = s
                              , f = l - s;
                            p = qs.arraySlice(n.values, d, f)
                        } else if (a >= n.times[u]) {
                            var m = u * l + s
                              , v = m + l - s;
                            p = qs.arraySlice(n.values, m, v)
                        } else {
                            var g = n.createInterpolant()
                              , y = s
                              , _ = l - s;
                            g.evaluate(a),
                            p = qs.arraySlice(g.resultBuffer, y, _)
                        }
                        "quaternion" === i && (new yt).fromArray(p).normalize().conjugate().toArray(p);
                        for (var x = o.times.length, b = 0; b < x; ++b) {
                            var w = b * h + c;
                            if ("quaternion" === i)
                                yt.multiplyQuaternionsFlat(o.values, w, p, 0, o.values, w);
                            else
                                for (var S = h - 2 * c, T = 0; T < S; ++T)
                                    o.values[w + T] -= p[T]
                        }
                    }, s = 0; s < i; ++s)
                        o(s);
                    return t.blendMode = W,
                    t
                }
            };
            function Xs(t, e, r, n) {
                this.parameterPositions = t,
                this._cachedIndex = 0,
                this.resultBuffer = void 0 !== n ? n : new e.constructor(r),
                this.sampleValues = e,
                this.valueSize = r
            }
            function Ys(t, e, r, n) {
                Xs.call(this, t, e, r, n),
                this._weightPrev = -0,
                this._offsetPrev = -0,
                this._weightNext = -0,
                this._offsetNext = -0
            }
            function $s(t, e, r, n) {
                Xs.call(this, t, e, r, n)
            }
            function Ks(t, e, r, n) {
                Xs.call(this, t, e, r, n)
            }
            function Zs(t, e, r, n) {
                if (void 0 === t)
                    throw new Error("THREE.KeyframeTrack: track name is undefined");
                if (void 0 === e || 0 === e.length)
                    throw new Error("THREE.KeyframeTrack: no keyframes in track named " + t);
                this.name = t,
                this.times = qs.convertArray(e, this.TimeBufferType),
                this.values = qs.convertArray(r, this.ValueBufferType),
                this.setInterpolation(n || this.DefaultInterpolation)
            }
            function Js(t, e, r) {
                Zs.call(this, t, e, r)
            }
            function Qs(t, e, r, n) {
                Zs.call(this, t, e, r, n)
            }
            function tl(t, e, r, n) {
                Zs.call(this, t, e, r, n)
            }
            function el(t, e, r, n) {
                Xs.call(this, t, e, r, n)
            }
            function rl(t, e, r, n) {
                Zs.call(this, t, e, r, n)
            }
            function nl(t, e, r, n) {
                Zs.call(this, t, e, r, n)
            }
            function il(t, e, r, n) {
                Zs.call(this, t, e, r, n)
            }
            function al(t, e, r, n) {
                this.name = t,
                this.tracks = r,
                this.duration = void 0 !== e ? e : -1,
                this.blendMode = void 0 !== n ? n : j,
                this.uuid = it.generateUUID(),
                this.duration < 0 && this.resetDuration()
            }
            function ol(t) {
                if (void 0 === t.type)
                    throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
                var e = function(t) {
                    switch (t.toLowerCase()) {
                    case "scalar":
                    case "double":
                    case "float":
                    case "number":
                    case "integer":
                        return tl;
                    case "vector":
                    case "vector2":
                    case "vector3":
                    case "vector4":
                        return il;
                    case "color":
                        return Qs;
                    case "quaternion":
                        return rl;
                    case "bool":
                    case "boolean":
                        return Js;
                    case "string":
                        return nl
                    }
                    throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + t)
                }(t.type);
                if (void 0 === t.times) {
                    var r = []
                      , n = [];
                    qs.flattenJSON(t.keys, r, n, "value"),
                    t.times = r,
                    t.values = n
                }
                return void 0 !== e.parse ? e.parse(t) : new e(t.name,t.times,t.values,t.interpolation)
            }
            Object.assign(Xs.prototype, {
                evaluate: function(t) {
                    var e = this.parameterPositions
                      , r = this._cachedIndex
                      , n = e[r]
                      , i = e[r - 1];
                    t: {
                        e: {
                            var a;
                            r: {
                                n: if (!(t < n)) {
                                    for (var o = r + 2; ; ) {
                                        if (void 0 === n) {
                                            if (t < i)
                                                break n;
                                            return r = e.length,
                                            this._cachedIndex = r,
                                            this.afterEnd_(r - 1, t, i)
                                        }
                                        if (r === o)
                                            break;
                                        if (i = n,
                                        t < (n = e[++r]))
                                            break e
                                    }
                                    a = e.length;
                                    break r
                                }
                                if (t >= i)
                                    break t;
                                var s = e[1];
                                t < s && (r = 2,
                                i = s);
                                for (var l = r - 2; ; ) {
                                    if (void 0 === i)
                                        return this._cachedIndex = 0,
                                        this.beforeStart_(0, t, n);
                                    if (r === l)
                                        break;
                                    if (n = i,
                                    t >= (i = e[--r - 1]))
                                        break e
                                }
                                a = r,
                                r = 0
                            }
                            for (; r < a; ) {
                                var c = r + a >>> 1;
                                t < e[c] ? a = c : r = c + 1
                            }
                            if (n = e[r],
                            void 0 === (i = e[r - 1]))
                                return this._cachedIndex = 0,
                                this.beforeStart_(0, t, n);
                            if (void 0 === n)
                                return r = e.length,
                                this._cachedIndex = r,
                                this.afterEnd_(r - 1, i, t)
                        }
                        this._cachedIndex = r,
                        this.intervalChanged_(r, i, n)
                    }
                    return this.interpolate_(r, i, t, n)
                },
                settings: null,
                DefaultSettings_: {},
                getSettings_: function() {
                    return this.settings || this.DefaultSettings_
                },
                copySampleValue_: function(t) {
                    for (var e = this.resultBuffer, r = this.sampleValues, n = this.valueSize, i = t * n, a = 0; a !== n; ++a)
                        e[a] = r[i + a];
                    return e
                },
                interpolate_: function() {
                    throw new Error("call to abstract method")
                },
                intervalChanged_: function() {}
            }),
            Object.assign(Xs.prototype, {
                beforeStart_: Xs.prototype.copySampleValue_,
                afterEnd_: Xs.prototype.copySampleValue_
            }),
            Ys.prototype = Object.assign(Object.create(Xs.prototype), {
                constructor: Ys,
                DefaultSettings_: {
                    endingStart: H,
                    endingEnd: H
                },
                intervalChanged_: function(t, e, r) {
                    var n = this.parameterPositions
                      , i = t - 2
                      , a = t + 1
                      , o = n[i]
                      , s = n[a];
                    if (void 0 === o)
                        switch (this.getSettings_().endingStart) {
                        case U:
                            i = t,
                            o = 2 * e - r;
                            break;
                        case V:
                            o = e + n[i = n.length - 2] - n[i + 1];
                            break;
                        default:
                            i = t,
                            o = r
                        }
                    if (void 0 === s)
                        switch (this.getSettings_().endingEnd) {
                        case U:
                            a = t,
                            s = 2 * r - e;
                            break;
                        case V:
                            a = 1,
                            s = r + n[1] - n[0];
                            break;
                        default:
                            a = t - 1,
                            s = e
                        }
                    var l = .5 * (r - e)
                      , c = this.valueSize;
                    this._weightPrev = l / (e - o),
                    this._weightNext = l / (s - r),
                    this._offsetPrev = i * c,
                    this._offsetNext = a * c
                },
                interpolate_: function(t, e, r, n) {
                    for (var i = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = t * o, l = s - o, c = this._offsetPrev, h = this._offsetNext, u = this._weightPrev, p = this._weightNext, d = (r - e) / (n - e), f = d * d, m = f * d, v = -u * m + 2 * u * f - u * d, g = (1 + u) * m + (-1.5 - 2 * u) * f + (-.5 + u) * d + 1, y = (-1 - p) * m + (1.5 + p) * f + .5 * d, _ = p * m - p * f, x = 0; x !== o; ++x)
                        i[x] = v * a[c + x] + g * a[l + x] + y * a[s + x] + _ * a[h + x];
                    return i
                }
            }),
            $s.prototype = Object.assign(Object.create(Xs.prototype), {
                constructor: $s,
                interpolate_: function(t, e, r, n) {
                    for (var i = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = t * o, l = s - o, c = (r - e) / (n - e), h = 1 - c, u = 0; u !== o; ++u)
                        i[u] = a[l + u] * h + a[s + u] * c;
                    return i
                }
            }),
            Ks.prototype = Object.assign(Object.create(Xs.prototype), {
                constructor: Ks,
                interpolate_: function(t) {
                    return this.copySampleValue_(t - 1)
                }
            }),
            Object.assign(Zs, {
                toJSON: function(t) {
                    var e, r = t.constructor;
                    if (void 0 !== r.toJSON)
                        e = r.toJSON(t);
                    else {
                        e = {
                            name: t.name,
                            times: qs.convertArray(t.times, Array),
                            values: qs.convertArray(t.values, Array)
                        };
                        var n = t.getInterpolation();
                        n !== t.DefaultInterpolation && (e.interpolation = n)
                    }
                    return e.type = t.ValueTypeName,
                    e
                }
            }),
            Object.assign(Zs.prototype, {
                constructor: Zs,
                TimeBufferType: Float32Array,
                ValueBufferType: Float32Array,
                DefaultInterpolation: z,
                InterpolantFactoryMethodDiscrete: function(t) {
                    return new Ks(this.times,this.values,this.getValueSize(),t)
                },
                InterpolantFactoryMethodLinear: function(t) {
                    return new $s(this.times,this.values,this.getValueSize(),t)
                },
                InterpolantFactoryMethodSmooth: function(t) {
                    return new Ys(this.times,this.values,this.getValueSize(),t)
                },
                setInterpolation: function(t) {
                    var e;
                    switch (t) {
                    case B:
                        e = this.InterpolantFactoryMethodDiscrete;
                        break;
                    case z:
                        e = this.InterpolantFactoryMethodLinear;
                        break;
                    case G:
                        e = this.InterpolantFactoryMethodSmooth
                    }
                    if (void 0 === e) {
                        var r = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
                        if (void 0 === this.createInterpolant) {
                            if (t === this.DefaultInterpolation)
                                throw new Error(r);
                            this.setInterpolation(this.DefaultInterpolation)
                        }
                        return console.warn("THREE.KeyframeTrack:", r),
                        this
                    }
                    return this.createInterpolant = e,
                    this
                },
                getInterpolation: function() {
                    switch (this.createInterpolant) {
                    case this.InterpolantFactoryMethodDiscrete:
                        return B;
                    case this.InterpolantFactoryMethodLinear:
                        return z;
                    case this.InterpolantFactoryMethodSmooth:
                        return G
                    }
                },
                getValueSize: function() {
                    return this.values.length / this.times.length
                },
                shift: function(t) {
                    if (0 !== t)
                        for (var e = this.times, r = 0, n = e.length; r !== n; ++r)
                            e[r] += t;
                    return this
                },
                scale: function(t) {
                    if (1 !== t)
                        for (var e = this.times, r = 0, n = e.length; r !== n; ++r)
                            e[r] *= t;
                    return this
                },
                trim: function(t, e) {
                    for (var r = this.times, n = r.length, i = 0, a = n - 1; i !== n && r[i] < t; )
                        ++i;
                    for (; -1 !== a && r[a] > e; )
                        --a;
                    if (++a,
                    0 !== i || a !== n) {
                        i >= a && (i = (a = Math.max(a, 1)) - 1);
                        var o = this.getValueSize();
                        this.times = qs.arraySlice(r, i, a),
                        this.values = qs.arraySlice(this.values, i * o, a * o)
                    }
                    return this
                },
                validate: function() {
                    var t = !0
                      , e = this.getValueSize();
                    e - Math.floor(e) != 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this),
                    t = !1);
                    var r = this.times
                      , n = this.values
                      , i = r.length;
                    0 === i && (console.error("THREE.KeyframeTrack: Track is empty.", this),
                    t = !1);
                    for (var a = null, o = 0; o !== i; o++) {
                        var s = r[o];
                        if ("number" == typeof s && isNaN(s)) {
                            console.error("THREE.KeyframeTrack: Time is not a valid number.", this, o, s),
                            t = !1;
                            break
                        }
                        if (null !== a && a > s) {
                            console.error("THREE.KeyframeTrack: Out of order keys.", this, o, s, a),
                            t = !1;
                            break
                        }
                        a = s
                    }
                    if (void 0 !== n && qs.isTypedArray(n))
                        for (var l = 0, c = n.length; l !== c; ++l) {
                            var h = n[l];
                            if (isNaN(h)) {
                                console.error("THREE.KeyframeTrack: Value is not a valid number.", this, l, h),
                                t = !1;
                                break
                            }
                        }
                    return t
                },
                optimize: function() {
                    for (var t = qs.arraySlice(this.times), e = qs.arraySlice(this.values), r = this.getValueSize(), n = this.getInterpolation() === G, i = t.length - 1, a = 1, o = 1; o < i; ++o) {
                        var s = !1
                          , l = t[o];
                        if (l !== t[o + 1] && (1 !== o || l !== l[0]))
                            if (n)
                                s = !0;
                            else
                                for (var c = o * r, h = c - r, u = c + r, p = 0; p !== r; ++p) {
                                    var d = e[c + p];
                                    if (d !== e[h + p] || d !== e[u + p]) {
                                        s = !0;
                                        break
                                    }
                                }
                        if (s) {
                            if (o !== a) {
                                t[a] = t[o];
                                for (var f = o * r, m = a * r, v = 0; v !== r; ++v)
                                    e[m + v] = e[f + v]
                            }
                            ++a
                        }
                    }
                    if (i > 0) {
                        t[a] = t[i];
                        for (var g = i * r, y = a * r, _ = 0; _ !== r; ++_)
                            e[y + _] = e[g + _];
                        ++a
                    }
                    return a !== t.length ? (this.times = qs.arraySlice(t, 0, a),
                    this.values = qs.arraySlice(e, 0, a * r)) : (this.times = t,
                    this.values = e),
                    this
                },
                clone: function() {
                    var t = qs.arraySlice(this.times, 0)
                      , e = qs.arraySlice(this.values, 0)
                      , r = new (0,
                    this.constructor)(this.name,t,e);
                    return r.createInterpolant = this.createInterpolant,
                    r
                }
            }),
            Js.prototype = Object.assign(Object.create(Zs.prototype), {
                constructor: Js,
                ValueTypeName: "bool",
                ValueBufferType: Array,
                DefaultInterpolation: B,
                InterpolantFactoryMethodLinear: void 0,
                InterpolantFactoryMethodSmooth: void 0
            }),
            Qs.prototype = Object.assign(Object.create(Zs.prototype), {
                constructor: Qs,
                ValueTypeName: "color"
            }),
            tl.prototype = Object.assign(Object.create(Zs.prototype), {
                constructor: tl,
                ValueTypeName: "number"
            }),
            el.prototype = Object.assign(Object.create(Xs.prototype), {
                constructor: el,
                interpolate_: function(t, e, r, n) {
                    for (var i = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = (r - e) / (n - e), l = t * o, c = l + o; l !== c; l += 4)
                        yt.slerpFlat(i, 0, a, l - o, a, l, s);
                    return i
                }
            }),
            rl.prototype = Object.assign(Object.create(Zs.prototype), {
                constructor: rl,
                ValueTypeName: "quaternion",
                DefaultInterpolation: z,
                InterpolantFactoryMethodLinear: function(t) {
                    return new el(this.times,this.values,this.getValueSize(),t)
                },
                InterpolantFactoryMethodSmooth: void 0
            }),
            nl.prototype = Object.assign(Object.create(Zs.prototype), {
                constructor: nl,
                ValueTypeName: "string",
                ValueBufferType: Array,
                DefaultInterpolation: B,
                InterpolantFactoryMethodLinear: void 0,
                InterpolantFactoryMethodSmooth: void 0
            }),
            il.prototype = Object.assign(Object.create(Zs.prototype), {
                constructor: il,
                ValueTypeName: "vector"
            }),
            Object.assign(al, {
                parse: function(t) {
                    for (var e = [], r = t.tracks, n = 1 / (t.fps || 1), i = 0, a = r.length; i !== a; ++i)
                        e.push(ol(r[i]).scale(n));
                    return new al(t.name,t.duration,e,t.blendMode)
                },
                toJSON: function(t) {
                    for (var e = [], r = t.tracks, n = {
                        name: t.name,
                        duration: t.duration,
                        tracks: e,
                        uuid: t.uuid,
                        blendMode: t.blendMode
                    }, i = 0, a = r.length; i !== a; ++i)
                        e.push(Zs.toJSON(r[i]));
                    return n
                },
                CreateFromMorphTargetSequence: function(t, e, r, n) {
                    for (var i = e.length, a = [], o = 0; o < i; o++) {
                        var s = []
                          , l = [];
                        s.push((o + i - 1) % i, o, (o + 1) % i),
                        l.push(0, 1, 0);
                        var c = qs.getKeyframeOrder(s);
                        s = qs.sortedArray(s, 1, c),
                        l = qs.sortedArray(l, 1, c),
                        n || 0 !== s[0] || (s.push(i),
                        l.push(l[0])),
                        a.push(new tl(".morphTargetInfluences[" + e[o].name + "]",s,l).scale(1 / r))
                    }
                    return new al(t,-1,a)
                },
                findByName: function(t, e) {
                    var r = t;
                    if (!Array.isArray(t)) {
                        var n = t;
                        r = n.geometry && n.geometry.animations || n.animations
                    }
                    for (var i = 0; i < r.length; i++)
                        if (r[i].name === e)
                            return r[i];
                    return null
                },
                CreateClipsFromMorphTargetSequences: function(t, e, r) {
                    for (var n = {}, i = /^([\w-]*?)([\d]+)$/, a = 0, o = t.length; a < o; a++) {
                        var s = t[a]
                          , l = s.name.match(i);
                        if (l && l.length > 1) {
                            var c = l[1]
                              , h = n[c];
                            h || (n[c] = h = []),
                            h.push(s)
                        }
                    }
                    var u = [];
                    for (var p in n)
                        u.push(al.CreateFromMorphTargetSequence(p, n[p], e, r));
                    return u
                },
                parseAnimation: function(t, e) {
                    if (!t)
                        return console.error("THREE.AnimationClip: No animation in JSONLoader data."),
                        null;
                    for (var r = function(t, e, r, n, i) {
                        if (0 !== r.length) {
                            var a = []
                              , o = [];
                            qs.flattenJSON(r, a, o, n),
                            0 !== a.length && i.push(new t(e,a,o))
                        }
                    }, n = [], i = t.name || "default", a = t.fps || 30, o = t.blendMode, s = t.length || -1, l = t.hierarchy || [], c = 0; c < l.length; c++) {
                        var h = l[c].keys;
                        if (h && 0 !== h.length)
                            if (h[0].morphTargets) {
                                var u = {}
                                  , p = void 0;
                                for (p = 0; p < h.length; p++)
                                    if (h[p].morphTargets)
                                        for (var d = 0; d < h[p].morphTargets.length; d++)
                                            u[h[p].morphTargets[d]] = -1;
                                for (var f in u) {
                                    for (var m = [], v = [], g = 0; g !== h[p].morphTargets.length; ++g) {
                                        var y = h[p];
                                        m.push(y.time),
                                        v.push(y.morphTarget === f ? 1 : 0)
                                    }
                                    n.push(new tl(".morphTargetInfluence[" + f + "]",m,v))
                                }
                                s = u.length * (a || 1)
                            } else {
                                var _ = ".bones[" + e[c].name + "]";
                                r(il, _ + ".position", h, "pos", n),
                                r(rl, _ + ".quaternion", h, "rot", n),
                                r(il, _ + ".scale", h, "scl", n)
                            }
                    }
                    return 0 === n.length ? null : new al(i,s,n,o)
                }
            }),
            Object.assign(al.prototype, {
                resetDuration: function() {
                    for (var t = 0, e = 0, r = this.tracks.length; e !== r; ++e) {
                        var n = this.tracks[e];
                        t = Math.max(t, n.times[n.times.length - 1])
                    }
                    return this.duration = t,
                    this
                },
                trim: function() {
                    for (var t = 0; t < this.tracks.length; t++)
                        this.tracks[t].trim(0, this.duration);
                    return this
                },
                validate: function() {
                    for (var t = !0, e = 0; e < this.tracks.length; e++)
                        t = t && this.tracks[e].validate();
                    return t
                },
                optimize: function() {
                    for (var t = 0; t < this.tracks.length; t++)
                        this.tracks[t].optimize();
                    return this
                },
                clone: function() {
                    for (var t = [], e = 0; e < this.tracks.length; e++)
                        t.push(this.tracks[e].clone());
                    return new al(this.name,this.duration,t,this.blendMode)
                }
            });
            var sl = {
                enabled: !1,
                files: {},
                add: function(t, e) {
                    !1 !== this.enabled && (this.files[t] = e)
                },
                get: function(t) {
                    if (!1 !== this.enabled)
                        return this.files[t]
                },
                remove: function(t) {
                    delete this.files[t]
                },
                clear: function() {
                    this.files = {}
                }
            };
            function ll(t, e, r) {
                var n = this
                  , i = !1
                  , a = 0
                  , o = 0
                  , s = void 0
                  , l = [];
                this.onStart = void 0,
                this.onLoad = t,
                this.onProgress = e,
                this.onError = r,
                this.itemStart = function(t) {
                    o++,
                    !1 === i && void 0 !== n.onStart && n.onStart(t, a, o),
                    i = !0
                }
                ,
                this.itemEnd = function(t) {
                    a++,
                    void 0 !== n.onProgress && n.onProgress(t, a, o),
                    a === o && (i = !1,
                    void 0 !== n.onLoad && n.onLoad())
                }
                ,
                this.itemError = function(t) {
                    void 0 !== n.onError && n.onError(t)
                }
                ,
                this.resolveURL = function(t) {
                    return s ? s(t) : t
                }
                ,
                this.setURLModifier = function(t) {
                    return s = t,
                    this
                }
                ,
                this.addHandler = function(t, e) {
                    return l.push(t, e),
                    this
                }
                ,
                this.removeHandler = function(t) {
                    var e = l.indexOf(t);
                    return -1 !== e && l.splice(e, 2),
                    this
                }
                ,
                this.getHandler = function(t) {
                    for (var e = 0, r = l.length; e < r; e += 2) {
                        var n = l[e]
                          , i = l[e + 1];
                        if (n.global && (n.lastIndex = 0),
                        n.test(t))
                            return i
                    }
                    return null
                }
            }
            var cl = new ll;
            function hl(t) {
                this.manager = void 0 !== t ? t : cl,
                this.crossOrigin = "anonymous",
                this.withCredentials = !1,
                this.path = "",
                this.resourcePath = "",
                this.requestHeader = {}
            }
            Object.assign(hl.prototype, {
                load: function() {},
                loadAsync: function(t, e) {
                    var r = this;
                    return new Promise((function(n, i) {
                        r.load(t, n, e, i)
                    }
                    ))
                },
                parse: function() {},
                setCrossOrigin: function(t) {
                    return this.crossOrigin = t,
                    this
                },
                setWithCredentials: function(t) {
                    return this.withCredentials = t,
                    this
                },
                setPath: function(t) {
                    return this.path = t,
                    this
                },
                setResourcePath: function(t) {
                    return this.resourcePath = t,
                    this
                },
                setRequestHeader: function(t) {
                    return this.requestHeader = t,
                    this
                }
            });
            var ul = {};
            function pl(t) {
                hl.call(this, t)
            }
            function dl(t) {
                hl.call(this, t)
            }
            function fl(t) {
                hl.call(this, t)
            }
            function ml(t) {
                hl.call(this, t)
            }
            function vl(t) {
                hl.call(this, t)
            }
            function gl(t) {
                hl.call(this, t)
            }
            function yl(t) {
                hl.call(this, t)
            }
            function _l() {
                this.type = "Curve",
                this.arcLengthDivisions = 200
            }
            function xl(t, e, r, n, i, a, o, s) {
                _l.call(this),
                this.type = "EllipseCurve",
                this.aX = t || 0,
                this.aY = e || 0,
                this.xRadius = r || 1,
                this.yRadius = n || 1,
                this.aStartAngle = i || 0,
                this.aEndAngle = a || 2 * Math.PI,
                this.aClockwise = o || !1,
                this.aRotation = s || 0
            }
            function bl(t, e, r, n, i, a) {
                xl.call(this, t, e, r, r, n, i, a),
                this.type = "ArcCurve"
            }
            function wl() {
                var t = 0
                  , e = 0
                  , r = 0
                  , n = 0;
                function i(i, a, o, s) {
                    t = i,
                    e = o,
                    r = -3 * i + 3 * a - 2 * o - s,
                    n = 2 * i - 2 * a + o + s
                }
                return {
                    initCatmullRom: function(t, e, r, n, a) {
                        i(e, r, a * (r - t), a * (n - e))
                    },
                    initNonuniformCatmullRom: function(t, e, r, n, a, o, s) {
                        var l = (e - t) / a - (r - t) / (a + o) + (r - e) / o
                          , c = (r - e) / o - (n - e) / (o + s) + (n - r) / s;
                        i(e, r, l *= o, c *= o)
                    },
                    calc: function(i) {
                        var a = i * i;
                        return t + e * i + r * a + n * (a * i)
                    }
                }
            }
            pl.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: pl,
                load: function(t, e, r, n) {
                    void 0 === t && (t = ""),
                    void 0 !== this.path && (t = this.path + t),
                    t = this.manager.resolveURL(t);
                    var i = this
                      , a = sl.get(t);
                    if (void 0 !== a)
                        return i.manager.itemStart(t),
                        setTimeout((function() {
                            e && e(a),
                            i.manager.itemEnd(t)
                        }
                        ), 0),
                        a;
                    if (void 0 === ul[t]) {
                        var o, s = t.match(/^data:(.*?)(;base64)?,(.*)$/);
                        if (s) {
                            var l = s[1]
                              , c = !!s[2]
                              , h = s[3];
                            h = decodeURIComponent(h),
                            c && (h = atob(h));
                            try {
                                var u, p = (this.responseType || "").toLowerCase();
                                switch (p) {
                                case "arraybuffer":
                                case "blob":
                                    for (var d = new Uint8Array(h.length), f = 0; f < h.length; f++)
                                        d[f] = h.charCodeAt(f);
                                    u = "blob" === p ? new Blob([d.buffer],{
                                        type: l
                                    }) : d.buffer;
                                    break;
                                case "document":
                                    var m = new DOMParser;
                                    u = m.parseFromString(h, l);
                                    break;
                                case "json":
                                    u = JSON.parse(h);
                                    break;
                                default:
                                    u = h
                                }
                                setTimeout((function() {
                                    e && e(u),
                                    i.manager.itemEnd(t)
                                }
                                ), 0)
                            } catch (e) {
                                setTimeout((function() {
                                    n && n(e),
                                    i.manager.itemError(t),
                                    i.manager.itemEnd(t)
                                }
                                ), 0)
                            }
                        } else {
                            for (var v in ul[t] = [],
                            ul[t].push({
                                onLoad: e,
                                onProgress: r,
                                onError: n
                            }),
                            (o = new XMLHttpRequest).open("GET", t, !0),
                            o.addEventListener("load", (function(e) {
                                var r = this.response
                                  , n = ul[t];
                                if (delete ul[t],
                                200 === this.status || 0 === this.status) {
                                    0 === this.status && console.warn("THREE.FileLoader: HTTP Status 0 received."),
                                    sl.add(t, r);
                                    for (var a = 0, o = n.length; a < o; a++) {
                                        var s = n[a];
                                        s.onLoad && s.onLoad(r)
                                    }
                                    i.manager.itemEnd(t)
                                } else {
                                    for (var l = 0, c = n.length; l < c; l++) {
                                        var h = n[l];
                                        h.onError && h.onError(e)
                                    }
                                    i.manager.itemError(t),
                                    i.manager.itemEnd(t)
                                }
                            }
                            ), !1),
                            o.addEventListener("progress", (function(e) {
                                for (var r = ul[t], n = 0, i = r.length; n < i; n++) {
                                    var a = r[n];
                                    a.onProgress && a.onProgress(e)
                                }
                            }
                            ), !1),
                            o.addEventListener("error", (function(e) {
                                var r = ul[t];
                                delete ul[t];
                                for (var n = 0, a = r.length; n < a; n++) {
                                    var o = r[n];
                                    o.onError && o.onError(e)
                                }
                                i.manager.itemError(t),
                                i.manager.itemEnd(t)
                            }
                            ), !1),
                            o.addEventListener("abort", (function(e) {
                                var r = ul[t];
                                delete ul[t];
                                for (var n = 0, a = r.length; n < a; n++) {
                                    var o = r[n];
                                    o.onError && o.onError(e)
                                }
                                i.manager.itemError(t),
                                i.manager.itemEnd(t)
                            }
                            ), !1),
                            void 0 !== this.responseType && (o.responseType = this.responseType),
                            void 0 !== this.withCredentials && (o.withCredentials = this.withCredentials),
                            o.overrideMimeType && o.overrideMimeType(void 0 !== this.mimeType ? this.mimeType : "text/plain"),
                            this.requestHeader)
                                o.setRequestHeader(v, this.requestHeader[v]);
                            o.send(null)
                        }
                        return i.manager.itemStart(t),
                        o
                    }
                    ul[t].push({
                        onLoad: e,
                        onProgress: r,
                        onError: n
                    })
                },
                setResponseType: function(t) {
                    return this.responseType = t,
                    this
                },
                setMimeType: function(t) {
                    return this.mimeType = t,
                    this
                }
            }),
            dl.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: dl,
                load: function(t, e, r, n) {
                    var i = this
                      , a = new pl(i.manager);
                    a.setPath(i.path),
                    a.setRequestHeader(i.requestHeader),
                    a.setWithCredentials(i.withCredentials),
                    a.load(t, (function(r) {
                        try {
                            e(i.parse(JSON.parse(r)))
                        } catch (e) {
                            n ? n(e) : console.error(e),
                            i.manager.itemError(t)
                        }
                    }
                    ), r, n)
                },
                parse: function(t) {
                    for (var e = [], r = 0; r < t.length; r++) {
                        var n = al.parse(t[r]);
                        e.push(n)
                    }
                    return e
                }
            }),
            fl.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: fl,
                load: function(t, e, r, n) {
                    var i = this
                      , a = []
                      , o = new so;
                    o.image = a;
                    var s = new pl(this.manager);
                    s.setPath(this.path),
                    s.setResponseType("arraybuffer"),
                    s.setRequestHeader(this.requestHeader),
                    s.setWithCredentials(i.withCredentials);
                    var l = 0;
                    function c(c) {
                        s.load(t[c], (function(t) {
                            var r = i.parse(t, !0);
                            a[c] = {
                                width: r.width,
                                height: r.height,
                                format: r.format,
                                mipmaps: r.mipmaps
                            },
                            6 === (l += 1) && (1 === r.mipmapCount && (o.minFilter = v),
                            o.format = r.format,
                            o.needsUpdate = !0,
                            e && e(o))
                        }
                        ), r, n)
                    }
                    if (Array.isArray(t))
                        for (var h = 0, u = t.length; h < u; ++h)
                            c(h);
                    else
                        s.load(t, (function(t) {
                            var r = i.parse(t, !0);
                            if (r.isCubemap)
                                for (var n = r.mipmaps.length / r.mipmapCount, s = 0; s < n; s++) {
                                    a[s] = {
                                        mipmaps: []
                                    };
                                    for (var l = 0; l < r.mipmapCount; l++)
                                        a[s].mipmaps.push(r.mipmaps[s * r.mipmapCount + l]),
                                        a[s].format = r.format,
                                        a[s].width = r.width,
                                        a[s].height = r.height
                                }
                            else
                                o.image.width = r.width,
                                o.image.height = r.height,
                                o.mipmaps = r.mipmaps;
                            1 === r.mipmapCount && (o.minFilter = v),
                            o.format = r.format,
                            o.needsUpdate = !0,
                            e && e(o)
                        }
                        ), r, n);
                    return o
                }
            }),
            ml.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: ml,
                load: function(t, e, r, n) {
                    void 0 !== this.path && (t = this.path + t),
                    t = this.manager.resolveURL(t);
                    var i = this
                      , a = sl.get(t);
                    if (void 0 !== a)
                        return i.manager.itemStart(t),
                        setTimeout((function() {
                            e && e(a),
                            i.manager.itemEnd(t)
                        }
                        ), 0),
                        a;
                    var o = document.createElementNS("http://www.w3.org/1999/xhtml", "img");
                    function s() {
                        o.removeEventListener("load", s, !1),
                        o.removeEventListener("error", l, !1),
                        sl.add(t, this),
                        e && e(this),
                        i.manager.itemEnd(t)
                    }
                    function l(e) {
                        o.removeEventListener("load", s, !1),
                        o.removeEventListener("error", l, !1),
                        n && n(e),
                        i.manager.itemError(t),
                        i.manager.itemEnd(t)
                    }
                    return o.addEventListener("load", s, !1),
                    o.addEventListener("error", l, !1),
                    "data:" !== t.substr(0, 5) && void 0 !== this.crossOrigin && (o.crossOrigin = this.crossOrigin),
                    i.manager.itemStart(t),
                    o.src = t,
                    o
                }
            }),
            vl.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: vl,
                load: function(t, e, r, n) {
                    var i = new Ur
                      , a = new ml(this.manager);
                    a.setCrossOrigin(this.crossOrigin),
                    a.setPath(this.path);
                    var o = 0;
                    function s(r) {
                        a.load(t[r], (function(t) {
                            i.images[r] = t,
                            6 == ++o && (i.needsUpdate = !0,
                            e && e(i))
                        }
                        ), void 0, n)
                    }
                    for (var l = 0; l < t.length; ++l)
                        s(l);
                    return i
                }
            }),
            gl.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: gl,
                load: function(t, e, r, n) {
                    var i = this
                      , a = new jr
                      , o = new pl(this.manager);
                    return o.setResponseType("arraybuffer"),
                    o.setRequestHeader(this.requestHeader),
                    o.setPath(this.path),
                    o.setWithCredentials(i.withCredentials),
                    o.load(t, (function(t) {
                        var r = i.parse(t);
                        r && (void 0 !== r.image ? a.image = r.image : void 0 !== r.data && (a.image.width = r.width,
                        a.image.height = r.height,
                        a.image.data = r.data),
                        a.wrapS = void 0 !== r.wrapS ? r.wrapS : u,
                        a.wrapT = void 0 !== r.wrapT ? r.wrapT : u,
                        a.magFilter = void 0 !== r.magFilter ? r.magFilter : v,
                        a.minFilter = void 0 !== r.minFilter ? r.minFilter : v,
                        a.anisotropy = void 0 !== r.anisotropy ? r.anisotropy : 1,
                        void 0 !== r.format && (a.format = r.format),
                        void 0 !== r.type && (a.type = r.type),
                        void 0 !== r.mipmaps && (a.mipmaps = r.mipmaps,
                        a.minFilter = g),
                        1 === r.mipmapCount && (a.minFilter = v),
                        a.needsUpdate = !0,
                        e && e(a, r))
                    }
                    ), r, n),
                    a
                }
            }),
            yl.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: yl,
                load: function(t, e, r, n) {
                    var i = new ft
                      , a = new ml(this.manager);
                    return a.setCrossOrigin(this.crossOrigin),
                    a.setPath(this.path),
                    a.load(t, (function(r) {
                        i.image = r;
                        var n = t.search(/\.jpe?g($|\?)/i) > 0 || 0 === t.search(/^data\:image\/jpeg/);
                        i.format = n ? T : M,
                        i.needsUpdate = !0,
                        void 0 !== e && e(i)
                    }
                    ), r, n),
                    i
                }
            }),
            Object.assign(_l.prototype, {
                getPoint: function() {
                    return console.warn("THREE.Curve: .getPoint() not implemented."),
                    null
                },
                getPointAt: function(t, e) {
                    var r = this.getUtoTmapping(t);
                    return this.getPoint(r, e)
                },
                getPoints: function(t) {
                    void 0 === t && (t = 5);
                    for (var e = [], r = 0; r <= t; r++)
                        e.push(this.getPoint(r / t));
                    return e
                },
                getSpacedPoints: function(t) {
                    void 0 === t && (t = 5);
                    for (var e = [], r = 0; r <= t; r++)
                        e.push(this.getPointAt(r / t));
                    return e
                },
                getLength: function() {
                    var t = this.getLengths();
                    return t[t.length - 1]
                },
                getLengths: function(t) {
                    if (void 0 === t && (t = this.arcLengthDivisions),
                    this.cacheArcLengths && this.cacheArcLengths.length === t + 1 && !this.needsUpdate)
                        return this.cacheArcLengths;
                    this.needsUpdate = !1;
                    var e, r = [], n = this.getPoint(0), i = 0;
                    r.push(0);
                    for (var a = 1; a <= t; a++)
                        i += (e = this.getPoint(a / t)).distanceTo(n),
                        r.push(i),
                        n = e;
                    return this.cacheArcLengths = r,
                    r
                },
                updateArcLengths: function() {
                    this.needsUpdate = !0,
                    this.getLengths()
                },
                getUtoTmapping: function(t, e) {
                    var r, n = this.getLengths(), i = 0, a = n.length;
                    r = e || t * n[a - 1];
                    for (var o, s = 0, l = a - 1; s <= l; )
                        if ((o = n[i = Math.floor(s + (l - s) / 2)] - r) < 0)
                            s = i + 1;
                        else {
                            if (!(o > 0)) {
                                l = i;
                                break
                            }
                            l = i - 1
                        }
                    if (n[i = l] === r)
                        return i / (a - 1);
                    var c = n[i];
                    return (i + (r - c) / (n[i + 1] - c)) / (a - 1)
                },
                getTangent: function(t, e) {
                    var r = 1e-4
                      , n = t - r
                      , i = t + r;
                    n < 0 && (n = 0),
                    i > 1 && (i = 1);
                    var a = this.getPoint(n)
                      , o = this.getPoint(i)
                      , s = e || (a.isVector2 ? new ht : new _t);
                    return s.copy(o).sub(a).normalize(),
                    s
                },
                getTangentAt: function(t, e) {
                    var r = this.getUtoTmapping(t);
                    return this.getTangent(r, e)
                },
                computeFrenetFrames: function(t, e) {
                    for (var r = new _t, n = [], i = [], a = [], o = new _t, s = new Xt, l = 0; l <= t; l++) {
                        var c = l / t;
                        n[l] = this.getTangentAt(c, new _t),
                        n[l].normalize()
                    }
                    i[0] = new _t,
                    a[0] = new _t;
                    var h = Number.MAX_VALUE
                      , u = Math.abs(n[0].x)
                      , p = Math.abs(n[0].y)
                      , d = Math.abs(n[0].z);
                    u <= h && (h = u,
                    r.set(1, 0, 0)),
                    p <= h && (h = p,
                    r.set(0, 1, 0)),
                    d <= h && r.set(0, 0, 1),
                    o.crossVectors(n[0], r).normalize(),
                    i[0].crossVectors(n[0], o),
                    a[0].crossVectors(n[0], i[0]);
                    for (var f = 1; f <= t; f++) {
                        if (i[f] = i[f - 1].clone(),
                        a[f] = a[f - 1].clone(),
                        o.crossVectors(n[f - 1], n[f]),
                        o.length() > Number.EPSILON) {
                            o.normalize();
                            var m = Math.acos(it.clamp(n[f - 1].dot(n[f]), -1, 1));
                            i[f].applyMatrix4(s.makeRotationAxis(o, m))
                        }
                        a[f].crossVectors(n[f], i[f])
                    }
                    if (!0 === e) {
                        var v = Math.acos(it.clamp(i[0].dot(i[t]), -1, 1));
                        v /= t,
                        n[0].dot(o.crossVectors(i[0], i[t])) > 0 && (v = -v);
                        for (var g = 1; g <= t; g++)
                            i[g].applyMatrix4(s.makeRotationAxis(n[g], v * g)),
                            a[g].crossVectors(n[g], i[g])
                    }
                    return {
                        tangents: n,
                        normals: i,
                        binormals: a
                    }
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(t) {
                    return this.arcLengthDivisions = t.arcLengthDivisions,
                    this
                },
                toJSON: function() {
                    var t = {
                        metadata: {
                            version: 4.5,
                            type: "Curve",
                            generator: "Curve.toJSON"
                        }
                    };
                    return t.arcLengthDivisions = this.arcLengthDivisions,
                    t.type = this.type,
                    t
                },
                fromJSON: function(t) {
                    return this.arcLengthDivisions = t.arcLengthDivisions,
                    this
                }
            }),
            xl.prototype = Object.create(_l.prototype),
            xl.prototype.constructor = xl,
            xl.prototype.isEllipseCurve = !0,
            xl.prototype.getPoint = function(t, e) {
                for (var r = e || new ht, n = 2 * Math.PI, i = this.aEndAngle - this.aStartAngle, a = Math.abs(i) < Number.EPSILON; i < 0; )
                    i += n;
                for (; i > n; )
                    i -= n;
                i < Number.EPSILON && (i = a ? 0 : n),
                !0 !== this.aClockwise || a || (i === n ? i = -n : i -= n);
                var o = this.aStartAngle + t * i
                  , s = this.aX + this.xRadius * Math.cos(o)
                  , l = this.aY + this.yRadius * Math.sin(o);
                if (0 !== this.aRotation) {
                    var c = Math.cos(this.aRotation)
                      , h = Math.sin(this.aRotation)
                      , u = s - this.aX
                      , p = l - this.aY;
                    s = u * c - p * h + this.aX,
                    l = u * h + p * c + this.aY
                }
                return r.set(s, l)
            }
            ,
            xl.prototype.copy = function(t) {
                return _l.prototype.copy.call(this, t),
                this.aX = t.aX,
                this.aY = t.aY,
                this.xRadius = t.xRadius,
                this.yRadius = t.yRadius,
                this.aStartAngle = t.aStartAngle,
                this.aEndAngle = t.aEndAngle,
                this.aClockwise = t.aClockwise,
                this.aRotation = t.aRotation,
                this
            }
            ,
            xl.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                return t.aX = this.aX,
                t.aY = this.aY,
                t.xRadius = this.xRadius,
                t.yRadius = this.yRadius,
                t.aStartAngle = this.aStartAngle,
                t.aEndAngle = this.aEndAngle,
                t.aClockwise = this.aClockwise,
                t.aRotation = this.aRotation,
                t
            }
            ,
            xl.prototype.fromJSON = function(t) {
                return _l.prototype.fromJSON.call(this, t),
                this.aX = t.aX,
                this.aY = t.aY,
                this.xRadius = t.xRadius,
                this.yRadius = t.yRadius,
                this.aStartAngle = t.aStartAngle,
                this.aEndAngle = t.aEndAngle,
                this.aClockwise = t.aClockwise,
                this.aRotation = t.aRotation,
                this
            }
            ,
            bl.prototype = Object.create(xl.prototype),
            bl.prototype.constructor = bl,
            bl.prototype.isArcCurve = !0;
            var Sl = new _t
              , Tl = new wl
              , Ml = new wl
              , El = new wl;
            function Al(t, e, r, n) {
                _l.call(this),
                this.type = "CatmullRomCurve3",
                this.points = t || [],
                this.closed = e || !1,
                this.curveType = r || "centripetal",
                this.tension = void 0 !== n ? n : .5
            }
            function Pl(t, e, r, n, i) {
                var a = .5 * (n - e)
                  , o = .5 * (i - r)
                  , s = t * t;
                return (2 * r - 2 * n + a + o) * (t * s) + (-3 * r + 3 * n - 2 * a - o) * s + a * t + r
            }
            function Cl(t, e, r, n) {
                return function(t, e) {
                    var r = 1 - t;
                    return r * r * e
                }(t, e) + function(t, e) {
                    return 2 * (1 - t) * t * e
                }(t, r) + function(t, e) {
                    return t * t * e
                }(t, n)
            }
            function Ll(t, e, r, n, i) {
                return function(t, e) {
                    var r = 1 - t;
                    return r * r * r * e
                }(t, e) + function(t, e) {
                    var r = 1 - t;
                    return 3 * r * r * t * e
                }(t, r) + function(t, e) {
                    return 3 * (1 - t) * t * t * e
                }(t, n) + function(t, e) {
                    return t * t * t * e
                }(t, i)
            }
            function Dl(t, e, r, n) {
                _l.call(this),
                this.type = "CubicBezierCurve",
                this.v0 = t || new ht,
                this.v1 = e || new ht,
                this.v2 = r || new ht,
                this.v3 = n || new ht
            }
            function Rl(t, e, r, n) {
                _l.call(this),
                this.type = "CubicBezierCurve3",
                this.v0 = t || new _t,
                this.v1 = e || new _t,
                this.v2 = r || new _t,
                this.v3 = n || new _t
            }
            function Il(t, e) {
                _l.call(this),
                this.type = "LineCurve",
                this.v1 = t || new ht,
                this.v2 = e || new ht
            }
            function kl(t, e) {
                _l.call(this),
                this.type = "LineCurve3",
                this.v1 = t || new _t,
                this.v2 = e || new _t
            }
            function Ol(t, e, r) {
                _l.call(this),
                this.type = "QuadraticBezierCurve",
                this.v0 = t || new ht,
                this.v1 = e || new ht,
                this.v2 = r || new ht
            }
            function Fl(t, e, r) {
                _l.call(this),
                this.type = "QuadraticBezierCurve3",
                this.v0 = t || new _t,
                this.v1 = e || new _t,
                this.v2 = r || new _t
            }
            function Nl(t) {
                _l.call(this),
                this.type = "SplineCurve",
                this.points = t || []
            }
            Al.prototype = Object.create(_l.prototype),
            Al.prototype.constructor = Al,
            Al.prototype.isCatmullRomCurve3 = !0,
            Al.prototype.getPoint = function(t, e) {
                var r, n, i = e || new _t, a = this.points, o = a.length, s = (o - (this.closed ? 0 : 1)) * t, l = Math.floor(s), c = s - l;
                this.closed ? l += l > 0 ? 0 : (Math.floor(Math.abs(l) / o) + 1) * o : 0 === c && l === o - 1 && (l = o - 2,
                c = 1),
                this.closed || l > 0 ? r = a[(l - 1) % o] : (Sl.subVectors(a[0], a[1]).add(a[0]),
                r = Sl);
                var h = a[l % o]
                  , u = a[(l + 1) % o];
                if (this.closed || l + 2 < o ? n = a[(l + 2) % o] : (Sl.subVectors(a[o - 1], a[o - 2]).add(a[o - 1]),
                n = Sl),
                "centripetal" === this.curveType || "chordal" === this.curveType) {
                    var p = "chordal" === this.curveType ? .5 : .25
                      , d = Math.pow(r.distanceToSquared(h), p)
                      , f = Math.pow(h.distanceToSquared(u), p)
                      , m = Math.pow(u.distanceToSquared(n), p);
                    f < 1e-4 && (f = 1),
                    d < 1e-4 && (d = f),
                    m < 1e-4 && (m = f),
                    Tl.initNonuniformCatmullRom(r.x, h.x, u.x, n.x, d, f, m),
                    Ml.initNonuniformCatmullRom(r.y, h.y, u.y, n.y, d, f, m),
                    El.initNonuniformCatmullRom(r.z, h.z, u.z, n.z, d, f, m)
                } else
                    "catmullrom" === this.curveType && (Tl.initCatmullRom(r.x, h.x, u.x, n.x, this.tension),
                    Ml.initCatmullRom(r.y, h.y, u.y, n.y, this.tension),
                    El.initCatmullRom(r.z, h.z, u.z, n.z, this.tension));
                return i.set(Tl.calc(c), Ml.calc(c), El.calc(c)),
                i
            }
            ,
            Al.prototype.copy = function(t) {
                _l.prototype.copy.call(this, t),
                this.points = [];
                for (var e = 0, r = t.points.length; e < r; e++) {
                    var n = t.points[e];
                    this.points.push(n.clone())
                }
                return this.closed = t.closed,
                this.curveType = t.curveType,
                this.tension = t.tension,
                this
            }
            ,
            Al.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                t.points = [];
                for (var e = 0, r = this.points.length; e < r; e++) {
                    var n = this.points[e];
                    t.points.push(n.toArray())
                }
                return t.closed = this.closed,
                t.curveType = this.curveType,
                t.tension = this.tension,
                t
            }
            ,
            Al.prototype.fromJSON = function(t) {
                _l.prototype.fromJSON.call(this, t),
                this.points = [];
                for (var e = 0, r = t.points.length; e < r; e++) {
                    var n = t.points[e];
                    this.points.push((new _t).fromArray(n))
                }
                return this.closed = t.closed,
                this.curveType = t.curveType,
                this.tension = t.tension,
                this
            }
            ,
            Dl.prototype = Object.create(_l.prototype),
            Dl.prototype.constructor = Dl,
            Dl.prototype.isCubicBezierCurve = !0,
            Dl.prototype.getPoint = function(t, e) {
                var r = e || new ht
                  , n = this.v0
                  , i = this.v1
                  , a = this.v2
                  , o = this.v3;
                return r.set(Ll(t, n.x, i.x, a.x, o.x), Ll(t, n.y, i.y, a.y, o.y)),
                r
            }
            ,
            Dl.prototype.copy = function(t) {
                return _l.prototype.copy.call(this, t),
                this.v0.copy(t.v0),
                this.v1.copy(t.v1),
                this.v2.copy(t.v2),
                this.v3.copy(t.v3),
                this
            }
            ,
            Dl.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                return t.v0 = this.v0.toArray(),
                t.v1 = this.v1.toArray(),
                t.v2 = this.v2.toArray(),
                t.v3 = this.v3.toArray(),
                t
            }
            ,
            Dl.prototype.fromJSON = function(t) {
                return _l.prototype.fromJSON.call(this, t),
                this.v0.fromArray(t.v0),
                this.v1.fromArray(t.v1),
                this.v2.fromArray(t.v2),
                this.v3.fromArray(t.v3),
                this
            }
            ,
            Rl.prototype = Object.create(_l.prototype),
            Rl.prototype.constructor = Rl,
            Rl.prototype.isCubicBezierCurve3 = !0,
            Rl.prototype.getPoint = function(t, e) {
                var r = e || new _t
                  , n = this.v0
                  , i = this.v1
                  , a = this.v2
                  , o = this.v3;
                return r.set(Ll(t, n.x, i.x, a.x, o.x), Ll(t, n.y, i.y, a.y, o.y), Ll(t, n.z, i.z, a.z, o.z)),
                r
            }
            ,
            Rl.prototype.copy = function(t) {
                return _l.prototype.copy.call(this, t),
                this.v0.copy(t.v0),
                this.v1.copy(t.v1),
                this.v2.copy(t.v2),
                this.v3.copy(t.v3),
                this
            }
            ,
            Rl.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                return t.v0 = this.v0.toArray(),
                t.v1 = this.v1.toArray(),
                t.v2 = this.v2.toArray(),
                t.v3 = this.v3.toArray(),
                t
            }
            ,
            Rl.prototype.fromJSON = function(t) {
                return _l.prototype.fromJSON.call(this, t),
                this.v0.fromArray(t.v0),
                this.v1.fromArray(t.v1),
                this.v2.fromArray(t.v2),
                this.v3.fromArray(t.v3),
                this
            }
            ,
            Il.prototype = Object.create(_l.prototype),
            Il.prototype.constructor = Il,
            Il.prototype.isLineCurve = !0,
            Il.prototype.getPoint = function(t, e) {
                var r = e || new ht;
                return 1 === t ? r.copy(this.v2) : (r.copy(this.v2).sub(this.v1),
                r.multiplyScalar(t).add(this.v1)),
                r
            }
            ,
            Il.prototype.getPointAt = function(t, e) {
                return this.getPoint(t, e)
            }
            ,
            Il.prototype.getTangent = function(t, e) {
                var r = e || new ht;
                return r.copy(this.v2).sub(this.v1).normalize(),
                r
            }
            ,
            Il.prototype.copy = function(t) {
                return _l.prototype.copy.call(this, t),
                this.v1.copy(t.v1),
                this.v2.copy(t.v2),
                this
            }
            ,
            Il.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                return t.v1 = this.v1.toArray(),
                t.v2 = this.v2.toArray(),
                t
            }
            ,
            Il.prototype.fromJSON = function(t) {
                return _l.prototype.fromJSON.call(this, t),
                this.v1.fromArray(t.v1),
                this.v2.fromArray(t.v2),
                this
            }
            ,
            kl.prototype = Object.create(_l.prototype),
            kl.prototype.constructor = kl,
            kl.prototype.isLineCurve3 = !0,
            kl.prototype.getPoint = function(t, e) {
                var r = e || new _t;
                return 1 === t ? r.copy(this.v2) : (r.copy(this.v2).sub(this.v1),
                r.multiplyScalar(t).add(this.v1)),
                r
            }
            ,
            kl.prototype.getPointAt = function(t, e) {
                return this.getPoint(t, e)
            }
            ,
            kl.prototype.copy = function(t) {
                return _l.prototype.copy.call(this, t),
                this.v1.copy(t.v1),
                this.v2.copy(t.v2),
                this
            }
            ,
            kl.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                return t.v1 = this.v1.toArray(),
                t.v2 = this.v2.toArray(),
                t
            }
            ,
            kl.prototype.fromJSON = function(t) {
                return _l.prototype.fromJSON.call(this, t),
                this.v1.fromArray(t.v1),
                this.v2.fromArray(t.v2),
                this
            }
            ,
            Ol.prototype = Object.create(_l.prototype),
            Ol.prototype.constructor = Ol,
            Ol.prototype.isQuadraticBezierCurve = !0,
            Ol.prototype.getPoint = function(t, e) {
                var r = e || new ht
                  , n = this.v0
                  , i = this.v1
                  , a = this.v2;
                return r.set(Cl(t, n.x, i.x, a.x), Cl(t, n.y, i.y, a.y)),
                r
            }
            ,
            Ol.prototype.copy = function(t) {
                return _l.prototype.copy.call(this, t),
                this.v0.copy(t.v0),
                this.v1.copy(t.v1),
                this.v2.copy(t.v2),
                this
            }
            ,
            Ol.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                return t.v0 = this.v0.toArray(),
                t.v1 = this.v1.toArray(),
                t.v2 = this.v2.toArray(),
                t
            }
            ,
            Ol.prototype.fromJSON = function(t) {
                return _l.prototype.fromJSON.call(this, t),
                this.v0.fromArray(t.v0),
                this.v1.fromArray(t.v1),
                this.v2.fromArray(t.v2),
                this
            }
            ,
            Fl.prototype = Object.create(_l.prototype),
            Fl.prototype.constructor = Fl,
            Fl.prototype.isQuadraticBezierCurve3 = !0,
            Fl.prototype.getPoint = function(t, e) {
                var r = e || new _t
                  , n = this.v0
                  , i = this.v1
                  , a = this.v2;
                return r.set(Cl(t, n.x, i.x, a.x), Cl(t, n.y, i.y, a.y), Cl(t, n.z, i.z, a.z)),
                r
            }
            ,
            Fl.prototype.copy = function(t) {
                return _l.prototype.copy.call(this, t),
                this.v0.copy(t.v0),
                this.v1.copy(t.v1),
                this.v2.copy(t.v2),
                this
            }
            ,
            Fl.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                return t.v0 = this.v0.toArray(),
                t.v1 = this.v1.toArray(),
                t.v2 = this.v2.toArray(),
                t
            }
            ,
            Fl.prototype.fromJSON = function(t) {
                return _l.prototype.fromJSON.call(this, t),
                this.v0.fromArray(t.v0),
                this.v1.fromArray(t.v1),
                this.v2.fromArray(t.v2),
                this
            }
            ,
            Nl.prototype = Object.create(_l.prototype),
            Nl.prototype.constructor = Nl,
            Nl.prototype.isSplineCurve = !0,
            Nl.prototype.getPoint = function(t, e) {
                var r = e || new ht
                  , n = this.points
                  , i = (n.length - 1) * t
                  , a = Math.floor(i)
                  , o = i - a
                  , s = n[0 === a ? a : a - 1]
                  , l = n[a]
                  , c = n[a > n.length - 2 ? n.length - 1 : a + 1]
                  , h = n[a > n.length - 3 ? n.length - 1 : a + 2];
                return r.set(Pl(o, s.x, l.x, c.x, h.x), Pl(o, s.y, l.y, c.y, h.y)),
                r
            }
            ,
            Nl.prototype.copy = function(t) {
                _l.prototype.copy.call(this, t),
                this.points = [];
                for (var e = 0, r = t.points.length; e < r; e++) {
                    var n = t.points[e];
                    this.points.push(n.clone())
                }
                return this
            }
            ,
            Nl.prototype.toJSON = function() {
                var t = _l.prototype.toJSON.call(this);
                t.points = [];
                for (var e = 0, r = this.points.length; e < r; e++) {
                    var n = this.points[e];
                    t.points.push(n.toArray())
                }
                return t
            }
            ,
            Nl.prototype.fromJSON = function(t) {
                _l.prototype.fromJSON.call(this, t),
                this.points = [];
                for (var e = 0, r = t.points.length; e < r; e++) {
                    var n = t.points[e];
                    this.points.push((new ht).fromArray(n))
                }
                return this
            }
            ;
            var Bl = Object.freeze({
                __proto__: null,
                ArcCurve: bl,
                CatmullRomCurve3: Al,
                CubicBezierCurve: Dl,
                CubicBezierCurve3: Rl,
                EllipseCurve: xl,
                LineCurve: Il,
                LineCurve3: kl,
                QuadraticBezierCurve: Ol,
                QuadraticBezierCurve3: Fl,
                SplineCurve: Nl
            });
            function zl() {
                _l.call(this),
                this.type = "CurvePath",
                this.curves = [],
                this.autoClose = !1
            }
            function Gl(t) {
                zl.call(this),
                this.type = "Path",
                this.currentPoint = new ht,
                t && this.setFromPoints(t)
            }
            function Hl(t) {
                Gl.call(this, t),
                this.uuid = it.generateUUID(),
                this.type = "Shape",
                this.holes = []
            }
            function Ul(t, e) {
                ye.call(this),
                this.type = "Light",
                this.color = new Ge(t),
                this.intensity = void 0 !== e ? e : 1
            }
            function Vl(t, e, r) {
                Ul.call(this, t, r),
                this.type = "HemisphereLight",
                this.position.copy(ye.DefaultUp),
                this.updateMatrix(),
                this.groundColor = new Ge(e)
            }
            function jl(t) {
                this.camera = t,
                this.bias = 0,
                this.normalBias = 0,
                this.radius = 1,
                this.mapSize = new ht(512,512),
                this.map = null,
                this.mapPass = null,
                this.matrix = new Xt,
                this.autoUpdate = !0,
                this.needsUpdate = !1,
                this._frustum = new Xr,
                this._frameExtents = new ht(1,1),
                this._viewportCount = 1,
                this._viewports = [new mt(0,0,1,1)]
            }
            function Wl() {
                jl.call(this, new zr(50,1,.5,500)),
                this.focus = 1
            }
            function ql(t, e, r, n, i, a) {
                Ul.call(this, t, e),
                this.type = "SpotLight",
                this.position.copy(ye.DefaultUp),
                this.updateMatrix(),
                this.target = new ye,
                Object.defineProperty(this, "power", {
                    get: function() {
                        return this.intensity * Math.PI
                    },
                    set: function(t) {
                        this.intensity = t / Math.PI
                    }
                }),
                this.distance = void 0 !== r ? r : 0,
                this.angle = void 0 !== n ? n : Math.PI / 3,
                this.penumbra = void 0 !== i ? i : 0,
                this.decay = void 0 !== a ? a : 1,
                this.shadow = new Wl
            }
            function Xl() {
                jl.call(this, new zr(90,1,.5,500)),
                this._frameExtents = new ht(4,2),
                this._viewportCount = 6,
                this._viewports = [new mt(2,1,1,1), new mt(0,1,1,1), new mt(3,1,1,1), new mt(1,1,1,1), new mt(3,0,1,1), new mt(1,0,1,1)],
                this._cubeDirections = [new _t(1,0,0), new _t(-1,0,0), new _t(0,0,1), new _t(0,0,-1), new _t(0,1,0), new _t(0,-1,0)],
                this._cubeUps = [new _t(0,1,0), new _t(0,1,0), new _t(0,1,0), new _t(0,1,0), new _t(0,0,1), new _t(0,0,-1)]
            }
            function Yl(t, e, r, n) {
                Ul.call(this, t, e),
                this.type = "PointLight",
                Object.defineProperty(this, "power", {
                    get: function() {
                        return 4 * this.intensity * Math.PI
                    },
                    set: function(t) {
                        this.intensity = t / (4 * Math.PI)
                    }
                }),
                this.distance = void 0 !== r ? r : 0,
                this.decay = void 0 !== n ? n : 1,
                this.shadow = new Xl
            }
            function $l(t, e, r, n, i, a) {
                Br.call(this),
                this.type = "OrthographicCamera",
                this.zoom = 1,
                this.view = null,
                this.left = void 0 !== t ? t : -1,
                this.right = void 0 !== e ? e : 1,
                this.top = void 0 !== r ? r : 1,
                this.bottom = void 0 !== n ? n : -1,
                this.near = void 0 !== i ? i : .1,
                this.far = void 0 !== a ? a : 2e3,
                this.updateProjectionMatrix()
            }
            function Kl() {
                jl.call(this, new $l(-5,5,5,-5,.5,500))
            }
            function Zl(t, e) {
                Ul.call(this, t, e),
                this.type = "DirectionalLight",
                this.position.copy(ye.DefaultUp),
                this.updateMatrix(),
                this.target = new ye,
                this.shadow = new Kl
            }
            function Jl(t, e) {
                Ul.call(this, t, e),
                this.type = "AmbientLight"
            }
            function Ql(t, e, r, n) {
                Ul.call(this, t, e),
                this.type = "RectAreaLight",
                this.width = void 0 !== r ? r : 10,
                this.height = void 0 !== n ? n : 10
            }
            zl.prototype = Object.assign(Object.create(_l.prototype), {
                constructor: zl,
                add: function(t) {
                    this.curves.push(t)
                },
                closePath: function() {
                    var t = this.curves[0].getPoint(0)
                      , e = this.curves[this.curves.length - 1].getPoint(1);
                    t.equals(e) || this.curves.push(new Il(e,t))
                },
                getPoint: function(t) {
                    for (var e = t * this.getLength(), r = this.getCurveLengths(), n = 0; n < r.length; ) {
                        if (r[n] >= e) {
                            var i = r[n] - e
                              , a = this.curves[n]
                              , o = a.getLength()
                              , s = 0 === o ? 0 : 1 - i / o;
                            return a.getPointAt(s)
                        }
                        n++
                    }
                    return null
                },
                getLength: function() {
                    var t = this.getCurveLengths();
                    return t[t.length - 1]
                },
                updateArcLengths: function() {
                    this.needsUpdate = !0,
                    this.cacheLengths = null,
                    this.getCurveLengths()
                },
                getCurveLengths: function() {
                    if (this.cacheLengths && this.cacheLengths.length === this.curves.length)
                        return this.cacheLengths;
                    for (var t = [], e = 0, r = 0, n = this.curves.length; r < n; r++)
                        e += this.curves[r].getLength(),
                        t.push(e);
                    return this.cacheLengths = t,
                    t
                },
                getSpacedPoints: function(t) {
                    void 0 === t && (t = 40);
                    for (var e = [], r = 0; r <= t; r++)
                        e.push(this.getPoint(r / t));
                    return this.autoClose && e.push(e[0]),
                    e
                },
                getPoints: function(t) {
                    t = t || 12;
                    for (var e, r = [], n = 0, i = this.curves; n < i.length; n++)
                        for (var a = i[n], o = a && a.isEllipseCurve ? 2 * t : a && (a.isLineCurve || a.isLineCurve3) ? 1 : a && a.isSplineCurve ? t * a.points.length : t, s = a.getPoints(o), l = 0; l < s.length; l++) {
                            var c = s[l];
                            e && e.equals(c) || (r.push(c),
                            e = c)
                        }
                    return this.autoClose && r.length > 1 && !r[r.length - 1].equals(r[0]) && r.push(r[0]),
                    r
                },
                copy: function(t) {
                    _l.prototype.copy.call(this, t),
                    this.curves = [];
                    for (var e = 0, r = t.curves.length; e < r; e++) {
                        var n = t.curves[e];
                        this.curves.push(n.clone())
                    }
                    return this.autoClose = t.autoClose,
                    this
                },
                toJSON: function() {
                    var t = _l.prototype.toJSON.call(this);
                    t.autoClose = this.autoClose,
                    t.curves = [];
                    for (var e = 0, r = this.curves.length; e < r; e++) {
                        var n = this.curves[e];
                        t.curves.push(n.toJSON())
                    }
                    return t
                },
                fromJSON: function(t) {
                    _l.prototype.fromJSON.call(this, t),
                    this.autoClose = t.autoClose,
                    this.curves = [];
                    for (var e = 0, r = t.curves.length; e < r; e++) {
                        var n = t.curves[e];
                        this.curves.push((new Bl[n.type]).fromJSON(n))
                    }
                    return this
                }
            }),
            Gl.prototype = Object.assign(Object.create(zl.prototype), {
                constructor: Gl,
                setFromPoints: function(t) {
                    this.moveTo(t[0].x, t[0].y);
                    for (var e = 1, r = t.length; e < r; e++)
                        this.lineTo(t[e].x, t[e].y);
                    return this
                },
                moveTo: function(t, e) {
                    return this.currentPoint.set(t, e),
                    this
                },
                lineTo: function(t, e) {
                    var r = new Il(this.currentPoint.clone(),new ht(t,e));
                    return this.curves.push(r),
                    this.currentPoint.set(t, e),
                    this
                },
                quadraticCurveTo: function(t, e, r, n) {
                    var i = new Ol(this.currentPoint.clone(),new ht(t,e),new ht(r,n));
                    return this.curves.push(i),
                    this.currentPoint.set(r, n),
                    this
                },
                bezierCurveTo: function(t, e, r, n, i, a) {
                    var o = new Dl(this.currentPoint.clone(),new ht(t,e),new ht(r,n),new ht(i,a));
                    return this.curves.push(o),
                    this.currentPoint.set(i, a),
                    this
                },
                splineThru: function(t) {
                    var e = new Nl([this.currentPoint.clone()].concat(t));
                    return this.curves.push(e),
                    this.currentPoint.copy(t[t.length - 1]),
                    this
                },
                arc: function(t, e, r, n, i, a) {
                    var o = this.currentPoint.x
                      , s = this.currentPoint.y;
                    return this.absarc(t + o, e + s, r, n, i, a),
                    this
                },
                absarc: function(t, e, r, n, i, a) {
                    return this.absellipse(t, e, r, r, n, i, a),
                    this
                },
                ellipse: function(t, e, r, n, i, a, o, s) {
                    var l = this.currentPoint.x
                      , c = this.currentPoint.y;
                    return this.absellipse(t + l, e + c, r, n, i, a, o, s),
                    this
                },
                absellipse: function(t, e, r, n, i, a, o, s) {
                    var l = new xl(t,e,r,n,i,a,o,s);
                    if (this.curves.length > 0) {
                        var c = l.getPoint(0);
                        c.equals(this.currentPoint) || this.lineTo(c.x, c.y)
                    }
                    this.curves.push(l);
                    var h = l.getPoint(1);
                    return this.currentPoint.copy(h),
                    this
                },
                copy: function(t) {
                    return zl.prototype.copy.call(this, t),
                    this.currentPoint.copy(t.currentPoint),
                    this
                },
                toJSON: function() {
                    var t = zl.prototype.toJSON.call(this);
                    return t.currentPoint = this.currentPoint.toArray(),
                    t
                },
                fromJSON: function(t) {
                    return zl.prototype.fromJSON.call(this, t),
                    this.currentPoint.fromArray(t.currentPoint),
                    this
                }
            }),
            Hl.prototype = Object.assign(Object.create(Gl.prototype), {
                constructor: Hl,
                getPointsHoles: function(t) {
                    for (var e = [], r = 0, n = this.holes.length; r < n; r++)
                        e[r] = this.holes[r].getPoints(t);
                    return e
                },
                extractPoints: function(t) {
                    return {
                        shape: this.getPoints(t),
                        holes: this.getPointsHoles(t)
                    }
                },
                copy: function(t) {
                    Gl.prototype.copy.call(this, t),
                    this.holes = [];
                    for (var e = 0, r = t.holes.length; e < r; e++) {
                        var n = t.holes[e];
                        this.holes.push(n.clone())
                    }
                    return this
                },
                toJSON: function() {
                    var t = Gl.prototype.toJSON.call(this);
                    t.uuid = this.uuid,
                    t.holes = [];
                    for (var e = 0, r = this.holes.length; e < r; e++) {
                        var n = this.holes[e];
                        t.holes.push(n.toJSON())
                    }
                    return t
                },
                fromJSON: function(t) {
                    Gl.prototype.fromJSON.call(this, t),
                    this.uuid = t.uuid,
                    this.holes = [];
                    for (var e = 0, r = t.holes.length; e < r; e++) {
                        var n = t.holes[e];
                        this.holes.push((new Gl).fromJSON(n))
                    }
                    return this
                }
            }),
            Ul.prototype = Object.assign(Object.create(ye.prototype), {
                constructor: Ul,
                isLight: !0,
                copy: function(t) {
                    return ye.prototype.copy.call(this, t),
                    this.color.copy(t.color),
                    this.intensity = t.intensity,
                    this
                },
                toJSON: function(t) {
                    var e = ye.prototype.toJSON.call(this, t);
                    return e.object.color = this.color.getHex(),
                    e.object.intensity = this.intensity,
                    void 0 !== this.groundColor && (e.object.groundColor = this.groundColor.getHex()),
                    void 0 !== this.distance && (e.object.distance = this.distance),
                    void 0 !== this.angle && (e.object.angle = this.angle),
                    void 0 !== this.decay && (e.object.decay = this.decay),
                    void 0 !== this.penumbra && (e.object.penumbra = this.penumbra),
                    void 0 !== this.shadow && (e.object.shadow = this.shadow.toJSON()),
                    e
                }
            }),
            Vl.prototype = Object.assign(Object.create(Ul.prototype), {
                constructor: Vl,
                isHemisphereLight: !0,
                copy: function(t) {
                    return Ul.prototype.copy.call(this, t),
                    this.groundColor.copy(t.groundColor),
                    this
                }
            }),
            Object.assign(jl.prototype, {
                _projScreenMatrix: new Xt,
                _lightPositionWorld: new _t,
                _lookTarget: new _t,
                getViewportCount: function() {
                    return this._viewportCount
                },
                getFrustum: function() {
                    return this._frustum
                },
                updateMatrices: function(t) {
                    var e = this.camera
                      , r = this.matrix
                      , n = this._projScreenMatrix
                      , i = this._lookTarget
                      , a = this._lightPositionWorld;
                    a.setFromMatrixPosition(t.matrixWorld),
                    e.position.copy(a),
                    i.setFromMatrixPosition(t.target.matrixWorld),
                    e.lookAt(i),
                    e.updateMatrixWorld(),
                    n.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
                    this._frustum.setFromProjectionMatrix(n),
                    r.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
                    r.multiply(e.projectionMatrix),
                    r.multiply(e.matrixWorldInverse)
                },
                getViewport: function(t) {
                    return this._viewports[t]
                },
                getFrameExtents: function() {
                    return this._frameExtents
                },
                copy: function(t) {
                    return this.camera = t.camera.clone(),
                    this.bias = t.bias,
                    this.radius = t.radius,
                    this.mapSize.copy(t.mapSize),
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                toJSON: function() {
                    var t = {};
                    return 0 !== this.bias && (t.bias = this.bias),
                    0 !== this.normalBias && (t.normalBias = this.normalBias),
                    1 !== this.radius && (t.radius = this.radius),
                    512 === this.mapSize.x && 512 === this.mapSize.y || (t.mapSize = this.mapSize.toArray()),
                    t.camera = this.camera.toJSON(!1).object,
                    delete t.camera.matrix,
                    t
                }
            }),
            Wl.prototype = Object.assign(Object.create(jl.prototype), {
                constructor: Wl,
                isSpotLightShadow: !0,
                updateMatrices: function(t) {
                    var e = this.camera
                      , r = 2 * it.RAD2DEG * t.angle * this.focus
                      , n = this.mapSize.width / this.mapSize.height
                      , i = t.distance || e.far;
                    r === e.fov && n === e.aspect && i === e.far || (e.fov = r,
                    e.aspect = n,
                    e.far = i,
                    e.updateProjectionMatrix()),
                    jl.prototype.updateMatrices.call(this, t)
                }
            }),
            ql.prototype = Object.assign(Object.create(Ul.prototype), {
                constructor: ql,
                isSpotLight: !0,
                copy: function(t) {
                    return Ul.prototype.copy.call(this, t),
                    this.distance = t.distance,
                    this.angle = t.angle,
                    this.penumbra = t.penumbra,
                    this.decay = t.decay,
                    this.target = t.target.clone(),
                    this.shadow = t.shadow.clone(),
                    this
                }
            }),
            Xl.prototype = Object.assign(Object.create(jl.prototype), {
                constructor: Xl,
                isPointLightShadow: !0,
                updateMatrices: function(t, e) {
                    void 0 === e && (e = 0);
                    var r = this.camera
                      , n = this.matrix
                      , i = this._lightPositionWorld
                      , a = this._lookTarget
                      , o = this._projScreenMatrix;
                    i.setFromMatrixPosition(t.matrixWorld),
                    r.position.copy(i),
                    a.copy(r.position),
                    a.add(this._cubeDirections[e]),
                    r.up.copy(this._cubeUps[e]),
                    r.lookAt(a),
                    r.updateMatrixWorld(),
                    n.makeTranslation(-i.x, -i.y, -i.z),
                    o.multiplyMatrices(r.projectionMatrix, r.matrixWorldInverse),
                    this._frustum.setFromProjectionMatrix(o)
                }
            }),
            Yl.prototype = Object.assign(Object.create(Ul.prototype), {
                constructor: Yl,
                isPointLight: !0,
                copy: function(t) {
                    return Ul.prototype.copy.call(this, t),
                    this.distance = t.distance,
                    this.decay = t.decay,
                    this.shadow = t.shadow.clone(),
                    this
                }
            }),
            $l.prototype = Object.assign(Object.create(Br.prototype), {
                constructor: $l,
                isOrthographicCamera: !0,
                copy: function(t, e) {
                    return Br.prototype.copy.call(this, t, e),
                    this.left = t.left,
                    this.right = t.right,
                    this.top = t.top,
                    this.bottom = t.bottom,
                    this.near = t.near,
                    this.far = t.far,
                    this.zoom = t.zoom,
                    this.view = null === t.view ? null : Object.assign({}, t.view),
                    this
                },
                setViewOffset: function(t, e, r, n, i, a) {
                    null === this.view && (this.view = {
                        enabled: !0,
                        fullWidth: 1,
                        fullHeight: 1,
                        offsetX: 0,
                        offsetY: 0,
                        width: 1,
                        height: 1
                    }),
                    this.view.enabled = !0,
                    this.view.fullWidth = t,
                    this.view.fullHeight = e,
                    this.view.offsetX = r,
                    this.view.offsetY = n,
                    this.view.width = i,
                    this.view.height = a,
                    this.updateProjectionMatrix()
                },
                clearViewOffset: function() {
                    null !== this.view && (this.view.enabled = !1),
                    this.updateProjectionMatrix()
                },
                updateProjectionMatrix: function() {
                    var t = (this.right - this.left) / (2 * this.zoom)
                      , e = (this.top - this.bottom) / (2 * this.zoom)
                      , r = (this.right + this.left) / 2
                      , n = (this.top + this.bottom) / 2
                      , i = r - t
                      , a = r + t
                      , o = n + e
                      , s = n - e;
                    if (null !== this.view && this.view.enabled) {
                        var l = (this.right - this.left) / this.view.fullWidth / this.zoom
                          , c = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
                        a = (i += l * this.view.offsetX) + l * this.view.width,
                        s = (o -= c * this.view.offsetY) - c * this.view.height
                    }
                    this.projectionMatrix.makeOrthographic(i, a, o, s, this.near, this.far),
                    this.projectionMatrixInverse.getInverse(this.projectionMatrix)
                },
                toJSON: function(t) {
                    var e = ye.prototype.toJSON.call(this, t);
                    return e.object.zoom = this.zoom,
                    e.object.left = this.left,
                    e.object.right = this.right,
                    e.object.top = this.top,
                    e.object.bottom = this.bottom,
                    e.object.near = this.near,
                    e.object.far = this.far,
                    null !== this.view && (e.object.view = Object.assign({}, this.view)),
                    e
                }
            }),
            Kl.prototype = Object.assign(Object.create(jl.prototype), {
                constructor: Kl,
                isDirectionalLightShadow: !0,
                updateMatrices: function(t) {
                    jl.prototype.updateMatrices.call(this, t)
                }
            }),
            Zl.prototype = Object.assign(Object.create(Ul.prototype), {
                constructor: Zl,
                isDirectionalLight: !0,
                copy: function(t) {
                    return Ul.prototype.copy.call(this, t),
                    this.target = t.target.clone(),
                    this.shadow = t.shadow.clone(),
                    this
                }
            }),
            Jl.prototype = Object.assign(Object.create(Ul.prototype), {
                constructor: Jl,
                isAmbientLight: !0
            }),
            Ql.prototype = Object.assign(Object.create(Ul.prototype), {
                constructor: Ql,
                isRectAreaLight: !0,
                copy: function(t) {
                    return Ul.prototype.copy.call(this, t),
                    this.width = t.width,
                    this.height = t.height,
                    this
                },
                toJSON: function(t) {
                    var e = Ul.prototype.toJSON.call(this, t);
                    return e.object.width = this.width,
                    e.object.height = this.height,
                    e
                }
            });
            var tc = function() {
                function t() {
                    Object.defineProperty(this, "isSphericalHarmonics3", {
                        value: !0
                    }),
                    this.coefficients = [];
                    for (var t = 0; t < 9; t++)
                        this.coefficients.push(new _t)
                }
                var e = t.prototype;
                return e.set = function(t) {
                    for (var e = 0; e < 9; e++)
                        this.coefficients[e].copy(t[e]);
                    return this
                }
                ,
                e.zero = function() {
                    for (var t = 0; t < 9; t++)
                        this.coefficients[t].set(0, 0, 0);
                    return this
                }
                ,
                e.getAt = function(t, e) {
                    var r = t.x
                      , n = t.y
                      , i = t.z
                      , a = this.coefficients;
                    return e.copy(a[0]).multiplyScalar(.282095),
                    e.addScaledVector(a[1], .488603 * n),
                    e.addScaledVector(a[2], .488603 * i),
                    e.addScaledVector(a[3], .488603 * r),
                    e.addScaledVector(a[4], r * n * 1.092548),
                    e.addScaledVector(a[5], n * i * 1.092548),
                    e.addScaledVector(a[6], .315392 * (3 * i * i - 1)),
                    e.addScaledVector(a[7], r * i * 1.092548),
                    e.addScaledVector(a[8], .546274 * (r * r - n * n)),
                    e
                }
                ,
                e.getIrradianceAt = function(t, e) {
                    var r = t.x
                      , n = t.y
                      , i = t.z
                      , a = this.coefficients;
                    return e.copy(a[0]).multiplyScalar(.886227),
                    e.addScaledVector(a[1], 1.023328 * n),
                    e.addScaledVector(a[2], 1.023328 * i),
                    e.addScaledVector(a[3], 1.023328 * r),
                    e.addScaledVector(a[4], .858086 * r * n),
                    e.addScaledVector(a[5], .858086 * n * i),
                    e.addScaledVector(a[6], .743125 * i * i - .247708),
                    e.addScaledVector(a[7], .858086 * r * i),
                    e.addScaledVector(a[8], .429043 * (r * r - n * n)),
                    e
                }
                ,
                e.add = function(t) {
                    for (var e = 0; e < 9; e++)
                        this.coefficients[e].add(t.coefficients[e]);
                    return this
                }
                ,
                e.addScaledSH = function(t, e) {
                    for (var r = 0; r < 9; r++)
                        this.coefficients[r].addScaledVector(t.coefficients[r], e);
                    return this
                }
                ,
                e.scale = function(t) {
                    for (var e = 0; e < 9; e++)
                        this.coefficients[e].multiplyScalar(t);
                    return this
                }
                ,
                e.lerp = function(t, e) {
                    for (var r = 0; r < 9; r++)
                        this.coefficients[r].lerp(t.coefficients[r], e);
                    return this
                }
                ,
                e.equals = function(t) {
                    for (var e = 0; e < 9; e++)
                        if (!this.coefficients[e].equals(t.coefficients[e]))
                            return !1;
                    return !0
                }
                ,
                e.copy = function(t) {
                    return this.set(t.coefficients)
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.fromArray = function(t, e) {
                    void 0 === e && (e = 0);
                    for (var r = this.coefficients, n = 0; n < 9; n++)
                        r[n].fromArray(t, e + 3 * n);
                    return this
                }
                ,
                e.toArray = function(t, e) {
                    void 0 === t && (t = []),
                    void 0 === e && (e = 0);
                    for (var r = this.coefficients, n = 0; n < 9; n++)
                        r[n].toArray(t, e + 3 * n);
                    return t
                }
                ,
                t.getBasisAt = function(t, e) {
                    var r = t.x
                      , n = t.y
                      , i = t.z;
                    e[0] = .282095,
                    e[1] = .488603 * n,
                    e[2] = .488603 * i,
                    e[3] = .488603 * r,
                    e[4] = 1.092548 * r * n,
                    e[5] = 1.092548 * n * i,
                    e[6] = .315392 * (3 * i * i - 1),
                    e[7] = 1.092548 * r * i,
                    e[8] = .546274 * (r * r - n * n)
                }
                ,
                t
            }();
            function ec(t, e) {
                Ul.call(this, void 0, e),
                this.type = "LightProbe",
                this.sh = void 0 !== t ? t : new tc
            }
            function rc(t) {
                hl.call(this, t),
                this.textures = {}
            }
            ec.prototype = Object.assign(Object.create(Ul.prototype), {
                constructor: ec,
                isLightProbe: !0,
                copy: function(t) {
                    return Ul.prototype.copy.call(this, t),
                    this.sh.copy(t.sh),
                    this
                },
                fromJSON: function(t) {
                    return this.intensity = t.intensity,
                    this.sh.fromArray(t.sh),
                    this
                },
                toJSON: function(t) {
                    var e = Ul.prototype.toJSON.call(this, t);
                    return e.object.sh = this.sh.toArray(),
                    e
                }
            }),
            rc.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: rc,
                load: function(t, e, r, n) {
                    var i = this
                      , a = new pl(i.manager);
                    a.setPath(i.path),
                    a.setRequestHeader(i.requestHeader),
                    a.setWithCredentials(i.withCredentials),
                    a.load(t, (function(r) {
                        try {
                            e(i.parse(JSON.parse(r)))
                        } catch (e) {
                            n ? n(e) : console.error(e),
                            i.manager.itemError(t)
                        }
                    }
                    ), r, n)
                },
                parse: function(t) {
                    var e = this.textures;
                    function r(t) {
                        return void 0 === e[t] && console.warn("THREE.MaterialLoader: Undefined texture", t),
                        e[t]
                    }
                    var n = new Ws[t.type];
                    if (void 0 !== t.uuid && (n.uuid = t.uuid),
                    void 0 !== t.name && (n.name = t.name),
                    void 0 !== t.color && void 0 !== n.color && n.color.setHex(t.color),
                    void 0 !== t.roughness && (n.roughness = t.roughness),
                    void 0 !== t.metalness && (n.metalness = t.metalness),
                    void 0 !== t.sheen && (n.sheen = (new Ge).setHex(t.sheen)),
                    void 0 !== t.emissive && void 0 !== n.emissive && n.emissive.setHex(t.emissive),
                    void 0 !== t.specular && void 0 !== n.specular && n.specular.setHex(t.specular),
                    void 0 !== t.shininess && (n.shininess = t.shininess),
                    void 0 !== t.clearcoat && (n.clearcoat = t.clearcoat),
                    void 0 !== t.clearcoatRoughness && (n.clearcoatRoughness = t.clearcoatRoughness),
                    void 0 !== t.fog && (n.fog = t.fog),
                    void 0 !== t.flatShading && (n.flatShading = t.flatShading),
                    void 0 !== t.blending && (n.blending = t.blending),
                    void 0 !== t.combine && (n.combine = t.combine),
                    void 0 !== t.side && (n.side = t.side),
                    void 0 !== t.opacity && (n.opacity = t.opacity),
                    void 0 !== t.transparent && (n.transparent = t.transparent),
                    void 0 !== t.alphaTest && (n.alphaTest = t.alphaTest),
                    void 0 !== t.depthTest && (n.depthTest = t.depthTest),
                    void 0 !== t.depthWrite && (n.depthWrite = t.depthWrite),
                    void 0 !== t.colorWrite && (n.colorWrite = t.colorWrite),
                    void 0 !== t.stencilWrite && (n.stencilWrite = t.stencilWrite),
                    void 0 !== t.stencilWriteMask && (n.stencilWriteMask = t.stencilWriteMask),
                    void 0 !== t.stencilFunc && (n.stencilFunc = t.stencilFunc),
                    void 0 !== t.stencilRef && (n.stencilRef = t.stencilRef),
                    void 0 !== t.stencilFuncMask && (n.stencilFuncMask = t.stencilFuncMask),
                    void 0 !== t.stencilFail && (n.stencilFail = t.stencilFail),
                    void 0 !== t.stencilZFail && (n.stencilZFail = t.stencilZFail),
                    void 0 !== t.stencilZPass && (n.stencilZPass = t.stencilZPass),
                    void 0 !== t.wireframe && (n.wireframe = t.wireframe),
                    void 0 !== t.wireframeLinewidth && (n.wireframeLinewidth = t.wireframeLinewidth),
                    void 0 !== t.wireframeLinecap && (n.wireframeLinecap = t.wireframeLinecap),
                    void 0 !== t.wireframeLinejoin && (n.wireframeLinejoin = t.wireframeLinejoin),
                    void 0 !== t.rotation && (n.rotation = t.rotation),
                    1 !== t.linewidth && (n.linewidth = t.linewidth),
                    void 0 !== t.dashSize && (n.dashSize = t.dashSize),
                    void 0 !== t.gapSize && (n.gapSize = t.gapSize),
                    void 0 !== t.scale && (n.scale = t.scale),
                    void 0 !== t.polygonOffset && (n.polygonOffset = t.polygonOffset),
                    void 0 !== t.polygonOffsetFactor && (n.polygonOffsetFactor = t.polygonOffsetFactor),
                    void 0 !== t.polygonOffsetUnits && (n.polygonOffsetUnits = t.polygonOffsetUnits),
                    void 0 !== t.skinning && (n.skinning = t.skinning),
                    void 0 !== t.morphTargets && (n.morphTargets = t.morphTargets),
                    void 0 !== t.morphNormals && (n.morphNormals = t.morphNormals),
                    void 0 !== t.dithering && (n.dithering = t.dithering),
                    void 0 !== t.vertexTangents && (n.vertexTangents = t.vertexTangents),
                    void 0 !== t.visible && (n.visible = t.visible),
                    void 0 !== t.toneMapped && (n.toneMapped = t.toneMapped),
                    void 0 !== t.userData && (n.userData = t.userData),
                    void 0 !== t.vertexColors && ("number" == typeof t.vertexColors ? n.vertexColors = t.vertexColors > 0 : n.vertexColors = t.vertexColors),
                    void 0 !== t.uniforms)
                        for (var i in t.uniforms) {
                            var a = t.uniforms[i];
                            switch (n.uniforms[i] = {},
                            a.type) {
                            case "t":
                                n.uniforms[i].value = r(a.value);
                                break;
                            case "c":
                                n.uniforms[i].value = (new Ge).setHex(a.value);
                                break;
                            case "v2":
                                n.uniforms[i].value = (new ht).fromArray(a.value);
                                break;
                            case "v3":
                                n.uniforms[i].value = (new _t).fromArray(a.value);
                                break;
                            case "v4":
                                n.uniforms[i].value = (new mt).fromArray(a.value);
                                break;
                            case "m3":
                                n.uniforms[i].value = (new ut).fromArray(a.value);
                                break;
                            case "m4":
                                n.uniforms[i].value = (new Xt).fromArray(a.value);
                                break;
                            default:
                                n.uniforms[i].value = a.value
                            }
                        }
                    if (void 0 !== t.defines && (n.defines = t.defines),
                    void 0 !== t.vertexShader && (n.vertexShader = t.vertexShader),
                    void 0 !== t.fragmentShader && (n.fragmentShader = t.fragmentShader),
                    void 0 !== t.extensions)
                        for (var o in t.extensions)
                            n.extensions[o] = t.extensions[o];
                    if (void 0 !== t.shading && (n.flatShading = 1 === t.shading),
                    void 0 !== t.size && (n.size = t.size),
                    void 0 !== t.sizeAttenuation && (n.sizeAttenuation = t.sizeAttenuation),
                    void 0 !== t.map && (n.map = r(t.map)),
                    void 0 !== t.matcap && (n.matcap = r(t.matcap)),
                    void 0 !== t.alphaMap && (n.alphaMap = r(t.alphaMap)),
                    void 0 !== t.bumpMap && (n.bumpMap = r(t.bumpMap)),
                    void 0 !== t.bumpScale && (n.bumpScale = t.bumpScale),
                    void 0 !== t.normalMap && (n.normalMap = r(t.normalMap)),
                    void 0 !== t.normalMapType && (n.normalMapType = t.normalMapType),
                    void 0 !== t.normalScale) {
                        var s = t.normalScale;
                        !1 === Array.isArray(s) && (s = [s, s]),
                        n.normalScale = (new ht).fromArray(s)
                    }
                    return void 0 !== t.displacementMap && (n.displacementMap = r(t.displacementMap)),
                    void 0 !== t.displacementScale && (n.displacementScale = t.displacementScale),
                    void 0 !== t.displacementBias && (n.displacementBias = t.displacementBias),
                    void 0 !== t.roughnessMap && (n.roughnessMap = r(t.roughnessMap)),
                    void 0 !== t.metalnessMap && (n.metalnessMap = r(t.metalnessMap)),
                    void 0 !== t.emissiveMap && (n.emissiveMap = r(t.emissiveMap)),
                    void 0 !== t.emissiveIntensity && (n.emissiveIntensity = t.emissiveIntensity),
                    void 0 !== t.specularMap && (n.specularMap = r(t.specularMap)),
                    void 0 !== t.envMap && (n.envMap = r(t.envMap)),
                    void 0 !== t.envMapIntensity && (n.envMapIntensity = t.envMapIntensity),
                    void 0 !== t.reflectivity && (n.reflectivity = t.reflectivity),
                    void 0 !== t.refractionRatio && (n.refractionRatio = t.refractionRatio),
                    void 0 !== t.lightMap && (n.lightMap = r(t.lightMap)),
                    void 0 !== t.lightMapIntensity && (n.lightMapIntensity = t.lightMapIntensity),
                    void 0 !== t.aoMap && (n.aoMap = r(t.aoMap)),
                    void 0 !== t.aoMapIntensity && (n.aoMapIntensity = t.aoMapIntensity),
                    void 0 !== t.gradientMap && (n.gradientMap = r(t.gradientMap)),
                    void 0 !== t.clearcoatMap && (n.clearcoatMap = r(t.clearcoatMap)),
                    void 0 !== t.clearcoatRoughnessMap && (n.clearcoatRoughnessMap = r(t.clearcoatRoughnessMap)),
                    void 0 !== t.clearcoatNormalMap && (n.clearcoatNormalMap = r(t.clearcoatNormalMap)),
                    void 0 !== t.clearcoatNormalScale && (n.clearcoatNormalScale = (new ht).fromArray(t.clearcoatNormalScale)),
                    void 0 !== t.transmission && (n.transmission = t.transmission),
                    void 0 !== t.transmissionMap && (n.transmissionMap = r(t.transmissionMap)),
                    n
                },
                setTextures: function(t) {
                    return this.textures = t,
                    this
                }
            });
            var nc = {
                decodeText: function(t) {
                    if ("undefined" != typeof TextDecoder)
                        return (new TextDecoder).decode(t);
                    for (var e = "", r = 0, n = t.length; r < n; r++)
                        e += String.fromCharCode(t[r]);
                    try {
                        return decodeURIComponent(escape(e))
                    } catch (t) {
                        return e
                    }
                },
                extractUrlBase: function(t) {
                    var e = t.lastIndexOf("/");
                    return -1 === e ? "./" : t.substr(0, e + 1)
                }
            };
            function ic() {
                pr.call(this),
                this.type = "InstancedBufferGeometry",
                this.instanceCount = 1 / 0
            }
            function ac(t, e, r, n) {
                "number" == typeof r && (n = r,
                r = !1,
                console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),
                Xe.call(this, t, e, r),
                this.meshPerAttribute = n || 1
            }
            function oc(t) {
                hl.call(this, t)
            }
            ic.prototype = Object.assign(Object.create(pr.prototype), {
                constructor: ic,
                isInstancedBufferGeometry: !0,
                copy: function(t) {
                    return pr.prototype.copy.call(this, t),
                    this.instanceCount = t.instanceCount,
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                toJSON: function() {
                    var t = pr.prototype.toJSON.call(this);
                    return t.instanceCount = this.instanceCount,
                    t.isInstancedBufferGeometry = !0,
                    t
                }
            }),
            ac.prototype = Object.assign(Object.create(Xe.prototype), {
                constructor: ac,
                isInstancedBufferAttribute: !0,
                copy: function(t) {
                    return Xe.prototype.copy.call(this, t),
                    this.meshPerAttribute = t.meshPerAttribute,
                    this
                },
                toJSON: function() {
                    var t = Xe.prototype.toJSON.call(this);
                    return t.meshPerAttribute = this.meshPerAttribute,
                    t.isInstancedBufferAttribute = !0,
                    t
                }
            }),
            oc.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: oc,
                load: function(t, e, r, n) {
                    var i = this
                      , a = new pl(i.manager);
                    a.setPath(i.path),
                    a.setRequestHeader(i.requestHeader),
                    a.setWithCredentials(i.withCredentials),
                    a.load(t, (function(r) {
                        try {
                            e(i.parse(JSON.parse(r)))
                        } catch (e) {
                            n ? n(e) : console.error(e),
                            i.manager.itemError(t)
                        }
                    }
                    ), r, n)
                },
                parse: function(t) {
                    var e = {}
                      , r = {};
                    function n(t, n) {
                        if (void 0 !== e[n])
                            return e[n];
                        var i = t.interleavedBuffers[n]
                          , a = function(t, e) {
                            if (void 0 !== r[e])
                                return r[e];
                            var n = t.arrayBuffers[e]
                              , i = new Uint32Array(n).buffer;
                            return r[e] = i,
                            i
                        }(t, i.buffer)
                          , o = new aa(new lc[i.type](a),i.stride);
                        return o.uuid = i.uuid,
                        e[n] = o,
                        o
                    }
                    var i = t.isInstancedBufferGeometry ? new ic : new pr
                      , a = t.data.index;
                    if (void 0 !== a) {
                        var o = new lc[a.type](a.array);
                        i.setIndex(new Xe(o,1))
                    }
                    var s = t.data.attributes;
                    for (var l in s) {
                        var c = s[l]
                          , h = void 0;
                        if (c.isInterleavedBufferAttribute)
                            h = new la(n(t.data, c.data),c.itemSize,c.offset,c.normalized);
                        else {
                            var u = new lc[c.type](c.array);
                            h = new (c.isInstancedBufferAttribute ? ac : Xe)(u,c.itemSize,c.normalized)
                        }
                        void 0 !== c.name && (h.name = c.name),
                        i.setAttribute(l, h)
                    }
                    var p = t.data.morphAttributes;
                    if (p)
                        for (var d in p) {
                            for (var f = p[d], m = [], v = 0, g = f.length; v < g; v++) {
                                var y = f[v]
                                  , _ = void 0;
                                _ = y.isInterleavedBufferAttribute ? new la(n(t.data, y.data),y.itemSize,y.offset,y.normalized) : new Xe(new lc[y.type](y.array),y.itemSize,y.normalized),
                                void 0 !== y.name && (_.name = y.name),
                                m.push(_)
                            }
                            i.morphAttributes[d] = m
                        }
                    t.data.morphTargetsRelative && (i.morphTargetsRelative = !0);
                    var x = t.data.groups || t.data.drawcalls || t.data.offsets;
                    if (void 0 !== x)
                        for (var b = 0, w = x.length; b !== w; ++b) {
                            var S = x[b];
                            i.addGroup(S.start, S.count, S.materialIndex)
                        }
                    var T = t.data.boundingSphere;
                    if (void 0 !== T) {
                        var M = new _t;
                        void 0 !== T.center && M.fromArray(T.center),
                        i.boundingSphere = new Bt(M,T.radius)
                    }
                    return t.name && (i.name = t.name),
                    t.userData && (i.userData = t.userData),
                    i
                }
            });
            var sc, lc = {
                Int8Array: Int8Array,
                Uint8Array: Uint8Array,
                Uint8ClampedArray: "undefined" != typeof Uint8ClampedArray ? Uint8ClampedArray : Uint8Array,
                Int16Array: Int16Array,
                Uint16Array: Uint16Array,
                Int32Array: Int32Array,
                Uint32Array: Uint32Array,
                Float32Array: Float32Array,
                Float64Array: Float64Array
            }, cc = function(t) {
                function e(e) {
                    return t.call(this, e) || this
                }
                st(e, t);
                var r = e.prototype;
                return r.load = function(t, e, r, n) {
                    var i = this
                      , a = "" === this.path ? nc.extractUrlBase(t) : this.path;
                    this.resourcePath = this.resourcePath || a;
                    var o = new pl(this.manager);
                    o.setPath(this.path),
                    o.setRequestHeader(this.requestHeader),
                    o.setWithCredentials(this.withCredentials),
                    o.load(t, (function(r) {
                        var a = null;
                        try {
                            a = JSON.parse(r)
                        } catch (e) {
                            return void 0 !== n && n(e),
                            void console.error("THREE:ObjectLoader: Can't parse " + t + ".", e.message)
                        }
                        var o = a.metadata;
                        void 0 !== o && void 0 !== o.type && "geometry" !== o.type.toLowerCase() ? i.parse(a, e) : console.error("THREE.ObjectLoader: Can't load " + t)
                    }
                    ), r, n)
                }
                ,
                r.parse = function(t, e) {
                    var r = this.parseShape(t.shapes)
                      , n = this.parseGeometries(t.geometries, r)
                      , i = this.parseImages(t.images, (function() {
                        void 0 !== e && e(s)
                    }
                    ))
                      , a = this.parseTextures(t.textures, i)
                      , o = this.parseMaterials(t.materials, a)
                      , s = this.parseObject(t.object, n, o);
                    return t.animations && (s.animations = this.parseAnimations(t.animations)),
                    void 0 !== t.images && 0 !== t.images.length || void 0 !== e && e(s),
                    s
                }
                ,
                r.parseShape = function(t) {
                    var e = {};
                    if (void 0 !== t)
                        for (var r = 0, n = t.length; r < n; r++) {
                            var i = (new Hl).fromJSON(t[r]);
                            e[i.uuid] = i
                        }
                    return e
                }
                ,
                r.parseGeometries = function(t, e) {
                    var r, n = {};
                    if (void 0 !== t)
                        for (var i = new oc, a = 0, o = t.length; a < o; a++) {
                            var s = void 0
                              , l = t[a];
                            switch (l.type) {
                            case "PlaneGeometry":
                            case "PlaneBufferGeometry":
                                s = new ks[l.type](l.width,l.height,l.widthSegments,l.heightSegments);
                                break;
                            case "BoxGeometry":
                            case "BoxBufferGeometry":
                            case "CubeGeometry":
                                s = new ks[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);
                                break;
                            case "CircleGeometry":
                            case "CircleBufferGeometry":
                                s = new ks[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);
                                break;
                            case "CylinderGeometry":
                            case "CylinderBufferGeometry":
                                s = new ks[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);
                                break;
                            case "ConeGeometry":
                            case "ConeBufferGeometry":
                                s = new ks[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);
                                break;
                            case "SphereGeometry":
                            case "SphereBufferGeometry":
                                s = new ks[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);
                                break;
                            case "DodecahedronGeometry":
                            case "DodecahedronBufferGeometry":
                            case "IcosahedronGeometry":
                            case "IcosahedronBufferGeometry":
                            case "OctahedronGeometry":
                            case "OctahedronBufferGeometry":
                            case "TetrahedronGeometry":
                            case "TetrahedronBufferGeometry":
                                s = new ks[l.type](l.radius,l.detail);
                                break;
                            case "RingGeometry":
                            case "RingBufferGeometry":
                                s = new ks[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);
                                break;
                            case "TorusGeometry":
                            case "TorusBufferGeometry":
                                s = new ks[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);
                                break;
                            case "TorusKnotGeometry":
                            case "TorusKnotBufferGeometry":
                                s = new ks[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);
                                break;
                            case "TubeGeometry":
                            case "TubeBufferGeometry":
                                s = new ks[l.type]((new Bl[l.path.type]).fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);
                                break;
                            case "LatheGeometry":
                            case "LatheBufferGeometry":
                                s = new ks[l.type](l.points,l.segments,l.phiStart,l.phiLength);
                                break;
                            case "PolyhedronGeometry":
                            case "PolyhedronBufferGeometry":
                                s = new ks[l.type](l.vertices,l.indices,l.radius,l.details);
                                break;
                            case "ShapeGeometry":
                            case "ShapeBufferGeometry":
                                r = [];
                                for (var c = 0, h = l.shapes.length; c < h; c++) {
                                    var u = e[l.shapes[c]];
                                    r.push(u)
                                }
                                s = new ks[l.type](r,l.curveSegments);
                                break;
                            case "ExtrudeGeometry":
                            case "ExtrudeBufferGeometry":
                                r = [];
                                for (var p = 0, d = l.shapes.length; p < d; p++) {
                                    var f = e[l.shapes[p]];
                                    r.push(f)
                                }
                                var m = l.options.extrudePath;
                                void 0 !== m && (l.options.extrudePath = (new Bl[m.type]).fromJSON(m)),
                                s = new ks[l.type](r,l.options);
                                break;
                            case "BufferGeometry":
                            case "InstancedBufferGeometry":
                                s = i.parse(l);
                                break;
                            case "Geometry":
                                console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');
                                break;
                            default:
                                console.warn('THREE.ObjectLoader: Unsupported geometry type "' + l.type + '"');
                                continue
                            }
                            s.uuid = l.uuid,
                            void 0 !== l.name && (s.name = l.name),
                            !0 === s.isBufferGeometry && void 0 !== l.userData && (s.userData = l.userData),
                            n[l.uuid] = s
                        }
                    return n
                }
                ,
                r.parseMaterials = function(t, e) {
                    var r = {}
                      , n = {};
                    if (void 0 !== t) {
                        var i = new rc;
                        i.setTextures(e);
                        for (var a = 0, o = t.length; a < o; a++) {
                            var s = t[a];
                            if ("MultiMaterial" === s.type) {
                                for (var l = [], c = 0; c < s.materials.length; c++) {
                                    var h = s.materials[c];
                                    void 0 === r[h.uuid] && (r[h.uuid] = i.parse(h)),
                                    l.push(r[h.uuid])
                                }
                                n[s.uuid] = l
                            } else
                                void 0 === r[s.uuid] && (r[s.uuid] = i.parse(s)),
                                n[s.uuid] = r[s.uuid]
                        }
                    }
                    return n
                }
                ,
                r.parseAnimations = function(t) {
                    for (var e = [], r = 0; r < t.length; r++) {
                        var n = t[r]
                          , i = al.parse(n);
                        void 0 !== n.uuid && (i.uuid = n.uuid),
                        e.push(i)
                    }
                    return e
                }
                ,
                r.parseImages = function(t, e) {
                    var r, n = this, i = {};
                    function a(t) {
                        return n.manager.itemStart(t),
                        r.load(t, (function() {
                            n.manager.itemEnd(t)
                        }
                        ), void 0, (function() {
                            n.manager.itemError(t),
                            n.manager.itemEnd(t)
                        }
                        ))
                    }
                    if (void 0 !== t && t.length > 0) {
                        var o = new ll(e);
                        (r = new ml(o)).setCrossOrigin(this.crossOrigin);
                        for (var s = 0, l = t.length; s < l; s++) {
                            var c = t[s]
                              , h = c.url;
                            if (Array.isArray(h)) {
                                i[c.uuid] = [];
                                for (var u = 0, p = h.length; u < p; u++) {
                                    var d = h[u]
                                      , f = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(d) ? d : n.resourcePath + d;
                                    i[c.uuid].push(a(f))
                                }
                            } else {
                                var m = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url) ? c.url : n.resourcePath + c.url;
                                i[c.uuid] = a(m)
                            }
                        }
                    }
                    return i
                }
                ,
                r.parseTextures = function(t, e) {
                    function r(t, e) {
                        return "number" == typeof t ? t : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", t),
                        e[t])
                    }
                    var n = {};
                    if (void 0 !== t)
                        for (var i = 0, a = t.length; i < a; i++) {
                            var o = t[i];
                            void 0 === o.image && console.warn('THREE.ObjectLoader: No "image" specified for', o.uuid),
                            void 0 === e[o.image] && console.warn("THREE.ObjectLoader: Undefined image", o.image);
                            var s = void 0;
                            (s = Array.isArray(e[o.image]) ? new Ur(e[o.image]) : new ft(e[o.image])).needsUpdate = !0,
                            s.uuid = o.uuid,
                            void 0 !== o.name && (s.name = o.name),
                            void 0 !== o.mapping && (s.mapping = r(o.mapping, hc)),
                            void 0 !== o.offset && s.offset.fromArray(o.offset),
                            void 0 !== o.repeat && s.repeat.fromArray(o.repeat),
                            void 0 !== o.center && s.center.fromArray(o.center),
                            void 0 !== o.rotation && (s.rotation = o.rotation),
                            void 0 !== o.wrap && (s.wrapS = r(o.wrap[0], uc),
                            s.wrapT = r(o.wrap[1], uc)),
                            void 0 !== o.format && (s.format = o.format),
                            void 0 !== o.type && (s.type = o.type),
                            void 0 !== o.encoding && (s.encoding = o.encoding),
                            void 0 !== o.minFilter && (s.minFilter = r(o.minFilter, pc)),
                            void 0 !== o.magFilter && (s.magFilter = r(o.magFilter, pc)),
                            void 0 !== o.anisotropy && (s.anisotropy = o.anisotropy),
                            void 0 !== o.flipY && (s.flipY = o.flipY),
                            void 0 !== o.premultiplyAlpha && (s.premultiplyAlpha = o.premultiplyAlpha),
                            void 0 !== o.unpackAlignment && (s.unpackAlignment = o.unpackAlignment),
                            n[o.uuid] = s
                        }
                    return n
                }
                ,
                r.parseObject = function(t, e, r) {
                    var n, i, a;
                    function o(t) {
                        return void 0 === e[t] && console.warn("THREE.ObjectLoader: Undefined geometry", t),
                        e[t]
                    }
                    function s(t) {
                        if (void 0 !== t) {
                            if (Array.isArray(t)) {
                                for (var e = [], n = 0, i = t.length; n < i; n++) {
                                    var a = t[n];
                                    void 0 === r[a] && console.warn("THREE.ObjectLoader: Undefined material", a),
                                    e.push(r[a])
                                }
                                return e
                            }
                            return void 0 === r[t] && console.warn("THREE.ObjectLoader: Undefined material", t),
                            r[t]
                        }
                    }
                    switch (t.type) {
                    case "Scene":
                        n = new ia,
                        void 0 !== t.background && Number.isInteger(t.background) && (n.background = new Ge(t.background)),
                        void 0 !== t.fog && ("Fog" === t.fog.type ? n.fog = new na(t.fog.color,t.fog.near,t.fog.far) : "FogExp2" === t.fog.type && (n.fog = new ra(t.fog.color,t.fog.density)));
                        break;
                    case "PerspectiveCamera":
                        n = new zr(t.fov,t.aspect,t.near,t.far),
                        void 0 !== t.focus && (n.focus = t.focus),
                        void 0 !== t.zoom && (n.zoom = t.zoom),
                        void 0 !== t.filmGauge && (n.filmGauge = t.filmGauge),
                        void 0 !== t.filmOffset && (n.filmOffset = t.filmOffset),
                        void 0 !== t.view && (n.view = Object.assign({}, t.view));
                        break;
                    case "OrthographicCamera":
                        n = new $l(t.left,t.right,t.top,t.bottom,t.near,t.far),
                        void 0 !== t.zoom && (n.zoom = t.zoom),
                        void 0 !== t.view && (n.view = Object.assign({}, t.view));
                        break;
                    case "AmbientLight":
                        n = new Jl(t.color,t.intensity);
                        break;
                    case "DirectionalLight":
                        n = new Zl(t.color,t.intensity);
                        break;
                    case "PointLight":
                        n = new Yl(t.color,t.intensity,t.distance,t.decay);
                        break;
                    case "RectAreaLight":
                        n = new Ql(t.color,t.intensity,t.width,t.height);
                        break;
                    case "SpotLight":
                        n = new ql(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);
                        break;
                    case "HemisphereLight":
                        n = new Vl(t.color,t.groundColor,t.intensity);
                        break;
                    case "LightProbe":
                        n = (new ec).fromJSON(t);
                        break;
                    case "SkinnedMesh":
                        console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");
                    case "Mesh":
                        n = new Lr(i = o(t.geometry),a = s(t.material));
                        break;
                    case "InstancedMesh":
                        i = o(t.geometry),
                        a = s(t.material);
                        var l = t.count
                          , c = t.instanceMatrix;
                        (n = new Ha(i,a,l)).instanceMatrix = new Xe(new Float32Array(c.array),16);
                        break;
                    case "LOD":
                        n = new Da;
                        break;
                    case "Line":
                        n = new Ya(o(t.geometry),s(t.material),t.mode);
                        break;
                    case "LineLoop":
                        n = new Ja(o(t.geometry),s(t.material));
                        break;
                    case "LineSegments":
                        n = new Za(o(t.geometry),s(t.material));
                        break;
                    case "PointCloud":
                    case "Points":
                        n = new io(o(t.geometry),s(t.material));
                        break;
                    case "Sprite":
                        n = new wa(s(t.material));
                        break;
                    case "Group":
                        n = new Ki;
                        break;
                    default:
                        n = new ye
                    }
                    if (n.uuid = t.uuid,
                    void 0 !== t.name && (n.name = t.name),
                    void 0 !== t.matrix ? (n.matrix.fromArray(t.matrix),
                    void 0 !== t.matrixAutoUpdate && (n.matrixAutoUpdate = t.matrixAutoUpdate),
                    n.matrixAutoUpdate && n.matrix.decompose(n.position, n.quaternion, n.scale)) : (void 0 !== t.position && n.position.fromArray(t.position),
                    void 0 !== t.rotation && n.rotation.fromArray(t.rotation),
                    void 0 !== t.quaternion && n.quaternion.fromArray(t.quaternion),
                    void 0 !== t.scale && n.scale.fromArray(t.scale)),
                    void 0 !== t.castShadow && (n.castShadow = t.castShadow),
                    void 0 !== t.receiveShadow && (n.receiveShadow = t.receiveShadow),
                    t.shadow && (void 0 !== t.shadow.bias && (n.shadow.bias = t.shadow.bias),
                    void 0 !== t.shadow.normalBias && (n.shadow.normalBias = t.shadow.normalBias),
                    void 0 !== t.shadow.radius && (n.shadow.radius = t.shadow.radius),
                    void 0 !== t.shadow.mapSize && n.shadow.mapSize.fromArray(t.shadow.mapSize),
                    void 0 !== t.shadow.camera && (n.shadow.camera = this.parseObject(t.shadow.camera))),
                    void 0 !== t.visible && (n.visible = t.visible),
                    void 0 !== t.frustumCulled && (n.frustumCulled = t.frustumCulled),
                    void 0 !== t.renderOrder && (n.renderOrder = t.renderOrder),
                    void 0 !== t.userData && (n.userData = t.userData),
                    void 0 !== t.layers && (n.layers.mask = t.layers),
                    void 0 !== t.children)
                        for (var h = t.children, u = 0; u < h.length; u++)
                            n.add(this.parseObject(h[u], e, r));
                    if ("LOD" === t.type) {
                        void 0 !== t.autoUpdate && (n.autoUpdate = t.autoUpdate);
                        for (var p = t.levels, d = 0; d < p.length; d++) {
                            var f = p[d]
                              , m = n.getObjectByProperty("uuid", f.object);
                            void 0 !== m && n.addLevel(m, f.distance)
                        }
                    }
                    return n
                }
                ,
                r.setTexturePath = function(t) {
                    return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),
                    this.setResourcePath(t)
                }
                ,
                e
            }(hl), hc = {
                UVMapping: r,
                CubeReflectionMapping: i,
                CubeRefractionMapping: a,
                EquirectangularReflectionMapping: o,
                EquirectangularRefractionMapping: s,
                CubeUVReflectionMapping: l,
                CubeUVRefractionMapping: c
            }, uc = {
                RepeatWrapping: h,
                ClampToEdgeWrapping: u,
                MirroredRepeatWrapping: p
            }, pc = {
                NearestFilter: d,
                NearestMipmapNearestFilter: f,
                NearestMipmapLinearFilter: m,
                LinearFilter: v,
                LinearMipmapNearestFilter: 1007,
                LinearMipmapLinearFilter: g
            };
            function dc(t) {
                "undefined" == typeof createImageBitmap && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),
                "undefined" == typeof fetch && console.warn("THREE.ImageBitmapLoader: fetch() not supported."),
                hl.call(this, t),
                this.options = {
                    premultiplyAlpha: "none"
                }
            }
            function fc() {
                this.type = "ShapePath",
                this.color = new Ge,
                this.subPaths = [],
                this.currentPath = null
            }
            function mc(t) {
                this.type = "Font",
                this.data = t
            }
            function vc(t, e, r, n, i) {
                var a = i.glyphs[t] || i.glyphs["?"];
                if (a) {
                    var o, s, l, c, h, u, p, d, f = new fc;
                    if (a.o)
                        for (var m = a._cachedOutline || (a._cachedOutline = a.o.split(" ")), v = 0, g = m.length; v < g; )
                            switch (m[v++]) {
                            case "m":
                                o = m[v++] * e + r,
                                s = m[v++] * e + n,
                                f.moveTo(o, s);
                                break;
                            case "l":
                                o = m[v++] * e + r,
                                s = m[v++] * e + n,
                                f.lineTo(o, s);
                                break;
                            case "q":
                                l = m[v++] * e + r,
                                c = m[v++] * e + n,
                                h = m[v++] * e + r,
                                u = m[v++] * e + n,
                                f.quadraticCurveTo(h, u, l, c);
                                break;
                            case "b":
                                l = m[v++] * e + r,
                                c = m[v++] * e + n,
                                h = m[v++] * e + r,
                                u = m[v++] * e + n,
                                p = m[v++] * e + r,
                                d = m[v++] * e + n,
                                f.bezierCurveTo(h, u, p, d, l, c)
                            }
                    return {
                        offsetX: a.ha * e,
                        path: f
                    }
                }
                console.error('THREE.Font: character "' + t + '" does not exists in font family ' + i.familyName + ".")
            }
            function gc(t) {
                hl.call(this, t)
            }
            dc.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: dc,
                isImageBitmapLoader: !0,
                setOptions: function(t) {
                    return this.options = t,
                    this
                },
                load: function(t, e, r, n) {
                    void 0 === t && (t = ""),
                    void 0 !== this.path && (t = this.path + t),
                    t = this.manager.resolveURL(t);
                    var i = this
                      , a = sl.get(t);
                    if (void 0 !== a)
                        return i.manager.itemStart(t),
                        setTimeout((function() {
                            e && e(a),
                            i.manager.itemEnd(t)
                        }
                        ), 0),
                        a;
                    var o = {};
                    o.credentials = "anonymous" === this.crossOrigin ? "same-origin" : "include",
                    fetch(t, o).then((function(t) {
                        return t.blob()
                    }
                    )).then((function(t) {
                        return createImageBitmap(t, i.options)
                    }
                    )).then((function(r) {
                        sl.add(t, r),
                        e && e(r),
                        i.manager.itemEnd(t)
                    }
                    )).catch((function(e) {
                        n && n(e),
                        i.manager.itemError(t),
                        i.manager.itemEnd(t)
                    }
                    )),
                    i.manager.itemStart(t)
                }
            }),
            Object.assign(fc.prototype, {
                moveTo: function(t, e) {
                    return this.currentPath = new Gl,
                    this.subPaths.push(this.currentPath),
                    this.currentPath.moveTo(t, e),
                    this
                },
                lineTo: function(t, e) {
                    return this.currentPath.lineTo(t, e),
                    this
                },
                quadraticCurveTo: function(t, e, r, n) {
                    return this.currentPath.quadraticCurveTo(t, e, r, n),
                    this
                },
                bezierCurveTo: function(t, e, r, n, i, a) {
                    return this.currentPath.bezierCurveTo(t, e, r, n, i, a),
                    this
                },
                splineThru: function(t) {
                    return this.currentPath.splineThru(t),
                    this
                },
                toShapes: function(t, e) {
                    function r(t) {
                        for (var e = [], r = 0, n = t.length; r < n; r++) {
                            var i = t[r]
                              , a = new Hl;
                            a.curves = i.curves,
                            e.push(a)
                        }
                        return e
                    }
                    function n(t, e) {
                        for (var r = e.length, n = !1, i = r - 1, a = 0; a < r; i = a++) {
                            var o = e[i]
                              , s = e[a]
                              , l = s.x - o.x
                              , c = s.y - o.y;
                            if (Math.abs(c) > Number.EPSILON) {
                                if (c < 0 && (o = e[a],
                                l = -l,
                                s = e[i],
                                c = -c),
                                t.y < o.y || t.y > s.y)
                                    continue;
                                if (t.y === o.y) {
                                    if (t.x === o.x)
                                        return !0
                                } else {
                                    var h = c * (t.x - o.x) - l * (t.y - o.y);
                                    if (0 === h)
                                        return !0;
                                    if (h < 0)
                                        continue;
                                    n = !n
                                }
                            } else {
                                if (t.y !== o.y)
                                    continue;
                                if (s.x <= t.x && t.x <= o.x || o.x <= t.x && t.x <= s.x)
                                    return !0
                            }
                        }
                        return n
                    }
                    var i, a, o, s = es.isClockWise, l = this.subPaths;
                    if (0 === l.length)
                        return [];
                    if (!0 === e)
                        return r(l);
                    var c = [];
                    if (1 === l.length)
                        return a = l[0],
                        (o = new Hl).curves = a.curves,
                        c.push(o),
                        c;
                    var h = !s(l[0].getPoints());
                    h = t ? !h : h;
                    var u, p, d = [], f = [], m = [], v = 0;
                    f[v] = void 0,
                    m[v] = [];
                    for (var g = 0, y = l.length; g < y; g++)
                        i = s(u = (a = l[g]).getPoints()),
                        (i = t ? !i : i) ? (!h && f[v] && v++,
                        f[v] = {
                            s: new Hl,
                            p: u
                        },
                        f[v].s.curves = a.curves,
                        h && v++,
                        m[v] = []) : m[v].push({
                            h: a,
                            p: u[0]
                        });
                    if (!f[0])
                        return r(l);
                    if (f.length > 1) {
                        for (var _ = !1, x = [], b = 0, w = f.length; b < w; b++)
                            d[b] = [];
                        for (var S = 0, T = f.length; S < T; S++)
                            for (var M = m[S], E = 0; E < M.length; E++) {
                                for (var A = M[E], P = !0, C = 0; C < f.length; C++)
                                    n(A.p, f[C].p) && (S !== C && x.push({
                                        froms: S,
                                        tos: C,
                                        hole: E
                                    }),
                                    P ? (P = !1,
                                    d[C].push(A)) : _ = !0);
                                P && d[S].push(A)
                            }
                        x.length > 0 && (_ || (m = d))
                    }
                    for (var L = 0, D = f.length; L < D; L++) {
                        o = f[L].s,
                        c.push(o);
                        for (var R = 0, I = (p = m[L]).length; R < I; R++)
                            o.holes.push(p[R].h)
                    }
                    return c
                }
            }),
            Object.assign(mc.prototype, {
                isFont: !0,
                generateShapes: function(t, e) {
                    void 0 === e && (e = 100);
                    for (var r = [], n = function(t, e, r) {
                        for (var n = Array.from ? Array.from(t) : String(t).split(""), i = e / r.resolution, a = (r.boundingBox.yMax - r.boundingBox.yMin + r.underlineThickness) * i, o = [], s = 0, l = 0, c = 0; c < n.length; c++) {
                            var h = n[c];
                            if ("\n" === h)
                                s = 0,
                                l -= a;
                            else {
                                var u = vc(h, i, s, l, r);
                                s += u.offsetX,
                                o.push(u.path)
                            }
                        }
                        return o
                    }(t, e, this.data), i = 0, a = n.length; i < a; i++)
                        Array.prototype.push.apply(r, n[i].toShapes());
                    return r
                }
            }),
            gc.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: gc,
                load: function(t, e, r, n) {
                    var i = this
                      , a = new pl(this.manager);
                    a.setPath(this.path),
                    a.setRequestHeader(this.requestHeader),
                    a.setWithCredentials(i.withCredentials),
                    a.load(t, (function(t) {
                        var r;
                        try {
                            r = JSON.parse(t)
                        } catch (e) {
                            console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),
                            r = JSON.parse(t.substring(65, t.length - 2))
                        }
                        var n = i.parse(r);
                        e && e(n)
                    }
                    ), r, n)
                },
                parse: function(t) {
                    return new mc(t)
                }
            });
            var yc = {
                getContext: function() {
                    return void 0 === sc && (sc = new (window.AudioContext || window.webkitAudioContext)),
                    sc
                },
                setContext: function(t) {
                    sc = t
                }
            };
            function _c(t) {
                hl.call(this, t)
            }
            function xc(t, e, r) {
                ec.call(this, void 0, r);
                var n = (new Ge).set(t)
                  , i = (new Ge).set(e)
                  , a = new _t(n.r,n.g,n.b)
                  , o = new _t(i.r,i.g,i.b)
                  , s = Math.sqrt(Math.PI)
                  , l = s * Math.sqrt(.75);
                this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),
                this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)
            }
            function bc(t, e) {
                ec.call(this, void 0, e);
                var r = (new Ge).set(t);
                this.sh.coefficients[0].set(r.r, r.g, r.b).multiplyScalar(2 * Math.sqrt(Math.PI))
            }
            _c.prototype = Object.assign(Object.create(hl.prototype), {
                constructor: _c,
                load: function(t, e, r, n) {
                    var i = this
                      , a = new pl(i.manager);
                    a.setResponseType("arraybuffer"),
                    a.setPath(i.path),
                    a.setRequestHeader(i.requestHeader),
                    a.setWithCredentials(i.withCredentials),
                    a.load(t, (function(r) {
                        try {
                            var a = r.slice(0);
                            yc.getContext().decodeAudioData(a, (function(t) {
                                e(t)
                            }
                            ))
                        } catch (e) {
                            n ? n(e) : console.error(e),
                            i.manager.itemError(t)
                        }
                    }
                    ), r, n)
                }
            }),
            xc.prototype = Object.assign(Object.create(ec.prototype), {
                constructor: xc,
                isHemisphereLightProbe: !0,
                copy: function(t) {
                    return ec.prototype.copy.call(this, t),
                    this
                },
                toJSON: function(t) {
                    return ec.prototype.toJSON.call(this, t)
                }
            }),
            bc.prototype = Object.assign(Object.create(ec.prototype), {
                constructor: bc,
                isAmbientLightProbe: !0,
                copy: function(t) {
                    return ec.prototype.copy.call(this, t),
                    this
                },
                toJSON: function(t) {
                    return ec.prototype.toJSON.call(this, t)
                }
            });
            var wc = new Xt
              , Sc = new Xt;
            function Tc() {
                this.type = "StereoCamera",
                this.aspect = 1,
                this.eyeSep = .064,
                this.cameraL = new zr,
                this.cameraL.layers.enable(1),
                this.cameraL.matrixAutoUpdate = !1,
                this.cameraR = new zr,
                this.cameraR.layers.enable(2),
                this.cameraR.matrixAutoUpdate = !1,
                this._cache = {
                    focus: null,
                    fov: null,
                    aspect: null,
                    near: null,
                    far: null,
                    zoom: null,
                    eyeSep: null
                }
            }
            Object.assign(Tc.prototype, {
                update: function(t) {
                    var e = this._cache;
                    if (e.focus !== t.focus || e.fov !== t.fov || e.aspect !== t.aspect * this.aspect || e.near !== t.near || e.far !== t.far || e.zoom !== t.zoom || e.eyeSep !== this.eyeSep) {
                        e.focus = t.focus,
                        e.fov = t.fov,
                        e.aspect = t.aspect * this.aspect,
                        e.near = t.near,
                        e.far = t.far,
                        e.zoom = t.zoom,
                        e.eyeSep = this.eyeSep;
                        var r, n, i = t.projectionMatrix.clone(), a = e.eyeSep / 2, o = a * e.near / e.focus, s = e.near * Math.tan(it.DEG2RAD * e.fov * .5) / e.zoom;
                        Sc.elements[12] = -a,
                        wc.elements[12] = a,
                        r = -s * e.aspect + o,
                        n = s * e.aspect + o,
                        i.elements[0] = 2 * e.near / (n - r),
                        i.elements[8] = (n + r) / (n - r),
                        this.cameraL.projectionMatrix.copy(i),
                        r = -s * e.aspect - o,
                        n = s * e.aspect - o,
                        i.elements[0] = 2 * e.near / (n - r),
                        i.elements[8] = (n + r) / (n - r),
                        this.cameraR.projectionMatrix.copy(i)
                    }
                    this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Sc),
                    this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(wc)
                }
            });
            var Mc = function() {
                function t(t) {
                    this.autoStart = void 0 === t || t,
                    this.startTime = 0,
                    this.oldTime = 0,
                    this.elapsedTime = 0,
                    this.running = !1
                }
                var e = t.prototype;
                return e.start = function() {
                    this.startTime = ("undefined" == typeof performance ? Date : performance).now(),
                    this.oldTime = this.startTime,
                    this.elapsedTime = 0,
                    this.running = !0
                }
                ,
                e.stop = function() {
                    this.getElapsedTime(),
                    this.running = !1,
                    this.autoStart = !1
                }
                ,
                e.getElapsedTime = function() {
                    return this.getDelta(),
                    this.elapsedTime
                }
                ,
                e.getDelta = function() {
                    var t = 0;
                    if (this.autoStart && !this.running)
                        return this.start(),
                        0;
                    if (this.running) {
                        var e = ("undefined" == typeof performance ? Date : performance).now();
                        t = (e - this.oldTime) / 1e3,
                        this.oldTime = e,
                        this.elapsedTime += t
                    }
                    return t
                }
                ,
                t
            }()
              , Ec = new _t
              , Ac = new yt
              , Pc = new _t
              , Cc = new _t
              , Lc = function(t) {
                function e() {
                    var e;
                    return (e = t.call(this) || this).type = "AudioListener",
                    e.context = yc.getContext(),
                    e.gain = e.context.createGain(),
                    e.gain.connect(e.context.destination),
                    e.filter = null,
                    e.timeDelta = 0,
                    e._clock = new Mc,
                    e
                }
                st(e, t);
                var r = e.prototype;
                return r.getInput = function() {
                    return this.gain
                }
                ,
                r.removeFilter = function() {
                    return null !== this.filter && (this.gain.disconnect(this.filter),
                    this.filter.disconnect(this.context.destination),
                    this.gain.connect(this.context.destination),
                    this.filter = null),
                    this
                }
                ,
                r.getFilter = function() {
                    return this.filter
                }
                ,
                r.setFilter = function(t) {
                    return null !== this.filter ? (this.gain.disconnect(this.filter),
                    this.filter.disconnect(this.context.destination)) : this.gain.disconnect(this.context.destination),
                    this.filter = t,
                    this.gain.connect(this.filter),
                    this.filter.connect(this.context.destination),
                    this
                }
                ,
                r.getMasterVolume = function() {
                    return this.gain.gain.value
                }
                ,
                r.setMasterVolume = function(t) {
                    return this.gain.gain.setTargetAtTime(t, this.context.currentTime, .01),
                    this
                }
                ,
                r.updateMatrixWorld = function(e) {
                    t.prototype.updateMatrixWorld.call(this, e);
                    var r = this.context.listener
                      , n = this.up;
                    if (this.timeDelta = this._clock.getDelta(),
                    this.matrixWorld.decompose(Ec, Ac, Pc),
                    Cc.set(0, 0, -1).applyQuaternion(Ac),
                    r.positionX) {
                        var i = this.context.currentTime + this.timeDelta;
                        r.positionX.linearRampToValueAtTime(Ec.x, i),
                        r.positionY.linearRampToValueAtTime(Ec.y, i),
                        r.positionZ.linearRampToValueAtTime(Ec.z, i),
                        r.forwardX.linearRampToValueAtTime(Cc.x, i),
                        r.forwardY.linearRampToValueAtTime(Cc.y, i),
                        r.forwardZ.linearRampToValueAtTime(Cc.z, i),
                        r.upX.linearRampToValueAtTime(n.x, i),
                        r.upY.linearRampToValueAtTime(n.y, i),
                        r.upZ.linearRampToValueAtTime(n.z, i)
                    } else
                        r.setPosition(Ec.x, Ec.y, Ec.z),
                        r.setOrientation(Cc.x, Cc.y, Cc.z, n.x, n.y, n.z)
                }
                ,
                e
            }(ye)
              , Dc = function(t) {
                function e(e) {
                    var r;
                    return (r = t.call(this) || this).type = "Audio",
                    r.listener = e,
                    r.context = e.context,
                    r.gain = r.context.createGain(),
                    r.gain.connect(e.getInput()),
                    r.autoplay = !1,
                    r.buffer = null,
                    r.detune = 0,
                    r.loop = !1,
                    r.loopStart = 0,
                    r.loopEnd = 0,
                    r.offset = 0,
                    r.duration = void 0,
                    r.playbackRate = 1,
                    r.isPlaying = !1,
                    r.hasPlaybackControl = !0,
                    r.source = null,
                    r.sourceType = "empty",
                    r._startedAt = 0,
                    r._progress = 0,
                    r._connected = !1,
                    r.filters = [],
                    r
                }
                st(e, t);
                var r = e.prototype;
                return r.getOutput = function() {
                    return this.gain
                }
                ,
                r.setNodeSource = function(t) {
                    return this.hasPlaybackControl = !1,
                    this.sourceType = "audioNode",
                    this.source = t,
                    this.connect(),
                    this
                }
                ,
                r.setMediaElementSource = function(t) {
                    return this.hasPlaybackControl = !1,
                    this.sourceType = "mediaNode",
                    this.source = this.context.createMediaElementSource(t),
                    this.connect(),
                    this
                }
                ,
                r.setMediaStreamSource = function(t) {
                    return this.hasPlaybackControl = !1,
                    this.sourceType = "mediaStreamNode",
                    this.source = this.context.createMediaStreamSource(t),
                    this.connect(),
                    this
                }
                ,
                r.setBuffer = function(t) {
                    return this.buffer = t,
                    this.sourceType = "buffer",
                    this.autoplay && this.play(),
                    this
                }
                ,
                r.play = function(t) {
                    if (void 0 === t && (t = 0),
                    !0 !== this.isPlaying) {
                        if (!1 !== this.hasPlaybackControl) {
                            this._startedAt = this.context.currentTime + t;
                            var e = this.context.createBufferSource();
                            return e.buffer = this.buffer,
                            e.loop = this.loop,
                            e.loopStart = this.loopStart,
                            e.loopEnd = this.loopEnd,
                            e.onended = this.onEnded.bind(this),
                            e.start(this._startedAt, this._progress + this.offset, this.duration),
                            this.isPlaying = !0,
                            this.source = e,
                            this.setDetune(this.detune),
                            this.setPlaybackRate(this.playbackRate),
                            this.connect()
                        }
                        console.warn("THREE.Audio: this Audio has no playback control.")
                    } else
                        console.warn("THREE.Audio: Audio is already playing.")
                }
                ,
                r.pause = function() {
                    if (!1 !== this.hasPlaybackControl)
                        return !0 === this.isPlaying && (this._progress += Math.max(this.context.currentTime - this._startedAt, 0) * this.playbackRate,
                        !0 === this.loop && (this._progress = this._progress % (this.duration || this.buffer.duration)),
                        this.source.stop(),
                        this.source.onended = null,
                        this.isPlaying = !1),
                        this;
                    console.warn("THREE.Audio: this Audio has no playback control.")
                }
                ,
                r.stop = function() {
                    if (!1 !== this.hasPlaybackControl)
                        return this._progress = 0,
                        this.source.stop(),
                        this.source.onended = null,
                        this.isPlaying = !1,
                        this;
                    console.warn("THREE.Audio: this Audio has no playback control.")
                }
                ,
                r.connect = function() {
                    if (this.filters.length > 0) {
                        this.source.connect(this.filters[0]);
                        for (var t = 1, e = this.filters.length; t < e; t++)
                            this.filters[t - 1].connect(this.filters[t]);
                        this.filters[this.filters.length - 1].connect(this.getOutput())
                    } else
                        this.source.connect(this.getOutput());
                    return this._connected = !0,
                    this
                }
                ,
                r.disconnect = function() {
                    if (this.filters.length > 0) {
                        this.source.disconnect(this.filters[0]);
                        for (var t = 1, e = this.filters.length; t < e; t++)
                            this.filters[t - 1].disconnect(this.filters[t]);
                        this.filters[this.filters.length - 1].disconnect(this.getOutput())
                    } else
                        this.source.disconnect(this.getOutput());
                    return this._connected = !1,
                    this
                }
                ,
                r.getFilters = function() {
                    return this.filters
                }
                ,
                r.setFilters = function(t) {
                    return t || (t = []),
                    !0 === this._connected ? (this.disconnect(),
                    this.filters = t.slice(),
                    this.connect()) : this.filters = t.slice(),
                    this
                }
                ,
                r.setDetune = function(t) {
                    if (this.detune = t,
                    void 0 !== this.source.detune)
                        return !0 === this.isPlaying && this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, .01),
                        this
                }
                ,
                r.getDetune = function() {
                    return this.detune
                }
                ,
                r.getFilter = function() {
                    return this.getFilters()[0]
                }
                ,
                r.setFilter = function(t) {
                    return this.setFilters(t ? [t] : [])
                }
                ,
                r.setPlaybackRate = function(t) {
                    if (!1 !== this.hasPlaybackControl)
                        return this.playbackRate = t,
                        !0 === this.isPlaying && this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, .01),
                        this;
                    console.warn("THREE.Audio: this Audio has no playback control.")
                }
                ,
                r.getPlaybackRate = function() {
                    return this.playbackRate
                }
                ,
                r.onEnded = function() {
                    this.isPlaying = !1
                }
                ,
                r.getLoop = function() {
                    return !1 === this.hasPlaybackControl ? (console.warn("THREE.Audio: this Audio has no playback control."),
                    !1) : this.loop
                }
                ,
                r.setLoop = function(t) {
                    if (!1 !== this.hasPlaybackControl)
                        return this.loop = t,
                        !0 === this.isPlaying && (this.source.loop = this.loop),
                        this;
                    console.warn("THREE.Audio: this Audio has no playback control.")
                }
                ,
                r.setLoopStart = function(t) {
                    return this.loopStart = t,
                    this
                }
                ,
                r.setLoopEnd = function(t) {
                    return this.loopEnd = t,
                    this
                }
                ,
                r.getVolume = function() {
                    return this.gain.gain.value
                }
                ,
                r.setVolume = function(t) {
                    return this.gain.gain.setTargetAtTime(t, this.context.currentTime, .01),
                    this
                }
                ,
                e
            }(ye)
              , Rc = new _t
              , Ic = new yt
              , kc = new _t
              , Oc = new _t
              , Fc = function(t) {
                function e(e) {
                    var r;
                    return (r = t.call(this, e) || this).panner = r.context.createPanner(),
                    r.panner.panningModel = "HRTF",
                    r.panner.connect(r.gain),
                    r
                }
                st(e, t);
                var r = e.prototype;
                return r.getOutput = function() {
                    return this.panner
                }
                ,
                r.getRefDistance = function() {
                    return this.panner.refDistance
                }
                ,
                r.setRefDistance = function(t) {
                    return this.panner.refDistance = t,
                    this
                }
                ,
                r.getRolloffFactor = function() {
                    return this.panner.rolloffFactor
                }
                ,
                r.setRolloffFactor = function(t) {
                    return this.panner.rolloffFactor = t,
                    this
                }
                ,
                r.getDistanceModel = function() {
                    return this.panner.distanceModel
                }
                ,
                r.setDistanceModel = function(t) {
                    return this.panner.distanceModel = t,
                    this
                }
                ,
                r.getMaxDistance = function() {
                    return this.panner.maxDistance
                }
                ,
                r.setMaxDistance = function(t) {
                    return this.panner.maxDistance = t,
                    this
                }
                ,
                r.setDirectionalCone = function(t, e, r) {
                    return this.panner.coneInnerAngle = t,
                    this.panner.coneOuterAngle = e,
                    this.panner.coneOuterGain = r,
                    this
                }
                ,
                r.updateMatrixWorld = function(e) {
                    if (t.prototype.updateMatrixWorld.call(this, e),
                    !0 !== this.hasPlaybackControl || !1 !== this.isPlaying) {
                        this.matrixWorld.decompose(Rc, Ic, kc),
                        Oc.set(0, 0, 1).applyQuaternion(Ic);
                        var r = this.panner;
                        if (r.positionX) {
                            var n = this.context.currentTime + this.listener.timeDelta;
                            r.positionX.linearRampToValueAtTime(Rc.x, n),
                            r.positionY.linearRampToValueAtTime(Rc.y, n),
                            r.positionZ.linearRampToValueAtTime(Rc.z, n),
                            r.orientationX.linearRampToValueAtTime(Oc.x, n),
                            r.orientationY.linearRampToValueAtTime(Oc.y, n),
                            r.orientationZ.linearRampToValueAtTime(Oc.z, n)
                        } else
                            r.setPosition(Rc.x, Rc.y, Rc.z),
                            r.setOrientation(Oc.x, Oc.y, Oc.z)
                    }
                }
                ,
                e
            }(Dc)
              , Nc = function() {
                function t(t, e) {
                    this.analyser = t.context.createAnalyser(),
                    this.analyser.fftSize = void 0 !== e ? e : 2048,
                    this.data = new Uint8Array(this.analyser.frequencyBinCount),
                    t.getOutput().connect(this.analyser)
                }
                var e = t.prototype;
                return e.getFrequencyData = function() {
                    return this.analyser.getByteFrequencyData(this.data),
                    this.data
                }
                ,
                e.getAverageFrequency = function() {
                    for (var t = 0, e = this.getFrequencyData(), r = 0; r < e.length; r++)
                        t += e[r];
                    return t / e.length
                }
                ,
                t
            }();
            function Bc(t, e, r) {
                var n, i, a;
                switch (this.binding = t,
                this.valueSize = r,
                e) {
                case "quaternion":
                    n = this._slerp,
                    i = this._slerpAdditive,
                    a = this._setAdditiveIdentityQuaternion,
                    this.buffer = new Float64Array(6 * r),
                    this._workIndex = 5;
                    break;
                case "string":
                case "bool":
                    n = this._select,
                    i = this._select,
                    a = this._setAdditiveIdentityOther,
                    this.buffer = new Array(5 * r);
                    break;
                default:
                    n = this._lerp,
                    i = this._lerpAdditive,
                    a = this._setAdditiveIdentityNumeric,
                    this.buffer = new Float64Array(5 * r)
                }
                this._mixBufferRegion = n,
                this._mixBufferRegionAdditive = i,
                this._setIdentity = a,
                this._origIndex = 3,
                this._addIndex = 4,
                this.cumulativeWeight = 0,
                this.cumulativeWeightAdditive = 0,
                this.useCount = 0,
                this.referenceCount = 0
            }
            Object.assign(Bc.prototype, {
                accumulate: function(t, e) {
                    var r = this.buffer
                      , n = this.valueSize
                      , i = t * n + n
                      , a = this.cumulativeWeight;
                    if (0 === a) {
                        for (var o = 0; o !== n; ++o)
                            r[i + o] = r[o];
                        a = e
                    } else {
                        var s = e / (a += e);
                        this._mixBufferRegion(r, i, 0, s, n)
                    }
                    this.cumulativeWeight = a
                },
                accumulateAdditive: function(t) {
                    var e = this.buffer
                      , r = this.valueSize
                      , n = r * this._addIndex;
                    0 === this.cumulativeWeightAdditive && this._setIdentity(),
                    this._mixBufferRegionAdditive(e, n, 0, t, r),
                    this.cumulativeWeightAdditive += t
                },
                apply: function(t) {
                    var e = this.valueSize
                      , r = this.buffer
                      , n = t * e + e
                      , i = this.cumulativeWeight
                      , a = this.cumulativeWeightAdditive
                      , o = this.binding;
                    if (this.cumulativeWeight = 0,
                    this.cumulativeWeightAdditive = 0,
                    i < 1) {
                        var s = e * this._origIndex;
                        this._mixBufferRegion(r, n, s, 1 - i, e)
                    }
                    a > 0 && this._mixBufferRegionAdditive(r, n, this._addIndex * e, 1, e);
                    for (var l = e, c = e + e; l !== c; ++l)
                        if (r[l] !== r[l + e]) {
                            o.setValue(r, n);
                            break
                        }
                },
                saveOriginalState: function() {
                    var t = this.binding
                      , e = this.buffer
                      , r = this.valueSize
                      , n = r * this._origIndex;
                    t.getValue(e, n);
                    for (var i = r, a = n; i !== a; ++i)
                        e[i] = e[n + i % r];
                    this._setIdentity(),
                    this.cumulativeWeight = 0,
                    this.cumulativeWeightAdditive = 0
                },
                restoreOriginalState: function() {
                    var t = 3 * this.valueSize;
                    this.binding.setValue(this.buffer, t)
                },
                _setAdditiveIdentityNumeric: function() {
                    for (var t = this._addIndex * this.valueSize, e = t + this.valueSize, r = t; r < e; r++)
                        this.buffer[r] = 0
                },
                _setAdditiveIdentityQuaternion: function() {
                    this._setAdditiveIdentityNumeric(),
                    this.buffer[this._addIndex * this.valueSize + 3] = 1
                },
                _setAdditiveIdentityOther: function() {
                    for (var t = this._origIndex * this.valueSize, e = this._addIndex * this.valueSize, r = 0; r < this.valueSize; r++)
                        this.buffer[e + r] = this.buffer[t + r]
                },
                _select: function(t, e, r, n, i) {
                    if (n >= .5)
                        for (var a = 0; a !== i; ++a)
                            t[e + a] = t[r + a]
                },
                _slerp: function(t, e, r, n) {
                    yt.slerpFlat(t, e, t, e, t, r, n)
                },
                _slerpAdditive: function(t, e, r, n, i) {
                    var a = this._workIndex * i;
                    yt.multiplyQuaternionsFlat(t, a, t, e, t, r),
                    yt.slerpFlat(t, e, t, e, t, a, n)
                },
                _lerp: function(t, e, r, n, i) {
                    for (var a = 1 - n, o = 0; o !== i; ++o) {
                        var s = e + o;
                        t[s] = t[s] * a + t[r + o] * n
                    }
                },
                _lerpAdditive: function(t, e, r, n, i) {
                    for (var a = 0; a !== i; ++a) {
                        var o = e + a;
                        t[o] = t[o] + t[r + a] * n
                    }
                }
            });
            var zc = new RegExp("[\\[\\]\\.:\\/]","g")
              , Gc = "[^\\[\\]\\.:\\/]"
              , Hc = "[^" + "\\[\\]\\.:\\/".replace("\\.", "") + "]"
              , Uc = /((?:WC+[\/:])*)/.source.replace("WC", Gc)
              , Vc = /(WCOD+)?/.source.replace("WCOD", Hc)
              , jc = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Gc)
              , Wc = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Gc)
              , qc = new RegExp("^" + Uc + Vc + jc + Wc + "$")
              , Xc = ["material", "materials", "bones"];
            function Yc(t, e, r) {
                var n = r || $c.parseTrackName(e);
                this._targetGroup = t,
                this._bindings = t.subscribe_(e, n)
            }
            function $c(t, e, r) {
                this.path = e,
                this.parsedPath = r || $c.parseTrackName(e),
                this.node = $c.findNode(t, this.parsedPath.nodeName) || t,
                this.rootNode = t
            }
            function Kc() {
                this.uuid = it.generateUUID(),
                this._objects = Array.prototype.slice.call(arguments),
                this.nCachedObjects_ = 0;
                var t = {};
                this._indicesByUUID = t;
                for (var e = 0, r = arguments.length; e !== r; ++e)
                    t[arguments[e].uuid] = e;
                this._paths = [],
                this._parsedPaths = [],
                this._bindings = [],
                this._bindingsIndicesByPath = {};
                var n = this;
                this.stats = {
                    objects: {
                        get total() {
                            return n._objects.length
                        },
                        get inUse() {
                            return this.total - n.nCachedObjects_
                        }
                    },
                    get bindingsPerObject() {
                        return n._bindings.length
                    }
                }
            }
            Object.assign(Yc.prototype, {
                getValue: function(t, e) {
                    this.bind();
                    var r = this._targetGroup.nCachedObjects_
                      , n = this._bindings[r];
                    void 0 !== n && n.getValue(t, e)
                },
                setValue: function(t, e) {
                    for (var r = this._bindings, n = this._targetGroup.nCachedObjects_, i = r.length; n !== i; ++n)
                        r[n].setValue(t, e)
                },
                bind: function() {
                    for (var t = this._bindings, e = this._targetGroup.nCachedObjects_, r = t.length; e !== r; ++e)
                        t[e].bind()
                },
                unbind: function() {
                    for (var t = this._bindings, e = this._targetGroup.nCachedObjects_, r = t.length; e !== r; ++e)
                        t[e].unbind()
                }
            }),
            Object.assign($c, {
                Composite: Yc,
                create: function(t, e, r) {
                    return t && t.isAnimationObjectGroup ? new $c.Composite(t,e,r) : new $c(t,e,r)
                },
                sanitizeNodeName: function(t) {
                    return t.replace(/\s/g, "_").replace(zc, "")
                },
                parseTrackName: function(t) {
                    var e = qc.exec(t);
                    if (!e)
                        throw new Error("PropertyBinding: Cannot parse trackName: " + t);
                    var r = {
                        nodeName: e[2],
                        objectName: e[3],
                        objectIndex: e[4],
                        propertyName: e[5],
                        propertyIndex: e[6]
                    }
                      , n = r.nodeName && r.nodeName.lastIndexOf(".");
                    if (void 0 !== n && -1 !== n) {
                        var i = r.nodeName.substring(n + 1);
                        -1 !== Xc.indexOf(i) && (r.nodeName = r.nodeName.substring(0, n),
                        r.objectName = i)
                    }
                    if (null === r.propertyName || 0 === r.propertyName.length)
                        throw new Error("PropertyBinding: can not parse propertyName from trackName: " + t);
                    return r
                },
                findNode: function(t, e) {
                    if (!e || "" === e || "." === e || -1 === e || e === t.name || e === t.uuid)
                        return t;
                    if (t.skeleton) {
                        var r = t.skeleton.getBoneByName(e);
                        if (void 0 !== r)
                            return r
                    }
                    if (t.children) {
                        var n = function t(r) {
                            for (var n = 0; n < r.length; n++) {
                                var i = r[n];
                                if (i.name === e || i.uuid === e)
                                    return i;
                                var a = t(i.children);
                                if (a)
                                    return a
                            }
                            return null
                        }(t.children);
                        if (n)
                            return n
                    }
                    return null
                }
            }),
            Object.assign($c.prototype, {
                _getValue_unavailable: function() {},
                _setValue_unavailable: function() {},
                BindingType: {
                    Direct: 0,
                    EntireArray: 1,
                    ArrayElement: 2,
                    HasFromToArray: 3
                },
                Versioning: {
                    None: 0,
                    NeedsUpdate: 1,
                    MatrixWorldNeedsUpdate: 2
                },
                GetterByBindingType: [function(t, e) {
                    t[e] = this.node[this.propertyName]
                }
                , function(t, e) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        t[e++] = r[n]
                }
                , function(t, e) {
                    t[e] = this.resolvedProperty[this.propertyIndex]
                }
                , function(t, e) {
                    this.resolvedProperty.toArray(t, e)
                }
                ],
                SetterByBindingTypeAndVersioning: [[function(t, e) {
                    this.targetObject[this.propertyName] = t[e]
                }
                , function(t, e) {
                    this.targetObject[this.propertyName] = t[e],
                    this.targetObject.needsUpdate = !0
                }
                , function(t, e) {
                    this.targetObject[this.propertyName] = t[e],
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ], [function(t, e) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        r[n] = t[e++]
                }
                , function(t, e) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        r[n] = t[e++];
                    this.targetObject.needsUpdate = !0
                }
                , function(t, e) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        r[n] = t[e++];
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ], [function(t, e) {
                    this.resolvedProperty[this.propertyIndex] = t[e]
                }
                , function(t, e) {
                    this.resolvedProperty[this.propertyIndex] = t[e],
                    this.targetObject.needsUpdate = !0
                }
                , function(t, e) {
                    this.resolvedProperty[this.propertyIndex] = t[e],
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ], [function(t, e) {
                    this.resolvedProperty.fromArray(t, e)
                }
                , function(t, e) {
                    this.resolvedProperty.fromArray(t, e),
                    this.targetObject.needsUpdate = !0
                }
                , function(t, e) {
                    this.resolvedProperty.fromArray(t, e),
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ]],
                getValue: function(t, e) {
                    this.bind(),
                    this.getValue(t, e)
                },
                setValue: function(t, e) {
                    this.bind(),
                    this.setValue(t, e)
                },
                bind: function() {
                    var t = this.node
                      , e = this.parsedPath
                      , r = e.objectName
                      , n = e.propertyName
                      , i = e.propertyIndex;
                    if (t || (t = $c.findNode(this.rootNode, e.nodeName) || this.rootNode,
                    this.node = t),
                    this.getValue = this._getValue_unavailable,
                    this.setValue = this._setValue_unavailable,
                    t) {
                        if (r) {
                            var a = e.objectIndex;
                            switch (r) {
                            case "materials":
                                if (!t.material)
                                    return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
                                if (!t.material.materials)
                                    return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
                                t = t.material.materials;
                                break;
                            case "bones":
                                if (!t.skeleton)
                                    return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
                                t = t.skeleton.bones;
                                for (var o = 0; o < t.length; o++)
                                    if (t[o].name === a) {
                                        a = o;
                                        break
                                    }
                                break;
                            default:
                                if (void 0 === t[r])
                                    return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
                                t = t[r]
                            }
                            if (void 0 !== a) {
                                if (void 0 === t[a])
                                    return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, t);
                                t = t[a]
                            }
                        }
                        var s = t[n];
                        if (void 0 !== s) {
                            var l = this.Versioning.None;
                            this.targetObject = t,
                            void 0 !== t.needsUpdate ? l = this.Versioning.NeedsUpdate : void 0 !== t.matrixWorldNeedsUpdate && (l = this.Versioning.MatrixWorldNeedsUpdate);
                            var c = this.BindingType.Direct;
                            if (void 0 !== i) {
                                if ("morphTargetInfluences" === n) {
                                    if (!t.geometry)
                                        return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
                                    if (!t.geometry.isBufferGeometry)
                                        return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.", this);
                                    if (!t.geometry.morphAttributes)
                                        return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
                                    void 0 !== t.morphTargetDictionary[i] && (i = t.morphTargetDictionary[i])
                                }
                                c = this.BindingType.ArrayElement,
                                this.resolvedProperty = s,
                                this.propertyIndex = i
                            } else
                                void 0 !== s.fromArray && void 0 !== s.toArray ? (c = this.BindingType.HasFromToArray,
                                this.resolvedProperty = s) : Array.isArray(s) ? (c = this.BindingType.EntireArray,
                                this.resolvedProperty = s) : this.propertyName = n;
                            this.getValue = this.GetterByBindingType[c],
                            this.setValue = this.SetterByBindingTypeAndVersioning[c][l]
                        } else {
                            var h = e.nodeName;
                            console.error("THREE.PropertyBinding: Trying to update property for track: " + h + "." + n + " but it wasn't found.", t)
                        }
                    } else
                        console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.")
                },
                unbind: function() {
                    this.node = null,
                    this.getValue = this._getValue_unbound,
                    this.setValue = this._setValue_unbound
                }
            }),
            Object.assign($c.prototype, {
                _getValue_unbound: $c.prototype.getValue,
                _setValue_unbound: $c.prototype.setValue
            }),
            Object.assign(Kc.prototype, {
                isAnimationObjectGroup: !0,
                add: function() {
                    for (var t = this._objects, e = this._indicesByUUID, r = this._paths, n = this._parsedPaths, i = this._bindings, a = i.length, o = void 0, s = t.length, l = this.nCachedObjects_, c = 0, h = arguments.length; c !== h; ++c) {
                        var u = arguments[c]
                          , p = u.uuid
                          , d = e[p];
                        if (void 0 === d) {
                            d = s++,
                            e[p] = d,
                            t.push(u);
                            for (var f = 0, m = a; f !== m; ++f)
                                i[f].push(new $c(u,r[f],n[f]))
                        } else if (d < l) {
                            o = t[d];
                            var v = --l
                              , g = t[v];
                            e[g.uuid] = d,
                            t[d] = g,
                            e[p] = v,
                            t[v] = u;
                            for (var y = 0, _ = a; y !== _; ++y) {
                                var x = i[y]
                                  , b = x[v]
                                  , w = x[d];
                                x[d] = b,
                                void 0 === w && (w = new $c(u,r[y],n[y])),
                                x[v] = w
                            }
                        } else
                            t[d] !== o && console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")
                    }
                    this.nCachedObjects_ = l
                },
                remove: function() {
                    for (var t = this._objects, e = this._indicesByUUID, r = this._bindings, n = r.length, i = this.nCachedObjects_, a = 0, o = arguments.length; a !== o; ++a) {
                        var s = arguments[a]
                          , l = s.uuid
                          , c = e[l];
                        if (void 0 !== c && c >= i) {
                            var h = i++
                              , u = t[h];
                            e[u.uuid] = c,
                            t[c] = u,
                            e[l] = h,
                            t[h] = s;
                            for (var p = 0, d = n; p !== d; ++p) {
                                var f = r[p]
                                  , m = f[h]
                                  , v = f[c];
                                f[c] = m,
                                f[h] = v
                            }
                        }
                    }
                    this.nCachedObjects_ = i
                },
                uncache: function() {
                    for (var t = this._objects, e = this._indicesByUUID, r = this._bindings, n = r.length, i = this.nCachedObjects_, a = t.length, o = 0, s = arguments.length; o !== s; ++o) {
                        var l = arguments[o]
                          , c = l.uuid
                          , h = e[c];
                        if (void 0 !== h)
                            if (delete e[c],
                            h < i) {
                                var u = --i
                                  , p = t[u]
                                  , d = --a
                                  , f = t[d];
                                e[p.uuid] = h,
                                t[h] = p,
                                e[f.uuid] = u,
                                t[u] = f,
                                t.pop();
                                for (var m = 0, v = n; m !== v; ++m) {
                                    var g = r[m]
                                      , y = g[u]
                                      , _ = g[d];
                                    g[h] = y,
                                    g[u] = _,
                                    g.pop()
                                }
                            } else {
                                var x = --a
                                  , b = t[x];
                                x > 0 && (e[b.uuid] = h),
                                t[h] = b,
                                t.pop();
                                for (var w = 0, S = n; w !== S; ++w) {
                                    var T = r[w];
                                    T[h] = T[x],
                                    T.pop()
                                }
                            }
                    }
                    this.nCachedObjects_ = i
                },
                subscribe_: function(t, e) {
                    var r = this._bindingsIndicesByPath
                      , n = r[t]
                      , i = this._bindings;
                    if (void 0 !== n)
                        return i[n];
                    var a = this._paths
                      , o = this._parsedPaths
                      , s = this._objects
                      , l = s.length
                      , c = this.nCachedObjects_
                      , h = new Array(l);
                    n = i.length,
                    r[t] = n,
                    a.push(t),
                    o.push(e),
                    i.push(h);
                    for (var u = c, p = s.length; u !== p; ++u) {
                        var d = s[u];
                        h[u] = new $c(d,t,e)
                    }
                    return h
                },
                unsubscribe_: function(t) {
                    var e = this._bindingsIndicesByPath
                      , r = e[t];
                    if (void 0 !== r) {
                        var n = this._paths
                          , i = this._parsedPaths
                          , a = this._bindings
                          , o = a.length - 1
                          , s = a[o];
                        e[t[o]] = r,
                        a[r] = s,
                        a.pop(),
                        i[r] = i[o],
                        i.pop(),
                        n[r] = n[o],
                        n.pop()
                    }
                }
            });
            var Zc = function() {
                function t(t, e, r, n) {
                    this._mixer = t,
                    this._clip = e,
                    this._localRoot = r || null,
                    this.blendMode = n || e.blendMode;
                    for (var i = e.tracks, a = i.length, o = new Array(a), s = {
                        endingStart: H,
                        endingEnd: H
                    }, l = 0; l !== a; ++l) {
                        var c = i[l].createInterpolant(null);
                        o[l] = c,
                        c.settings = s
                    }
                    this._interpolantSettings = s,
                    this._interpolants = o,
                    this._propertyBindings = new Array(a),
                    this._cacheIndex = null,
                    this._byClipCacheIndex = null,
                    this._timeScaleInterpolant = null,
                    this._weightInterpolant = null,
                    this.loop = 2201,
                    this._loopCount = -1,
                    this._startTime = null,
                    this.time = 0,
                    this.timeScale = 1,
                    this._effectiveTimeScale = 1,
                    this.weight = 1,
                    this._effectiveWeight = 1,
                    this.repetitions = 1 / 0,
                    this.paused = !1,
                    this.enabled = !0,
                    this.clampWhenFinished = !1,
                    this.zeroSlopeAtStart = !0,
                    this.zeroSlopeAtEnd = !0
                }
                var e = t.prototype;
                return e.play = function() {
                    return this._mixer._activateAction(this),
                    this
                }
                ,
                e.stop = function() {
                    return this._mixer._deactivateAction(this),
                    this.reset()
                }
                ,
                e.reset = function() {
                    return this.paused = !1,
                    this.enabled = !0,
                    this.time = 0,
                    this._loopCount = -1,
                    this._startTime = null,
                    this.stopFading().stopWarping()
                }
                ,
                e.isRunning = function() {
                    return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this)
                }
                ,
                e.isScheduled = function() {
                    return this._mixer._isActiveAction(this)
                }
                ,
                e.startAt = function(t) {
                    return this._startTime = t,
                    this
                }
                ,
                e.setLoop = function(t, e) {
                    return this.loop = t,
                    this.repetitions = e,
                    this
                }
                ,
                e.setEffectiveWeight = function(t) {
                    return this.weight = t,
                    this._effectiveWeight = this.enabled ? t : 0,
                    this.stopFading()
                }
                ,
                e.getEffectiveWeight = function() {
                    return this._effectiveWeight
                }
                ,
                e.fadeIn = function(t) {
                    return this._scheduleFading(t, 0, 1)
                }
                ,
                e.fadeOut = function(t) {
                    return this._scheduleFading(t, 1, 0)
                }
                ,
                e.crossFadeFrom = function(t, e, r) {
                    if (t.fadeOut(e),
                    this.fadeIn(e),
                    r) {
                        var n = this._clip.duration
                          , i = t._clip.duration
                          , a = i / n
                          , o = n / i;
                        t.warp(1, a, e),
                        this.warp(o, 1, e)
                    }
                    return this
                }
                ,
                e.crossFadeTo = function(t, e, r) {
                    return t.crossFadeFrom(this, e, r)
                }
                ,
                e.stopFading = function() {
                    var t = this._weightInterpolant;
                    return null !== t && (this._weightInterpolant = null,
                    this._mixer._takeBackControlInterpolant(t)),
                    this
                }
                ,
                e.setEffectiveTimeScale = function(t) {
                    return this.timeScale = t,
                    this._effectiveTimeScale = this.paused ? 0 : t,
                    this.stopWarping()
                }
                ,
                e.getEffectiveTimeScale = function() {
                    return this._effectiveTimeScale
                }
                ,
                e.setDuration = function(t) {
                    return this.timeScale = this._clip.duration / t,
                    this.stopWarping()
                }
                ,
                e.syncWith = function(t) {
                    return this.time = t.time,
                    this.timeScale = t.timeScale,
                    this.stopWarping()
                }
                ,
                e.halt = function(t) {
                    return this.warp(this._effectiveTimeScale, 0, t)
                }
                ,
                e.warp = function(t, e, r) {
                    var n = this._mixer
                      , i = n.time
                      , a = this.timeScale
                      , o = this._timeScaleInterpolant;
                    null === o && (o = n._lendControlInterpolant(),
                    this._timeScaleInterpolant = o);
                    var s = o.parameterPositions
                      , l = o.sampleValues;
                    return s[0] = i,
                    s[1] = i + r,
                    l[0] = t / a,
                    l[1] = e / a,
                    this
                }
                ,
                e.stopWarping = function() {
                    var t = this._timeScaleInterpolant;
                    return null !== t && (this._timeScaleInterpolant = null,
                    this._mixer._takeBackControlInterpolant(t)),
                    this
                }
                ,
                e.getMixer = function() {
                    return this._mixer
                }
                ,
                e.getClip = function() {
                    return this._clip
                }
                ,
                e.getRoot = function() {
                    return this._localRoot || this._mixer._root
                }
                ,
                e._update = function(t, e, r, n) {
                    if (this.enabled) {
                        var i = this._startTime;
                        if (null !== i) {
                            var a = (t - i) * r;
                            if (a < 0 || 0 === r)
                                return;
                            this._startTime = null,
                            e = r * a
                        }
                        e *= this._updateTimeScale(t);
                        var o = this._updateTime(e)
                          , s = this._updateWeight(t);
                        if (s > 0) {
                            var l = this._interpolants
                              , c = this._propertyBindings;
                            if (this.blendMode === W)
                                for (var h = 0, u = l.length; h !== u; ++h)
                                    l[h].evaluate(o),
                                    c[h].accumulateAdditive(s);
                            else
                                for (var p = 0, d = l.length; p !== d; ++p)
                                    l[p].evaluate(o),
                                    c[p].accumulate(n, s)
                        }
                    } else
                        this._updateWeight(t)
                }
                ,
                e._updateWeight = function(t) {
                    var e = 0;
                    if (this.enabled) {
                        e = this.weight;
                        var r = this._weightInterpolant;
                        if (null !== r) {
                            var n = r.evaluate(t)[0];
                            e *= n,
                            t > r.parameterPositions[1] && (this.stopFading(),
                            0 === n && (this.enabled = !1))
                        }
                    }
                    return this._effectiveWeight = e,
                    e
                }
                ,
                e._updateTimeScale = function(t) {
                    var e = 0;
                    if (!this.paused) {
                        e = this.timeScale;
                        var r = this._timeScaleInterpolant;
                        null !== r && (e *= r.evaluate(t)[0],
                        t > r.parameterPositions[1] && (this.stopWarping(),
                        0 === e ? this.paused = !0 : this.timeScale = e))
                    }
                    return this._effectiveTimeScale = e,
                    e
                }
                ,
                e._updateTime = function(t) {
                    var e = this._clip.duration
                      , r = this.loop
                      , n = this.time + t
                      , i = this._loopCount
                      , a = 2202 === r;
                    if (0 === t)
                        return -1 === i ? n : a && 1 == (1 & i) ? e - n : n;
                    if (2200 === r) {
                        -1 === i && (this._loopCount = 0,
                        this._setEndings(!0, !0, !1));
                        t: {
                            if (n >= e)
                                n = e;
                            else {
                                if (!(n < 0)) {
                                    this.time = n;
                                    break t
                                }
                                n = 0
                            }
                            this.clampWhenFinished ? this.paused = !0 : this.enabled = !1,
                            this.time = n,
                            this._mixer.dispatchEvent({
                                type: "finished",
                                action: this,
                                direction: t < 0 ? -1 : 1
                            })
                        }
                    } else {
                        if (-1 === i && (t >= 0 ? (i = 0,
                        this._setEndings(!0, 0 === this.repetitions, a)) : this._setEndings(0 === this.repetitions, !0, a)),
                        n >= e || n < 0) {
                            var o = Math.floor(n / e);
                            n -= e * o,
                            i += Math.abs(o);
                            var s = this.repetitions - i;
                            if (s <= 0)
                                this.clampWhenFinished ? this.paused = !0 : this.enabled = !1,
                                n = t > 0 ? e : 0,
                                this.time = n,
                                this._mixer.dispatchEvent({
                                    type: "finished",
                                    action: this,
                                    direction: t > 0 ? 1 : -1
                                });
                            else {
                                if (1 === s) {
                                    var l = t < 0;
                                    this._setEndings(l, !l, a)
                                } else
                                    this._setEndings(!1, !1, a);
                                this._loopCount = i,
                                this.time = n,
                                this._mixer.dispatchEvent({
                                    type: "loop",
                                    action: this,
                                    loopDelta: o
                                })
                            }
                        } else
                            this.time = n;
                        if (a && 1 == (1 & i))
                            return e - n
                    }
                    return n
                }
                ,
                e._setEndings = function(t, e, r) {
                    var n = this._interpolantSettings;
                    r ? (n.endingStart = U,
                    n.endingEnd = U) : (n.endingStart = t ? this.zeroSlopeAtStart ? U : H : V,
                    n.endingEnd = e ? this.zeroSlopeAtEnd ? U : H : V)
                }
                ,
                e._scheduleFading = function(t, e, r) {
                    var n = this._mixer
                      , i = n.time
                      , a = this._weightInterpolant;
                    null === a && (a = n._lendControlInterpolant(),
                    this._weightInterpolant = a);
                    var o = a.parameterPositions
                      , s = a.sampleValues;
                    return o[0] = i,
                    s[0] = e,
                    o[1] = i + t,
                    s[1] = r,
                    this
                }
                ,
                t
            }();
            function Jc(t) {
                this._root = t,
                this._initMemoryManager(),
                this._accuIndex = 0,
                this.time = 0,
                this.timeScale = 1
            }
            Jc.prototype = Object.assign(Object.create(tt.prototype), {
                constructor: Jc,
                _bindAction: function(t, e) {
                    var r = t._localRoot || this._root
                      , n = t._clip.tracks
                      , i = n.length
                      , a = t._propertyBindings
                      , o = t._interpolants
                      , s = r.uuid
                      , l = this._bindingsByRootAndName
                      , c = l[s];
                    void 0 === c && (c = {},
                    l[s] = c);
                    for (var h = 0; h !== i; ++h) {
                        var u = n[h]
                          , p = u.name
                          , d = c[p];
                        if (void 0 !== d)
                            a[h] = d;
                        else {
                            if (void 0 !== (d = a[h])) {
                                null === d._cacheIndex && (++d.referenceCount,
                                this._addInactiveBinding(d, s, p));
                                continue
                            }
                            var f = e && e._propertyBindings[h].binding.parsedPath;
                            ++(d = new Bc($c.create(r, p, f),u.ValueTypeName,u.getValueSize())).referenceCount,
                            this._addInactiveBinding(d, s, p),
                            a[h] = d
                        }
                        o[h].resultBuffer = d.buffer
                    }
                },
                _activateAction: function(t) {
                    if (!this._isActiveAction(t)) {
                        if (null === t._cacheIndex) {
                            var e = (t._localRoot || this._root).uuid
                              , r = t._clip.uuid
                              , n = this._actionsByClip[r];
                            this._bindAction(t, n && n.knownActions[0]),
                            this._addInactiveAction(t, r, e)
                        }
                        for (var i = t._propertyBindings, a = 0, o = i.length; a !== o; ++a) {
                            var s = i[a];
                            0 == s.useCount++ && (this._lendBinding(s),
                            s.saveOriginalState())
                        }
                        this._lendAction(t)
                    }
                },
                _deactivateAction: function(t) {
                    if (this._isActiveAction(t)) {
                        for (var e = t._propertyBindings, r = 0, n = e.length; r !== n; ++r) {
                            var i = e[r];
                            0 == --i.useCount && (i.restoreOriginalState(),
                            this._takeBackBinding(i))
                        }
                        this._takeBackAction(t)
                    }
                },
                _initMemoryManager: function() {
                    this._actions = [],
                    this._nActiveActions = 0,
                    this._actionsByClip = {},
                    this._bindings = [],
                    this._nActiveBindings = 0,
                    this._bindingsByRootAndName = {},
                    this._controlInterpolants = [],
                    this._nActiveControlInterpolants = 0;
                    var t = this;
                    this.stats = {
                        actions: {
                            get total() {
                                return t._actions.length
                            },
                            get inUse() {
                                return t._nActiveActions
                            }
                        },
                        bindings: {
                            get total() {
                                return t._bindings.length
                            },
                            get inUse() {
                                return t._nActiveBindings
                            }
                        },
                        controlInterpolants: {
                            get total() {
                                return t._controlInterpolants.length
                            },
                            get inUse() {
                                return t._nActiveControlInterpolants
                            }
                        }
                    }
                },
                _isActiveAction: function(t) {
                    var e = t._cacheIndex;
                    return null !== e && e < this._nActiveActions
                },
                _addInactiveAction: function(t, e, r) {
                    var n = this._actions
                      , i = this._actionsByClip
                      , a = i[e];
                    if (void 0 === a)
                        a = {
                            knownActions: [t],
                            actionByRoot: {}
                        },
                        t._byClipCacheIndex = 0,
                        i[e] = a;
                    else {
                        var o = a.knownActions;
                        t._byClipCacheIndex = o.length,
                        o.push(t)
                    }
                    t._cacheIndex = n.length,
                    n.push(t),
                    a.actionByRoot[r] = t
                },
                _removeInactiveAction: function(t) {
                    var e = this._actions
                      , r = e[e.length - 1]
                      , n = t._cacheIndex;
                    r._cacheIndex = n,
                    e[n] = r,
                    e.pop(),
                    t._cacheIndex = null;
                    var i = t._clip.uuid
                      , a = this._actionsByClip
                      , o = a[i]
                      , s = o.knownActions
                      , l = s[s.length - 1]
                      , c = t._byClipCacheIndex;
                    l._byClipCacheIndex = c,
                    s[c] = l,
                    s.pop(),
                    t._byClipCacheIndex = null,
                    delete o.actionByRoot[(t._localRoot || this._root).uuid],
                    0 === s.length && delete a[i],
                    this._removeInactiveBindingsForAction(t)
                },
                _removeInactiveBindingsForAction: function(t) {
                    for (var e = t._propertyBindings, r = 0, n = e.length; r !== n; ++r) {
                        var i = e[r];
                        0 == --i.referenceCount && this._removeInactiveBinding(i)
                    }
                },
                _lendAction: function(t) {
                    var e = this._actions
                      , r = t._cacheIndex
                      , n = this._nActiveActions++
                      , i = e[n];
                    t._cacheIndex = n,
                    e[n] = t,
                    i._cacheIndex = r,
                    e[r] = i
                },
                _takeBackAction: function(t) {
                    var e = this._actions
                      , r = t._cacheIndex
                      , n = --this._nActiveActions
                      , i = e[n];
                    t._cacheIndex = n,
                    e[n] = t,
                    i._cacheIndex = r,
                    e[r] = i
                },
                _addInactiveBinding: function(t, e, r) {
                    var n = this._bindingsByRootAndName
                      , i = this._bindings
                      , a = n[e];
                    void 0 === a && (a = {},
                    n[e] = a),
                    a[r] = t,
                    t._cacheIndex = i.length,
                    i.push(t)
                },
                _removeInactiveBinding: function(t) {
                    var e = this._bindings
                      , r = t.binding
                      , n = r.rootNode.uuid
                      , i = r.path
                      , a = this._bindingsByRootAndName
                      , o = a[n]
                      , s = e[e.length - 1]
                      , l = t._cacheIndex;
                    s._cacheIndex = l,
                    e[l] = s,
                    e.pop(),
                    delete o[i],
                    0 === Object.keys(o).length && delete a[n]
                },
                _lendBinding: function(t) {
                    var e = this._bindings
                      , r = t._cacheIndex
                      , n = this._nActiveBindings++
                      , i = e[n];
                    t._cacheIndex = n,
                    e[n] = t,
                    i._cacheIndex = r,
                    e[r] = i
                },
                _takeBackBinding: function(t) {
                    var e = this._bindings
                      , r = t._cacheIndex
                      , n = --this._nActiveBindings
                      , i = e[n];
                    t._cacheIndex = n,
                    e[n] = t,
                    i._cacheIndex = r,
                    e[r] = i
                },
                _lendControlInterpolant: function() {
                    var t = this._controlInterpolants
                      , e = this._nActiveControlInterpolants++
                      , r = t[e];
                    return void 0 === r && ((r = new $s(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex = e,
                    t[e] = r),
                    r
                },
                _takeBackControlInterpolant: function(t) {
                    var e = this._controlInterpolants
                      , r = t.__cacheIndex
                      , n = --this._nActiveControlInterpolants
                      , i = e[n];
                    t.__cacheIndex = n,
                    e[n] = t,
                    i.__cacheIndex = r,
                    e[r] = i
                },
                _controlInterpolantsResultBuffer: new Float32Array(1),
                clipAction: function(t, e, r) {
                    var n = e || this._root
                      , i = n.uuid
                      , a = "string" == typeof t ? al.findByName(n, t) : t
                      , o = null !== a ? a.uuid : t
                      , s = this._actionsByClip[o]
                      , l = null;
                    if (void 0 === r && (r = null !== a ? a.blendMode : j),
                    void 0 !== s) {
                        var c = s.actionByRoot[i];
                        if (void 0 !== c && c.blendMode === r)
                            return c;
                        l = s.knownActions[0],
                        null === a && (a = l._clip)
                    }
                    if (null === a)
                        return null;
                    var h = new Zc(this,a,e,r);
                    return this._bindAction(h, l),
                    this._addInactiveAction(h, o, i),
                    h
                },
                existingAction: function(t, e) {
                    var r = e || this._root
                      , n = r.uuid
                      , i = "string" == typeof t ? al.findByName(r, t) : t
                      , a = i ? i.uuid : t
                      , o = this._actionsByClip[a];
                    return void 0 !== o && o.actionByRoot[n] || null
                },
                stopAllAction: function() {
                    for (var t = this._actions, e = this._nActiveActions - 1; e >= 0; --e)
                        t[e].stop();
                    return this
                },
                update: function(t) {
                    t *= this.timeScale;
                    for (var e = this._actions, r = this._nActiveActions, n = this.time += t, i = Math.sign(t), a = this._accuIndex ^= 1, o = 0; o !== r; ++o)
                        e[o]._update(n, t, i, a);
                    for (var s = this._bindings, l = this._nActiveBindings, c = 0; c !== l; ++c)
                        s[c].apply(a);
                    return this
                },
                setTime: function(t) {
                    this.time = 0;
                    for (var e = 0; e < this._actions.length; e++)
                        this._actions[e].time = 0;
                    return this.update(t)
                },
                getRoot: function() {
                    return this._root
                },
                uncacheClip: function(t) {
                    var e = this._actions
                      , r = t.uuid
                      , n = this._actionsByClip
                      , i = n[r];
                    if (void 0 !== i) {
                        for (var a = i.knownActions, o = 0, s = a.length; o !== s; ++o) {
                            var l = a[o];
                            this._deactivateAction(l);
                            var c = l._cacheIndex
                              , h = e[e.length - 1];
                            l._cacheIndex = null,
                            l._byClipCacheIndex = null,
                            h._cacheIndex = c,
                            e[c] = h,
                            e.pop(),
                            this._removeInactiveBindingsForAction(l)
                        }
                        delete n[r]
                    }
                },
                uncacheRoot: function(t) {
                    var e = t.uuid
                      , r = this._actionsByClip;
                    for (var n in r) {
                        var i = r[n].actionByRoot[e];
                        void 0 !== i && (this._deactivateAction(i),
                        this._removeInactiveAction(i))
                    }
                    var a = this._bindingsByRootAndName[e];
                    if (void 0 !== a)
                        for (var o in a) {
                            var s = a[o];
                            s.restoreOriginalState(),
                            this._removeInactiveBinding(s)
                        }
                },
                uncacheAction: function(t, e) {
                    var r = this.existingAction(t, e);
                    null !== r && (this._deactivateAction(r),
                    this._removeInactiveAction(r))
                }
            });
            var Qc = function() {
                function t(t) {
                    "string" == typeof t && (console.warn("THREE.Uniform: Type parameter is no longer needed."),
                    t = arguments[1]),
                    this.value = t
                }
                return t.prototype.clone = function() {
                    return new t(void 0 === this.value.clone ? this.value : this.value.clone())
                }
                ,
                t
            }();
            function th(t, e, r) {
                aa.call(this, t, e),
                this.meshPerAttribute = r || 1
            }
            function eh(t, e, r, n, i) {
                this.buffer = t,
                this.type = e,
                this.itemSize = r,
                this.elementSize = n,
                this.count = i,
                this.version = 0
            }
            function rh(t, e, r, n) {
                this.ray = new qt(t,e),
                this.near = r || 0,
                this.far = n || 1 / 0,
                this.camera = null,
                this.layers = new ie,
                this.params = {
                    Mesh: {},
                    Line: {
                        threshold: 1
                    },
                    LOD: {},
                    Points: {
                        threshold: 1
                    },
                    Sprite: {}
                },
                Object.defineProperties(this.params, {
                    PointCloud: {
                        get: function() {
                            return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),
                            this.Points
                        }
                    }
                })
            }
            function nh(t, e) {
                return t.distance - e.distance
            }
            function ih(t, e, r, n) {
                if (t.layers.test(e.layers) && t.raycast(e, r),
                !0 === n)
                    for (var i = t.children, a = 0, o = i.length; a < o; a++)
                        ih(i[a], e, r, !0)
            }
            th.prototype = Object.assign(Object.create(aa.prototype), {
                constructor: th,
                isInstancedInterleavedBuffer: !0,
                copy: function(t) {
                    return aa.prototype.copy.call(this, t),
                    this.meshPerAttribute = t.meshPerAttribute,
                    this
                },
                clone: function(t) {
                    var e = aa.prototype.clone.call(this, t);
                    return e.meshPerAttribute = this.meshPerAttribute,
                    e
                },
                toJSON: function(t) {
                    var e = aa.prototype.toJSON.call(this, t);
                    return e.isInstancedInterleavedBuffer = !0,
                    e.meshPerAttribute = this.meshPerAttribute,
                    e
                }
            }),
            Object.defineProperty(eh.prototype, "needsUpdate", {
                set: function(t) {
                    !0 === t && this.version++
                }
            }),
            Object.assign(eh.prototype, {
                isGLBufferAttribute: !0,
                setBuffer: function(t) {
                    return this.buffer = t,
                    this
                },
                setType: function(t, e) {
                    return this.type = t,
                    this.elementSize = e,
                    this
                },
                setItemSize: function(t) {
                    return this.itemSize = t,
                    this
                },
                setCount: function(t) {
                    return this.count = t,
                    this
                }
            }),
            Object.assign(rh.prototype, {
                set: function(t, e) {
                    this.ray.set(t, e)
                },
                setFromCamera: function(t, e) {
                    e && e.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(e.matrixWorld),
                    this.ray.direction.set(t.x, t.y, .5).unproject(e).sub(this.ray.origin).normalize(),
                    this.camera = e) : e && e.isOrthographicCamera ? (this.ray.origin.set(t.x, t.y, (e.near + e.far) / (e.near - e.far)).unproject(e),
                    this.ray.direction.set(0, 0, -1).transformDirection(e.matrixWorld),
                    this.camera = e) : console.error("THREE.Raycaster: Unsupported camera type.")
                },
                intersectObject: function(t, e, r) {
                    var n = r || [];
                    return ih(t, this, n, e),
                    n.sort(nh),
                    n
                },
                intersectObjects: function(t, e, r) {
                    var n = r || [];
                    if (!1 === Array.isArray(t))
                        return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
                        n;
                    for (var i = 0, a = t.length; i < a; i++)
                        ih(t[i], this, n, e);
                    return n.sort(nh),
                    n
                }
            });
            var ah = function() {
                function t(t, e, r) {
                    return void 0 === t && (t = 1),
                    void 0 === e && (e = 0),
                    void 0 === r && (r = 0),
                    this.radius = t,
                    this.phi = e,
                    this.theta = r,
                    this
                }
                var e = t.prototype;
                return e.set = function(t, e, r) {
                    return this.radius = t,
                    this.phi = e,
                    this.theta = r,
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.radius = t.radius,
                    this.phi = t.phi,
                    this.theta = t.theta,
                    this
                }
                ,
                e.makeSafe = function() {
                    var t = 1e-6;
                    return this.phi = Math.max(t, Math.min(Math.PI - t, this.phi)),
                    this
                }
                ,
                e.setFromVector3 = function(t) {
                    return this.setFromCartesianCoords(t.x, t.y, t.z)
                }
                ,
                e.setFromCartesianCoords = function(t, e, r) {
                    return this.radius = Math.sqrt(t * t + e * e + r * r),
                    0 === this.radius ? (this.theta = 0,
                    this.phi = 0) : (this.theta = Math.atan2(t, r),
                    this.phi = Math.acos(it.clamp(e / this.radius, -1, 1))),
                    this
                }
                ,
                t
            }()
              , oh = function() {
                function t(t, e, r) {
                    return this.radius = void 0 !== t ? t : 1,
                    this.theta = void 0 !== e ? e : 0,
                    this.y = void 0 !== r ? r : 0,
                    this
                }
                var e = t.prototype;
                return e.set = function(t, e, r) {
                    return this.radius = t,
                    this.theta = e,
                    this.y = r,
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.radius = t.radius,
                    this.theta = t.theta,
                    this.y = t.y,
                    this
                }
                ,
                e.setFromVector3 = function(t) {
                    return this.setFromCartesianCoords(t.x, t.y, t.z)
                }
                ,
                e.setFromCartesianCoords = function(t, e, r) {
                    return this.radius = Math.sqrt(t * t + r * r),
                    this.theta = Math.atan2(t, r),
                    this.y = e,
                    this
                }
                ,
                t
            }()
              , sh = new ht
              , lh = function() {
                function t(t, e) {
                    Object.defineProperty(this, "isBox2", {
                        value: !0
                    }),
                    this.min = void 0 !== t ? t : new ht(1 / 0,1 / 0),
                    this.max = void 0 !== e ? e : new ht(-1 / 0,-1 / 0)
                }
                var e = t.prototype;
                return e.set = function(t, e) {
                    return this.min.copy(t),
                    this.max.copy(e),
                    this
                }
                ,
                e.setFromPoints = function(t) {
                    this.makeEmpty();
                    for (var e = 0, r = t.length; e < r; e++)
                        this.expandByPoint(t[e]);
                    return this
                }
                ,
                e.setFromCenterAndSize = function(t, e) {
                    var r = sh.copy(e).multiplyScalar(.5);
                    return this.min.copy(t).sub(r),
                    this.max.copy(t).add(r),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.min.copy(t.min),
                    this.max.copy(t.max),
                    this
                }
                ,
                e.makeEmpty = function() {
                    return this.min.x = this.min.y = 1 / 0,
                    this.max.x = this.max.y = -1 / 0,
                    this
                }
                ,
                e.isEmpty = function() {
                    return this.max.x < this.min.x || this.max.y < this.min.y
                }
                ,
                e.getCenter = function(t) {
                    return void 0 === t && (console.warn("THREE.Box2: .getCenter() target is now required"),
                    t = new ht),
                    this.isEmpty() ? t.set(0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5)
                }
                ,
                e.getSize = function(t) {
                    return void 0 === t && (console.warn("THREE.Box2: .getSize() target is now required"),
                    t = new ht),
                    this.isEmpty() ? t.set(0, 0) : t.subVectors(this.max, this.min)
                }
                ,
                e.expandByPoint = function(t) {
                    return this.min.min(t),
                    this.max.max(t),
                    this
                }
                ,
                e.expandByVector = function(t) {
                    return this.min.sub(t),
                    this.max.add(t),
                    this
                }
                ,
                e.expandByScalar = function(t) {
                    return this.min.addScalar(-t),
                    this.max.addScalar(t),
                    this
                }
                ,
                e.containsPoint = function(t) {
                    return !(t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y)
                }
                ,
                e.containsBox = function(t) {
                    return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y
                }
                ,
                e.getParameter = function(t, e) {
                    return void 0 === e && (console.warn("THREE.Box2: .getParameter() target is now required"),
                    e = new ht),
                    e.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y))
                }
                ,
                e.intersectsBox = function(t) {
                    return !(t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y)
                }
                ,
                e.clampPoint = function(t, e) {
                    return void 0 === e && (console.warn("THREE.Box2: .clampPoint() target is now required"),
                    e = new ht),
                    e.copy(t).clamp(this.min, this.max)
                }
                ,
                e.distanceToPoint = function(t) {
                    return sh.copy(t).clamp(this.min, this.max).sub(t).length()
                }
                ,
                e.intersect = function(t) {
                    return this.min.max(t.min),
                    this.max.min(t.max),
                    this
                }
                ,
                e.union = function(t) {
                    return this.min.min(t.min),
                    this.max.max(t.max),
                    this
                }
                ,
                e.translate = function(t) {
                    return this.min.add(t),
                    this.max.add(t),
                    this
                }
                ,
                e.equals = function(t) {
                    return t.min.equals(this.min) && t.max.equals(this.max)
                }
                ,
                t
            }()
              , ch = new _t
              , hh = new _t
              , uh = function() {
                function t(t, e) {
                    this.start = void 0 !== t ? t : new _t,
                    this.end = void 0 !== e ? e : new _t
                }
                var e = t.prototype;
                return e.set = function(t, e) {
                    return this.start.copy(t),
                    this.end.copy(e),
                    this
                }
                ,
                e.clone = function() {
                    return (new this.constructor).copy(this)
                }
                ,
                e.copy = function(t) {
                    return this.start.copy(t.start),
                    this.end.copy(t.end),
                    this
                }
                ,
                e.getCenter = function(t) {
                    return void 0 === t && (console.warn("THREE.Line3: .getCenter() target is now required"),
                    t = new _t),
                    t.addVectors(this.start, this.end).multiplyScalar(.5)
                }
                ,
                e.delta = function(t) {
                    return void 0 === t && (console.warn("THREE.Line3: .delta() target is now required"),
                    t = new _t),
                    t.subVectors(this.end, this.start)
                }
                ,
                e.distanceSq = function() {
                    return this.start.distanceToSquared(this.end)
                }
                ,
                e.distance = function() {
                    return this.start.distanceTo(this.end)
                }
                ,
                e.at = function(t, e) {
                    return void 0 === e && (console.warn("THREE.Line3: .at() target is now required"),
                    e = new _t),
                    this.delta(e).multiplyScalar(t).add(this.start)
                }
                ,
                e.closestPointToPointParameter = function(t, e) {
                    ch.subVectors(t, this.start),
                    hh.subVectors(this.end, this.start);
                    var r = hh.dot(hh)
                      , n = hh.dot(ch) / r;
                    return e && (n = it.clamp(n, 0, 1)),
                    n
                }
                ,
                e.closestPointToPoint = function(t, e, r) {
                    var n = this.closestPointToPointParameter(t, e);
                    return void 0 === r && (console.warn("THREE.Line3: .closestPointToPoint() target is now required"),
                    r = new _t),
                    this.delta(r).multiplyScalar(n).add(this.start)
                }
                ,
                e.applyMatrix4 = function(t) {
                    return this.start.applyMatrix4(t),
                    this.end.applyMatrix4(t),
                    this
                }
                ,
                e.equals = function(t) {
                    return t.start.equals(this.start) && t.end.equals(this.end)
                }
                ,
                t
            }();
            function ph(t) {
                ye.call(this),
                this.material = t,
                this.render = function() {}
                ,
                this.hasPositions = !1,
                this.hasNormals = !1,
                this.hasColors = !1,
                this.hasUvs = !1,
                this.positionArray = null,
                this.normalArray = null,
                this.colorArray = null,
                this.uvArray = null,
                this.count = 0
            }
            ph.prototype = Object.create(ye.prototype),
            ph.prototype.constructor = ph,
            ph.prototype.isImmediateRenderObject = !0;
            var dh = new _t
              , fh = function(t) {
                function e(e, r) {
                    var n;
                    (n = t.call(this) || this).light = e,
                    n.light.updateMatrixWorld(),
                    n.matrix = e.matrixWorld,
                    n.matrixAutoUpdate = !1,
                    n.color = r;
                    for (var i = new pr, a = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, -1, 1], o = 0, s = 1; o < 32; o++,
                    s++) {
                        var l = o / 32 * Math.PI * 2
                          , c = s / 32 * Math.PI * 2;
                        a.push(Math.cos(l), Math.sin(l), 1, Math.cos(c), Math.sin(c), 1)
                    }
                    i.setAttribute("position", new er(a,3));
                    var h = new Ua({
                        fog: !1,
                        toneMapped: !1
                    });
                    return n.cone = new Za(i,h),
                    n.add(n.cone),
                    n.update(),
                    n
                }
                st(e, t);
                var r = e.prototype;
                return r.dispose = function() {
                    this.cone.geometry.dispose(),
                    this.cone.material.dispose()
                }
                ,
                r.update = function() {
                    this.light.updateMatrixWorld();
                    var t = this.light.distance ? this.light.distance : 1e3
                      , e = t * Math.tan(this.light.angle);
                    this.cone.scale.set(e, e, t),
                    dh.setFromMatrixPosition(this.light.target.matrixWorld),
                    this.cone.lookAt(dh),
                    void 0 !== this.color ? this.cone.material.color.set(this.color) : this.cone.material.color.copy(this.light.color)
                }
                ,
                e
            }(ye)
              , mh = new _t
              , vh = new Xt
              , gh = new Xt
              , yh = function(t) {
                function e(e) {
                    for (var r, n = _h(e), i = new pr, a = [], o = [], s = new Ge(0,0,1), l = new Ge(0,1,0), c = 0; c < n.length; c++) {
                        var h = n[c];
                        h.parent && h.parent.isBone && (a.push(0, 0, 0),
                        a.push(0, 0, 0),
                        o.push(s.r, s.g, s.b),
                        o.push(l.r, l.g, l.b))
                    }
                    i.setAttribute("position", new er(a,3)),
                    i.setAttribute("color", new er(o,3));
                    var u = new Ua({
                        vertexColors: !0,
                        depthTest: !1,
                        depthWrite: !1,
                        toneMapped: !1,
                        transparent: !0
                    });
                    return (r = t.call(this, i, u) || this).type = "SkeletonHelper",
                    r.isSkeletonHelper = !0,
                    r.root = e,
                    r.bones = n,
                    r.matrix = e.matrixWorld,
                    r.matrixAutoUpdate = !1,
                    r
                }
                return st(e, t),
                e.prototype.updateMatrixWorld = function(e) {
                    var r = this.bones
                      , n = this.geometry
                      , i = n.getAttribute("position");
                    gh.getInverse(this.root.matrixWorld);
                    for (var a = 0, o = 0; a < r.length; a++) {
                        var s = r[a];
                        s.parent && s.parent.isBone && (vh.multiplyMatrices(gh, s.matrixWorld),
                        mh.setFromMatrixPosition(vh),
                        i.setXYZ(o, mh.x, mh.y, mh.z),
                        vh.multiplyMatrices(gh, s.parent.matrixWorld),
                        mh.setFromMatrixPosition(vh),
                        i.setXYZ(o + 1, mh.x, mh.y, mh.z),
                        o += 2)
                    }
                    n.getAttribute("position").needsUpdate = !0,
                    t.prototype.updateMatrixWorld.call(this, e)
                }
                ,
                e
            }(Za);
            function _h(t) {
                var e = [];
                t && t.isBone && e.push(t);
                for (var r = 0; r < t.children.length; r++)
                    e.push.apply(e, _h(t.children[r]));
                return e
            }
            var xh = function(t) {
                function e(e, r, n) {
                    var i, a = new bs(r,4,2), o = new je({
                        wireframe: !0,
                        fog: !1,
                        toneMapped: !1
                    });
                    return (i = t.call(this, a, o) || this).light = e,
                    i.light.updateMatrixWorld(),
                    i.color = n,
                    i.type = "PointLightHelper",
                    i.matrix = i.light.matrixWorld,
                    i.matrixAutoUpdate = !1,
                    i.update(),
                    i
                }
                st(e, t);
                var r = e.prototype;
                return r.dispose = function() {
                    this.geometry.dispose(),
                    this.material.dispose()
                }
                ,
                r.update = function() {
                    void 0 !== this.color ? this.material.color.set(this.color) : this.material.color.copy(this.light.color)
                }
                ,
                e
            }(Lr)
              , bh = new _t
              , wh = new Ge
              , Sh = new Ge
              , Th = function(t) {
                function e(e, r, n) {
                    var i;
                    (i = t.call(this) || this).light = e,
                    i.light.updateMatrixWorld(),
                    i.matrix = e.matrixWorld,
                    i.matrixAutoUpdate = !1,
                    i.color = n;
                    var a = new us(r);
                    a.rotateY(.5 * Math.PI),
                    i.material = new je({
                        wireframe: !0,
                        fog: !1,
                        toneMapped: !1
                    }),
                    void 0 === i.color && (i.material.vertexColors = !0);
                    var o = a.getAttribute("position")
                      , s = new Float32Array(3 * o.count);
                    return a.setAttribute("color", new Xe(s,3)),
                    i.add(new Lr(a,i.material)),
                    i.update(),
                    i
                }
                st(e, t);
                var r = e.prototype;
                return r.dispose = function() {
                    this.children[0].geometry.dispose(),
                    this.children[0].material.dispose()
                }
                ,
                r.update = function() {
                    var t = this.children[0];
                    if (void 0 !== this.color)
                        this.material.color.set(this.color);
                    else {
                        var e = t.geometry.getAttribute("color");
                        wh.copy(this.light.color),
                        Sh.copy(this.light.groundColor);
                        for (var r = 0, n = e.count; r < n; r++) {
                            var i = r < n / 2 ? wh : Sh;
                            e.setXYZ(r, i.r, i.g, i.b)
                        }
                        e.needsUpdate = !0
                    }
                    t.lookAt(bh.setFromMatrixPosition(this.light.matrixWorld).negate())
                }
                ,
                e
            }(ye)
              , Mh = function(t) {
                function e(e, r, n, i) {
                    var a;
                    e = e || 10,
                    r = r || 10,
                    n = new Ge(void 0 !== n ? n : 4473924),
                    i = new Ge(void 0 !== i ? i : 8947848);
                    for (var o = r / 2, s = e / r, l = e / 2, c = [], h = [], u = 0, p = 0, d = -l; u <= r; u++,
                    d += s) {
                        c.push(-l, 0, d, l, 0, d),
                        c.push(d, 0, -l, d, 0, l);
                        var f = u === o ? n : i;
                        f.toArray(h, p),
                        p += 3,
                        f.toArray(h, p),
                        p += 3,
                        f.toArray(h, p),
                        p += 3,
                        f.toArray(h, p),
                        p += 3
                    }
                    var m = new pr;
                    m.setAttribute("position", new er(c,3)),
                    m.setAttribute("color", new er(h,3));
                    var v = new Ua({
                        vertexColors: !0,
                        toneMapped: !1
                    });
                    return (a = t.call(this, m, v) || this).type = "GridHelper",
                    a
                }
                return st(e, t),
                e
            }(Za)
              , Eh = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    e = e || 10,
                    r = r || 16,
                    n = n || 8,
                    i = i || 64,
                    a = new Ge(void 0 !== a ? a : 4473924),
                    o = new Ge(void 0 !== o ? o : 8947848);
                    for (var l = [], c = [], h = 0; h <= r; h++) {
                        var u = h / r * (2 * Math.PI)
                          , p = Math.sin(u) * e
                          , d = Math.cos(u) * e;
                        l.push(0, 0, 0),
                        l.push(p, 0, d);
                        var f = 1 & h ? a : o;
                        c.push(f.r, f.g, f.b),
                        c.push(f.r, f.g, f.b)
                    }
                    for (var m = 0; m <= n; m++)
                        for (var v = 1 & m ? a : o, g = e - e / n * m, y = 0; y < i; y++) {
                            var _ = y / i * (2 * Math.PI)
                              , x = Math.sin(_) * g
                              , b = Math.cos(_) * g;
                            l.push(x, 0, b),
                            c.push(v.r, v.g, v.b),
                            _ = (y + 1) / i * (2 * Math.PI),
                            x = Math.sin(_) * g,
                            b = Math.cos(_) * g,
                            l.push(x, 0, b),
                            c.push(v.r, v.g, v.b)
                        }
                    var w = new pr;
                    w.setAttribute("position", new er(l,3)),
                    w.setAttribute("color", new er(c,3));
                    var S = new Ua({
                        vertexColors: !0,
                        toneMapped: !1
                    });
                    return (s = t.call(this, w, S) || this).type = "PolarGridHelper",
                    s
                }
                return st(e, t),
                e
            }(Za)
              , Ah = new _t
              , Ph = new _t
              , Ch = new _t
              , Lh = function(t) {
                function e(e, r, n) {
                    var i;
                    (i = t.call(this) || this).light = e,
                    i.light.updateMatrixWorld(),
                    i.matrix = e.matrixWorld,
                    i.matrixAutoUpdate = !1,
                    i.color = n,
                    void 0 === r && (r = 1);
                    var a = new pr;
                    a.setAttribute("position", new er([-r, r, 0, r, r, 0, r, -r, 0, -r, -r, 0, -r, r, 0],3));
                    var o = new Ua({
                        fog: !1,
                        toneMapped: !1
                    });
                    return i.lightPlane = new Ya(a,o),
                    i.add(i.lightPlane),
                    (a = new pr).setAttribute("position", new er([0, 0, 0, 0, 0, 1],3)),
                    i.targetLine = new Ya(a,o),
                    i.add(i.targetLine),
                    i.update(),
                    i
                }
                st(e, t);
                var r = e.prototype;
                return r.dispose = function() {
                    this.lightPlane.geometry.dispose(),
                    this.lightPlane.material.dispose(),
                    this.targetLine.geometry.dispose(),
                    this.targetLine.material.dispose()
                }
                ,
                r.update = function() {
                    Ah.setFromMatrixPosition(this.light.matrixWorld),
                    Ph.setFromMatrixPosition(this.light.target.matrixWorld),
                    Ch.subVectors(Ph, Ah),
                    this.lightPlane.lookAt(Ph),
                    void 0 !== this.color ? (this.lightPlane.material.color.set(this.color),
                    this.targetLine.material.color.set(this.color)) : (this.lightPlane.material.color.copy(this.light.color),
                    this.targetLine.material.color.copy(this.light.color)),
                    this.targetLine.lookAt(Ph),
                    this.targetLine.scale.z = Ch.length()
                }
                ,
                e
            }(ye)
              , Dh = new _t
              , Rh = new Br
              , Ih = function(t) {
                function e(e) {
                    var r, n = new pr, i = new Ua({
                        color: 16777215,
                        vertexColors: !0,
                        toneMapped: !1
                    }), a = [], o = [], s = {}, l = new Ge(16755200), c = new Ge(16711680), h = new Ge(43775), u = new Ge(16777215), p = new Ge(3355443);
                    function d(t, e, r) {
                        f(t, r),
                        f(e, r)
                    }
                    function f(t, e) {
                        a.push(0, 0, 0),
                        o.push(e.r, e.g, e.b),
                        void 0 === s[t] && (s[t] = []),
                        s[t].push(a.length / 3 - 1)
                    }
                    return d("n1", "n2", l),
                    d("n2", "n4", l),
                    d("n4", "n3", l),
                    d("n3", "n1", l),
                    d("f1", "f2", l),
                    d("f2", "f4", l),
                    d("f4", "f3", l),
                    d("f3", "f1", l),
                    d("n1", "f1", l),
                    d("n2", "f2", l),
                    d("n3", "f3", l),
                    d("n4", "f4", l),
                    d("p", "n1", c),
                    d("p", "n2", c),
                    d("p", "n3", c),
                    d("p", "n4", c),
                    d("u1", "u2", h),
                    d("u2", "u3", h),
                    d("u3", "u1", h),
                    d("c", "t", u),
                    d("p", "c", p),
                    d("cn1", "cn2", p),
                    d("cn3", "cn4", p),
                    d("cf1", "cf2", p),
                    d("cf3", "cf4", p),
                    n.setAttribute("position", new er(a,3)),
                    n.setAttribute("color", new er(o,3)),
                    (r = t.call(this, n, i) || this).type = "CameraHelper",
                    r.camera = e,
                    r.camera.updateProjectionMatrix && r.camera.updateProjectionMatrix(),
                    r.matrix = e.matrixWorld,
                    r.matrixAutoUpdate = !1,
                    r.pointMap = s,
                    r.update(),
                    r
                }
                return st(e, t),
                e.prototype.update = function() {
                    var t = this.geometry
                      , e = this.pointMap;
                    Rh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),
                    kh("c", e, t, Rh, 0, 0, -1),
                    kh("t", e, t, Rh, 0, 0, 1),
                    kh("n1", e, t, Rh, -1, -1, -1),
                    kh("n2", e, t, Rh, 1, -1, -1),
                    kh("n3", e, t, Rh, -1, 1, -1),
                    kh("n4", e, t, Rh, 1, 1, -1),
                    kh("f1", e, t, Rh, -1, -1, 1),
                    kh("f2", e, t, Rh, 1, -1, 1),
                    kh("f3", e, t, Rh, -1, 1, 1),
                    kh("f4", e, t, Rh, 1, 1, 1),
                    kh("u1", e, t, Rh, .7, 1.1, -1),
                    kh("u2", e, t, Rh, -.7, 1.1, -1),
                    kh("u3", e, t, Rh, 0, 2, -1),
                    kh("cf1", e, t, Rh, -1, 0, 1),
                    kh("cf2", e, t, Rh, 1, 0, 1),
                    kh("cf3", e, t, Rh, 0, -1, 1),
                    kh("cf4", e, t, Rh, 0, 1, 1),
                    kh("cn1", e, t, Rh, -1, 0, -1),
                    kh("cn2", e, t, Rh, 1, 0, -1),
                    kh("cn3", e, t, Rh, 0, -1, -1),
                    kh("cn4", e, t, Rh, 0, 1, -1),
                    t.getAttribute("position").needsUpdate = !0
                }
                ,
                e
            }(Za);
            function kh(t, e, r, n, i, a, o) {
                Dh.set(i, a, o).unproject(n);
                var s = e[t];
                if (void 0 !== s)
                    for (var l = r.getAttribute("position"), c = 0, h = s.length; c < h; c++)
                        l.setXYZ(s[c], Dh.x, Dh.y, Dh.z)
            }
            var Oh, Fh, Nh, Bh = new wt, zh = function(t) {
                function e(e, r) {
                    var n;
                    void 0 === r && (r = 16776960);
                    var i = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7])
                      , a = new Float32Array(24)
                      , o = new pr;
                    return o.setIndex(new Xe(i,1)),
                    o.setAttribute("position", new Xe(a,3)),
                    (n = t.call(this, o, new Ua({
                        color: r,
                        toneMapped: !1
                    })) || this).object = e,
                    n.type = "BoxHelper",
                    n.matrixAutoUpdate = !1,
                    n.update(),
                    n
                }
                st(e, t);
                var r = e.prototype;
                return r.update = function(t) {
                    if (void 0 !== t && console.warn("THREE.BoxHelper: .update() has no longer arguments."),
                    void 0 !== this.object && Bh.setFromObject(this.object),
                    !Bh.isEmpty()) {
                        var e = Bh.min
                          , r = Bh.max
                          , n = this.geometry.attributes.position
                          , i = n.array;
                        i[0] = r.x,
                        i[1] = r.y,
                        i[2] = r.z,
                        i[3] = e.x,
                        i[4] = r.y,
                        i[5] = r.z,
                        i[6] = e.x,
                        i[7] = e.y,
                        i[8] = r.z,
                        i[9] = r.x,
                        i[10] = e.y,
                        i[11] = r.z,
                        i[12] = r.x,
                        i[13] = r.y,
                        i[14] = e.z,
                        i[15] = e.x,
                        i[16] = r.y,
                        i[17] = e.z,
                        i[18] = e.x,
                        i[19] = e.y,
                        i[20] = e.z,
                        i[21] = r.x,
                        i[22] = e.y,
                        i[23] = e.z,
                        n.needsUpdate = !0,
                        this.geometry.computeBoundingSphere()
                    }
                }
                ,
                r.setFromObject = function(t) {
                    return this.object = t,
                    this.update(),
                    this
                }
                ,
                r.copy = function(t) {
                    return Za.prototype.copy.call(this, t),
                    this.object = t.object,
                    this
                }
                ,
                e
            }(Za), Gh = function(t) {
                function e(e, r) {
                    var n;
                    void 0 === r && (r = 16776960);
                    var i = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7])
                      , a = new pr;
                    return a.setIndex(new Xe(i,1)),
                    a.setAttribute("position", new er([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1],3)),
                    (n = t.call(this, a, new Ua({
                        color: r,
                        toneMapped: !1
                    })) || this).box = e,
                    n.type = "Box3Helper",
                    n.geometry.computeBoundingSphere(),
                    n
                }
                return st(e, t),
                e.prototype.updateMatrixWorld = function(e) {
                    var r = this.box;
                    r.isEmpty() || (r.getCenter(this.position),
                    r.getSize(this.scale),
                    this.scale.multiplyScalar(.5),
                    t.prototype.updateMatrixWorld.call(this, e))
                }
                ,
                e
            }(Za), Hh = function(t) {
                function e(e, r, n) {
                    var i, a = void 0 !== n ? n : 16776960, o = new pr;
                    o.setAttribute("position", new er([1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0],3)),
                    o.computeBoundingSphere(),
                    (i = t.call(this, o, new Ua({
                        color: a,
                        toneMapped: !1
                    })) || this).type = "PlaneHelper",
                    i.plane = e,
                    i.size = void 0 === r ? 1 : r;
                    var s = new pr;
                    return s.setAttribute("position", new er([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1],3)),
                    s.computeBoundingSphere(),
                    i.add(new Lr(s,new je({
                        color: a,
                        opacity: .2,
                        transparent: !0,
                        depthWrite: !1,
                        toneMapped: !1
                    }))),
                    i
                }
                return st(e, t),
                e.prototype.updateMatrixWorld = function(e) {
                    var r = -this.plane.constant;
                    Math.abs(r) < 1e-8 && (r = 1e-8),
                    this.scale.set(.5 * this.size, .5 * this.size, r),
                    this.children[0].material.side = r < 0 ? 1 : 0,
                    this.lookAt(this.plane.normal),
                    t.prototype.updateMatrixWorld.call(this, e)
                }
                ,
                e
            }(Ya), Uh = new _t, Vh = function(t) {
                function e(e, r, n, i, a, o) {
                    var s;
                    return (s = t.call(this) || this).type = "ArrowHelper",
                    void 0 === e && (e = new _t(0,0,1)),
                    void 0 === r && (r = new _t(0,0,0)),
                    void 0 === n && (n = 1),
                    void 0 === i && (i = 16776960),
                    void 0 === a && (a = .2 * n),
                    void 0 === o && (o = .2 * a),
                    void 0 === Oh && ((Oh = new pr).setAttribute("position", new er([0, 0, 0, 0, 1, 0],3)),
                    (Fh = new _o(0,.5,1,5,1)).translate(0, -.5, 0)),
                    s.position.copy(r),
                    s.line = new Ya(Oh,new Ua({
                        color: i,
                        toneMapped: !1
                    })),
                    s.line.matrixAutoUpdate = !1,
                    s.add(s.line),
                    s.cone = new Lr(Fh,new je({
                        color: i,
                        toneMapped: !1
                    })),
                    s.cone.matrixAutoUpdate = !1,
                    s.add(s.cone),
                    s.setDirection(e),
                    s.setLength(n, a, o),
                    s
                }
                st(e, t);
                var r = e.prototype;
                return r.setDirection = function(t) {
                    if (t.y > .99999)
                        this.quaternion.set(0, 0, 0, 1);
                    else if (t.y < -.99999)
                        this.quaternion.set(1, 0, 0, 0);
                    else {
                        Uh.set(t.z, 0, -t.x).normalize();
                        var e = Math.acos(t.y);
                        this.quaternion.setFromAxisAngle(Uh, e)
                    }
                }
                ,
                r.setLength = function(t, e, r) {
                    void 0 === e && (e = .2 * t),
                    void 0 === r && (r = .2 * e),
                    this.line.scale.set(1, Math.max(1e-4, t - e), 1),
                    this.line.updateMatrix(),
                    this.cone.scale.set(r, e, r),
                    this.cone.position.y = t,
                    this.cone.updateMatrix()
                }
                ,
                r.setColor = function(t) {
                    this.line.material.color.set(t),
                    this.cone.material.color.set(t)
                }
                ,
                r.copy = function(e) {
                    return t.prototype.copy.call(this, e, !1),
                    this.line.copy(e.line),
                    this.cone.copy(e.cone),
                    this
                }
                ,
                e
            }(ye), jh = function(t) {
                function e(e) {
                    var r;
                    void 0 === e && (e = 1);
                    var n = [0, 0, 0, e, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e]
                      , i = new pr;
                    i.setAttribute("position", new er(n,3)),
                    i.setAttribute("color", new er([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1],3));
                    var a = new Ua({
                        vertexColors: !0,
                        toneMapped: !1
                    });
                    return (r = t.call(this, i, a) || this).type = "AxesHelper",
                    r
                }
                return st(e, t),
                e
            }(Za), Wh = Math.pow(2, 8), qh = [.125, .215, .35, .446, .526, .582], Xh = 5 + qh.length, Yh = ((Nh = {})[3e3] = 0,
            Nh[3001] = 1,
            Nh[3002] = 2,
            Nh[3004] = 3,
            Nh[3005] = 4,
            Nh[3006] = 5,
            Nh[3007] = 6,
            Nh), $h = new $l, Kh = ou(), Zh = Kh._lodPlanes, Jh = Kh._sizeLods, Qh = Kh._sigmas, tu = null, eu = (1 + Math.sqrt(5)) / 2, ru = 1 / eu, nu = [new _t(1,1,1), new _t(-1,1,1), new _t(1,1,-1), new _t(-1,1,-1), new _t(0,eu,ru), new _t(0,eu,-ru), new _t(ru,0,eu), new _t(-ru,0,eu), new _t(eu,ru,0), new _t(-eu,ru,0)], iu = function() {
                function t(t) {
                    this._renderer = t,
                    this._pingPongRenderTarget = null,
                    this._blurMaterial = (20,
                    new Fs({
                        name: "SphericalGaussianBlur",
                        defines: {
                            n: 20
                        },
                        uniforms: {
                            envMap: {
                                value: null
                            },
                            samples: {
                                value: 1
                            },
                            weights: {
                                value: new Float32Array(20)
                            },
                            latitudinal: {
                                value: !1
                            },
                            dTheta: {
                                value: 0
                            },
                            mipInt: {
                                value: 0
                            },
                            poleAxis: {
                                value: new _t(0,1,0)
                            },
                            inputEncoding: {
                                value: Yh[3e3]
                            },
                            outputEncoding: {
                                value: Yh[3e3]
                            }
                        },
                        vertexShader: "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                        fragmentShader: "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
                        blending: 0,
                        depthTest: !1,
                        depthWrite: !1
                    })),
                    this._equirectShader = null,
                    this._cubemapShader = null,
                    this._compileMaterial(this._blurMaterial)
                }
                var e = t.prototype;
                return e.fromScene = function(t, e, r, n) {
                    void 0 === e && (e = 0),
                    void 0 === r && (r = .1),
                    void 0 === n && (n = 100),
                    tu = this._renderer.getRenderTarget();
                    var i = this._allocateTargets();
                    return this._sceneToCubeUV(t, r, n, i),
                    e > 0 && this._blur(i, 0, 0, e),
                    this._applyPMREM(i),
                    this._cleanup(i),
                    i
                }
                ,
                e.fromEquirectangular = function(t) {
                    return this._fromTexture(t)
                }
                ,
                e.fromCubemap = function(t) {
                    return this._fromTexture(t)
                }
                ,
                e.compileCubemapShader = function() {
                    null === this._cubemapShader && (this._cubemapShader = hu(),
                    this._compileMaterial(this._cubemapShader))
                }
                ,
                e.compileEquirectangularShader = function() {
                    null === this._equirectShader && (this._equirectShader = cu(),
                    this._compileMaterial(this._equirectShader))
                }
                ,
                e.dispose = function() {
                    this._blurMaterial.dispose(),
                    null !== this._cubemapShader && this._cubemapShader.dispose(),
                    null !== this._equirectShader && this._equirectShader.dispose();
                    for (var t = 0; t < Zh.length; t++)
                        Zh[t].dispose()
                }
                ,
                e._cleanup = function(t) {
                    this._pingPongRenderTarget.dispose(),
                    this._renderer.setRenderTarget(tu),
                    t.scissorTest = !1,
                    lu(t, 0, 0, t.width, t.height)
                }
                ,
                e._fromTexture = function(t) {
                    tu = this._renderer.getRenderTarget();
                    var e = this._allocateTargets(t);
                    return this._textureToCubeUV(t, e),
                    this._applyPMREM(e),
                    this._cleanup(e),
                    e
                }
                ,
                e._allocateTargets = function(t) {
                    var e = {
                        magFilter: d,
                        minFilter: d,
                        generateMipmaps: !1,
                        type: y,
                        format: 1023,
                        encoding: au(t) ? t.encoding : $,
                        depthBuffer: !1
                    }
                      , r = su(e);
                    return r.depthBuffer = !t,
                    this._pingPongRenderTarget = su(e),
                    r
                }
                ,
                e._compileMaterial = function(t) {
                    var e = new Lr(Zh[0],t);
                    this._renderer.compile(e, $h)
                }
                ,
                e._sceneToCubeUV = function(t, e, r, n) {
                    var i = new zr(90,1,e,r)
                      , a = [1, -1, 1, 1, 1, 1]
                      , o = [1, 1, 1, -1, -1, -1]
                      , s = this._renderer
                      , l = s.outputEncoding
                      , c = s.toneMapping
                      , h = s.getClearColor()
                      , u = s.getClearAlpha();
                    s.toneMapping = 0,
                    s.outputEncoding = q;
                    var p = t.background;
                    if (p && p.isColor) {
                        p.convertSRGBToLinear();
                        var d = Math.max(p.r, p.g, p.b)
                          , f = Math.min(Math.max(Math.ceil(Math.log2(d)), -128), 127);
                        p = p.multiplyScalar(Math.pow(2, -f));
                        var m = (f + 128) / 255;
                        s.setClearColor(p, m),
                        t.background = null
                    }
                    for (var v = 0; v < 6; v++) {
                        var g = v % 3;
                        0 == g ? (i.up.set(0, a[v], 0),
                        i.lookAt(o[v], 0, 0)) : 1 == g ? (i.up.set(0, 0, a[v]),
                        i.lookAt(0, o[v], 0)) : (i.up.set(0, a[v], 0),
                        i.lookAt(0, 0, o[v])),
                        lu(n, g * Wh, v > 2 ? Wh : 0, Wh, Wh),
                        s.setRenderTarget(n),
                        s.render(t, i)
                    }
                    s.toneMapping = c,
                    s.outputEncoding = l,
                    s.setClearColor(h, u)
                }
                ,
                e._textureToCubeUV = function(t, e) {
                    var r = this._renderer;
                    t.isCubeTexture ? null == this._cubemapShader && (this._cubemapShader = hu()) : null == this._equirectShader && (this._equirectShader = cu());
                    var n = t.isCubeTexture ? this._cubemapShader : this._equirectShader
                      , i = new Lr(Zh[0],n)
                      , a = n.uniforms;
                    a.envMap.value = t,
                    t.isCubeTexture || a.texelSize.value.set(1 / t.image.width, 1 / t.image.height),
                    a.inputEncoding.value = Yh[t.encoding],
                    a.outputEncoding.value = Yh[e.texture.encoding],
                    lu(e, 0, 0, 3 * Wh, 2 * Wh),
                    r.setRenderTarget(e),
                    r.render(i, $h)
                }
                ,
                e._applyPMREM = function(t) {
                    var e = this._renderer
                      , r = e.autoClear;
                    e.autoClear = !1;
                    for (var n = 1; n < Xh; n++) {
                        var i = Math.sqrt(Qh[n] * Qh[n] - Qh[n - 1] * Qh[n - 1])
                          , a = nu[(n - 1) % nu.length];
                        this._blur(t, n - 1, n, i, a)
                    }
                    e.autoClear = r
                }
                ,
                e._blur = function(t, e, r, n, i) {
                    var a = this._pingPongRenderTarget;
                    this._halfBlur(t, a, e, r, n, "latitudinal", i),
                    this._halfBlur(a, t, r, r, n, "longitudinal", i)
                }
                ,
                e._halfBlur = function(t, e, r, n, i, a, o) {
                    var s = this._renderer
                      , l = this._blurMaterial;
                    "latitudinal" !== a && "longitudinal" !== a && console.error("blur direction must be either latitudinal or longitudinal!");
                    var c = new Lr(Zh[n],l)
                      , h = l.uniforms
                      , u = Jh[r] - 1
                      , p = isFinite(i) ? Math.PI / (2 * u) : 2 * Math.PI / 39
                      , d = i / p
                      , f = isFinite(i) ? 1 + Math.floor(3 * d) : 20;
                    f > 20 && console.warn("sigmaRadians, " + i + ", is too large and will clip, as it requested " + f + " samples when the maximum is set to 20");
                    for (var m = [], v = 0, g = 0; g < 20; ++g) {
                        var y = g / d
                          , _ = Math.exp(-y * y / 2);
                        m.push(_),
                        0 == g ? v += _ : g < f && (v += 2 * _)
                    }
                    for (var x = 0; x < m.length; x++)
                        m[x] = m[x] / v;
                    h.envMap.value = t.texture,
                    h.samples.value = f,
                    h.weights.value = m,
                    h.latitudinal.value = "latitudinal" === a,
                    o && (h.poleAxis.value = o),
                    h.dTheta.value = p,
                    h.mipInt.value = 8 - r,
                    h.inputEncoding.value = Yh[t.texture.encoding],
                    h.outputEncoding.value = Yh[t.texture.encoding];
                    var b = Jh[n];
                    lu(e, 3 * Math.max(0, Wh - 2 * b), (0 === n ? 0 : 2 * Wh) + 2 * b * (n > 4 ? n - 8 + 4 : 0), 3 * b, 2 * b),
                    s.setRenderTarget(e),
                    s.render(c, $h)
                }
                ,
                t
            }();
            function au(t) {
                return void 0 !== t && t.type === y && (t.encoding === q || t.encoding === X || t.encoding === Y)
            }
            function ou() {
                for (var t = [], e = [], r = [], n = 8, i = 0; i < Xh; i++) {
                    var a = Math.pow(2, n);
                    e.push(a);
                    var o = 1 / a;
                    i > 4 ? o = qh[i - 8 + 4 - 1] : 0 == i && (o = 0),
                    r.push(o);
                    for (var s = 1 / (a - 1), l = -s / 2, c = 1 + s / 2, h = [l, l, c, l, c, c, l, l, c, c, l, c], u = new Float32Array(108), p = new Float32Array(72), d = new Float32Array(36), f = 0; f < 6; f++) {
                        var m = f % 3 * 2 / 3 - 1
                          , v = f > 2 ? 0 : -1
                          , g = [m, v, 0, m + 2 / 3, v, 0, m + 2 / 3, v + 1, 0, m, v, 0, m + 2 / 3, v + 1, 0, m, v + 1, 0];
                        u.set(g, 18 * f),
                        p.set(h, 12 * f);
                        var y = [f, f, f, f, f, f];
                        d.set(y, 6 * f)
                    }
                    var _ = new pr;
                    _.setAttribute("position", new Xe(u,3)),
                    _.setAttribute("uv", new Xe(p,2)),
                    _.setAttribute("faceIndex", new Xe(d,1)),
                    t.push(_),
                    n > 4 && n--
                }
                return {
                    _lodPlanes: t,
                    _sizeLods: e,
                    _sigmas: r
                }
            }
            function su(t) {
                var e = new vt(3 * Wh,3 * Wh,t);
                return e.texture.mapping = l,
                e.texture.name = "PMREM.cubeUv",
                e.scissorTest = !0,
                e
            }
            function lu(t, e, r, n, i) {
                t.viewport.set(e, r, n, i),
                t.scissor.set(e, r, n, i)
            }
            function cu() {
                return new Fs({
                    name: "EquirectangularToCubeUV",
                    uniforms: {
                        envMap: {
                            value: null
                        },
                        texelSize: {
                            value: new ht(1,1)
                        },
                        inputEncoding: {
                            value: Yh[3e3]
                        },
                        outputEncoding: {
                            value: Yh[3e3]
                        }
                    },
                    vertexShader: "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                    fragmentShader: "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
                    blending: 0,
                    depthTest: !1,
                    depthWrite: !1
                })
            }
            function hu() {
                return new Fs({
                    name: "CubemapToCubeUV",
                    uniforms: {
                        envMap: {
                            value: null
                        },
                        inputEncoding: {
                            value: Yh[3e3]
                        },
                        outputEncoding: {
                            value: Yh[3e3]
                        }
                    },
                    vertexShader: "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                    fragmentShader: "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
                    blending: 0,
                    depthTest: !1,
                    depthWrite: !1
                })
            }
            function uu(t) {
                console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),
                Al.call(this, t),
                this.type = "catmullrom",
                this.closed = !0
            }
            function pu(t) {
                console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),
                Al.call(this, t),
                this.type = "catmullrom"
            }
            function du(t) {
                console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),
                Al.call(this, t),
                this.type = "catmullrom"
            }
            _l.create = function(t, e) {
                return console.log("THREE.Curve.create() has been deprecated"),
                t.prototype = Object.create(_l.prototype),
                t.prototype.constructor = t,
                t.prototype.getPoint = e,
                t
            }
            ,
            Object.assign(zl.prototype, {
                createPointsGeometry: function(t) {
                    console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
                    var e = this.getPoints(t);
                    return this.createGeometry(e)
                },
                createSpacedPointsGeometry: function(t) {
                    console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
                    var e = this.getSpacedPoints(t);
                    return this.createGeometry(e)
                },
                createGeometry: function(t) {
                    console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
                    for (var e = new mo, r = 0, n = t.length; r < n; r++) {
                        var i = t[r];
                        e.vertices.push(new _t(i.x,i.y,i.z || 0))
                    }
                    return e
                }
            }),
            Object.assign(Gl.prototype, {
                fromPoints: function(t) {
                    return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),
                    this.setFromPoints(t)
                }
            }),
            uu.prototype = Object.create(Al.prototype),
            pu.prototype = Object.create(Al.prototype),
            du.prototype = Object.create(Al.prototype),
            Object.assign(du.prototype, {
                initFromArray: function() {
                    console.error("THREE.Spline: .initFromArray() has been removed.")
                },
                getControlPointsArray: function() {
                    console.error("THREE.Spline: .getControlPointsArray() has been removed.")
                },
                reparametrizeByArcLength: function() {
                    console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")
                }
            }),
            Mh.prototype.setColors = function() {
                console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")
            }
            ,
            yh.prototype.update = function() {
                console.error("THREE.SkeletonHelper: update() no longer needs to be called.")
            }
            ,
            Object.assign(hl.prototype, {
                extractUrlBase: function(t) {
                    return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),
                    nc.extractUrlBase(t)
                }
            }),
            hl.Handlers = {
                add: function() {
                    console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")
                },
                get: function() {
                    console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")
                }
            },
            Object.assign(lh.prototype, {
                center: function(t) {
                    return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),
                    this.getCenter(t)
                },
                empty: function() {
                    return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),
                    this.isEmpty()
                },
                isIntersectionBox: function(t) {
                    return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),
                    this.intersectsBox(t)
                },
                size: function(t) {
                    return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),
                    this.getSize(t)
                }
            }),
            Object.assign(wt.prototype, {
                center: function(t) {
                    return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),
                    this.getCenter(t)
                },
                empty: function() {
                    return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),
                    this.isEmpty()
                },
                isIntersectionBox: function(t) {
                    return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),
                    this.intersectsBox(t)
                },
                isIntersectionSphere: function(t) {
                    return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),
                    this.intersectsSphere(t)
                },
                size: function(t) {
                    return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),
                    this.getSize(t)
                }
            }),
            Object.assign(Bt.prototype, {
                empty: function() {
                    return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),
                    this.isEmpty()
                }
            }),
            Xr.prototype.setFromMatrix = function(t) {
                return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),
                this.setFromProjectionMatrix(t)
            }
            ,
            uh.prototype.center = function(t) {
                return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),
                this.getCenter(t)
            }
            ,
            Object.assign(it, {
                random16: function() {
                    return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),
                    Math.random()
                },
                nearestPowerOfTwo: function(t) {
                    return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),
                    it.floorPowerOfTwo(t)
                },
                nextPowerOfTwo: function(t) {
                    return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),
                    it.ceilPowerOfTwo(t)
                }
            }),
            Object.assign(ut.prototype, {
                flattenToArrayOffset: function(t, e) {
                    return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),
                    this.toArray(t, e)
                },
                multiplyVector3: function(t) {
                    return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),
                    t.applyMatrix3(this)
                },
                multiplyVector3Array: function() {
                    console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")
                },
                applyToBufferAttribute: function(t) {
                    return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),
                    t.applyMatrix3(this)
                },
                applyToVector3Array: function() {
                    console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")
                }
            }),
            Object.assign(Xt.prototype, {
                extractPosition: function(t) {
                    return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),
                    this.copyPosition(t)
                },
                flattenToArrayOffset: function(t, e) {
                    return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),
                    this.toArray(t, e)
                },
                getPosition: function() {
                    return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),
                    (new _t).setFromMatrixColumn(this, 3)
                },
                setRotationFromQuaternion: function(t) {
                    return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),
                    this.makeRotationFromQuaternion(t)
                },
                multiplyToArray: function() {
                    console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")
                },
                multiplyVector3: function(t) {
                    return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                    t.applyMatrix4(this)
                },
                multiplyVector4: function(t) {
                    return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                    t.applyMatrix4(this)
                },
                multiplyVector3Array: function() {
                    console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")
                },
                rotateAxis: function(t) {
                    console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),
                    t.transformDirection(this)
                },
                crossVector: function(t) {
                    return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                    t.applyMatrix4(this)
                },
                translate: function() {
                    console.error("THREE.Matrix4: .translate() has been removed.")
                },
                rotateX: function() {
                    console.error("THREE.Matrix4: .rotateX() has been removed.")
                },
                rotateY: function() {
                    console.error("THREE.Matrix4: .rotateY() has been removed.")
                },
                rotateZ: function() {
                    console.error("THREE.Matrix4: .rotateZ() has been removed.")
                },
                rotateByAxis: function() {
                    console.error("THREE.Matrix4: .rotateByAxis() has been removed.")
                },
                applyToBufferAttribute: function(t) {
                    return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),
                    t.applyMatrix4(this)
                },
                applyToVector3Array: function() {
                    console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")
                },
                makeFrustum: function(t, e, r, n, i, a) {
                    return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),
                    this.makePerspective(t, e, n, r, i, a)
                }
            }),
            we.prototype.isIntersectionLine = function(t) {
                return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),
                this.intersectsLine(t)
            }
            ,
            yt.prototype.multiplyVector3 = function(t) {
                return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),
                t.applyQuaternion(this)
            }
            ,
            Object.assign(qt.prototype, {
                isIntersectionBox: function(t) {
                    return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),
                    this.intersectsBox(t)
                },
                isIntersectionPlane: function(t) {
                    return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),
                    this.intersectsPlane(t)
                },
                isIntersectionSphere: function(t) {
                    return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),
                    this.intersectsSphere(t)
                }
            }),
            Object.assign(Ie.prototype, {
                area: function() {
                    return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),
                    this.getArea()
                },
                barycoordFromPoint: function(t, e) {
                    return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),
                    this.getBarycoord(t, e)
                },
                midpoint: function(t) {
                    return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),
                    this.getMidpoint(t)
                },
                normal: function(t) {
                    return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),
                    this.getNormal(t)
                },
                plane: function(t) {
                    return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),
                    this.getPlane(t)
                }
            }),
            Object.assign(Ie, {
                barycoordFromPoint: function(t, e, r, n, i) {
                    return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),
                    Ie.getBarycoord(t, e, r, n, i)
                },
                normal: function(t, e, r, n) {
                    return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),
                    Ie.getNormal(t, e, r, n)
                }
            }),
            Object.assign(Hl.prototype, {
                extractAllPoints: function(t) {
                    return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),
                    this.extractPoints(t)
                },
                extrude: function(t) {
                    return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),
                    new os(this,t)
                },
                makeGeometry: function(t) {
                    return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),
                    new xs(this,t)
                }
            }),
            Object.assign(ht.prototype, {
                fromAttribute: function(t, e, r) {
                    return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),
                    this.fromBufferAttribute(t, e, r)
                },
                distanceToManhattan: function(t) {
                    return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),
                    this.manhattanDistanceTo(t)
                },
                lengthManhattan: function() {
                    return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),
                    this.manhattanLength()
                }
            }),
            Object.assign(_t.prototype, {
                setEulerFromRotationMatrix: function() {
                    console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
                },
                setEulerFromQuaternion: function() {
                    console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
                },
                getPositionFromMatrix: function(t) {
                    return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),
                    this.setFromMatrixPosition(t)
                },
                getScaleFromMatrix: function(t) {
                    return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),
                    this.setFromMatrixScale(t)
                },
                getColumnFromMatrix: function(t, e) {
                    return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),
                    this.setFromMatrixColumn(e, t)
                },
                applyProjection: function(t) {
                    return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),
                    this.applyMatrix4(t)
                },
                fromAttribute: function(t, e, r) {
                    return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),
                    this.fromBufferAttribute(t, e, r)
                },
                distanceToManhattan: function(t) {
                    return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),
                    this.manhattanDistanceTo(t)
                },
                lengthManhattan: function() {
                    return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),
                    this.manhattanLength()
                }
            }),
            Object.assign(mt.prototype, {
                fromAttribute: function(t, e, r) {
                    return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),
                    this.fromBufferAttribute(t, e, r)
                },
                lengthManhattan: function() {
                    return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),
                    this.manhattanLength()
                }
            }),
            Object.assign(mo.prototype, {
                computeTangents: function() {
                    console.error("THREE.Geometry: .computeTangents() has been removed.")
                },
                computeLineDistances: function() {
                    console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")
                },
                applyMatrix: function(t) {
                    return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),
                    this.applyMatrix4(t)
                }
            }),
            Object.assign(ye.prototype, {
                getChildByName: function(t) {
                    return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),
                    this.getObjectByName(t)
                },
                renderDepth: function() {
                    console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")
                },
                translate: function(t, e) {
                    return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),
                    this.translateOnAxis(e, t)
                },
                getWorldRotation: function() {
                    console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")
                },
                applyMatrix: function(t) {
                    return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),
                    this.applyMatrix4(t)
                }
            }),
            Object.defineProperties(ye.prototype, {
                eulerOrder: {
                    get: function() {
                        return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),
                        this.rotation.order
                    },
                    set: function(t) {
                        console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),
                        this.rotation.order = t
                    }
                },
                useQuaternion: {
                    get: function() {
                        console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
                    },
                    set: function() {
                        console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
                    }
                }
            }),
            Object.assign(Lr.prototype, {
                setDrawMode: function() {
                    console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")
                }
            }),
            Object.defineProperties(Lr.prototype, {
                drawMode: {
                    get: function() {
                        return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),
                        0
                    },
                    set: function() {
                        console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")
                    }
                }
            }),
            Object.defineProperties(Da.prototype, {
                objects: {
                    get: function() {
                        return console.warn("THREE.LOD: .objects has been renamed to .levels."),
                        this.levels
                    }
                }
            }),
            Object.defineProperty(Oa.prototype, "useVertexTexture", {
                get: function() {
                    console.warn("THREE.Skeleton: useVertexTexture has been removed.")
                },
                set: function() {
                    console.warn("THREE.Skeleton: useVertexTexture has been removed.")
                }
            }),
            Ra.prototype.initBones = function() {
                console.error("THREE.SkinnedMesh: initBones() has been removed.")
            }
            ,
            Object.defineProperty(_l.prototype, "__arcLengthDivisions", {
                get: function() {
                    return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),
                    this.arcLengthDivisions
                },
                set: function(t) {
                    console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),
                    this.arcLengthDivisions = t
                }
            }),
            zr.prototype.setLens = function(t, e) {
                console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),
                void 0 !== e && (this.filmGauge = e),
                this.setFocalLength(t)
            }
            ,
            Object.defineProperties(Ul.prototype, {
                onlyShadow: {
                    set: function() {
                        console.warn("THREE.Light: .onlyShadow has been removed.")
                    }
                },
                shadowCameraFov: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),
                        this.shadow.camera.fov = t
                    }
                },
                shadowCameraLeft: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),
                        this.shadow.camera.left = t
                    }
                },
                shadowCameraRight: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),
                        this.shadow.camera.right = t
                    }
                },
                shadowCameraTop: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),
                        this.shadow.camera.top = t
                    }
                },
                shadowCameraBottom: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),
                        this.shadow.camera.bottom = t
                    }
                },
                shadowCameraNear: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),
                        this.shadow.camera.near = t
                    }
                },
                shadowCameraFar: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),
                        this.shadow.camera.far = t
                    }
                },
                shadowCameraVisible: {
                    set: function() {
                        console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")
                    }
                },
                shadowBias: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowBias is now .shadow.bias."),
                        this.shadow.bias = t
                    }
                },
                shadowDarkness: {
                    set: function() {
                        console.warn("THREE.Light: .shadowDarkness has been removed.")
                    }
                },
                shadowMapWidth: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),
                        this.shadow.mapSize.width = t
                    }
                },
                shadowMapHeight: {
                    set: function(t) {
                        console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),
                        this.shadow.mapSize.height = t
                    }
                }
            }),
            Object.defineProperties(Xe.prototype, {
                length: {
                    get: function() {
                        return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),
                        this.array.length
                    }
                },
                dynamic: {
                    get: function() {
                        return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),
                        this.usage === J
                    },
                    set: function() {
                        console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),
                        this.setUsage(J)
                    }
                }
            }),
            Object.assign(Xe.prototype, {
                setDynamic: function(t) {
                    return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),
                    this.setUsage(!0 === t ? J : Z),
                    this
                },
                copyIndicesArray: function() {
                    console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")
                },
                setArray: function() {
                    console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")
                }
            }),
            Object.assign(pr.prototype, {
                addIndex: function(t) {
                    console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),
                    this.setIndex(t)
                },
                addAttribute: function(t, e) {
                    return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),
                    e && e.isBufferAttribute || e && e.isInterleavedBufferAttribute ? "index" === t ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
                    this.setIndex(e),
                    this) : this.setAttribute(t, e) : (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
                    this.setAttribute(t, new Xe(arguments[1],arguments[2])))
                },
                addDrawCall: function(t, e, r) {
                    void 0 !== r && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),
                    console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),
                    this.addGroup(t, e)
                },
                clearDrawCalls: function() {
                    console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),
                    this.clearGroups()
                },
                computeTangents: function() {
                    console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")
                },
                computeOffsets: function() {
                    console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")
                },
                removeAttribute: function(t) {
                    return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),
                    this.deleteAttribute(t)
                },
                applyMatrix: function(t) {
                    return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),
                    this.applyMatrix4(t)
                }
            }),
            Object.defineProperties(pr.prototype, {
                drawcalls: {
                    get: function() {
                        return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),
                        this.groups
                    }
                },
                offsets: {
                    get: function() {
                        return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),
                        this.groups
                    }
                }
            }),
            Object.defineProperties(ic.prototype, {
                maxInstancedCount: {
                    get: function() {
                        return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),
                        this.instanceCount
                    },
                    set: function(t) {
                        console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),
                        this.instanceCount = t
                    }
                }
            }),
            Object.defineProperties(rh.prototype, {
                linePrecision: {
                    get: function() {
                        return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),
                        this.params.Line.threshold
                    },
                    set: function(t) {
                        console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),
                        this.params.Line.threshold = t
                    }
                }
            }),
            Object.defineProperties(aa.prototype, {
                dynamic: {
                    get: function() {
                        return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),
                        this.usage === J
                    },
                    set: function(t) {
                        console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),
                        this.setUsage(t)
                    }
                }
            }),
            Object.assign(aa.prototype, {
                setDynamic: function(t) {
                    return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),
                    this.setUsage(!0 === t ? J : Z),
                    this
                },
                setArray: function() {
                    console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")
                }
            }),
            Object.assign(is.prototype, {
                getArrays: function() {
                    console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")
                },
                addShapeList: function() {
                    console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")
                },
                addShape: function() {
                    console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")
                }
            }),
            Object.assign(ia.prototype, {
                dispose: function() {
                    console.error("THREE.Scene: .dispose() has been removed.")
                }
            }),
            Object.defineProperties(Qc.prototype, {
                dynamic: {
                    set: function() {
                        console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")
                    }
                },
                onUpdate: {
                    value: function() {
                        return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),
                        this
                    }
                }
            }),
            Object.defineProperties(Ve.prototype, {
                wrapAround: {
                    get: function() {
                        console.warn("THREE.Material: .wrapAround has been removed.")
                    },
                    set: function() {
                        console.warn("THREE.Material: .wrapAround has been removed.")
                    }
                },
                overdraw: {
                    get: function() {
                        console.warn("THREE.Material: .overdraw has been removed.")
                    },
                    set: function() {
                        console.warn("THREE.Material: .overdraw has been removed.")
                    }
                },
                wrapRGB: {
                    get: function() {
                        return console.warn("THREE.Material: .wrapRGB has been removed."),
                        new Ge
                    }
                },
                shading: {
                    get: function() {
                        console.error("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead.")
                    },
                    set: function(t) {
                        console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."),
                        this.flatShading = 1 === t
                    }
                },
                stencilMask: {
                    get: function() {
                        return console.warn("THREE." + this.type + ": .stencilMask has been removed. Use .stencilFuncMask instead."),
                        this.stencilFuncMask
                    },
                    set: function(t) {
                        console.warn("THREE." + this.type + ": .stencilMask has been removed. Use .stencilFuncMask instead."),
                        this.stencilFuncMask = t
                    }
                }
            }),
            Object.defineProperties(zs.prototype, {
                metal: {
                    get: function() {
                        return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),
                        !1
                    },
                    set: function() {
                        console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")
                    }
                }
            }),
            Object.defineProperties(Bs.prototype, {
                transparency: {
                    get: function() {
                        return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),
                        this.transmission
                    },
                    set: function(t) {
                        console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),
                        this.transmission = t
                    }
                }
            }),
            Object.defineProperties(Nr.prototype, {
                derivatives: {
                    get: function() {
                        return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),
                        this.extensions.derivatives
                    },
                    set: function(t) {
                        console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),
                        this.extensions.derivatives = t
                    }
                }
            }),
            Object.assign(ta.prototype, {
                clearTarget: function(t, e, r, n) {
                    console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),
                    this.setRenderTarget(t),
                    this.clear(e, r, n)
                },
                animate: function(t) {
                    console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),
                    this.setAnimationLoop(t)
                },
                getCurrentRenderTarget: function() {
                    return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),
                    this.getRenderTarget()
                },
                getMaxAnisotropy: function() {
                    return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),
                    this.capabilities.getMaxAnisotropy()
                },
                getPrecision: function() {
                    return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),
                    this.capabilities.precision
                },
                resetGLState: function() {
                    return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),
                    this.state.reset()
                },
                supportsFloatTextures: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),
                    this.extensions.get("OES_texture_float")
                },
                supportsHalfFloatTextures: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),
                    this.extensions.get("OES_texture_half_float")
                },
                supportsStandardDerivatives: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),
                    this.extensions.get("OES_standard_derivatives")
                },
                supportsCompressedTextureS3TC: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),
                    this.extensions.get("WEBGL_compressed_texture_s3tc")
                },
                supportsCompressedTexturePVRTC: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),
                    this.extensions.get("WEBGL_compressed_texture_pvrtc")
                },
                supportsBlendMinMax: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),
                    this.extensions.get("EXT_blend_minmax")
                },
                supportsVertexTextures: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),
                    this.capabilities.vertexTextures
                },
                supportsInstancedArrays: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),
                    this.extensions.get("ANGLE_instanced_arrays")
                },
                enableScissorTest: function(t) {
                    console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),
                    this.setScissorTest(t)
                },
                initMaterial: function() {
                    console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
                },
                addPrePlugin: function() {
                    console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
                },
                addPostPlugin: function() {
                    console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
                },
                updateShadowMap: function() {
                    console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
                },
                setFaceCulling: function() {
                    console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")
                },
                allocTextureUnit: function() {
                    console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")
                },
                setTexture: function() {
                    console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")
                },
                setTexture2D: function() {
                    console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")
                },
                setTextureCube: function() {
                    console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")
                },
                getActiveMipMapLevel: function() {
                    return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),
                    this.getActiveMipmapLevel()
                }
            }),
            Object.defineProperties(ta.prototype, {
                shadowMapEnabled: {
                    get: function() {
                        return this.shadowMap.enabled
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),
                        this.shadowMap.enabled = t
                    }
                },
                shadowMapType: {
                    get: function() {
                        return this.shadowMap.type
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),
                        this.shadowMap.type = t
                    }
                },
                shadowMapCullFace: {
                    get: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")
                    },
                    set: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")
                    }
                },
                context: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),
                        this.getContext()
                    }
                },
                vr: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),
                        this.xr
                    }
                },
                gammaInput: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),
                        !1
                    },
                    set: function() {
                        console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")
                    }
                },
                gammaOutput: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),
                        !1
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),
                        this.outputEncoding = !0 === t ? X : q
                    }
                },
                toneMappingWhitePoint: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),
                        1
                    },
                    set: function() {
                        console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")
                    }
                }
            }),
            Object.defineProperties(Wi.prototype, {
                cullFace: {
                    get: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")
                    },
                    set: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")
                    }
                },
                renderReverseSided: {
                    get: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")
                    },
                    set: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")
                    }
                },
                renderSingleSided: {
                    get: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")
                    },
                    set: function() {
                        console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")
                    }
                }
            }),
            Object.defineProperties(vt.prototype, {
                wrapS: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),
                        this.texture.wrapS
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),
                        this.texture.wrapS = t
                    }
                },
                wrapT: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),
                        this.texture.wrapT
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),
                        this.texture.wrapT = t
                    }
                },
                magFilter: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),
                        this.texture.magFilter
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),
                        this.texture.magFilter = t
                    }
                },
                minFilter: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),
                        this.texture.minFilter
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),
                        this.texture.minFilter = t
                    }
                },
                anisotropy: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),
                        this.texture.anisotropy
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),
                        this.texture.anisotropy = t
                    }
                },
                offset: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),
                        this.texture.offset
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),
                        this.texture.offset = t
                    }
                },
                repeat: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),
                        this.texture.repeat
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),
                        this.texture.repeat = t
                    }
                },
                format: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),
                        this.texture.format
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),
                        this.texture.format = t
                    }
                },
                type: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),
                        this.texture.type
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),
                        this.texture.type = t
                    }
                },
                generateMipmaps: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),
                        this.texture.generateMipmaps
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),
                        this.texture.generateMipmaps = t
                    }
                }
            }),
            Object.defineProperties(Dc.prototype, {
                load: {
                    value: function(t) {
                        console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
                        var e = this;
                        return (new _c).load(t, (function(t) {
                            e.setBuffer(t)
                        }
                        )),
                        this
                    }
                },
                startTime: {
                    set: function() {
                        console.warn("THREE.Audio: .startTime is now .play( delay ).")
                    }
                }
            }),
            Nc.prototype.getData = function() {
                return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),
                this.getFrequencyData()
            }
            ,
            Hr.prototype.updateCubeMap = function(t, e) {
                return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),
                this.update(t, e)
            }
            ,
            Hr.prototype.clear = function(t, e, r, n) {
                return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),
                this.renderTarget.clear(t, e, r, n)
            }
            ;
            var fu = {
                merge: function(t, e, r) {
                    var n;
                    console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),
                    e.isMesh && (e.matrixAutoUpdate && e.updateMatrix(),
                    n = e.matrix,
                    e = e.geometry),
                    t.merge(e, n, r)
                },
                center: function(t) {
                    return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),
                    t.center()
                }
            };
            pt.crossOrigin = void 0,
            pt.loadTexture = function(t, e, r, n) {
                console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
                var i = new yl;
                i.setCrossOrigin(this.crossOrigin);
                var a = i.load(t, r, void 0, n);
                return e && (a.mapping = e),
                a
            }
            ,
            pt.loadTextureCube = function(t, e, r, n) {
                console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");
                var i = new vl;
                i.setCrossOrigin(this.crossOrigin);
                var a = i.load(t, r, void 0, n);
                return e && (a.mapping = e),
                a
            }
            ,
            pt.loadCompressedTexture = function() {
                console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
            }
            ,
            pt.loadCompressedTextureCube = function() {
                console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
            }
            ;
            var mu = {
                createMultiMaterialObject: function() {
                    console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")
                },
                detach: function() {
                    console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")
                },
                attach: function() {
                    console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")
                }
            };
            "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{
                detail: {
                    revision: "122"
                }
            })),
            t.ACESFilmicToneMapping = 4,
            t.AddEquation = e,
            t.AddOperation = 2,
            t.AdditiveAnimationBlendMode = W,
            t.AdditiveBlending = 2,
            t.AlphaFormat = 1021,
            t.AlwaysDepth = 1,
            t.AlwaysStencilFunc = 519,
            t.AmbientLight = Jl,
            t.AmbientLightProbe = bc,
            t.AnimationClip = al,
            t.AnimationLoader = dl,
            t.AnimationMixer = Jc,
            t.AnimationObjectGroup = Kc,
            t.AnimationUtils = qs,
            t.ArcCurve = bl,
            t.ArrayCamera = $i,
            t.ArrowHelper = Vh,
            t.Audio = Dc,
            t.AudioAnalyser = Nc,
            t.AudioContext = yc,
            t.AudioListener = Lc,
            t.AudioLoader = _c,
            t.AxesHelper = jh,
            t.AxisHelper = function(t) {
                return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),
                new jh(t)
            }
            ,
            t.BackSide = 1,
            t.BasicDepthPacking = 3200,
            t.BasicShadowMap = 0,
            t.BinaryTextureLoader = function(t) {
                return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),
                new gl(t)
            }
            ,
            t.Bone = Fa,
            t.BooleanKeyframeTrack = Js,
            t.BoundingBoxHelper = function(t, e) {
                return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),
                new zh(t,e)
            }
            ,
            t.Box2 = lh,
            t.Box3 = wt,
            t.Box3Helper = Gh,
            t.BoxBufferGeometry = Ir,
            t.BoxGeometry = vo,
            t.BoxHelper = zh,
            t.BufferAttribute = Xe,
            t.BufferGeometry = pr,
            t.BufferGeometryLoader = oc,
            t.ByteType = 1010,
            t.Cache = sl,
            t.Camera = Br,
            t.CameraHelper = Ih,
            t.CanvasRenderer = function() {
                console.error("THREE.CanvasRenderer has been removed")
            }
            ,
            t.CanvasTexture = lo,
            t.CatmullRomCurve3 = Al,
            t.CineonToneMapping = 3,
            t.CircleBufferGeometry = go,
            t.CircleGeometry = yo,
            t.ClampToEdgeWrapping = u,
            t.Clock = Mc,
            t.ClosedSplineCurve3 = uu,
            t.Color = Ge,
            t.ColorKeyframeTrack = Qs,
            t.CompressedTexture = so,
            t.CompressedTextureLoader = fl,
            t.ConeBufferGeometry = wo,
            t.ConeGeometry = bo,
            t.CubeCamera = Hr,
            t.CubeGeometry = vo,
            t.CubeReflectionMapping = i,
            t.CubeRefractionMapping = a,
            t.CubeTexture = Ur,
            t.CubeTextureLoader = vl,
            t.CubeUVReflectionMapping = l,
            t.CubeUVRefractionMapping = c,
            t.CubicBezierCurve = Dl,
            t.CubicBezierCurve3 = Rl,
            t.CubicInterpolant = Ys,
            t.CullFaceBack = 1,
            t.CullFaceFront = 2,
            t.CullFaceFrontBack = 3,
            t.CullFaceNone = 0,
            t.Curve = _l,
            t.CurvePath = zl,
            t.CustomBlending = 5,
            t.CustomToneMapping = 5,
            t.CylinderBufferGeometry = _o,
            t.CylinderGeometry = xo,
            t.Cylindrical = oh,
            t.DataTexture = jr,
            t.DataTexture2DArray = mn,
            t.DataTexture3D = vn,
            t.DataTextureLoader = gl,
            t.DecrementStencilOp = 7683,
            t.DecrementWrapStencilOp = 34056,
            t.DefaultLoadingManager = cl,
            t.DepthFormat = E,
            t.DepthStencilFormat = A,
            t.DepthTexture = co,
            t.DirectionalLight = Zl,
            t.DirectionalLightHelper = Lh,
            t.DiscreteInterpolant = Ks,
            t.DodecahedronBufferGeometry = To,
            t.DodecahedronGeometry = Mo,
            t.DoubleSide = 2,
            t.DstAlphaFactor = 206,
            t.DstColorFactor = 208,
            t.DynamicBufferAttribute = function(t, e) {
                return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),
                new Xe(t,e).setUsage(J)
            }
            ,
            t.DynamicCopyUsage = 35050,
            t.DynamicDrawUsage = J,
            t.DynamicReadUsage = 35049,
            t.EdgesGeometry = Lo,
            t.EdgesHelper = function(t, e) {
                return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),
                new Za(new Lo(t.geometry),new Ua({
                    color: void 0 !== e ? e : 16777215
                }))
            }
            ,
            t.EllipseCurve = xl,
            t.EqualDepth = 4,
            t.EqualStencilFunc = 514,
            t.EquirectangularReflectionMapping = o,
            t.EquirectangularRefractionMapping = s,
            t.Euler = ee,
            t.EventDispatcher = tt,
            t.ExtrudeBufferGeometry = is,
            t.ExtrudeGeometry = os,
            t.Face3 = He,
            t.Face4 = function(t, e, r, n, i, a, o) {
                return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),
                new He(t,e,r,i,a,o)
            }
            ,
            t.FaceColors = 1,
            t.FileLoader = pl,
            t.FlatShading = 1,
            t.Float32Attribute = function(t, e) {
                return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),
                new er(t,e)
            }
            ,
            t.Float32BufferAttribute = er,
            t.Float64Attribute = function(t, e) {
                return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),
                new rr(t,e)
            }
            ,
            t.Float64BufferAttribute = rr,
            t.FloatType = b,
            t.Fog = na,
            t.FogExp2 = ra,
            t.Font = mc,
            t.FontLoader = gc,
            t.FrontSide = 0,
            t.Frustum = Xr,
            t.GLBufferAttribute = eh,
            t.GLSL1 = "100",
            t.GLSL3 = Q,
            t.GammaEncoding = Y,
            t.Geometry = mo,
            t.GeometryUtils = fu,
            t.GreaterDepth = 6,
            t.GreaterEqualDepth = 5,
            t.GreaterEqualStencilFunc = 518,
            t.GreaterStencilFunc = 516,
            t.GridHelper = Mh,
            t.Group = Ki,
            t.HalfFloatType = w,
            t.HemisphereLight = Vl,
            t.HemisphereLightHelper = Th,
            t.HemisphereLightProbe = xc,
            t.IcosahedronBufferGeometry = ss,
            t.IcosahedronGeometry = ls,
            t.ImageBitmapLoader = dc,
            t.ImageLoader = ml,
            t.ImageUtils = pt,
            t.ImmediateRenderObject = ph,
            t.IncrementStencilOp = 7682,
            t.IncrementWrapStencilOp = 34055,
            t.InstancedBufferAttribute = ac,
            t.InstancedBufferGeometry = ic,
            t.InstancedInterleavedBuffer = th,
            t.InstancedMesh = Ha,
            t.Int16Attribute = function(t, e) {
                return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),
                new Ze(t,e)
            }
            ,
            t.Int16BufferAttribute = Ze,
            t.Int32Attribute = function(t, e) {
                return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),
                new Qe(t,e)
            }
            ,
            t.Int32BufferAttribute = Qe,
            t.Int8Attribute = function(t, e) {
                return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),
                new Ye(t,e)
            }
            ,
            t.Int8BufferAttribute = Ye,
            t.IntType = 1013,
            t.InterleavedBuffer = aa,
            t.InterleavedBufferAttribute = la,
            t.Interpolant = Xs,
            t.InterpolateDiscrete = B,
            t.InterpolateLinear = z,
            t.InterpolateSmooth = G,
            t.InvertStencilOp = 5386,
            t.JSONLoader = function() {
                console.error("THREE.JSONLoader has been removed.")
            }
            ,
            t.KeepStencilOp = K,
            t.KeyframeTrack = Zs,
            t.LOD = Da,
            t.LatheBufferGeometry = cs,
            t.LatheGeometry = hs,
            t.Layers = ie,
            t.LensFlare = function() {
                console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")
            }
            ,
            t.LessDepth = 2,
            t.LessEqualDepth = 3,
            t.LessEqualStencilFunc = 515,
            t.LessStencilFunc = 513,
            t.Light = Ul,
            t.LightProbe = ec,
            t.Line = Ya,
            t.Line3 = uh,
            t.LineBasicMaterial = Ua,
            t.LineCurve = Il,
            t.LineCurve3 = kl,
            t.LineDashedMaterial = js,
            t.LineLoop = Ja,
            t.LinePieces = 1,
            t.LineSegments = Za,
            t.LineStrip = 0,
            t.LinearEncoding = q,
            t.LinearFilter = v,
            t.LinearInterpolant = $s,
            t.LinearMipMapLinearFilter = 1008,
            t.LinearMipMapNearestFilter = 1007,
            t.LinearMipmapLinearFilter = g,
            t.LinearMipmapNearestFilter = 1007,
            t.LinearToneMapping = 1,
            t.Loader = hl,
            t.LoaderUtils = nc,
            t.LoadingManager = ll,
            t.LogLuvEncoding = 3003,
            t.LoopOnce = 2200,
            t.LoopPingPong = 2202,
            t.LoopRepeat = 2201,
            t.LuminanceAlphaFormat = 1025,
            t.LuminanceFormat = 1024,
            t.MOUSE = {
                LEFT: 0,
                MIDDLE: 1,
                RIGHT: 2,
                ROTATE: 0,
                DOLLY: 1,
                PAN: 2
            },
            t.Material = Ve,
            t.MaterialLoader = rc,
            t.Math = it,
            t.MathUtils = it,
            t.Matrix3 = ut,
            t.Matrix4 = Xt,
            t.MaxEquation = 104,
            t.Mesh = Lr,
            t.MeshBasicMaterial = je,
            t.MeshDepthMaterial = Vi,
            t.MeshDistanceMaterial = ji,
            t.MeshFaceMaterial = function(t) {
                return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),
                t
            }
            ,
            t.MeshLambertMaterial = Us,
            t.MeshMatcapMaterial = Vs,
            t.MeshNormalMaterial = Hs,
            t.MeshPhongMaterial = zs,
            t.MeshPhysicalMaterial = Bs,
            t.MeshStandardMaterial = Ns,
            t.MeshToonMaterial = Gs,
            t.MinEquation = 103,
            t.MirroredRepeatWrapping = p,
            t.MixOperation = 1,
            t.MultiMaterial = function(t) {
                return void 0 === t && (t = []),
                console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),
                t.isMultiMaterial = !0,
                t.materials = t,
                t.clone = function() {
                    return t.slice()
                }
                ,
                t
            }
            ,
            t.MultiplyBlending = 4,
            t.MultiplyOperation = 0,
            t.NearestFilter = d,
            t.NearestMipMapLinearFilter = 1005,
            t.NearestMipMapNearestFilter = 1004,
            t.NearestMipmapLinearFilter = m,
            t.NearestMipmapNearestFilter = f,
            t.NeverDepth = 0,
            t.NeverStencilFunc = 512,
            t.NoBlending = 0,
            t.NoColors = 0,
            t.NoToneMapping = 0,
            t.NormalAnimationBlendMode = j,
            t.NormalBlending = 1,
            t.NotEqualDepth = 7,
            t.NotEqualStencilFunc = 517,
            t.NumberKeyframeTrack = tl,
            t.Object3D = ye,
            t.ObjectLoader = cc,
            t.ObjectSpaceNormalMap = 1,
            t.OctahedronBufferGeometry = us,
            t.OctahedronGeometry = ps,
            t.OneFactor = 201,
            t.OneMinusDstAlphaFactor = 207,
            t.OneMinusDstColorFactor = 209,
            t.OneMinusSrcAlphaFactor = 205,
            t.OneMinusSrcColorFactor = 203,
            t.OrthographicCamera = $l,
            t.PCFShadowMap = 1,
            t.PCFSoftShadowMap = 2,
            t.PMREMGenerator = iu,
            t.ParametricBufferGeometry = ds,
            t.ParametricGeometry = fs,
            t.Particle = function(t) {
                return console.warn("THREE.Particle has been renamed to THREE.Sprite."),
                new wa(t)
            }
            ,
            t.ParticleBasicMaterial = function(t) {
                return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),
                new Qa(t)
            }
            ,
            t.ParticleSystem = function(t, e) {
                return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),
                new io(t,e)
            }
            ,
            t.ParticleSystemMaterial = function(t) {
                return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),
                new Qa(t)
            }
            ,
            t.Path = Gl,
            t.PerspectiveCamera = zr,
            t.Plane = we,
            t.PlaneBufferGeometry = Kr,
            t.PlaneGeometry = ms,
            t.PlaneHelper = Hh,
            t.PointCloud = function(t, e) {
                return console.warn("THREE.PointCloud has been renamed to THREE.Points."),
                new io(t,e)
            }
            ,
            t.PointCloudMaterial = function(t) {
                return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),
                new Qa(t)
            }
            ,
            t.PointLight = Yl,
            t.PointLightHelper = xh,
            t.Points = io,
            t.PointsMaterial = Qa,
            t.PolarGridHelper = Eh,
            t.PolyhedronBufferGeometry = So,
            t.PolyhedronGeometry = vs,
            t.PositionalAudio = Fc,
            t.PropertyBinding = $c,
            t.PropertyMixer = Bc,
            t.QuadraticBezierCurve = Ol,
            t.QuadraticBezierCurve3 = Fl,
            t.Quaternion = yt,
            t.QuaternionKeyframeTrack = rl,
            t.QuaternionLinearInterpolant = el,
            t.REVISION = "122",
            t.RGBADepthPacking = 3201,
            t.RGBAFormat = M,
            t.RGBAIntegerFormat = 1033,
            t.RGBA_ASTC_10x10_Format = 37819,
            t.RGBA_ASTC_10x5_Format = 37816,
            t.RGBA_ASTC_10x6_Format = 37817,
            t.RGBA_ASTC_10x8_Format = 37818,
            t.RGBA_ASTC_12x10_Format = 37820,
            t.RGBA_ASTC_12x12_Format = 37821,
            t.RGBA_ASTC_4x4_Format = 37808,
            t.RGBA_ASTC_5x4_Format = 37809,
            t.RGBA_ASTC_5x5_Format = 37810,
            t.RGBA_ASTC_6x5_Format = 37811,
            t.RGBA_ASTC_6x6_Format = 37812,
            t.RGBA_ASTC_8x5_Format = 37813,
            t.RGBA_ASTC_8x6_Format = 37814,
            t.RGBA_ASTC_8x8_Format = 37815,
            t.RGBA_BPTC_Format = 36492,
            t.RGBA_ETC2_EAC_Format = N,
            t.RGBA_PVRTC_2BPPV1_Format = O,
            t.RGBA_PVRTC_4BPPV1_Format = k,
            t.RGBA_S3TC_DXT1_Format = C,
            t.RGBA_S3TC_DXT3_Format = L,
            t.RGBA_S3TC_DXT5_Format = D,
            t.RGBDEncoding = 3006,
            t.RGBEEncoding = $,
            t.RGBEFormat = 1023,
            t.RGBFormat = T,
            t.RGBIntegerFormat = 1032,
            t.RGBM16Encoding = 3005,
            t.RGBM7Encoding = 3004,
            t.RGB_ETC1_Format = 36196,
            t.RGB_ETC2_Format = F,
            t.RGB_PVRTC_2BPPV1_Format = I,
            t.RGB_PVRTC_4BPPV1_Format = R,
            t.RGB_S3TC_DXT1_Format = P,
            t.RGFormat = 1030,
            t.RGIntegerFormat = 1031,
            t.RawShaderMaterial = Fs,
            t.Ray = qt,
            t.Raycaster = rh,
            t.RectAreaLight = Ql,
            t.RedFormat = 1028,
            t.RedIntegerFormat = 1029,
            t.ReinhardToneMapping = 2,
            t.RepeatWrapping = h,
            t.ReplaceStencilOp = 7681,
            t.ReverseSubtractEquation = 102,
            t.RingBufferGeometry = gs,
            t.RingGeometry = ys,
            t.SRGB8_ALPHA8_ASTC_10x10_Format = 37851,
            t.SRGB8_ALPHA8_ASTC_10x5_Format = 37848,
            t.SRGB8_ALPHA8_ASTC_10x6_Format = 37849,
            t.SRGB8_ALPHA8_ASTC_10x8_Format = 37850,
            t.SRGB8_ALPHA8_ASTC_12x10_Format = 37852,
            t.SRGB8_ALPHA8_ASTC_12x12_Format = 37853,
            t.SRGB8_ALPHA8_ASTC_4x4_Format = 37840,
            t.SRGB8_ALPHA8_ASTC_5x4_Format = 37841,
            t.SRGB8_ALPHA8_ASTC_5x5_Format = 37842,
            t.SRGB8_ALPHA8_ASTC_6x5_Format = 37843,
            t.SRGB8_ALPHA8_ASTC_6x6_Format = 37844,
            t.SRGB8_ALPHA8_ASTC_8x5_Format = 37845,
            t.SRGB8_ALPHA8_ASTC_8x6_Format = 37846,
            t.SRGB8_ALPHA8_ASTC_8x8_Format = 37847,
            t.Scene = ia,
            t.SceneUtils = mu,
            t.ShaderChunk = Zr,
            t.ShaderLib = Qr,
            t.ShaderMaterial = Nr,
            t.ShadowMaterial = Os,
            t.Shape = Hl,
            t.ShapeBufferGeometry = _s,
            t.ShapeGeometry = xs,
            t.ShapePath = fc,
            t.ShapeUtils = es,
            t.ShortType = 1011,
            t.Skeleton = Oa,
            t.SkeletonHelper = yh,
            t.SkinnedMesh = Ra,
            t.SmoothShading = 2,
            t.Sphere = Bt,
            t.SphereBufferGeometry = bs,
            t.SphereGeometry = ws,
            t.Spherical = ah,
            t.SphericalHarmonics3 = tc,
            t.Spline = du,
            t.SplineCurve = Nl,
            t.SplineCurve3 = pu,
            t.SpotLight = ql,
            t.SpotLightHelper = fh,
            t.Sprite = wa,
            t.SpriteMaterial = ca,
            t.SrcAlphaFactor = 204,
            t.SrcAlphaSaturateFactor = 210,
            t.SrcColorFactor = 202,
            t.StaticCopyUsage = 35046,
            t.StaticDrawUsage = Z,
            t.StaticReadUsage = 35045,
            t.StereoCamera = Tc,
            t.StreamCopyUsage = 35042,
            t.StreamDrawUsage = 35040,
            t.StreamReadUsage = 35041,
            t.StringKeyframeTrack = nl,
            t.SubtractEquation = 101,
            t.SubtractiveBlending = 3,
            t.TOUCH = {
                ROTATE: 0,
                PAN: 1,
                DOLLY_PAN: 2,
                DOLLY_ROTATE: 3
            },
            t.TangentSpaceNormalMap = 0,
            t.TetrahedronBufferGeometry = Ss,
            t.TetrahedronGeometry = Ts,
            t.TextBufferGeometry = Ms,
            t.TextGeometry = Es,
            t.Texture = ft,
            t.TextureLoader = yl,
            t.TorusBufferGeometry = As,
            t.TorusGeometry = Ps,
            t.TorusKnotBufferGeometry = Cs,
            t.TorusKnotGeometry = Ls,
            t.Triangle = Ie,
            t.TriangleFanDrawMode = 2,
            t.TriangleStripDrawMode = 1,
            t.TrianglesDrawMode = 0,
            t.TubeBufferGeometry = Ds,
            t.TubeGeometry = Rs,
            t.UVMapping = r,
            t.Uint16Attribute = function(t, e) {
                return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),
                new Je(t,e)
            }
            ,
            t.Uint16BufferAttribute = Je,
            t.Uint32Attribute = function(t, e) {
                return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),
                new tr(t,e)
            }
            ,
            t.Uint32BufferAttribute = tr,
            t.Uint8Attribute = function(t, e) {
                return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),
                new $e(t,e)
            }
            ,
            t.Uint8BufferAttribute = $e,
            t.Uint8ClampedAttribute = function(t, e) {
                return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),
                new Ke(t,e)
            }
            ,
            t.Uint8ClampedBufferAttribute = Ke,
            t.Uniform = Qc,
            t.UniformsLib = Jr,
            t.UniformsUtils = Fr,
            t.UnsignedByteType = y,
            t.UnsignedInt248Type = S,
            t.UnsignedIntType = x,
            t.UnsignedShort4444Type = 1017,
            t.UnsignedShort5551Type = 1018,
            t.UnsignedShort565Type = 1019,
            t.UnsignedShortType = _,
            t.VSMShadowMap = 3,
            t.Vector2 = ht,
            t.Vector3 = _t,
            t.Vector4 = mt,
            t.VectorKeyframeTrack = il,
            t.Vertex = function(t, e, r) {
                return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),
                new _t(t,e,r)
            }
            ,
            t.VertexColors = 2,
            t.VideoTexture = oo,
            t.WebGL1Renderer = ea,
            t.WebGLCubeRenderTarget = Vr,
            t.WebGLMultisampleRenderTarget = gt,
            t.WebGLRenderTarget = vt,
            t.WebGLRenderTargetCube = function(t, e, r) {
                return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),
                new Vr(t,r)
            }
            ,
            t.WebGLRenderer = ta,
            t.WebGLUtils = Yi,
            t.WireframeGeometry = Is,
            t.WireframeHelper = function(t, e) {
                return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),
                new Za(new Is(t.geometry),new Ua({
                    color: void 0 !== e ? e : 16777215
                }))
            }
            ,
            t.WrapAroundEnding = V,
            t.XHRLoader = function(t) {
                return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),
                new pl(t)
            }
            ,
            t.ZeroCurvatureEnding = H,
            t.ZeroFactor = 200,
            t.ZeroSlopeEnding = U,
            t.ZeroStencilOp = 0,
            t.sRGBEncoding = X,
            Object.defineProperty(t, "__esModule", {
                value: !0
            })
        }
        ))
    }
    , {}],
    39: [function(t, e, r) {
        "use strict";
        var n = t("../core/browser")
          , i = t("../core/settings")
          , a = t("../core/properties")
          , o = t("../utils/math");
        r.init = function() {
            if (s = w(y, !0),
            u = document.querySelectorAll(".audio__bar"),
            n.isMobile || (s.volume = 0),
            document.body.addEventListener("click", b),
            (h = document.getElementById("audio-btn")).addEventListener("click", T),
            h.style.pointerEvents = "auto",
            !n.isMobile) {
                w("hover_0"),
                w("hover_1"),
                l = w("scream", !0),
                c = w("crowd", !0);
                for (var t = document.querySelectorAll(".has-rollover-audio"), e = 0, r = t.length; e < r; e++)
                    t[e].addEventListener("mouseenter", M)
            }
        }
        ,
        r.setAudioBtnVisibility = function(t) {
            h.style.opacity = t ? 1 : 0,
            h.style.pointerEvents = t ? "auto" : "none"
        }
        ,
        r.play = S,
        r.playBgm = _,
        r.playTap = function() {}
        ,
        r.playHover = x,
        r.playChange = function() {
            S("change_" + ++g % 2)
        }
        ,
        r.update = function(t) {
            s && (n.isMobile ? s.muted == a.isAudioActive && (s.muted = !a.isAudioActive) : (p = o.clamp(p + (a.isAudioActive && a.hasStarted ? t : -t), 0, 1),
            s.volume = r.bgmVolume * p,
            l.volume = r.screamVolume * p,
            c.volume = r.crowdVolume * p));
            var e = o.clamp(m + (a.isAudioActive ? 3 * t : -t), 0, 1);
            if (e > 0 || e !== m) {
                m = e,
                f += 6 * t;
                for (var i = 0; i < u.length; i++)
                    u[i].style.transform = "translate3d(0, 0, 0) scale3d(1, " + ((3 + 11 * (.5 * Math.sin(f + 23.2512 * i) + .5) * e) / 14).toFixed(4) + ",1)"
            }
        }
        ,
        r.screamVolume = 0,
        r.crowdVolume = 0,
        r.bgmVolume = 0;
        var s, l, c, h, u, p = 0, d = {}, f = 0, m = 0, v = 0, g = 0, y = "Sun-Drenched-Branches_AdobeStock_357353399";
        function _(t) {
            var e = d[t];
            e !== s && (s && s.pause(),
            (s = e).muted = !1,
            s.play()),
            n.isMobile || (s.volume = r.bgmVolume,
            w("hover_0"),
            w("hover_1"),
            l.muted = !1,
            c.muted = !1,
            l.volume = r.screamVolume,
            c.volume = r.crowdVolume,
            l.play(),
            c.play())
        }
        function x() {
            S("hover_" + ++v % 2)
        }
        function b(t) {
            document.body.removeEventListener("click", b),
            T(),
            a.isAudioActive = !0,
            _(y),
            s.muted = !1,
            s.play()
        }
        function w(t, e) {
            var r = d[t];
            return r || ((r = new Audio(i.AUDIO_PATH + "/" + t + ".mp3")).loop = !!e,
            r.autoplay = !1,
            d[t] = r),
            r
        }
        function S(t) {
            if (a.isAudioActive) {
                var e = d[t];
                e.currentTime = 0,
                e.play()
            }
        }
        function T() {
            a.isAudioActive = !a.isAudioActive
        }
        function M() {
            x()
        }
    }
    , {
        "../core/browser": 43,
        "../core/properties": 44,
        "../core/settings": 45,
        "../utils/math": 70
    }],
    40: [function(t, e, r) {
        "use strict";
        var n = t("three");
        e.exports = n.OrbitControls = function(t, e) {
            var r, i, a, o, s;
            this.object = t,
            this.domElement = void 0 !== e ? e : document,
            this.enabled = !0,
            this.target = new n.Vector3,
            this.minDistance = .25,
            this.maxDistance = 3,
            this.minZoom = 0,
            this.maxZoom = 1 / 0,
            this.minPolarAngle = 0,
            this.maxPolarAngle = .5 * Math.PI,
            this.minAzimuthAngle = -1 / 0,
            this.maxAzimuthAngle = 1 / 0,
            this.enableDamping = !0,
            this.dampingFactor = .05,
            this.enableZoom = !0,
            this.zoomSpeed = 1,
            this.enableRotate = !0,
            this.rotateSpeed = .35,
            this.enablePan = !1,
            this.panSpeed = 1,
            this.screenSpacePanning = !1,
            this.keyPanSpeed = 7,
            this.autoRotate = !1,
            this.autoRotateSpeed = 2,
            this.enableKeys = !1,
            this.keys = {
                LEFT: 37,
                UP: 38,
                RIGHT: 39,
                BOTTOM: 40
            },
            this.mouseButtons = {
                LEFT: n.MOUSE.PAN,
                MIDDLE: n.MOUSE.DOLLY,
                RIGHT: n.MOUSE.ROTATE
            },
            this.touches = {
                ONE: n.TOUCH.DOLLY_PAN,
                TWO: n.TOUCH.DOLLY_ROTATE
            },
            this.target0 = this.target.clone(),
            this.position0 = this.object.position.clone(),
            this.zoom0 = this.object.zoom,
            this.getPolarAngle = function() {
                return m.phi
            }
            ,
            this.getAzimuthalAngle = function() {
                return m.theta
            }
            ,
            this.saveState = function() {
                l.target0.copy(l.target),
                l.position0.copy(l.object.position),
                l.zoom0 = l.object.zoom
            }
            ,
            this.reset = function() {
                l.target.copy(l.target0),
                l.object.position.copy(l.position0),
                l.object.zoom = l.zoom0,
                l.object.updateProjectionMatrix(),
                l.dispatchEvent(c),
                l.update(),
                d = p.NONE
            }
            ,
            this.update = (r = new n.Vector3,
            i = (new n.Quaternion).setFromUnitVectors(t.up, new n.Vector3(0,1,0)),
            a = i.clone().inverse(),
            o = new n.Vector3,
            s = new n.Quaternion,
            function() {
                var t = l.object.position;
                return r.copy(t).sub(l.target),
                r.applyQuaternion(i),
                m.setFromVector3(r),
                l.autoRotate && d === p.NONE && L(2 * Math.PI / 60 / 60 * l.autoRotateSpeed),
                l.enableDamping ? (m.theta += v.theta * l.dampingFactor,
                m.phi += v.phi * l.dampingFactor) : (m.theta += v.theta,
                m.phi += v.phi),
                m.theta = Math.max(l.minAzimuthAngle, Math.min(l.maxAzimuthAngle, m.theta)),
                m.phi = Math.max(l.minPolarAngle, Math.min(l.maxPolarAngle, m.phi)),
                m.makeSafe(),
                m.radius *= g,
                m.radius = Math.max(l.minDistance, Math.min(l.maxDistance, m.radius)),
                !0 === l.enableDamping ? l.target.addScaledVector(y, l.dampingFactor) : l.target.add(y),
                r.setFromSpherical(m),
                r.applyQuaternion(a),
                t.copy(l.target).add(r),
                l.object.lookAt(l.target),
                !0 === l.enableDamping ? (v.theta *= 1 - l.dampingFactor,
                v.phi *= 1 - l.dampingFactor,
                y.multiplyScalar(1 - l.dampingFactor)) : (v.set(0, 0, 0),
                y.set(0, 0, 0)),
                g = 1,
                !!(_ || o.distanceToSquared(l.object.position) > f || 8 * (1 - s.dot(l.object.quaternion)) > f) && (l.dispatchEvent(c),
                o.copy(l.object.position),
                s.copy(l.object.quaternion),
                _ = !1,
                !0)
            }
            ),
            this.dispose = function() {
                l.domElement.removeEventListener("contextmenu", tt, !1),
                l.domElement.removeEventListener("mousedown", q, !1),
                l.domElement.removeEventListener("wheel", $, !1),
                l.domElement.removeEventListener("touchstart", Z, !1),
                l.domElement.removeEventListener("touchend", Q, !1),
                l.domElement.removeEventListener("touchmove", J, !1),
                document.removeEventListener("mousemove", X, !1),
                document.removeEventListener("mouseup", Y, !1),
                window.removeEventListener("keydown", K, !1)
            }
            ;
            var l = this
              , c = {
                type: "change"
            }
              , h = {
                type: "start"
            }
              , u = {
                type: "end"
            }
              , p = {
                NONE: -1,
                ROTATE: 0,
                DOLLY: 1,
                PAN: 2,
                TOUCH_ROTATE: 3,
                TOUCH_PAN: 4,
                TOUCH_DOLLY_PAN: 5,
                TOUCH_DOLLY_ROTATE: 6
            }
              , d = p.NONE
              , f = 1e-6
              , m = new n.Spherical
              , v = new n.Spherical
              , g = 1
              , y = new n.Vector3
              , _ = !1
              , x = new n.Vector2
              , b = new n.Vector2
              , w = new n.Vector2
              , S = new n.Vector2
              , T = new n.Vector2
              , M = new n.Vector2
              , E = new n.Vector2
              , A = new n.Vector2
              , P = new n.Vector2;
            function C() {
                return Math.pow(.95, l.zoomSpeed)
            }
            function L(t) {
                v.theta -= t
            }
            function D(t) {
                v.phi -= t
            }
            var R, I = (R = new n.Vector3,
            function(t, e) {
                R.setFromMatrixColumn(e, 0),
                R.multiplyScalar(-t),
                y.add(R)
            }
            ), k = function() {
                var t = new n.Vector3;
                return function(e, r) {
                    !0 === l.screenSpacePanning ? t.setFromMatrixColumn(r, 1) : (t.setFromMatrixColumn(r, 0),
                    t.crossVectors(l.object.up, t)),
                    t.multiplyScalar(e),
                    y.add(t)
                }
            }(), O = function() {
                var t = new n.Vector3;
                return function(e, r) {
                    var n = l.domElement === document ? l.domElement.body : l.domElement;
                    if (l.object.isPerspectiveCamera) {
                        var i = l.object.position;
                        t.copy(i).sub(l.target);
                        var a = t.length();
                        a *= Math.tan(l.object.fov / 2 * Math.PI / 180),
                        I(2 * e * a / n.clientHeight, l.object.matrix),
                        k(2 * r * a / n.clientHeight, l.object.matrix)
                    } else
                        l.object.isOrthographicCamera ? (I(e * (l.object.right - l.object.left) / l.object.zoom / n.clientWidth, l.object.matrix),
                        k(r * (l.object.top - l.object.bottom) / l.object.zoom / n.clientHeight, l.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),
                        l.enablePan = !1)
                }
            }();
            function F(t) {
                l.object.isPerspectiveCamera ? g /= t : l.object.isOrthographicCamera ? (l.object.zoom = Math.max(l.minZoom, Math.min(l.maxZoom, l.object.zoom * t)),
                l.object.updateProjectionMatrix(),
                _ = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),
                l.enableZoom = !1)
            }
            function N(t) {
                l.object.isPerspectiveCamera ? g *= t : l.object.isOrthographicCamera ? (l.object.zoom = Math.max(l.minZoom, Math.min(l.maxZoom, l.object.zoom / t)),
                l.object.updateProjectionMatrix(),
                _ = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),
                l.enableZoom = !1)
            }
            function B(t) {
                x.set(t.clientX, t.clientY)
            }
            function z(t) {
                S.set(t.clientX, t.clientY)
            }
            function G(t) {
                if (1 == t.touches.length)
                    x.set(t.touches[0].pageX, t.touches[0].pageY);
                else {
                    var e = .5 * (t.touches[0].pageX + t.touches[1].pageX)
                      , r = .5 * (t.touches[0].pageY + t.touches[1].pageY);
                    x.set(e, r)
                }
            }
            function H(t) {
                if (1 == t.touches.length)
                    S.set(t.touches[0].pageX, t.touches[0].pageY);
                else {
                    var e = .5 * (t.touches[0].pageX + t.touches[1].pageX)
                      , r = .5 * (t.touches[0].pageY + t.touches[1].pageY);
                    S.set(e, r)
                }
            }
            function U(t) {
                var e = t.touches[0].pageX - t.touches[1].pageX
                  , r = t.touches[0].pageY - t.touches[1].pageY
                  , n = Math.sqrt(e * e + r * r);
                E.set(0, n)
            }
            function V(t) {
                if (1 == t.touches.length)
                    b.set(t.touches[0].pageX, t.touches[0].pageY);
                else {
                    var e = .5 * (t.touches[0].pageX + t.touches[1].pageX)
                      , r = .5 * (t.touches[0].pageY + t.touches[1].pageY);
                    b.set(e, r)
                }
                w.subVectors(b, x).multiplyScalar(l.rotateSpeed);
                var n = l.domElement === document ? l.domElement.body : l.domElement;
                L(2 * Math.PI * w.x / n.clientHeight),
                D(2 * Math.PI * w.y / n.clientHeight),
                x.copy(b)
            }
            function j(t) {
                if (1 == t.touches.length)
                    T.set(t.touches[0].pageX, t.touches[0].pageY);
                else {
                    var e = .5 * (t.touches[0].pageX + t.touches[1].pageX)
                      , r = .5 * (t.touches[0].pageY + t.touches[1].pageY);
                    T.set(e, r)
                }
                M.subVectors(T, S).multiplyScalar(l.panSpeed),
                O(M.x, M.y),
                S.copy(T)
            }
            function W(t) {
                var e = t.touches[0].pageX - t.touches[1].pageX
                  , r = t.touches[0].pageY - t.touches[1].pageY
                  , n = Math.sqrt(e * e + r * r);
                A.set(0, n),
                P.set(0, Math.pow(A.y / E.y, l.zoomSpeed)),
                F(P.y),
                E.copy(A)
            }
            function q(t) {
                if (!1 !== l.enabled) {
                    switch (t.preventDefault(),
                    l.domElement.focus ? l.domElement.focus() : window.focus(),
                    t.button) {
                    case 0:
                        switch (l.mouseButtons.LEFT) {
                        case n.MOUSE.ROTATE:
                            if (t.ctrlKey || t.metaKey || t.shiftKey) {
                                if (!1 === l.enablePan)
                                    return;
                                z(t),
                                d = p.PAN
                            } else {
                                if (!1 === l.enableRotate)
                                    return;
                                B(t),
                                d = p.ROTATE
                            }
                            break;
                        case n.MOUSE.PAN:
                            if (t.ctrlKey || t.metaKey || t.shiftKey) {
                                if (!1 === l.enableRotate)
                                    return;
                                B(t),
                                d = p.ROTATE
                            } else {
                                if (!1 === l.enablePan)
                                    return;
                                z(t),
                                d = p.PAN
                            }
                            break;
                        default:
                            d = p.NONE
                        }
                        break;
                    case 1:
                        if (l.mouseButtons.MIDDLE === n.MOUSE.DOLLY) {
                            if (!1 === l.enableZoom)
                                return;
                            !function(t) {
                                E.set(t.clientX, t.clientY)
                            }(t),
                            d = p.DOLLY
                        } else
                            d = p.NONE;
                        break;
                    case 2:
                        switch (l.mouseButtons.RIGHT) {
                        case n.MOUSE.ROTATE:
                            if (!1 === l.enableRotate)
                                return;
                            B(t),
                            d = p.ROTATE;
                            break;
                        case n.MOUSE.PAN:
                            if (!1 === l.enablePan)
                                return;
                            z(t),
                            d = p.PAN;
                            break;
                        default:
                            d = p.NONE
                        }
                    }
                    d !== p.NONE && (document.addEventListener("mousemove", X, !1),
                    document.addEventListener("mouseup", Y, !1),
                    l.dispatchEvent(h))
                }
            }
            function X(t) {
                if (!1 !== l.enabled)
                    switch (t.preventDefault(),
                    d) {
                    case p.ROTATE:
                        if (!1 === l.enableRotate)
                            return;
                        !function(t) {
                            b.set(t.clientX, t.clientY),
                            w.subVectors(b, x).multiplyScalar(l.rotateSpeed);
                            var e = l.domElement === document ? l.domElement.body : l.domElement;
                            L(2 * Math.PI * w.x / e.clientHeight),
                            D(2 * Math.PI * w.y / e.clientHeight),
                            x.copy(b),
                            l.update()
                        }(t);
                        break;
                    case p.DOLLY:
                        if (!1 === l.enableZoom)
                            return;
                        !function(t) {
                            A.set(t.clientX, t.clientY),
                            P.subVectors(A, E),
                            P.y > 0 ? F(C()) : P.y < 0 && N(C()),
                            E.copy(A),
                            l.update()
                        }(t);
                        break;
                    case p.PAN:
                        if (!1 === l.enablePan)
                            return;
                        !function(t) {
                            T.set(t.clientX, t.clientY),
                            M.subVectors(T, S).multiplyScalar(l.panSpeed),
                            O(M.x, M.y),
                            S.copy(T),
                            l.update()
                        }(t)
                    }
            }
            function Y(t) {
                !1 !== l.enabled && (document.removeEventListener("mousemove", X, !1),
                document.removeEventListener("mouseup", Y, !1),
                l.dispatchEvent(u),
                d = p.NONE)
            }
            function $(t) {
                !1 === l.enabled || !1 === l.enableZoom || d !== p.NONE && d !== p.ROTATE || (t.preventDefault(),
                t.stopPropagation(),
                l.dispatchEvent(h),
                function(t) {
                    t.deltaY < 0 ? N(C()) : t.deltaY > 0 && F(C()),
                    l.update()
                }(t),
                l.dispatchEvent(u))
            }
            function K(t) {
                !1 !== l.enabled && !1 !== l.enableKeys && !1 !== l.enablePan && function(t) {
                    var e = !1;
                    switch (t.keyCode) {
                    case l.keys.UP:
                        O(0, l.keyPanSpeed),
                        e = !0;
                        break;
                    case l.keys.BOTTOM:
                        O(0, -l.keyPanSpeed),
                        e = !0;
                        break;
                    case l.keys.LEFT:
                        O(l.keyPanSpeed, 0),
                        e = !0;
                        break;
                    case l.keys.RIGHT:
                        O(-l.keyPanSpeed, 0),
                        e = !0
                    }
                    e && (t.preventDefault(),
                    l.update())
                }(t)
            }
            function Z(t) {
                if (!1 !== l.enabled) {
                    switch (t.preventDefault(),
                    t.touches.length) {
                    case 1:
                        switch (l.touches.ONE) {
                        case n.TOUCH.ROTATE:
                            if (!1 === l.enableRotate)
                                return;
                            G(t),
                            d = p.TOUCH_ROTATE;
                            break;
                        case n.TOUCH.PAN:
                            if (!1 === l.enablePan)
                                return;
                            H(t),
                            d = p.TOUCH_PAN;
                            break;
                        default:
                            d = p.NONE
                        }
                        break;
                    case 2:
                        switch (l.touches.TWO) {
                        case n.TOUCH.DOLLY_PAN:
                            if (!1 === l.enableZoom && !1 === l.enablePan)
                                return;
                            !function(t) {
                                l.enableZoom && U(t),
                                l.enablePan && H(t)
                            }(t),
                            d = p.TOUCH_DOLLY_PAN;
                            break;
                        case n.TOUCH.DOLLY_ROTATE:
                            if (!1 === l.enableZoom && !1 === l.enableRotate)
                                return;
                            !function(t) {
                                l.enableZoom && U(t),
                                l.enableRotate && G(t)
                            }(t),
                            d = p.TOUCH_DOLLY_ROTATE;
                            break;
                        default:
                            d = p.NONE
                        }
                        break;
                    default:
                        d = p.NONE
                    }
                    d !== p.NONE && l.dispatchEvent(h)
                }
            }
            function J(t) {
                if (!1 !== l.enabled)
                    switch (t.preventDefault(),
                    t.stopPropagation(),
                    d) {
                    case p.TOUCH_ROTATE:
                        if (!1 === l.enableRotate)
                            return;
                        V(t),
                        l.update();
                        break;
                    case p.TOUCH_PAN:
                        if (!1 === l.enablePan)
                            return;
                        j(t),
                        l.update();
                        break;
                    case p.TOUCH_DOLLY_PAN:
                        if (!1 === l.enableZoom && !1 === l.enablePan)
                            return;
                        !function(t) {
                            l.enableZoom && W(t),
                            l.enablePan && j(t)
                        }(t),
                        l.update();
                        break;
                    case p.TOUCH_DOLLY_ROTATE:
                        if (!1 === l.enableZoom && !1 === l.enableRotate)
                            return;
                        !function(t) {
                            l.enableZoom && W(t),
                            l.enableRotate && V(t)
                        }(t),
                        l.update();
                        break;
                    default:
                        d = p.NONE
                    }
            }
            function Q(t) {
                !1 !== l.enabled && (l.dispatchEvent(u),
                d = p.NONE)
            }
            function tt(t) {
                !1 !== l.enabled && t.preventDefault()
            }
            l.domElement.addEventListener("contextmenu", tt, !1),
            l.domElement.addEventListener("mousedown", q, !1),
            l.domElement.addEventListener("wheel", $, !1),
            l.domElement.addEventListener("touchstart", Z, !1),
            l.domElement.addEventListener("touchend", Q, !1),
            l.domElement.addEventListener("touchmove", J, !1),
            window.addEventListener("keydown", K, !1),
            this.update()
        }
        ,
        n.OrbitControls.prototype = Object.create(n.EventDispatcher.prototype),
        n.OrbitControls.prototype.constructor = n.OrbitControls,
        Object.defineProperties(n.OrbitControls.prototype, {
            center: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .center has been renamed to .target"),
                    this.target
                }
            },
            noZoom: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),
                    !this.enableZoom
                },
                set: function(t) {
                    console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),
                    this.enableZoom = !t
                }
            },
            noRotate: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),
                    !this.enableRotate
                },
                set: function(t) {
                    console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),
                    this.enableRotate = !t
                }
            },
            noPan: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),
                    !this.enablePan
                },
                set: function(t) {
                    console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),
                    this.enablePan = !t
                }
            },
            noKeys: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),
                    !this.enableKeys
                },
                set: function(t) {
                    console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),
                    this.enableKeys = !t
                }
            },
            staticMoving: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),
                    !this.enableDamping
                },
                set: function(t) {
                    console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),
                    this.enableDamping = !t
                }
            },
            dynamicDampingFactor: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),
                    this.dampingFactor
                },
                set: function(t) {
                    console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),
                    this.dampingFactor = t
                }
            }
        }),
        n.MapControls = function(t, e) {
            n.OrbitControls.call(this, t, e),
            this.mouseButtons.LEFT = n.MOUSE.PAN,
            this.mouseButtons.RIGHT = n.MOUSE.ROTATE,
            this.touches.ONE = n.TOUCH.PAN,
            this.touches.TWO = n.TOUCH.DOLLY_ROTATE
        }
        ,
        n.MapControls.prototype = Object.create(n.EventDispatcher.prototype),
        n.MapControls.prototype.constructor = n.MapControls
    }
    , {
        three: 38
    }],
    41: [function(t, e, r) {
        "use strict";
        var n, i, a = t("../core/settings"), o = t("../core/properties"), s = t("../motions/BrownianMotion"), l = t("three"), c = (t("glslify"),
        t("./OrbitControls"));
        r.preInit = function() {
            var t = o.camera;
            f = new l.Vector3,
            m = new l.Vector3,
            t.position.copy(h),
            n = o.brownianMotion = new s,
            i = t.clone(),
            r.orbitControls = new c(i,a.canvas),
            r.orbitControls.target0.copy(u),
            r.orbitControls.reset()
        }
        ,
        r.init = function() {}
        ,
        r.resize = function(t, e) {}
        ,
        r.update = function(t) {
            var e = o.camera;
            e.matrix.identity(),
            e.matrix.decompose(e.position, e.quaternion, e.scale),
            e.position.copy(h),
            e.rotateX(-.3),
            r.orbitControls.update(),
            i.updateMatrix(),
            i.matrix.decompose(e.position, e.quaternion, e.scale),
            f.set(0, 0, -1).applyQuaternion(e.quaternion);
            var a = m.copy(r.orbitControls.target).sub(e.position).dot(f);
            e.translateZ(-a),
            d.set(o.cameraLookX, o.cameraLookY, 0),
            p.setFromEuler(d),
            e.quaternion.multiply(p),
            e.translateZ(a),
            e.matrix.compose(e.position, e.quaternion, e.scale),
            n.positionAmplitude = o.cameraShakePositionStrength,
            n.positionFrequency = o.cameraShakePositionSpeed,
            n.rotationAmplitude = o.cameraShakeRotationStrength,
            n.rotationFrequency = o.cameraShakeRotationSpeed,
            n.update(t),
            e.matrix.multiply(n.matrix),
            e.matrix.decompose(e.position, e.quaternion, e.scale),
            f.set(0, 0, -1).applyQuaternion(e.quaternion)
        }
        ,
        r.container = null;
        var h = new l.Vector3(0,.3,.6).multiplyScalar(.8)
          , u = new l.Vector3(0,-.3,0)
          , p = new l.Quaternion
          , d = new l.Euler
          , f = new l.Vector3
          , m = new l.Vector3
    }
    , {
        "../core/properties": 44,
        "../core/settings": 45,
        "../motions/BrownianMotion": 56,
        "./OrbitControls": 40,
        glslify: 3,
        three: 38
    }],
    42: [function(t, e, r) {
        "use strict";
        function n(t) {
            return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            }
            : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            }
            ,
            n(t)
        }
        var i = function(t, e) {
            if (t && t.__esModule)
                return t;
            if (null === t || "object" !== n(t) && "function" != typeof t)
                return {
                    default: t
                };
            var r = a(e);
            if (r && r.has(t))
                return r.get(t);
            var i = {}
              , o = Object.defineProperty && Object.getOwnPropertyDescriptor;
            for (var s in t)
                if ("default" !== s && Object.prototype.hasOwnProperty.call(t, s)) {
                    var l = o ? Object.getOwnPropertyDescriptor(t, s) : null;
                    l && (l.get || l.set) ? Object.defineProperty(i, s, l) : i[s] = t[s]
                }
            return i.default = t,
            r && r.set(t, i),
            i
        }(t("three"));
        function a(t) {
            if ("function" != typeof WeakMap)
                return null;
            var e = new WeakMap
              , r = new WeakMap;
            return (a = function(t) {
                return t ? r : e
            }
            )(t)
        }
        function o(t, e) {
            for (var r = 0; r < e.length; r++) {
                var n = e[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(t, n.key, n)
            }
        }
        function s(t, e, r) {
            return e in t ? Object.defineProperty(t, e, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : t[e] = r,
            t
        }
        t("../core/settings");
        var l = function() {
            function t() {
                !function(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                s(this, "mouseButtons", []),
                s(this, "surfaceContactPoint", new i.Vector2),
                s(this, "keyboardButtonsDown", []),
                s(this, "hoverPoint", new i.Vector2),
                s(this, "isUsingMouse", !0)
            }
            var e, r;
            return e = t,
            (r = [{
                key: "init",
                value: function(t, e) {
                    this.containerDomElement = t,
                    this.interactiveDomElement = e,
                    this.keyboardButtons = new Map,
                    window.addEventListener("keydown", this.onKeyDown.bind(this)),
                    window.addEventListener("keyup", this.onKeyUp.bind(this)),
                    window.addEventListener("blur", this.onBlur.bind(this)),
                    this.interactiveDomElement.addEventListener("mousemove", this.onMouseMove.bind(this)),
                    this.interactiveDomElement.addEventListener("mousedown", this.onMouseDown.bind(this)),
                    this.interactiveDomElement.addEventListener("mouseup", this.onMouseUp.bind(this)),
                    this.interactiveDomElement.addEventListener("touchmove", this.onTouchMove.bind(this)),
                    this.interactiveDomElement.addEventListener("touchstart", this.onTouchStart.bind(this)),
                    this.interactiveDomElement.addEventListener("touchend", this.onTouchEnd.bind(this));
                    for (var r = 0; r < 3; r++)
                        this.mouseButtons[r] = {
                            wasJustPressed: !1,
                            wasJustReleased: !1,
                            isDown: !1
                        };
                    this.touchState = {
                        isDown: !1,
                        wasJustEnded: !1,
                        wasJustStarted: !1
                    },
                    this.updateRect()
                }
            }, {
                key: "wasKeyJustPressed",
                value: function(t) {
                    var e = this.keyboardButtons.get(t);
                    return null != e && e.wasJustPressed
                }
            }, {
                key: "isKeyDown",
                value: function(t) {
                    var e = this.keyboardButtons.get(t);
                    return null != e && e.isDown
                }
            }, {
                key: "resetState",
                value: function() {
                    for (var t = 0; t < 3; t++) {
                        var e = this.mouseButtons[t];
                        e.wasJustPressed = !1,
                        e.wasJustReleased = !1
                    }
                    this.touchState.wasJustEnded = !1,
                    this.touchState.wasJustStarted = !1
                }
            }, {
                key: "onBlur",
                value: function() {
                    this.keyboardButtons.forEach((function(t) {
                        t.isDown = !1,
                        t.wasJustPressed = !1,
                        t.wasJustReleased = !1
                    }
                    ))
                }
            }, {
                key: "onKeyDown",
                value: function(t) {
                    var e = this.keyboardButtons.get(t.key);
                    null == e ? this.keyboardButtons.set(t.key, {
                        isDown: !0,
                        wasJustPressed: !0,
                        wasJustReleased: !1
                    }) : (e.isDown = !0,
                    e.wasJustPressed = !0,
                    e.wasJustReleased = !1)
                }
            }, {
                key: "onKeyUp",
                value: function(t) {
                    var e = this.keyboardButtons.get(t.key);
                    null == e ? this.keyboardButtons.set(t.key, {
                        isDown: !1,
                        wasJustPressed: !1,
                        wasJustReleased: !1
                    }) : (e.isDown = !1,
                    e.wasJustReleased = !1,
                    e.wasJustPressed = !1)
                }
            }, {
                key: "onMouseMove",
                value: function(t) {
                    this.isUsingMouse = !0,
                    this.setSurfaceContactPoint(t.clientX, t.clientY)
                }
            }, {
                key: "onMouseDown",
                value: function(t) {
                    var e = this.mouseButtons[t.button];
                    e.isDown = !0,
                    e.wasJustPressed = !0,
                    e.wasJustReleased = !1
                }
            }, {
                key: "onMouseUp",
                value: function(t) {
                    var e = this.mouseButtons[t.button];
                    e.isDown = !1,
                    e.wasJustPressed = !1,
                    e.wasJustReleased = !0
                }
            }, {
                key: "onTouchMove",
                value: function(t) {
                    this.isUsingMouse = !1,
                    1 === t.touches.length && this.setSurfaceContactPoint(t.touches[0].clientX, t.touches[0].clientY)
                }
            }, {
                key: "onTouchStart",
                value: function(t) {
                    1 === t.touches.length ? (this.setSurfaceContactPoint(t.touches[0].clientX, t.touches[0].clientY),
                    this.touchState.isDown = !0,
                    this.touchState.wasJustStarted = !0,
                    this.touchState.wasJustEnded = !1) : this.clearContactPoint()
                }
            }, {
                key: "onTouchEnd",
                value: function(t) {
                    null != t.changedTouches[0] && (this.touchState.isDown = !1,
                    this.touchState.wasJustStarted = !1,
                    this.touchState.wasJustEnded = !0)
                }
            }, {
                key: "clearContactPoint",
                value: function() {
                    this.setSurfaceContactPoint(-Number.MAX_SAFE_INTEGER, -Number.MAX_SAFE_INTEGER)
                }
            }, {
                key: "handleResize",
                value: function() {
                    this.updateRect()
                }
            }, {
                key: "updateRect",
                value: function() {
                    this.boundingRect = this.containerDomElement.getBoundingClientRect()
                }
            }, {
                key: "setSurfaceContactPoint",
                value: function(t, e) {
                    var r = this.boundingRect
                      , n = r.left
                      , i = r.width
                      , a = r.top
                      , o = r.height
                      , s = t - n
                      , l = e - a;
                    return this.hoverPoint.set(i - s, o - l),
                    this.surfaceContactPoint.set(s / i * 2 - 1, -l / o * 2 + 1),
                    this.surfaceContactPoint
                }
            }]) && o(e.prototype, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t
        }();
        e.exports = new l
    }
    , {
        "../core/settings": 45,
        three: 38
    }],
    43: [function(t, e, r) {
        "use strict";
        var n;
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.videoFormat = r.transitionStyle = r.transformStyle = r.transformPerspectiveStyle = r.transformOriginStyle = r.transform3dStyle = r.isSupportOpacity = r.isSafari = r.isRetina = r.isMobile = r.isIOS = r.isIFrame = r.isIE = r.isFirefox = r.isEdge = r.isChrome = r.filterStyle = r.devicePixelRatio = r.cpuCoreCount = r.baseUrl = r.audioFormat = r.WebAudioContext = void 0;
        var i = "Webkit Moz O ms".split(" ")
          , a = document.createElement("div").style
          , o = window
          , s = document
          , l = (navigator.userAgent || navigator.vendor || window.opera).toLowerCase()
          , c = D("video", ["video/mp4", "video/ogv"]);
        r.videoFormat = c;
        var h = D("audio", ["audio/mp3", "audio/ogg"]);
        r.audioFormat = h;
        var u = o.self !== o.top;
        r.isIFrame = u;
        var p = o.devicePixelRatio && o.devicePixelRatio >= 1.5;
        r.isRetina = p;
        var d = a.opacity !== n;
        r.isSupportOpacity = d;
        var f = navigator.hardwareConcurrency || 1;
        r.cpuCoreCount = f;
        var m = l.indexOf("edge") > -1;
        r.isEdge = m;
        var v = l.indexOf("msie") > -1;
        r.isIE = v;
        var g = l.indexOf("firefox") > -1;
        r.isFirefox = g;
        var y = !m && l.indexOf("chrome") > -1;
        r.isChrome = y;
        var _ = !m && !y && l.indexOf("safari") > -1;
        r.isSafari = _;
        var x = /(iPad|iPhone|Android)/i.test(l);
        r.isMobile = x;
        var b = /(iPad|iPhone)/i.test(l);
        r.isIOS = b;
        var w = v ? n : R("filter");
        r.filterStyle = w;
        var S = R("transition");
        r.transitionStyle = S;
        var T = R("transform");
        r.transformStyle = T;
        var M = R("transform", "perspective");
        r.transform3dStyle = M;
        var E = R("perspective");
        r.transformPerspectiveStyle = E;
        var A = R("transformOrigin");
        r.transformOriginStyle = A;
        var P = o.AudioContext || o.webkitAudioContext;
        r.WebAudioContext = P;
        var C = document.location.origin;
        r.baseUrl = C;
        var L = window.devicePixelRatio || 1;
        function D(t, e) {
            var r, n;
            try {
                switch (t) {
                case "video":
                    r = new o.Video;
                    break;
                case "audio":
                    r = new o.Audio
                }
            } catch (e) {
                r = s.createElement(t)
            }
            for (var i = 0, a = e.length; i < a; i++)
                if (r.canPlayType && r.canPlayType(e[i])) {
                    n = e[i].substr(e[i].indexOf("/") + 1);
                    break
                }
            return n
        }
        function R(t, e) {
            return function(t, e) {
                return e > 1 ? i[e - 2] + t.charAt(0).toUpperCase() + t.slice(1) : 1 === e && t
            }(t, function(t) {
                for (var e = t.charAt(0).toUpperCase() + t.slice(1), r = i.length; r--; )
                    if (a[i[r] + e] !== n)
                        return r + 2;
                return a[t] !== n ? 1 : 0
            }(e || t))
        }
        r.devicePixelRatio = L
    }
    , {}],
    44: [function(t, e, r) {
        "use strict";
        var n = t("../ui/constants")
          , i = t("min-signal");
        t("three"),
        r.loader = t("quick-loader").create(),
        r.gl = null,
        r.isSupportWebGL = null,
        r.renderer = null,
        r.scene = null,
        r.camera = null,
        r.postprocessing = null,
        r.sharedUniforms = {
            u_resolution: {
                value: null
            },
            u_bgColor: {
                value: null
            },
            u_time: {
                value: 0
            },
            u_timeScale: {
                value: 1
            },
            u_blueNoiseTexture: {
                value: null
            },
            u_blueNoiseTextureTexelSize: {
                value: null
            }
        },
        r.resolution = null,
        r.isStageReady = !1,
        r.hasInitialized = !1,
        r.hasStarted = !1,
        r.domElement = null,
        r.rawWidth = 0,
        r.rawHeight = 0,
        r.width = 0,
        r.height = 0,
        r.time = 0,
        r.hitTestList = [],
        r.bgColorHex = "#000000",
        r.opacity = .3,
        r.bloomAmount = 1.4,
        r.bloomRadius = 0,
        r.bloomThreshold = .2,
        r.bloomSmoothWidth = .75,
        r.vignetteFrom = .4,
        r.vignetteTo = 1.6,
        r.vignetteColorHex = "#000000",
        r.saturation = 1,
        r.contrast = 0,
        r.brightness = 1,
        r.tintColorHex = "#0044ef",
        r.tintOpacity = .1,
        r.cameraLookX = 0,
        r.cameraLookY = 0,
        r.cameraDistance = 5,
        r.cameraShakePositionStrength = .03,
        r.cameraShakePositionSpeed = .2,
        r.cameraShakeRotationStrength = .003,
        r.cameraShakeRotationSpeed = .2,
        r.fogB = .25,
        r.fogC = 1,
        r.lightScatterDivider = 120,
        r.lightScatterPowInv = .75,
        r.isDown = !1,
        r.hasClicked = !1,
        r.downTime = 0,
        r.downPixelXY = {
            x: 0,
            y: 0
        },
        r.downXY = {
            x: 0,
            y: 0
        },
        r.mouseXY = {
            x: 0,
            y: 0
        },
        r.prevMouseXY = {
            x: 0,
            y: 0
        },
        r.status = n.STATUS.PRELOAD,
        r.statusSignal = new i,
        r.onStarted = new i
    }
    , {
        "../ui/constants": 67,
        "min-signal": 5,
        "quick-loader": 25,
        three: 38
    }],
    45: [function(t, e, r) {
        "use strict";
        var n = t("mout/lang/isBoolean")
          , i = t("mout/lang/isInteger")
          , a = t("mout/queryString/parse")(window.location.href)
          , o = t("./browser");
        for (var s in r.AUDIO_PATH = "assets/audios/",
        r.MODEL_PATH = "assets/models/",
        r.IMAGE_PATH = "assets/images/",
        r.TEXTURE_PATH = "assets/textures/",
        r.GLOBAL_ID = "webglApi",
        r.canvas = null,
        r.gl = null,
        r.webglOpts = {
            antialias: !1,
            alpha: !1,
            xrCompatible: !0
        },
        r.RENDER_TARGET_FLOAT_TYPE = null,
        r.DATA_FLOAT_TYPE = null,
        r.USE_FLOAT_PACKING = !1,
        r.USE_WEBGL2 = !(o.isSafari || o.isIOS),
        r.SKIP_ONBOARING = !1,
        r.DPR = Math.min(1.5, o.devicePixelRatio) || 1,
        r.MAX_PIXEL_COUNT = 3686400,
        r.VICTIM_COUNT = o.isMobile ? 16384 : 32768,
        r.CROSS_ORIGINS = {},
        r.SKIP_ANIMATION = !1,
        r.LOOK_DEV_MODE = !1,
        a)
            if (void 0 !== r[s]) {
                var l = a[s];
                n(r[s]) ? r[s] = !(0 == l) : i(r[s]) && (r[s] = parseInt(l, 10))
            }
        !r.LOOK_DEV_MODE && window.location.href.indexOf("&SKIP_ONBOARING=1") > -1 && history.replaceState(null, "", window.location.href.replace("&SKIP_ONBOARING=1", ""))
    }
    , {
        "./browser": 43,
        "mout/lang/isBoolean": 9,
        "mout/lang/isInteger": 10,
        "mout/queryString/parse": 23
    }],
    46: [function(t, e, r) {
        "use strict";
        var n = t("../../helpers/fboHelper")
          , i = t("three")
          , a = t("glslify")
          , o = a(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform vec2 u_delta;\nvarying vec2 v_uv[9];\n\nvoid main() {\n    vec2 uv = position.xy * 0.5 + 0.5;\n\n    v_uv[0] = uv;\n\n    vec2 delta = u_delta;\n    v_uv[1] = uv - delta;\n    v_uv[2] = uv + delta;\n\n    delta += u_delta;\n    v_uv[3] = uv - delta;\n    v_uv[4] = uv + delta;\n\n    delta += u_delta;\n    v_uv[5] = uv - delta;\n    v_uv[6] = uv + delta;\n\n    delta += u_delta;\n    v_uv[7] = uv - delta;\n    v_uv[8] = uv + delta;\n\n    gl_Position = vec4( position, 1.0 );\n\n}\n"])
          , s = a(["#define GLSLIFY 1\nuniform sampler2D u_texture;\nvarying vec2 v_uv[9];\n\nvoid main() {\n\n    #ifdef USE_RGBA\n        vec4 color = texture2D( u_texture, v_uv[0] ) * 0.1633;\n        color += texture2D( u_texture,  v_uv[1] ) * 0.1531;\n        color += texture2D( u_texture,  v_uv[2] ) * 0.1531;\n        color += texture2D( u_texture,  v_uv[3] ) * 0.12245;\n        color += texture2D( u_texture,  v_uv[4] ) * 0.12245;\n        color += texture2D( u_texture,  v_uv[5] ) * 0.0918;\n        color += texture2D( u_texture,  v_uv[6] ) * 0.0918;\n        color += texture2D( u_texture,  v_uv[7] ) * 0.051;\n        color += texture2D( u_texture,  v_uv[8] ) * 0.051;\n\n        gl_FragColor = color;\n    #else\n        vec4 center = texture2D( u_texture, v_uv[0] );\n        vec3 color = center.rgb * 0.1633;\n        color += texture2D( u_texture,  v_uv[1] ).rgb * 0.1531;\n        color += texture2D( u_texture,  v_uv[2] ).rgb * 0.1531;\n        color += texture2D( u_texture,  v_uv[3] ).rgb * 0.12245;\n        color += texture2D( u_texture,  v_uv[4] ).rgb * 0.12245;\n        color += texture2D( u_texture,  v_uv[5] ).rgb * 0.0918;\n        color += texture2D( u_texture,  v_uv[6] ).rgb * 0.0918;\n        color += texture2D( u_texture,  v_uv[7] ).rgb * 0.051;\n        color += texture2D( u_texture,  v_uv[8] ).rgb * 0.051;\n\n        gl_FragColor = vec4(color, center.a);\n    #endif\n\n}\n"])
          , l = a(["#define GLSLIFY 1\nuniform sampler2D u_texture;\nuniform vec2 u_delta;\n\nvarying vec2 v_uv;\n\nvoid main() {\n\n    #ifdef USE_RGBA\n        vec4 color = texture2D( u_texture, v_uv ) * 0.1633;\n\n        vec2 delta = u_delta;\n        color += texture2D( u_texture,  v_uv - delta ) * 0.1531;\n        color += texture2D( u_texture,  v_uv + delta ) * 0.1531;\n\n        delta += u_delta;\n        color += texture2D( u_texture,  v_uv - delta ) * 0.12245;\n        color += texture2D( u_texture,  v_uv + delta ) * 0.12245;\n\n        delta += u_delta;\n        color += texture2D( u_texture,  v_uv - delta ) * 0.0918;\n        color += texture2D( u_texture,  v_uv + delta ) * 0.0918;\n\n        delta += u_delta;\n        color += texture2D( u_texture,  v_uv - delta ) * 0.051;\n        color += texture2D( u_texture,  v_uv + delta ) * 0.051;\n\n        gl_FragColor = color;\n\n    #else\n        vec4 center = texture2D( u_texture, v_uv );\n        vec3 color = center.rgb * 0.1633;\n\n        vec2 delta = u_delta;\n        color += texture2D( u_texture,  v_uv - delta ).rgb * 0.1531;\n        color += texture2D( u_texture,  v_uv + delta ).rgb * 0.1531;\n\n        delta += u_delta;\n        color += texture2D( u_texture,  v_uv - delta ).rgb * 0.12245;\n        color += texture2D( u_texture,  v_uv + delta ).rgb * 0.12245;\n\n        delta += u_delta;\n        color += texture2D( u_texture,  v_uv - delta ).rgb * 0.0918;\n        color += texture2D( u_texture,  v_uv + delta ).rgb * 0.0918;\n\n        delta += u_delta;\n        color += texture2D( u_texture,  v_uv - delta ).rgb * 0.051;\n        color += texture2D( u_texture,  v_uv + delta ).rgb * 0.051;\n\n        gl_FragColor = vec4(color, center.a);\n\n    #endif\n\n}\n"])
          , c = null
          , h = null;
        r.blur = function(t, e, r, a, u, p) {
            var d, f = Math.ceil(r.width * e) || 0, m = Math.ceil(r.height * e) || 0;
            c || (d = n.MAX_VARYING_VECTORS > 8,
            h || (h = new i.RawShaderMaterial({
                uniforms: {
                    u_texture: {
                        value: null
                    },
                    u_delta: {
                        value: new i.Vector2
                    }
                },
                vertexShader: d ? n.precisionPrefix + o : n.vertexShader,
                fragmentShader: n.precisionPrefix + (d ? s : l),
                blending: i.NoBlending
            })),
            c = h),
            a || (a = n.createRenderTarget(1, 1)),
            a.setSize(f, m),
            u ? p || u.setSize(r.width, r.height) : u = r,
            c.uniforms.u_texture.value = r.texture || r,
            c.uniforms.u_delta.value.set(t / f * .25, 0),
            n.render(c, a),
            c.uniforms.u_texture.value = a.texture || a,
            c.uniforms.u_delta.value.set(0, t / m * .25),
            n.render(c, u)
        }
    }
    , {
        "../../helpers/fboHelper": 47,
        glslify: 3,
        three: 38
    }],
    47: [function(t, e, r) {
        "use strict";
        var n = t("three")
          , i = t("glslify");
        r.init = function(t, e) {
            u = r.renderer = t,
            r.floatType = e,
            a = new n.Scene,
            (o = new n.Camera).position.z = 1,
            (p = r.triGeom = new n.BufferGeometry).setAttribute("position", new n.BufferAttribute(new Float32Array([-1, -1, 0, 4, -1, 0, -1, 4, 0]),3)),
            r.quadGeom = new n.PlaneBufferGeometry(2,2),
            (s = new n.Mesh(p)).frustumCulled = !1,
            a.add(s);
            var d = r.precisionPrefix = "precision " + u.capabilities.precision + " float;\n";
            r.precisionPrefix2 = "#version 300 es\nprecision " + u.capabilities.precision + " float;\nprecision " + u.capabilities.precision + " int;\n#define IS_WEBGL2 true\n",
            r.vertexShader = d + i(["#define GLSLIFY 1\nattribute vec3 position;\nvarying vec2 v_uv;\n\nvoid main() {\n    v_uv = position.xy * 0.5 + 0.5;\n    gl_Position = vec4(position, 1.0 );\n}\n"]),
            r.copyMaterial = new n.RawShaderMaterial({
                uniforms: {
                    u_texture: {
                        value: null
                    }
                },
                vertexShader: r.vertexShader,
                fragmentShader: d + i(["#define GLSLIFY 1\nuniform sampler2D u_texture;\n\nvarying vec2 v_uv;\n\nvoid main () {\n    gl_FragColor = texture2D(u_texture, v_uv);\n}\n"]),
                depthTest: !1,
                depthWrite: !1,
                blending: n.NoBlending
            }),
            r.uvCopyMaterial = new n.RawShaderMaterial({
                uniforms: {
                    u_texture: {
                        value: null
                    }
                },
                vertexShader: d + i(["#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\nvarying vec2 v_uv;\n\nvoid main() {\n    v_uv = uv;\n    gl_Position = vec4(position, 1.0 );\n}\n"]),
                fragmentShader: d + i(["#define GLSLIFY 1\nuniform sampler2D u_texture;\n\nvarying vec2 v_uv;\n\nvoid main () {\n    gl_FragColor = texture2D(u_texture, v_uv);\n}\n"]),
                depthTest: !1,
                depthWrite: !1,
                blending: n.NoBlending
            }),
            r.clearMaterial = new n.RawShaderMaterial({
                uniforms: {
                    u_color: {
                        value: new n.Vector4(1,1,1,1)
                    }
                },
                vertexShader: r.vertexShader,
                fragmentShader: d + i(["#define GLSLIFY 1\nuniform vec4 u_color;\n\nvarying vec2 v_uv;\n\nvoid main () {\n    gl_FragColor = u_color;\n}\n"]),
                depthTest: !1,
                depthWrite: !1,
                transparent: !0,
                blending: n.NoBlending
            }),
            l = new n.Scene;
            var f = new n.PlaneBufferGeometry(1,1);
            f.translate(.5, -.5, 0),
            h = new n.RawShaderMaterial({
                uniforms: {
                    u_texture: {
                        value: null
                    },
                    u_transform: {
                        value: new n.Vector4(0,0,1,1)
                    }
                },
                vertexShader: d + i(["#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform vec4 u_transform;\n\nvarying vec2 v_uv;\n\nvoid main() {\n    v_uv = uv;\n    gl_Position = vec4( position.xy * u_transform.zw + u_transform.xy, 0.0, 1.0 );\n}\n"]),
                fragmentShader: d + i(["#define GLSLIFY 1\nuniform sampler2D u_texture;\n\nvarying vec2 v_uv;\n\nvoid main () {\n    gl_FragColor = texture2D(u_texture, v_uv);\n}\n"]),
                depthTest: !1,
                depthWrite: !1,
                blending: n.NoBlending
            }),
            c = new n.Mesh(f,h),
            l.frustumCulled = !1,
            l.add(c)
        }
        ,
        r.copy = function(t, e) {
            var n = r.copyMaterial;
            n.uniforms.u_texture.value = t,
            d(n, e)
        }
        ,
        r.uvCopy = function(t, e) {
            var n = r.uvCopyMaterial;
            n.uniforms.u_texture.value = t,
            d(n, e)
        }
        ,
        r.render = d,
        r.renderGeometry = function(t, e, r) {
            s.geometry = t,
            d(e, r),
            s.geometry = p
        }
        ,
        r.renderMesh = function(t, e) {
            s.visible = !1,
            a.add(t),
            e && u.setRenderTarget(e || null),
            u.render(a, o),
            e && u.setRenderTarget(null),
            a.remove(t),
            s.visible = !0
        }
        ,
        r.debugTo = function(t, e, r, i, a) {
            e = e || 200,
            r = r || 200,
            i = i || 0,
            a = a || 0;
            var s = u.getSize(new n.Vector2);
            i = i / s.width * 2 - 1,
            a = 1 - a / s.height * 2,
            e = e / s.width * 2,
            r = r / s.height * 2,
            h.uniforms.u_texture.value = t,
            h.uniforms.u_transform.value.set(i, a, e, r);
            var c = f();
            u.autoClearColor = !1,
            u.setRenderTarget(null),
            u.render(l, o),
            m(c)
        }
        ,
        r.clearColor = function(t, e, i, a, o) {
            var s = r.clearMaterial;
            s.uniforms.u_color.value.set(t, e, i, a),
            s.transparent = a < 1,
            s.blending = a < 1 ? n.NormalBlending : n.NoBlending,
            d(r.clearMaterial, o),
            s.transparent = !1,
            s.blending = n.NoBlending
        }
        ,
        r.getColorState = f,
        r.setColorState = m,
        r.createRenderTarget = v,
        r.createMultisampleRenderTarget = function(t, e, i, a, o) {
            return u.capabilities.isWebGL2 ? new n.WebGLMultisampleRenderTarget(t,e,{
                wrapS: n.ClampToEdgeWrapping,
                wrapT: n.ClampToEdgeWrapping,
                magFilter: a ? n.NearestFilter : n.LinearFilter,
                minFilter: a ? n.NearestFilter : n.LinearFilter,
                format: i ? n.RGBAFormat : n.RGBFormat,
                type: o ? r.floatType : n.UnsignedByteType,
                anisotropy: 0,
                encoding: n.LinearEncoding,
                depthBuffer: !1,
                stencilBuffer: !1
            }) : v(t, e, i, a, o)
        }
        ;
        var a, o, s, l, c, h, u = r.renderer = null, p = (r.quadGeom = null,
        r.triGeom = null);
        function d(t, e) {
            s.material = t,
            e && u.setRenderTarget(e),
            u.render(a, o),
            e && u.setRenderTarget(null)
        }
        function f() {
            return {
                autoClear: u.autoClear,
                autoClearColor: u.autoClearColor,
                autoClearStencil: u.autoClearStencil,
                autoClearDepth: u.autoClearDepth,
                clearColor: u.getClearColor().getHex(),
                clearAlpha: u.getClearAlpha()
            }
        }
        function m(t) {
            u.setClearColor(t.clearColor, t.clearAlpha),
            u.autoClear = t.autoClear,
            u.autoClearColor = t.autoClearColor,
            u.autoClearStencil = t.autoClearStencil,
            u.autoClearDepth = t.autoClearDepth
        }
        function v(t, e, i, a, o) {
            return new n.WebGLRenderTarget(t,e,{
                wrapS: n.ClampToEdgeWrapping,
                wrapT: n.ClampToEdgeWrapping,
                magFilter: a ? n.NearestFilter : n.LinearFilter,
                minFilter: a ? n.NearestFilter : n.LinearFilter,
                format: i ? n.RGBAFormat : n.RGBFormat,
                type: o ? r.floatType : n.UnsignedByteType,
                anisotropy: 0,
                encoding: n.LinearEncoding,
                depthBuffer: !1,
                stencilBuffer: !1
            })
        }
        r.clearMaterial = null,
        r.floatType = null,
        r.precisionPrefix = "",
        r.precisionPrefix2 = "",
        r.vertexShader = ""
    }
    , {
        glslify: 3,
        three: 38
    }],
    48: [function(t, e, r) {
        "use strict";
        var n = t("three");
        function i(t) {
            return t.replace(/#define\sGLSLIFY\s./, "")
        }
        function a(t) {
            return "#include <" + t + ">"
        }
        r.glslifyStrip = i,
        r.addChunk = function(t, e) {
            n.ShaderChunk[t] = i(e)
        }
        ,
        r.insertBefore = function(t, e, r, n) {
            return n && (e = a(e)),
            t.replace(e, i(r) + "\n" + e)
        }
        ,
        r.insertAfter = function(t, e, r, n) {
            return n && (e = a(e)),
            t.replace(e, e + "\n" + i(r) + "\n")
        }
        ,
        r.replace = function(t, e, r, n) {
            return n && (e = a(e)),
            t.replace(e, "\n" + i(r) + "\n")
        }
    }
    , {
        three: 38
    }],
    49: [function(t, e, r) {
        "use strict";
        var n = t("three");
        function i(t) {
            new n.DataTexture(new Uint8Array(t)).format = n.RGBAFormat
        }
        r.init = function() {
            r.blackTexture = i([0, 0, 0, 1]),
            r.whiteTexture = i([1, 1, 1, 1]),
            r.transparentTexture = i([0, 0, 0, 0])
        }
        ,
        r.blackTexture = null,
        r.whiteTexture = null,
        r.transparentTexture = null
    }
    , {
        three: 38
    }],
    50: [function(t, e, r) {
        "use strict";
        var n, i, a, o, s, l, c = (n = t("./ui/ui")) && n.__esModule ? n : {
            default: n
        }, h = t("./core/browser"), u = t("./core/settings"), p = t("./core/properties"), d = t("./helpers/fboHelper"), f = t("./helpers/textureHelper"), m = t("./helpers/shaderHelper"), v = t("./post/Postprocessing"), g = t("./post/smaa/Smaa"), y = t("./post/bloom/Bloom"), _ = t("./post/final/Final"), x = t("./post/bokeh/Bokeh"), b = t("./controls/cameraControls"), w = t("./controls/input"), S = t("./visuals/visuals"), T = t("./audios/audios"), M = t("three"), E = t("glslify"), A = (t("mout/object/mixIn"),
        t("./loaders/BufItem")), P = t("./loaders/TextureItem"), C = +new Date / 1e3;
        function L() {
            u.USE_WEBGL2 || g.updateTextures(),
            b.init(),
            S.init(),
            c.default.init(),
            a.add(S.container),
            w.init(document.body, u.canvas),
            p.hasInitialized = !0,
            F(p.rawWidth, p.rawHeight);
            var t, e = u.canvas;
            h.isMobile || (e.addEventListener("mousedown", D),
            e.addEventListener("mousemove", R),
            e.addEventListener("mouseup", I)),
            e.addEventListener("touchstart", k(D), {
                passive: !1
            }),
            e.addEventListener("touchmove", k(R), {
                passive: !1
            }),
            e.addEventListener("touchend", (t = I,
            function(e) {
                t.call(this, e.changedTouches[0] || e.touches[0])
            }
            ), {
                passive: !1
            }),
            function() {
            	console.log("stats setup");
                window.stats = new Stats();
				document.body.appendChild( window.stats.dom );

                l = new dat.GUI,
                p.onStarted.add((function() {
                    p.hasStarted = !0,
                    h.isMobile || (T.setAudioBtnVisibility(!0),
                    T.bgmVolume = 1),
                    document.documentElement.classList.add("has-started")
                }
                ));
                if (l.add(u, "VICTIM_COUNT", {
                    '8000': 8192,
                    '16000': 16384,
                    '32000': 32768,
                    '65000': 65536,
                    '131000': 131072,
                    '232000': 262144
                }).onChange((function() {
                     (window.location.href = window.location.href.split("?")[0] + "?VICTIM_COUNT=" + u.VICTIM_COUNT + "&SKIP_ONBOARING=1")
                }
                )).name("victim count"),
                p.bokeh && l.add(p.bokeh, "enabled").name("enable vfx"),
                h.isMobile && l.close(),
                u.LOOK_DEV_MODE) {
                    var t = new dat.GUI
                      , e = t.addFolder("bloom");
                    e.add(p, "bloomAmount", 0, 5, 1e-5),
                    e.add(p, "bloomRadius", -1, 1, 1e-5),
                    e.add(p, "bloomThreshold", 0, 1, 1e-5),
                    e.add(p, "bloomSmoothWidth", 0, 2, 1e-5),
                    e.open();
                    var r = t.addFolder("color");
                    r.add(p, "vignetteFrom", 0, 3, 1e-5),
                    r.add(p, "vignetteTo", 0, 3, 1e-5),
                    r.addColor(p, "vignetteColorHex"),
                    r.add(p, "saturation", 0, 3, 1e-5),
                    r.add(p, "contrast", 0, 3, 1e-5),
                    r.add(p, "brightness", 0, 2, 1e-5),
                    r.addColor(p, "tintColorHex"),
                    r.add(p, "tintOpacity", 0, 1, 1e-5),
                    r.open();
                    var n = t.addFolder("bokeh");
                    n.add(p.bokeh, "fNumber", 1e-4, 5, 1e-5),
                    n.add(p.bokeh, "useCameraFov"),
                    n.add(p.bokeh, "focalLength", 0, 5, 1e-5),
                    n.add(p.bokeh, "kFilmHeight", 1e-5, 90, 1e-5),
                    n.add(p.bokeh, "quality", 0, 3, 1),
                    n.add(p.bokeh, "useFloatTexture"),
                    n.add(p.bokeh, "useAdditionalBlur"),
                    n.open()
                }
            }()
        }
        function D(t) {
            t.button > 0 || (p.isDown = !0,
            p.downTime = +new Date,
            p.downPixelXY.x = t.clientX,
            p.downPixelXY.y = t.clientY,
            p.downXY = O(t),
            p.prevMouseXY = O(t),
            R(t))
        }
        function R(t) {
            t.button > 0 || (p.hasMouseMoved = !0,
            p.mouseXY = O(t))
        }
        function I(t) {
            if (!(t.button > 0)) {
                var e = t.clientX - p.downPixelXY.x
                  , r = t.clientY - p.downPixelXY.y;
                Math.sqrt(e * e + r * r) < 40 && +new Date - p.downTime < 300 && (p.mouseXY = O(t),
                p.hasClicked = !0),
                p.isDown = !1
            }
        }
        function k(t) {
            return function(e) {
                1 == e.touches.length && t.call(this, e.changedTouches[0] || e.touches[0])
            }
        }
        function O(t) {
            return {
                x: t.clientX / window.innerWidth * 2 - 1,
                y: 1 - t.clientY / window.innerHeight * 2
            }
        }
        function F(t, e) {
            if (p.isStageReady) {
                var r = u.DPR
                  , n = t * r
                  , a = e * r;
                if (n * a > u.MAX_PIXEL_COUNT) {
                    var l = n / a;
                    a = Math.sqrt(u.MAX_PIXEL_COUNT / l),
                    n = Math.ceil(a * l),
                    a = Math.ceil(a),
                    p.final.useBicubicOut = !0
                } else
                    p.final.useBicubicOut = !1;
                p.rawWidth = t,
                p.rawHeight = e,
                p.width = n,
                p.height = a,
                p.resolution.set(n, a),
                o.aspect = n / a,
                o.updateProjectionMatrix(),
                i.setSize(n, a),
                s.setSize(n, a),
                u.canvas.style.width = t + "px",
                u.canvas.style.height = e + "px",
                S.resize(n, a),
                c.default.resize(n, a)
            }
        }
        function N() {
            F(window.innerWidth, window.innerHeight)
        }
        function CCount() {
        	// console.log(s.info.render);
        }
        function B() {
            var t;
            requestAnimationFrame(B),
            t = +new Date / 1e3 - C,
            p.isStageReady && (t = Math.min(1 / 30, t),
            p.time += t,
            c.default.update(t),
            p.sharedUniforms.u_time.value = p.time,
            p.sharedUniforms.u_timeScale.value = t,
            p.bgColor.setStyle(p.bgColorHex),
            i.setClearColor(p.bgColor, 1),
            b.update(t),
            p.hasInitialized && S.update(t),
            p.bloom.amount = p.bloomAmount,
            p.bloom.radius = p.bloomRadius,
            p.bloom.threshold = p.bloomThreshold,
            p.bloom.smoothWidth = p.bloomSmoothWidth,
            p.final.vignetteFrom = p.vignetteFrom,
            p.final.vignetteTo = p.vignetteTo,
            p.final.vignetteColor.setStyle(p.vignetteColorHex),
            p.final.saturation = p.saturation,
            p.final.contrast = p.contrast,
            p.final.brightness = p.brightness,
            p.final.tintColor.setStyle(p.tintColorHex),
            p.final.tintOpacity = p.tintOpacity,
            p.final.bgColor.setStyle(p.bgColorHex),
            p.final.opacity = p.opacity,
            CCount(),
            window.stats?window.stats.update():'',
            s.render(a, o, !0),
            window.__debugTexture && d.debugTo(window.__debugTexture)),
            p.prevMouseXY.x = p.mouseXY.x,
            p.prevMouseXY.y = p.mouseXY.y,
            T.update(t)
        }
        (function(t) {
            if (u.canvas = t,
            u.USE_WEBGL2 && window.WebGL2RenderingContext)
                try {
                    return u.gl = t.getContext("webgl2", u.webglOpts),
                    u.RENDER_TARGET_FLOAT_TYPE = M.FloatType,
                    u.DATA_FLOAT_TYPE = M.FloatType,
                    !0
                } catch (t) {}
            if (u.USE_WEBGL2 = !1,
            window.WebGLRenderingContext)
                try {
                    var e = u.gl = t.getContext("webgl", u.webglOpts) || t.getContext("experimental-webgl", u.webglOpts);
                    return (e.getExtension("OES_texture_float") || e.getExtension("OES_texture_half_float")) && e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS) ? (u.RENDER_TARGET_FLOAT_TYPE = h.isIOS || !e.getExtension("OES_texture_float") ? M.HalfFloatType : M.FloatType,
                    u.DATA_FLOAT_TYPE = M.FloatType) : (u.USE_FLOAT_PACKING = !0,
                    u.RENDER_TARGET_FLOAT_TYPE = u.DATA_FLOAT_TYPE = M.UnsignedByteType),
                    !0
                } catch (t) {
                    return !1
                }
            return !1
        }
        )(document.getElementById("app")) && function() {
            document.documentElement.classList.add("is-" + (h.isMobile ? "mobile" : "desktop"));
            for (var t = 0; t < u.CROSS_ORIGINS.length; t++) {
                var e = u.CROSS_ORIGINS[t];
                r.loader.setCrossOrigin(e.baseUrl, e.value)
            }
            p.loader.register(A),
            p.loader.register(P),
            i = p.renderer = new M.WebGLRenderer({
                canvas: u.canvas,
                context: u.gl
            }),
            m.addChunk("textureBicubic", E(["#define GLSLIFY 1\nvec4 cubic(float v) {\n    vec4 n = vec4(1.0, 2.0, 3.0, 4.0) - v;\n    vec4 s = n * n * n;\n    float x = s.x;\n    float y = s.y - 4.0 * s.x;\n    float z = s.z - 4.0 * s.y + 6.0 * s.x;\n    float w = 6.0 - x - y - z;\n    return vec4(x, y, z, w);\n}\n\n// https://stackoverflow.com/questions/13501081/efficient-bicubic-filtering-code-in-glsl\nvec4 textureBicubic(sampler2D t, vec2 texCoords, vec2 textureSize) {\n   vec2 invTexSize = 1.0 / textureSize;\n   texCoords = texCoords * textureSize - 0.5;\n\n    vec2 fxy = fract(texCoords);\n    texCoords -= fxy;\n    vec4 xcubic = cubic(fxy.x);\n    vec4 ycubic = cubic(fxy.y);\n\n    vec4 c = texCoords.xxyy + vec2 (-0.5, 1.5).xyxy;\n\n    vec4 s = vec4(xcubic.xz + xcubic.yw, ycubic.xz + ycubic.yw);\n    vec4 offset = c + vec4 (xcubic.yw, ycubic.yw) / s;\n\n    offset *= invTexSize.xxyy;\n\n    vec4 sample0 = texture2D(t, offset.xz);\n    vec4 sample1 = texture2D(t, offset.yz);\n    vec4 sample2 = texture2D(t, offset.xw);\n    vec4 sample3 = texture2D(t, offset.yw);\n\n    float sx = s.x / (s.x + s.y);\n    float sy = s.z / (s.z + s.w);\n\n    return mix(\n       mix(sample3, sample2, sx), mix(sample1, sample0, sx)\n    , sy);\n}\n\nvec4 textureBicubic(sampler2D t, vec2 texCoords, vec2 textureSize, vec4 clampRect) {\n   vec2 invTexSize = 1.0 / textureSize;\n   texCoords = texCoords * textureSize - 0.5;\n\n    vec2 fxy = fract(texCoords);\n    texCoords -= fxy;\n    vec4 xcubic = cubic(fxy.x);\n    vec4 ycubic = cubic(fxy.y);\n\n    vec4 c = texCoords.xxyy + vec2 (-0.5, 1.5).xyxy;\n\n    vec4 s = vec4(xcubic.xz + xcubic.yw, ycubic.xz + ycubic.yw);\n    vec4 offset = c + vec4 (xcubic.yw, ycubic.yw) / s;\n\n    offset *= invTexSize.xxyy;\n\n    vec4 sample0 = texture2D(t, clamp(offset.xz, clampRect.xy, clampRect.zw));\n    vec4 sample1 = texture2D(t, clamp(offset.yz, clampRect.xy, clampRect.zw));\n    vec4 sample2 = texture2D(t, clamp(offset.xw, clampRect.xy, clampRect.zw));\n    vec4 sample3 = texture2D(t, clamp(offset.yw, clampRect.xy, clampRect.zw));\n\n    float sx = s.x / (s.x + s.y);\n    float sy = s.z / (s.z + s.w);\n\n    return mix(\n       mix(sample3, sample2, sx), mix(sample1, sample0, sx)\n    , sy);\n}"])),
            a = p.scene = new M.Scene,
            o = p.camera = new M.PerspectiveCamera(100,1,.01,21),
            a.add(o),
            p.sharedUniforms.u_resolution.value = p.resolution = new M.Vector2,
            p.sharedUniforms.u_bgColor.value = p.bgColor = new M.Color,
            p.sharedUniforms.u_blueNoiseTexture.value = p.loader.add(u.TEXTURE_PATH + "LDR_RGB1_6.png", {
                type: "texture",
                minFilter: M.LinearFilter,
                wrap: M.RepeatWrapping
            }).content,
            p.sharedUniforms.u_blueNoiseTextureTexelSize.value = new M.Vector2(1 / 128,1 / 128),
            d.init(i, u.RENDER_TARGET_FLOAT_TYPE),
            f.init(),
            new M.Raycaster,
            s = p.postprocessing = new v(!0),
            p.bokeh = new x({
                quality: h.isMobile ? 0 : 1
            }),
            s.useDepthTexture && s.queue.push(p.bokeh),
            i.capabilities.isWebGL2 || (g.setTextures(p.loader.add(u.TEXTURE_PATH + "smaa-area.png").content, p.loader.add(u.TEXTURE_PATH + "smaa-search.png").content),
            s.queue.push(p.smaa = new g)),
            s.queue.push(p.bloom = new y),
            s.queue.push(p.final = new _),
            p.isStageReady = !0,
            b.preInit(),
            S.preInit(),
            c.default.preInit(L),
            T.init(),
            h.isMobile && T.setAudioBtnVisibility(!0),
            window.addEventListener("resize", N),
            N(),
            B()
        }()
    }
    , {
        "./audios/audios": 39,
        "./controls/cameraControls": 41,
        "./controls/input": 42,
        "./core/browser": 43,
        "./core/properties": 44,
        "./core/settings": 45,
        "./helpers/fboHelper": 47,
        "./helpers/shaderHelper": 48,
        "./helpers/textureHelper": 49,
        "./loaders/BufItem": 54,
        "./loaders/TextureItem": 55,
        "./post/Postprocessing": 58,
        "./post/bloom/Bloom": 59,
        "./post/bokeh/Bokeh": 60,
        "./post/final/Final": 61,
        "./post/smaa/Smaa": 62,
        "./ui/ui": 68,
        "./visuals/visuals": 76,
        glslify: 3,
        "mout/object/mixIn": 20,
        three: 38
    }],
    51: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.default = r.CustomEase = void 0;
        var n, i = t("./utils/paths.js"), a = t("gsap"), o = function() {
            a.gsap ? (a.gsap.registerEase("_CE", u.create),
            n = 1) : console.warn("Please gsap.registerPlugin(CustomEase)")
        }, s = function(t) {
            return ~~(1e3 * t + (t < 0 ? -.5 : .5)) / 1e3
        }, l = /[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi, c = /[cLlsSaAhHvVtTqQ]/g, h = function t(e, r, n, i, a, o, s, l, c, h, u) {
            var p, d = (e + n) / 2, f = (r + i) / 2, m = (n + a) / 2, v = (i + o) / 2, g = (a + s) / 2, y = (o + l) / 2, _ = (d + m) / 2, x = (f + v) / 2, b = (m + g) / 2, w = (v + y) / 2, S = (_ + b) / 2, T = (x + w) / 2, M = s - e, E = l - r, A = Math.abs((n - s) * E - (i - l) * M), P = Math.abs((a - s) * E - (o - l) * M);
            return h || (h = [{
                x: e,
                y: r
            }, {
                x: s,
                y: l
            }],
            u = 1),
            h.splice(u || h.length - 1, 0, {
                x: S,
                y: T
            }),
            (A + P) * (A + P) > c * (M * M + E * E) && (p = h.length,
            t(e, r, d, f, _, x, S, T, c, h, u),
            t(S, T, b, w, g, y, s, l, c, h, u + 1 + (h.length - p))),
            h
        }, u = function() {
            function t(t, e, r) {
                n || o(),
                this.id = t,
                this.setData(e, r)
            }
            var e = t.prototype;
            return e.setData = function(t, e) {
                e = e || {};
                var r, n, o, s, u, p, d, f, m, v = (t = t || "0,0,1,1").match(l), g = 1, y = [], _ = [], x = e.precision || 1, b = x <= 1;
                if (this.data = t,
                (c.test(t) || ~t.indexOf("M") && t.indexOf("C") < 0) && (v = (0,
                i.stringToRawPath)(t)[0]),
                4 === (r = v.length))
                    v.unshift(0, 0),
                    v.push(1, 1),
                    r = 8;
                else if ((r - 2) % 6)
                    throw "Invalid CustomEase";
                for (0 == +v[0] && 1 == +v[r - 2] || function(t, e, r) {
                    r || 0 === r || (r = Math.max(+t[t.length - 1], +t[1]));
                    var n, i = -1 * +t[0], a = -r, o = t.length, s = 1 / (+t[o - 2] + i), l = -e || (Math.abs(+t[o - 1] - +t[1]) < .01 * (+t[o - 2] - +t[0]) ? function(t) {
                        var e, r = t.length, n = 1e20;
                        for (e = 1; e < r; e += 6)
                            +t[e] < n && (n = +t[e]);
                        return n
                    }(t) + a : +t[o - 1] + a);
                    for (l = l ? 1 / l : -s,
                    n = 0; n < o; n += 2)
                        t[n] = (+t[n] + i) * s,
                        t[n + 1] = (+t[n + 1] + a) * l
                }(v, e.height, e.originY),
                this.segment = v,
                s = 2; s < r; s += 6)
                    n = {
                        x: +v[s - 2],
                        y: +v[s - 1]
                    },
                    o = {
                        x: +v[s + 4],
                        y: +v[s + 5]
                    },
                    y.push(n, o),
                    h(n.x, n.y, +v[s], +v[s + 1], +v[s + 2], +v[s + 3], o.x, o.y, 1 / (2e5 * x), y, y.length - 1);
                for (r = y.length,
                s = 0; s < r; s++)
                    d = y[s],
                    f = y[s - 1] || d,
                    (d.x > f.x || f.y !== d.y && f.x === d.x || d === f) && d.x <= 1 ? (f.cx = d.x - f.x,
                    f.cy = d.y - f.y,
                    f.n = d,
                    f.nx = d.x,
                    b && s > 1 && Math.abs(f.cy / f.cx - y[s - 2].cy / y[s - 2].cx) > 2 && (b = 0),
                    f.cx < g && (f.cx ? g = f.cx : (f.cx = .001,
                    s === r - 1 && (f.x -= .001,
                    g = Math.min(g, .001),
                    b = 0)))) : (y.splice(s--, 1),
                    r--);
                if (u = 1 / (r = 1 / g + 1 | 0),
                p = 0,
                d = y[0],
                b) {
                    for (s = 0; s < r; s++)
                        m = s * u,
                        d.nx < m && (d = y[++p]),
                        n = d.y + (m - d.x) / d.cx * d.cy,
                        _[s] = {
                            x: m,
                            cx: u,
                            y: n,
                            cy: 0,
                            nx: 9
                        },
                        s && (_[s - 1].cy = n - _[s - 1].y);
                    _[r - 1].cy = y[y.length - 1].y - n
                } else {
                    for (s = 0; s < r; s++)
                        d.nx < s * u && (d = y[++p]),
                        _[s] = d;
                    p < y.length - 1 && (_[s - 1] = y[y.length - 2])
                }
                return this.ease = function(t) {
                    var e = _[t * r | 0] || _[r - 1];
                    return e.nx < t && (e = e.n),
                    e.y + (t - e.x) / e.cx * e.cy
                }
                ,
                this.ease.custom = this,
                this.id && a.gsap.registerEase(this.id, this.ease),
                this
            }
            ,
            e.getSVGData = function(e) {
                return t.getSVGData(this, e)
            }
            ,
            t.create = function(e, r, n) {
                return new t(e,r,n).ease
            }
            ,
            t.register = function(t) {
                o()
            }
            ,
            t.get = function(t) {
                return a.gsap.parseEase(t)
            }
            ,
            t.getSVGData = function(e, r) {
                var n, o, l, c, h, u, p, d, f, m, v = (r = r || {}).width || 100, g = r.height || 100, y = r.x || 0, _ = (r.y || 0) + g, x = a.gsap.utils.toArray(r.path)[0];
                if (r.invert && (g = -g,
                _ = 0),
                "string" == typeof e && (e = a.gsap.parseEase(e)),
                e.custom && (e = e.custom),
                e instanceof t)
                    n = (0,
                    i.rawPathToString)((0,
                    i.transformRawPath)([e.segment], v, 0, 0, -g, y, _));
                else {
                    for (n = [y, _],
                    c = 1 / (p = Math.max(5, 200 * (r.precision || 1))),
                    d = 5 / (p += 2),
                    f = s(y + c * v),
                    o = ((m = s(_ + e(c) * -g)) - _) / (f - y),
                    l = 2; l < p; l++)
                        h = s(y + l * c * v),
                        u = s(_ + e(l * c) * -g),
                        (Math.abs((u - m) / (h - f) - o) > d || l === p - 1) && (n.push(f, m),
                        o = (u - m) / (h - f)),
                        f = h,
                        m = u;
                    n = "M" + n.join(",")
                }
                return x && x.setAttribute("d", n),
                n
            }
            ,
            t
        }();
        r.default = r.CustomEase = u,
        a.gsap.registerPlugin(u),
        u.version = "3.6.1"
    }
    , {
        "./utils/paths.js": 52,
        gsap: 4
    }],
    52: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.bezierToPoints = function t(e, r, n, i, a, o, s, l, c, h, u) {
            var d, f = (e + n) / 2, m = (r + i) / 2, v = (n + a) / 2, g = (i + o) / 2, y = (a + s) / 2, _ = (o + l) / 2, x = (f + v) / 2, b = (m + g) / 2, w = (v + y) / 2, S = (g + _) / 2, T = (x + w) / 2, M = (b + S) / 2, E = s - e, A = l - r, P = p((n - s) * A - (i - l) * E), C = p((a - s) * A - (o - l) * E);
            return h || (h = [e, r, s, l],
            u = 2),
            h.splice(u || h.length - 2, 0, T, M),
            (P + C) * (P + C) > c * (E * E + A * A) && (d = h.length,
            t(e, r, f, m, x, b, T, M, c, h, u),
            t(T, M, w, S, y, _, s, l, c, h, u + 2 + (h.length - d))),
            h
        }
        ,
        r.cacheRawPathMeasurements = R,
        r.convertToPath = function(t, e) {
            var r, n, i, o, s, l, c, h, u, p, d, f, m, v, g, y, _, x, b, w, S, T, M = t.tagName.toLowerCase(), E = .552284749831;
            return "path" !== M && t.getBBox ? (l = function(t, e) {
                var r, n = document.createElementNS("http://www.w3.org/2000/svg", "path"), i = [].slice.call(t.attributes), a = i.length;
                for (e = "," + e + ","; --a > -1; )
                    r = i[a].nodeName.toLowerCase(),
                    e.indexOf("," + r + ",") < 0 && n.setAttributeNS(null, r, i[a].nodeValue);
                return n
            }(t, "x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),
            T = function(t, e) {
                for (var r = e ? e.split(",") : [], n = {}, i = r.length; --i > -1; )
                    n[r[i]] = +t.getAttribute(r[i]) || 0;
                return n
            }(t, C[M]),
            "rect" === M ? (o = T.rx,
            s = T.ry || o,
            n = T.x,
            i = T.y,
            p = T.width - 2 * o,
            d = T.height - 2 * s,
            r = o || s ? "M" + (y = (v = (m = n + o) + p) + o) + "," + (x = i + s) + " V" + (b = x + d) + " C" + [y, w = b + s * E, g = v + o * E, S = b + s, v, S, v - (v - m) / 3, S, m + (v - m) / 3, S, m, S, f = n + o * (1 - E), S, n, w, n, b, n, b - (b - x) / 3, n, x + (b - x) / 3, n, x, n, _ = i + s * (1 - E), f, i, m, i, m + (v - m) / 3, i, v - (v - m) / 3, i, v, i, g, i, y, _, y, x].join(",") + "z" : "M" + (n + p) + "," + i + " v" + d + " h" + -p + " v" + -d + " h" + p + "z") : "circle" === M || "ellipse" === M ? ("circle" === M ? h = (o = s = T.r) * E : (o = T.rx,
            h = (s = T.ry) * E),
            r = "M" + ((n = T.cx) + o) + "," + (i = T.cy) + " C" + [n + o, i + h, n + (c = o * E), i + s, n, i + s, n - c, i + s, n - o, i + h, n - o, i, n - o, i - h, n - c, i - s, n, i - s, n + c, i - s, n + o, i - h, n + o, i].join(",") + "z") : "line" === M ? r = "M" + T.x1 + "," + T.y1 + " L" + T.x2 + "," + T.y2 : "polyline" !== M && "polygon" !== M || (r = "M" + (n = (u = (t.getAttribute("points") + "").match(a) || []).shift()) + "," + (i = u.shift()) + " L" + u.join(","),
            "polygon" === M && (r += "," + n + "," + i + "z")),
            l.setAttribute("d", z(l._gsRawPath = F(r))),
            e && t.parentNode && (t.parentNode.insertBefore(l, t),
            t.parentNode.removeChild(t)),
            l) : t
        }
        ,
        r.copyRawPath = A,
        r.flatPointsToSegment = function(t, e) {
            void 0 === e && (e = 1);
            for (var r = t[0], n = 0, i = [r, n], a = 2; a < t.length; a += 2)
                i.push(r, n, t[a], n = (t[a] - r) * e / 2, r = t[a], -n);
            return i
        }
        ,
        r.getClosestData = function(t, e, r, i) {
            var a, o, s, l, c = {
                j: 0,
                i: 0,
                t: 0
            }, h = m;
            for (o = 0; o < t.length; o++)
                for (l = t[o],
                a = 0; a < l.length; a += 6)
                    s = B(1, e, r, 0, 1, i || 20, l[a], l[a + 1], l[a + 2], l[a + 3], l[a + 4], l[a + 5], l[a + 6], l[a + 7]),
                    h > n && (h = n,
                    c.j = o,
                    c.i = a,
                    c.t = s);
            return c
        }
        ,
        r.getPositionOnPath = function(t, e, r, n) {
            var i, a, o, s, l, c, h, u, p, d = t[0], f = n || {};
            if ((e < 0 || e > 1) && (e = b(e)),
            t.length > 1) {
                for (o = t.totalLength * e,
                l = c = 0; (l += t[c++].totalLength) < o; )
                    d = t[c];
                e = (o - (s = l - d.totalLength)) / (l - s) || 0
            }
            return i = d.samples,
            a = d.resolution,
            o = d.totalLength * e,
            s = (c = d.lookup[e < 1 ? ~~(o / d.minLength) : d.lookup.length - 1] || 0) ? i[c - 1] : 0,
            (l = i[c]) < o && (s = l,
            l = i[++c]),
            p = 1 - (h = 1 / a * ((o - s) / (l - s) + c % a) || 0),
            u = d[c = 6 * ~~(c / a)],
            f.x = w((h * h * (d[c + 6] - u) + 3 * p * (h * (d[c + 4] - u) + p * (d[c + 2] - u))) * h + u),
            f.y = w((h * h * (d[c + 7] - (u = d[c + 1])) + 3 * p * (h * (d[c + 5] - u) + p * (d[c + 3] - u))) * h + u),
            r && (f.angle = d.totalLength ? L(d, c, h >= 1 ? 1 - 1e-9 : h || 1e-9) : d.angle || 0),
            f
        }
        ,
        r.getRawPath = function(t) {
            var e, r = (t = v(t) && s.test(t) && document.querySelector(t) || t).getAttribute ? t : 0;
            return r && (t = t.getAttribute("d")) ? (r._gsPath || (r._gsPath = {}),
            (e = r._gsPath[t]) && !e._dirty ? e : r._gsPath[t] = F(t)) : t ? v(t) ? F(t) : g(t[0]) ? [t] : t : console.warn("Expecting a <path> element or an SVG path data string")
        }
        ,
        r.getRotationAtProgress = function(t, e) {
            var r = k(t, e >= 1 ? 1 - 1e-9 : e || 1e-9);
            return L(r.segment, r.i, r.t)
        }
        ,
        r.pointsToSegment = function(t, e, r) {
            p(t[0] - t[2]) < 1e-4 && p(t[1] - t[3]) < 1e-4 && (t = t.slice(2));
            var n, i, a, o, s, l, c, m, v, g, y, _, x, b, S = t.length - 2, T = +t[0], M = +t[1], E = +t[2], A = +t[3], P = [T, M, T, M], C = E - T, L = A - M, D = Math.abs(t[S] - T) < .001 && Math.abs(t[S + 1] - M) < .001;
            for (isNaN(r) && (r = Math.PI / 10),
            D && (t.push(E, A),
            E = T,
            A = M,
            T = t[S - 2],
            M = t[S - 1],
            t.unshift(T, M),
            S += 4),
            e = e || 0 === e ? +e : 1,
            s = 2; s < S; s += 2)
                n = T,
                i = M,
                T = E,
                M = A,
                E = +t[s + 2],
                A = +t[s + 3],
                T === E && M === A || (_ = (l = C) * l + (m = L) * m,
                x = (C = E - T) * C + (L = A - M) * L,
                b = (c = E - n) * c + (v = A - i) * v,
                y = (a = Math.acos((_ + x - b) / d(4 * _ * x))) / Math.PI * e,
                g = d(_) * y,
                y *= d(x),
                T === n && M === i || (a > r ? (o = f(v, c),
                P.push(w(T - u(o) * g), w(M - h(o) * g), w(T), w(M), w(T + u(o) * y), w(M + h(o) * y))) : (o = f(m, l),
                P.push(w(T - u(o) * g), w(M - h(o) * g)),
                o = f(L, C),
                P.push(w(T), w(M), w(T + u(o) * y), w(M + h(o) * y)))));
            return T !== E || M !== A || P.length < 4 ? P.push(w(E), w(A), w(E), w(A)) : P.length -= 2,
            D && (P.splice(0, 6),
            P.length = P.length - 6),
            P
        }
        ,
        r.rawPathToString = z,
        r.reverseSegment = P,
        r.simplifyPoints = function(t, e) {
            var r, n, i, a, o, s, l, c = parseFloat(t[0]), h = parseFloat(t[1]), u = [c, h], p = t.length - 2;
            for (e = Math.pow(e || 1, 2),
            r = 2; r < p; r += 2)
                (a = c - (n = parseFloat(t[r]))) * a + (o = h - (i = parseFloat(t[r + 1]))) * o > e && (u.push(n, i),
                c = n,
                h = i);
            return u.push(parseFloat(t[p]), parseFloat(t[p + 1])),
            N(u, 0, l = u.length - 2, e, s = [u[0], u[1]]),
            s.push(u[l], u[l + 1]),
            s
        }
        ,
        r.sliceRawPath = function(t, e, r) {
            r = "undefined" == typeof r ? 1 : S(r) || 0,
            e = S(e) || 0;
            var n = Math.max(0, ~~(p(r - e) - 1e-8))
              , i = A(t);
            if (e > r && (e = 1 - e,
            r = 1 - r,
            function(t, e) {
                var r = t.length;
                for (t.reverse(); r--; )
                    t[r].reversed || P(t[r])
            }(i),
            i.totalLength = 0),
            e < 0 || r < 0) {
                var a = Math.abs(~~Math.min(e, r)) + 1;
                e += a,
                r += a
            }
            i.totalLength || R(i);
            var o, s, l, c, h, u, d, f, m = r > 1, v = k(i, e, y, !0), g = k(i, r, _), x = g.segment, b = v.segment, w = g.segIndex, M = v.segIndex, C = g.i, D = v.i, O = M === w, F = C === D && O;
            if (m || n) {
                for (o = w < M || O && C < D || F && g.t < v.t,
                T(i, M, D, v.t) && (M++,
                o || (w++,
                F ? (g.t = (g.t - v.t) / (1 - v.t),
                C = 0) : O && (C -= D))),
                1 - (r - e) < 1e-5 ? w = M - 1 : !g.t && w ? w-- : T(i, w, C, g.t) && o && M++,
                1 === v.t && (M = (M + 1) % i.length),
                h = [],
                d = 1 + (u = i.length) * n,
                f = M,
                d += (u - M + w) % u,
                c = 0; c < d; c++)
                    E(h, i[f++ % u]);
                i = h
            } else if (l = 1 === g.t ? 6 : I(x, C, g.t),
            e !== r)
                for (s = I(b, D, F ? v.t / g.t : v.t),
                O && (l += s),
                x.splice(C + l + 2),
                (s || D) && b.splice(0, D + s),
                c = i.length; c--; )
                    (c < M || c > w) && i.splice(c, 1);
            else
                x.angle = L(x, C + l, 0),
                v = x[C += l],
                g = x[C + 1],
                x.length = x.totalLength = 0,
                x.totalPoints = i.totalPoints = 8,
                x.push(v, g, v, g, v, g, v, g);
            return i.totalLength = 0,
            i
        }
        ,
        r.stringToRawPath = F,
        r.subdivideSegment = I,
        r.subdivideSegmentNear = function(t, e, r, i, a) {
            var o, s, l = r.length, c = m, h = 0, u = 0;
            for (i = i || 20,
            a = a || 3,
            s = 0; s < l; s += 6)
                o = B(1, t, e, 0, 1, i, r[s], r[s + 1], r[s + 2], r[s + 3], r[s + 4], r[s + 5], r[s + 6], r[s + 7]),
                c > n && (c = n,
                h = o,
                u = s);
            return I(r, u, o = B(a, t, e, h - .05, h + .05, i, r[u], r[u + 1], r[u + 2], r[u + 3], r[u + 4], r[u + 5], r[u + 6], r[u + 7])),
            u + 6
        }
        ,
        r.transformRawPath = function(t, e, r, n, i, a, o) {
            for (var s, l, c, h, u, p = t.length; --p > -1; )
                for (l = (s = t[p]).length,
                c = 0; c < l; c += 2)
                    h = s[c],
                    u = s[c + 1],
                    s[c] = h * e + u * n + a,
                    s[c + 1] = h * r + u * i + o;
            return t._dirty = 1,
            t
        }
        ;
        var n, i = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, a = /(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, o = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi, s = /(^[#\.][a-z]|[a-y][a-z])/i, l = Math.PI / 180, c = 180 / Math.PI, h = Math.sin, u = Math.cos, p = Math.abs, d = Math.sqrt, f = Math.atan2, m = 1e8, v = function(t) {
            return "string" == typeof t
        }, g = function(t) {
            return "number" == typeof t
        }, y = {}, _ = {}, x = 1e5, b = function(t) {
            return Math.round((t + m) % 1 * x) / x || (t < 0 ? 0 : 1)
        }, w = function(t) {
            return Math.round(t * x) / x || 0
        }, S = function(t) {
            return Math.round(1e10 * t) / 1e10 || 0
        }, T = function(t, e, r, n) {
            var i = t[e]
              , a = 1 === n ? 6 : I(i, r, n);
            if (a && a + r + 2 < i.length)
                return t.splice(e, 0, i.slice(0, r + a + 2)),
                i.splice(0, r + a),
                1
        }, M = function(t, e) {
            return e.totalLength = t.totalLength,
            t.samples ? (e.samples = t.samples.slice(0),
            e.lookup = t.lookup.slice(0),
            e.minLength = t.minLength,
            e.resolution = t.resolution) : t.totalPoints && (e.totalPoints = t.totalPoints),
            e
        }, E = function(t, e) {
            var r = t.length
              , n = t[r - 1] || []
              , i = n.length;
            r && e[0] === n[i - 2] && e[1] === n[i - 1] && (e = n.concat(e.slice(2)),
            r--),
            t[r] = e
        };
        function A(t) {
            for (var e = [], r = 0; r < t.length; r++)
                e[r] = M(t[r], t[r].slice(0));
            return M(t, e)
        }
        function P(t) {
            var e, r = 0;
            for (t.reverse(); r < t.length; r += 2)
                e = t[r],
                t[r] = t[r + 1],
                t[r + 1] = e;
            t.reversed = !t.reversed
        }
        var C = {
            rect: "rx,ry,x,y,width,height",
            circle: "r,cx,cy",
            ellipse: "rx,ry,cx,cy",
            line: "x1,x2,y1,y2"
        };
        function L(t, e, r) {
            var n, i = t[e], a = t[e + 2], o = t[e + 4];
            return i += (a - i) * r,
            i += ((a += (o - a) * r) - i) * r,
            n = a + (o + (t[e + 6] - o) * r - a) * r - i,
            i = t[e + 1],
            i += ((a = t[e + 3]) - i) * r,
            i += ((a += ((o = t[e + 5]) - a) * r) - i) * r,
            w(f(a + (o + (t[e + 7] - o) * r - a) * r - i, n) * c)
        }
        function D(t, e, r) {
            e = e || 0,
            t.samples || (t.samples = [],
            t.lookup = []);
            var n, i, a, o, s, l, c, h, u, f, v, g, y, _, x, b, w, S = ~~t.resolution || 12, T = 1 / S, M = r ? e + 6 * r + 1 : t.length, E = t[e], A = t[e + 1], P = e ? e / 6 * S : 0, C = t.samples, L = t.lookup, D = (e ? t.minLength : m) || m, R = C[P + r * S - 1], I = e ? C[P - 1] : 0;
            for (C.length = L.length = 0,
            i = e + 2; i < M; i += 6) {
                if (a = t[i + 4] - E,
                o = t[i + 2] - E,
                s = t[i] - E,
                h = t[i + 5] - A,
                u = t[i + 3] - A,
                f = t[i + 1] - A,
                l = c = v = g = 0,
                p(a) < 1e-5 && p(h) < 1e-5 && p(s) + p(f) < 1e-5)
                    t.length > 8 && (t.splice(i, 6),
                    i -= 6,
                    M -= 6);
                else
                    for (n = 1; n <= S; n++)
                        l = c - (c = ((_ = T * n) * _ * a + 3 * (y = 1 - _) * (_ * o + y * s)) * _),
                        v = g - (g = (_ * _ * h + 3 * y * (_ * u + y * f)) * _),
                        (b = d(v * v + l * l)) < D && (D = b),
                        I += b,
                        C[P++] = I;
                E += a,
                A += h
            }
            if (R)
                for (R -= I; P < C.length; P++)
                    C[P] += R;
            if (C.length && D)
                for (t.totalLength = w = C[C.length - 1] || 0,
                t.minLength = D,
                b = x = 0,
                n = 0; n < w; n += D)
                    L[b++] = C[x] < n ? ++x : x;
            else
                t.totalLength = C[0] = 0;
            return e ? I - C[e / 2 - 1] : I
        }
        function R(t, e) {
            var r, n, i;
            for (i = r = n = 0; i < t.length; i++)
                t[i].resolution = ~~e || 12,
                n += t[i].length,
                r += D(t[i]);
            return t.totalPoints = n,
            t.totalLength = r,
            t
        }
        function I(t, e, r) {
            if (r <= 0 || r >= 1)
                return 0;
            var n = t[e]
              , i = t[e + 1]
              , a = t[e + 2]
              , o = t[e + 3]
              , s = t[e + 4]
              , l = t[e + 5]
              , c = n + (a - n) * r
              , h = a + (s - a) * r
              , u = i + (o - i) * r
              , p = o + (l - o) * r
              , d = c + (h - c) * r
              , f = u + (p - u) * r
              , m = s + (t[e + 6] - s) * r
              , v = l + (t[e + 7] - l) * r;
            return h += (m - h) * r,
            p += (v - p) * r,
            t.splice(e + 2, 4, w(c), w(u), w(d), w(f), w(d + (h - d) * r), w(f + (p - f) * r), w(h), w(p), w(m), w(v)),
            t.samples && t.samples.splice(e / 6 * t.resolution | 0, 0, 0, 0, 0, 0, 0, 0),
            6
        }
        function k(t, e, r, n) {
            r = r || {},
            t.totalLength || R(t),
            (e < 0 || e > 1) && (e = b(e));
            var i, a, o, s, l, c, h, u = 0, p = t[0];
            if (e)
                if (1 === e)
                    h = 1,
                    c = (p = t[u = t.length - 1]).length - 8;
                else {
                    if (t.length > 1) {
                        for (o = t.totalLength * e,
                        l = c = 0; (l += t[c++].totalLength) < o; )
                            u = c;
                        e = (o - (s = l - (p = t[u]).totalLength)) / (l - s) || 0
                    }
                    i = p.samples,
                    a = p.resolution,
                    o = p.totalLength * e,
                    s = (c = p.lookup[~~(o / p.minLength)] || 0) ? i[c - 1] : 0,
                    (l = i[c]) < o && (s = l,
                    l = i[++c]),
                    h = 1 / a * ((o - s) / (l - s) + c % a),
                    c = 6 * ~~(c / a),
                    n && 1 === h && (c + 6 < p.length ? (c += 6,
                    h = 0) : u + 1 < t.length && (c = h = 0,
                    p = t[++u]))
                }
            else
                h = c = u = 0,
                p = t[0];
            return r.t = h,
            r.i = c,
            r.path = t,
            r.segment = p,
            r.segIndex = u,
            r
        }
        function O(t, e, r, n, i, a, o, s, c) {
            if (t !== s || e !== c) {
                r = p(r),
                n = p(n);
                var f = i % 360 * l
                  , m = u(f)
                  , v = h(f)
                  , g = Math.PI
                  , y = 2 * g
                  , _ = (t - s) / 2
                  , x = (e - c) / 2
                  , b = m * _ + v * x
                  , w = -v * _ + m * x
                  , S = b * b
                  , T = w * w
                  , M = S / (r * r) + T / (n * n);
                M > 1 && (r = d(M) * r,
                n = d(M) * n);
                var E = r * r
                  , A = n * n
                  , P = (E * A - E * T - A * S) / (E * T + A * S);
                P < 0 && (P = 0);
                var C = (a === o ? -1 : 1) * d(P)
                  , L = C * (r * w / n)
                  , D = C * (-n * b / r)
                  , R = (t + s) / 2 + (m * L - v * D)
                  , I = (e + c) / 2 + (v * L + m * D)
                  , k = (b - L) / r
                  , O = (w - D) / n
                  , F = (-b - L) / r
                  , N = (-w - D) / n
                  , B = k * k + O * O
                  , z = (O < 0 ? -1 : 1) * Math.acos(k / d(B))
                  , G = (k * N - O * F < 0 ? -1 : 1) * Math.acos((k * F + O * N) / d(B * (F * F + N * N)));
                isNaN(G) && (G = g),
                !o && G > 0 ? G -= y : o && G < 0 && (G += y),
                z %= y,
                G %= y;
                var H, U = Math.ceil(p(G) / (y / 4)), V = [], j = G / U, W = 4 / 3 * h(j / 2) / (1 + u(j / 2)), q = m * r, X = v * r, Y = v * -n, $ = m * n;
                for (H = 0; H < U; H++)
                    b = u(i = z + H * j),
                    w = h(i),
                    k = u(i += j),
                    O = h(i),
                    V.push(b - W * w, w + W * b, k + W * O, O - W * k, k, O);
                for (H = 0; H < V.length; H += 2)
                    b = V[H],
                    w = V[H + 1],
                    V[H] = b * q + w * Y + R,
                    V[H + 1] = b * X + w * $ + I;
                return V[H - 2] = s,
                V[H - 1] = c,
                V
            }
        }
        function F(t) {
            var e, r, n, a, s, l, c, h, u, d, f, m, v, g, y, _ = (t + "").replace(o, (function(t) {
                var e = +t;
                return e < 1e-4 && e > -1e-4 ? 0 : e
            }
            )).match(i) || [], x = [], b = 0, w = 0, S = 2 / 3, T = _.length, M = 0, E = "ERROR: malformed path: " + t, A = function(t, e, r, n) {
                d = (r - t) / 3,
                f = (n - e) / 3,
                c.push(t + d, e + f, r - d, n - f, r, n)
            };
            if (!t || !isNaN(_[0]) || isNaN(_[1]))
                return console.log(E),
                x;
            for (e = 0; e < T; e++)
                if (v = s,
                isNaN(_[e]) ? l = (s = _[e].toUpperCase()) !== _[e] : e--,
                n = +_[e + 1],
                a = +_[e + 2],
                l && (n += b,
                a += w),
                e || (h = n,
                u = a),
                "M" === s)
                    c && (c.length < 8 ? x.length -= 1 : M += c.length),
                    b = h = n,
                    w = u = a,
                    c = [n, a],
                    x.push(c),
                    e += 2,
                    s = "L";
                else if ("C" === s)
                    c || (c = [0, 0]),
                    l || (b = w = 0),
                    c.push(n, a, b + 1 * _[e + 3], w + 1 * _[e + 4], b += 1 * _[e + 5], w += 1 * _[e + 6]),
                    e += 6;
                else if ("S" === s)
                    d = b,
                    f = w,
                    "C" !== v && "S" !== v || (d += b - c[c.length - 4],
                    f += w - c[c.length - 3]),
                    l || (b = w = 0),
                    c.push(d, f, n, a, b += 1 * _[e + 3], w += 1 * _[e + 4]),
                    e += 4;
                else if ("Q" === s)
                    d = b + (n - b) * S,
                    f = w + (a - w) * S,
                    l || (b = w = 0),
                    b += 1 * _[e + 3],
                    w += 1 * _[e + 4],
                    c.push(d, f, b + (n - b) * S, w + (a - w) * S, b, w),
                    e += 4;
                else if ("T" === s)
                    d = b - c[c.length - 4],
                    f = w - c[c.length - 3],
                    c.push(b + d, w + f, n + (b + 1.5 * d - n) * S, a + (w + 1.5 * f - a) * S, b = n, w = a),
                    e += 2;
                else if ("H" === s)
                    A(b, w, b = n, w),
                    e += 1;
                else if ("V" === s)
                    A(b, w, b, w = n + (l ? w - b : 0)),
                    e += 1;
                else if ("L" === s || "Z" === s)
                    "Z" === s && (n = h,
                    a = u,
                    c.closed = !0),
                    ("L" === s || p(b - n) > .5 || p(w - a) > .5) && (A(b, w, n, a),
                    "L" === s && (e += 2)),
                    b = n,
                    w = a;
                else if ("A" === s) {
                    if (g = _[e + 4],
                    y = _[e + 5],
                    d = _[e + 6],
                    f = _[e + 7],
                    r = 7,
                    g.length > 1 && (g.length < 3 ? (f = d,
                    d = y,
                    r--) : (f = y,
                    d = g.substr(2),
                    r -= 2),
                    y = g.charAt(1),
                    g = g.charAt(0)),
                    m = O(b, w, +_[e + 1], +_[e + 2], +_[e + 3], +g, +y, (l ? b : 0) + 1 * d, (l ? w : 0) + 1 * f),
                    e += r,
                    m)
                        for (r = 0; r < m.length; r++)
                            c.push(m[r]);
                    b = c[c.length - 2],
                    w = c[c.length - 1]
                } else
                    console.log(E);
            return (e = c.length) < 6 ? (x.pop(),
            e = 0) : c[0] === c[e - 2] && c[1] === c[e - 1] && (c.closed = !0),
            x.totalPoints = M + e,
            x
        }
        function N(t, e, r, n, i) {
            var a, o, s, l, c, h, u, p, d, f, m, v, g = n, y = t[e], _ = t[e + 1], x = t[r], b = t[r + 1];
            for (o = e + 2; o < r; o += 2)
                l = t[o],
                c = t[o + 1],
                f = void 0,
                void 0,
                void 0,
                v = (d = b) - (u = _),
                ((m = (p = x) - (h = y)) || v) && ((f = ((l - h) * m + (c - u) * v) / (m * m + v * v)) > 1 ? (h = p,
                u = d) : f > 0 && (h += m * f,
                u += v * f)),
                (s = Math.pow(l - h, 2) + Math.pow(c - u, 2)) > g && (a = o,
                g = s);
            g > n && (a - e > 2 && N(t, e, a, n, i),
            i.push(t[a], t[a + 1]),
            r - a > 2 && N(t, a, r, n, i))
        }
        function B(t, e, r, i, a, o, s, l, c, h, u, p, d, f) {
            var v, g, y, _, x = (a - i) / o, b = 0, w = i;
            for (n = m; w <= a; )
                (v = (g = (_ = 1 - w) * _ * _ * s + 3 * _ * _ * w * c + 3 * _ * w * w * u + w * w * w * d - e) * g + (y = _ * _ * _ * l + 3 * _ * _ * w * h + 3 * _ * w * w * p + w * w * w * f - r) * y) < n && (n = v,
                b = w),
                w += x;
            return t > 1 ? B(t - 1, e, r, Math.max(b - x, 0), Math.min(b + x, 1), o, s, l, c, h, u, p, d, f) : b
        }
        function z(t) {
            g(t[0]) && (t = [t]);
            var e, r, n, i, a = "", o = t.length;
            for (r = 0; r < o; r++) {
                for (i = t[r],
                a += "M" + w(i[0]) + "," + w(i[1]) + " C",
                e = i.length,
                n = 2; n < e; n++)
                    a += w(i[n++]) + "," + w(i[n++]) + " " + w(i[n++]) + "," + w(i[n++]) + " " + w(i[n++]) + "," + w(i[n]) + " ";
                i.closed && (a += "z")
            }
            return a
        }
    }
    , {}],
    53: [function(t, e, r) {
        "use strict";
        function n(t, e) {
            (null == e || e > t.length) && (e = t.length);
            for (var r = 0, n = new Array(e); r < e; r++)
                n[r] = t[r];
            return n
        }
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.byWord = r.byLetter = void 0;
        var i = function(t, e) {
            var r = document.createElement("span");
            return r.textContent = t,
            r.style.setProperty("--index", e),
            r
        };
        r.byLetter = function(t) {
            return (e = t,
            function(t) {
                if (Array.isArray(t))
                    return n(t)
            }(e) || function(t) {
                if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"])
                    return Array.from(t)
            }(e) || function(t, e) {
                if (t) {
                    if ("string" == typeof t)
                        return n(t, e);
                    var r = Object.prototype.toString.call(t).slice(8, -1);
                    return "Object" === r && t.constructor && (r = t.constructor.name),
                    "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? n(t, e) : void 0
                }
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()).map(i);
            var e
        }
        ,
        r.byWord = function(t) {
            return t.split(" ").map(i)
        }
    }
    , {}],
    54: [function(t, e, r) {
        "use strict";
        var n = t("../core/properties")
          , i = t("three")
          , a = n.loader.ITEM_CLASSES.xhr;
        function o(t, e) {
            t && (e.responseType = "arraybuffer",
            s.constructor.apply(this, arguments))
        }
        e.exports = o,
        o.type = "buf",
        o.extensions = ["buf"];
        var s = a.prototype
          , l = o.prototype = new a;
        l.constructor = o,
        l._onLoad = function() {
            if (!this.content) {
                for (var t = this.xmlhttp.response, e = new Uint32Array(t,0,1)[0], r = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(t,4,e))), n = r.vertexCount, a = r.indexCount, o = 4 + e, l = new i.BufferGeometry, c = r.attributes, h = 0, u = c.length; h < u; h++) {
                    var p = c[h]
                      , d = p.id
                      , f = "indices" === d ? a : n
                      , m = p.componentSize
                      , v = window[p.storageType]
                      , g = new v(t,o,f * m)
                      , y = v.BYTES_PER_ELEMENT
                      , _ = void 0;
                    if (p.needsPack) {
                        var x = p.packedComponents
                          , b = x.length
                          , w = 1 << 8 * y
                          , S = 0 === p.storageType.indexOf("Int") ? .5 * w : 0
                          , T = 1 / w;
                        _ = new Float32Array(f * m);
                        for (var M = 0, E = 0; M < f; M++)
                            for (var A = 0; A < b; A++) {
                                var P = x[A];
                                _[E] = (g[E] + S) * T * P.delta + P.from,
                                E++
                            }
                    } else
                        _ = g;
                    "indices" === d ? l.setIndex(new i.BufferAttribute(_,1)) : l.setAttribute(d, new i.BufferAttribute(_,m)),
                    o += f * m * y
                }
                this.content = l
            }
            this.xmlhttp = void 0,
            s._onLoad.call(this)
        }
        ,
        o.retrieve = function() {
            return !1
        }
    }
    , {
        "../core/properties": 44,
        three: 38
    }],
    55: [function(t, e, r) {
        "use strict";
        var n, i = (n = t("../core/properties")) && n.__esModule ? n : {
            default: n
        }, a = t("three"), o = i.default.loader.ITEM_CLASSES.image, s = o.prototype.constructor;
        function l(t, e) {
            if (t) {
                var r = e.content || new a.Texture(new Image);
                switch (e.content = r.image,
                r.minFilter = e.minFilter || a.LinearMipMapLinearFilter,
                r.minFilter) {
                case a.NearestMipMapNearestFilter:
                case a.NearestMipMapLinearFilter:
                case a.LinearMipMapNearestFilter:
                case a.LinearMipMapLinearFilter:
                    r.generateMipmaps = !0,
                    r.anisotropy = e.anisotropy || i.default.renderer.capabilities.getMaxAnisotropy();
                    break;
                default:
                    r.generateMipmaps = !1
                }
                r.format = t.indexOf(".jpg") > -1 ? a.RGBFormat : a.RGBAFormat,
                r.flipY = void 0 === e.flipY || e.flipY,
                e.wrap ? r.wrapS = r.wrapT = e.wrap : (e.wrapS && (r.wrapS = e.wrapS),
                e.wrapT && (r.wrapT = e.wrapT)),
                c.constructor.apply(this, arguments),
                this.content = r
            }
        }
        e.exports = l,
        l.type = "texture",
        l.extensions = [];
        var c = o.prototype
          , h = l.prototype = new o;
        h.constructor = l,
        h.load = function() {
            s.prototype.load.apply(this, arguments);
            var t = this.content.image;
            t.onload = this.boundOnLoad,
            t.src = this.url
        }
        ,
        h._onLoad = function() {
            delete this.content.image.onload,
            this.width = this.content.image.width,
            this.height = this.content.image.height,
            this.content.needsUpdate = !0,
            s.prototype._onLoad.call(this)
        }
        ,
        l.retrieve = function() {
            return !1
        }
    }
    , {
        "../core/properties": 44,
        three: 38
    }],
    56: [function(t, e, r) {
        "use strict";
        var n = t("three");
        function i() {
            this.position = new n.Vector3,
            this.rotation = new n.Quaternion,
            this.scale = new n.Vector3(1,1,1),
            this.matrix = new n.Matrix4,
            this.enablePositionNoise = !0,
            this.enableRotationNoise = !0,
            this.positionFrequency = .25,
            this.rotationFrequency = .25,
            this.positionAmplitude = .3,
            this.rotationAmplitude = .003,
            this.positionScale = new n.Vector3(1,1,1),
            this.rotationScale = new n.Vector3(1,1,0),
            this.positionFractalLevel = 3,
            this.rotationFractalLevel = 3,
            this.times = new Float32Array(6),
            this.rehash()
        }
        e.exports = i;
        var a = i.prototype;
        a.rehash = function() {
            for (var t = 0; t < 6; t++)
                this.times[t] = -1e4 * Math.random()
        }
        ,
        a.update = function(t) {
            var e;
            if (t = void 0 === t ? 1e3 / 60 : t,
            this.enablePositionNoise) {
                for (e = 0; e < 3; e++)
                    this.times[e] += this.positionFrequency * t;
                s.set(h(this.times[0], this.positionFractalLevel), h(this.times[1], this.positionFractalLevel), h(this.times[2], this.positionFractalLevel)),
                s.multiply(this.positionScale),
                s.multiplyScalar(this.positionAmplitude * l),
                this.position.copy(s)
            }
            if (this.enableRotationNoise) {
                for (e = 0; e < 3; e++)
                    this.times[e + 3] += this.rotationFrequency * t;
                s.set(h(this.times[3], this.rotationFractalLevel), h(this.times[4], this.rotationFractalLevel), h(this.times[5], this.rotationFractalLevel)),
                s.multiply(this.rotationScale),
                s.multiplyScalar(this.rotationAmplitude * l),
                o.set(s.x, s.y, s.z),
                this.rotation.setFromEuler(o)
            }
            this.matrix.compose(this.position, this.rotation, this.scale)
        }
        ;
        var o = new n.Euler
          , s = new n.Vector3
          , l = 1 / .75
          , c = new function() {
            for (var t = 1, e = 1, r = [], n = 0; n < 256; ++n)
                r.push(Math.random() - .5);
            return {
                getVal: function(n) {
                    var i = n * e
                      , a = Math.floor(i)
                      , o = i - a
                      , s = o * o * (3 - 2 * o)
                      , l = 255 & a
                      , c = l + 1 & 255;
                    return function(t, e, r) {
                        return t * (1 - r) + e * r
                    }(r[l], r[c], s) * t
                },
                setAmplitude: function(e) {
                    t = e
                },
                setScale: function(t) {
                    e = t
                }
            }
        }
        ;
        function h(t, e) {
            for (var r = 0, n = .5, i = 0; i < e; i++)
                r += n * c.getVal(t),
                t *= 2,
                n *= .5;
            return r
        }
    }
    , {
        three: 38
    }],
    57: [function(t, e, r) {
        "use strict";
        var n = t("three")
          , i = t("mout/object/merge")
          , a = t("../helpers/fboHelper");
        function o(t) {
            i(this, {
                uniforms: {
                    u_texture: {},
                    u_resolution: {
                        value: null
                    },
                    u_fullResolution: {
                        value: null
                    },
                    u_isVR: {
                        value: !1
                    }
                },
                defines: {},
                enabled: !0,
                vertexShader: "",
                fragmentShader: "",
                isRawMaterial: !0,
                depthTest: !1,
                depthWrite: !1,
                blending: n.NoBlending,
                transparent: !0
            }, t),
            this.vertexShader || (this.vertexShader = a.vertexShader),
            this.addRawShaderPrefix && this.isRawMaterial && (this.vertexShader = a.precisionPrefix + this.vertexShader,
            this.fragmentShader = a.precisionPrefix + this.fragmentShader),
            this.material = new (this.isRawMaterial ? n.RawShaderMaterial : n.ShaderMaterial)({
                uniforms: this.uniforms,
                vertexShader: this.vertexShader,
                fragmentShader: this.fragmentShader,
                defines: this.defines,
                depthTest: this.depthTest,
                depthWrite: this.depthWrite,
                blending: this.blending,
                transparent: this.transparent
            })
        }
        e.exports = o;
        var s = o.prototype;
        s.setPostprocessing = function(t) {
            this.uniforms.u_resolution.value = t.resolution
        }
        ,
        s.dispose = function() {}
        ,
        s.needsRender = function() {
            return !0
        }
        ,
        s.render = function(t, e) {
            this.uniforms.u_texture.value = t.fromTexture,
            t.renderMaterial(this.material, e ? null : t.toRenderTarget),
            t.swap()
        }
    }
    , {
        "../helpers/fboHelper": 47,
        "mout/object/merge": 19,
        three: 38
    }],
    58: [function(t, e, r) {
        "use strict";
        var n = t("three")
          , i = t("../helpers/fboHelper")
          , a = t("min-signal");
        function o(t) {
            var e;
            l || r.init(),
            this.width = 1,
            this.height = 1,
            this.scene = null,
            this.camera = null,
            this.resolution = new n.Vector2(0,0),
            this.texelSize = new n.Vector2(0,0),
            this.onBeforeSceneRendered = new a,
            this.onAfterSceneRendered = new a,
            this.onAfterRendered = new a,
            this.sceneRenderTarget = i.createMultisampleRenderTarget(1, 1, !0),
            this.sceneRenderTarget.depthBuffer = !0,
            this.fromRenderTarget = i.createRenderTarget(1, 1, !0),
            this.toRenderTarget = this.fromRenderTarget.clone(),
            this.useDepthTexture = !!t && (i.renderer.capabilities.isWebGL2 || i.renderer.extensions.get("WEBGL_depth_texture")),
            this.fromTexture = this.fromRenderTarget.texture,
            this.toTexture = this.toRenderTarget.texture,
            this.sceneTexture = this.sceneRenderTarget.texture,
            this.mesh = new n.Mesh,
            this.queue = [],
            this.sharedUniforms = {
                u_sceneTexture: {
                    value: this.sceneRenderTarget.texture
                },
                u_sceneDepthTexture: {
                    value: null
                },
                u_cameraNear: {
                    value: 0
                },
                u_cameraFar: {
                    value: 1
                },
                u_cameraFovRad: {
                    value: 1
                },
                u_resolution: {
                    value: this.resolution
                },
                u_texelSize: {
                    value: this.texelSize
                }
            },
            this.useDepthTexture && ((e = new n.DepthTexture).type = n.UnsignedShortType,
            i.renderer.capabilities.isWebGL2 && (e.type = n.UnsignedIntType),
            e.minFilter = n.NearestFilter,
            e.magFilter = n.NearestFilter,
            i.renderer.capabilities.isWebGL2 || (e.format = n.DepthStencilFormat,
            e.type = n.UnsignedInt248Type),
            this.sceneRenderTarget.depthTexture = e,
            this.depthTexture = this.sharedUniforms.u_sceneDepthTexture.value = e)
        }
        var s = o.prototype;
        r = e.exports = o,
        s.swap = function() {
            var t = this.fromRenderTarget;
            this.fromRenderTarget = this.toRenderTarget,
            this.toRenderTarget = t,
            this.fromTexture = this.fromRenderTarget.texture,
            this.toTexture = this.toRenderTarget.texture
        }
        ,
        s.setSize = function(t, e) {
            this.width = t,
            this.height = e,
            this.resolution.set(t, e),
            this.texelSize.set(1 / t, 1 / e),
            this.sceneRenderTarget.setSize(t, e),
            this.fromRenderTarget.setSize(t, e),
            this.toRenderTarget.setSize(t, e)
        }
        ,
        s.dispose = function() {
            this.fromRenderTarget && this.fromRenderTarget.dispose(),
            this.toRenderTarget && this.toRenderTarget.dispose(),
            this.prevSceneRenderTarget && this.prevSceneRenderTarget.dispose(),
            this.sceneRenderTarget && this.sceneRenderTarget.dispose()
        }
        ,
        s.renderMaterial = function(t, e) {
            this.mesh.material = t,
            i.renderMesh(this.mesh, e)
        }
        ,
        s.render = function(t, e, r) {
            this.scene = t,
            this.camera = e,
            this.mesh.geometry = i.renderer.xr.enabled ? c : l;
            var n, a = this.queue.filter(h), o = this.sharedUniforms;
            if (o.u_sceneTexture.value = this.sceneRenderTarget.texture,
            o.u_cameraNear.value = e.near,
            o.u_cameraFar.value = e.far,
            o.u_cameraFovRad.value = e.fov / 180 * Math.PI,
            this.onBeforeSceneRendered.dispatch(),
            a.length) {
                i.renderer.setRenderTarget(this.sceneRenderTarget),
                i.renderer.render(t, e),
                i.renderer.setRenderTarget(null),
                i.copy(this.sceneRenderTarget.texture, this.fromRenderTarget),
                this.onAfterSceneRendered.dispatch(this.sceneRenderTarget);
                var s = i.getColorState();
                i.renderer.autoClear = !1;
                for (var u = 0, p = a.length; u < p; u++) {
                    var d = u === p - 1 && r;
                    (n = a[u]).setPostprocessing(this),
                    n.render(this, d)
                }
                i.setColorState(s)
            } else
                i.renderer.render(t, e),
                this.onAfterSceneRendered.dispatch();
            this.onAfterRendered.dispatch()
        }
        ;
        var l = r.geom = null
          , c = r.vrGeom = null;
        function h(t) {
            return t.enabled && t.needsRender()
        }
        r.init = function() {
            (l = r.geom = r.geom || new n.BufferGeometry).setAttribute("position", new n.BufferAttribute(new Float32Array([-1, -1, 0, 4, -1, 0, -1, 4, 0]),3)),
            l.setAttribute("a_uvClamp", new n.BufferAttribute(new Float32Array([0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1]),4)),
            (c = r.vrGeom = r.vrGeom || new n.BufferGeometry).setAttribute("position", new n.BufferAttribute(new Float32Array([-4, -1, 0, 0, -1, 0, 0, 4, 0, 0, -1, 0, 4, -1, 0, 0, 4, 0]),3)),
            c.setAttribute("a_uvClamp", new n.BufferAttribute(new Float32Array([0, 0, .5, 1, 0, 0, .5, 1, 0, 0, .5, 1, .5, 0, 1, 1, .5, 0, 1, 1, .5, 0, 1, 1]),4))
        }
    }
    , {
        "../helpers/fboHelper": 47,
        "min-signal": 5,
        three: 38
    }],
    59: [function(t, e, r) {
        "use strict";
        var n = t("../PostEffect")
          , i = t("../../helpers/fboHelper")
          , a = t("../../utils/math")
          , o = t("mout/object/merge")
          , s = t("three")
          , l = t("glslify");
        function c(t) {
            var e = (t = o({
                useHighPass: !0,
                ITERATION: 5,
                amount: 4,
                radius: .1,
                threshold: .2,
                smoothWidth: 1
            }, t)).ITERATION;
            this.directionX = new s.Vector2(1,0),
            this.directionY = new s.Vector2(0,1);
            var r = this.highPassRenderTarget = i.createRenderTarget(1, 1, !0);
            this.renderTargetsHorizontal = [],
            this.renderTargetsVertical = [],
            this.blurMaterials = [];
            for (var n = 0; n < e; n++)
                this.renderTargetsHorizontal.push(r.clone()),
                this.renderTargetsVertical.push(r.clone());
            for (var a = {
                u_bloomStrength: {
                    value: 1
                },
                u_bloomWeights: {
                    value: []
                }
            }, c = 0; c < e; c++)
                a["u_blurTexture" + c] = {
                    value: this.renderTargetsVertical[c].texture
                };
            h.constructor.call(this, o({
                uniforms: a,
                defines: {
                    ITERATION: e
                },
                fragmentShader: i.precisionPrefix + l(["#define GLSLIFY 1\nvarying vec2 v_uv;\nuniform sampler2D u_texture;\n\nuniform sampler2D u_blurTexture0;\n#if ITERATION > 1\nuniform sampler2D u_blurTexture1;\n#endif\n#if ITERATION > 2\nuniform sampler2D u_blurTexture2;\n#endif\n#if ITERATION > 3\nuniform sampler2D u_blurTexture3;\n#endif\n#if ITERATION > 4\nuniform sampler2D u_blurTexture4;\n#endif\nuniform float u_bloomWeights[ITERATION];\n\n#include <common>\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\nvoid main() {\n\tvec4 c = texture2D(u_texture, v_uv);\n\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\tfloat v = dot( c.xyz, luma );\n\tfloat a = 1.0 - v;//max(0.0, 1.2 - v);//mix(1.0, 0.1, v);\n\n\tgl_FragColor = c + (\n\t\tu_bloomWeights[0] * texture2D(u_blurTexture0, v_uv)\n\t\t#if ITERATION > 1\n\t\t+ u_bloomWeights[1] * texture2D(u_blurTexture1, v_uv)\n\t\t#endif\n\t\t#if ITERATION > 2\n\t\t+ u_bloomWeights[2] * texture2D(u_blurTexture2, v_uv)\n\t\t#endif\n\t\t#if ITERATION > 3\n\t\t+ u_bloomWeights[3] * texture2D(u_blurTexture3, v_uv)\n\t\t#endif\n\t\t#if ITERATION > 4\n\t\t+ u_bloomWeights[4] * texture2D(u_blurTexture4, v_uv)\n\t\t#endif\n\t) * a;\n\n    gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\tgl_FragColor.a = 1.0;\n}\n"]),
                blending: s.NoBlending
            }, t)),
            this.highPassMaterial = new s.RawShaderMaterial({
                uniforms: {
                    u_texture: {
                        value: null
                    },
                    u_luminosityThreshold: {
                        value: 1
                    },
                    u_smoothWidth: {
                        value: 1
                    }
                },
                vertexShader: i.precisionPrefix + i.vertexShader,
                fragmentShader: i.precisionPrefix + l(["#define GLSLIFY 1\nuniform sampler2D u_texture;\n\nuniform float u_luminosityThreshold;\nuniform float u_smoothWidth;\n\nvarying vec2 v_uv;\n\nvoid main() {\n\n  vec4 texel = texture2D( u_texture, v_uv );\n\n  vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n  float v = dot( texel.xyz, luma );\n\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 1.0);\n\n  float alpha = smoothstep( u_luminosityThreshold, u_luminosityThreshold + u_smoothWidth, v );\n\n  outputColor = mix( outputColor, texel, alpha );\n\n  gl_FragColor = vec4(outputColor.rgb, 1.0);\n\n}\n"])
            });
            for (var u = 0; u < this.ITERATION; u++) {
                var p = 3 + 2 * u;
                this.blurMaterials[u] = new s.RawShaderMaterial({
                    uniforms: {
                        u_texture: {
                            value: null
                        },
                        u_resolution: {
                            value: new s.Vector2
                        },
                        u_direction: {
                            value: null
                        }
                    },
                    vertexShader: i.precisionPrefix + i.vertexShader,
                    fragmentShader: i.precisionPrefix + l(["#define GLSLIFY 1\nvarying vec2 v_uv;\nuniform sampler2D u_texture;\nuniform vec2 u_resolution;\nuniform vec2 u_direction;\n\nfloat gaussianPdf(in float x, in float sigma) {\n  return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n}\nvoid main() {\n  vec2 invSize = 1.0 / u_resolution;\n  float fSigma = float(SIGMA);\n  float weightSum = gaussianPdf(0.0, fSigma);\n  vec3 diffuseSum = texture2D( u_texture, v_uv).rgb * weightSum;\n  for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n    float x = float(i);\n    float w = gaussianPdf(x, fSigma);\n    vec2 uvOffset = u_direction * invSize * x;\n    vec3 sample1 = texture2D( u_texture, v_uv + uvOffset).rgb;\n    vec3 sample2 = texture2D( u_texture, v_uv - uvOffset).rgb;\n    diffuseSum += (sample1 + sample2) * w;\n    weightSum += 2.0 * w;\n  }\n  gl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n}\n"]),
                    defines: {
                        KERNEL_RADIUS: p,
                        SIGMA: p
                    }
                })
            }
        }
        var h = n.prototype
          , u = c.prototype = Object.create(h);
        u.constructor = c,
        u.setPostprocessing = function(t) {
            h.setPostprocessing.call(this, t);
            var e = t.width
              , r = t.height
              , n = Math.ceil(e / 2)
              , i = Math.ceil(r / 2);
            this.highPassRenderTarget.setSize(n, i);
            for (var a = 0; a < this.ITERATION; a++)
                this.renderTargetsHorizontal[a].setSize(n, i),
                this.renderTargetsVertical[a].setSize(n, i),
                this.blurMaterials[a].uniforms.u_resolution.value = new s.Vector2(n,i),
                n = Math.ceil(n / 2),
                i = Math.ceil(i / 2)
        }
        ,
        u.dispose = function() {
            this.highPassRenderTarget && this.highPassRenderTarget.dispose();
            for (var t = 0; t < this.ITERATION; t++)
                this.renderTargetsHorizontal[t] && this.renderTargetsHorizontal[t].dispose(),
                this.renderTargetsVertical[t] && this.renderTargetsVertical[t].dispose()
        }
        ,
        u.needsRender = function() {
            return !!this.amount
        }
        ,
        u.render = function(t, e) {
            var r = this.ITERATION;
            this.useHighPass && (this.highPassMaterial.uniforms.u_texture.value = t.fromTexture,
            this.highPassMaterial.uniforms.u_luminosityThreshold.value = this.threshold,
            this.highPassMaterial.uniforms.u_smoothWidth.value = this.smoothWidth,
            t.renderMaterial(this.highPassMaterial, this.highPassRenderTarget));
            for (var n = this.useHighPass ? this.highPassRenderTarget : t.fromRenderTarget, i = 0; i < r; i++) {
                var o = this.blurMaterials[i];
                o.uniforms.u_texture.value = n.texture,
                o.uniforms.u_direction.value = this.directionX,
                t.renderMaterial(o, this.renderTargetsHorizontal[i]),
                o.uniforms.u_texture.value = this.renderTargetsHorizontal[i].texture,
                o.uniforms.u_direction.value = this.directionY,
                t.renderMaterial(o, this.renderTargetsVertical[i]),
                n = this.renderTargetsVertical[i]
            }
            this.material.uniforms.u_texture.value = t.fromTexture;
            for (var s = 0; s < r; s++) {
                var l = (r - s) / r;
                this.uniforms.u_bloomWeights.value[s] = this.amount * a.mix(l, 1.2 - l, this.radius) / Math.pow(2, r - s - 1)
            }
            h.render.call(this, t, e)
        }
        ,
        e.exports = c
    }
    , {
        "../../helpers/fboHelper": 47,
        "../../utils/math": 70,
        "../PostEffect": 57,
        glslify: 3,
        "mout/object/merge": 19,
        three: 38
    }],
    60: [function(t, e, r) {
        "use strict";
        var n = t("../PostEffect")
          , i = t("../../helpers/fboHelper")
          , a = (t("../../utils/math"),
        t("mout/object/mixIn"))
          , o = t("glslify")
          , s = t("three");
        function l(t) {
            t = a({
                fNumber: 2,
                focusDistance: 1,
                useCameraFov: !1,
                focalLength: .3,
                kFilmHeight: 36,
                quality: 1,
                _prevQuality: -1,
                useFloatTexture: !1,
                _prevUseFloatTexture: null,
                useAdditionalBlur: !0,
                _halfWidth: 0,
                _halfHeight: 0
            }, t),
            this.sharedUniforms = {
                u_depthTexture: {
                    value: null
                },
                u_texelSize: {
                    value: null
                },
                u_focusDistance: {
                    value: 0
                },
                u_fNumber: {
                    value: 0
                },
                u_lensCoeff: {
                    value: 0
                },
                u_maxCoC: {
                    value: 0
                },
                u_rcpMaxCoC: {
                    value: 0
                },
                u_rcpAspect: {
                    value: 0
                },
                u_cameraNear: {
                    value: 0
                },
                u_cameraFar: {
                    value: 0
                },
                u_halfTexelSize: {
                    value: new s.Vector2
                }
            },
            this.rt2 = i.createRenderTarget(1, 1, !0),
            this.rt3 = i.createRenderTarget(1, 1, !0),
            this.cocMaterial = new s.RawShaderMaterial({
                uniforms: {
                    u_texture: {
                        value: null
                    },
                    u_hashNoise: {
                        value: 0
                    },
                    u_depthTexture: this.sharedUniforms.u_depthTexture,
                    u_texelSize: this.sharedUniforms.u_texelSize,
                    u_focusDistance: this.sharedUniforms.u_focusDistance,
                    u_lensCoeff: this.sharedUniforms.u_lensCoeff,
                    u_maxCoC: this.sharedUniforms.u_maxCoC,
                    u_rcpMaxCoC: this.sharedUniforms.u_rcpMaxCoC,
                    u_cameraNear: this.sharedUniforms.u_cameraNear,
                    u_cameraFar: this.sharedUniforms.u_cameraFar
                },
                vertexShader: i.precisionPrefix + i.vertexShader,
                fragmentShader: i.precisionPrefix + o(["#define GLSLIFY 1\nuniform sampler2D u_texture;\nuniform sampler2D u_depthTexture;\nuniform vec2 u_texelSize;\nuniform float u_focusDistance;\nuniform float u_lensCoeff;\nuniform float u_maxCoC;\nuniform float u_rcpMaxCoC;\nuniform float u_cameraNear;\nuniform float u_cameraFar;\n\nvarying vec2 v_uv;\n\n// Max between three components\nfloat max3(vec3 xyz) { return max(xyz.x, max(xyz.y, xyz.z)); }\n\n#ifndef USE_FLOAT\nuniform float u_hashNoise;\nfloat hash13(vec3 p3) {\n\tp3  = fract(p3 * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.x + p3.y) * p3.z);\n}\n#endif\n\n// Fragment shader: Downsampling, prefiltering and CoC calculation\nfloat getViewZ (vec2 uv) {\n\tfloat depth = texture2D(u_depthTexture, uv).r * 2.0 - 1.0;\n\treturn 2.0 * u_cameraNear * u_cameraFar / (u_cameraFar + u_cameraNear - depth * (u_cameraFar - u_cameraNear));\n}\n\nvoid main () {\n    // Sample source colors.\n    vec3 duv = u_texelSize.xyx * vec3(0.5, 0.5, -0.5);\n    vec3 c0 = texture2D(u_texture, v_uv - duv.xy).rgb;\n    vec3 c1 = texture2D(u_texture, v_uv - duv.zy).rgb;\n    vec3 c2 = texture2D(u_texture, v_uv + duv.zy).rgb;\n    vec3 c3 = texture2D(u_texture, v_uv + duv.xy).rgb;\n\n    // Sample linear depths.\n\tvec2 uvAlt = v_uv; // yFlippedUV? https://github.com/keijiro/KinoBokeh/blob/master/Assets/Kino/Bokeh/Shader/Common.cginc\n    float d0 = getViewZ(uvAlt - duv.xy);\n    float d1 = getViewZ(uvAlt - duv.zy);\n    float d2 = getViewZ(uvAlt + duv.zy);\n    float d3 = getViewZ(uvAlt + duv.xy);\n    vec4 depths = vec4(d0, d1, d2, d3);\n\n    // Calculate the radiuses of CoCs at these sample points.\n    float focusDistance = u_focusDistance;\n    // focusDistance = getViewZ(vec2(0.5));\n    \n\n    vec4 cocs = (depths - focusDistance) * u_lensCoeff / depths;\n    cocs = clamp(cocs, -u_maxCoC, u_maxCoC);\n\n    // Premultiply CoC to reduce background bleeding.\n    vec4 weights = clamp(abs(cocs) * u_rcpMaxCoC, vec4(0.0), vec4(1.0));\n\n// #if defined(PREFILTER_LUMA_WEIGHT)\n    // Apply luma weights to reduce flickering.\n    // Inspired by goo.gl/j1fhLe goo.gl/mfuZ4h\n    weights.x *= 1.0 / (max3(c0) + 1.0);\n    weights.y *= 1.0 / (max3(c1) + 1.0);\n    weights.z *= 1.0 / (max3(c2) + 1.0);\n    weights.w *= 1.0 / (max3(c3) + 1.0);\n// #endif\n\n    // Weighted average of the color samples\n    vec3 avg = c0 * weights.x + c1 * weights.y + c2 * weights.z + c3 * weights.w;\n    avg /= dot(weights, vec4(1.0));\n\n    // Output CoC = average of CoCs\n    float coc = dot(cocs, vec4(0.25));\n\n    // Premultiply CoC again.\n    avg *= smoothstep(0.0, u_texelSize.y * 2.0, abs(coc));\n\n    gl_FragColor = vec4(avg, coc);\n    #ifndef USE_FLOAT\n    gl_FragColor = sign(gl_FragColor) * sqrt(abs(gl_FragColor));\n    gl_FragColor = gl_FragColor * 0.5 + 0.5 + hash13(vec3(gl_FragCoord.xy, u_hashNoise)) / 255.0;\n    #endif\n}"])
            }),
            this.simMaterial = new s.RawShaderMaterial({
                uniforms: {
                    u_cocTexture: {
                        value: null
                    },
                    u_cocTexelSize: this.sharedUniforms.u_halfTexelSize,
                    u_rcpAspect: this.sharedUniforms.u_rcpAspect,
                    u_maxCoC: this.sharedUniforms.u_maxCoC
                },
                vertexShader: i.precisionPrefix + i.vertexShader,
                fragmentShader: i.precisionPrefix + o(["#define GLSLIFY 1\n#if QUALITY == 0\n\n// rings = 2\n// points per ring = 5\nconst int kSampleCount = 16;\nvec2 kDiskKernel[kSampleCount];\n\nvoid initKernel () {\n    kDiskKernel[0] = vec2(0.0,0.0);\n    kDiskKernel[1] = vec2(0.54545456,0.0);\n    kDiskKernel[2] = vec2(0.16855472,0.5187581);\n    kDiskKernel[3] = vec2(-0.44128203,0.3206101);\n    kDiskKernel[4] = vec2(-0.44128197,-0.3206102);\n    kDiskKernel[5] = vec2(0.1685548,-0.5187581);\n    kDiskKernel[6] = vec2(1.0,0.0);\n    kDiskKernel[7] = vec2(0.809017,0.58778524);\n    kDiskKernel[8] = vec2(0.30901697,0.95105654);\n    kDiskKernel[9] = vec2(-0.30901703,0.9510565);\n    kDiskKernel[10] = vec2(-0.80901706,0.5877852);\n    kDiskKernel[11] = vec2(-1.0,0.0);\n    kDiskKernel[12] = vec2(-0.80901694,-0.58778536);\n    kDiskKernel[13] = vec2(-0.30901664,-0.9510566);\n    kDiskKernel[14] = vec2(0.30901712,-0.9510565);\n    kDiskKernel[15] = vec2(0.80901694,-0.5877853);\n}\n\n#endif\n\n#if QUALITY == 1\n\n// rings = 3\n// points per ring = 7\nconst int kSampleCount = 22;\nvec2 kDiskKernel[kSampleCount];\n\nvoid initKernel () {\n    kDiskKernel[0] = vec2(0.0,0.0);\n    kDiskKernel[1] = vec2(0.53333336,0.0);\n    kDiskKernel[2] = vec2(0.3325279,0.4169768);\n    kDiskKernel[3] = vec2(-0.11867785,0.5199616);\n    kDiskKernel[4] = vec2(-0.48051673,0.2314047);\n    kDiskKernel[5] = vec2(-0.48051673,-0.23140468);\n    kDiskKernel[6] = vec2(-0.11867763,-0.51996166);\n    kDiskKernel[7] = vec2(0.33252785,-0.4169769);\n    kDiskKernel[8] = vec2(1.0,0.0);\n    kDiskKernel[9] = vec2(0.90096885,0.43388376);\n    kDiskKernel[10] = vec2(0.6234898,0.7818315);\n    kDiskKernel[11] = vec2(0.22252098,0.9749279);\n    kDiskKernel[12] = vec2(-0.22252095,0.9749279);\n    kDiskKernel[13] = vec2(-0.62349,0.7818314);\n    kDiskKernel[14] = vec2(-0.90096885,0.43388382);\n    kDiskKernel[15] = vec2(-1.0,0.0);\n    kDiskKernel[16] = vec2(-0.90096885,-0.43388376);\n    kDiskKernel[17] = vec2(-0.6234896,-0.7818316);\n    kDiskKernel[18] = vec2(-0.22252055,-0.974928);\n    kDiskKernel[19] = vec2(0.2225215,-0.9749278);\n    kDiskKernel[20] = vec2(0.6234897,-0.7818316);\n    kDiskKernel[21] = vec2(0.90096885,-0.43388376);\n}\n\n#endif\n\n#if QUALITY == 2\n\n// rings = 4\n// points per ring = 7\nconst int kSampleCount = 43;\nvec2 kDiskKernel[kSampleCount];\n\nvoid initKernel () {\n    kDiskKernel[0] = vec2(0.0,0.0);\n    kDiskKernel[1] = vec2(0.36363637,0.0);\n    kDiskKernel[2] = vec2(0.22672357,0.28430238);\n    kDiskKernel[3] = vec2(-0.08091671,0.35451925);\n    kDiskKernel[4] = vec2(-0.32762504,0.15777594);\n    kDiskKernel[5] = vec2(-0.32762504,-0.15777591);\n    kDiskKernel[6] = vec2(-0.08091656,-0.35451928);\n    kDiskKernel[7] = vec2(0.22672352,-0.2843024);\n    kDiskKernel[8] = vec2(0.6818182,0.0);\n    kDiskKernel[9] = vec2(0.614297,0.29582983);\n    kDiskKernel[10] = vec2(0.42510667,0.5330669);\n    kDiskKernel[11] = vec2(0.15171885,0.6647236);\n    kDiskKernel[12] = vec2(-0.15171883,0.6647236);\n    kDiskKernel[13] = vec2(-0.4251068,0.53306687);\n    kDiskKernel[14] = vec2(-0.614297,0.29582986);\n    kDiskKernel[15] = vec2(-0.6818182,0);\n    kDiskKernel[16] = vec2(-0.614297,-0.29582983);\n    kDiskKernel[17] = vec2(-0.42510656,-0.53306705);\n    kDiskKernel[18] = vec2(-0.15171856,-0.66472363);\n    kDiskKernel[19] = vec2(0.1517192,-0.6647235);\n    kDiskKernel[20] = vec2(0.4251066,-0.53306705);\n    kDiskKernel[21] = vec2(0.614297,-0.29582983);\n    kDiskKernel[22] = vec2(1.0,0.0);\n    kDiskKernel[23] = vec2(0.9555728,0.2947552);\n    kDiskKernel[24] = vec2(0.82623875,0.5633201);\n    kDiskKernel[25] = vec2(0.6234898,0.7818315);\n    kDiskKernel[26] = vec2(0.36534098,0.93087375);\n    kDiskKernel[27] = vec2(0.07473,0.9972038);\n    kDiskKernel[28] = vec2(-0.22252095,0.9749279);\n    kDiskKernel[29] = vec2(-0.50000006,0.8660254);\n    kDiskKernel[30] = vec2(-0.73305196,0.6801727);\n    kDiskKernel[31] = vec2(-0.90096885,0.43388382);\n    kDiskKernel[32] = vec2(-0.98883086,0.14904208);\n    kDiskKernel[33] = vec2(-0.9888308,-0.14904249);\n    kDiskKernel[34] = vec2(-0.90096885,-0.43388376);\n    kDiskKernel[35] = vec2(-0.73305184,-0.6801728);\n    kDiskKernel[36] = vec2(-0.4999999,-0.86602545);\n    kDiskKernel[37] = vec2(-0.222521,-0.9749279);\n    kDiskKernel[38] = vec2(0.07473029,-0.99720377);\n    kDiskKernel[39] = vec2(0.36534148,-0.9308736);\n    kDiskKernel[40] = vec2(0.6234897,-0.7818316);\n    kDiskKernel[41] = vec2(0.8262388,-0.56332);\n    kDiskKernel[42] = vec2(0.9555729,-0.29475483);\n}\n\n#endif\n\n#if QUALITY == 3\n\n// rings = 5\n// points per ring = 7\nconst int kSampleCount = 71;\nvec2 kDiskKernel[kSampleCount];\n\nvoid initKernel () {\n    kDiskKernel[0] = vec2(0,0);\n    kDiskKernel[1] = vec2(0.2758621,0.0);\n    kDiskKernel[2] = vec2(0.1719972,0.21567768);\n    kDiskKernel[3] = vec2(-0.061385095,0.26894566);\n    kDiskKernel[4] = vec2(-0.24854316,0.1196921);\n    kDiskKernel[5] = vec2(-0.24854316,-0.11969208);\n    kDiskKernel[6] = vec2(-0.061384983,-0.2689457);\n    kDiskKernel[7] = vec2(0.17199717,-0.21567771);\n    kDiskKernel[8] = vec2(0.51724136,0.0);\n    kDiskKernel[9] = vec2(0.46601835,0.22442262);\n    kDiskKernel[10] = vec2(0.32249472,0.40439558);\n    kDiskKernel[11] = vec2(0.11509705,0.50427306);\n    kDiskKernel[12] = vec2(-0.11509704,0.50427306);\n    kDiskKernel[13] = vec2(-0.3224948,0.40439552);\n    kDiskKernel[14] = vec2(-0.46601835,0.22442265);\n    kDiskKernel[15] = vec2(-0.51724136,0.0);\n    kDiskKernel[16] = vec2(-0.46601835,-0.22442262);\n    kDiskKernel[17] = vec2(-0.32249463,-0.40439564);\n    kDiskKernel[18] = vec2(-0.11509683,-0.5042731);\n    kDiskKernel[19] = vec2(0.11509732,-0.504273);\n    kDiskKernel[20] = vec2(0.32249466,-0.40439564);\n    kDiskKernel[21] = vec2(0.46601835,-0.22442262);\n    kDiskKernel[22] = vec2(0.7586207,0.0);\n    kDiskKernel[23] = vec2(0.7249173,0.22360738);\n    kDiskKernel[24] = vec2(0.6268018,0.4273463);\n    kDiskKernel[25] = vec2(0.47299224,0.59311354);\n    kDiskKernel[26] = vec2(0.27715522,0.7061801);\n    kDiskKernel[27] = vec2(0.056691725,0.75649947);\n    kDiskKernel[28] = vec2(-0.168809,0.7396005);\n    kDiskKernel[29] = vec2(-0.3793104,0.65698475);\n    kDiskKernel[30] = vec2(-0.55610836,0.51599306);\n    kDiskKernel[31] = vec2(-0.6834936,0.32915324);\n    kDiskKernel[32] = vec2(-0.7501475,0.113066405);\n    kDiskKernel[33] = vec2(-0.7501475,-0.11306671);\n    kDiskKernel[34] = vec2(-0.6834936,-0.32915318);\n    kDiskKernel[35] = vec2(-0.5561083,-0.5159932);\n    kDiskKernel[36] = vec2(-0.37931028,-0.6569848);\n    kDiskKernel[37] = vec2(-0.16880904,-0.7396005);\n    kDiskKernel[38] = vec2(0.056691945,-0.7564994);\n    kDiskKernel[39] = vec2(0.2771556,-0.7061799);\n    kDiskKernel[40] = vec2(0.47299215,-0.59311366);\n    kDiskKernel[41] = vec2(0.62680185,-0.4273462);\n    kDiskKernel[42] = vec2(0.72491735,-0.22360711);\n    kDiskKernel[43] = vec2(1.0,0.0);\n    kDiskKernel[44] = vec2(0.9749279,0.22252093);\n    kDiskKernel[45] = vec2(0.90096885,0.43388376);\n    kDiskKernel[46] = vec2(0.7818315,0.6234898);\n    kDiskKernel[47] = vec2(0.6234898,0.7818315);\n    kDiskKernel[48] = vec2(0.43388364,0.9009689);\n    kDiskKernel[49] = vec2(0.22252098,0.9749279);\n    kDiskKernel[50] = vec2(0.0,1.0);\n    kDiskKernel[51] = vec2(-0.22252095,0.9749279);\n    kDiskKernel[52] = vec2(-0.43388385,0.90096885);\n    kDiskKernel[53] = vec2(-0.62349,0.7818314);\n    kDiskKernel[54] = vec2(-0.7818317,0.62348956);\n    kDiskKernel[55] = vec2(-0.90096885,0.43388382);\n    kDiskKernel[56] = vec2(-0.9749279,0.22252093);\n    kDiskKernel[57] = vec2(-1.0,0.0);\n    kDiskKernel[58] = vec2(-0.9749279,-0.22252087);\n    kDiskKernel[59] = vec2(-0.90096885,-0.43388376);\n    kDiskKernel[60] = vec2(-0.7818314,-0.6234899);\n    kDiskKernel[61] = vec2(-0.6234896,-0.7818316);\n    kDiskKernel[62] = vec2(-0.43388346,-0.900969);\n    kDiskKernel[63] = vec2(-0.22252055,-0.974928);\n    kDiskKernel[64] = vec2(0.0,-1.0);\n    kDiskKernel[65] = vec2(0.2225215,-0.9749278);\n    kDiskKernel[66] = vec2(0.4338835,-0.90096897);\n    kDiskKernel[67] = vec2(0.6234897,-0.7818316);\n    kDiskKernel[68] = vec2(0.78183144,-0.62348986);\n    kDiskKernel[69] = vec2(0.90096885,-0.43388376);\n    kDiskKernel[70] = vec2(0.9749279,-0.22252086);\n}\n\n#endif\n\nuniform sampler2D u_cocTexture;\nuniform vec2 u_cocTexelSize;\n\n// Camera parameters\nuniform float u_rcpAspect;\nuniform float u_maxCoC;\n// uniform float u_rcpMaxCoC;\n\nvarying vec2 v_uv;\n\nvoid main () {\n\tinitKernel();\n\n\tvec4 samp0 = texture2D(u_cocTexture, v_uv);\n    #ifndef USE_FLOAT\n    samp0 = samp0 * 2.0 - 1.0;\n    samp0 = sign(samp0) * samp0 * samp0;\n    #endif\n\n    vec4 bgAcc = vec4(0.0); // Background: far field bokeh\n    vec4 fgAcc = vec4(0.0); // Foreground: near field bokeh\n\n    for (int si = 0; si < kSampleCount; si++) {\n        vec2 disp = kDiskKernel[si] * u_maxCoC;\n        float dist = length(disp);\n\n        vec2 duv = vec2(disp.x * u_rcpAspect, disp.y);\n        vec4 samp = texture2D(u_cocTexture, v_uv + duv);\n        #ifndef USE_FLOAT\n        samp = samp * 2.0 - 1.0;\n        samp = sign(samp) * samp * samp;\n        #endif\n\n        // BG: Compare CoC of the current sample and the center sample\n        // and select smaller one.\n        float bgCoC = max(min(samp0.a, samp.a), 0.0);\n\n        // Compare the CoC to the sample distance.\n        // Add a small margin to smooth out.\n        float margin = u_cocTexelSize.y * 2.0;\n        float bgWeight = clamp((bgCoC   - dist + margin) / margin, 0.0, 1.0);\n        float fgWeight = clamp((-samp.a - dist + margin) / margin, 0.0, 1.0);\n\n        // Cut influence from focused areas because they're darkened by CoC\n        // premultiplying. This is only needed for near field.\n        fgWeight *= step(u_cocTexelSize.y, -samp.a);\n\n        // Accumulation\n        bgAcc += vec4(samp.rgb, 1.0) * bgWeight;\n        fgAcc += vec4(samp.rgb, 1.0) * fgWeight;\n    }\n\n    // Get the weighted average.\n    // bgAcc.rgb /= bgAcc.a + (bgAcc.a == 0); // zero-div guard\n    // fgAcc.rgb /= fgAcc.a + (fgAcc.a == 0);\n    bgAcc.rgb /= bgAcc.a + step(bgAcc.a, 0.0); // zero-div guard\n    fgAcc.rgb /= fgAcc.a + step(fgAcc.a, 0.0);\n\n    // BG: Calculate the alpha value only based on the center CoC.\n    // This is a rather aggressive approximation but provides stable results.\n    bgAcc.a = smoothstep(u_cocTexelSize.y, u_cocTexelSize.y * 2.0, samp0.a);\n\n    // FG: Normalize the total of the weights.\n    fgAcc.a *= 3.14159265359 / float(kSampleCount);\n\n    // Alpha premultiplying\n    vec3 rgb = vec3(0.0);\n    rgb = mix(rgb, bgAcc.rgb, clamp(bgAcc.a, 0.0, 1.0));\n    rgb = mix(rgb, fgAcc.rgb, clamp(fgAcc.a, 0.0, 1.0));\n\n    // Combined alpha value\n    float alpha = (1.0 - clamp(bgAcc.a, 0.0, 1.0)) * (1.0 - clamp(fgAcc.a, 0.0, 1.0));\n\n    gl_FragColor = vec4(rgb, alpha);\n}"])
            }),
            this.blurMaterial = new s.RawShaderMaterial({
                uniforms: {
                    u_bokehTexture: {
                        value: null
                    },
                    u_bokehTexelSize: this.sharedUniforms.u_halfTexelSize
                },
                vertexShader: i.precisionPrefix + i.vertexShader,
                fragmentShader: i.precisionPrefix + o(["#define GLSLIFY 1\nuniform sampler2D u_bokehTexture;\nuniform vec2 u_bokehTexelSize;\n\nvarying vec2 v_uv;\n\nvoid main () {\n    // 9-tap tent filter\n    vec4 duv = u_bokehTexelSize.xyxy * vec4(1.0, 1.0, -1.0, 0.0);\n    vec4 acc;\n\n    acc  = texture2D(u_bokehTexture, v_uv - duv.xy);\n    acc += texture2D(u_bokehTexture, v_uv - duv.wy) * 2.0;\n    acc += texture2D(u_bokehTexture, v_uv - duv.zy);\n\n    acc += texture2D(u_bokehTexture, v_uv + duv.zw) * 2.0;\n    acc += texture2D(u_bokehTexture, v_uv ) * 4.0;\n    acc += texture2D(u_bokehTexture, v_uv + duv.xw) * 2.0;\n\n    acc += texture2D(u_bokehTexture, v_uv + duv.zy);\n    acc += texture2D(u_bokehTexture, v_uv + duv.wy) * 2.0;\n    acc += texture2D(u_bokehTexture, v_uv + duv.xy);\n\n    gl_FragColor = acc * 0.0625;\n}"])
            }),
            c.constructor.call(this, a({
                uniforms: {
                    u_blurTexture: {
                        value: null
                    }
                },
                fragmentShader: i.precisionPrefix + o(["#define GLSLIFY 1\nvarying vec2 v_uv;\nuniform sampler2D u_texture;\nuniform sampler2D u_blurTexture;\nvoid main() {\n\tvec4 cs = texture2D(u_texture, v_uv);\n\tvec4 cb = texture2D(u_blurTexture, v_uv);\n\tvec3 rgb = cs.rgb * cb.a + cb.rgb;\n\n\tgl_FragColor =  vec4(rgb, cs.a);\n}\n"]),
                blending: s.NoBlending
            }, t))
        }
        var c = n.prototype
          , h = l.prototype = Object.create(c);
        h.constructor = l,
        h.setPostprocessing = function(t) {
            c.setPostprocessing.call(this, t);
            var e = t.width
              , r = t.height
              , n = Math.ceil(e / 2)
              , i = Math.ceil(r / 2);
            this._halfWidth = n,
            this._halfHeight = i,
            this.rt1 && this.rt1.setSize(n, i),
            this.rt2.setSize(n, i),
            this.rt3.setSize(n, i),
            this.sharedUniforms.u_halfTexelSize.value.set(1 / n, 1 / i)
        }
        ,
        h.dispose = function() {
            this.rt1 && this.rt1.dispose(),
            this.rt2.dispose(),
            this.rt3.dispose()
        }
        ,
        h.needsRender = function() {
            return !0
        }
        ,
        h.render = function(t, e) {
            var r, n, a, o = this._prevQuality !== this.quality, l = this._prevUseFloatTexture !== this.useFloatTexture, h = this.useCameraFov ? (a = t.sharedUniforms.u_cameraFovRad.value,
            .5 * t.camera.getFilmHeight() / Math.tan(.5 * a)) : this.focalLength, u = this.focusDistance, p = this.fNumber, d = h * h / (p * (u - h) * this.kFilmHeight * 2), f = (r = t.height,
            n = 4 * this.quality + 6,
            Math.min(.05, n / r));
            this.sharedUniforms.u_texelSize.value = t.sharedUniforms.u_texelSize.value,
            this.sharedUniforms.u_depthTexture.value = t.sharedUniforms.u_sceneDepthTexture.value,
            this.sharedUniforms.u_cameraNear.value = t.sharedUniforms.u_cameraNear.value,
            this.sharedUniforms.u_cameraFar.value = t.sharedUniforms.u_cameraFar.value,
            this.sharedUniforms.u_focusDistance.value = u,
            this.sharedUniforms.u_fNumber.value = p,
            this.sharedUniforms.u_lensCoeff.value = d,
            this.sharedUniforms.u_maxCoC.value = f,
            this.sharedUniforms.u_rcpMaxCoC.value = 1 / f,
            this.sharedUniforms.u_rcpAspect.value = t.height / t.width,
            l && (this.rt1 && this.rt1.dispose(),
            this.rt1 = i.createRenderTarget(this._halfWidth, this._halfHeight, !0, !1, this.useFloatTexture)),
            t.fromTexture.minFilter = t.fromTexture.magFilter = s.NearestFilter,
            l && (this.cocMaterial.defines.USE_FLOAT = this.useFloatTexture,
            this.cocMaterial.needsUpdate = !0),
            this.cocMaterial.uniforms.u_hashNoise.value = (this.cocMaterial.uniforms.u_hashNoise.value + 1.2415) % 100,
            this.cocMaterial.uniforms.u_texture.value = t.fromTexture,
            t.renderMaterial(this.cocMaterial, this.rt1),
            t.fromTexture.minFilter = t.fromTexture.magFilter = s.LinearFilter,
            this.simMaterial.defines.QUALITY = this.quality,
            this.simMaterial.uniforms.u_cocTexture.value = this.rt1.texture,
            o && (this.simMaterial.needsUpdate = !0),
            l && (this.simMaterial.defines.USE_FLOAT = this.useFloatTexture,
            this.simMaterial.needsUpdate = !0),
            t.renderMaterial(this.simMaterial, this.rt2),
            this.useAdditionalBlur && (this.blurMaterial.uniforms.u_bokehTexture.value = this.rt2.texture,
            t.renderMaterial(this.blurMaterial, this.rt3)),
            this.material.uniforms.u_blurTexture.value = this.useAdditionalBlur ? this.rt3.texture : this.rt2.texture,
            this._prevQuality = this.quality,
            this._prevUseFloatTexture = this.useFloatTexture,
            c.render.call(this, t, e, t.fromTexture)
        }
        ,
        e.exports = l
    }
    , {
        "../../helpers/fboHelper": 47,
        "../../utils/math": 70,
        "../PostEffect": 57,
        glslify: 3,
        "mout/object/mixIn": 20,
        three: 38
    }],
    61: [function(t, e, r) {
        "use strict";
        var n = t("../PostEffect")
          , i = t("../../helpers/fboHelper")
          , a = (t("../../utils/math"),
        t("mout/object/merge"))
          , o = t("../../effects/blur/blur")
          , s = t("glslify")
          , l = t("three");
        function c(t) {
            t = a({
                bgColor: new l.Color(0),
                vignetteFrom: .6,
                vignetteTo: 1.6,
                vignetteAspect: new l.Vector2,
                vignetteColor: new l.Color(0),
                saturation: 1,
                contrast: 0,
                brightness: 1,
                tintColor: new l.Color(0),
                tintOpacity: 1,
                opacity: 1
            }, t),
            h.constructor.call(this, a({
                uniforms: {
                    u_vignetteFrom: {
                        value: 0
                    },
                    u_vignetteTo: {
                        value: 0
                    },
                    u_vignetteAspect: {
                        value: t.vignetteAspect
                    },
                    u_vignetteColor: {
                        value: t.vignetteColor
                    },
                    u_saturation: {
                        value: 0
                    },
                    u_contrast: {
                        value: 0
                    },
                    u_brightness: {
                        value: 0
                    },
                    u_tintColor: {
                        value: t.tintColor
                    },
                    u_tintOpacity: {
                        value: 0
                    },
                    u_bgColor: {
                        value: t.bgColor
                    },
                    u_opacity: {
                        value: 0
                    },
                    u_ditherSeed: {
                        value: 0
                    }
                },
                fragmentShader: i.precisionPrefix + s(["#define GLSLIFY 1\nvarying vec2 v_uv;\nuniform sampler2D u_texture;\nuniform vec3 u_bgColor;\nuniform float u_opacity;\n\nuniform float u_vignetteFrom;\nuniform float u_vignetteTo;\nuniform vec2 u_vignetteAspect;\nuniform vec3 u_vignetteColor;\n\nuniform float u_saturation;\nuniform float u_contrast;\nuniform float u_brightness;\n\nuniform vec3 u_tintColor;\nuniform float u_tintOpacity;\nuniform float u_ditherSeed;\n\nfloat hash13(vec3 p3) {\n\tp3  = fract(p3 * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nvec3 screen (vec3 cb, vec3 cs) {\n\treturn cb + cs - (cb * cs);\n}\n\nvec3 colorDodge (vec3 cb, vec3 cs) {\n\treturn mix(\n\t\tmin(vec3(1.0), cb / (1.0 - cs)),\n\t\tvec3(1.0),\n\t\tstep(vec3(1.0), cs)\n\t);\n}\nvoid main() {\n\tvec2 uv = v_uv;\n\tvec3 color = texture2D(u_texture, uv).rgb;\n\n\tfloat d = length((uv - 0.5) * u_vignetteAspect) * 2.0;\n\tcolor = mix(color, u_vignetteColor, smoothstep(u_vignetteFrom, u_vignetteTo, d));\n\n\tfloat luma = dot(color, vec3(0.299, 0.587, 0.114));\n\n\tcolor = mix(vec3(luma), color, 1.0 + u_saturation);\n\tcolor = 0.5 + (1.0 + u_contrast) * (color - 0.5);\n\tcolor += u_brightness;\n\n\t// linear dodge add\n\tcolor = mix(color, screen(colorDodge(color, u_tintColor), u_tintColor), u_tintOpacity);\n\t\n\tgl_FragColor = vec4(mix(u_bgColor, color, u_opacity) + hash13(vec3(gl_FragCoord.xy, u_ditherSeed)) / 255.0, 1.0);\n}\n"]),
                blending: l.NoBlending
            }, t))
        }
        e.exports = c;
        var h = n.prototype
          , u = c.prototype = Object.create(h);
        u.constructor = c,
        u.needsRender = function() {
            return !0
        }
        ,
        u.render = function(t, e) {
            var r = t.width
              , n = t.height;
            this.uniforms.u_vignetteFrom.value = this.vignetteFrom,
            this.uniforms.u_vignetteTo.value = this.vignetteTo,
            this.uniforms.u_vignetteAspect.value.set(r / n, 1).multiplyScalar(n / Math.sqrt(r * r + n * n)),
            this.uniforms.u_saturation.value = this.saturation - 1,
            this.uniforms.u_contrast.value = this.contrast,
            this.uniforms.u_brightness.value = this.brightness - 1,
            this.uniforms.u_tintOpacity.value = this.tintOpacity,
            this.uniforms.u_opacity.value = this.opacity,
            this.uniforms.u_ditherSeed.value = 1e3 * Math.random(),
            this.material.uniforms.u_texture.value = t.fromTexture,
            t.renderMaterial(this.material, t.toRenderTarget);
            var a = 1 - this.opacity;
            a > 0 && (a = a / t.camera.zoom * n / 1200,
            o.blur(2 * a, .5, t.toRenderTarget),
            o.blur(4 * a, .25, t.toRenderTarget),
            o.blur(8 * a, .25, t.toRenderTarget)),
            i.copy(t.toRenderTarget.texture)
        }
    }
    , {
        "../../effects/blur/blur": 46,
        "../../helpers/fboHelper": 47,
        "../../utils/math": 70,
        "../PostEffect": 57,
        glslify: 3,
        "mout/object/merge": 19,
        three: 38
    }],
    62: [function(t, e, r) {
        "use strict";
        var n = t("../../helpers/fboHelper")
          , i = t("../PostEffect")
          , a = t("mout/object/merge")
          , o = t("three")
          , s = t("glslify");
        function l(t) {
            t = a({}, t),
            this.edgesRenderTarget = n.createRenderTarget(1, 1),
            this.weightsRenderTarget = n.createRenderTarget(1, 1, !0),
            this.uResolutionInv = {
                value: new o.Vector2
            },
            c.constructor.call(this, a({
                uniforms: {
                    u_weightsTexture: {
                        value: this.weightsRenderTarget.texture
                    },
                    u_resolutionInv: this.uResolutionInv
                },
                vertexShader: n.precisionPrefix + s(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform vec2 u_resolutionInv;\n\nvarying vec2 v_uv;\nvarying vec4 v_offsets[ 2 ];\n\nvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n  v_offsets[ 0 ] = texcoord.xyxy + u_resolutionInv.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component\n  v_offsets[ 1 ] = texcoord.xyxy + u_resolutionInv.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n}\n\nvoid main() {\n\tv_uv = position.xy * 0.5 + 0.5;\n\n  SMAANeighborhoodBlendingVS( v_uv );\n\n  // gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = vec4( position, 1.0 );\n\n}\n"]),
                fragmentShader: n.precisionPrefix + s(["#define GLSLIFY 1\nuniform sampler2D u_weightsTexture;\nuniform sampler2D u_texture;\nuniform vec2 u_resolutionInv;\n\nvarying vec2 v_uv;\nvarying vec4 v_offsets[ 2 ];\n\nvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n  // Fetch the blending weights for current pixel:\n  vec4 a;\n  a.xz = texture2D( blendTex, texcoord ).xz;\n  a.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n  a.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n  // Is there any blending weight with a value greater than 0.0?\n  if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n    return texture2D( colorTex, texcoord, 0.0 );\n  } else {\n    // Up to 4 lines can be crossing a pixel (one through each edge). We\n    // favor blending by choosing the line with the maximum weight for each\n    // direction:\n    vec2 offset;\n    offset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n    offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n    // Then we go in the direction that has the maximum weight:\n    if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n      offset.y = 0.0;\n    } else {\n      offset.x = 0.0;\n    }\n\n    // Fetch the opposite color and lerp by hand:\n    vec4 C = texture2D( colorTex, texcoord, 0.0 );\n    texcoord += sign( offset ) * u_resolutionInv;\n    vec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n    float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n    // WebGL port note: Added gamma correction\n    C.xyz = pow(abs(C.xyz), vec3(2.2));\n    Cop.xyz = pow(abs(Cop.xyz), vec3(2.2));\n    vec4 mixed = mix(C, Cop, s);\n    mixed.xyz = pow(abs(mixed.xyz), vec3(1.0 / 2.2));\n\n    return mixed;\n  }\n}\n\nvoid main() {\n\n  gl_FragColor = SMAANeighborhoodBlendingPS( v_uv, v_offsets, u_texture, u_weightsTexture );\n}\n"])
            }, t)),
            this.edgesMaterial = new o.RawShaderMaterial({
                uniforms: {
                    u_texture: {
                        value: null
                    },
                    u_resolutionInv: this.uResolutionInv
                },
                vertexShader: n.precisionPrefix + s(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform vec2 u_resolutionInv;\n\nvarying vec2 v_uv;\nvarying vec4 v_offsets[ 3 ];\n\nvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n  v_offsets[ 0 ] = texcoord.xyxy + u_resolutionInv.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component\n  v_offsets[ 1 ] = texcoord.xyxy + u_resolutionInv.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n  v_offsets[ 2 ] = texcoord.xyxy + u_resolutionInv.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component\n}\n\nvoid main() {\n\n\tv_uv = position.xy * 0.5 + 0.5;\n\n  SMAAEdgeDetectionVS( v_uv );\n\n  // gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = vec4( position, 1.0 );\n\n}\n"]),
                fragmentShader: n.precisionPrefix + s(["#define GLSLIFY 1\nuniform sampler2D u_texture;\n\nvarying vec2 v_uv;\nvarying vec4 v_offsets[ 3 ];\n\nvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n  vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n  // Calculate color deltas:\n  vec4 delta;\n  vec3 C = texture2D( colorTex, texcoord ).rgb;\n\n  vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n  vec3 t = abs( C - Cleft );\n  delta.x = max( max( t.r, t.g ), t.b );\n\n  vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n  t = abs( C - Ctop );\n  delta.y = max( max( t.r, t.g ), t.b );\n\n  // We do the usual threshold:\n  vec2 edges = step( threshold, delta.xy );\n\n  // Then discard if there is no edge:\n  if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n    discard;\n\n  // Calculate right and bottom deltas:\n  vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n  t = abs( C - Cright );\n  delta.z = max( max( t.r, t.g ), t.b );\n\n  vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n  t = abs( C - Cbottom );\n  delta.w = max( max( t.r, t.g ), t.b );\n\n  // Calculate the maximum delta in the direct neighborhood:\n  float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n  // Calculate left-left and top-top deltas:\n  vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n  t = abs( C - Cleftleft );\n  delta.z = max( max( t.r, t.g ), t.b );\n\n  vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n  t = abs( C - Ctoptop );\n  delta.w = max( max( t.r, t.g ), t.b );\n\n  // Calculate the final maximum delta:\n  maxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n  // Local contrast adaptation in action:\n  edges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n  return vec4( edges, 0.0, 0.0 );\n}\n\nvoid main() {\n\n  gl_FragColor = SMAAColorEdgeDetectionPS( v_uv, v_offsets, u_texture );\n\n}\n"]),
                defines: {
                    SMAA_THRESHOLD: "0.1"
                },
                blending: o.NoBlending,
                depthTest: !1,
                depthWrite: !1
            }),
            this.weightsMaterial = new o.RawShaderMaterial({
                uniforms: {
                    u_edgesTexture: {
                        value: this.edgesRenderTarget.texture
                    },
                    u_areaTexture: u.u_areaTexture,
                    u_searchTexture: u.u_searchTexture,
                    u_resolutionInv: this.uResolutionInv
                },
                vertexShader: n.precisionPrefix + s(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform vec2 u_resolutionInv;\n\nvarying vec2 v_uv;\nvarying vec4 v_offsets[ 3 ];\nvarying vec2 v_pixcoord;\n\nvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n  v_pixcoord = texcoord / u_resolutionInv;\n\n  // We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n  v_offsets[ 0 ] = texcoord.xyxy + u_resolutionInv.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components\n  v_offsets[ 1 ] = texcoord.xyxy + u_resolutionInv.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components\n\n  // And these for the searches, they indicate the ends of the loops:\n  v_offsets[ 2 ] = vec4( v_offsets[ 0 ].xz, v_offsets[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * u_resolutionInv.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n\n}\n\nvoid main() {\n\tv_uv = position.xy * 0.5 + 0.5;\n\n  SMAABlendingWeightCalculationVS( v_uv );\n\n  // gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = vec4( position, 1.0 );\n\n}\n"]),
                fragmentShader: n.precisionPrefix + s(["#define GLSLIFY 1\n#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * u_resolutionInv, 0.0 )\n\nuniform sampler2D u_edgesTexture;\nuniform sampler2D u_areaTexture;\nuniform sampler2D u_searchTexture;\nuniform vec2 u_resolutionInv;\n\nvarying vec2 v_uv;\nvarying vec4 v_offsets[3];\nvarying vec2 v_pixcoord;\n\nvec2 round( vec2 x ) {\n  return sign( x ) * floor( abs( x ) + 0.5 );\n}\n\nfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n  // Not required if searchTex accesses are set to point:\n  // float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n  // e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n  //     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n  e.r = bias + e.r * scale;\n  return 255.0 * texture2D( searchTex, e, 0.0 ).r;\n}\n\nfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  /**\n  * @PSEUDO_GATHER4\n  * This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n  * sample between edge, thus fetching four edges in a row.\n  * Sampling with different offsets in each direction allows to disambiguate\n  * which edges are active from the four fetched ones.\n  */\n  vec2 e = vec2( 0.0, 1.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord -= vec2( 2.0, 0.0 ) * u_resolutionInv;\n    if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n  }\n\n  // We correct the previous (-0.25, -0.125) offset we applied:\n  texcoord.x += 0.25 * u_resolutionInv.x;\n\n  // The searches are bias by 1, so adjust the coords accordingly:\n  texcoord.x += u_resolutionInv.x;\n\n  // Disambiguate the length added by the last step:\n  texcoord.x += 2.0 * u_resolutionInv.x; // Undo last step\n  texcoord.x -= u_resolutionInv.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n  return texcoord.x;\n}\n\nfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  vec2 e = vec2( 0.0, 1.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord += vec2( 2.0, 0.0 ) * u_resolutionInv;\n    if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n  }\n\n  texcoord.x -= 0.25 * u_resolutionInv.x;\n  texcoord.x -= u_resolutionInv.x;\n  texcoord.x -= 2.0 * u_resolutionInv.x;\n  texcoord.x += u_resolutionInv.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n  return texcoord.x;\n}\n\nfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  vec2 e = vec2( 1.0, 0.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord += vec2( 0.0, 2.0 ) * u_resolutionInv; // WebGL port note: Changed sign\n    if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n  }\n\n  texcoord.y -= 0.25 * u_resolutionInv.y; // WebGL port note: Changed sign\n  texcoord.y -= u_resolutionInv.y; // WebGL port note: Changed sign\n  texcoord.y -= 2.0 * u_resolutionInv.y; // WebGL port note: Changed sign\n  texcoord.y += u_resolutionInv.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign\n\n  return texcoord.y;\n}\n\nfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n  vec2 e = vec2( 1.0, 0.0 );\n\n  for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n    e = texture2D( edgesTex, texcoord, 0.0 ).rg;\n    texcoord -= vec2( 0.0, 2.0 ) * u_resolutionInv; // WebGL port note: Changed sign\n    if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n  }\n\n  texcoord.y += 0.25 * u_resolutionInv.y; // WebGL port note: Changed sign\n  texcoord.y += u_resolutionInv.y; // WebGL port note: Changed sign\n  texcoord.y += 2.0 * u_resolutionInv.y; // WebGL port note: Changed sign\n  texcoord.y -= u_resolutionInv.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign\n\n  return texcoord.y;\n}\n\nvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n  // Rounding prevents precision errors of bilinear filtering:\n  vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n  // We do a scale and bias for mapping to texel space:\n  texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n  // Move to proper place, according to the subpixel offset:\n  texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n  return texture2D( areaTex, texcoord, 0.0 ).rg;\n}\n\nvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n  vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n  vec2 e = texture2D( edgesTex, texcoord ).rg;\n\n  if ( e.g > 0.0 ) { // Edge at north\n    vec2 d;\n\n    // Find the distance to the left:\n    vec2 coords;\n    coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n    coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * u_resolutionInv.y (@CROSSING_OFFSET)\n    d.x = coords.x;\n\n    // Now fetch the left crossing edges, two at a time using bilinear\n    // filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n    // discern what value each edge has:\n    float e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n    // Find the distance to the right:\n    coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n    d.y = coords.x;\n\n    // We want the distances to be in pixel units (doing this here allow to\n    // better interleave arithmetic and memory accesses):\n    d = d / u_resolutionInv.x - pixcoord.x;\n\n    // SMAAArea below needs a sqrt, as the areas texture is compressed\n    // quadratically:\n    vec2 sqrt_d = sqrt( abs( d ) );\n\n    // Fetch the right crossing edges:\n    coords.y -= 1.0 * u_resolutionInv.y; // WebGL port note: Added\n    float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n    // Ok, we know how this pattern looks like, now it is time for getting\n    // the actual area:\n    weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n  }\n\n  if ( e.r > 0.0 ) { // Edge at west\n    vec2 d;\n\n    // Find the distance to the top:\n    vec2 coords;\n\n    coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n    coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * u_resolutionInv.x;\n    d.x = coords.y;\n\n    // Fetch the top crossing edges:\n    float e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n    // Find the distance to the bottom:\n    coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n    d.y = coords.y;\n\n    // We want the distances to be in pixel units:\n    d = d / u_resolutionInv.y - pixcoord.y;\n\n    // SMAAArea below needs a sqrt, as the areas texture is compressed\n    // quadratically:\n    vec2 sqrt_d = sqrt( abs( d ) );\n\n    // Fetch the bottom crossing edges:\n    coords.y -= 1.0 * u_resolutionInv.y; // WebGL port note: Added\n    float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n    // Get the area for this direction:\n    weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n  }\n\n  return weights;\n}\n\nvoid main() {\n\n  gl_FragColor = SMAABlendingWeightCalculationPS( v_uv, v_pixcoord, v_offsets, u_edgesTexture, u_areaTexture, u_searchTexture, ivec4( 0.0 ) );\n\n}\n"]),
                defines: {
                    SMAA_MAX_SEARCH_STEPS: "8",
                    SMAA_AREATEX_MAX_DISTANCE: "16",
                    SMAA_AREATEX_PIXEL_SIZE: "( 1.0 / vec2( 160.0, 560.0 ) )",
                    SMAA_AREATEX_SUBTEX_SIZE: "( 1.0 / 7.0 )"
                },
                transparent: !0,
                blending: o.NoBlending,
                depthTest: !1,
                depthWrite: !1
            })
        }
        var c = i.prototype
          , h = l.prototype = Object.create(c);
        h.constructor = l,
        h.setPostprocessing = function(t) {
            c.setPostprocessing.call(this, t);
            var e = t.width
              , r = t.height;
            this.edgesRenderTarget.setSize(e, r),
            this.weightsRenderTarget.setSize(e, r),
            this.uResolutionInv.value.set(1 / e, 1 / r)
        }
        ,
        h.dispose = function() {
            this.edgesRenderTarget && this.edgesRenderTarget.dispose(),
            this.weightsRenderTarget && this.weightsRenderTarget.dispose()
        }
        ,
        h.needsRender = function() {
            return !u.u_areaTexture.value.needsUpdate
        }
        ,
        h.render = function(t, e) {
            var r = n.getColorState();
            u.u_searchTexture.value || console.warn("You need to use Smaa.setImages() to set the smaa textures manually and assign to this class.");
            var i = n.renderer;
            i.autoClear = !0,
            i.setClearColor(0, 0),
            this.edgesMaterial.uniforms.u_texture.value = t.fromTexture,
            t.renderMaterial(this.edgesMaterial, this.edgesRenderTarget, !0),
            t.renderMaterial(this.weightsMaterial, this.weightsRenderTarget, !0),
            n.setColorState(r),
            this.material.uniforms.u_texture.value = t.fromTexture,
            c.render.call(this, t, e)
        }
        ,
        (r = e.exports = l).setTextures = function(t, e) {
            var r;
            (r = u.u_areaTexture.value = p(t)).format = o.RGBFormat,
            r.minFilter = o.LinearFilter,
            (r = u.u_searchTexture.value = p(e)).magFilter = o.NearestFilter,
            r.minFilter = o.NearestFilter
        }
        ,
        r.updateTextures = function() {
            u.u_areaTexture.value.needsUpdate = !0,
            u.u_searchTexture.value.needsUpdate = !0
        }
        ;
        var u = {
            u_areaTexture: {
                value: null
            },
            u_searchTexture: {
                value: null
            }
        };
        function p(t) {
            var e = new o.Texture(t);
            return e.generateMipmaps = !1,
            e.flipY = !1,
            e
        }
    }
    , {
        "../../helpers/fboHelper": 47,
        "../PostEffect": 57,
        glslify: 3,
        "mout/object/merge": 19,
        three: 38
    }],
    63: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.About = void 0;
        var n = t("../constants")
          , i = t("gsap");
        function a(t, e) {
            for (var r = 0; r < e.length; r++) {
                var n = e[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(t, n.key, n)
            }
        }
        var o = t("../../libs/gsap/CustomEase").default
          , s = t("../../core/properties")
          , l = (t("../../core/settings"),
        function() {
            function t() {
                var e = this;
                !function(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                this._about = document.getElementById("about"),
                this._aboutCloseBtn = document.getElementById("about-exit--close-btn"),
                this._aboutStar = document.getElementById("about-star"),
                this._aboutExploreBtn = document.querySelector(".explore-btn"),
                this._aboutExploreBtnArrow = document.querySelector(".explore-btn--arrow"),
                this._aboutExploreBtnText = document.querySelector(".explore-btn--text"),
                this.tlFadeIn = i.gsap.timeline({
                    paused: !0
                }),
                this.tlFadeOut = i.gsap.timeline({
                    paused: !0
                }),
                this.tlHover = i.gsap.timeline({
                    paused: !0
                }),
                this._aboutExploreBtn.addEventListener("mouseenter", (function() {
                    return e._onMouseEnter()
                }
                ), !1),
                this._aboutExploreBtn.addEventListener("mouseleave", (function() {
                    return e._onMouseLeave()
                }
                ), !1)
            }
            var e, r;
            return e = t,
            (r = [{
                key: "preInit",
                value: function() {
                    var t = this;
                    s.statusSignal.add((function(e) {
                        e === n.STATUS.ABOUT ? t._show() : t._hide()
                    }
                    )),
                    this._aboutCloseBtn.onclick = function(e) {
                        return t._onClickClose(e)
                    }
                }
            }, {
                key: "init",
                value: function() {}
            }, {
                key: "_show",
                value: function() {
                    this._about.style.display = "inline-block",
                    this.tlFadeIn.set(this._aboutStar, {
                        y: -40
                    }).to(this._about, {
                        opacity: 1
                    }).to(this._aboutStar, {
                        y: 0,
                        duration: .3,
                        ease: "Power3.EaseInOut"
                    }).fromTo(this._aboutExploreBtn, {
                        opacity: 0,
                        y: 20
                    }, {
                        opacity: 1,
                        y: 0
                    }),
                    this.tlFadeIn.play()
                }
            }, {
                key: "_hide",
                value: function() {
                    var t = this;
                    this.tlFadeOut.to(this._aboutStar, {
                        y: -40,
                        duration: .3,
                        ease: "Power3.EaseInOut"
                    }).to(this._about, {
                        opacity: 0
                    }),
                    this.tlFadeOut.play(),
                    setTimeout((function() {
                        t._about.style.display = "none"
                    }
                    ), 2e3)
                }
            }, {
                key: "_onClickClose",
                value: function(t) {
                    s.statusSignal.dispatch(n.STATUS.EXPLORE)
                }
            }, {
                key: "_onMouseEnter",
                value: function() {
                    this.tlHover.to(this._aboutExploreBtnArrow, {
                        x: 30,
                        duration: 1,
                        ease: o.create("easeCubic", "0.42, 0, 0, 0.99")
                    }, 0).to(this._aboutExploreBtnText, {
                        x: 35,
                        duration: .85,
                        ease: o.create("easeCubic", "0.42, 0, 0, 0.99")
                    }, .2),
                    this.tlHover.play()
                }
            }, {
                key: "_onMouseLeave",
                value: function() {
                    this.tlHover.pause(),
                    this.tlHover.reverse()
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "resize",
                value: function() {}
            }]) && a(e.prototype, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t
        }());
        r.About = l
    }
    , {
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../../libs/gsap/CustomEase": 51,
        "../constants": 67,
        gsap: 4
    }],
    64: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.Explore = void 0;
        var n = t("../constants")
          , i = t("gsap");
        function a(t, e) {
            for (var r = 0; r < e.length; r++) {
                var n = e[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(t, n.key, n)
            }
        }
        var o = t("../../core/properties")
          , s = t("../../core/settings")
          , l = function() {
            function t() {
                !function(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                this._explore = document.getElementById("explore"),
                this._star = document.getElementById("star"),
                this.tlFadeIn = i.gsap.timeline({
                    paused: !0
                })
            }
            var e, r;
            return e = t,
            (r = [{
                key: "preInit",
                value: function() {
                    var t = this;
                    o.statusSignal.add((function(e) {
                        e === n.STATUS.EXPLORE && t._show()
                    }
                    )),
                    this._star.onclick = function(e) {
                        return t.onClickStar(e)
                    }
                }
            }, {
                key: "init",
                value: function() {}
            }, {
                key: "_show",
                value: function() {
                    this._explore.style.pointerEvents = "auto",
                    s.SKIP_ANIMATION ? this._explore.style.opacity = 1 : this.tlFadeIn.to(this._explore, {
                        opacity: 1
                    }),
                    this.tlFadeIn.play()
                }
            }, {
                key: "onClickStar",
                value: function(t) {
                    o.statusSignal.dispatch(n.STATUS.ABOUT)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "resize",
                value: function() {}
            }]) && a(e.prototype, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t
        }();
        r.Explore = l
    }
    , {
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../constants": 67,
        gsap: 4
    }],
    65: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.OnBoarding = void 0;
        var n = t("../constants")
          , i = t("gsap");
        function a(t, e) {
            for (var r = 0; r < e.length; r++) {
                var n = e[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(t, n.key, n)
            }
        }
        var o = t("../../core/properties")
          , s = t("../../core/settings")
          , l = (t("../../core/browser"),
        function() {
            function t() {
                !function(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                this._onboarding = document.getElementById("onboarding"),
                this._onboardingCinematicBars = document.querySelectorAll(".onboarding-cinematic-bar"),
                this._onboardingStep1 = document.querySelectorAll(".step1"),
                this._onboardingStep2 = document.querySelectorAll(".step2"),
                this._onboardingStep3 = document.querySelector(".step3"),
                this.tlFadeIn = i.gsap.timeline({
                    paused: !0
                }),
                this.tlFadeOut = i.gsap.timeline({
                    paused: !0
                })
            }
            var e, r;
            return e = t,
            (r = [{
                key: "preInit",
                value: function() {
                    var t = this;
                    s.SKIP_ANIMATION ? (this._hide(),
                    this._onboarding.style.display = "none") : o.statusSignal.add((function(e) {
                        e === n.STATUS.ONBOARDING ? t._show() : t._hide()
                    }
                    ))
                }
            }, {
                key: "init",
                value: function() {}
            }, {
                key: "_show",
                value: function() {
                    this.tlFadeIn.to(this._onboardingCinematicBars, {
                        scaleY: 1,
                        delay: 1.8,
                        duration: 1,
                        ease: "Power4.easeInOut"
                    }).to(this._onboardingStep1, {
                        opacity: 1,
                        ease: "Power4.easeInOut"
                    }).to(this._onboardingStep1, {
                        opacity: 0,
                        delay: 1.8,
                        ease: "Power4.easeInOut"
                    }).to(this._onboardingStep2, {
                        opacity: 1,
                        ease: "Power4.easeInOut"
                    }).to(this._onboardingStep2, {
                        opacity: 0,
                        delay: 1.8,
                        ease: "Power4.easeInOut"
                    }).to(this._onboardingStep3, {
                        opacity: 1,
                        ease: "Power4.easeInOut"
                    }).to(this._onboardingStep3, {
                        opacity: 0,
                        delay: 2.5,
                        ease: "Power4.easeInOut",
                        onComplete: function() {
                            o.statusSignal.dispatch(n.STATUS.EXPLORE)
                        }
                    }),
                    this.tlFadeIn.play()
                }
            }, {
                key: "_hide",
                value: function() {
                    var t = this;
                    o.onStarted.dispatch(),
                    this.tlFadeOut.to(this._onboardingCinematicBars, {
                        scaleY: 0,
                        duration: 1,
                        ease: "Power4.easeInOut"
                    }).to(this._onboarding, {
                        opacity: 0,
                        delay: .5,
                        duration: .3,
                        ease: "Power4.easeInOut",
                        onComplete: function() {
                            t._delete()
                        }
                    }, 0),
                    this.tlFadeOut.play(),
                    i.gsap.to(o, {
                        opacity: 1,
                        duration: 1
                    })
                }
            }, {
                key: "_delete",
                value: function() {
                    var t = this;
                    setTimeout((function() {
                        t._onboarding.remove()
                    }
                    ), 3e3)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "resize",
                value: function() {}
            }]) && a(e.prototype, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t
        }());
        r.OnBoarding = l
    }
    , {
        "../../core/browser": 43,
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../constants": 67,
        gsap: 4
    }],
    66: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.Preloader = void 0;
        var n = t("../constants.js")
          , i = t("gsap");
        function a(t, e) {
            for (var r = 0; r < e.length; r++) {
                var n = e[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(t, n.key, n)
            }
        }
        var o = t("../../libs/gsap/CustomEase").default
          , s = t("../../core/properties")
          , l = t("../../core/settings")
          , c = function() {
            function t() {
                !function(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                this._preloader = document.getElementById("preloader"),
                this._preloaderTitle = document.getElementById("preloader-title"),
                this._preloaderPercentage = document.getElementById("preloader-percentage"),
                this._preloaderExplanation = document.getElementById("preloader-explanation"),
                this._preloaderBarInner = document.getElementById("preloader-bar-inner"),
                this._percent = 0,
                this._targetPercent = 0,
                this._isLoadingCompleted = !1,
                this._isAnimationCompleted = !1,
                this._cb,
                this.tlFadeIn = i.gsap.timeline({
                    paused: !0
                }),
                this.tlFadeOut = i.gsap.timeline({
                    paused: !0
                })
            }
            var e, r;
            return e = t,
            (r = [{
                key: "preInit",
                value: function(t) {
                    var e = this;
                    this._cb = t,
                    l.SKIP_ANIMATION ? (this._isAnimationCompleted = !0,
                    this._preloader.style.display = "none") : this._show(),
                    s.statusSignal.add((function(t) {
                        t === n.STATUS.ONBOARDING && e._hide()
                    }
                    )),
                    s.loader.start((function(t) {
                        e._targetPercent = t
                    }
                    ))
                }
            }, {
                key: "init",
                value: function() {}
            }, {
                key: "_show",
                value: function() {
                    var t = this;
                    this.tlFadeIn.fromTo(this._preloaderTitle, {
                        opacity: 0,
                        scaleX: .95
                    }, {
                        opacity: 1,
                        scaleX: 1,
                        duration: 2
                    }).fromTo(this._preloaderPercentage, {
                        opacity: 0,
                        y: 30
                    }, {
                        opacity: 1,
                        y: 0,
                        duration: 1.6
                    }, 0).fromTo(this._preloaderExplanation, {
                        opacity: 0,
                        y: 30
                    }, {
                        opacity: 1,
                        y: 0,
                        duration: 1.2,
                        ease: "Power2.easeInOut",
                        onComplete: function() {
                            t._isAnimationCompleted = !0
                        }
                    }, .05),
                    this.tlFadeIn.play()
                }
            }, {
                key: "_hide",
                value: function() {
                    var t = this;
                    this.tlFadeOut.to(this._preloaderPercentage, {
                        opacity: 0,
                        duration: .6
                    }).to(this._preloaderExplanation, {
                        opacity: 0,
                        duration: .6
                    }, .15).to(this._preloaderBarInner, {
                        scaleX: 0,
                        transformOrigin: "100% 0%",
                        duration: .8,
                        ease: o.create("easeIn", ".65,1.01,.97,1.00")
                    }, 1.1).to(this._preloaderTitle, {
                        opacity: 0,
                        duration: 1,
                        ease: o.create("easeIn", ".65,1.01,.97,1.00"),
                        onComplete: function() {
                            document.documentElement.classList.add("is-ready")
                        }
                    }).to(this._preloader, {
                        opacity: 0,
                        duration: 1,
                        onComplete: function() {
                            t._delete()
                        }
                    }),
                    this.tlFadeOut.play()
                }
            }, {
                key: "_delete",
                value: function() {
                    var t = this;
                    setTimeout((function() {
                        t._preloader.remove()
                    }
                    ), l.SKIP_ANIMATION ? 4 : 3e3)
                }
            }, {
                key: "update",
                value: function(t) {
                    if (this._percent < 1) {
                        this._percent = Math.min(this._targetPercent, this._percent + (this._targetPercent > this._percent ? 1 : 0) * (l.SKIP_ANIMATION ? 1 : t));
                        var e = Math.round(100 * this._percent);
                        this._preloaderPercentage.innerText = e + "%",
                        this._preloaderBarInner.style.transform = "scale3d(" + this._percent + ",1,1)"
                    } else
                        1 == this._percent && !this._isLoadingCompleted && this._isAnimationCompleted && (this._isLoadingCompleted = !0,
                        this._preloaderExplanation.innerText = "Experience is loaded",
                        this._cb(),
                        l.SKIP_ANIMATION ? (s.statusSignal.dispatch(n.STATUS.EXPLORE),
                        s.onStarted.dispatch(),
                        this._hide()) : (s.statusSignal.dispatch(n.STATUS.ONBOARDING),
                        l.SKIP_ONBOARING && s.statusSignal.dispatch(n.STATUS.EXPLORE)))
                }
            }, {
                key: "resize",
                value: function() {}
            }]) && a(e.prototype, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t
        }();
        r.Preloader = c
    }
    , {
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../../libs/gsap/CustomEase": 51,
        "../constants.js": 67,
        gsap: 4
    }],
    67: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.STATUS = void 0,
        r.STATUS = {
            PRELOAD: 0,
            ONBOARDING: 1,
            EXPLORE: 2,
            ABOUT: 3
        }
    }
    , {}],
    68: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.default = void 0;
        var n = t("./components/Preloader")
          , i = t("./components/OnBoarding")
          , a = t("./components/Explore")
          , o = t("./components/About")
          , s = t("../libs/splitting");
        function l(t, e) {
            (null == e || e > t.length) && (e = t.length);
            for (var r = 0, n = new Array(e); r < e; r++)
                n[r] = t[r];
            return n
        }
        function c(t, e) {
            for (var r = 0; r < e.length; r++) {
                var n = e[r];
                n.enumerable = n.enumerable || !1,
                n.configurable = !0,
                "value"in n && (n.writable = !0),
                Object.defineProperty(t, n.key, n)
            }
        }
        t("regenerator-runtime/runtime"),
        t("@lottiefiles/lottie-player"),
        t("../core/settings");
        var h = t("../core/properties")
          , u = new (function() {
            function t() {
                !function(t, e) {
                    if (!(t instanceof e))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                this._splitTarget = document.querySelectorAll("[split-by]"),
                this.preloader = new n.Preloader,
                this.onBoarding = new i.OnBoarding,
                this.explore = new a.Explore,
                this.about = new o.About
            }
            var e, r;
            return e = t,
            (r = [{
                key: "preInit",
                value: function(t) {
                    this._splitText(),
                    this.preloader.preInit(t),
                    this.onBoarding.preInit(),
                    this.explore.preInit(),
                    this.about.preInit(),
                    h.statusSignal.add((function(t) {
                        return h.status = t
                    }
                    ))
                }
            }, {
                key: "init",
                value: function() {
                    this.preloader.init(),
                    this.onBoarding.init(),
                    this.explore.init(),
                    this.about.init()
                }
            }, {
                key: "_splitText",
                value: function() {
                    this._splitTarget.forEach((function(t) {
                        var e, r = t.getAttribute("split-by"), n = null, i = [], a = 0;
                        if (t.innerHTML = t.innerHTML.replace(/<a.+?<\/a>/g, (function(t) {
                            var e = "%" + a++ + "%";
                            return i[i.length] = t,
                            e
                        }
                        )),
                        "letter" === r ? n = (0,
                        s.byLetter)(t.innerText) : "word" === r && (n = (0,
                        s.byWord)(t.innerText)),
                        n) {
                            var o;
                            (o = t.firstChild).replaceWith.apply(o, function(t) {
                                if (Array.isArray(t))
                                    return l(t)
                            }(e = n) || function(t) {
                                if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"])
                                    return Array.from(t)
                            }(e) || function(t, e) {
                                if (t) {
                                    if ("string" == typeof t)
                                        return l(t, e);
                                    var r = Object.prototype.toString.call(t).slice(8, -1);
                                    return "Object" === r && t.constructor && (r = t.constructor.name),
                                    "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? l(t, e) : void 0
                                }
                            }(e) || function() {
                                throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                            }());
                            for (var c = t.innerHTML, h = 0; h < a; h++)
                                c = c.replace("%" + h + "%", i[h]);
                            t.innerHTML = c
                        }
                    }
                    )),
                    this.splitted = !0
                }
            }, {
                key: "update",
                value: function(t) {
                    this.preloader.update(t)
                }
            }, {
                key: "resize",
                value: function() {}
            }]) && c(e.prototype, r),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t
        }());
        r.default = u
    }
    , {
        "../core/properties": 44,
        "../core/settings": 45,
        "../libs/splitting": 53,
        "./components/About": 63,
        "./components/Explore": 64,
        "./components/OnBoarding": 65,
        "./components/Preloader": 66,
        "@lottiefiles/lottie-player": 1,
        "regenerator-runtime/runtime": 37
    }],
    69: [function(t, e, r) {
        "use strict";
        var n, i, a = {
            Linear: {
                None: function(t) {
                    return t
                }
            },
            Quad: {
                In: function(t) {
                    return t * t
                },
                Out: function(t) {
                    return t * (2 - t)
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t : -.5 * (--t * (t - 2) - 1)
                }
            },
            Cubic: {
                In: function(t) {
                    return t * t * t
                },
                Out: function(t) {
                    return --t * t * t + 1
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2)
                }
            },
            Quart: {
                In: function(t) {
                    return t * t * t * t
                },
                Out: function(t) {
                    return 1 - --t * t * t * t
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t * t : -.5 * ((t -= 2) * t * t * t - 2)
                }
            },
            Quint: {
                In: function(t) {
                    return t * t * t * t * t
                },
                Out: function(t) {
                    return --t * t * t * t * t + 1
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2)
                }
            },
            Sine: {
                In: function(t) {
                    return 1 - Math.cos(t * Math.PI / 2)
                },
                Out: function(t) {
                    return Math.sin(t * Math.PI / 2)
                },
                InOut: function(t) {
                    return .5 * (1 - Math.cos(Math.PI * t))
                }
            },
            Expo: {
                In: function(t) {
                    return 0 === t ? 0 : Math.pow(1024, t - 1)
                },
                Out: function(t) {
                    return 1 === t ? 1 : 1 - Math.pow(2, -10 * t)
                },
                InOut: function(t) {
                    return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? .5 * Math.pow(1024, t - 1) : .5 * (2 - Math.pow(2, -10 * (t - 1)))
                }
            },
            Circ: {
                In: function(t) {
                    return 1 - Math.sqrt(1 - t * t)
                },
                Out: function(t) {
                    return Math.sqrt(1 - --t * t)
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
                }
            },
            Elastic: {
                In: function(t) {
                    var e, r = .1;
                    return 0 === t ? 0 : 1 === t ? 1 : (!r || r < 1 ? (r = 1,
                    e = .1) : e = .4 * Math.asin(1 / r) / (2 * Math.PI),
                    -r * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / .4))
                },
                Out: function(t) {
                    var e, r = .1;
                    return 0 === t ? 0 : 1 === t ? 1 : (!r || r < 1 ? (r = 1,
                    e = .1) : e = .4 * Math.asin(1 / r) / (2 * Math.PI),
                    r * Math.pow(2, -10 * t) * Math.sin(2 * (t - e) * Math.PI / .4) + 1)
                },
                InOut: function(t) {
                    var e, r = .1;
                    return 0 === t ? 0 : 1 === t ? 1 : (!r || r < 1 ? (r = 1,
                    e = .1) : e = .4 * Math.asin(1 / r) / (2 * Math.PI),
                    (t *= 2) < 1 ? -.5 * r * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / .4) : r * Math.pow(2, -10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / .4) * .5 + 1)
                }
            },
            Back: {
                In: function(t) {
                    var e = 1.70158;
                    return t * t * ((e + 1) * t - e)
                },
                Out: function(t) {
                    var e = 1.70158;
                    return --t * t * ((e + 1) * t + e) + 1
                },
                InOut: function(t) {
                    var e = 2.5949095;
                    return (t *= 2) < 1 ? .5 * t * t * ((e + 1) * t - e) : .5 * ((t -= 2) * t * ((e + 1) * t + e) + 2)
                }
            },
            Bounce: {
                In: function(t) {
                    return 1 - a.Bounce.Out(1 - t)
                },
                Out: function(t) {
                    return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
                },
                InOut: function(t) {
                    return t < .5 ? .5 * a.Bounce.In(2 * t) : .5 * a.Bounce.Out(2 * t - 1) + .5
                }
            }
        };
        for (n in r.basic = a,
        r.linear = a.Linear,
        a)
            "Linear" !== n && (i = a[n],
            r["easeIn" + n] = i.In,
            r["easeOut" + n] = i.Out,
            r["easeInOut" + n] = i.InOut)
    }
    , {}],
    70: [function(t, e, r) {
        "use strict";
        Object.defineProperty(r, "__esModule", {
            value: !0
        }),
        r.unMix = r.step = r.smoothstep = r.sign = r.saturate = r.powerTwoFloorBase = r.powerTwoFloor = r.powerTwoCeilingBase = r.powerTwoCeiling = r.normalize = r.mix = r.map = r.latLngDistance = r.latLngBearing = r.isPowerOfTwo = r.hash2 = r.hash = r.fract = r.fit = r.distanceTo3 = r.distanceTo = r.distanceSqrTo3 = r.distanceSqrTo = r.cubicBezierFn = r.cubicBezier = r.closestAngleTo = r.clamp = r.cUnMix = r.cMix = r.cMap = r.RAD2DEG = r.PI2 = r.PI = r.HALF_PI = r.DEG2RAD = void 0;
        var n = Math.PI;
        r.PI = n;
        var i = 2 * n;
        r.PI2 = i;
        var a = .5 * n;
        r.HALF_PI = a;
        var o = n / 180;
        r.DEG2RAD = o;
        var s = 180 / n;
        r.RAD2DEG = s,
        r.step = function(t, e) {
            return e < t ? 0 : 1
        }
        ;
        var l = function(t, e, r) {
            return t < e ? e : t > r ? r : t
        };
        r.clamp = l,
        r.mix = function(t, e, r) {
            return t + (e - t) * r
        }
        ,
        r.cMix = function(t, e, r) {
            return t + (e - t) * l(r, 0, 1)
        }
        ,
        r.unMix = function(t, e, r) {
            return (r - t) / (e - t)
        }
        ;
        var c = function(t, e, r) {
            return l((r - t) / (e - t), 0, 1)
        };
        r.cUnMix = c,
        r.saturate = function(t) {
            return l(t, 0, 1)
        }
        ;
        var h = function(t, e, r, n, i) {
            return n + (i - n) * (t - e) / (r - e)
        };
        r.map = h,
        r.cMap = function(t, e, r, n, i) {
            return n + (i - n) * l((t - e) / (r - e), 0, 1)
        }
        ,
        r.fit = function(t, e, r, n, i, a) {
            return t = c(e, r, t),
            a && (t = a(t)),
            n + t * (i - n)
        }
        ,
        r.normalize = function(t, e, r) {
            return h(t, e, r, 0, 1)
        }
        ,
        r.smoothstep = function(t, e, r) {
            return (r = c(t, e, r)) * r * (3 - 2 * r)
        }
        ;
        var u = function(t) {
            return t - Math.floor(t)
        };
        r.fract = u,
        r.hash = function(t) {
            return u(43758.5453123 * Math.sin(t))
        }
        ,
        r.hash2 = function(t, e) {
            return u(43758.5453 * Math.sin(12.9898 * t + 4.1414 * e))
        }
        ,
        r.sign = function(t) {
            return t ? t < 0 ? -1 : 1 : 0
        }
        ;
        var p = function(t) {
            return (t & -t) === t
        };
        r.isPowerOfTwo = p;
        var d = function(t) {
            return Math.ceil(Math.log(t) / Math.log(2))
        };
        r.powerTwoCeilingBase = d,
        r.powerTwoCeiling = function(t) {
            return p(t) ? t : 1 << d(t)
        }
        ;
        var f = function(t) {
            return Math.floor(Math.log(t) / Math.log(2))
        };
        r.powerTwoFloorBase = f,
        r.powerTwoFloor = function(t) {
            return p(t) ? t : 1 << f(t)
        }
        ,
        r.latLngBearing = function(t, e, r, n) {
            var i = Math.sin(n - e) * Math.cos(r)
              , a = Math.cos(t) * Math.sin(r) - Math.sin(t) * Math.cos(r) * Math.cos(n - e);
            return Math.atan2(i, a)
        }
        ,
        r.distanceTo = function(t, e) {
            return Math.sqrt(t * t + e * e)
        }
        ,
        r.distanceSqrTo = function(t, e) {
            return t * t + e * e
        }
        ,
        r.distanceTo3 = function(t, e, r) {
            return Math.sqrt(t * t + e * e + r * r)
        }
        ,
        r.distanceSqrTo3 = function(t, e, r) {
            return t * t + e * e + r * r
        }
        ,
        r.latLngDistance = function(t, e, r, n) {
            var i = Math.sin((r - t) / 2)
              , a = Math.sin((n - e) / 2)
              , o = i * i + Math.cos(t) * Math.cos(r) * a * a;
            return 2 * Math.atan2(Math.sqrt(o), Math.sqrt(1 - o))
        }
        ,
        r.cubicBezier = function(t, e, r, n, i) {
            var a = 3 * (e - t)
              , o = 3 * (r - e) - a
              , s = i * i;
            return s * i * (n - t - a - o) + o * s + a * i + t
        }
        ,
        r.cubicBezierFn = function(t, e, r, n) {
            var i = 3 * (e - t)
              , a = 3 * (r - e) - i
              , o = n - t - i - a;
            return function(e) {
                var r = e * e;
                return o * (r * e) + a * r + i * e + t
            }
        }
        ,
        r.closestAngleTo = function(t, e) {
            var r = e - t;
            return t + ((r = (r += n) < 0 ? i - Math.abs(r % i) : r % i) - n)
        }
    }
    , {}],
    71: [function(t, e, r) {
        "use strict";
        var n = t("../../core/settings")
          , i = t("../../core/properties")
          , a = t("../../helpers/fboHelper")
          , o = t("../../utils/math")
          , s = t("../sky/sky")
          , l = t("three")
          , c = t("glslify")
          , h = t("mout/object/mixIn");
        r.preInit = function() {
            g = new l.Vector4,
            y = new l.Vector4,
            _ = new l.Vector4,
            x = new l.Vector4,
            b = new l.Vector4,
            function() {
                T = a.createRenderTarget(D, D),
                M = a.createRenderTarget(D, D);
                var t = a.getColorState()
                  , e = a.renderer.getRenderTarget();
                a.renderer.setClearColor(8355584, 1),
                a.renderer.setRenderTarget(M),
                a.renderer.clearColor(),
                a.renderer.setRenderTarget(e),
                a.setColorState(t),
                I.fromList = [],
                I.toList = [];
                for (var r = 0; r < L; r++)
                    I.fromList[r] = new l.Vector4,
                    I.toList[r] = new l.Vector4;
                (w = new l.RawShaderMaterial({
                    uniforms: {
                        u_texture: R.u_prevMapDrawTexture,
                        u_fromList: {
                            value: I.fromList
                        },
                        u_toList: {
                            value: I.toList
                        },
                        u_mapSize: R.u_mapSize,
                        u_mapMaxHeight: R.u_mapMaxHeight
                    },
                    vertexShader: a.vertexShader,
                    fragmentShader: a.precisionPrefix + c(["#define GLSLIFY 1\nuniform sampler2D u_texture;\nuniform vec4 u_fromList[COUNT];\nuniform vec4 u_toList[COUNT];\n\nvarying vec2 v_uv;\n\nvec3 safeNormalize (vec3 v) {\n\tfloat l = dot(v, v);\n\treturn (l == 0.0) ? vec3 (0.0, 1.0, 0.0) : v / l / l;\n}\n\nfloat getStrength (vec2 p, vec4 a, vec4 b) {\n\tvec2 pa = p - a.xy, ba = b.xy - a.xy;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n\treturn (1.0 - clamp(length( pa - ba*h ) / max(0.00001, mix(a.z, b.z, h)), 0.0, 1.0)) * mix(a.w, b.w, h);\n}\n\nvoid main () {\n\tvec4 data = texture2D(u_texture, v_uv);\n\tdata.z = max(0.0, data.z - 1.0 / 255.0);\n\n\tfor (int i = 0; i < COUNT; i++) {\n\t\tvec4 from = u_fromList[i];\n\t\tvec4 to = u_toList[i];\n\t\tdata.z = max(data.z, getStrength(v_uv, from, to));\n\t}\n\n\tgl_FragColor = data;\n}"])
                })).defines.COUNT = L,
                S = new l.RawShaderMaterial({
                    uniforms: {
                        u_texture: R.u_prevMapDrawTexture,
                        u_halfTexelSize: {
                            value: new l.Vector2(.5 / D,.5 / D)
                        }
                    },
                    vertexShader: a.vertexShader,
                    fragmentShader: a.precisionPrefix + c(["#define GLSLIFY 1\nuniform sampler2D u_texture;\nuniform vec2 u_halfTexelSize;\n\nvarying vec2 v_uv;\n\nvoid main () {\n\tfloat v00 = texture2D(u_texture, v_uv + vec2(-u_halfTexelSize.x, -u_halfTexelSize.y)).z;\n\tfloat v10 = texture2D(u_texture, v_uv + vec2(u_halfTexelSize.x, -u_halfTexelSize.y)).z;\n\tfloat v01 = texture2D(u_texture, v_uv + vec2(-u_halfTexelSize.x, u_halfTexelSize.y)).z;\n\t\n\tvec3 dx = vec3(1.0, 0.0, v10 * 50.0) - vec3(0.0, 0.0, v00 * 50.0);\n\tvec3 dy = vec3(0.0, 1.0, v01 * 50.0) - vec3(0.0, 0.0, v00 * 50.0);\n\t\n\tgl_FragColor = vec4(normalize(cross(dx, dy)).xy * 0.5 + 0.5, texture2D(u_texture, v_uv).z, 1.0);\n\tgl_FragColor = vec4(normalize(cross(dx, dy)).xy * 0.5 + 0.5, texture2D(u_texture, v_uv).z, 1.0);\n}"])
                })
            }(),
            r.container = new l.Object3D,
            v = new Uint8Array(E * E * 4),
            i.loader.add(n.MODEL_PATH + "map.buf", {
                onLoad: k
            }),
            i.loader.add(n.MODEL_PATH + "map_bottom.buf", {
                onLoad: O
            }),
            R.u_mapTexture.value = i.loader.add(n.TEXTURE_PATH + "map.jpg", {
                type: "texture",
                minFilter: l.LinearFilter
            }).content,
            (m = R.u_mapInfoTexture.value = i.loader.add(n.TEXTURE_PATH + "map_info.png", {
                type: "texture",
                onLoad: F,
                minFilter: l.LinearFilter
            }).content).flipY = !1,
            r.container.scale.set(1, 1, 1).multiplyScalar(P)
        }
        ,
        r.init = function() {}
        ,
        r.resize = function(t, e) {}
        ,
        r.update = function(t) {}
        ,
        r.drawCircle = function(t, e, r, n) {
            var i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1;
            z(t, e, r, n, e, r, n, i)
        }
        ,
        r.drawCapsules = z,
        r.getY = function(t, e) {
            return N(b, t, e),
            b.w / 255 * C * P
        }
        ,
        r.getInfo = N,
        r.testSurfaceGrid = function(t, e) {
            var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 3;
            t = ~~o.clamp((t / P + .5) * A, 0, A),
            e = ~~o.clamp((e / P + .5) * A, 0, A);
            for (var n = t - r; n < t + r; n++)
                for (var i = e - r; i < e + r; i++)
                    if (B(b, o.clamp(n, 0, A), o.clamp(i, 0, A)),
                    0 == b.w)
                        return !1;
            return !0
        }
        ,
        r.renderDraw = function(t) {
            G(),
            a.render(w, M),
            G(),
            a.render(S, M)
        }
        ,
        r.container = null;
        var u, p, d, f, m, v, g, y, _, x, b, w, S, T, M, E = r.INFO_TEXTURE_SIZE = 512, A = r.INFO_TEXTURE_SIZE_M1 = E - 1, P = r.MAP_SIZE = 5, C = r.MAX_HEIGHT = .134619, L = r.MAX_DRAW_COUNT = 3, D = r.DRAW_TEXTURE_SIZE = 512, R = r.sharedUniforms = {
            u_mapTexture: {
                value: null
            },
            u_mapColorTexture: {
                value: null
            },
            u_mapInfoTexture: {
                value: null
            },
            u_mapSize: {
                value: P
            },
            u_mapMaxHeight: {
                value: C
            },
            u_prevMapDrawTexture: {
                value: null
            },
            u_currMapDrawTexture: {
                value: null
            }
        }, I = {};
        function k(t) {
            var e = a.createRenderTarget(256, 256);
            r.sharedUniforms.u_mapColorTexture.value = e.texture;
            var n = new l.RawShaderMaterial({
                uniforms: {},
                vertexShader: a.precisionPrefix + c(["#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 color;\nvarying vec3 v_color;\n\nvoid main () {\n\tv_color = color;\n\tgl_Position = vec4(position.xz * 2.0, 0.0, 1.0);\n}"]),
                fragmentShader: a.precisionPrefix + c(["#define GLSLIFY 1\nvarying vec3 v_color;\n\nvoid main () {\n\tgl_FragColor = vec4(v_color, 1.0);\n}"]),
                side: l.BackSide
            })
              , i = a.getColorState()
              , o = a.renderer.getRenderTarget();
            a.renderer.setClearColor(0, 1),
            a.renderGeometry(t, n, e),
            a.renderer.setRenderTarget(o),
            a.setColorState(i),
            (p = new l.ShaderMaterial({
                uniforms: h({
                    u_mapTexture: R.u_mapTexture
                }, s.sharedUniforms),
                vertexShader: c(["#define GLSLIFY 1\nattribute vec3 color;\nvarying vec3 v_worldPosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\nvarying vec3 v_color;\n\n#ifdef IS_BOTTOM\nattribute float yRatio;\nvarying float v_yRatio;\n#else\nvarying vec2 v_uv;\n#endif\n\nvoid main () {\n\tvec3 pos = position;\n\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\tv_viewPosition = mvPosition.xyz;\n\tv_viewNormal = normalMatrix * normal;\n\tv_color = color;\n\n#ifdef IS_BOTTOM\n\tv_yRatio = yRatio;\n#else\n\tv_uv = uv;\n#endif\n\n\tv_worldPosition = (modelMatrix * vec4(pos, 1.0)).xyz;\n\n\tgl_Position = projectionMatrix * mvPosition;\n}"]),
                fragmentShader: c(["#define GLSLIFY 1\nuniform vec3 u_sunViewDirection;\n\nuniform sampler2D u_mapTexture;\n\nvarying vec3 v_worldPosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\nvarying vec3 v_color;\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\n#include <fog>\n\n#ifdef IS_BOTTOM\nvarying float v_yRatio;\nuniform sampler2D u_blueNoiseTexture;\n#else \n#include <textureBicubic>\nvarying vec2 v_uv;\n\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See vec4(0.6,0.6,0.5333333333333333,0.5333333333333333)\n\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\tvec2 st0 = dFdx( v_uv );\n\tvec2 st1 = dFdy( v_uv );\n\tvec3 N = surf_norm; // normalized\n\tvec3 q1perp = cross( q1, N );\n\tvec3 q0perp = cross( N, q0 );\n\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\tfloat det = max( dot( T, T ), dot( B, B ) );\n\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det ) * 0.35;\n\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n}\n#endif\n\nfloat sdLine( vec3 p, vec3 a, vec3 b ) {\n\tvec3 pa = p - a, ba = b - a;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n\treturn length( pa - ba*h );\n}\n\nvoid main () {\n\n\tvec3 viewNormal = normalize(v_viewNormal);\n\tvec3 viewDirection = normalize(v_viewPosition);\n\n\t#ifndef IS_BOTTOM\n\t\t// vec3 texel = texture2D(u_mapTexture, v_uv).rgb;\n\t\tvec3 texel = textureBicubic(u_mapTexture, v_uv, vec2(2048.0)).rgb;\n\t\tfloat ao = texel.z;\n\t\tvec3 normalMap = texel * 2.0 - 1.0;\n\t\tnormalMap.z = sqrt(max(0.0, 1.0 - normalMap.x * normalMap.x - normalMap.y * normalMap.y));\n\t\tnormalMap = normalize(normalMap);\n\t\tviewNormal = perturbNormal2Arb(v_viewPosition, viewNormal, normalMap, 1.0);\n\t#endif\n\n\tvec3 specDir = reflect(viewDirection, viewNormal);\n\n\tfloat f = max(0.0, dot(u_sunViewDirection, specDir));\n\n\tvec3 worldNormal = inverseTransformDirection( viewNormal, viewMatrix );\n\tvec3 diff = texture2D(u_envTexture, equirectUv(worldNormal)).rgb;\n\t\n\tvec3 worldSpecDir = inverseTransformDirection( specDir, viewMatrix );\n\tvec3 spec = texture2D(u_envTexture, equirectUv(worldSpecDir)).rgb;\n\n\tfloat f2 = smoothstep(- v_color.r * 0.75, 1.5, f);\n\n\t#ifdef IS_BOTTOM\n\tvec3 samplePos = v_worldPosition + viewNormal * max(0.0, -specDir.z) * 3.0;\n\n\tfloat ao = texture2D(u_blueNoiseTexture, vec2((v_yRatio * (0.4 + v_yRatio * 0.6) * 2.5 + viewNormal.y * (0.02 + f * 0.1)) + samplePos.x * 0.015, samplePos.z * 0.015)).g * 0.5 + 0.5;\n\tgl_FragColor = vec4(ao * v_color + v_color * f, 1.0);\n\t#else\n\tgl_FragColor = vec4(ao * v_color * (0.5 + 0.5 * diff * 2.0) + v_color * spec * f2 * 0.3, 1.0);\n\t\n\t#endif\n\t\n\tgl_FragColor.rgb += pow(clamp(1.0 - sdLine(v_worldPosition, u_lightFrom, u_lightTo) / 1.0, 0.0, 1.0), 5.0) * max(0.0, dot(normalize((u_lightFrom + u_lightTo) * 0.5 - v_worldPosition), worldNormal)) * vec3(0.8,0.8666666666666667,1.);\n\n\tgl_FragColor.rgb = applyFog(gl_FragColor.rgb, v_worldPosition);\n\n}"])
            })).extensions.derivatives = !0,
            (u = new l.Mesh(t,p)).renderOrder = 0,
            r.container.add(u)
        }
        function O(t) {
            (f = new l.ShaderMaterial({
                uniforms: h({
                    u_mapTexture: R.u_mapTexture,
                    u_blueNoiseTexture: i.sharedUniforms.u_blueNoiseTexture
                }, s.sharedUniforms),
                vertexShader: c(["#define GLSLIFY 1\nattribute vec3 color;\nvarying vec3 v_worldPosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\nvarying vec3 v_color;\n\n#ifdef IS_BOTTOM\nattribute float yRatio;\nvarying float v_yRatio;\n#else\nvarying vec2 v_uv;\n#endif\n\nvoid main () {\n\tvec3 pos = position;\n\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\tv_viewPosition = mvPosition.xyz;\n\tv_viewNormal = normalMatrix * normal;\n\tv_color = color;\n\n#ifdef IS_BOTTOM\n\tv_yRatio = yRatio;\n#else\n\tv_uv = uv;\n#endif\n\n\tv_worldPosition = (modelMatrix * vec4(pos, 1.0)).xyz;\n\n\tgl_Position = projectionMatrix * mvPosition;\n}"]),
                fragmentShader: c(["#define GLSLIFY 1\nuniform vec3 u_sunViewDirection;\n\nuniform sampler2D u_mapTexture;\n\nvarying vec3 v_worldPosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\nvarying vec3 v_color;\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\n#include <fog>\n\n#ifdef IS_BOTTOM\nvarying float v_yRatio;\nuniform sampler2D u_blueNoiseTexture;\n#else \n#include <textureBicubic>\nvarying vec2 v_uv;\n\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See vec4(0.6,0.6,0.5333333333333333,0.5333333333333333)\n\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\tvec2 st0 = dFdx( v_uv );\n\tvec2 st1 = dFdy( v_uv );\n\tvec3 N = surf_norm; // normalized\n\tvec3 q1perp = cross( q1, N );\n\tvec3 q0perp = cross( N, q0 );\n\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\tfloat det = max( dot( T, T ), dot( B, B ) );\n\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det ) * 0.35;\n\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n}\n#endif\n\nfloat sdLine( vec3 p, vec3 a, vec3 b ) {\n\tvec3 pa = p - a, ba = b - a;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n\treturn length( pa - ba*h );\n}\n\nvoid main () {\n\n\tvec3 viewNormal = normalize(v_viewNormal);\n\tvec3 viewDirection = normalize(v_viewPosition);\n\n\t#ifndef IS_BOTTOM\n\t\t// vec3 texel = texture2D(u_mapTexture, v_uv).rgb;\n\t\tvec3 texel = textureBicubic(u_mapTexture, v_uv, vec2(2048.0)).rgb;\n\t\tfloat ao = texel.z;\n\t\tvec3 normalMap = texel * 2.0 - 1.0;\n\t\tnormalMap.z = sqrt(max(0.0, 1.0 - normalMap.x * normalMap.x - normalMap.y * normalMap.y));\n\t\tnormalMap = normalize(normalMap);\n\t\tviewNormal = perturbNormal2Arb(v_viewPosition, viewNormal, normalMap, 1.0);\n\t#endif\n\n\tvec3 specDir = reflect(viewDirection, viewNormal);\n\n\tfloat f = max(0.0, dot(u_sunViewDirection, specDir));\n\n\tvec3 worldNormal = inverseTransformDirection( viewNormal, viewMatrix );\n\tvec3 diff = texture2D(u_envTexture, equirectUv(worldNormal)).rgb;\n\t\n\tvec3 worldSpecDir = inverseTransformDirection( specDir, viewMatrix );\n\tvec3 spec = texture2D(u_envTexture, equirectUv(worldSpecDir)).rgb;\n\n\tfloat f2 = smoothstep(- v_color.r * 0.75, 1.5, f);\n\n\t#ifdef IS_BOTTOM\n\tvec3 samplePos = v_worldPosition + viewNormal * max(0.0, -specDir.z) * 3.0;\n\n\tfloat ao = texture2D(u_blueNoiseTexture, vec2((v_yRatio * (0.4 + v_yRatio * 0.6) * 2.5 + viewNormal.y * (0.02 + f * 0.1)) + samplePos.x * 0.015, samplePos.z * 0.015)).g * 0.5 + 0.5;\n\tgl_FragColor = vec4(ao * v_color + v_color * f, 1.0);\n\t#else\n\tgl_FragColor = vec4(ao * v_color * (0.5 + 0.5 * diff * 2.0) + v_color * spec * f2 * 0.3, 1.0);\n\t\n\t#endif\n\t\n\tgl_FragColor.rgb += pow(clamp(1.0 - sdLine(v_worldPosition, u_lightFrom, u_lightTo) / 1.0, 0.0, 1.0), 5.0) * max(0.0, dot(normalize((u_lightFrom + u_lightTo) * 0.5 - v_worldPosition), worldNormal)) * vec3(0.8,0.8666666666666667,1.);\n\n\tgl_FragColor.rgb = applyFog(gl_FragColor.rgb, v_worldPosition);\n\n}"])
            })).extensions.derivatives = !0,
            f.defines.IS_BOTTOM = !0,
            (d = new l.Mesh(t,f)).renderOrder = 0,
            r.container.add(d)
        }
        function F() {
            var t = a.createRenderTarget(E, E, !0, !0);
            a.copy(m, t),
            a.renderer.readRenderTargetPixels(t, 0, 0, t.width, t.height, v)
        }
        function N(t, e, r) {
            e = o.clamp((e / P + .5) * A, 0, A),
            r = o.clamp((r / P + .5) * A, 0, A),
            B(g, Math.floor(e), Math.floor(r)),
            B(y, Math.ceil(e), Math.floor(r)),
            B(_, Math.floor(e), Math.ceil(r)),
            B(x, Math.ceil(e), Math.ceil(r)),
            g.lerp(y, e % 1),
            _.lerp(x, e % 1),
            t.copy(g).lerp(_, r % 1)
        }
        function B(t, e, r) {
            t.fromArray(v, 4 * (r * E + e))
        }
        function z(t, e, r, n, i, a, o, s) {
            I.fromList[t].set(e / P + .5, r / P + .5, n / P, s),
            I.toList[t].set(i / P + .5, a / P + .5, o / P, s)
        }
        function G() {
            var t;
            t = T,
            T = M,
            M = t,
            R.u_prevMapDrawTexture.value = T.texture,
            R.u_currMapDrawTexture.value = M.texture
        }
    }
    , {
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../../helpers/fboHelper": 47,
        "../../utils/math": 70,
        "../sky/sky": 72,
        glslify: 3,
        "mout/object/mixIn": 20,
        three: 38
    }],
    72: [function(t, e, r) {
        "use strict";
        t("../../core/settings");
        var n = t("../../core/properties")
          , i = t("../../helpers/fboHelper")
          , a = t("../../helpers/shaderHelper")
          , o = (t("../../utils/math"),
        t("three"))
          , s = t("glslify");
        r.preInit = function() {
            a.addChunk("fog", s(["#define GLSLIFY 1\nuniform sampler2D u_envTexture;\nuniform float  u_fogB;\nuniform float  u_fogC;\n\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n\nuniform vec3 u_lightFrom;\nuniform vec3 u_lightTo;\nuniform float u_lightScatterDivider;\nuniform float u_lightScatterPowInv;\n\nfloat getScatter(vec3 start, vec3 dir, vec3 lightPos, float d) {\n\t// light to ray origin\n\tvec3 q = start - lightPos;\n\n\t// coefficients\n\tfloat b = dot(dir, q);\n\tfloat c = dot(q, q);\n\n\t// evaluate integral\n\t// float s = 1.0 / sqrt(c - b*b);\n\tfloat t = c - b*b;\n\t// float s = t <= 0.0 ? 1.0 : 1.0 / sqrt(t);\n\tfloat s = 1.0 / sqrt(max(0.0001, t));\n\tfloat l = s * (atan( (d + b) * s) - atan( b*s ));\n\n\treturn pow(max(0.0, l / u_lightScatterDivider), u_lightScatterPowInv);\n}\n\n// this function is not entirely safe as it removed some sceneriaos for performance issue.\nvec2 getScatterLine (vec3 start, vec3 dir, vec3 lightPos0, vec3 lightPos1, float d) {\n\n    // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n    // It returns the min distance between the ray and the segment\n    // defined by lightPos0 and lightPos1\n    // It can also set two optional targets :\n    // - The closest point on the ray\n    // - The closest point on the segment\n\n    vec3 segCenter = (lightPos0 + lightPos1) * 0.5;\n    vec3 segDir = normalize(lightPos1 - lightPos0);\n    vec3 diff = start - segCenter;\n\n    float segExtent = distance(lightPos0, lightPos1) * 0.5;\n    float a01 = -dot(dir, segDir);\n    float b0 = dot(diff, dir);\n    float b1 = - dot(diff, segDir);\n    float det = abs( 1.0 - a01 * a01 );\n    float s = clamp((a01 * b0 - b1) / max(0.0001, det), - segExtent, segExtent);\n    vec3 lightPos = segDir * s + segCenter;\n\n    return vec2(\n        getScatter(start, dir, segExtent > 0.0 ? lightPos : lightPos0, d),\n        s / segExtent * 0.5 + 0.5\n    );\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\t// dir is assumed to be unit length\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = -asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\n\nfloat getFog (in float dist, in vec3 rayOri, in vec3  rayDir ) {\n    return clamp(u_fogC * exp(-rayOri.y*u_fogB) * (1.0-exp( -dist*rayDir.y*u_fogB ))/rayDir.y, 0.0, 1.0);\n}\n\nvec3 applyFog(vec3 color, vec3 worldPosition) {\n\tvec3 toCamera = worldPosition - cameraPosition;\n\tvec3 nToCamera = normalize(toCamera);\n\tfloat fog = getFog(length(toCamera), cameraPosition, nToCamera);\n\tvec3 fogColor = texture2D(u_envTexture, equirectUv(nToCamera)).rgb;\n\n\tcolor = mix(color, fogColor, vec3(fog));\n\t\n\tvec2 scatterResult = getScatterLine(cameraPosition, nToCamera, u_lightFrom, u_lightTo, length(toCamera));\n\tcolor = color + max(0.0, scatterResult.x) * 0.5 * vec3(0.8,0.8666666666666667,1.);\n\t\n\treturn color;\n}"])),
            r.container = new o.Object3D,
            h = i.createRenderTarget(u, p),
            r.sharedUniforms.u_envTexture.value = h.texture,
            r.sunDirection = r.sharedUniforms.u_sunDirection.value = new o.Vector3(1,1,1).normalize(),
            r.sunViewDirection = r.sharedUniforms.u_sunViewDirection.value = new o.Vector3,
            c = new o.RawShaderMaterial({
                uniforms: {
                    u_sunDirection: d.u_sunDirection,
                    u_sunIntensity: d.u_sunIntensity
                },
                vertexShader: i.vertexShader,
                fragmentShader: i.precisionPrefix + s(["#define GLSLIFY 1\n#define PI 3.141592\n#define iSteps 16\n#define jSteps 8\n\nvec2 rsi(vec3 r0, vec3 rd, float sr) {\n    // ray-sphere intersection that assumes\n    // the sphere is centered at the origin.\n    // No intersection when result.x > result.y\n    float a = dot(rd, rd);\n    float b = 2.0 * dot(rd, r0);\n    float c = dot(r0, r0) - (sr * sr);\n    float d = (b*b) - 4.0*a*c;\n    if (d < 0.0) return vec2(1e5,-1e5);\n    return vec2(\n        (-b - sqrt(d))/(2.0*a),\n        (-b + sqrt(d))/(2.0*a)\n    );\n}\n\nvec3 atmosphere(vec3 r, vec3 r0, vec3 pSun, float iSun, float rPlanet, float rAtmos, vec3 kRlh, float kMie, float shRlh, float shMie, float g) {\n    // Normalize the sun and view directions.\n    pSun = normalize(pSun);\n    r = normalize(r);\n\n    // Calculate the step size of the primary ray.\n    vec2 p = rsi(r0, r, rAtmos);\n    if (p.x > p.y) return vec3(0,0,0);\n    p.y = min(p.y, rsi(r0, r, rPlanet).x);\n    float iStepSize = (p.y - p.x) / float(iSteps);\n\n    // Initialize the primary ray time.\n    float iTime = 0.0;\n\n    // Initialize accumulators for Rayleigh and Mie scattering.\n    vec3 totalRlh = vec3(0,0,0);\n    vec3 totalMie = vec3(0,0,0);\n\n    // Initialize optical depth accumulators for the primary ray.\n    float iOdRlh = 0.0;\n    float iOdMie = 0.0;\n\n    // Calculate the Rayleigh and Mie phases.\n    float mu = dot(r, pSun);\n    float mumu = mu * mu;\n    float gg = g * g;\n    float pRlh = 3.0 / (16.0 * PI) * (1.0 + mumu);\n    float pMie = 3.0 / (8.0 * PI) * ((1.0 - gg) * (mumu + 1.0)) / (pow(1.0 + gg - 2.0 * mu * g, 1.5) * (2.0 + gg));\n\n    // Sample the primary ray.\n    for (int i = 0; i < iSteps; i++) {\n\n        // Calculate the primary ray sample position.\n        vec3 iPos = r0 + r * (iTime + iStepSize * 0.5);\n\n        // Calculate the height of the sample.\n        float iHeight = length(iPos) - rPlanet;\n\n        // Calculate the optical depth of the Rayleigh and Mie scattering for this step.\n        float odStepRlh = exp(-iHeight / shRlh) * iStepSize;\n        float odStepMie = exp(-iHeight / shMie) * iStepSize;\n\n        // Accumulate optical depth.\n        iOdRlh += odStepRlh;\n        iOdMie += odStepMie;\n\n        // Calculate the step size of the secondary ray.\n        float jStepSize = rsi(iPos, pSun, rAtmos).y / float(jSteps);\n\n        // Initialize the secondary ray time.\n        float jTime = 0.0;\n\n        // Initialize optical depth accumulators for the secondary ray.\n        float jOdRlh = 0.0;\n        float jOdMie = 0.0;\n\n        // Sample the secondary ray.\n        for (int j = 0; j < jSteps; j++) {\n\n            // Calculate the secondary ray sample position.\n            vec3 jPos = iPos + pSun * (jTime + jStepSize * 0.5);\n\n            // Calculate the height of the sample.\n            float jHeight = length(jPos) - rPlanet;\n\n            // Accumulate the optical depth.\n            jOdRlh += exp(-jHeight / shRlh) * jStepSize;\n            jOdMie += exp(-jHeight / shMie) * jStepSize;\n\n            // Increment the secondary ray time.\n            jTime += jStepSize;\n        }\n\n        // Calculate attenuation.\n        vec3 attn = exp(-(kMie * (iOdMie + jOdMie) + kRlh * (iOdRlh + jOdRlh)));\n\n        // Accumulate scattering.\n        totalRlh += odStepRlh * attn;\n        totalMie += odStepMie * attn;\n\n        // Increment the primary ray time.\n        iTime += iStepSize;\n\n    }\n\n    // Calculate and return the final color.\n    return iSun * (pRlh * kRlh * totalRlh + pMie * kMie * totalMie);\n}\n\nuniform vec3 u_sunDirection;\nuniform float u_sunIntensity;\nvarying vec2 v_uv;\n\nvoid main() {\n\n\tvec2 latLong = v_uv * vec2(6.283185307179586, 3.141592653589793);\n\tvec3 dir = vec3(\n\t\t- cos(latLong.x) * sin(latLong.y),\n\t\tcos(latLong.y),\n\t\tsin(latLong.x) * sin(latLong.y)\n\t);\n\n    vec3 color = atmosphere(\n        dir,           // normalized ray direction\n        vec3(0,6372e3,0.0),               // ray origin\n        u_sunDirection,                        // position of the sun\n        u_sunIntensity,                           // intensity of the sun\n        6371e3,                         // radius of the planet in meters\n        6471e3,                         // radius of the atmosphere in meters\n        vec3(5.5e-6, 13.0e-6, 22.4e-6), // Rayleigh scattering coefficient\n        21e-6,                          // Mie scattering coefficient\n        8e3,                            // Rayleigh scale height\n        1.2e3,                          // Mie scale height\n        0.758                           // Mie preferred scattering direction\n    );\n\n    // Apply exposure.\n    color = 1.0 - exp(-1.0 * color);\n\n    gl_FragColor = vec4(color, 1.0);\n}"])
            }),
            f()
        }
        ,
        r.init = function() {
            l = new o.Mesh(new o.SphereBufferGeometry(20,32,24),new o.ShaderMaterial({
                uniforms: d,
                vertexShader: s(["#define GLSLIFY 1\nvarying vec3 v_worldPosition;\n\nvoid main () {\n\tv_worldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"]),
                fragmentShader: s(["#define GLSLIFY 1\nvarying vec3 v_worldPosition;\n\n#include <fog>\n\nvoid main () {\n    vec3 worldDir = normalize(v_worldPosition - cameraPosition);\n\n    vec2 uv = equirectUv(worldDir);\n\n    gl_FragColor = texture2D(u_envTexture, uv);\n\t\n\tvec3 toCamera = v_worldPosition - cameraPosition;\n\tvec3 nToCamera = normalize(toCamera);\n\tvec2 scatterResult = getScatterLine(cameraPosition, nToCamera, u_lightFrom, u_lightTo, length(toCamera));\n\tgl_FragColor.rgb += max(0.0, scatterResult.x) * 0.5;\n}"]),
                side: o.BackSide
            })),
            r.container.add(l)
        }
        ,
        r.generateEnv = f,
        r.resize = function(t, e) {}
        ,
        r.update = function(t) {
            l.position.copy(n.camera.position),
            r.sunViewDirection.copy(r.sunDirection).applyMatrix4(n.camera.matrixWorldInverse).normalize(),
            d.u_fogB.value = n.fogB,
            d.u_fogC.value = n.fogC,
            d.u_lightScatterDivider.value = n.lightScatterDivider,
            d.u_lightScatterPowInv.value = n.lightScatterPowInv
        }
        ,
        r.container = null,
        r.sunDirection = null,
        r.sunViewDirection = null;
        var l, c, h, u = r.TEXTURE_WIDTH = 256, p = r.TEXTURE_HEIGHT = 128, d = r.sharedUniforms = {
            u_envTexture: {
                value: null
            },
            u_sunDirection: {
                value: null
            },
            u_sunViewDirection: {
                value: null
            },
            u_sunIntensity: {
                value: 80
            },
            u_fogB: {
                value: 1
            },
            u_fogC: {
                value: 1
            },
            u_lightScatterDivider: {
                value: 1
            },
            u_lightScatterPowInv: {
                value: 1
            },
            u_lightFrom: {
                value: new o.Vector3
            },
            u_lightTo: {
                value: new o.Vector3
            }
        };
        function f() {
            i.render(c, h)
        }
    }
    , {
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../../helpers/fboHelper": 47,
        "../../helpers/shaderHelper": 48,
        "../../utils/math": 70,
        glslify: 3,
        three: 38
    }],
    73: [function(t, e, r) {
        "use strict";
        var n, i, a, o, s, l = t("../../core/settings"), c = t("../../core/properties"), h = t("../map/map"), u = t("../sky/sky"), p = (t("../../controls/input"),
        t("../../utils/math"),
        t("../../utils/ease"),
        t("three")), d = t("glslify"), f = t("mout/object/mixIn");
        r.preInit = function() {
            r.container = new p.Object3D,
            n = new p.Vector3,
            new p.Vector4,
            i = new p.Vector3,
            o = c.loader.add(l.TEXTURE_PATH + "ufo.png", {
                type: "texture",
                minFilter: p.LinearFilter
            }).content,
            s = c.loader.add(l.TEXTURE_PATH + "ufo_matcap.png", {
                type: "texture",
                minFilter: p.LinearFilter
            }).content,
            c.loader.add(l.MODEL_PATH + "ufo.buf", {
                onLoad: v
            })
        }
        ,
        r.init = function() {}
        ,
        r.resize = function() {}
        ,
        r.update = function(t) {
            var e = r.container.position;
            i.multiplyScalar(.9),
            c.isDown && (i.x -= (c.mouseXY.x - c.prevMouseXY.x) / c.height * c.width,
            i.z += c.mouseXY.y - c.prevMouseXY.y,
            i.length() > .5 && i.normalize().multiplyScalar(.5));
            var o = n.copy(i).applyQuaternion(c.camera.quaternion).setComponent(1, 0).multiplyScalar(2.5 * t);
            o.add(e),
            h.testSurfaceGrid(o.x, o.z) && e.copy(o),
            m += .05 * (h.getY(e.x, e.z) + .45 - m),
            e.y = m,
            a && (a.material.uniforms.u_time.value += t,
            r.container.rotation.x = .3 * i.z,
            r.container.rotation.z = .3 * i.x,
            a.rotation.y += t)
        }
        ,
        r.container = null;
        var m = .5;
        function v(t) {
            a = new p.Mesh(t,new p.ShaderMaterial({
                uniforms: f({
                    u_time: {
                        value: 0
                    },
                    u_texture: {
                        value: o
                    },
                    u_matcapTexture: {
                        value: s
                    }
                }, u.sharedUniforms),
                vertexShader: d(["#define GLSLIFY 1\nattribute float isCenter;\nuniform float u_time;\n\nvarying vec3 v_localPosition;\nvarying vec3 v_worldPosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\n\nvarying float v_isCenter;\nvarying vec2 v_uv;\n\nvoid main () {\n\tvec3 pos = position;\n\n\tv_isCenter = isCenter;\n\tv_uv = uv;\n\t\n\tv_worldPosition = (modelMatrix * vec4(pos, 1.0)).xyz;\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\tv_viewPosition = mvPosition.xyz;\n\tv_viewNormal = normalMatrix * normal;\n\tgl_Position = projectionMatrix * mvPosition;\n}"]),
                fragmentShader: d(["#define GLSLIFY 1\nuniform sampler2D u_texture;\nuniform sampler2D u_matcapTexture;\nuniform vec3 u_sunViewDirection;\n\nvarying vec3 v_worldPosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\n\nvarying float v_isCenter;\nvarying vec2 v_uv;\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\n#include <fog>\n\nvoid main () {\n\n\tvec3 viewNormal = normalize(v_viewNormal);\n\tvec3 viewDirection = normalize(v_viewPosition);\n\t// vec3 specDir = reflect(viewDirection, viewNormal);\n\t\n\tvec3 worldNormal = inverseTransformDirection( viewNormal, viewMatrix );\n\tvec3 diff = texture2D(u_envTexture, equirectUv(worldNormal)).rgb;\n\t\n\t// vec3 worldSpecDir = inverseTransformDirection( specDir, viewMatrix );\n\t// vec3 spec = texture2D(u_envTexture, equirectUv(worldSpecDir)).rgb;\n\n\tvec3 color = texture2D(u_texture, v_uv).rgb;\n\tfloat ao = color.g;\n\n\tvec3 viewDir = normalize( -v_viewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 matcapUv = vec2( dot( x, viewNormal ), dot( y, viewNormal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\tvec3 matcap = texture2D(u_matcapTexture, matcapUv).rgb;\n\n\tcolor = mix(matcap * color * 0.75 + color * 0.25, color, v_isCenter);\n\n\tgl_FragColor = vec4(-v_isCenter * 0.25 + matcap * diff * 0.35 + color, 1.0) * (0.5 + ao * 0.5);\n\n\t\n\tgl_FragColor.rgb = applyFog(gl_FragColor.rgb, v_worldPosition);\n}"])
            })),
            r.container.add(a)
        }
    }
    , {
        "../../controls/input": 42,
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../../utils/ease": 69,
        "../../utils/math": 70,
        "../map/map": 71,
        "../sky/sky": 72,
        glslify: 3,
        "mout/object/mixIn": 20,
        three: 38
    }],
    74: [function(t, e, r) {
        "use strict";
        var n = t("../../../core/settings")
          , i = t("../../../core/properties")
          , a = t("../../../helpers/fboHelper")
          , o = t("../victims")
          , s = t("../../map/map")
          , l = t("../../sky/sky")
          , c = t("three")
          , h = t("glslify");
        r.preInit = function() {
            for (var t = new Float32Array(_ * x * 4), e = new Float32Array(_ * x * 4), r = 0, w = 0; r < n.VICTIM_COUNT; r++) {
                t[w + 0] = 0,
                t[w + 1] = 0,
                t[w + 2] = 0,
                t[w + 3] = Math.random() * Math.PI * 2;
                var S = 2 * Math.pow(Math.random(), .5)
                  , T = Math.random() * Math.PI * 2;
                e[w + 0] = Math.cos(T) * S,
                e[w + 1] = 0,
                e[w + 2] = -Math.sin(T) * S,
                e[w + 3] = 0,
                w += 4
            }
            p = b.u_defaultVelocityAngleTexture.value = new c.DataTexture(t,_,x,c.RGBAFormat,c.FloatType,c.UVMapping,c.ClampToEdgeWrapping,c.ClampToEdgeWrapping,c.NearestFilter,c.NearestFilter),
            d = a.createRenderTarget(_, x, !0, !0, !0),
            f = a.createRenderTarget(_, x, !0, !0, !0),
            a.copy(p, f),
            v = b.u_defaultPositionStateTexture.value = new c.DataTexture(e,_,x,c.RGBAFormat,c.FloatType,c.UVMapping,c.ClampToEdgeWrapping,c.ClampToEdgeWrapping,c.NearestFilter,c.NearestFilter),
            g = a.createRenderTarget(_, x, !0, !0, !0),
            y = a.createRenderTarget(_, x, !0, !0, !0),
            a.copy(v, y),
            u = new c.RawShaderMaterial({
                uniforms: {
                    u_defaultVelocityAngleTexture: b.u_defaultVelocityAngleTexture,
                    u_velocityAngleTexture: b.u_prevVelocityAngleTexture,
                    u_positionStateTexture: b.u_prevPositionStateTexture,
                    u_mapInfoTexture: s.sharedUniforms.u_mapInfoTexture,
                    u_mapSize: s.sharedUniforms.u_mapSize,
                    u_mapMaxHeight: s.sharedUniforms.u_mapMaxHeight,
                    u_mapDrawTexture: s.sharedUniforms.u_currMapDrawTexture,
                    u_timeScale: i.sharedUniforms.u_timeScale,
                    u_time: i.sharedUniforms.u_time,
                    u_blueNoiseTexture: i.sharedUniforms.u_blueNoiseTexture,
                    u_blueNoiseTextureTexelSize: i.sharedUniforms.u_blueNoiseTextureTexelSize,
                    u_attractorPosition: o.sharedUniforms.u_attractorPosition,
                    u_lightFrom: l.sharedUniforms.u_lightFrom,
                    u_lightTo: l.sharedUniforms.u_lightTo
                },
                vertexShader: a.vertexShader,
                fragmentShader: a.precisionPrefix + h(["#define GLSLIFY 1\nuniform sampler2D u_defaultVelocityAngleTexture;\nuniform sampler2D u_velocityAngleTexture;\nuniform sampler2D u_positionStateTexture;\n\nuniform sampler2D u_mapInfoTexture;\nuniform float u_mapSize;\nuniform float u_mapMaxHeight;\nuniform sampler2D u_mapDrawTexture;\n\nuniform float u_timeScale;\nuniform float u_time;\nuniform sampler2D u_blueNoiseTexture;\nuniform vec2 u_blueNoiseTextureTexelSize;\n\nuniform vec3 u_lightFrom;\nuniform vec3 u_lightTo;\n\nvarying vec2 v_uv;\n\nconst float PI = 3.141592653589793;\nconst float PI2 = 6.283185307179586;\n\nvec4 hash42(vec2 p){\n\tvec4 p4 = fract(vec4(p.xyxy) * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\n\nfloat angleBetween (float from, float to) {\n\tfloat delta = to - from;\n\tdelta += PI;\n\tfloat modPI2 = mod(delta, PI2);\n\tdelta = delta < 0.0 ? PI2 - abs(modPI2) : modPI2;\n\tdelta -= PI;\n\treturn delta;\n}\n\nfloat boundAngle (float angle) {\n\treturn mod(angle + PI + PI2, PI2) - PI;\n}\n\nfloat sdLine( vec3 p, vec3 a, vec3 b ) {\n\tvec3 pa = p - a, ba = b - a;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n\treturn length( pa - ba*h );\n}\n\nvoid main () {\n\tvec4 randoms = hash42(gl_FragCoord.xy);\n\tvec4 velocityAngle = texture2D(u_velocityAngleTexture, v_uv);\n\tvec4 positionState = texture2D(u_positionStateTexture, v_uv);\n\tvec3 noise3 = texture2D(u_blueNoiseTexture, v_uv + vec2(u_time * 0.003, 0.0)).xyz;\n\n\tif (positionState.w < -2.0) {\n\t\tvelocityAngle = texture2D(u_defaultVelocityAngleTexture, v_uv);\n\t} else if (positionState.w < 1.0) {\n\t\tvelocityAngle.xz *= 0.9;\n\t} else if (positionState.w < 3.0001) {\n\n\t\tvec2 mapInfoUv = positionState.xz / u_mapSize + 0.5;\n\t\tvec4 mapInfo = texture2D(u_mapInfoTexture, mapInfoUv);\n\t\tvec2 pushDirection = normalize(mapInfo.xy * 2.0 - 1.0);\n\t\tfloat pushAngle = atan(pushDirection.y, pushDirection.x);\n\n\t\t// add random direction\n\t\tvelocityAngle.w = boundAngle(velocityAngle.w + (noise3.y - 0.5) * u_timeScale * mix(0.1, 3.0, randoms.y));\n\n\t\t// add map push force\n\t\tvelocityAngle.w += angleBetween(velocityAngle.w, pushAngle) * smoothstep(0.001 + 0.03 * randoms.x, 0.0, mapInfo.z);\n\n\t\tfloat speedCap = 0.0;\n\t\tfloat speed = 0.0;\n\t\tif (positionState.w < -1.0) {\n\t\t} else if (positionState.w < 1.0001) { // idle, walk\n\t\t\tspeed += positionState.w  * u_timeScale * 0.02;\n\t\t\tspeedCap = 0.0004;\n\t\t} else { // run\n\n\t\t\tvec3 drawData = texture2D(u_mapDrawTexture, mapInfoUv).rgb;\n\t\t\tpushDirection = normalize(drawData.xy * 2.0 - 1.0);\n\t\t\tpushAngle = atan(pushDirection.y, pushDirection.x);\n\t\t\tvelocityAngle.w += angleBetween(velocityAngle.w, pushAngle) * drawData.z;\n\t\t\t\n\t\t\tspeed += (0.12 + drawData.z * 0.1 * noise3.z) * u_timeScale;\n\t\t\tspeedCap = 0.0007 + drawData.z * 0.0012 * noise3.z;\n\t\t}\n\n\t\t// fit angle back to -PI to PI\n\t\tvelocityAngle.w = boundAngle(velocityAngle.w);\n\n\t\tvec2 angleVec = vec2(cos(velocityAngle.w), sin(velocityAngle.w)) ;\n\n\t\tspeed += length(velocityAngle.xz) * 0.8; // drag\n\n\t\tvelocityAngle.xz = angleVec * clamp(speed, 0.0, speedCap);\n\t\t\n\t\tif (positionState.w < -1.0) {\n\t\t\tvelocityAngle = texture2D(u_defaultVelocityAngleTexture, v_uv);\n\t\t}\n\t} else {\n\n\t\tfloat distToBeam = sdLine(positionState.xyz, u_lightFrom, u_lightTo);\n\t\tif (distToBeam < 0.3) {\n\t\t\tvelocityAngle.xyz *= 0.8;\n\t\t\tvec3 attractor = mix(u_lightFrom, u_lightTo, randoms.w) + normalize(noise3 - 0.5) * 0.05;\n\t\t\tvec3 delta = attractor - positionState.xyz;\n\t\t\tfloat attractorAngle = atan(delta.z, delta.x) + 1.570796;\n\t\t\tvelocityAngle.xz += vec2(cos(attractorAngle), sin(attractorAngle)) * u_timeScale * mix(0.005, 0.05, noise3.x);\n\t\t\t\n\t\t\tif (length(attractor - positionState.xyz) > 0.0001) {\n\t\t\t\tvelocityAngle.xyz += (attractor - positionState.xyz) * u_timeScale * mix(0.05, 0.5, noise3.y) * vec3(1.0, 0.5, 1.0);\n\t\t\t}\n\t\t} else {\n\t\t\tvelocityAngle.xz *= (1.0 + smoothstep(-1.1, -1.0, positionState.w) * 0.02);\n\t\t\tvelocityAngle.y -= u_timeScale * mix(0.01, 0.03, randoms.z);\n\t\t}\n\t}\n\t\n\n\tgl_FragColor = velocityAngle;\n}"])
            }),
            m = new c.RawShaderMaterial({
                uniforms: {
                    u_defaultPositionStateTexture: b.u_defaultPositionStateTexture,
                    u_velocityAngleTexture: b.u_currVelocityAngleTexture,
                    u_positionStateTexture: b.u_prevPositionStateTexture,
                    u_mapInfoTexture: s.sharedUniforms.u_mapInfoTexture,
                    u_mapSize: s.sharedUniforms.u_mapSize,
                    u_mapMaxHeight: s.sharedUniforms.u_mapMaxHeight,
                    u_mapDrawTexture: s.sharedUniforms.u_currMapDrawTexture,
                    u_timeScale: i.sharedUniforms.u_timeScale,
                    u_time: i.sharedUniforms.u_time,
                    u_blueNoiseTexture: i.sharedUniforms.u_blueNoiseTexture,
                    u_blueNoiseTextureTexelSize: i.sharedUniforms.u_blueNoiseTextureTexelSize,
                    u_attractorPosition: o.sharedUniforms.u_attractorPosition,
                    u_lightFrom: l.sharedUniforms.u_lightFrom,
                    u_lightTo: l.sharedUniforms.u_lightTo
                },
                vertexShader: a.vertexShader,
                fragmentShader: a.precisionPrefix + h(["#define GLSLIFY 1\nuniform sampler2D u_defaultPositionStateTexture;\nuniform sampler2D u_velocityAngleTexture;\nuniform sampler2D u_positionStateTexture;\n\nuniform sampler2D u_mapInfoTexture;\nuniform float u_mapSize;\nuniform float u_mapMaxHeight;\nuniform sampler2D u_mapDrawTexture;\n\nuniform float u_timeScale;\nuniform float u_time;\nuniform sampler2D u_blueNoiseTexture;\nuniform vec2 u_blueNoiseTextureTexelSize;\n\nuniform vec3 u_lightFrom;\nuniform vec3 u_lightTo;\n\nvarying vec2 v_uv;\n\nfloat sdLine( vec3 p, vec3 a, vec3 b ) {\n\tvec3 pa = p - a, ba = b - a;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n\treturn length( pa - ba*h );\n}\n\nvec2 hash22(vec2 p) {\n\tvec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n    p3 += dot(p3, p3.yzx+33.33);\n    return fract((p3.xx+p3.yz)*p3.zy);\n}\n\nvoid main () {\n\tvec4 velocityAngle = texture2D(u_velocityAngleTexture, v_uv);\n\tvec4 positionState = texture2D(u_positionStateTexture, v_uv);\n\tvec3 noise3 = texture2D(u_blueNoiseTexture, v_uv + vec2(u_time * 0.003, 0.0)).xyz;\n\n\tif (positionState.w < -2.0) {\n\t\tpositionState = texture2D(u_defaultPositionStateTexture, v_uv);\n\t} else if (positionState.w < -1.0) {\n\t\tpositionState.xz += velocityAngle.xz;\n\t} else if (positionState.w < 1.0001) { // idle, walk\n\t\tpositionState.xz += velocityAngle.xz * step(0.00005, length(velocityAngle.xz));\n\t\tpositionState.w = clamp(positionState.w + (noise3.x - 0.5) * u_timeScale, 0.0, 1.0);\n\t} else if (positionState.w < 3.0001) { // idle, walk\n\t\tpositionState.xz += velocityAngle.xz;\n\t} else {\n\t\tpositionState.xyz += velocityAngle.xyz;\n\t}\n\t\n\tvec2 mapInfoUv = positionState.xz / u_mapSize + 0.5;\n\tvec4 mapInfo = texture2D(u_mapInfoTexture, mapInfoUv);\n\tfloat surfaceHeight = mapInfo.w * u_mapMaxHeight * u_mapSize;\n\n\tif (positionState.w < 3.5) { // on the ground\n\t\tpositionState.y = surfaceHeight;\n\t} else {\n\t\tif ((velocityAngle.y < -0.01) && (positionState.y < surfaceHeight)) {\n\t\t\tpositionState.w = -1.0001;\n\t\t} else {\n\t\t\tpositionState.y = max(positionState.y, surfaceHeight);\n\t\t}\n\t}\n\n\tfloat heatWeight = texture2D(u_mapDrawTexture, mapInfoUv).z;\n\tif (positionState.w < -1.0) {\n\t\tpositionState.w -= u_timeScale * 0.15;\n\t} else {\n\t\tif (heatWeight > 0.001) {\n\t\t\tif (positionState.w < 3.0001) {\n\t\t\t\tpositionState.w = max(positionState.w + heatWeight * u_timeScale * 0.75, 2.0);\n\t\t\t} else {\n\t\t\t\tpositionState.w = 4.0;\n\t\t\t}\n\t\t} else {\n\t\t\tif (positionState.w > 1.0001 && positionState.w < 3.0001) {\n\t\t\t\tpositionState.w -= u_timeScale;\n\t\t\t}\n\t\t}\n\t}\n\n\tgl_FragColor = positionState;\n}"])
            })
        }
        ,
        r.init = function() {}
        ,
        r.update = function(t) {
            var e;
            e = d,
            d = f,
            f = e,
            b.u_prevVelocityAngleTexture.value = d.texture,
            b.u_currVelocityAngleTexture.value = f.texture,
            e = g,
            g = y,
            y = e,
            b.u_prevPositionStateTexture.value = g.texture,
            b.u_currPositionStateTexture.value = y.texture,
            a.render(u, f),
            a.render(m, y)
        }
        ;
        var u, p, d, f, m, v, g, y, _ = r.VICTIM_TEXTURE_WIDTH = Math.ceil(Math.sqrt(n.VICTIM_COUNT)), x = r.VICTIM_TEXTURE_HEIGHT = Math.ceil(n.VICTIM_COUNT / _), b = r.sharedUniforms = {
            u_defaultVelocityAngleTexture: {
                value: null
            },
            u_prevVelocityAngleTexture: {
                value: null
            },
            u_currVelocityAngleTexture: {
                value: null
            },
            u_defaultPositionStateTexture: {
                value: null
            },
            u_prevPositionStateTexture: {
                value: null
            },
            u_currPositionStateTexture: {
                value: null
            }
        }
    }
    , {
        "../../../core/properties": 44,
        "../../../core/settings": 45,
        "../../../helpers/fboHelper": 47,
        "../../map/map": 71,
        "../../sky/sky": 72,
        "../victims": 75,
        glslify: 3,
        three: 38
    }],
    75: [function(t, e, r) {
        "use strict";
        var n, i, a, o, s = t("../../core/browser"), l = t("../../core/settings"), c = t("../../core/properties"), h = t("./victimSims/victimSims"), u = t("three"), p = t("glslify"), d = t("../map/map"), f = t("../sky/sky"), m = t("mout/object/mixIn");
        r.preInit = function() {
            v = new u.Vector3,
            r.container = new u.Object3D,
            h.preInit(),
            c.loader.add(l.MODEL_PATH + (s.isMobile ? "person_low.buf" : "person.buf"), {
                onLoad: x
            }),
            (a = c.loader.add(l.TEXTURE_PATH + "person_colors.png", {
                type: "texture",
                flipY: !1,
                minFilter: u.NearestFilter
            }).content).magFilter = u.NearestFilter;
            for (var t = 0, e = _.length; t < e; t++) {
                var n = _[t];
                c.loader.add(l.MODEL_PATH + n + ".buf", {
                    noCache: !0,
                    onLoad: b.bind(this, n)
                })
            }
        }
        ,
        r.init = function() {
            h.init(),
            y[0] = 0;
            for (var t = 0, e = _.length; t < e; t++) {
                var s = g[_[t]];
                y[t + 1] = y[t] + s.frameCount
            }
            for (var l = y[y.length - 1], c = 22 * l * 2, v = 2 * Math.ceil(Math.sqrt(c) / 2), x = Math.ceil(c / v), b = new Float32Array(v * x * 4), w = 0, S = _.length; w < S; w++) {
                var T = g[_[w]];
                b.set(T.data, 22 * y[w] * 8)
            }
            var M = new u.DataTexture(b,v,x,u.RGBAFormat,u.FloatType,u.UVMapping,u.ClampToEdgeWrapping,u.ClampToEdgeWrapping,u.NearestFilter,u.NearestFilter);
            M.flipY = !1,
            (n = new u.Mesh(o,new u.ShaderMaterial({
                uniforms: m({
                    u_time: {
                        value: 0
                    },
                    u_animationTexture: {
                        value: M
                    },
                    u_animationTextureSize: {
                        value: new u.Vector2(v,x)
                    },
                    u_animationMaxFrame: {
                        value: l
                    },
                    u_animationBoneCount: {
                        value: 22
                    },
                    u_velocityAngleTexture: h.sharedUniforms.u_currVelocityAngleTexture,
                    u_positionStateTexture: h.sharedUniforms.u_currPositionStateTexture,
                    u_colorTexture: {
                        value: a
                    },
                    u_colorTextureTexelSize: {
                        value: new u.Vector2(1 / a.image.width,1 / a.image.height)
                    },
                    u_mapSize: d.sharedUniforms.u_mapSize,
                    u_mapColorTexture: d.sharedUniforms.u_mapColorTexture
                }, f.sharedUniforms),
                vertexShader: p(["#define GLSLIFY 1\nattribute vec2 boneIndices;\nattribute vec2 boneWeights;\n\nattribute vec2 victimTextureUvs;\nattribute vec4 victimRandoms;\nattribute vec3 victimRandomRotationAxis;\n\nuniform float u_time;\n\nuniform sampler2D u_animationTexture;\nuniform vec2 u_animationTextureSize;\nuniform float u_animationMaxFrame;\nuniform float u_animationBoneCount;\n\nuniform sampler2D u_velocityAngleTexture;\nuniform sampler2D u_positionStateTexture;\n\nvarying vec3 v_worldPosition;\nvarying vec3 v_basePosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\nvarying vec4 v_victimRandoms;\n\nvarying vec3 v_worldNormal;\n\nvec2 getAnimationUv(float pixelDataOffset) {\n\tpixelDataOffset += 0.5;\n\treturn (floor(vec2(\n\t\tmod(pixelDataOffset, u_animationTextureSize.x),\n\t\tpixelDataOffset / u_animationTextureSize.x\n\t)) + 0.5) / u_animationTextureSize;\n}\n\nvec3 qrotate(vec4 q, vec3 v) {\n\treturn v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n\nvec4 quat_from_axis_angle(vec3 axis, float halfAngle) {\n\treturn vec4(axis * sin(halfAngle), cos(halfAngle));\n}\n\nvoid main () {\n\tv_basePosition = position;\n\tv_victimRandoms = victimRandoms;\n\n\tvec4 velocityAngle = texture2D(u_velocityAngleTexture, victimTextureUvs);\n\tvec4 positionState = texture2D(u_positionStateTexture, victimTextureUvs);\n\n\tvec2 frameRange = vec2(0.0, 0.0);\n\n\t// TODO move this to hash table\n\tif (positionState.w < -1.0) {\n\t\tframeRange.x = frameRange.y = 690.0 + floor(victimRandoms.y * 6.0);\n\t} else {\n\t\tfloat speed = length(velocityAngle.xz);\n\t\tif (speed <= 0.00005) {\n\t\t\tframeRange.x = 0.0;\n\t\t\tframeRange.y = 359.0;\n\t\t} else if (positionState.w < 1.0001) {\n\t\t\tframeRange.x = 360.0;\n\t\t\tframeRange.y = 420.0;\n\t\t} else if (positionState.w < 3.0001) {\n\t\t\tframeRange.x = 421.0;\n\t\t\tframeRange.y = 462.0;\n\t\t} else {\n\t\t\tframeRange.x = 463.0;\n\t\t\tframeRange.y = 689.0;\n\t\t}\n\t}\n\n\tfloat frameIndex = floor(mod(victimRandoms.x * (frameRange.y - frameRange.x) + u_time * 60.0, max(1.0, frameRange.y - frameRange.x)) + frameRange.x);\n\tfloat dataOffset = frameIndex * u_animationBoneCount;\n\tvec2 pixelDataOffsets = (boneIndices + dataOffset) * 2.0;\n\n\tvec2 animationUv0 = getAnimationUv(pixelDataOffsets.x);\n\tvec2 animationUv1 = getAnimationUv(pixelDataOffsets.y);\n\n\tvec3 pos = vec3(0.0);\n\tvec3 nor = vec3(0.0);\n\n\tvec2 orientOffset = vec2(1.0 / u_animationTextureSize.x, 0.0);\n\n\tvec4 quat0 = texture2D(u_animationTexture, animationUv0 + orientOffset);\n\tvec4 quat1 = texture2D(u_animationTexture, animationUv1 + orientOffset);\n\n\tpos += (qrotate(quat0, position) + texture2D(u_animationTexture, animationUv0).xyz) * boneWeights.x;\n\tpos += (qrotate(quat1, position) + texture2D(u_animationTexture, animationUv1).xyz) * boneWeights.y;\n\n\tnor += qrotate(quat0, normal) * boneWeights.x;\n\tnor += qrotate(quat1, normal) * boneWeights.y;\n\n\tnor = normalize(nor);\n\t\n\tpos *= 0.01;\n\n\tif (positionState.w > 3.5) {\n\t\tvec4 victimRandomRotation = quat_from_axis_angle(victimRandomRotationAxis, u_time * 2.0 + victimRandoms.w * 3.1415926);\n\t\tpos = qrotate(victimRandomRotation, pos);\n\t\tnor = qrotate(victimRandomRotation, nor);\n\t} else {\n\t\tfloat cosAngle = cos(velocityAngle.w - 1.5707963267);\n\t\tfloat sinAngle = sin(velocityAngle.w - 1.5707963267);\n\t\tmat2 surfaceMovingRotation = mat2(cosAngle, sinAngle, -sinAngle, cosAngle);\n\t\tnor.xz = surfaceMovingRotation * nor.xz;\n\t\tpos.xz = surfaceMovingRotation * pos.xz;\n\t}\n\n\tvec3 instancePosition = positionState.xyz;\n\n\tvec4 mvPosition = modelViewMatrix * vec4(pos + instancePosition, 1.0);\n\tv_viewPosition = mvPosition.xyz;\n\tv_viewNormal = normalMatrix * nor;\n\n\tv_worldNormal = nor;\n\n\tv_worldPosition = (modelMatrix * vec4(pos + instancePosition, 1.0)).xyz;\n\n\tgl_Position = projectionMatrix * mvPosition;\n}"]),
                fragmentShader: p(["#define GLSLIFY 1\nuniform sampler2D u_colorTexture;\nuniform vec2 u_colorTextureTexelSize;\n\nuniform sampler2D u_mapColorTexture;\nuniform float u_mapSize;\n\nvarying vec3 v_worldPosition;\nvarying vec3 v_basePosition;\nvarying vec3 v_viewPosition;\nvarying vec3 v_viewNormal;\nvarying vec4 v_victimRandoms;\nvarying vec3 v_worldNormal;\n\n#include <fog>\n\nfloat sdLine( vec3 p, vec3 a, vec3 b ) {\n\tvec3 pa = p - a, ba = b - a;\n\tfloat h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n\treturn length( pa - ba*h );\n}\n\nvoid main () {\n\n\tvec3 worldNormal = normalize(v_worldNormal);\n\tvec3 viewNormal = normalize(v_viewNormal);\n\tvec3 viewDirection = normalize(v_viewPosition);\n\n\tvec2 absBasePositionXY = abs(v_basePosition.xy);\n\tvec2 flipXSize = vec2(0.468939, 1.76168); // male\n\tvec2 colorInfoUv = absBasePositionXY / flipXSize;\n\tcolorInfoUv.y = 1.0 - colorInfoUv.y;\n\tcolorInfoUv = colorInfoUv * vec2(3.0, 12.0) * u_colorTextureTexelSize;\n\tvec3 colorInfo = texture2D(u_colorTexture, colorInfoUv).rgb;\n\n\tvec3 skinTone = texture2D(u_colorTexture, vec2(v_victimRandoms.y, 15.5 * u_colorTextureTexelSize.y)).rgb;\n\tvec3 clothColor = texture2D(u_colorTexture, vec2(v_victimRandoms.z, (16.5 + floor(15.0 * v_victimRandoms.w) + colorInfo.b) * u_colorTextureTexelSize.y)).rgb; \n\n\tvec3 baseColor = mix(clothColor, skinTone, colorInfo.r);\n\n\tfloat diff = max(0.0, dot(viewNormal, normalize(vec3(1.0))));\n\tfloat f = max(0.0, -reflect(viewDirection, viewNormal).z);\n\tf = smoothstep(baseColor.r * 0.5, 1.75, f);\n\n\tvec2 mapInfoUv = v_worldPosition.xz / u_mapSize + 0.5;\n\tvec3 mapColor = texture2D(u_mapColorTexture, mapInfoUv).rgb;\n\tfloat mapLightWeight = smoothstep(1.0, -1.0, worldNormal.y) * (1.0 - v_basePosition.y / flipXSize.y);\n\n\tvec3 color = mix(baseColor * diff, mapColor, mapLightWeight) + f * (1.0 - colorInfo.r) * mapColor * 1.5;\n\n\tgl_FragColor = vec4(color, 1.0);\n\t\n\tgl_FragColor.rgb += pow(max(0.0, 1.0 - sdLine(v_worldPosition, u_lightFrom, u_lightTo) / 1.0), 5.0) * max(0.0, dot(normalize((u_lightFrom + u_lightTo) * 0.5 - v_worldPosition), worldNormal));\n\n\tgl_FragColor.rgb = applyFog(gl_FragColor.rgb, v_worldPosition);\n}"])
            }))).renderOrder = 10,
            n.frustumCulled = !1,
            r.container.add(n);
            var E = new u.InstancedBufferGeometry
              , A = new u.PlaneBufferGeometry(2,2,2,2);
            for (var P in A.rotateX(.5 * -Math.PI),
            A.attributes)
                E.setAttribute(P, A.attributes[P]);
            E.setIndex(A.getIndex()),
            E.setAttribute("victimTextureUvs", o.attributes.victimTextureUvs),
            (i = new u.Mesh(E,new u.ShaderMaterial({
                uniforms: m({
                    u_positionStateTexture: h.sharedUniforms.u_currPositionStateTexture,
                    u_mapInfoTexture: d.sharedUniforms.u_mapInfoTexture,
                    u_mapSize: d.sharedUniforms.u_mapSize,
                    u_mapMaxHeight: d.sharedUniforms.u_mapMaxHeight
                }, f.sharedUniforms),
                vertexShader: p(["#define GLSLIFY 1\nattribute vec2 victimTextureUvs;\n\nuniform sampler2D u_positionStateTexture;\n\nuniform sampler2D u_mapInfoTexture;\nuniform float u_mapSize;\nuniform float u_mapMaxHeight;\n\nvarying vec3 v_worldPosition;\nvarying vec3 v_basePosition;\nvarying float v_alpha;\n\nvec3 qrotate(vec4 q, vec3 v) {\n\treturn v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n\nvoid main () {\n\tv_basePosition = position;\n\n\tvec4 positionState = texture2D(u_positionStateTexture, victimTextureUvs);\n\tvec3 instancePosition = positionState.xyz;\n\n\t// vec3 mapColor = texture2D(u_mapTexture, mapInfoUv).rgb;\n\t\n\t// v_colorMultiplier = mapColor;\n\n\tvec2 mapInfoUv = instancePosition.xz / u_mapSize + 0.5;\n\tvec4 mapInfo = texture2D(u_mapInfoTexture, mapInfoUv);\n\tfloat baseY = mapInfo.w * u_mapMaxHeight * u_mapSize;\n\n\tfloat delta = instancePosition.y - baseY;\n\n\tvec3 pos = position * (0.01 + delta * 0.1) + instancePosition;\n\t\n\tmapInfoUv = pos.xz / u_mapSize + 0.5;\n\tmapInfo = texture2D(u_mapInfoTexture, mapInfoUv);\n\tpos.y = mapInfo.w * u_mapMaxHeight * u_mapSize;\n\t\n\tv_alpha = smoothstep(0.2, 0.0, delta) * 0.75;\n\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\n\tv_worldPosition = (modelMatrix * vec4(pos, 1.0)).xyz;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\tgl_Position.z -= 0.0005 / gl_Position.w;\n\n\tif (delta > 0.2) gl_Position.z = 2.0 * gl_Position.w;\n}"]),
                fragmentShader: p(["#define GLSLIFY 1\nvarying vec3 v_worldPosition;\nvarying vec3 v_basePosition;\nvarying float v_alpha;\n\n#include <fog>\n\nvoid main () {\n\tvec3 toCamera = v_worldPosition - cameraPosition;\n\tvec3 nToCamera = normalize(toCamera);\n\tfloat fog = getFog(length(toCamera), cameraPosition, nToCamera);\n\n\tvec2 scatterResult = getScatterLine(cameraPosition, nToCamera, u_lightFrom, u_lightTo, length(toCamera));\n\n\t// float d = 1.0 - v_alpha;\n\tfloat d = 1.0 - min(1.0, length(v_basePosition.xz));\n\td *= d * v_alpha * (1.0 - fog - scatterResult.x * 0.5);\n\tgl_FragColor = vec4((1.0 - d) * 0.65 + 0.35);\n\n}"]),
                depthWrite: !1,
                blending: u.MultiplyBlending
            }))).renderOrder = 5,
            i.frustumCulled = !1,
            r.container.add(i)
        }
        ,
        r.resize = function(t, e) {}
        ,
        r.update = function(t) {
            n.material.uniforms.u_time.value += t,
            h.update(t)
        }
        ,
        r.attractorPosition = new u.Vector3,
        r.container = null,
        r.sharedUniforms = {
            u_victimDataTexture: {
                value: null
            },
            u_attractorPosition: {
                value: r.attractorPosition
            }
        };
        var v, g = {}, y = [], _ = ["idle", "walking", "running", "falling", "dies"];
        function x(t) {
            for (var e in o = new u.InstancedBufferGeometry,
            t.attributes)
                o.setAttribute(e, t.attributes[e]);
            o.setIndex(t.getIndex());
            for (var r = h.VICTIM_TEXTURE_WIDTH, n = h.VICTIM_TEXTURE_HEIGHT, i = l.VICTIM_COUNT, a = new Float32Array(2 * i), s = new Float32Array(4 * i), c = new Float32Array(3 * i), p = 0, d = 0, f = 0, m = 0; p < i; p++)
                a[d + 0] = (p % r + .5) / r,
                a[d + 1] = (.5 + ~~(p / r)) / n,
                s[m + 0] = Math.random(),
                s[m + 1] = Math.random(),
                s[m + 2] = Math.random(),
                s[m + 3] = Math.random(),
                v.set(Math.random() - .5, Math.random() - .5, Math.random() - .5).normalize(),
                Math.random(),
                c[f + 0] = v.x,
                c[f + 1] = v.y,
                c[f + 2] = v.z,
                d += 2,
                f += 3,
                m += 4;
            o.setAttribute("victimTextureUvs", new u.InstancedBufferAttribute(a,2)),
            o.setAttribute("victimRandoms", new u.InstancedBufferAttribute(s,4)),
            o.setAttribute("victimRandomRotationAxis", new u.InstancedBufferAttribute(c,3))
        }
        function b(t, e) {
            for (var r = e.attributes.position.array, n = e.attributes.orient.array, i = e.attributes.position.array.length / 3, a = 2 * i, o = i / 22, s = new Float32Array(4 * a), l = 0, c = 0, h = 0, u = 0; l < i; l++)
                s[u + 0] = r[c + 0],
                s[u + 1] = r[c + 1],
                s[u + 2] = r[c + 2],
                s[u + 4] = n[h + 0],
                s[u + 5] = n[h + 1],
                s[u + 6] = n[h + 2],
                s[u + 7] = n[h + 3],
                c += 3,
                h += 4,
                u += 8;
            g[t] = {
                id: t,
                frameFragmentCount: i,
                pixelRequire: a,
                frameCount: o,
                data: s
            }
        }
    }
    , {
        "../../core/browser": 43,
        "../../core/properties": 44,
        "../../core/settings": 45,
        "../map/map": 71,
        "../sky/sky": 72,
        "./victimSims/victimSims": 74,
        glslify: 3,
        "mout/object/mixIn": 20,
        three: 38
    }],
    76: [function(t, e, r) {
        "use strict";
        var n, i, a = t("../core/browser"), o = (t("../core/settings"),
        t("../core/properties")), s = t("./map/map"), l = t("./victims/victims"), c = t("./sky/sky"), h = t("../audios/audios"), u = t("../utils/math"), p = t("../utils/ease"), d = t("three"), f = (t("glslify"),
        t("./ufo/ufo"));
        r.preInit = function() {
            i = new d.Vector3,
            n = new d.Vector3,
            m = new d.Vector3,
            r.container = new d.Object3D,
            s.preInit(),
            r.container.add(s.container),
            c.preInit(),
            r.container.add(c.container),
            l.preInit(),
            r.container.add(l.container),
            f.preInit(),
            r.container.add(f.container)
        }
        ,
        r.init = function() {
            s.init(),
            c.init(),
            l.init(),
            f.init()
        }
        ,
        r.resize = function(t, e) {}
        ,
        r.update = function(t) {
            f.update(t),
            n.lerp(f.container.position, .1),
            o.camera.position.add(n),
            s.update(t),
            c.update(t),
            l.attractorPosition.copy(f.container.position),
            l.update(t),
            v && (v = !1,
            m.copy(f.container.position)),
            s.drawCapsules(0, m.x, m.z, .3, f.container.position.x, f.container.position.z, .3, 1),
            m.copy(f.container.position),
            o.bokeh && (i.copy(f.container.position),
            c.sharedUniforms.u_lightFrom.value.copy(i),
            i.y = s.getY(i.x, i.z),
            c.sharedUniforms.u_lightTo.value.copy(i),
            i.applyMatrix4(o.camera.matrixWorldInverse),
            o.bokeh.focusDistance = -i.z),
            s.renderDraw(t),
            !a.isMobile && o.hasStarted && (h.crowdVolume = u.fit(o.camera.position.y - s.getY(o.camera.position.x, o.camera.position.z), 0, 1, 1, 0),
            h.screamVolume = u.fit(o.camera.position.distanceTo(f.container.position), 0, 2.5, 1, 0, p.easeOutCubic))
        }
        ,
        r.container = null;
        var m, v = !0
    }
    , {
        "../audios/audios": 39,
        "../core/browser": 43,
        "../core/properties": 44,
        "../core/settings": 45,
        "../utils/ease": 69,
        "../utils/math": 70,
        "./map/map": 71,
        "./sky/sky": 72,
        "./ufo/ufo": 73,
        "./victims/victims": 75,
        glslify: 3,
        three: 38
    }]
}, {}, [50]);
